<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="2025-04-28T15:12:00.291Z" name="download_date"/>
  <title>
   Connexion - EcoleDirecte
  </title>
  <meta content="EcoleDirecte : Bienvenue sur le site internet EcoleDirecte. Espace famille, élève, personnel, enseignant ..." name="description">
   <meta content="width=device-width, initial-scale=1" name="viewport"/>
   <base href="/"/>
   <link href="favicon.ico" rel="icon" type="image/x-icon"/>
   <link href="assets/icones/manifest/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
   <link href="manifest.json" rel="manifest"/>
   <link class="safari-pinned-tab" href="assets/icones/manifest/safari-pinned-tab.svg" rel="mask-icon"/>
   <meta content="Mon EcoleDirecte" name="apple-mobile-web-app-title"/>
   <meta content="EcoleDirecte" name="application-name"/>
   <meta content="app-id=1296851886" name="apple-itunes-app"/>
   <script async="" defer="" src="https://piwik.ecoledirecte.com/matomo.js" type="text/javascript">
   </script>
   <script type="text/javascript">
    MathJax = {
        loader: {
          load: ['[tex]/mhchem', 'a11y/semantic-enrich', 'a11y/explorer', 'a11y/assistive-mml']
        },
        tex: {
          packages: {
            '[+]': ['mhchem']
          },
          inlineMath: [
            ['$', '$'],
            ['\\(', '\\)']
          ], // Configuration des mathématiques en ligne
          displayMath: [
            ['$$', '$$'],
            ['\\[', '\\]']
          ] // Configuration pour les blocs d'équations
        },
        svg: {
          fontCache: 'global',
          scale: 1.2
        },
        options: {
          // Supprime les messages de chargement
          messageStyle: 'none',
          skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
          enableAssistiveMml: true,
          enableExplorer: true,
          enableEnrichment: true,
          sre: {
            speech: 'none',
            domain: 'mathspeak',
            style: 'default',
            locale: 'fr'
          },
          enrichError: (doc, math, err) => doc.enrichError(doc, math, err)
        },
        startup: {
          typeset: false // Empêche MathJax de faire un rendu automatique au chargement
        }
      };
   </script>
   <script async="" id="MathJax-script" type="text/javascript">
    (function(){"use strict";var __webpack_modules__={351:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AssistiveMmlHandler=e.AssistiveMmlMathDocumentMixin=e.AssistiveMmlMathItemMixin=e.LimitedMmlVisitor=void 0;var c=r(4474),u=r(9259),p=r(7233),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getAttributes=function(e){return t.prototype.getAttributes.call(this,e).replace(/ ?id=".*?"/,"")},e}(u.SerializedMmlVisitor);function f(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.assistiveMml=function(t,e){if(void 0===e&&(e=!1),!(this.state()>=c.STATE.ASSISTIVEMML)){if(!this.isEscaped&&(t.options.enableAssistiveMml||e)){var r=t.adaptor,n=t.toMML(this.root).replace(/\n */g,"").replace(/<!--.*?-->/g,""),o=r.firstChild(r.body(r.parse(n,"text/html"))),i=r.node("mjx-assistive-mml",{unselectable:"on",display:this.display?"block":"inline"},[o]);r.setAttribute(r.firstChild(this.typesetRoot),"aria-hidden","true"),r.setStyle(this.typesetRoot,"position","relative"),r.append(this.typesetRoot,i)}this.state(c.STATE.ASSISTIVEMML)}},e}(t)}function d(t){var e;return e=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,a([],s(e),!1))||this,o=n.constructor,i=o.ProcessBits;return i.has("assistive-mml")||i.allocate("assistive-mml"),n.visitor=new h(n.mmlFactory),n.options.MathItem=f(n.options.MathItem),"addStyles"in n&&n.addStyles(o.assistiveStyles),n}return o(e,t),e.prototype.toMML=function(t){return this.visitor.visitTree(t)},e.prototype.assistiveMml=function(){var t,e;if(!this.processed.isSet("assistive-mml")){try{for(var r=l(this.math),n=r.next();!n.done;n=r.next()){n.value.assistiveMml(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.processed.set("assistive-mml")}return this},e.prototype.state=function(e,r){return void 0===r&&(r=!1),t.prototype.state.call(this,e,r),e<c.STATE.ASSISTIVEMML&&this.processed.clear("assistive-mml"),this},e}(t),e.OPTIONS=i(i({},t.OPTIONS),{enableAssistiveMml:!0,renderActions:(0,p.expandable)(i(i({},t.OPTIONS.renderActions),{assistiveMml:[c.STATE.ASSISTIVEMML]}))}),e.assistiveStyles={"mjx-assistive-mml":{position:"absolute !important",top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)",padding:"1px 0px 0px 0px !important",border:"0px !important",display:"block !important",width:"auto !important",overflow:"hidden !important","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},'mjx-assistive-mml[display="block"]':{width:"100% !important"}},e}e.LimitedMmlVisitor=h,(0,c.newState)("ASSISTIVEMML",153),e.AssistiveMmlMathItemMixin=f,e.AssistiveMmlMathDocumentMixin=d,e.AssistiveMmlHandler=function(t){return t.documentClass=d(t.documentClass),t}},5282:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=new Map;e.default=r},5445:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{l(n.next(t))}catch(t){i(t)}}function a(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.sreReady=e.Sre=void 0;var c,u=i(r(2998)),p=i(r(3362)),h=i(r(9552)),f=i(r(4440)),d=l(r(5897)),m=r(8504),y=i(r(3090)),g=r(1377),b=l(r(5282));!function(t){t.locales=g.Variables.LOCALES,t.sreReady=u.engineReady,t.setupEngine=u.setupEngine,t.engineSetup=u.engineSetup,t.toEnriched=u.toEnriched,t.toSpeech=u.toSpeech,t.clearspeakPreferences=m.ClearspeakPreferences,t.getHighlighter=y.highlighter,t.getSpeechGenerator=h.generator,t.getWalker=p.walker,t.clearspeakStyle=function(){return f.DOMAIN_TO_STYLES.clearspeak},t.preloadLocales=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(r){return[2,(e=b.default.get(t))?new Promise((function(t,r){return t(JSON.stringify(e))})):u.localeLoader()(t)]}))}))}}(c=e.Sre||(e.Sre={})),e.sreReady=c.sreReady,d.default.getInstance().delay=!0,e.default=c},444:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLAdaptor=void 0;var s=function(t){function e(e){var r=t.call(this,e.document)||this;return r.window=e,r.parser=new e.DOMParser,r}return o(e,t),e.prototype.parse=function(t,e){return void 0===e&&(e="text/html"),this.parser.parseFromString(t,e)},e.prototype.create=function(t,e){return e?this.document.createElementNS(e,t):this.document.createElement(t)},e.prototype.text=function(t){return this.document.createTextNode(t)},e.prototype.head=function(t){return t.head||t},e.prototype.body=function(t){return t.body||t},e.prototype.root=function(t){return t.documentElement||t},e.prototype.doctype=function(t){return t.doctype?"<!DOCTYPE ".concat(t.doctype.name,">"):""},e.prototype.tags=function(t,e,r){void 0===r&&(r=null);var n=r?t.getElementsByTagNameNS(r,e):t.getElementsByTagName(e);return Array.from(n)},e.prototype.getElements=function(t,e){var r,n,o=[];try{for(var s=i(t),a=s.next();!a.done;a=s.next()){var l=a.value;"string"==typeof l?o=o.concat(Array.from(this.document.querySelectorAll(l))):Array.isArray(l)||l instanceof this.window.NodeList||l instanceof this.window.HTMLCollection?o=o.concat(Array.from(l)):o.push(l)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},e.prototype.contains=function(t,e){return t.contains(e)},e.prototype.parent=function(t){return t.parentNode},e.prototype.append=function(t,e){return t.appendChild(e)},e.prototype.insert=function(t,e){return this.parent(e).insertBefore(t,e)},e.prototype.remove=function(t){return this.parent(t).removeChild(t)},e.prototype.replace=function(t,e){return this.parent(e).replaceChild(t,e)},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.split=function(t,e){return t.splitText(e)},e.prototype.next=function(t){return t.nextSibling},e.prototype.previous=function(t){return t.previousSibling},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.lastChild=function(t){return t.lastChild},e.prototype.childNodes=function(t){return Array.from(t.childNodes)},e.prototype.childNode=function(t,e){return t.childNodes[e]},e.prototype.kind=function(t){var e=t.nodeType;return 1===e||3===e||8===e?t.nodeName.toLowerCase():""},e.prototype.value=function(t){return t.nodeValue||""},e.prototype.textContent=function(t){return t.textContent},e.prototype.innerHTML=function(t){return t.innerHTML},e.prototype.outerHTML=function(t){return t.outerHTML},e.prototype.serializeXML=function(t){return(new this.window.XMLSerializer).serializeToString(t)},e.prototype.setAttribute=function(t,e,r,n){return void 0===n&&(n=null),n?(e=n.replace(/.*\//,"")+":"+e.replace(/^.*:/,""),t.setAttributeNS(n,e,r)):t.setAttribute(e,r)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.removeAttribute=function(t,e){return t.removeAttribute(e)},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.allAttributes=function(t){return Array.from(t.attributes).map((function(t){return{name:t.name,value:t.value}}))},e.prototype.addClass=function(t,e){t.classList?t.classList.add(e):t.className=(t.className+" "+e).trim()},e.prototype.removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.split(/ /).filter((function(t){return t!==e})).join(" ")},e.prototype.hasClass=function(t,e){return t.classList?t.classList.contains(e):t.className.split(/ /).indexOf(e)>=0},e.prototype.setStyle=function(t,e,r){t.style[e]=r},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.allStyles=function(t){return t.style.cssText},e.prototype.insertRules=function(t,e){var r,n;try{for(var o=i(e.reverse()),s=o.next();!s.done;s=o.next()){var a=s.value;try{t.sheet.insertRule(a,0)}catch(t){console.warn("MathJax: can't insert css rule '".concat(a,"': ").concat(t.message))}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.fontSize=function(t){var e=this.window.getComputedStyle(t);return parseFloat(e.fontSize)},e.prototype.fontFamily=function(t){return this.window.getComputedStyle(t).fontFamily||""},e.prototype.nodeSize=function(t,e,r){if(void 0===e&&(e=1),void 0===r&&(r=!1),r&&t.getBBox){var n=t.getBBox();return[n.width/e,n.height/e]}return[t.offsetWidth/e,t.offsetHeight/e]},e.prototype.nodeBBox=function(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.right,top:e.top,bottom:e.bottom}},e}(r(5009).AbstractDOMAdaptor);e.HTMLAdaptor=s},6191:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.browserAdaptor=void 0;var n=r(444);e.browserAdaptor=function(){return new n.HTMLAdaptor(window)}},9515:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MathJax=e.combineWithMathJax=e.combineDefaults=e.combineConfig=e.isObject=void 0;var o=r(3282);function i(t){return"object"==typeof t&&null!==t}function s(t,e){var r,o;try{for(var a=n(Object.keys(e)),l=a.next();!l.done;l=a.next()){var c=l.value;"__esModule"!==c&&(!i(t[c])||!i(e[c])||e[c]instanceof Promise?null!==e[c]&&void 0!==e[c]&&(t[c]=e[c]):s(t[c],e[c]))}}catch(t){r={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return t}e.isObject=i,e.combineConfig=s,e.combineDefaults=function t(e,r,o){var s,a;e[r]||(e[r]={}),e=e[r];try{for(var l=n(Object.keys(o)),c=l.next();!c.done;c=l.next()){var u=c.value;i(e[u])&&i(o[u])?t(e,u,o[u]):null==e[u]&&null!=o[u]&&(e[u]=o[u])}}catch(t){s={error:t}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}return e},e.combineWithMathJax=function(t){return s(e.MathJax,t)},void 0===r.g.MathJax&&(r.g.MathJax={}),r.g.MathJax.version||(r.g.MathJax={version:o.VERSION,_:{},config:r.g.MathJax}),e.MathJax=r.g.MathJax},235:function(t,e,r){var n,o,i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CONFIG=e.MathJax=e.Loader=e.PathFilters=e.PackageError=e.Package=void 0;var s=r(9515),a=r(265),l=r(265);Object.defineProperty(e,"Package",{enumerable:!0,get:function(){return l.Package}}),Object.defineProperty(e,"PackageError",{enumerable:!0,get:function(){return l.PackageError}});var c,u=r(7525);if(e.PathFilters={source:function(t){return e.CONFIG.source.hasOwnProperty(t.name)&&(t.name=e.CONFIG.source[t.name]),!0},normalize:function(t){var e=t.name;return e.match(/^(?:[a-z]+:\/)?\/|[a-z]:\\|\[/i)||(t.name="[mathjax]/"+e.replace(/^\.\//,"")),t.addExtension&&!e.match(/\.[^\/]+$/)&&(t.name+=".js"),!0},prefix:function(t){for(var r;(r=t.name.match(/^\[([^\]]*)\]/))&&e.CONFIG.paths.hasOwnProperty(r[1]);)t.name=e.CONFIG.paths[r[1]]+t.name.substr(r[0].length);return!0}},function(t){var r=s.MathJax.version;t.versions=new Map,t.ready=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];0===r.length&&(r=Array.from(a.Package.packages.keys()));var o=[];try{for(var s=i(r),l=s.next();!l.done;l=s.next()){var c=l.value,u=a.Package.packages.get(c)||new a.Package(c,!0);o.push(u.promise)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return Promise.all(o)},t.load=function(){for(var r,n,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];if(0===o.length)return Promise.resolve();var l=[],c=function(r){var n=a.Package.packages.get(r);n||(n=new a.Package(r)).provides(e.CONFIG.provides[r]),n.checkNoLoad(),l.push(n.promise.then((function(){e.CONFIG.versionWarnings&&n.isLoaded&&!t.versions.has(a.Package.resolvePath(r))&&console.warn("No version information available for component ".concat(r))})))};try{for(var u=i(o),p=u.next();!p.done;p=u.next()){var h=p.value;c(h)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return a.Package.loadAll(),Promise.all(l)},t.preLoad=function(){for(var t,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{for(var s=i(n),l=s.next();!l.done;l=s.next()){var c=l.value,u=a.Package.packages.get(c);u||(u=new a.Package(c,!0)).provides(e.CONFIG.provides[c]),u.loaded()}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}},t.defaultReady=function(){void 0!==e.MathJax.startup&&e.MathJax.config.startup.ready()},t.getRoot=function(){var t="//../../es5";if("undefined"!=typeof document){var e=document.currentScript||document.getElementById("MathJax-script");e&&(t=e.src.replace(/\/[^\/]*$/,""))}return t},t.checkVersion=function(n,o,i){return t.versions.set(a.Package.resolvePath(n),r),!(!e.CONFIG.versionWarnings||o===r)&&(console.warn("Component ".concat(n," uses ").concat(o," of MathJax; version in use is ").concat(r)),!0)},t.pathFilters=new u.FunctionList,t.pathFilters.add(e.PathFilters.source,0),t.pathFilters.add(e.PathFilters.normalize,10),t.pathFilters.add(e.PathFilters.prefix,20)}(c=e.Loader||(e.Loader={})),e.MathJax=s.MathJax,void 0===e.MathJax.loader){(0,s.combineDefaults)(e.MathJax.config,"loader",{paths:{mathjax:c.getRoot()},source:{},dependencies:{},provides:{},load:[],ready:c.defaultReady.bind(c),failed:function(t){return console.log("MathJax(".concat(t.package||"?","): ").concat(t.message))},require:null,pathFilters:[],versionWarnings:!0}),(0,s.combineWithMathJax)({loader:c});try{for(var p=i(e.MathJax.config.loader.pathFilters),h=p.next();!h.done;h=p.next()){var f=h.value;Array.isArray(f)?c.pathFilters.add(f[0],f[1]):c.pathFilters.add(f)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}}e.CONFIG=e.MathJax.config.loader},265:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Package=e.PackageError=void 0;var l=r(235),c=function(t){function e(e,r){var n=t.call(this,e)||this;return n.package=r,n}return o(e,t),e}(Error);e.PackageError=c;var u=function(){function t(e,r){void 0===r&&(r=!1),this.isLoaded=!1,this.isLoading=!1,this.hasFailed=!1,this.dependents=[],this.dependencies=[],this.dependencyCount=0,this.provided=[],this.name=e,this.noLoad=r,t.packages.set(e,this),this.promise=this.makePromise(this.makeDependencies())}return Object.defineProperty(t.prototype,"canLoad",{get:function(){return 0===this.dependencyCount&&!this.noLoad&&!this.isLoading&&!this.hasFailed},enumerable:!1,configurable:!0}),t.resolvePath=function(t,e){void 0===e&&(e=!0);var r={name:t,original:t,addExtension:e};return l.Loader.pathFilters.execute(r),r.name},t.loadAll=function(){var t,e;try{for(var r=i(this.packages.values()),n=r.next();!n.done;n=r.next()){var o=n.value;o.canLoad&&o.load()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.makeDependencies=function(){var e,r,n=[],o=t.packages,c=this.noLoad,u=this.name,p=[];l.CONFIG.dependencies.hasOwnProperty(u)?p.push.apply(p,a([],s(l.CONFIG.dependencies[u]),!1)):"core"!==u&&p.push("core");try{for(var h=i(p),f=h.next();!f.done;f=h.next()){var d=f.value,m=o.get(d)||new t(d,c);this.dependencies.indexOf(m)<0&&(m.addDependent(this,c),this.dependencies.push(m),m.isLoaded||(this.dependencyCount++,n.push(m.promise)))}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}return n},t.prototype.makePromise=function(t){var e=this,r=new Promise((function(t,r){e.resolve=t,e.reject=r})),n=l.CONFIG[this.name]||{};return n.ready&&(r=r.then((function(t){return n.ready(e.name)}))),t.length&&(t.push(r),r=Promise.all(t).then((function(t){return t.join(", ")}))),n.failed&&r.catch((function(t){return n.failed(new c(t,e.name))})),r},t.prototype.load=function(){if(!this.isLoaded&&!this.isLoading&&!this.noLoad){this.isLoading=!0;var e=t.resolvePath(this.name);l.CONFIG.require?this.loadCustom(e):this.loadScript(e)}},t.prototype.loadCustom=function(t){var e=this;try{var r=l.CONFIG.require(t);r instanceof Promise?r.then((function(){return e.checkLoad()})).catch((function(r){return e.failed("Can't load \""+t+'"\n'+r.message.trim())})):this.checkLoad()}catch(t){this.failed(t.message)}},t.prototype.loadScript=function(t){var e=this,r=document.createElement("script");r.src=t,r.charset="UTF-8",r.onload=function(t){return e.checkLoad()},r.onerror=function(r){return e.failed("Can't load \""+t+'"')},document.head.appendChild(r)},t.prototype.loaded=function(){var t,e,r,n;this.isLoaded=!0,this.isLoading=!1;try{for(var o=i(this.dependents),s=o.next();!s.done;s=o.next()){s.value.requirementSatisfied()}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}try{for(var a=i(this.provided),l=a.next();!l.done;l=a.next()){l.value.loaded()}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}this.resolve(this.name)},t.prototype.failed=function(t){this.hasFailed=!0,this.isLoading=!1,this.reject(new c(t,this.name))},t.prototype.checkLoad=function(){var t=this;((l.CONFIG[this.name]||{}).checkReady||function(){return Promise.resolve()})().then((function(){return t.loaded()})).catch((function(e){return t.failed(e)}))},t.prototype.requirementSatisfied=function(){this.dependencyCount&&(this.dependencyCount--,this.canLoad&&this.load())},t.prototype.provides=function(e){var r,n;void 0===e&&(e=[]);try{for(var o=i(e),s=o.next();!s.done;s=o.next()){var a=s.value,c=t.packages.get(a);c||(l.CONFIG.dependencies[a]||(l.CONFIG.dependencies[a]=[]),l.CONFIG.dependencies[a].push(a),(c=new t(a,!0)).isLoading=!0),this.provided.push(c)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.addDependent=function(t,e){this.dependents.push(t),e||this.checkNoLoad()},t.prototype.checkNoLoad=function(){var t,e;if(this.noLoad){this.noLoad=!1;try{for(var r=i(this.dependencies),n=r.next();!n.done;n=r.next()){n.value.checkNoLoad()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}},t.packages=new Map,t}();e.Package=u},2388:function(t,e,r){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CONFIG=e.MathJax=e.Startup=void 0;var a,l=r(9515),c=r(8666),u=r(7233);!function(t){var a,l,u=new c.PrioritizedList;function h(e){return a.visitTree(e,t.document)}function f(){a=new e.MathJax._.core.MmlTree.SerializedMmlVisitor.SerializedMmlVisitor,l=e.MathJax._.mathjax.mathjax,t.input=v(),t.output=_(),t.adaptor=S(),t.handler&&l.handlers.unregister(t.handler),t.handler=M(),t.handler&&(l.handlers.register(t.handler),t.document=O())}function d(){var e,r;t.input&&t.output&&m();var n=t.output?t.output.name.toLowerCase():"";try{for(var i=o(t.input),s=i.next();!s.done;s=i.next()){var a=s.value,l=a.name.toLowerCase();g(l,a),b(l,a),t.output&&y(l,n,a)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}function m(){e.MathJax.typeset=function(e){void 0===e&&(e=null),t.document.options.elements=e,t.document.reset(),t.document.render()},e.MathJax.typesetPromise=function(e){return void 0===e&&(e=null),t.document.options.elements=e,t.document.reset(),l.handleRetriesFor((function(){t.document.render()}))},e.MathJax.typesetClear=function(e){void 0===e&&(e=null),e?t.document.clearMathItemsWithin(e):t.document.clear()}}function y(r,n,o){var i=r+"2"+n;e.MathJax[i]=function(e,r){return void 0===r&&(r={}),r.format=o.name,t.document.convert(e,r)},e.MathJax[i+"Promise"]=function(e,r){return void 0===r&&(r={}),r.format=o.name,l.handleRetriesFor((function(){return t.document.convert(e,r)}))},e.MathJax[n+"Stylesheet"]=function(){return t.output.styleSheet(t.document)},"getMetricsFor"in t.output&&(e.MathJax.getMetricsFor=function(e,r){return t.output.getMetricsFor(e,r)})}function g(r,n){var o=e.MathJax._.core.MathItem.STATE;e.MathJax[r+"2mml"]=function(e,r){return void 0===r&&(r={}),r.end=o.CONVERT,r.format=n.name,h(t.document.convert(e,r))},e.MathJax[r+"2mmlPromise"]=function(e,r){return void 0===r&&(r={}),r.end=o.CONVERT,r.format=n.name,l.handleRetriesFor((function(){return h(t.document.convert(e,r))}))}}function b(t,r){e.MathJax[t+"Reset"]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.reset.apply(r,s([],i(t),!1))}}function v(){var r,n,i=[];try{for(var s=o(e.CONFIG.input),a=s.next();!a.done;a=s.next()){var l=a.value,c=t.constructors[l];if(!c)throw Error('Input Jax "'+l+'" is not defined (has it been loaded?)');i.push(new c(e.MathJax.config[l]))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}function _(){var r=e.CONFIG.output;if(!r)return null;var n=t.constructors[r];if(!n)throw Error('Output Jax "'+r+'" is not defined (has it been loaded?)');return new n(e.MathJax.config[r])}function S(){var r=e.CONFIG.adaptor;if(!r||"none"===r)return null;var n=t.constructors[r];if(!n)throw Error('DOMAdaptor "'+r+'" is not defined (has it been loaded?)');return n(e.MathJax.config[r])}function M(){var r,n,i=e.CONFIG.handler;if(!i||"none"===i||!t.adaptor)return null;var s=t.constructors[i];if(!s)throw Error('Handler "'+i+'" is not defined (has it been loaded?)');var a=new s(t.adaptor,5);try{for(var l=o(u),c=l.next();!c.done;c=l.next()){a=c.value.item(a)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return a}function O(r){return void 0===r&&(r=null),l.document(r||e.CONFIG.document,n(n({},e.MathJax.config.options),{InputJax:t.input,OutputJax:t.output}))}t.constructors={},t.input=[],t.output=null,t.handler=null,t.adaptor=null,t.elements=null,t.document=null,t.promise=new Promise((function(e,r){t.promiseResolve=e,t.promiseReject=r})),t.pagePromise=new Promise((function(t,e){var n=r.g.document;if(n&&n.readyState&&"complete"!==n.readyState&&"interactive"!==n.readyState){var o=function(){return t()};n.defaultView.addEventListener("load",o,!0),n.defaultView.addEventListener("DOMContentLoaded",o,!0)}else t()})),t.toMML=h,t.registerConstructor=function(e,r){t.constructors[e]=r},t.useHandler=function(t,r){void 0===r&&(r=!1),e.CONFIG.handler&&!r||(e.CONFIG.handler=t)},t.useAdaptor=function(t,r){void 0===r&&(r=!1),e.CONFIG.adaptor&&!r||(e.CONFIG.adaptor=t)},t.useInput=function(t,r){void 0===r&&(r=!1),p&&!r||e.CONFIG.input.push(t)},t.useOutput=function(t,r){void 0===r&&(r=!1),e.CONFIG.output&&!r||(e.CONFIG.output=t)},t.extendHandler=function(t,e){void 0===e&&(e=10),u.add(t,e)},t.defaultReady=function(){f(),d(),t.pagePromise.then((function(){return e.CONFIG.pageReady()})).then((function(){return t.promiseResolve()})).catch((function(e){return t.promiseReject(e)}))},t.defaultPageReady=function(){return e.CONFIG.typeset&&e.MathJax.typesetPromise?e.MathJax.typesetPromise(e.CONFIG.elements):Promise.resolve()},t.getComponents=f,t.makeMethods=d,t.makeTypesetMethods=m,t.makeOutputMethods=y,t.makeMmlMethods=g,t.makeResetMethod=b,t.getInputJax=v,t.getOutputJax=_,t.getAdaptor=S,t.getHandler=M,t.getDocument=O}(a=e.Startup||(e.Startup={})),e.MathJax=l.MathJax,void 0===e.MathJax._.startup&&((0,l.combineDefaults)(e.MathJax.config,"startup",{input:[],output:"",handler:null,adaptor:null,document:"undefined"==typeof document?"":document,elements:null,typeset:!0,ready:a.defaultReady.bind(a),pageReady:a.defaultPageReady.bind(a)}),(0,l.combineWithMathJax)({startup:a,options:{}}),e.MathJax.config.startup.invalidOption&&(u.OPTIONS.invalidOption=e.MathJax.config.startup.invalidOption),e.MathJax.config.startup.optionError&&(u.OPTIONS.optionError=e.MathJax.config.startup.optionError)),e.CONFIG=e.MathJax.config.startup;var p=0!==e.CONFIG.input.length},3282:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="3.2.2"},5009:function(t,e){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractDOMAdaptor=void 0;var n=function(){function t(t){void 0===t&&(t=null),this.document=t}return t.prototype.node=function(t,e,n,o){var i,s;void 0===e&&(e={}),void 0===n&&(n=[]);var a=this.create(t,o);this.setAttributes(a,e);try{for(var l=r(n),c=l.next();!c.done;c=l.next()){var u=c.value;this.append(a,u)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a},t.prototype.setAttributes=function(t,e){var n,o,i,s,a,l;if(e.style&&"string"!=typeof e.style)try{for(var c=r(Object.keys(e.style)),u=c.next();!u.done;u=c.next()){var p=u.value;this.setStyle(t,p.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()})),e.style[p])}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}if(e.properties)try{for(var h=r(Object.keys(e.properties)),f=h.next();!f.done;f=h.next()){t[p=f.value]=e.properties[p]}}catch(t){i={error:t}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}try{for(var d=r(Object.keys(e)),m=d.next();!m.done;m=d.next()){"style"===(p=m.value)&&"string"!=typeof e.style||"properties"===p||this.setAttribute(t,p,e[p])}}catch(t){a={error:t}}finally{try{m&&!m.done&&(l=d.return)&&l.call(d)}finally{if(a)throw a.error}}},t.prototype.replace=function(t,e){return this.insert(t,e),this.remove(e),e},t.prototype.childNode=function(t,e){return this.childNodes(t)[e]},t.prototype.allClasses=function(t){var e=this.getAttribute(t,"class");return e?e.replace(/  +/g," ").replace(/^ /,"").replace(/ $/,"").split(/ /):[]},t}();e.AbstractDOMAdaptor=n},3494:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractFindMath=void 0;var n=r(7233),o=function(){function t(t){var e=this.constructor;this.options=(0,n.userOptions)((0,n.defaultOptions)({},e.OPTIONS),t)}return t.OPTIONS={},t}();e.AbstractFindMath=o},3670:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractHandler=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(r(5722).AbstractMathDocument),s=function(){function t(t,e){void 0===e&&(e=5),this.documentClass=i,this.adaptor=t,this.priority=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.NAME},enumerable:!1,configurable:!0}),t.prototype.handlesDocument=function(t){return!1},t.prototype.create=function(t,e){return new this.documentClass(t,this.adaptor,e)},t.NAME="generic",t}();e.AbstractHandler=s},805:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.HandlerList=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.register=function(t){return this.add(t,t.priority)},e.prototype.unregister=function(t){this.remove(t)},e.prototype.handlesDocument=function(t){var e,r;try{for(var n=i(this),o=n.next();!o.done;o=n.next()){var s=o.value.item;if(s.handlesDocument(t))return s}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}throw new Error("Can't find handler for document")},e.prototype.document=function(t,e){return void 0===e&&(e=null),this.handlesDocument(t).create(t,e)},e}(r(8666).PrioritizedList);e.HandlerList=s},9206:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractInputJax=void 0;var n=r(7233),o=r(7525),i=function(){function t(t){void 0===t&&(t={}),this.adaptor=null,this.mmlFactory=null;var e=this.constructor;this.options=(0,n.userOptions)((0,n.defaultOptions)({},e.OPTIONS),t),this.preFilters=new o.FunctionList,this.postFilters=new o.FunctionList}return Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.NAME},enumerable:!1,configurable:!0}),t.prototype.setAdaptor=function(t){this.adaptor=t},t.prototype.setMmlFactory=function(t){this.mmlFactory=t},t.prototype.initialize=function(){},t.prototype.reset=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},Object.defineProperty(t.prototype,"processStrings",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.findMath=function(t,e){return[]},t.prototype.executeFilters=function(t,e,r,n){var o={math:e,document:r,data:n};return t.execute(o),o.data},t.NAME="generic",t.OPTIONS={},t}();e.AbstractInputJax=i},5722:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractMathDocument=e.resetAllOptions=e.resetOptions=e.RenderList=void 0;var l=r(7233),c=r(9206),u=r(2975),p=r(9e3),h=r(4474),f=r(3909),d=r(6751),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.create=function(t){var e,r,n=new this;try{for(var o=i(Object.keys(t)),a=o.next();!a.done;a=o.next()){var l=a.value,c=s(this.action(l,t[l]),2),u=c[0],p=c[1];p&&n.add(u,p)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},e.action=function(t,e){var r,n,o,i,a,l,c=!0,u=e[0];if(1===e.length||"boolean"==typeof e[1])2===e.length&&(c=e[1]),a=(r=s(this.methodActions(t),2))[0],l=r[1];else if("string"==typeof e[1])if("string"==typeof e[2]){4===e.length&&(c=e[3]);var p=s(e.slice(1),2),h=p[0],f=p[1];a=(n=s(this.methodActions(h,f),2))[0],l=n[1]}else 3===e.length&&(c=e[2]),a=(o=s(this.methodActions(e[1]),2))[0],l=o[1];else 4===e.length&&(c=e[3]),a=(i=s(e.slice(1),2))[0],l=i[1];return[{id:t,renderDoc:a,renderMath:l,convert:c},u]},e.methodActions=function(t,e){return void 0===e&&(e=t),[function(e){return t&&e[t](),!1},function(t,r){return e&&t[e](r),!1}]},e.prototype.renderDoc=function(t,e){var r,n;void 0===e&&(e=h.STATE.UNPROCESSED);try{for(var o=i(this.items),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.priority>=e&&a.item.renderDoc(t))return}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.renderMath=function(t,e,r){var n,o;void 0===r&&(r=h.STATE.UNPROCESSED);try{for(var s=i(this.items),a=s.next();!a.done;a=s.next()){var l=a.value;if(l.priority>=r&&l.item.renderMath(t,e))return}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},e.prototype.renderConvert=function(t,e,r){var n,o;void 0===r&&(r=h.STATE.LAST);try{for(var s=i(this.items),a=s.next();!a.done;a=s.next()){var l=a.value;if(l.priority>r)return;if(l.item.convert&&l.item.renderMath(t,e))return}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},e.prototype.findID=function(t){var e,r;try{for(var n=i(this.items),o=n.next();!o.done;o=n.next()){var s=o.value;if(s.item.id===t)return s.item}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return null},e}(r(8666).PrioritizedList);e.RenderList=m,e.resetOptions={all:!1,processed:!1,inputJax:null,outputJax:null},e.resetAllOptions={all:!0,processed:!0,inputJax:[],outputJax:[]};var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compile=function(t){return null},e}(c.AbstractInputJax),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.typeset=function(t,e){return void 0===e&&(e=null),null},e.prototype.escaped=function(t,e){return null},e}(u.AbstractOutputJax),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(p.AbstractMathList),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(h.AbstractMathItem),_=function(){function t(e,r,n){var o=this,i=this.constructor;this.document=e,this.options=(0,l.userOptions)((0,l.defaultOptions)({},i.OPTIONS),n),this.math=new(this.options.MathList||b),this.renderActions=m.create(this.options.renderActions),this.processed=new t.ProcessBits,this.outputJax=this.options.OutputJax||new g;var s=this.options.InputJax||[new y];Array.isArray(s)||(s=[s]),this.inputJax=s,this.adaptor=r,this.outputJax.setAdaptor(r),this.inputJax.map((function(t){return t.setAdaptor(r)})),this.mmlFactory=this.options.MmlFactory||new f.MmlFactory,this.inputJax.map((function(t){return t.setMmlFactory(o.mmlFactory)})),this.outputJax.initialize(),this.inputJax.map((function(t){return t.initialize()}))}return Object.defineProperty(t.prototype,"kind",{get:function(){return this.constructor.KIND},enumerable:!1,configurable:!0}),t.prototype.addRenderAction=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=s(m.action(t,e),2),o=n[0],i=n[1];this.renderActions.add(o,i)},t.prototype.removeRenderAction=function(t){var e=this.renderActions.findID(t);e&&this.renderActions.remove(e)},t.prototype.render=function(){return this.renderActions.renderDoc(this),this},t.prototype.rerender=function(t){return void 0===t&&(t=h.STATE.RERENDER),this.state(t-1),this.render(),this},t.prototype.convert=function(t,e){void 0===e&&(e={});var r=(0,l.userOptions)({format:this.inputJax[0].name,display:!0,end:h.STATE.LAST,em:16,ex:8,containerWidth:null,lineWidth:1e6,scale:1,family:""},e),n=r.format,o=r.display,i=r.end,s=r.ex,a=r.em,c=r.containerWidth,u=r.lineWidth,p=r.scale,f=r.family;null===c&&(c=80*s);var d=this.inputJax.reduce((function(t,e){return e.name===n?e:t}),null),m=new this.options.MathItem(t,d,o);return m.start.node=this.adaptor.body(this.document),m.setMetrics(a,s,c,u,p),this.outputJax.options.mtextInheritFont&&(m.outputData.mtextFamily=f),this.outputJax.options.merrorInheritFont&&(m.outputData.merrorFamily=f),m.convert(this,i),m.typesetRoot||m.root},t.prototype.findMath=function(t){return void 0===t&&(t=null),this.processed.set("findMath"),this},t.prototype.compile=function(){var t,e,r,n;if(!this.processed.isSet("compile")){var o=[];try{for(var s=i(this.math),a=s.next();!a.done;a=s.next()){var l=a.value;this.compileMath(l),void 0!==l.inputData.recompile&&o.push(l)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}try{for(var c=i(o),u=c.next();!u.done;u=c.next()){var p=(l=u.value).inputData.recompile;l.state(p.state),l.inputData.recompile=p,this.compileMath(l)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}this.processed.set("compile")}return this},t.prototype.compileMath=function(t){try{t.compile(this)}catch(e){if(e.retry||e.restart)throw e;this.options.compileError(this,t,e),t.inputData.error=e}},t.prototype.compileError=function(t,e){t.root=this.mmlFactory.create("math",null,[this.mmlFactory.create("merror",{"data-mjx-error":e.message,title:e.message},[this.mmlFactory.create("mtext",null,[this.mmlFactory.create("text").setText("Math input error")])])]),t.display&&t.root.attributes.set("display","block"),t.inputData.error=e.message},t.prototype.typeset=function(){var t,e;if(!this.processed.isSet("typeset")){try{for(var r=i(this.math),n=r.next();!n.done;n=r.next()){var o=n.value;try{o.typeset(this)}catch(t){if(t.retry||t.restart)throw t;this.options.typesetError(this,o,t),o.outputData.error=t}}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.processed.set("typeset")}return this},t.prototype.typesetError=function(t,e){t.typesetRoot=this.adaptor.node("mjx-container",{class:"MathJax mjx-output-error",jax:this.outputJax.name},[this.adaptor.node("span",{"data-mjx-error":e.message,title:e.message,style:{color:"red","background-color":"yellow","line-height":"normal"}},[this.adaptor.text("Math output error")])]),t.display&&this.adaptor.setAttributes(t.typesetRoot,{style:{display:"block",margin:"1em 0","text-align":"center"}}),t.outputData.error=e.message},t.prototype.getMetrics=function(){return this.processed.isSet("getMetrics")||(this.outputJax.getMetrics(this),this.processed.set("getMetrics")),this},t.prototype.updateDocument=function(){var t,e;if(!this.processed.isSet("updateDocument")){try{for(var r=i(this.math.reversed()),n=r.next();!n.done;n=r.next()){n.value.updateDocument(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.processed.set("updateDocument")}return this},t.prototype.removeFromDocument=function(t){return void 0===t&&(t=!1),this},t.prototype.state=function(t,e){var r,n;void 0===e&&(e=!1);try{for(var o=i(this.math),s=o.next();!s.done;s=o.next()){s.value.state(t,e)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return t<h.STATE.INSERTED&&this.processed.clear("updateDocument"),t<h.STATE.TYPESET&&(this.processed.clear("typeset"),this.processed.clear("getMetrics")),t<h.STATE.COMPILED&&this.processed.clear("compile"),this},t.prototype.reset=function(t){var r;return void 0===t&&(t={processed:!0}),(t=(0,l.userOptions)(Object.assign({},e.resetOptions),t)).all&&Object.assign(t,e.resetAllOptions),t.processed&&this.processed.reset(),t.inputJax&&this.inputJax.forEach((function(e){return e.reset.apply(e,a([],s(t.inputJax),!1))})),t.outputJax&&(r=this.outputJax).reset.apply(r,a([],s(t.outputJax),!1)),this},t.prototype.clear=function(){return this.reset(),this.math.clear(),this},t.prototype.concat=function(t){return this.math.merge(t),this},t.prototype.clearMathItemsWithin=function(t){var e,r=this.getMathItemsWithin(t);return(e=this.math).remove.apply(e,a([],s(r),!1)),r},t.prototype.getMathItemsWithin=function(t){var e,r,n,o;Array.isArray(t)||(t=[t]);var s=this.adaptor,a=[],l=s.getElements(t,this.document);try{t:for(var c=i(this.math),u=c.next();!u.done;u=c.next()){var p=u.value;try{for(var h=(n=void 0,i(l)),f=h.next();!f.done;f=h.next()){var d=f.value;if(p.start.node&&s.contains(d,p.start.node)){a.push(p);continue t}}}catch(t){n={error:t}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return a},t.KIND="MathDocument",t.OPTIONS={OutputJax:null,InputJax:null,MmlFactory:null,MathList:b,MathItem:v,compileError:function(t,e,r){t.compileError(e,r)},typesetError:function(t,e,r){t.typesetError(e,r)},renderActions:(0,l.expandable)({find:[h.STATE.FINDMATH,"findMath","",!1],compile:[h.STATE.COMPILED],metrics:[h.STATE.METRICS,"getMetrics","",!1],typeset:[h.STATE.TYPESET],update:[h.STATE.INSERTED,"updateDocument",!1]})},t.ProcessBits=(0,d.BitFieldClass)("findMath","compile","getMetrics","typeset","updateDocument"),t}();e.AbstractMathDocument=_},4474:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.newState=e.STATE=e.AbstractMathItem=e.protoItem=void 0,e.protoItem=function(t,e,r,n,o,i,s){return void 0===s&&(s=null),{open:t,math:e,close:r,n:n,start:{n:o},end:{n:i},display:s}};var r=function(){function t(t,r,n,o,i){void 0===n&&(n=!0),void 0===o&&(o={i:0,n:0,delim:""}),void 0===i&&(i={i:0,n:0,delim:""}),this.root=null,this.typesetRoot=null,this.metrics={},this.inputData={},this.outputData={},this._state=e.STATE.UNPROCESSED,this.math=t,this.inputJax=r,this.display=n,this.start=o,this.end=i,this.root=null,this.typesetRoot=null,this.metrics={},this.inputData={},this.outputData={}}return Object.defineProperty(t.prototype,"isEscaped",{get:function(){return null===this.display},enumerable:!1,configurable:!0}),t.prototype.render=function(t){t.renderActions.renderMath(this,t)},t.prototype.rerender=function(t,r){void 0===r&&(r=e.STATE.RERENDER),this.state()>=r&&this.state(r-1),t.renderActions.renderMath(this,t,r)},t.prototype.convert=function(t,r){void 0===r&&(r=e.STATE.LAST),t.renderActions.renderConvert(this,t,r)},t.prototype.compile=function(t){this.state()<e.STATE.COMPILED&&(this.root=this.inputJax.compile(this,t),this.state(e.STATE.COMPILED))},t.prototype.typeset=function(t){this.state()<e.STATE.TYPESET&&(this.typesetRoot=t.outputJax[this.isEscaped?"escaped":"typeset"](this,t),this.state(e.STATE.TYPESET))},t.prototype.updateDocument=function(t){},t.prototype.removeFromDocument=function(t){void 0===t&&(t=!1)},t.prototype.setMetrics=function(t,e,r,n,o){this.metrics={em:t,ex:e,containerWidth:r,lineWidth:n,scale:o}},t.prototype.state=function(t,r){return void 0===t&&(t=null),void 0===r&&(r=!1),null!=t&&(t<e.STATE.INSERTED&&this._state>=e.STATE.INSERTED&&this.removeFromDocument(r),t<e.STATE.TYPESET&&this._state>=e.STATE.TYPESET&&(this.outputData={}),t<e.STATE.COMPILED&&this._state>=e.STATE.COMPILED&&(this.inputData={}),this._state=t),this._state},t.prototype.reset=function(t){void 0===t&&(t=!1),this.state(e.STATE.UNPROCESSED,t)},t}();e.AbstractMathItem=r,e.STATE={UNPROCESSED:0,FINDMATH:10,COMPILED:20,CONVERT:100,METRICS:110,RERENDER:125,TYPESET:150,INSERTED:200,LAST:1e4},e.newState=function(t,r){if(t in e.STATE)throw Error("State "+t+" already exists");e.STATE[t]=r}},9e3:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractMathList=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.isBefore=function(t,e){return t.start.i<e.start.i||t.start.i===e.start.i&&t.start.n<e.start.n},e}(r(103).LinkedList);e.AbstractMathList=i},91:function(t,e){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Attributes=e.INHERIT=void 0,e.INHERIT="_inherit_";var n=function(){function t(t,e){this.global=e,this.defaults=Object.create(e),this.inherited=Object.create(this.defaults),this.attributes=Object.create(this.inherited),Object.assign(this.defaults,t)}return t.prototype.set=function(t,e){this.attributes[t]=e},t.prototype.setList=function(t){Object.assign(this.attributes,t)},t.prototype.get=function(t){var r=this.attributes[t];return r===e.INHERIT&&(r=this.global[t]),r},t.prototype.getExplicit=function(t){if(this.attributes.hasOwnProperty(t))return this.attributes[t]},t.prototype.getList=function(){for(var t,e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i={};try{for(var s=r(n),a=s.next();!a.done;a=s.next()){var l=a.value;i[l]=this.get(l)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return i},t.prototype.setInherited=function(t,e){this.inherited[t]=e},t.prototype.getInherited=function(t){return this.inherited[t]},t.prototype.getDefault=function(t){return this.defaults[t]},t.prototype.isSet=function(t){return this.attributes.hasOwnProperty(t)||this.inherited.hasOwnProperty(t)},t.prototype.hasDefault=function(t){return t in this.defaults},t.prototype.getExplicitNames=function(){return Object.keys(this.attributes)},t.prototype.getInheritedNames=function(){return Object.keys(this.inherited)},t.prototype.getDefaultNames=function(){return Object.keys(this.defaults)},t.prototype.getGlobalNames=function(){return Object.keys(this.global)},t.prototype.getAllAttributes=function(){return this.attributes},t.prototype.getAllInherited=function(){return this.inherited},t.prototype.getAllDefaults=function(){return this.defaults},t.prototype.getAllGlobals=function(){return this.global},t}();e.Attributes=n},6336:function(t,e,r){var n;Object.defineProperty(e,"__esModule",{value:!0}),e.MML=void 0;var o=r(9007),i=r(3233),s=r(450),a=r(3050),l=r(2756),c=r(4770),u=r(6030),p=r(7265),h=r(9878),f=r(6850),d=r(7131),m=r(6145),y=r(1314),g=r(1581),b=r(7238),v=r(5741),_=r(5410),S=r(6661),M=r(9145),O=r(4461),x=r(5184),E=r(6405),A=r(1349),C=r(5022),T=r(4359),N=r(142),w=r(7590),L=r(3985),I=r(9102),P=r(3948),R=r(1334);e.MML=((n={})[i.MmlMath.prototype.kind]=i.MmlMath,n[s.MmlMi.prototype.kind]=s.MmlMi,n[a.MmlMn.prototype.kind]=a.MmlMn,n[l.MmlMo.prototype.kind]=l.MmlMo,n[c.MmlMtext.prototype.kind]=c.MmlMtext,n[u.MmlMspace.prototype.kind]=u.MmlMspace,n[p.MmlMs.prototype.kind]=p.MmlMs,n[h.MmlMrow.prototype.kind]=h.MmlMrow,n[h.MmlInferredMrow.prototype.kind]=h.MmlInferredMrow,n[f.MmlMfrac.prototype.kind]=f.MmlMfrac,n[d.MmlMsqrt.prototype.kind]=d.MmlMsqrt,n[m.MmlMroot.prototype.kind]=m.MmlMroot,n[y.MmlMstyle.prototype.kind]=y.MmlMstyle,n[g.MmlMerror.prototype.kind]=g.MmlMerror,n[b.MmlMpadded.prototype.kind]=b.MmlMpadded,n[v.MmlMphantom.prototype.kind]=v.MmlMphantom,n[_.MmlMfenced.prototype.kind]=_.MmlMfenced,n[S.MmlMenclose.prototype.kind]=S.MmlMenclose,n[M.MmlMaction.prototype.kind]=M.MmlMaction,n[O.MmlMsub.prototype.kind]=O.MmlMsub,n[O.MmlMsup.prototype.kind]=O.MmlMsup,n[O.MmlMsubsup.prototype.kind]=O.MmlMsubsup,n[x.MmlMunder.prototype.kind]=x.MmlMunder,n[x.MmlMover.prototype.kind]=x.MmlMover,n[x.MmlMunderover.prototype.kind]=x.MmlMunderover,n[E.MmlMmultiscripts.prototype.kind]=E.MmlMmultiscripts,n[E.MmlMprescripts.prototype.kind]=E.MmlMprescripts,n[E.MmlNone.prototype.kind]=E.MmlNone,n[A.MmlMtable.prototype.kind]=A.MmlMtable,n[C.MmlMlabeledtr.prototype.kind]=C.MmlMlabeledtr,n[C.MmlMtr.prototype.kind]=C.MmlMtr,n[T.MmlMtd.prototype.kind]=T.MmlMtd,n[N.MmlMaligngroup.prototype.kind]=N.MmlMaligngroup,n[w.MmlMalignmark.prototype.kind]=w.MmlMalignmark,n[L.MmlMglyph.prototype.kind]=L.MmlMglyph,n[I.MmlSemantics.prototype.kind]=I.MmlSemantics,n[I.MmlAnnotation.prototype.kind]=I.MmlAnnotation,n[I.MmlAnnotationXML.prototype.kind]=I.MmlAnnotationXML,n[P.TeXAtom.prototype.kind]=P.TeXAtom,n[R.MathChoice.prototype.kind]=R.MathChoice,n[o.TextNode.prototype.kind]=o.TextNode,n[o.XMLNode.prototype.kind]=o.XMLNode,n)},1759:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MathMLVisitor=void 0;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.document=null,e}return o(e,t),e.prototype.visitTree=function(t,e){this.document=e;var r=e.createElement("top");return this.visitNode(t,r),this.document=null,r.firstChild},e.prototype.visitTextNode=function(t,e){e.appendChild(this.document.createTextNode(t.getText()))},e.prototype.visitXMLNode=function(t,e){e.appendChild(t.getXML().cloneNode(!0))},e.prototype.visitInferredMrowNode=function(t,e){var r,n;try{for(var o=i(t.childNodes),s=o.next();!s.done;s=o.next()){var a=s.value;this.visitNode(a,e)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.visitDefault=function(t,e){var r,n,o=this.document.createElement(t.kind);this.addAttributes(t,o);try{for(var s=i(t.childNodes),a=s.next();!a.done;a=s.next()){var l=a.value;this.visitNode(l,o)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}e.appendChild(o)},e.prototype.addAttributes=function(t,e){var r,n,o=t.attributes,s=o.getExplicitNames();try{for(var a=i(s),l=a.next();!l.done;l=a.next()){var c=l.value;e.setAttribute(c,o.getExplicit(c).toString())}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(r(6325).MmlVisitor);e.MathMLVisitor=s},3909:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MmlFactory=void 0;var i=r(7860),s=r(6336),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"MML",{get:function(){return this.node},enumerable:!1,configurable:!0}),e.defaultNodes=s.MML,e}(i.AbstractNodeFactory);e.MmlFactory=a},9007:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.XMLNode=e.TextNode=e.AbstractMmlEmptyNode=e.AbstractMmlBaseNode=e.AbstractMmlLayoutNode=e.AbstractMmlTokenNode=e.AbstractMmlNode=e.indentAttributes=e.TEXCLASSNAMES=e.TEXCLASS=void 0;var l=r(91),c=r(4596);e.TEXCLASS={ORD:0,OP:1,BIN:2,REL:3,OPEN:4,CLOSE:5,PUNCT:6,INNER:7,VCENTER:8,NONE:-1},e.TEXCLASSNAMES=["ORD","OP","BIN","REL","OPEN","CLOSE","PUNCT","INNER","VCENTER"];var u=["","thinmathspace","mediummathspace","thickmathspace"],p=[[0,-1,2,3,0,0,0,1],[-1,-1,0,3,0,0,0,1],[2,2,0,0,2,0,0,2],[3,3,0,0,3,0,0,3],[0,0,0,0,0,0,0,0],[0,-1,2,3,0,0,0,1],[1,1,0,1,1,1,1,1],[1,-1,2,3,1,0,1,1]];e.indentAttributes=["indentalign","indentalignfirst","indentshift","indentshiftfirst"];var h=function(t){function r(e,r,n){void 0===r&&(r={}),void 0===n&&(n=[]);var o=t.call(this,e)||this;return o.prevClass=null,o.prevLevel=null,o.texclass=null,o.arity<0&&(o.childNodes=[e.create("inferredMrow")],o.childNodes[0].parent=o),o.setChildren(n),o.attributes=new l.Attributes(e.getNodeClass(o.kind).defaults,e.getNodeClass("math").defaults),o.attributes.setList(r),o}return o(r,t),r.prototype.copy=function(t){var e,r,n,o;void 0===t&&(t=!1);var a=this.factory.create(this.kind);if(a.properties=i({},this.properties),this.attributes){var l=this.attributes.getAllAttributes();try{for(var c=s(Object.keys(l)),u=c.next();!u.done;u=c.next()){var p=u.value;("id"!==p||t)&&a.attributes.set(p,l[p])}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}}if(this.childNodes&&this.childNodes.length){var h=this.childNodes;1===h.length&&h[0].isInferred&&(h=h[0].childNodes);try{for(var f=s(h),d=f.next();!d.done;d=f.next()){var m=d.value;m?a.appendChild(m.copy()):a.childNodes.push(null)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}return a},Object.defineProperty(r.prototype,"texClass",{get:function(){return this.texclass},set:function(t){this.texclass=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isToken",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmbellished",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasNewLine",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 1/0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isInferred",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parent",{get:function(){for(var t=this.parent;t&&t.notParent;)t=t.Parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notParent",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.setChildren=function(e){return this.arity<0?this.childNodes[0].setChildren(e):t.prototype.setChildren.call(this,e)},r.prototype.appendChild=function(e){var r,n,o=this;if(this.arity<0)return this.childNodes[0].appendChild(e),e;if(e.isInferred){if(this.arity===1/0)return e.childNodes.forEach((function(e){return t.prototype.appendChild.call(o,e)})),e;var i=e;(e=this.factory.create("mrow")).setChildren(i.childNodes),e.attributes=i.attributes;try{for(var a=s(i.getPropertyNames()),l=a.next();!l.done;l=a.next()){var c=l.value;e.setProperty(c,i.getProperty(c))}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}return t.prototype.appendChild.call(this,e)},r.prototype.replaceChild=function(e,r){return this.arity<0?(this.childNodes[0].replaceChild(e,r),e):t.prototype.replaceChild.call(this,e,r)},r.prototype.core=function(){return this},r.prototype.coreMO=function(){return this},r.prototype.coreIndex=function(){return 0},r.prototype.childPosition=function(){for(var t,e,r=this,n=r.parent;n&&n.notParent;)r=n,n=n.parent;if(n){var o=0;try{for(var i=s(n.childNodes),a=i.next();!a.done;a=i.next()){if(a.value===r)return o;o++}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}}return null},r.prototype.setTeXclass=function(t){return this.getPrevClass(t),null!=this.texClass?this:t},r.prototype.updateTeXclass=function(t){t&&(this.prevClass=t.prevClass,this.prevLevel=t.prevLevel,t.prevClass=t.prevLevel=null,this.texClass=t.texClass)},r.prototype.getPrevClass=function(t){t&&(this.prevClass=t.texClass,this.prevLevel=t.attributes.get("scriptlevel"))},r.prototype.texSpacing=function(){var t=null!=this.prevClass?this.prevClass:e.TEXCLASS.NONE,r=this.texClass||e.TEXCLASS.ORD;if(t===e.TEXCLASS.NONE||r===e.TEXCLASS.NONE)return"";t===e.TEXCLASS.VCENTER&&(t=e.TEXCLASS.ORD),r===e.TEXCLASS.VCENTER&&(r=e.TEXCLASS.ORD);var n=p[t][r];return(this.prevLevel>0||this.attributes.get("scriptlevel")>0)&&n>=0?"":u[Math.abs(n)]},r.prototype.hasSpacingAttributes=function(){return this.isEmbellished&&this.coreMO().hasSpacingAttributes()},r.prototype.setInheritedAttributes=function(t,e,n,o){var i,l;void 0===t&&(t={}),void 0===e&&(e=!1),void 0===n&&(n=0),void 0===o&&(o=!1);var c=this.attributes.getAllDefaults();try{for(var u=s(Object.keys(t)),p=u.next();!p.done;p=u.next()){var h=p.value;if(c.hasOwnProperty(h)||r.alwaysInherit.hasOwnProperty(h)){var f=a(t[h],2),d=f[0],m=f[1];((r.noInherit[d]||{})[this.kind]||{})[h]||this.attributes.setInherited(h,m)}}}catch(t){i={error:t}}finally{try{p&&!p.done&&(l=u.return)&&l.call(u)}finally{if(i)throw i.error}}void 0===this.attributes.getExplicit("displaystyle")&&this.attributes.setInherited("displaystyle",e),void 0===this.attributes.getExplicit("scriptlevel")&&this.attributes.setInherited("scriptlevel",n),o&&this.setProperty("texprimestyle",o);var y=this.arity;if(y>=0&&y!==1/0&&(1===y&&0===this.childNodes.length||1!==y&&this.childNodes.length!==y))if(y<this.childNodes.length)this.childNodes=this.childNodes.slice(0,y);else for(;this.childNodes.length<y;)this.appendChild(this.factory.create("mrow"));this.setChildInheritedAttributes(t,e,n,o)},r.prototype.setChildInheritedAttributes=function(t,e,r,n){var o,i;try{for(var a=s(this.childNodes),l=a.next();!l.done;l=a.next()){l.value.setInheritedAttributes(t,e,r,n)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}},r.prototype.addInheritedAttributes=function(t,e){var r,n,o=i({},t);try{for(var a=s(Object.keys(e)),l=a.next();!l.done;l=a.next()){var c=l.value;"displaystyle"!==c&&"scriptlevel"!==c&&"style"!==c&&(o[c]=[this.kind,e[c]])}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},r.prototype.inheritAttributesFrom=function(t){var e=t.attributes,r=e.get("displaystyle"),n=e.get("scriptlevel"),o=e.isSet("mathsize")?{mathsize:["math",e.get("mathsize")]}:{},i=t.getProperty("texprimestyle")||!1;this.setInheritedAttributes(o,r,n,i)},r.prototype.verifyTree=function(t){if(void 0===t&&(t=null),null!==t){this.verifyAttributes(t);var e=this.arity;t.checkArity&&e>=0&&e!==1/0&&(1===e&&0===this.childNodes.length||1!==e&&this.childNodes.length!==e)&&this.mError('Wrong number of children for "'+this.kind+'" node',t,!0),this.verifyChildren(t)}},r.prototype.verifyAttributes=function(t){var e,r;if(t.checkAttributes){var n=this.attributes,o=[];try{for(var i=s(n.getExplicitNames()),a=i.next();!a.done;a=i.next()){var l=a.value;"data-"===l.substr(0,5)||void 0!==n.getDefault(l)||l.match(/^(?:class|style|id|(?:xlink:)?href)$/)||o.push(l)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}o.length&&this.mError("Unknown attributes for "+this.kind+" node: "+o.join(", "),t)}},r.prototype.verifyChildren=function(t){var e,r;try{for(var n=s(this.childNodes),o=n.next();!o.done;o=n.next()){o.value.verifyTree(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},r.prototype.mError=function(t,e,r){if(void 0===r&&(r=!1),this.parent&&this.parent.isKind("merror"))return null;var n=this.factory.create("merror");if(n.attributes.set("data-mjx-message",t),e.fullErrors||r){var o=this.factory.create("mtext"),i=this.factory.create("text");i.setText(e.fullErrors?t:this.kind),o.appendChild(i),n.appendChild(o),this.parent.replaceChild(n,this)}else this.parent.replaceChild(n,this),n.appendChild(this);return n},r.defaults={mathbackground:l.INHERIT,mathcolor:l.INHERIT,mathsize:l.INHERIT,dir:l.INHERIT},r.noInherit={mstyle:{mpadded:{width:!0,height:!0,depth:!0,lspace:!0,voffset:!0},mtable:{width:!0,height:!0,depth:!0,align:!0}},maligngroup:{mrow:{groupalign:!0},mtable:{groupalign:!0}}},r.alwaysInherit={scriptminsize:!0,scriptsizemultiplier:!0},r.verifyDefaults={checkArity:!0,checkAttributes:!1,fullErrors:!1,fixMmultiscripts:!0,fixMtables:!0},r}(c.AbstractNode);e.AbstractMmlNode=h;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"isToken",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.getText=function(){var t,e,r="";try{for(var n=s(this.childNodes),o=n.next();!o.done;o=n.next()){var i=o.value;i instanceof g&&(r+=i.getText())}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},e.prototype.setChildInheritedAttributes=function(t,e,r,n){var o,i;try{for(var a=s(this.childNodes),l=a.next();!l.done;l=a.next()){var c=l.value;c instanceof h&&c.setInheritedAttributes(t,e,r,n)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}},e.prototype.walkTree=function(t,e){var r,n;t(this,e);try{for(var o=s(this.childNodes),i=o.next();!i.done;i=o.next()){var a=i.value;a instanceof h&&a.walkTree(t,e)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e},e.defaults=i(i({},h.defaults),{mathvariant:"normal",mathsize:l.INHERIT}),e}(h);e.AbstractMmlTokenNode=f;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"isSpacelike",{get:function(){return this.childNodes[0].isSpacelike},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmbellished",{get:function(){return this.childNodes[0].isEmbellished},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),e.prototype.core=function(){return this.childNodes[0]},e.prototype.coreMO=function(){return this.childNodes[0].coreMO()},e.prototype.setTeXclass=function(t){return t=this.childNodes[0].setTeXclass(t),this.updateTeXclass(this.childNodes[0]),t},e.defaults=h.defaults,e}(h);e.AbstractMmlLayoutNode=d;var m=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),Object.defineProperty(r.prototype,"isEmbellished",{get:function(){return this.childNodes[0].isEmbellished},enumerable:!1,configurable:!0}),r.prototype.core=function(){return this.childNodes[0]},r.prototype.coreMO=function(){return this.childNodes[0].coreMO()},r.prototype.setTeXclass=function(t){var r,n;this.getPrevClass(t),this.texClass=e.TEXCLASS.ORD;var o=this.childNodes[0];o?this.isEmbellished||o.isKind("mi")?(t=o.setTeXclass(t),this.updateTeXclass(this.core())):(o.setTeXclass(null),t=this):t=this;try{for(var i=s(this.childNodes.slice(1)),a=i.next();!a.done;a=i.next()){var l=a.value;l&&l.setTeXclass(null)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return t},r.defaults=h.defaults,r}(h);e.AbstractMmlBaseNode=m;var y=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),Object.defineProperty(r.prototype,"isToken",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmbellished",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasNewLine",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isInferred",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notParent",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parent",{get:function(){return this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texClass",{get:function(){return e.TEXCLASS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"prevClass",{get:function(){return e.TEXCLASS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"prevLevel",{get:function(){return 0},enumerable:!1,configurable:!0}),r.prototype.hasSpacingAttributes=function(){return!1},Object.defineProperty(r.prototype,"attributes",{get:function(){return null},enumerable:!1,configurable:!0}),r.prototype.core=function(){return this},r.prototype.coreMO=function(){return this},r.prototype.coreIndex=function(){return 0},r.prototype.childPosition=function(){return 0},r.prototype.setTeXclass=function(t){return t},r.prototype.texSpacing=function(){return""},r.prototype.setInheritedAttributes=function(t,e,r,n){},r.prototype.inheritAttributesFrom=function(t){},r.prototype.verifyTree=function(t){},r.prototype.mError=function(t,e,r){return void 0===r&&(r=!1),null},r}(c.AbstractEmptyNode);e.AbstractMmlEmptyNode=y;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="",e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"text"},enumerable:!1,configurable:!0}),e.prototype.getText=function(){return this.text},e.prototype.setText=function(t){return this.text=t,this},e.prototype.copy=function(){return this.factory.create(this.kind).setText(this.getText())},e.prototype.toString=function(){return this.text},e}(y);e.TextNode=g;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.xml=null,e.adaptor=null,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"XML"},enumerable:!1,configurable:!0}),e.prototype.getXML=function(){return this.xml},e.prototype.setXML=function(t,e){return void 0===e&&(e=null),this.xml=t,this.adaptor=e,this},e.prototype.getSerializedXML=function(){return this.adaptor.serializeXML(this.xml)},e.prototype.copy=function(){return this.factory.create(this.kind).setXML(this.adaptor.clone(this.xml))},e.prototype.toString=function(){return"XML data"},e}(y);e.XMLNode=b},3948:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.TeXAtom=void 0;var s=r(9007),a=r(2756),l=function(t){function e(e,r,n){var o=t.call(this,e,r,n)||this;return o.texclass=s.TEXCLASS.ORD,o.setProperty("texClass",o.texClass),o}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"TeXAtom"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notParent",{get:function(){return this.childNodes[0]&&1===this.childNodes[0].childNodes.length},enumerable:!1,configurable:!0}),e.prototype.setTeXclass=function(t){return this.childNodes[0].setTeXclass(null),this.adjustTeXclass(t)},e.prototype.adjustTeXclass=function(t){return t},e.defaults=i({},s.AbstractMmlBaseNode.defaults),e}(s.AbstractMmlBaseNode);e.TeXAtom=l,l.prototype.adjustTeXclass=a.MmlMo.prototype.adjustTeXclass},9145:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMaction=void 0;var s=r(9007),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"maction"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){var t=this.attributes.get("selection"),e=Math.max(1,Math.min(this.childNodes.length,t))-1;return this.childNodes[e]||this.factory.create("mrow")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmbellished",{get:function(){return this.selected.isEmbellished},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpacelike",{get:function(){return this.selected.isSpacelike},enumerable:!1,configurable:!0}),e.prototype.core=function(){return this.selected.core()},e.prototype.coreMO=function(){return this.selected.coreMO()},e.prototype.verifyAttributes=function(e){(t.prototype.verifyAttributes.call(this,e),"toggle"!==this.attributes.get("actiontype")&&void 0!==this.attributes.getExplicit("selection"))&&delete this.attributes.getAllAttributes().selection},e.prototype.setTeXclass=function(t){"tooltip"===this.attributes.get("actiontype")&&this.childNodes[1]&&this.childNodes[1].setTeXclass(null);var e=this.selected;return t=e.setTeXclass(t),this.updateTeXclass(e),t},e.prototype.nextToggleSelection=function(){var t=Math.max(1,this.attributes.get("selection")+1);t>this.childNodes.length&&(t=1),this.attributes.set("selection",t)},e.defaults=i(i({},s.AbstractMmlNode.defaults),{actiontype:"toggle",selection:1}),e}(s.AbstractMmlNode);e.MmlMaction=a},142:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMaligngroup=void 0;var s=r(9007),a=r(91),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"maligngroup"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(e,r,n,o){e=this.addInheritedAttributes(e,this.attributes.getAllAttributes()),t.prototype.setChildInheritedAttributes.call(this,e,r,n,o)},e.defaults=i(i({},s.AbstractMmlLayoutNode.defaults),{groupalign:a.INHERIT}),e}(s.AbstractMmlLayoutNode);e.MmlMaligngroup=l},7590:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMalignmark=void 0;var s=r(9007),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"malignmark"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),e.defaults=i(i({},s.AbstractMmlNode.defaults),{edge:"left"}),e}(s.AbstractMmlNode);e.MmlMalignmark=a},3233:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMath=void 0;var s=r(9007),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"math"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(e,r,n,o){"display"===this.attributes.get("mode")&&this.attributes.setInherited("display","block"),e=this.addInheritedAttributes(e,this.attributes.getAllAttributes()),r=!!this.attributes.get("displaystyle")||!this.attributes.get("displaystyle")&&"block"===this.attributes.get("display"),this.attributes.setInherited("displaystyle",r),n=this.attributes.get("scriptlevel")||this.constructor.defaults.scriptlevel,t.prototype.setChildInheritedAttributes.call(this,e,r,n,o)},e.defaults=i(i({},s.AbstractMmlLayoutNode.defaults),{mathvariant:"normal",mathsize:"normal",mathcolor:"",mathbackground:"transparent",dir:"ltr",scriptlevel:0,displaystyle:!1,display:"inline",maxwidth:"",overflow:"linebreak",altimg:"","altimg-width":"","altimg-height":"","altimg-valign":"",alttext:"",cdgroup:"",scriptsizemultiplier:1/Math.sqrt(2),scriptminsize:"8px",infixlinebreakstyle:"before",lineleading:"1ex",linebreakmultchar:"\u2062",indentshift:"auto",indentalign:"auto",indenttarget:"",indentalignfirst:"indentalign",indentshiftfirst:"indentshift",indentalignlast:"indentalign",indentshiftlast:"indentshift"}),e}(s.AbstractMmlLayoutNode);e.MmlMath=a},1334:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MathChoice=void 0;var s=r(9007),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"MathChoice"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 4},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notParent",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setInheritedAttributes=function(t,e,r,n){var o=e?0:Math.max(0,Math.min(r,2))+1,i=this.childNodes[o]||this.factory.create("mrow");this.parent.replaceChild(i,this),i.setInheritedAttributes(t,e,r,n)},e.defaults=i({},s.AbstractMmlBaseNode.defaults),e}(s.AbstractMmlBaseNode);e.MathChoice=a},6661:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMenclose=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"menclose"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linebreakContininer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setTeXclass=function(t){return t=this.childNodes[0].setTeXclass(t),this.updateTeXclass(this.childNodes[0]),t},e.defaults=i(i({},s.AbstractMmlNode.defaults),{notation:"longdiv"}),e}(s.AbstractMmlNode);e.MmlMenclose=a},1581:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMerror=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"merror"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.defaults=i({},s.AbstractMmlNode.defaults),e}(s.AbstractMmlNode);e.MmlMerror=a},5410:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMfenced=void 0;var a=r(9007),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=a.TEXCLASS.INNER,e.separators=[],e.open=null,e.close=null,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mfenced"},enumerable:!1,configurable:!0}),e.prototype.setTeXclass=function(t){this.getPrevClass(t),this.open&&(t=this.open.setTeXclass(t)),this.childNodes[0]&&(t=this.childNodes[0].setTeXclass(t));for(var e=1,r=this.childNodes.length;e<r;e++)this.separators[e-1]&&(t=this.separators[e-1].setTeXclass(t)),this.childNodes[e]&&(t=this.childNodes[e].setTeXclass(t));return this.close&&(t=this.close.setTeXclass(t)),this.updateTeXclass(this.open),t},e.prototype.setChildInheritedAttributes=function(e,r,n,o){var i,a;this.addFakeNodes();try{for(var l=s([this.open,this.close].concat(this.separators)),c=l.next();!c.done;c=l.next()){var u=c.value;u&&u.setInheritedAttributes(e,r,n,o)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}t.prototype.setChildInheritedAttributes.call(this,e,r,n,o)},e.prototype.addFakeNodes=function(){var t,e,r=this.attributes.getList("open","close","separators"),n=r.open,o=r.close,i=r.separators;if(n=n.replace(/[ \t\n\r]/g,""),o=o.replace(/[ \t\n\r]/g,""),i=i.replace(/[ \t\n\r]/g,""),n&&(this.open=this.fakeNode(n,{fence:!0,form:"prefix"},a.TEXCLASS.OPEN)),i){for(;i.length<this.childNodes.length-1;)i+=i.charAt(i.length-1);var l=0;try{for(var c=s(this.childNodes.slice(1)),u=c.next();!u.done;u=c.next()){u.value&&this.separators.push(this.fakeNode(i.charAt(l++)))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}}o&&(this.close=this.fakeNode(o,{fence:!0,form:"postfix"},a.TEXCLASS.CLOSE))},e.prototype.fakeNode=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=this.factory.create("text").setText(t),o=this.factory.create("mo",e,[n]);return o.texClass=r,o.parent=this,o},e.defaults=i(i({},a.AbstractMmlNode.defaults),{open:"(",close:")",separators:","}),e}(a.AbstractMmlNode);e.MmlMfenced=l},6850:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMfrac=void 0;var a=r(9007),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mfrac"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setTeXclass=function(t){var e,r;this.getPrevClass(t);try{for(var n=s(this.childNodes),o=n.next();!o.done;o=n.next()){o.value.setTeXclass(null)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this},e.prototype.setChildInheritedAttributes=function(t,e,r,n){(!e||r>0)&&r++,this.childNodes[0].setInheritedAttributes(t,!1,r,n),this.childNodes[1].setInheritedAttributes(t,!1,r,!0)},e.defaults=i(i({},a.AbstractMmlBaseNode.defaults),{linethickness:"medium",numalign:"center",denomalign:"center",bevelled:!1}),e}(a.AbstractMmlBaseNode);e.MmlMfrac=l},3985:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMglyph=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mglyph"},enumerable:!1,configurable:!0}),e.prototype.verifyAttributes=function(e){var r=this.attributes.getList("src","fontfamily","index"),n=r.src,o=r.fontfamily,i=r.index;""!==n||""!==o&&""!==i?t.prototype.verifyAttributes.call(this,e):this.mError("mglyph must have either src or fontfamily and index attributes",e,!0)},e.defaults=i(i({},s.AbstractMmlTokenNode.defaults),{alt:"",src:"",index:"",width:"auto",height:"auto",valign:"0em"}),e}(s.AbstractMmlTokenNode);e.MmlMglyph=a},450:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMi=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mi"},enumerable:!1,configurable:!0}),e.prototype.setInheritedAttributes=function(r,n,o,i){void 0===r&&(r={}),void 0===n&&(n=!1),void 0===o&&(o=0),void 0===i&&(i=!1),t.prototype.setInheritedAttributes.call(this,r,n,o,i),this.getText().match(e.singleCharacter)&&!r.mathvariant&&this.attributes.setInherited("mathvariant","italic")},e.prototype.setTeXclass=function(t){this.getPrevClass(t);var r=this.getText();return r.length>1&&r.match(e.operatorName)&&"normal"===this.attributes.get("mathvariant")&&void 0===this.getProperty("autoOP")&&void 0===this.getProperty("texClass")&&(this.texClass=s.TEXCLASS.OP,this.setProperty("autoOP",!0)),this},e.defaults=i({},s.AbstractMmlTokenNode.defaults),e.operatorName=/^[a-z][a-z0-9]*$/i,e.singleCharacter=/^[\uD800-\uDBFF]?.[\u0300-\u036F\u1AB0-\u1ABE\u1DC0-\u1DFF\u20D0-\u20EF]*$/,e}(s.AbstractMmlTokenNode);e.MmlMi=a},6405:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlNone=e.MmlMprescripts=e.MmlMmultiscripts=void 0;var s=r(9007),a=r(4461),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mmultiscripts"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(t,e,r,n){this.childNodes[0].setInheritedAttributes(t,e,r,n);for(var o=!1,i=1,s=0;i<this.childNodes.length;i++){var a=this.childNodes[i];if(a.isKind("mprescripts")){if(!o&&(o=!0,i%2==0)){var l=this.factory.create("mrow");this.childNodes.splice(i,0,l),l.parent=this,i++}}else{var c=n||s%2==0;a.setInheritedAttributes(t,!1,r+1,c),s++}}this.childNodes.length%2==(o?1:0)&&(this.appendChild(this.factory.create("mrow")),this.childNodes[this.childNodes.length-1].setInheritedAttributes(t,!1,r+1,n))},e.prototype.verifyChildren=function(e){for(var r=!1,n=e.fixMmultiscripts,o=0;o<this.childNodes.length;o++){var i=this.childNodes[o];i.isKind("mprescripts")&&(r?i.mError(i.kind+" can only appear once in "+this.kind,e,!0):(r=!0,o%2!=0||n||this.mError("There must be an equal number of prescripts of each type",e)))}this.childNodes.length%2!=(r?1:0)||n||this.mError("There must be an equal number of scripts of each type",e),t.prototype.verifyChildren.call(this,e)},e.defaults=i({},a.MmlMsubsup.defaults),e}(a.MmlMsubsup);e.MmlMmultiscripts=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mprescripts"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.verifyTree=function(e){t.prototype.verifyTree.call(this,e),this.parent&&!this.parent.isKind("mmultiscripts")&&this.mError(this.kind+" must be a child of mmultiscripts",e,!0)},e.defaults=i({},s.AbstractMmlNode.defaults),e}(s.AbstractMmlNode);e.MmlMprescripts=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"none"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.verifyTree=function(e){t.prototype.verifyTree.call(this,e),this.parent&&!this.parent.isKind("mmultiscripts")&&this.mError(this.kind+" must be a child of mmultiscripts",e,!0)},e.defaults=i({},s.AbstractMmlNode.defaults),e}(s.AbstractMmlNode);e.MmlNone=u},3050:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMn=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mn"},enumerable:!1,configurable:!0}),e.defaults=i({},s.AbstractMmlTokenNode.defaults),e}(s.AbstractMmlTokenNode);e.MmlMn=a},2756:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMo=void 0;var l=r(9007),c=r(4082),u=r(505),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._texClass=null,e.lspace=5/18,e.rspace=5/18,e}return o(e,t),Object.defineProperty(e.prototype,"texClass",{get:function(){if(null===this._texClass){var t=this.getText(),e=s(this.handleExplicitForm(this.getForms()),3),r=e[0],n=e[1],o=e[2],i=this.constructor.OPTABLE,a=i[r][t]||i[n][t]||i[o][t];return a?a[2]:l.TEXCLASS.REL}return this._texClass},set:function(t){this._texClass=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kind",{get:function(){return"mo"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmbellished",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNewLine",{get:function(){return"newline"===this.attributes.get("linebreak")},enumerable:!1,configurable:!0}),e.prototype.coreParent=function(){for(var t=this,e=this,r=this.factory.getNodeClass("math");e&&e.isEmbellished&&e.coreMO()===this&&!(e instanceof r);)t=e,e=e.parent;return t},e.prototype.coreText=function(t){if(!t)return"";if(t.isEmbellished)return t.coreMO().getText();for(;((t.isKind("mrow")||t.isKind("TeXAtom")&&t.texClass!==l.TEXCLASS.VCENTER||t.isKind("mstyle")||t.isKind("mphantom"))&&1===t.childNodes.length||t.isKind("munderover"))&&t.childNodes[0];)t=t.childNodes[0];return t.isToken?t.getText():""},e.prototype.hasSpacingAttributes=function(){return this.attributes.isSet("lspace")||this.attributes.isSet("rspace")},Object.defineProperty(e.prototype,"isAccent",{get:function(){var t=!1,e=this.coreParent().parent;if(e){var r=e.isKind("mover")?e.childNodes[e.over].coreMO()?"accent":"":e.isKind("munder")?e.childNodes[e.under].coreMO()?"accentunder":"":e.isKind("munderover")?this===e.childNodes[e.over].coreMO()?"accent":this===e.childNodes[e.under].coreMO()?"accentunder":"":"";if(r)t=void 0!==e.attributes.getExplicit(r)?t:this.attributes.get("accent")}return t},enumerable:!1,configurable:!0}),e.prototype.setTeXclass=function(t){var e=this.attributes.getList("form","fence"),r=e.form,n=e.fence;return void 0===this.getProperty("texClass")&&(this.attributes.isSet("lspace")||this.attributes.isSet("rspace"))?null:(n&&this.texClass===l.TEXCLASS.REL&&("prefix"===r&&(this.texClass=l.TEXCLASS.OPEN),"postfix"===r&&(this.texClass=l.TEXCLASS.CLOSE)),this.adjustTeXclass(t))},e.prototype.adjustTeXclass=function(t){var e=this.texClass,r=this.prevClass;if(e===l.TEXCLASS.NONE)return t;if(t?(!t.getProperty("autoOP")||e!==l.TEXCLASS.BIN&&e!==l.TEXCLASS.REL||(r=t.texClass=l.TEXCLASS.ORD),r=this.prevClass=t.texClass||l.TEXCLASS.ORD,this.prevLevel=this.attributes.getInherited("scriptlevel")):r=this.prevClass=l.TEXCLASS.NONE,e!==l.TEXCLASS.BIN||r!==l.TEXCLASS.NONE&&r!==l.TEXCLASS.BIN&&r!==l.TEXCLASS.OP&&r!==l.TEXCLASS.REL&&r!==l.TEXCLASS.OPEN&&r!==l.TEXCLASS.PUNCT)if(r!==l.TEXCLASS.BIN||e!==l.TEXCLASS.REL&&e!==l.TEXCLASS.CLOSE&&e!==l.TEXCLASS.PUNCT){if(e===l.TEXCLASS.BIN){for(var n=this,o=this.parent;o&&o.parent&&o.isEmbellished&&(1===o.childNodes.length||!o.isKind("mrow")&&o.core()===n);)n=o,o=o.parent;o.childNodes[o.childNodes.length-1]===n&&(this.texClass=l.TEXCLASS.ORD)}}else t.texClass=this.prevClass=l.TEXCLASS.ORD;else this.texClass=l.TEXCLASS.ORD;return this},e.prototype.setInheritedAttributes=function(e,r,n,o){void 0===e&&(e={}),void 0===r&&(r=!1),void 0===n&&(n=0),void 0===o&&(o=!1),t.prototype.setInheritedAttributes.call(this,e,r,n,o);var i=this.getText();this.checkOperatorTable(i),this.checkPseudoScripts(i),this.checkPrimes(i),this.checkMathAccent(i)},e.prototype.checkOperatorTable=function(t){var e,r,n=s(this.handleExplicitForm(this.getForms()),3),o=n[0],i=n[1],l=n[2];this.attributes.setInherited("form",o);var u=this.constructor.OPTABLE,p=u[o][t]||u[i][t]||u[l][t];if(p){void 0===this.getProperty("texClass")&&(this.texClass=p[2]);try{for(var h=a(Object.keys(p[3]||{})),f=h.next();!f.done;f=h.next()){var d=f.value;this.attributes.setInherited(d,p[3][d])}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}this.lspace=(p[0]+1)/18,this.rspace=(p[1]+1)/18}else{var m=(0,c.getRange)(t);if(m){void 0===this.getProperty("texClass")&&(this.texClass=m[2]);var y=this.constructor.MMLSPACING[m[2]];this.lspace=(y[0]+1)/18,this.rspace=(y[1]+1)/18}}},e.prototype.getForms=function(){for(var t=this,e=this.parent,r=this.Parent;r&&r.isEmbellished;)t=e,e=r.parent,r=r.Parent;if(e&&e.isKind("mrow")&&1!==e.nonSpaceLength()){if(e.firstNonSpace()===t)return["prefix","infix","postfix"];if(e.lastNonSpace()===t)return["postfix","infix","prefix"]}return["infix","prefix","postfix"]},e.prototype.handleExplicitForm=function(t){if(this.attributes.isSet("form")){var e=this.attributes.get("form");t=[e].concat(t.filter((function(t){return t!==e})))}return t},e.prototype.checkPseudoScripts=function(t){var e=this.constructor.pseudoScripts;if(t.match(e)){var r=this.coreParent().Parent,n=!r||!(r.isKind("msubsup")&&!r.isKind("msub"));this.setProperty("pseudoscript",n),n&&(this.attributes.setInherited("lspace",0),this.attributes.setInherited("rspace",0))}},e.prototype.checkPrimes=function(t){var e=this.constructor.primes;if(t.match(e)){var r=this.constructor.remapPrimes,n=(0,u.unicodeString)((0,u.unicodeChars)(t).map((function(t){return r[t]})));this.setProperty("primes",n)}},e.prototype.checkMathAccent=function(t){var e=this.Parent;if(void 0===this.getProperty("mathaccent")&&e&&e.isKind("munderover")){var r=e.childNodes[0];if(!r.isEmbellished||r.coreMO()!==this){var n=this.constructor.mathaccents;t.match(n)&&this.setProperty("mathaccent",!0)}}},e.defaults=i(i({},l.AbstractMmlTokenNode.defaults),{form:"infix",fence:!1,separator:!1,lspace:"thickmathspace",rspace:"thickmathspace",stretchy:!1,symmetric:!1,maxsize:"infinity",minsize:"0em",largeop:!1,movablelimits:!1,accent:!1,linebreak:"auto",lineleading:"1ex",linebreakstyle:"before",indentalign:"auto",indentshift:"0",indenttarget:"",indentalignfirst:"indentalign",indentshiftfirst:"indentshift",indentalignlast:"indentalign",indentshiftlast:"indentshift"}),e.MMLSPACING=c.MMLSPACING,e.OPTABLE=c.OPTABLE,e.pseudoScripts=new RegExp(["^[\"'*`","\xaa","\xb0","\xb2-\xb4","\xb9","\xba","\u2018-\u201f","\u2032-\u2037\u2057","\u2070\u2071","\u2074-\u207f","\u2080-\u208e","]+$"].join("")),e.primes=new RegExp(["^[\"'`","\u2018-\u201f","]+$"].join("")),e.remapPrimes={34:8243,39:8242,96:8245,8216:8245,8217:8242,8218:8242,8219:8245,8220:8246,8221:8243,8222:8243,8223:8246},e.mathaccents=new RegExp(["^[","\xb4\u0301\u02ca","`\u0300\u02cb","\xa8\u0308","~\u0303\u02dc","\xaf\u0304\u02c9","\u02d8\u0306","\u02c7\u030c","^\u0302\u02c6","\u2192\u20d7","\u02d9\u0307","\u02da\u030a","\u20db","\u20dc","]$"].join("")),e}(l.AbstractMmlTokenNode);e.MmlMo=p},7238:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMpadded=void 0;var s=r(9007),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mpadded"},enumerable:!1,configurable:!0}),e.defaults=i(i({},s.AbstractMmlLayoutNode.defaults),{width:"",height:"",depth:"",lspace:0,voffset:0}),e}(s.AbstractMmlLayoutNode);e.MmlMpadded=a},5741:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMphantom=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mphantom"},enumerable:!1,configurable:!0}),e.defaults=i({},s.AbstractMmlLayoutNode.defaults),e}(s.AbstractMmlLayoutNode);e.MmlMphantom=a},6145:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMroot=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mroot"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),e.prototype.setTeXclass=function(t){return this.getPrevClass(t),this.childNodes[0].setTeXclass(null),this.childNodes[1].setTeXclass(null),this},e.prototype.setChildInheritedAttributes=function(t,e,r,n){this.childNodes[0].setInheritedAttributes(t,e,r,!0),this.childNodes[1].setInheritedAttributes(t,!1,r+2,n)},e.defaults=i({},s.AbstractMmlNode.defaults),e}(s.AbstractMmlNode);e.MmlMroot=a},9878:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlInferredMrow=e.MmlMrow=void 0;var a=r(9007),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._core=null,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mrow"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpacelike",{get:function(){var t,e;try{for(var r=s(this.childNodes),n=r.next();!n.done;n=r.next()){if(!n.value.isSpacelike)return!1}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmbellished",{get:function(){var t,e,r=!1,n=0;try{for(var o=s(this.childNodes),i=o.next();!i.done;i=o.next()){var a=i.value;if(a)if(a.isEmbellished){if(r)return!1;r=!0,this._core=n}else if(!a.isSpacelike)return!1;n++}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r},enumerable:!1,configurable:!0}),e.prototype.core=function(){return this.isEmbellished&&null!=this._core?this.childNodes[this._core]:this},e.prototype.coreMO=function(){return this.isEmbellished&&null!=this._core?this.childNodes[this._core].coreMO():this},e.prototype.nonSpaceLength=function(){var t,e,r=0;try{for(var n=s(this.childNodes),o=n.next();!o.done;o=n.next()){var i=o.value;i&&!i.isSpacelike&&r++}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},e.prototype.firstNonSpace=function(){var t,e;try{for(var r=s(this.childNodes),n=r.next();!n.done;n=r.next()){var o=n.value;if(o&&!o.isSpacelike)return o}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return null},e.prototype.lastNonSpace=function(){for(var t=this.childNodes.length;--t>=0;){var e=this.childNodes[t];if(e&&!e.isSpacelike)return e}return null},e.prototype.setTeXclass=function(t){var e,r,n,o;if(null!=this.getProperty("open")||null!=this.getProperty("close")){this.getPrevClass(t),t=null;try{for(var i=s(this.childNodes),l=i.next();!l.done;l=i.next()){t=l.value.setTeXclass(t)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}null==this.texClass&&(this.texClass=a.TEXCLASS.INNER)}else{try{for(var c=s(this.childNodes),u=c.next();!u.done;u=c.next()){t=u.value.setTeXclass(t)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}this.childNodes[0]&&this.updateTeXclass(this.childNodes[0])}return t},e.defaults=i({},a.AbstractMmlNode.defaults),e}(a.AbstractMmlNode);e.MmlMrow=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"inferredMrow"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInferred",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notParent",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"["+this.childNodes.join(",")+"]"},e.defaults=l.defaults,e}(l);e.MmlInferredMrow=c},7265:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMs=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"ms"},enumerable:!1,configurable:!0}),e.defaults=i(i({},s.AbstractMmlTokenNode.defaults),{lquote:'"',rquote:'"'}),e}(s.AbstractMmlTokenNode);e.MmlMs=a},6030:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMspace=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.NONE,e}return o(e,t),e.prototype.setTeXclass=function(t){return t},Object.defineProperty(e.prototype,"kind",{get:function(){return"mspace"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNewline",{get:function(){var t=this.attributes;return null==t.getExplicit("width")&&null==t.getExplicit("height")&&null==t.getExplicit("depth")&&"newline"===t.get("linebreak")},enumerable:!1,configurable:!0}),e.defaults=i(i({},s.AbstractMmlTokenNode.defaults),{width:"0em",height:"0ex",depth:"0ex",linebreak:"auto"}),e}(s.AbstractMmlTokenNode);e.MmlMspace=a},7131:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMsqrt=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"msqrt"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setTeXclass=function(t){return this.getPrevClass(t),this.childNodes[0].setTeXclass(null),this},e.prototype.setChildInheritedAttributes=function(t,e,r,n){this.childNodes[0].setInheritedAttributes(t,e,r,!0)},e.defaults=i({},s.AbstractMmlNode.defaults),e}(s.AbstractMmlNode);e.MmlMsqrt=a},1314:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMstyle=void 0;var s=r(9007),a=r(91),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mstyle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notParent",{get:function(){return this.childNodes[0]&&1===this.childNodes[0].childNodes.length},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(t,e,r,n){var o=this.attributes.getExplicit("scriptlevel");null!=o&&((o=o.toString()).match(/^\s*[-+]/)?r+=parseInt(o):r=parseInt(o),n=!1);var i=this.attributes.getExplicit("displaystyle");null!=i&&(e=!0===i,n=!1);var s=this.attributes.getExplicit("data-cramped");null!=s&&(n=s),t=this.addInheritedAttributes(t,this.attributes.getAllAttributes()),this.childNodes[0].setInheritedAttributes(t,e,r,n)},e.defaults=i(i({},s.AbstractMmlLayoutNode.defaults),{scriptlevel:a.INHERIT,displaystyle:a.INHERIT,scriptsizemultiplier:1/Math.sqrt(2),scriptminsize:"8px",mathbackground:a.INHERIT,mathcolor:a.INHERIT,dir:a.INHERIT,infixlinebreakstyle:"before"}),e}(s.AbstractMmlLayoutNode);e.MmlMstyle=l},4461:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMsup=e.MmlMsub=e.MmlMsubsup=void 0;var s=r(9007),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"msubsup"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"base",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sub",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sup",{get:function(){return 2},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(t,e,r,n){var o=this.childNodes;o[0].setInheritedAttributes(t,e,r,n),o[1].setInheritedAttributes(t,!1,r+1,n||1===this.sub),o[2]&&o[2].setInheritedAttributes(t,!1,r+1,n||2===this.sub)},e.defaults=i(i({},s.AbstractMmlBaseNode.defaults),{subscriptshift:"",superscriptshift:""}),e}(s.AbstractMmlBaseNode);e.MmlMsubsup=a;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"msub"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),e.defaults=i({},a.defaults),e}(a);e.MmlMsub=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"msup"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sup",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sub",{get:function(){return 2},enumerable:!1,configurable:!0}),e.defaults=i({},a.defaults),e}(a);e.MmlMsup=c},1349:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMtable=void 0;var a=r(9007),l=r(505),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.properties={useHeight:!0},e.texclass=a.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mtable"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setInheritedAttributes=function(e,r,n,o){var i,l;try{for(var c=s(a.indentAttributes),u=c.next();!u.done;u=c.next()){var p=u.value;e[p]&&this.attributes.setInherited(p,e[p][1]),void 0!==this.attributes.getExplicit(p)&&delete this.attributes.getAllAttributes()[p]}}catch(t){i={error:t}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(i)throw i.error}}t.prototype.setInheritedAttributes.call(this,e,r,n,o)},e.prototype.setChildInheritedAttributes=function(t,e,r,n){var o,i,a,c;try{for(var u=s(this.childNodes),p=u.next();!p.done;p=u.next()){(y=p.value).isKind("mtr")||this.replaceChild(this.factory.create("mtr"),y).appendChild(y)}}catch(t){o={error:t}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}r=this.getProperty("scriptlevel")||r,e=!(!this.attributes.getExplicit("displaystyle")&&!this.attributes.getDefault("displaystyle")),t=this.addInheritedAttributes(t,{columnalign:this.attributes.get("columnalign"),rowalign:"center"});var h=this.attributes.getExplicit("data-cramped"),f=(0,l.split)(this.attributes.get("rowalign"));try{for(var d=s(this.childNodes),m=d.next();!m.done;m=d.next()){var y=m.value;t.rowalign[1]=f.shift()||t.rowalign[1],y.setInheritedAttributes(t,e,r,!!h)}}catch(t){a={error:t}}finally{try{m&&!m.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}},e.prototype.verifyChildren=function(e){for(var r=null,n=this.factory,o=0;o<this.childNodes.length;o++){var i=this.childNodes[o];if(i.isKind("mtr"))r=null;else{var s=i.isKind("mtd");if(r?(this.removeChild(i),o--):r=this.replaceChild(n.create("mtr"),i),r.appendChild(s?i:n.create("mtd",{},[i])),!e.fixMtables){i.parent.removeChild(i),i.parent=this,s&&r.appendChild(n.create("mtd"));var a=i.mError("Children of "+this.kind+" must be mtr or mlabeledtr",e,s);r.childNodes[r.childNodes.length-1].appendChild(a)}}}t.prototype.verifyChildren.call(this,e)},e.prototype.setTeXclass=function(t){var e,r;this.getPrevClass(t);try{for(var n=s(this.childNodes),o=n.next();!o.done;o=n.next()){o.value.setTeXclass(null)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this},e.defaults=i(i({},a.AbstractMmlNode.defaults),{align:"axis",rowalign:"baseline",columnalign:"center",groupalign:"{left}",alignmentscope:!0,columnwidth:"auto",width:"auto",rowspacing:"1ex",columnspacing:".8em",rowlines:"none",columnlines:"none",frame:"none",framespacing:"0.4em 0.5ex",equalrows:!1,equalcolumns:!1,displaystyle:!1,side:"right",minlabelspacing:"0.8em"}),e}(a.AbstractMmlNode);e.MmlMtable=c},4359:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMtd=void 0;var s=r(9007),a=r(91),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mtd"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.verifyChildren=function(e){!this.parent||this.parent.isKind("mtr")?t.prototype.verifyChildren.call(this,e):this.mError(this.kind+" can only be a child of an mtr or mlabeledtr",e,!0)},e.prototype.setTeXclass=function(t){return this.getPrevClass(t),this.childNodes[0].setTeXclass(null),this},e.defaults=i(i({},s.AbstractMmlBaseNode.defaults),{rowspan:1,columnspan:1,rowalign:a.INHERIT,columnalign:a.INHERIT,groupalign:a.INHERIT}),e}(s.AbstractMmlBaseNode);e.MmlMtd=l},4770:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMtext=void 0;var s=r(9007),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texclass=s.TEXCLASS.ORD,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mtext"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),e.defaults=i({},s.AbstractMmlTokenNode.defaults),e}(s.AbstractMmlTokenNode);e.MmlMtext=a},5022:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMlabeledtr=e.MmlMtr=void 0;var a=r(9007),l=r(91),c=r(505),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mtr"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(t,e,r,n){var o,i,a,l;try{for(var u=s(this.childNodes),p=u.next();!p.done;p=u.next()){(m=p.value).isKind("mtd")||this.replaceChild(this.factory.create("mtd"),m).appendChild(m)}}catch(t){o={error:t}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}var h=(0,c.split)(this.attributes.get("columnalign"));1===this.arity&&h.unshift(this.parent.attributes.get("side")),t=this.addInheritedAttributes(t,{rowalign:this.attributes.get("rowalign"),columnalign:"center"});try{for(var f=s(this.childNodes),d=f.next();!d.done;d=f.next()){var m=d.value;t.columnalign[1]=h.shift()||t.columnalign[1],m.setInheritedAttributes(t,e,r,n)}}catch(t){a={error:t}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}},e.prototype.verifyChildren=function(e){var r,n;if(!this.parent||this.parent.isKind("mtable")){try{for(var o=s(this.childNodes),i=o.next();!i.done;i=o.next()){var a=i.value;if(!a.isKind("mtd"))this.replaceChild(this.factory.create("mtd"),a).appendChild(a),e.fixMtables||a.mError("Children of "+this.kind+" must be mtd",e)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.prototype.verifyChildren.call(this,e)}else this.mError(this.kind+" can only be a child of an mtable",e,!0)},e.prototype.setTeXclass=function(t){var e,r;this.getPrevClass(t);try{for(var n=s(this.childNodes),o=n.next();!o.done;o=n.next()){o.value.setTeXclass(null)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this},e.defaults=i(i({},a.AbstractMmlNode.defaults),{rowalign:l.INHERIT,columnalign:l.INHERIT,groupalign:l.INHERIT}),e}(a.AbstractMmlNode);e.MmlMtr=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mlabeledtr"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(u);e.MmlMlabeledtr=p},5184:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMover=e.MmlMunder=e.MmlMunderover=void 0;var s=r(9007),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"munderover"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"base",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"under",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(t,e,r,n){var o=this.childNodes;o[0].setInheritedAttributes(t,e,r,n||!!o[this.over]);var i=!(e||!o[0].coreMO().attributes.get("movablelimits")),s=this.constructor.ACCENTS;o[1].setInheritedAttributes(t,!1,this.getScriptlevel(s[1],i,r),n||1===this.under),this.setInheritedAccent(1,s[1],e,r,n,i),o[2]&&(o[2].setInheritedAttributes(t,!1,this.getScriptlevel(s[2],i,r),n||2===this.under),this.setInheritedAccent(2,s[2],e,r,n,i))},e.prototype.getScriptlevel=function(t,e,r){return!e&&this.attributes.get(t)||r++,r},e.prototype.setInheritedAccent=function(t,e,r,n,o,i){var s=this.childNodes[t];if(null==this.attributes.getExplicit(e)&&s.isEmbellished){var a=s.coreMO().attributes.get("accent");this.attributes.setInherited(e,a),a!==this.attributes.getDefault(e)&&s.setInheritedAttributes({},r,this.getScriptlevel(e,i,n),o)}},e.defaults=i(i({},s.AbstractMmlBaseNode.defaults),{accent:!1,accentunder:!1,align:"center"}),e.ACCENTS=["","accentunder","accent"],e}(s.AbstractMmlBaseNode);e.MmlMunderover=a;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"munder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),e.defaults=i({},a.defaults),e}(a);e.MmlMunder=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"mover"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"under",{get:function(){return 2},enumerable:!1,configurable:!0}),e.defaults=i({},a.defaults),e.ACCENTS=["","accent","accentunder"],e}(a);e.MmlMover=c},9102:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlAnnotation=e.MmlAnnotationXML=e.MmlSemantics=void 0;var s=r(9007),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"semantics"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notParent",{get:function(){return!0},enumerable:!1,configurable:!0}),e.defaults=i(i({},s.AbstractMmlBaseNode.defaults),{definitionUrl:null,encoding:null}),e}(s.AbstractMmlBaseNode);e.MmlSemantics=a;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"annotation-xml"},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(){},e.defaults=i(i({},s.AbstractMmlNode.defaults),{definitionUrl:null,encoding:null,cd:"mathmlkeys",name:"",src:null}),e}(s.AbstractMmlNode);e.MmlAnnotationXML=l;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.properties={isChars:!0},e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),e.defaults=i({},l.defaults),e}(l);e.MmlAnnotation=c},6325:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MmlVisitor=void 0;var i=r(3909),s=function(t){function e(e){return void 0===e&&(e=null),e||(e=new i.MmlFactory),t.call(this,e)||this}return o(e,t),e.prototype.visitTextNode=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},e.prototype.visitXMLNode=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},e}(r(8823).AbstractVisitor);e.MmlVisitor=s},4082:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.OPTABLE=e.MMLSPACING=e.getRange=e.RANGES=e.MO=e.OPDEF=void 0;var o=r(9007);function i(t,e,r,n){return void 0===r&&(r=o.TEXCLASS.BIN),void 0===n&&(n=null),[t,e,r,n]}e.OPDEF=i,e.MO={ORD:i(0,0,o.TEXCLASS.ORD),ORD11:i(1,1,o.TEXCLASS.ORD),ORD21:i(2,1,o.TEXCLASS.ORD),ORD02:i(0,2,o.TEXCLASS.ORD),ORD55:i(5,5,o.TEXCLASS.ORD),NONE:i(0,0,o.TEXCLASS.NONE),OP:i(1,2,o.TEXCLASS.OP,{largeop:!0,movablelimits:!0,symmetric:!0}),OPFIXED:i(1,2,o.TEXCLASS.OP,{largeop:!0,movablelimits:!0}),INTEGRAL:i(0,1,o.TEXCLASS.OP,{largeop:!0,symmetric:!0}),INTEGRAL2:i(1,2,o.TEXCLASS.OP,{largeop:!0,symmetric:!0}),BIN3:i(3,3,o.TEXCLASS.BIN),BIN4:i(4,4,o.TEXCLASS.BIN),BIN01:i(0,1,o.TEXCLASS.BIN),BIN5:i(5,5,o.TEXCLASS.BIN),TALLBIN:i(4,4,o.TEXCLASS.BIN,{stretchy:!0}),BINOP:i(4,4,o.TEXCLASS.BIN,{largeop:!0,movablelimits:!0}),REL:i(5,5,o.TEXCLASS.REL),REL1:i(1,1,o.TEXCLASS.REL,{stretchy:!0}),REL4:i(4,4,o.TEXCLASS.REL),RELSTRETCH:i(5,5,o.TEXCLASS.REL,{stretchy:!0}),RELACCENT:i(5,5,o.TEXCLASS.REL,{accent:!0}),WIDEREL:i(5,5,o.TEXCLASS.REL,{accent:!0,stretchy:!0}),OPEN:i(0,0,o.TEXCLASS.OPEN,{fence:!0,stretchy:!0,symmetric:!0}),CLOSE:i(0,0,o.TEXCLASS.CLOSE,{fence:!0,stretchy:!0,symmetric:!0}),INNER:i(0,0,o.TEXCLASS.INNER),PUNCT:i(0,3,o.TEXCLASS.PUNCT),ACCENT:i(0,0,o.TEXCLASS.ORD,{accent:!0}),WIDEACCENT:i(0,0,o.TEXCLASS.ORD,{accent:!0,stretchy:!0})},e.RANGES=[[32,127,o.TEXCLASS.REL,"mo"],[160,191,o.TEXCLASS.ORD,"mo"],[192,591,o.TEXCLASS.ORD,"mi"],[688,879,o.TEXCLASS.ORD,"mo"],[880,6688,o.TEXCLASS.ORD,"mi"],[6832,6911,o.TEXCLASS.ORD,"mo"],[6912,7615,o.TEXCLASS.ORD,"mi"],[7616,7679,o.TEXCLASS.ORD,"mo"],[7680,8191,o.TEXCLASS.ORD,"mi"],[8192,8303,o.TEXCLASS.ORD,"mo"],[8304,8351,o.TEXCLASS.ORD,"mo"],[8448,8527,o.TEXCLASS.ORD,"mi"],[8528,8591,o.TEXCLASS.ORD,"mn"],[8592,8703,o.TEXCLASS.REL,"mo"],[8704,8959,o.TEXCLASS.BIN,"mo"],[8960,9215,o.TEXCLASS.ORD,"mo"],[9312,9471,o.TEXCLASS.ORD,"mn"],[9472,10223,o.TEXCLASS.ORD,"mo"],[10224,10239,o.TEXCLASS.REL,"mo"],[10240,10495,o.TEXCLASS.ORD,"mtext"],[10496,10623,o.TEXCLASS.REL,"mo"],[10624,10751,o.TEXCLASS.ORD,"mo"],[10752,11007,o.TEXCLASS.BIN,"mo"],[11008,11055,o.TEXCLASS.ORD,"mo"],[11056,11087,o.TEXCLASS.REL,"mo"],[11088,11263,o.TEXCLASS.ORD,"mo"],[11264,11744,o.TEXCLASS.ORD,"mi"],[11776,11903,o.TEXCLASS.ORD,"mo"],[11904,12255,o.TEXCLASS.ORD,"mi","normal"],[12272,12351,o.TEXCLASS.ORD,"mo"],[12352,42143,o.TEXCLASS.ORD,"mi","normal"],[42192,43055,o.TEXCLASS.ORD,"mi"],[43056,43071,o.TEXCLASS.ORD,"mn"],[43072,55295,o.TEXCLASS.ORD,"mi"],[63744,64255,o.TEXCLASS.ORD,"mi","normal"],[64256,65023,o.TEXCLASS.ORD,"mi"],[65024,65135,o.TEXCLASS.ORD,"mo"],[65136,65791,o.TEXCLASS.ORD,"mi"],[65792,65935,o.TEXCLASS.ORD,"mn"],[65936,74751,o.TEXCLASS.ORD,"mi","normal"],[74752,74879,o.TEXCLASS.ORD,"mn"],[74880,113823,o.TEXCLASS.ORD,"mi","normal"],[113824,119391,o.TEXCLASS.ORD,"mo"],[119648,119679,o.TEXCLASS.ORD,"mn"],[119808,120781,o.TEXCLASS.ORD,"mi"],[120782,120831,o.TEXCLASS.ORD,"mn"],[122624,129023,o.TEXCLASS.ORD,"mo"],[129024,129279,o.TEXCLASS.REL,"mo"],[129280,129535,o.TEXCLASS.ORD,"mo"],[131072,195103,o.TEXCLASS.ORD,"mi","normnal"]],e.getRange=function(t){var r,o,i=t.codePointAt(0);try{for(var s=n(e.RANGES),a=s.next();!a.done;a=s.next()){var l=a.value;if(i<=l[1]){if(i>=l[0])return l;break}}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return null},e.MMLSPACING=[[0,0],[1,2],[3,3],[4,4],[0,0],[0,0],[0,3]],e.OPTABLE={prefix:{"(":e.MO.OPEN,"+":e.MO.BIN01,"-":e.MO.BIN01,"[":e.MO.OPEN,"{":e.MO.OPEN,"|":e.MO.OPEN,"||":[0,0,o.TEXCLASS.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[0,0,o.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"\xac":e.MO.ORD21,"\xb1":e.MO.BIN01,"\u2016":[0,0,o.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"\u2018":[0,0,o.TEXCLASS.OPEN,{fence:!0}],"\u201c":[0,0,o.TEXCLASS.OPEN,{fence:!0}],"\u2145":e.MO.ORD21,"\u2146":i(2,0,o.TEXCLASS.ORD),"\u2200":e.MO.ORD21,"\u2202":e.MO.ORD21,"\u2203":e.MO.ORD21,"\u2204":e.MO.ORD21,"\u2207":e.MO.ORD21,"\u220f":e.MO.OP,"\u2210":e.MO.OP,"\u2211":e.MO.OP,"\u2212":e.MO.BIN01,"\u2213":e.MO.BIN01,"\u221a":[1,1,o.TEXCLASS.ORD,{stretchy:!0}],"\u221b":e.MO.ORD11,"\u221c":e.MO.ORD11,"\u2220":e.MO.ORD,"\u2221":e.MO.ORD,"\u2222":e.MO.ORD,"\u222b":e.MO.INTEGRAL,"\u222c":e.MO.INTEGRAL,"\u222d":e.MO.INTEGRAL,"\u222e":e.MO.INTEGRAL,"\u222f":e.MO.INTEGRAL,"\u2230":e.MO.INTEGRAL,"\u2231":e.MO.INTEGRAL,"\u2232":e.MO.INTEGRAL,"\u2233":e.MO.INTEGRAL,"\u22c0":e.MO.OP,"\u22c1":e.MO.OP,"\u22c2":e.MO.OP,"\u22c3":e.MO.OP,"\u2308":e.MO.OPEN,"\u230a":e.MO.OPEN,"\u2329":e.MO.OPEN,"\u2772":e.MO.OPEN,"\u27e6":e.MO.OPEN,"\u27e8":e.MO.OPEN,"\u27ea":e.MO.OPEN,"\u27ec":e.MO.OPEN,"\u27ee":e.MO.OPEN,"\u2980":[0,0,o.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"\u2983":e.MO.OPEN,"\u2985":e.MO.OPEN,"\u2987":e.MO.OPEN,"\u2989":e.MO.OPEN,"\u298b":e.MO.OPEN,"\u298d":e.MO.OPEN,"\u298f":e.MO.OPEN,"\u2991":e.MO.OPEN,"\u2993":e.MO.OPEN,"\u2995":e.MO.OPEN,"\u2997":e.MO.OPEN,"\u29fc":e.MO.OPEN,"\u2a00":e.MO.OP,"\u2a01":e.MO.OP,"\u2a02":e.MO.OP,"\u2a03":e.MO.OP,"\u2a04":e.MO.OP,"\u2a05":e.MO.OP,"\u2a06":e.MO.OP,"\u2a07":e.MO.OP,"\u2a08":e.MO.OP,"\u2a09":e.MO.OP,"\u2a0a":e.MO.OP,"\u2a0b":e.MO.INTEGRAL2,"\u2a0c":e.MO.INTEGRAL,"\u2a0d":e.MO.INTEGRAL2,"\u2a0e":e.MO.INTEGRAL2,"\u2a0f":e.MO.INTEGRAL2,"\u2a10":e.MO.OP,"\u2a11":e.MO.OP,"\u2a12":e.MO.OP,"\u2a13":e.MO.OP,"\u2a14":e.MO.OP,"\u2a15":e.MO.INTEGRAL2,"\u2a16":e.MO.INTEGRAL2,"\u2a17":e.MO.INTEGRAL2,"\u2a18":e.MO.INTEGRAL2,"\u2a19":e.MO.INTEGRAL2,"\u2a1a":e.MO.INTEGRAL2,"\u2a1b":e.MO.INTEGRAL2,"\u2a1c":e.MO.INTEGRAL2,"\u2afc":e.MO.OP,"\u2aff":e.MO.OP},postfix:{"!!":i(1,0),"!":[1,0,o.TEXCLASS.CLOSE,null],'"':e.MO.ACCENT,"&":e.MO.ORD,")":e.MO.CLOSE,"++":i(0,0),"--":i(0,0),"..":i(0,0),"...":e.MO.ORD,"'":e.MO.ACCENT,"]":e.MO.CLOSE,"^":e.MO.WIDEACCENT,_:e.MO.WIDEACCENT,"`":e.MO.ACCENT,"|":e.MO.CLOSE,"}":e.MO.CLOSE,"~":e.MO.WIDEACCENT,"||":[0,0,o.TEXCLASS.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[0,0,o.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"\xa8":e.MO.ACCENT,"\xaa":e.MO.ACCENT,"\xaf":e.MO.WIDEACCENT,"\xb0":e.MO.ORD,"\xb2":e.MO.ACCENT,"\xb3":e.MO.ACCENT,"\xb4":e.MO.ACCENT,"\xb8":e.MO.ACCENT,"\xb9":e.MO.ACCENT,"\xba":e.MO.ACCENT,"\u02c6":e.MO.WIDEACCENT,"\u02c7":e.MO.WIDEACCENT,"\u02c9":e.MO.WIDEACCENT,"\u02ca":e.MO.ACCENT,"\u02cb":e.MO.ACCENT,"\u02cd":e.MO.WIDEACCENT,"\u02d8":e.MO.ACCENT,"\u02d9":e.MO.ACCENT,"\u02da":e.MO.ACCENT,"\u02dc":e.MO.WIDEACCENT,"\u02dd":e.MO.ACCENT,"\u02f7":e.MO.WIDEACCENT,"\u0302":e.MO.WIDEACCENT,"\u0311":e.MO.ACCENT,"\u03f6":e.MO.REL,"\u2016":[0,0,o.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"\u2019":[0,0,o.TEXCLASS.CLOSE,{fence:!0}],"\u201a":e.MO.ACCENT,"\u201b":e.MO.ACCENT,"\u201d":[0,0,o.TEXCLASS.CLOSE,{fence:!0}],"\u201e":e.MO.ACCENT,"\u201f":e.MO.ACCENT,"\u2032":e.MO.ORD,"\u2033":e.MO.ACCENT,"\u2034":e.MO.ACCENT,"\u2035":e.MO.ACCENT,"\u2036":e.MO.ACCENT,"\u2037":e.MO.ACCENT,"\u203e":e.MO.WIDEACCENT,"\u2057":e.MO.ACCENT,"\u20db":e.MO.ACCENT,"\u20dc":e.MO.ACCENT,"\u2309":e.MO.CLOSE,"\u230b":e.MO.CLOSE,"\u232a":e.MO.CLOSE,"\u23b4":e.MO.WIDEACCENT,"\u23b5":e.MO.WIDEACCENT,"\u23dc":e.MO.WIDEACCENT,"\u23dd":e.MO.WIDEACCENT,"\u23de":e.MO.WIDEACCENT,"\u23df":e.MO.WIDEACCENT,"\u23e0":e.MO.WIDEACCENT,"\u23e1":e.MO.WIDEACCENT,"\u25a0":e.MO.BIN3,"\u25a1":e.MO.BIN3,"\u25aa":e.MO.BIN3,"\u25ab":e.MO.BIN3,"\u25ad":e.MO.BIN3,"\u25ae":e.MO.BIN3,"\u25af":e.MO.BIN3,"\u25b0":e.MO.BIN3,"\u25b1":e.MO.BIN3,"\u25b2":e.MO.BIN4,"\u25b4":e.MO.BIN4,"\u25b6":e.MO.BIN4,"\u25b7":e.MO.BIN4,"\u25b8":e.MO.BIN4,"\u25bc":e.MO.BIN4,"\u25be":e.MO.BIN4,"\u25c0":e.MO.BIN4,"\u25c1":e.MO.BIN4,"\u25c2":e.MO.BIN4,"\u25c4":e.MO.BIN4,"\u25c5":e.MO.BIN4,"\u25c6":e.MO.BIN4,"\u25c7":e.MO.BIN4,"\u25c8":e.MO.BIN4,"\u25c9":e.MO.BIN4,"\u25cc":e.MO.BIN4,"\u25cd":e.MO.BIN4,"\u25ce":e.MO.BIN4,"\u25cf":e.MO.BIN4,"\u25d6":e.MO.BIN4,"\u25d7":e.MO.BIN4,"\u25e6":e.MO.BIN4,"\u266d":e.MO.ORD02,"\u266e":e.MO.ORD02,"\u266f":e.MO.ORD02,"\u2773":e.MO.CLOSE,"\u27e7":e.MO.CLOSE,"\u27e9":e.MO.CLOSE,"\u27eb":e.MO.CLOSE,"\u27ed":e.MO.CLOSE,"\u27ef":e.MO.CLOSE,"\u2980":[0,0,o.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"\u2984":e.MO.CLOSE,"\u2986":e.MO.CLOSE,"\u2988":e.MO.CLOSE,"\u298a":e.MO.CLOSE,"\u298c":e.MO.CLOSE,"\u298e":e.MO.CLOSE,"\u2990":e.MO.CLOSE,"\u2992":e.MO.CLOSE,"\u2994":e.MO.CLOSE,"\u2996":e.MO.CLOSE,"\u2998":e.MO.CLOSE,"\u29fd":e.MO.CLOSE},infix:{"!=":e.MO.BIN4,"#":e.MO.ORD,$:e.MO.ORD,"%":[3,3,o.TEXCLASS.ORD,null],"&&":e.MO.BIN4,"":e.MO.ORD,"*":e.MO.BIN3,"**":i(1,1),"*=":e.MO.BIN4,"+":e.MO.BIN4,"+=":e.MO.BIN4,",":[0,3,o.TEXCLASS.PUNCT,{linebreakstyle:"after",separator:!0}],"-":e.MO.BIN4,"-=":e.MO.BIN4,"->":e.MO.BIN5,".":[0,3,o.TEXCLASS.PUNCT,{separator:!0}],"/":e.MO.ORD11,"//":i(1,1),"/=":e.MO.BIN4,":":[1,2,o.TEXCLASS.REL,null],":=":e.MO.BIN4,";":[0,3,o.TEXCLASS.PUNCT,{linebreakstyle:"after",separator:!0}],"<":e.MO.REL,"<=":e.MO.BIN5,"<>":i(1,1),"=":e.MO.REL,"==":e.MO.BIN4,">":e.MO.REL,">=":e.MO.BIN5,"?":[1,1,o.TEXCLASS.CLOSE,null],"@":e.MO.ORD11,"\\":e.MO.ORD,"^":e.MO.ORD11,_:e.MO.ORD11,"|":[2,2,o.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"||":[2,2,o.TEXCLASS.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[2,2,o.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"\xb1":e.MO.BIN4,"\xb7":e.MO.BIN4,"\xd7":e.MO.BIN4,"\xf7":e.MO.BIN4,"\u02b9":e.MO.ORD,"\u0300":e.MO.ACCENT,"\u0301":e.MO.ACCENT,"\u0303":e.MO.WIDEACCENT,"\u0304":e.MO.ACCENT,"\u0306":e.MO.ACCENT,"\u0307":e.MO.ACCENT,"\u0308":e.MO.ACCENT,"\u030c":e.MO.ACCENT,"\u0332":e.MO.WIDEACCENT,"\u0338":e.MO.REL4,"\u2015":[0,0,o.TEXCLASS.ORD,{stretchy:!0}],"\u2017":[0,0,o.TEXCLASS.ORD,{stretchy:!0}],"\u2020":e.MO.BIN3,"\u2021":e.MO.BIN3,"\u2022":e.MO.BIN4,"\u2026":e.MO.INNER,"\u2043":e.MO.BIN4,"\u2044":e.MO.TALLBIN,"\u2061":e.MO.NONE,"\u2062":e.MO.NONE,"\u2063":[0,0,o.TEXCLASS.NONE,{linebreakstyle:"after",separator:!0}],"\u2064":e.MO.NONE,"\u20d7":e.MO.ACCENT,"\u2111":e.MO.ORD,"\u2113":e.MO.ORD,"\u2118":e.MO.ORD,"\u211c":e.MO.ORD,"\u2190":e.MO.WIDEREL,"\u2191":e.MO.RELSTRETCH,"\u2192":e.MO.WIDEREL,"\u2193":e.MO.RELSTRETCH,"\u2194":e.MO.WIDEREL,"\u2195":e.MO.RELSTRETCH,"\u2196":e.MO.RELSTRETCH,"\u2197":e.MO.RELSTRETCH,"\u2198":e.MO.RELSTRETCH,"\u2199":e.MO.RELSTRETCH,"\u219a":e.MO.RELACCENT,"\u219b":e.MO.RELACCENT,"\u219c":e.MO.WIDEREL,"\u219d":e.MO.WIDEREL,"\u219e":e.MO.WIDEREL,"\u219f":e.MO.WIDEREL,"\u21a0":e.MO.WIDEREL,"\u21a1":e.MO.RELSTRETCH,"\u21a2":e.MO.WIDEREL,"\u21a3":e.MO.WIDEREL,"\u21a4":e.MO.WIDEREL,"\u21a5":e.MO.RELSTRETCH,"\u21a6":e.MO.WIDEREL,"\u21a7":e.MO.RELSTRETCH,"\u21a8":e.MO.RELSTRETCH,"\u21a9":e.MO.WIDEREL,"\u21aa":e.MO.WIDEREL,"\u21ab":e.MO.WIDEREL,"\u21ac":e.MO.WIDEREL,"\u21ad":e.MO.WIDEREL,"\u21ae":e.MO.RELACCENT,"\u21af":e.MO.RELSTRETCH,"\u21b0":e.MO.RELSTRETCH,"\u21b1":e.MO.RELSTRETCH,"\u21b2":e.MO.RELSTRETCH,"\u21b3":e.MO.RELSTRETCH,"\u21b4":e.MO.RELSTRETCH,"\u21b5":e.MO.RELSTRETCH,"\u21b6":e.MO.RELACCENT,"\u21b7":e.MO.RELACCENT,"\u21b8":e.MO.REL,"\u21b9":e.MO.WIDEREL,"\u21ba":e.MO.REL,"\u21bb":e.MO.REL,"\u21bc":e.MO.WIDEREL,"\u21bd":e.MO.WIDEREL,"\u21be":e.MO.RELSTRETCH,"\u21bf":e.MO.RELSTRETCH,"\u21c0":e.MO.WIDEREL,"\u21c1":e.MO.WIDEREL,"\u21c2":e.MO.RELSTRETCH,"\u21c3":e.MO.RELSTRETCH,"\u21c4":e.MO.WIDEREL,"\u21c5":e.MO.RELSTRETCH,"\u21c6":e.MO.WIDEREL,"\u21c7":e.MO.WIDEREL,"\u21c8":e.MO.RELSTRETCH,"\u21c9":e.MO.WIDEREL,"\u21ca":e.MO.RELSTRETCH,"\u21cb":e.MO.WIDEREL,"\u21cc":e.MO.WIDEREL,"\u21cd":e.MO.RELACCENT,"\u21ce":e.MO.RELACCENT,"\u21cf":e.MO.RELACCENT,"\u21d0":e.MO.WIDEREL,"\u21d1":e.MO.RELSTRETCH,"\u21d2":e.MO.WIDEREL,"\u21d3":e.MO.RELSTRETCH,"\u21d4":e.MO.WIDEREL,"\u21d5":e.MO.RELSTRETCH,"\u21d6":e.MO.RELSTRETCH,"\u21d7":e.MO.RELSTRETCH,"\u21d8":e.MO.RELSTRETCH,"\u21d9":e.MO.RELSTRETCH,"\u21da":e.MO.WIDEREL,"\u21db":e.MO.WIDEREL,"\u21dc":e.MO.WIDEREL,"\u21dd":e.MO.WIDEREL,"\u21de":e.MO.REL,"\u21df":e.MO.REL,"\u21e0":e.MO.WIDEREL,"\u21e1":e.MO.RELSTRETCH,"\u21e2":e.MO.WIDEREL,"\u21e3":e.MO.RELSTRETCH,"\u21e4":e.MO.WIDEREL,"\u21e5":e.MO.WIDEREL,"\u21e6":e.MO.WIDEREL,"\u21e7":e.MO.RELSTRETCH,"\u21e8":e.MO.WIDEREL,"\u21e9":e.MO.RELSTRETCH,"\u21ea":e.MO.RELSTRETCH,"\u21eb":e.MO.RELSTRETCH,"\u21ec":e.MO.RELSTRETCH,"\u21ed":e.MO.RELSTRETCH,"\u21ee":e.MO.RELSTRETCH,"\u21ef":e.MO.RELSTRETCH,"\u21f0":e.MO.WIDEREL,"\u21f1":e.MO.REL,"\u21f2":e.MO.REL,"\u21f3":e.MO.RELSTRETCH,"\u21f4":e.MO.RELACCENT,"\u21f5":e.MO.RELSTRETCH,"\u21f6":e.MO.WIDEREL,"\u21f7":e.MO.RELACCENT,"\u21f8":e.MO.RELACCENT,"\u21f9":e.MO.RELACCENT,"\u21fa":e.MO.RELACCENT,"\u21fb":e.MO.RELACCENT,"\u21fc":e.MO.RELACCENT,"\u21fd":e.MO.WIDEREL,"\u21fe":e.MO.WIDEREL,"\u21ff":e.MO.WIDEREL,"\u2201":i(1,2,o.TEXCLASS.ORD),"\u2205":e.MO.ORD,"\u2206":e.MO.BIN3,"\u2208":e.MO.REL,"\u2209":e.MO.REL,"\u220a":e.MO.REL,"\u220b":e.MO.REL,"\u220c":e.MO.REL,"\u220d":e.MO.REL,"\u220e":e.MO.BIN3,"\u2212":e.MO.BIN4,"\u2213":e.MO.BIN4,"\u2214":e.MO.BIN4,"\u2215":e.MO.TALLBIN,"\u2216":e.MO.BIN4,"\u2217":e.MO.BIN4,"\u2218":e.MO.BIN4,"\u2219":e.MO.BIN4,"\u221d":e.MO.REL,"\u221e":e.MO.ORD,"\u221f":e.MO.REL,"\u2223":e.MO.REL,"\u2224":e.MO.REL,"\u2225":e.MO.REL,"\u2226":e.MO.REL,"\u2227":e.MO.BIN4,"\u2228":e.MO.BIN4,"\u2229":e.MO.BIN4,"\u222a":e.MO.BIN4,"\u2234":e.MO.REL,"\u2235":e.MO.REL,"\u2236":e.MO.REL,"\u2237":e.MO.REL,"\u2238":e.MO.BIN4,"\u2239":e.MO.REL,"\u223a":e.MO.BIN4,"\u223b":e.MO.REL,"\u223c":e.MO.REL,"\u223d":e.MO.REL,"\u223d\u0331":e.MO.BIN3,"\u223e":e.MO.REL,"\u223f":e.MO.BIN3,"\u2240":e.MO.BIN4,"\u2241":e.MO.REL,"\u2242":e.MO.REL,"\u2242\u0338":e.MO.REL,"\u2243":e.MO.REL,"\u2244":e.MO.REL,"\u2245":e.MO.REL,"\u2246":e.MO.REL,"\u2247":e.MO.REL,"\u2248":e.MO.REL,"\u2249":e.MO.REL,"\u224a":e.MO.REL,"\u224b":e.MO.REL,"\u224c":e.MO.REL,"\u224d":e.MO.REL,"\u224e":e.MO.REL,"\u224e\u0338":e.MO.REL,"\u224f":e.MO.REL,"\u224f\u0338":e.MO.REL,"\u2250":e.MO.REL,"\u2251":e.MO.REL,"\u2252":e.MO.REL,"\u2253":e.MO.REL,"\u2254":e.MO.REL,"\u2255":e.MO.REL,"\u2256":e.MO.REL,"\u2257":e.MO.REL,"\u2258":e.MO.REL,"\u2259":e.MO.REL,"\u225a":e.MO.REL,"\u225b":e.MO.REL,"\u225c":e.MO.REL,"\u225d":e.MO.REL,"\u225e":e.MO.REL,"\u225f":e.MO.REL,"\u2260":e.MO.REL,"\u2261":e.MO.REL,"\u2262":e.MO.REL,"\u2263":e.MO.REL,"\u2264":e.MO.REL,"\u2265":e.MO.REL,"\u2266":e.MO.REL,"\u2266\u0338":e.MO.REL,"\u2267":e.MO.REL,"\u2268":e.MO.REL,"\u2269":e.MO.REL,"\u226a":e.MO.REL,"\u226a\u0338":e.MO.REL,"\u226b":e.MO.REL,"\u226b\u0338":e.MO.REL,"\u226c":e.MO.REL,"\u226d":e.MO.REL,"\u226e":e.MO.REL,"\u226f":e.MO.REL,"\u2270":e.MO.REL,"\u2271":e.MO.REL,"\u2272":e.MO.REL,"\u2273":e.MO.REL,"\u2274":e.MO.REL,"\u2275":e.MO.REL,"\u2276":e.MO.REL,"\u2277":e.MO.REL,"\u2278":e.MO.REL,"\u2279":e.MO.REL,"\u227a":e.MO.REL,"\u227b":e.MO.REL,"\u227c":e.MO.REL,"\u227d":e.MO.REL,"\u227e":e.MO.REL,"\u227f":e.MO.REL,"\u227f\u0338":e.MO.REL,"\u2280":e.MO.REL,"\u2281":e.MO.REL,"\u2282":e.MO.REL,"\u2282\u20d2":e.MO.REL,"\u2283":e.MO.REL,"\u2283\u20d2":e.MO.REL,"\u2284":e.MO.REL,"\u2285":e.MO.REL,"\u2286":e.MO.REL,"\u2287":e.MO.REL,"\u2288":e.MO.REL,"\u2289":e.MO.REL,"\u228a":e.MO.REL,"\u228b":e.MO.REL,"\u228c":e.MO.BIN4,"\u228d":e.MO.BIN4,"\u228e":e.MO.BIN4,"\u228f":e.MO.REL,"\u228f\u0338":e.MO.REL,"\u2290":e.MO.REL,"\u2290\u0338":e.MO.REL,"\u2291":e.MO.REL,"\u2292":e.MO.REL,"\u2293":e.MO.BIN4,"\u2294":e.MO.BIN4,"\u2295":e.MO.BIN4,"\u2296":e.MO.BIN4,"\u2297":e.MO.BIN4,"\u2298":e.MO.BIN4,"\u2299":e.MO.BIN4,"\u229a":e.MO.BIN4,"\u229b":e.MO.BIN4,"\u229c":e.MO.BIN4,"\u229d":e.MO.BIN4,"\u229e":e.MO.BIN4,"\u229f":e.MO.BIN4,"\u22a0":e.MO.BIN4,"\u22a1":e.MO.BIN4,"\u22a2":e.MO.REL,"\u22a3":e.MO.REL,"\u22a4":e.MO.ORD55,"\u22a5":e.MO.REL,"\u22a6":e.MO.REL,"\u22a7":e.MO.REL,"\u22a8":e.MO.REL,"\u22a9":e.MO.REL,"\u22aa":e.MO.REL,"\u22ab":e.MO.REL,"\u22ac":e.MO.REL,"\u22ad":e.MO.REL,"\u22ae":e.MO.REL,"\u22af":e.MO.REL,"\u22b0":e.MO.REL,"\u22b1":e.MO.REL,"\u22b2":e.MO.REL,"\u22b3":e.MO.REL,"\u22b4":e.MO.REL,"\u22b5":e.MO.REL,"\u22b6":e.MO.REL,"\u22b7":e.MO.REL,"\u22b8":e.MO.REL,"\u22b9":e.MO.REL,"\u22ba":e.MO.BIN4,"\u22bb":e.MO.BIN4,"\u22bc":e.MO.BIN4,"\u22bd":e.MO.BIN4,"\u22be":e.MO.BIN3,"\u22bf":e.MO.BIN3,"\u22c4":e.MO.BIN4,"\u22c5":e.MO.BIN4,"\u22c6":e.MO.BIN4,"\u22c7":e.MO.BIN4,"\u22c8":e.MO.REL,"\u22c9":e.MO.BIN4,"\u22ca":e.MO.BIN4,"\u22cb":e.MO.BIN4,"\u22cc":e.MO.BIN4,"\u22cd":e.MO.REL,"\u22ce":e.MO.BIN4,"\u22cf":e.MO.BIN4,"\u22d0":e.MO.REL,"\u22d1":e.MO.REL,"\u22d2":e.MO.BIN4,"\u22d3":e.MO.BIN4,"\u22d4":e.MO.REL,"\u22d5":e.MO.REL,"\u22d6":e.MO.REL,"\u22d7":e.MO.REL,"\u22d8":e.MO.REL,"\u22d9":e.MO.REL,"\u22da":e.MO.REL,"\u22db":e.MO.REL,"\u22dc":e.MO.REL,"\u22dd":e.MO.REL,"\u22de":e.MO.REL,"\u22df":e.MO.REL,"\u22e0":e.MO.REL,"\u22e1":e.MO.REL,"\u22e2":e.MO.REL,"\u22e3":e.MO.REL,"\u22e4":e.MO.REL,"\u22e5":e.MO.REL,"\u22e6":e.MO.REL,"\u22e7":e.MO.REL,"\u22e8":e.MO.REL,"\u22e9":e.MO.REL,"\u22ea":e.MO.REL,"\u22eb":e.MO.REL,"\u22ec":e.MO.REL,"\u22ed":e.MO.REL,"\u22ee":e.MO.ORD55,"\u22ef":e.MO.INNER,"\u22f0":e.MO.REL,"\u22f1":[5,5,o.TEXCLASS.INNER,null],"\u22f2":e.MO.REL,"\u22f3":e.MO.REL,"\u22f4":e.MO.REL,"\u22f5":e.MO.REL,"\u22f6":e.MO.REL,"\u22f7":e.MO.REL,"\u22f8":e.MO.REL,"\u22f9":e.MO.REL,"\u22fa":e.MO.REL,"\u22fb":e.MO.REL,"\u22fc":e.MO.REL,"\u22fd":e.MO.REL,"\u22fe":e.MO.REL,"\u22ff":e.MO.REL,"\u2305":e.MO.BIN3,"\u2306":e.MO.BIN3,"\u2322":e.MO.REL4,"\u2323":e.MO.REL4,"\u2329":e.MO.OPEN,"\u232a":e.MO.CLOSE,"\u23aa":e.MO.ORD,"\u23af":[0,0,o.TEXCLASS.ORD,{stretchy:!0}],"\u23b0":e.MO.OPEN,"\u23b1":e.MO.CLOSE,"\u2500":e.MO.ORD,"\u25b3":e.MO.BIN4,"\u25b5":e.MO.BIN4,"\u25b9":e.MO.BIN4,"\u25bd":e.MO.BIN4,"\u25bf":e.MO.BIN4,"\u25c3":e.MO.BIN4,"\u25ef":e.MO.BIN3,"\u2660":e.MO.ORD,"\u2661":e.MO.ORD,"\u2662":e.MO.ORD,"\u2663":e.MO.ORD,"\u2758":e.MO.REL,"\u27f0":e.MO.RELSTRETCH,"\u27f1":e.MO.RELSTRETCH,"\u27f5":e.MO.WIDEREL,"\u27f6":e.MO.WIDEREL,"\u27f7":e.MO.WIDEREL,"\u27f8":e.MO.WIDEREL,"\u27f9":e.MO.WIDEREL,"\u27fa":e.MO.WIDEREL,"\u27fb":e.MO.WIDEREL,"\u27fc":e.MO.WIDEREL,"\u27fd":e.MO.WIDEREL,"\u27fe":e.MO.WIDEREL,"\u27ff":e.MO.WIDEREL,"\u2900":e.MO.RELACCENT,"\u2901":e.MO.RELACCENT,"\u2902":e.MO.RELACCENT,"\u2903":e.MO.RELACCENT,"\u2904":e.MO.RELACCENT,"\u2905":e.MO.RELACCENT,"\u2906":e.MO.RELACCENT,"\u2907":e.MO.RELACCENT,"\u2908":e.MO.REL,"\u2909":e.MO.REL,"\u290a":e.MO.RELSTRETCH,"\u290b":e.MO.RELSTRETCH,"\u290c":e.MO.WIDEREL,"\u290d":e.MO.WIDEREL,"\u290e":e.MO.WIDEREL,"\u290f":e.MO.WIDEREL,"\u2910":e.MO.WIDEREL,"\u2911":e.MO.RELACCENT,"\u2912":e.MO.RELSTRETCH,"\u2913":e.MO.RELSTRETCH,"\u2914":e.MO.RELACCENT,"\u2915":e.MO.RELACCENT,"\u2916":e.MO.RELACCENT,"\u2917":e.MO.RELACCENT,"\u2918":e.MO.RELACCENT,"\u2919":e.MO.RELACCENT,"\u291a":e.MO.RELACCENT,"\u291b":e.MO.RELACCENT,"\u291c":e.MO.RELACCENT,"\u291d":e.MO.RELACCENT,"\u291e":e.MO.RELACCENT,"\u291f":e.MO.RELACCENT,"\u2920":e.MO.RELACCENT,"\u2921":e.MO.RELSTRETCH,"\u2922":e.MO.RELSTRETCH,"\u2923":e.MO.REL,"\u2924":e.MO.REL,"\u2925":e.MO.REL,"\u2926":e.MO.REL,"\u2927":e.MO.REL,"\u2928":e.MO.REL,"\u2929":e.MO.REL,"\u292a":e.MO.REL,"\u292b":e.MO.REL,"\u292c":e.MO.REL,"\u292d":e.MO.REL,"\u292e":e.MO.REL,"\u292f":e.MO.REL,"\u2930":e.MO.REL,"\u2931":e.MO.REL,"\u2932":e.MO.REL,"\u2933":e.MO.RELACCENT,"\u2934":e.MO.REL,"\u2935":e.MO.REL,"\u2936":e.MO.REL,"\u2937":e.MO.REL,"\u2938":e.MO.REL,"\u2939":e.MO.REL,"\u293a":e.MO.RELACCENT,"\u293b":e.MO.RELACCENT,"\u293c":e.MO.RELACCENT,"\u293d":e.MO.RELACCENT,"\u293e":e.MO.REL,"\u293f":e.MO.REL,"\u2940":e.MO.REL,"\u2941":e.MO.REL,"\u2942":e.MO.RELACCENT,"\u2943":e.MO.RELACCENT,"\u2944":e.MO.RELACCENT,"\u2945":e.MO.RELACCENT,"\u2946":e.MO.RELACCENT,"\u2947":e.MO.RELACCENT,"\u2948":e.MO.RELACCENT,"\u2949":e.MO.REL,"\u294a":e.MO.RELACCENT,"\u294b":e.MO.RELACCENT,"\u294c":e.MO.REL,"\u294d":e.MO.REL,"\u294e":e.MO.WIDEREL,"\u294f":e.MO.RELSTRETCH,"\u2950":e.MO.WIDEREL,"\u2951":e.MO.RELSTRETCH,"\u2952":e.MO.WIDEREL,"\u2953":e.MO.WIDEREL,"\u2954":e.MO.RELSTRETCH,"\u2955":e.MO.RELSTRETCH,"\u2956":e.MO.RELSTRETCH,"\u2957":e.MO.RELSTRETCH,"\u2958":e.MO.RELSTRETCH,"\u2959":e.MO.RELSTRETCH,"\u295a":e.MO.WIDEREL,"\u295b":e.MO.WIDEREL,"\u295c":e.MO.RELSTRETCH,"\u295d":e.MO.RELSTRETCH,"\u295e":e.MO.WIDEREL,"\u295f":e.MO.WIDEREL,"\u2960":e.MO.RELSTRETCH,"\u2961":e.MO.RELSTRETCH,"\u2962":e.MO.RELACCENT,"\u2963":e.MO.REL,"\u2964":e.MO.RELACCENT,"\u2965":e.MO.REL,"\u2966":e.MO.RELACCENT,"\u2967":e.MO.RELACCENT,"\u2968":e.MO.RELACCENT,"\u2969":e.MO.RELACCENT,"\u296a":e.MO.RELACCENT,"\u296b":e.MO.RELACCENT,"\u296c":e.MO.RELACCENT,"\u296d":e.MO.RELACCENT,"\u296e":e.MO.RELSTRETCH,"\u296f":e.MO.RELSTRETCH,"\u2970":e.MO.RELACCENT,"\u2971":e.MO.RELACCENT,"\u2972":e.MO.RELACCENT,"\u2973":e.MO.RELACCENT,"\u2974":e.MO.RELACCENT,"\u2975":e.MO.RELACCENT,"\u2976":e.MO.RELACCENT,"\u2977":e.MO.RELACCENT,"\u2978":e.MO.RELACCENT,"\u2979":e.MO.RELACCENT,"\u297a":e.MO.RELACCENT,"\u297b":e.MO.RELACCENT,"\u297c":e.MO.RELACCENT,"\u297d":e.MO.RELACCENT,"\u297e":e.MO.REL,"\u297f":e.MO.REL,"\u2981":e.MO.BIN3,"\u2982":e.MO.BIN3,"\u2999":e.MO.BIN3,"\u299a":e.MO.BIN3,"\u299b":e.MO.BIN3,"\u299c":e.MO.BIN3,"\u299d":e.MO.BIN3,"\u299e":e.MO.BIN3,"\u299f":e.MO.BIN3,"\u29a0":e.MO.BIN3,"\u29a1":e.MO.BIN3,"\u29a2":e.MO.BIN3,"\u29a3":e.MO.BIN3,"\u29a4":e.MO.BIN3,"\u29a5":e.MO.BIN3,"\u29a6":e.MO.BIN3,"\u29a7":e.MO.BIN3,"\u29a8":e.MO.BIN3,"\u29a9":e.MO.BIN3,"\u29aa":e.MO.BIN3,"\u29ab":e.MO.BIN3,"\u29ac":e.MO.BIN3,"\u29ad":e.MO.BIN3,"\u29ae":e.MO.BIN3,"\u29af":e.MO.BIN3,"\u29b0":e.MO.BIN3,"\u29b1":e.MO.BIN3,"\u29b2":e.MO.BIN3,"\u29b3":e.MO.BIN3,"\u29b4":e.MO.BIN3,"\u29b5":e.MO.BIN3,"\u29b6":e.MO.BIN4,"\u29b7":e.MO.BIN4,"\u29b8":e.MO.BIN4,"\u29b9":e.MO.BIN4,"\u29ba":e.MO.BIN4,"\u29bb":e.MO.BIN4,"\u29bc":e.MO.BIN4,"\u29bd":e.MO.BIN4,"\u29be":e.MO.BIN4,"\u29bf":e.MO.BIN4,"\u29c0":e.MO.REL,"\u29c1":e.MO.REL,"\u29c2":e.MO.BIN3,"\u29c3":e.MO.BIN3,"\u29c4":e.MO.BIN4,"\u29c5":e.MO.BIN4,"\u29c6":e.MO.BIN4,"\u29c7":e.MO.BIN4,"\u29c8":e.MO.BIN4,"\u29c9":e.MO.BIN3,"\u29ca":e.MO.BIN3,"\u29cb":e.MO.BIN3,"\u29cc":e.MO.BIN3,"\u29cd":e.MO.BIN3,"\u29ce":e.MO.REL,"\u29cf":e.MO.REL,"\u29cf\u0338":e.MO.REL,"\u29d0":e.MO.REL,"\u29d0\u0338":e.MO.REL,"\u29d1":e.MO.REL,"\u29d2":e.MO.REL,"\u29d3":e.MO.REL,"\u29d4":e.MO.REL,"\u29d5":e.MO.REL,"\u29d6":e.MO.BIN4,"\u29d7":e.MO.BIN4,"\u29d8":e.MO.BIN3,"\u29d9":e.MO.BIN3,"\u29db":e.MO.BIN3,"\u29dc":e.MO.BIN3,"\u29dd":e.MO.BIN3,"\u29de":e.MO.REL,"\u29df":e.MO.BIN3,"\u29e0":e.MO.BIN3,"\u29e1":e.MO.REL,"\u29e2":e.MO.BIN4,"\u29e3":e.MO.REL,"\u29e4":e.MO.REL,"\u29e5":e.MO.REL,"\u29e6":e.MO.REL,"\u29e7":e.MO.BIN3,"\u29e8":e.MO.BIN3,"\u29e9":e.MO.BIN3,"\u29ea":e.MO.BIN3,"\u29eb":e.MO.BIN3,"\u29ec":e.MO.BIN3,"\u29ed":e.MO.BIN3,"\u29ee":e.MO.BIN3,"\u29ef":e.MO.BIN3,"\u29f0":e.MO.BIN3,"\u29f1":e.MO.BIN3,"\u29f2":e.MO.BIN3,"\u29f3":e.MO.BIN3,"\u29f4":e.MO.REL,"\u29f5":e.MO.BIN4,"\u29f6":e.MO.BIN4,"\u29f7":e.MO.BIN4,"\u29f8":e.MO.BIN3,"\u29f9":e.MO.BIN3,"\u29fa":e.MO.BIN3,"\u29fb":e.MO.BIN3,"\u29fe":e.MO.BIN4,"\u29ff":e.MO.BIN4,"\u2a1d":e.MO.BIN3,"\u2a1e":e.MO.BIN3,"\u2a1f":e.MO.BIN3,"\u2a20":e.MO.BIN3,"\u2a21":e.MO.BIN3,"\u2a22":e.MO.BIN4,"\u2a23":e.MO.BIN4,"\u2a24":e.MO.BIN4,"\u2a25":e.MO.BIN4,"\u2a26":e.MO.BIN4,"\u2a27":e.MO.BIN4,"\u2a28":e.MO.BIN4,"\u2a29":e.MO.BIN4,"\u2a2a":e.MO.BIN4,"\u2a2b":e.MO.BIN4,"\u2a2c":e.MO.BIN4,"\u2a2d":e.MO.BIN4,"\u2a2e":e.MO.BIN4,"\u2a2f":e.MO.BIN4,"\u2a30":e.MO.BIN4,"\u2a31":e.MO.BIN4,"\u2a32":e.MO.BIN4,"\u2a33":e.MO.BIN4,"\u2a34":e.MO.BIN4,"\u2a35":e.MO.BIN4,"\u2a36":e.MO.BIN4,"\u2a37":e.MO.BIN4,"\u2a38":e.MO.BIN4,"\u2a39":e.MO.BIN4,"\u2a3a":e.MO.BIN4,"\u2a3b":e.MO.BIN4,"\u2a3c":e.MO.BIN4,"\u2a3d":e.MO.BIN4,"\u2a3e":e.MO.BIN4,"\u2a3f":e.MO.BIN4,"\u2a40":e.MO.BIN4,"\u2a41":e.MO.BIN4,"\u2a42":e.MO.BIN4,"\u2a43":e.MO.BIN4,"\u2a44":e.MO.BIN4,"\u2a45":e.MO.BIN4,"\u2a46":e.MO.BIN4,"\u2a47":e.MO.BIN4,"\u2a48":e.MO.BIN4,"\u2a49":e.MO.BIN4,"\u2a4a":e.MO.BIN4,"\u2a4b":e.MO.BIN4,"\u2a4c":e.MO.BIN4,"\u2a4d":e.MO.BIN4,"\u2a4e":e.MO.BIN4,"\u2a4f":e.MO.BIN4,"\u2a50":e.MO.BIN4,"\u2a51":e.MO.BIN4,"\u2a52":e.MO.BIN4,"\u2a53":e.MO.BIN4,"\u2a54":e.MO.BIN4,"\u2a55":e.MO.BIN4,"\u2a56":e.MO.BIN4,"\u2a57":e.MO.BIN4,"\u2a58":e.MO.BIN4,"\u2a59":e.MO.REL,"\u2a5a":e.MO.BIN4,"\u2a5b":e.MO.BIN4,"\u2a5c":e.MO.BIN4,"\u2a5d":e.MO.BIN4,"\u2a5e":e.MO.BIN4,"\u2a5f":e.MO.BIN4,"\u2a60":e.MO.BIN4,"\u2a61":e.MO.BIN4,"\u2a62":e.MO.BIN4,"\u2a63":e.MO.BIN4,"\u2a64":e.MO.BIN4,"\u2a65":e.MO.BIN4,"\u2a66":e.MO.REL,"\u2a67":e.MO.REL,"\u2a68":e.MO.REL,"\u2a69":e.MO.REL,"\u2a6a":e.MO.REL,"\u2a6b":e.MO.REL,"\u2a6c":e.MO.REL,"\u2a6d":e.MO.REL,"\u2a6e":e.MO.REL,"\u2a6f":e.MO.REL,"\u2a70":e.MO.REL,"\u2a71":e.MO.BIN4,"\u2a72":e.MO.BIN4,"\u2a73":e.MO.REL,"\u2a74":e.MO.REL,"\u2a75":e.MO.REL,"\u2a76":e.MO.REL,"\u2a77":e.MO.REL,"\u2a78":e.MO.REL,"\u2a79":e.MO.REL,"\u2a7a":e.MO.REL,"\u2a7b":e.MO.REL,"\u2a7c":e.MO.REL,"\u2a7d":e.MO.REL,"\u2a7d\u0338":e.MO.REL,"\u2a7e":e.MO.REL,"\u2a7e\u0338":e.MO.REL,"\u2a7f":e.MO.REL,"\u2a80":e.MO.REL,"\u2a81":e.MO.REL,"\u2a82":e.MO.REL,"\u2a83":e.MO.REL,"\u2a84":e.MO.REL,"\u2a85":e.MO.REL,"\u2a86":e.MO.REL,"\u2a87":e.MO.REL,"\u2a88":e.MO.REL,"\u2a89":e.MO.REL,"\u2a8a":e.MO.REL,"\u2a8b":e.MO.REL,"\u2a8c":e.MO.REL,"\u2a8d":e.MO.REL,"\u2a8e":e.MO.REL,"\u2a8f":e.MO.REL,"\u2a90":e.MO.REL,"\u2a91":e.MO.REL,"\u2a92":e.MO.REL,"\u2a93":e.MO.REL,"\u2a94":e.MO.REL,"\u2a95":e.MO.REL,"\u2a96":e.MO.REL,"\u2a97":e.MO.REL,"\u2a98":e.MO.REL,"\u2a99":e.MO.REL,"\u2a9a":e.MO.REL,"\u2a9b":e.MO.REL,"\u2a9c":e.MO.REL,"\u2a9d":e.MO.REL,"\u2a9e":e.MO.REL,"\u2a9f":e.MO.REL,"\u2aa0":e.MO.REL,"\u2aa1":e.MO.REL,"\u2aa1\u0338":e.MO.REL,"\u2aa2":e.MO.REL,"\u2aa2\u0338":e.MO.REL,"\u2aa3":e.MO.REL,"\u2aa4":e.MO.REL,"\u2aa5":e.MO.REL,"\u2aa6":e.MO.REL,"\u2aa7":e.MO.REL,"\u2aa8":e.MO.REL,"\u2aa9":e.MO.REL,"\u2aaa":e.MO.REL,"\u2aab":e.MO.REL,"\u2aac":e.MO.REL,"\u2aad":e.MO.REL,"\u2aae":e.MO.REL,"\u2aaf":e.MO.REL,"\u2aaf\u0338":e.MO.REL,"\u2ab0":e.MO.REL,"\u2ab0\u0338":e.MO.REL,"\u2ab1":e.MO.REL,"\u2ab2":e.MO.REL,"\u2ab3":e.MO.REL,"\u2ab4":e.MO.REL,"\u2ab5":e.MO.REL,"\u2ab6":e.MO.REL,"\u2ab7":e.MO.REL,"\u2ab8":e.MO.REL,"\u2ab9":e.MO.REL,"\u2aba":e.MO.REL,"\u2abb":e.MO.REL,"\u2abc":e.MO.REL,"\u2abd":e.MO.REL,"\u2abe":e.MO.REL,"\u2abf":e.MO.REL,"\u2ac0":e.MO.REL,"\u2ac1":e.MO.REL,"\u2ac2":e.MO.REL,"\u2ac3":e.MO.REL,"\u2ac4":e.MO.REL,"\u2ac5":e.MO.REL,"\u2ac6":e.MO.REL,"\u2ac7":e.MO.REL,"\u2ac8":e.MO.REL,"\u2ac9":e.MO.REL,"\u2aca":e.MO.REL,"\u2acb":e.MO.REL,"\u2acc":e.MO.REL,"\u2acd":e.MO.REL,"\u2ace":e.MO.REL,"\u2acf":e.MO.REL,"\u2ad0":e.MO.REL,"\u2ad1":e.MO.REL,"\u2ad2":e.MO.REL,"\u2ad3":e.MO.REL,"\u2ad4":e.MO.REL,"\u2ad5":e.MO.REL,"\u2ad6":e.MO.REL,"\u2ad7":e.MO.REL,"\u2ad8":e.MO.REL,"\u2ad9":e.MO.REL,"\u2ada":e.MO.REL,"\u2adb":e.MO.REL,"\u2add":e.MO.REL,"\u2add\u0338":e.MO.REL,"\u2ade":e.MO.REL,"\u2adf":e.MO.REL,"\u2ae0":e.MO.REL,"\u2ae1":e.MO.REL,"\u2ae2":e.MO.REL,"\u2ae3":e.MO.REL,"\u2ae4":e.MO.REL,"\u2ae5":e.MO.REL,"\u2ae6":e.MO.REL,"\u2ae7":e.MO.REL,"\u2ae8":e.MO.REL,"\u2ae9":e.MO.REL,"\u2aea":e.MO.REL,"\u2aeb":e.MO.REL,"\u2aec":e.MO.REL,"\u2aed":e.MO.REL,"\u2aee":e.MO.REL,"\u2aef":e.MO.REL,"\u2af0":e.MO.REL,"\u2af1":e.MO.REL,"\u2af2":e.MO.REL,"\u2af3":e.MO.REL,"\u2af4":e.MO.BIN4,"\u2af5":e.MO.BIN4,"\u2af6":e.MO.BIN4,"\u2af7":e.MO.REL,"\u2af8":e.MO.REL,"\u2af9":e.MO.REL,"\u2afa":e.MO.REL,"\u2afb":e.MO.BIN4,"\u2afd":e.MO.BIN4,"\u2afe":e.MO.BIN3,"\u2b45":e.MO.RELSTRETCH,"\u2b46":e.MO.RELSTRETCH,"\u3008":e.MO.OPEN,"\u3009":e.MO.CLOSE,"\ufe37":e.MO.WIDEACCENT,"\ufe38":e.MO.WIDEACCENT}},e.OPTABLE.infix["^"]=e.MO.WIDEREL,e.OPTABLE.infix._=e.MO.WIDEREL,e.OPTABLE.infix["\u2adc"]=e.MO.REL},9259:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.SerializedMmlVisitor=e.toEntity=e.DATAMJX=void 0;var a=r(6325),l=r(9007),c=r(450);e.DATAMJX="data-mjx-";e.toEntity=function(t){return"&#x"+t.codePointAt(0).toString(16).toUpperCase()+";"};var u=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),r.prototype.visitTree=function(t){return this.visitNode(t,"")},r.prototype.visitTextNode=function(t,e){return this.quoteHTML(t.getText())},r.prototype.visitXMLNode=function(t,e){return e+t.getSerializedXML()},r.prototype.visitInferredMrowNode=function(t,e){var r,n,o=[];try{for(var s=i(t.childNodes),a=s.next();!a.done;a=s.next()){var l=a.value;o.push(this.visitNode(l,e))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o.join("\n")},r.prototype.visitTeXAtomNode=function(t,e){var r=this.childNodeMml(t,e+"  ","\n");return e+"<mrow"+this.getAttributes(t)+">"+(r.match(/\S/)?"\n"+r+e:"")+"</mrow>"},r.prototype.visitAnnotationNode=function(t,e){return e+"<annotation"+this.getAttributes(t)+">"+this.childNodeMml(t,"","")+"</annotation>"},r.prototype.visitDefault=function(t,e){var r=t.kind,n=s(t.isToken||0===t.childNodes.length?["",""]:["\n",e],2),o=n[0],i=n[1],a=this.childNodeMml(t,e+"  ",o);return e+"<"+r+this.getAttributes(t)+">"+(a.match(/\S/)?o+a+i:"")+"</"+r+">"},r.prototype.childNodeMml=function(t,e,r){var n,o,s="";try{for(var a=i(t.childNodes),l=a.next();!l.done;l=a.next()){var c=l.value;s+=this.visitNode(c,e)+r}}catch(t){n={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return s},r.prototype.getAttributes=function(t){var e,r,n=[],o=this.constructor.defaultAttributes[t.kind]||{},s=Object.assign({},o,this.getDataAttributes(t),t.attributes.getAllAttributes()),a=this.constructor.variants;s.hasOwnProperty("mathvariant")&&a.hasOwnProperty(s.mathvariant)&&(s.mathvariant=a[s.mathvariant]);try{for(var l=i(Object.keys(s)),c=l.next();!c.done;c=l.next()){var u=c.value,p=String(s[u]);void 0!==p&&n.push(u+'="'+this.quoteHTML(p)+'"')}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return n.length?" "+n.join(" "):""},r.prototype.getDataAttributes=function(t){var e={},r=t.attributes.getExplicit("mathvariant"),n=this.constructor.variants;r&&n.hasOwnProperty(r)&&this.setDataAttribute(e,"variant",r),t.getProperty("variantForm")&&this.setDataAttribute(e,"alternate","1"),t.getProperty("pseudoscript")&&this.setDataAttribute(e,"pseudoscript","true"),!1===t.getProperty("autoOP")&&this.setDataAttribute(e,"auto-op","false");var o=t.getProperty("scriptalign");o&&this.setDataAttribute(e,"script-align",o);var i=t.getProperty("texClass");if(void 0!==i){var s=!0;if(i===l.TEXCLASS.OP&&t.isKind("mi")){var a=t.getText();s=!(a.length>1&&a.match(c.MmlMi.operatorName))}s&&this.setDataAttribute(e,"texclass",i<0?"NONE":l.TEXCLASSNAMES[i])}return t.getProperty("scriptlevel")&&!1===t.getProperty("useHeight")&&this.setDataAttribute(e,"smallmatrix","true"),e},r.prototype.setDataAttribute=function(t,r,n){t[e.DATAMJX+r]=n},r.prototype.quoteHTML=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/[\uD800-\uDBFF]./g,e.toEntity).replace(/[\u0080-\uD7FF\uE000-\uFFFF]/g,e.toEntity)},r.variants={"-tex-calligraphic":"script","-tex-bold-calligraphic":"bold-script","-tex-oldstyle":"normal","-tex-bold-oldstyle":"bold","-tex-mathit":"italic"},r.defaultAttributes={math:{xmlns:"http://www.w3.org/1998/Math/MathML"}},r}(a.MmlVisitor);e.SerializedMmlVisitor=u},2975:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractOutputJax=void 0;var n=r(7233),o=r(7525),i=function(){function t(t){void 0===t&&(t={}),this.adaptor=null;var e=this.constructor;this.options=(0,n.userOptions)((0,n.defaultOptions)({},e.OPTIONS),t),this.postFilters=new o.FunctionList}return Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.NAME},enumerable:!1,configurable:!0}),t.prototype.setAdaptor=function(t){this.adaptor=t},t.prototype.initialize=function(){},t.prototype.reset=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.getMetrics=function(t){},t.prototype.styleSheet=function(t){return null},t.prototype.pageElements=function(t){return null},t.prototype.executeFilters=function(t,e,r,n){var o={math:e,document:r,data:n};return t.execute(o),o.data},t.NAME="generic",t.OPTIONS={},t}();e.AbstractOutputJax=i},4574:function(t,e){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractFactory=void 0;var i=function(){function t(t){var e,n;void 0===t&&(t=null),this.defaultKind="unknown",this.nodeMap=new Map,this.node={},null===t&&(t=this.constructor.defaultNodes);try{for(var o=r(Object.keys(t)),i=o.next();!i.done;i=o.next()){var s=i.value;this.setNodeClass(s,t[s])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}return t.prototype.create=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return(this.node[t]||this.node[this.defaultKind]).apply(void 0,o([],n(e),!1))},t.prototype.setNodeClass=function(t,e){this.nodeMap.set(t,e);var r=this,i=this.nodeMap.get(t);this.node[t]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(i.bind.apply(i,o([void 0,r],n(t),!1)))}},t.prototype.getNodeClass=function(t){return this.nodeMap.get(t)},t.prototype.deleteNodeClass=function(t){this.nodeMap.delete(t),delete this.node[t]},t.prototype.nodeIsKind=function(t,e){return t instanceof this.getNodeClass(e)},t.prototype.getKinds=function(){return Array.from(this.nodeMap.keys())},t.defaultNodes={},t}();e.AbstractFactory=i},4596:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o.apply(this,arguments)},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractEmptyNode=e.AbstractNode=void 0;var s=function(){function t(t,e,r){var n,o;void 0===e&&(e={}),void 0===r&&(r=[]),this.factory=t,this.parent=null,this.properties={},this.childNodes=[];try{for(var s=i(Object.keys(e)),a=s.next();!a.done;a=s.next()){var l=a.value;this.setProperty(l,e[l])}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}r.length&&this.setChildren(r)}return Object.defineProperty(t.prototype,"kind",{get:function(){return"unknown"},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(t,e){this.properties[t]=e},t.prototype.getProperty=function(t){return this.properties[t]},t.prototype.getPropertyNames=function(){return Object.keys(this.properties)},t.prototype.getAllProperties=function(){return this.properties},t.prototype.removeProperty=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=i(r),s=o.next();!s.done;s=o.next()){var a=s.value;delete this.properties[a]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.isKind=function(t){return this.factory.nodeIsKind(this,t)},t.prototype.setChildren=function(t){var e,r;this.childNodes=[];try{for(var n=i(t),o=n.next();!o.done;o=n.next()){var s=o.value;this.appendChild(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.appendChild=function(t){return this.childNodes.push(t),t.parent=this,t},t.prototype.replaceChild=function(t,e){var r=this.childIndex(e);return null!==r&&(this.childNodes[r]=t,t.parent=this,e.parent=null),t},t.prototype.removeChild=function(t){var e=this.childIndex(t);return null!==e&&(this.childNodes.splice(e,1),t.parent=null),t},t.prototype.childIndex=function(t){var e=this.childNodes.indexOf(t);return-1===e?null:e},t.prototype.copy=function(){var t,e,r=this.factory.create(this.kind);r.properties=o({},this.properties);try{for(var n=i(this.childNodes||[]),s=n.next();!s.done;s=n.next()){var a=s.value;a&&r.appendChild(a.copy())}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},t.prototype.findNodes=function(t){var e=[];return this.walkTree((function(r){r.isKind(t)&&e.push(r)})),e},t.prototype.walkTree=function(t,e){var r,n;t(this,e);try{for(var o=i(this.childNodes),s=o.next();!s.done;s=o.next()){var a=s.value;a&&a.walkTree(t,e)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e},t.prototype.toString=function(){return this.kind+"("+this.childNodes.join(",")+")"},t}();e.AbstractNode=s;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.setChildren=function(t){},e.prototype.appendChild=function(t){return t},e.prototype.replaceChild=function(t,e){return e},e.prototype.childIndex=function(t){return null},e.prototype.walkTree=function(t,e){return t(this,e),e},e.prototype.toString=function(){return this.kind},e}(s);e.AbstractEmptyNode=a},7860:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractNodeFactory=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r=[]),this.node[t](e,r)},e}(r(4574).AbstractFactory);e.AbstractNodeFactory=i},8823:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractVisitor=void 0;var s=r(4596),a=function(){function t(e){var r,o;this.nodeHandlers=new Map;try{for(var i=n(e.getKinds()),s=i.next();!s.done;s=i.next()){var a=s.value,l=this[t.methodName(a)];l&&this.nodeHandlers.set(a,l)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}}return t.methodName=function(t){return"visit"+(t.charAt(0).toUpperCase()+t.substr(1)).replace(/[^a-z0-9_]/gi,"_")+"Node"},t.prototype.visitTree=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.visitNode.apply(this,i([t],o(e),!1))},t.prototype.visitNode=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.nodeHandlers.get(t.kind)||this.visitDefault;return n.call.apply(n,i([this,t],o(e),!1))},t.prototype.visitDefault=function(t){for(var e,r,a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];if(t instanceof s.AbstractNode)try{for(var c=n(t.childNodes),u=c.next();!u.done;u=c.next()){var p=u.value;this.visitNode.apply(this,i([p],o(a),!1))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}},t.prototype.setNodeHandler=function(t,e){this.nodeHandlers.set(t,e)},t.prototype.removeNodeHandler=function(t){this.nodeHandlers.delete(t)},t}();e.AbstractVisitor=a},8912:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractWrapper=void 0;var r=function(){function t(t,e){this.factory=t,this.node=e}return Object.defineProperty(t.prototype,"kind",{get:function(){return this.node.kind},enumerable:!1,configurable:!0}),t.prototype.wrap=function(t){return this.factory.wrap(t)},t}();e.AbstractWrapper=r},3811:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractWrapperFactory=void 0;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wrap=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.create.apply(this,s([t.kind,t],i(e),!1))},e}(r(4574).AbstractFactory);e.AbstractWrapperFactory=a},6272:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.RegisterHTMLHandler=void 0;var n=r(5713),o=r(3726);e.RegisterHTMLHandler=function(t){var e=new o.HTMLHandler(t);return n.mathjax.handlers.register(e),e}},3683:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLDocument=void 0;var l=r(5722),c=r(7233),u=r(3363),p=r(3335),h=r(5138),f=r(4474),d=function(t){function e(e,r,n){var o=this,i=s((0,c.separateOptions)(n,h.HTMLDomStrings.OPTIONS),2),a=i[0],l=i[1];return(o=t.call(this,e,r,a)||this).domStrings=o.options.DomStrings||new h.HTMLDomStrings(l),o.domStrings.adaptor=r,o.styles=[],o}return o(e,t),e.prototype.findPosition=function(t,e,r,n){var o,i,l=this.adaptor;try{for(var c=a(n[t]),u=c.next();!u.done;u=c.next()){var p=u.value,h=s(p,2),f=h[0],d=h[1];if(e<=d&&"#text"===l.kind(f))return{node:f,n:Math.max(e,0),delim:r};e-=d}}catch(t){o={error:t}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}return{node:null,n:0,delim:r}},e.prototype.mathItem=function(t,e,r){var n=t.math,o=this.findPosition(t.n,t.start.n,t.open,r),i=this.findPosition(t.n,t.end.n,t.close,r);return new this.options.MathItem(n,e,t.display,o,i)},e.prototype.findMath=function(t){var e,r,n,o,i,l,u,p,h;if(!this.processed.isSet("findMath")){this.adaptor.document=this.document,t=(0,c.userOptions)({elements:this.options.elements||[this.adaptor.body(this.document)]},t);try{for(var f=a(this.adaptor.getElements(t.elements,this.document)),d=f.next();!d.done;d=f.next()){var m=d.value,y=s([null,null],2),g=y[0],b=y[1];try{for(var v=(n=void 0,a(this.inputJax)),_=v.next();!_.done;_=v.next()){var S=_.value,M=new this.options.MathList;if(S.processStrings){null===g&&(g=(i=s(this.domStrings.find(m),2))[0],b=i[1]);try{for(var O=(l=void 0,a(S.findMath(g))),x=O.next();!x.done;x=O.next()){var E=x.value;M.push(this.mathItem(E,S,b))}}catch(t){l={error:t}}finally{try{x&&!x.done&&(u=O.return)&&u.call(O)}finally{if(l)throw l.error}}}else try{for(var A=(p=void 0,a(S.findMath(m))),C=A.next();!C.done;C=A.next()){E=C.value;var T=new this.options.MathItem(E.math,S,E.display,E.start,E.end);M.push(T)}}catch(t){p={error:t}}finally{try{C&&!C.done&&(h=A.return)&&h.call(A)}finally{if(p)throw p.error}}this.math.merge(M)}}catch(t){n={error:t}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}this.processed.set("findMath")}return this},e.prototype.updateDocument=function(){return this.processed.isSet("updateDocument")||(this.addPageElements(),this.addStyleSheet(),t.prototype.updateDocument.call(this),this.processed.set("updateDocument")),this},e.prototype.addPageElements=function(){var t=this.adaptor.body(this.document),e=this.documentPageElements();e&&this.adaptor.append(t,e)},e.prototype.addStyleSheet=function(){var t=this.documentStyleSheet(),e=this.adaptor;if(t&&!e.parent(t)){var r=e.head(this.document),n=this.findSheet(r,e.getAttribute(t,"id"));n?e.replace(t,n):e.append(r,t)}},e.prototype.findSheet=function(t,e){var r,n;if(e)try{for(var o=a(this.adaptor.tags(t,"style")),i=o.next();!i.done;i=o.next()){var s=i.value;if(this.adaptor.getAttribute(s,"id")===e)return s}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return null},e.prototype.removeFromDocument=function(t){var e,r;if(void 0===t&&(t=!1),this.processed.isSet("updateDocument"))try{for(var n=a(this.math),o=n.next();!o.done;o=n.next()){var i=o.value;i.state()>=f.STATE.INSERTED&&i.state(f.STATE.TYPESET,t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this.processed.clear("updateDocument"),this},e.prototype.documentStyleSheet=function(){return this.outputJax.styleSheet(this)},e.prototype.documentPageElements=function(){return this.outputJax.pageElements(this)},e.prototype.addStyles=function(t){this.styles.push(t)},e.prototype.getStyles=function(){return this.styles},e.KIND="HTML",e.OPTIONS=i(i({},l.AbstractMathDocument.OPTIONS),{renderActions:(0,c.expandable)(i(i({},l.AbstractMathDocument.OPTIONS.renderActions),{styles:[f.STATE.INSERTED+1,"","updateStyleSheet",!1]})),MathList:p.HTMLMathList,MathItem:u.HTMLMathItem,DomStrings:null}),e}(l.AbstractMathDocument);e.HTMLDocument=d},5138:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLDomStrings=void 0;var o=r(7233),i=function(){function t(t){void 0===t&&(t=null);var e=this.constructor;this.options=(0,o.userOptions)((0,o.defaultOptions)({},e.OPTIONS),t),this.init(),this.getPatterns()}return t.prototype.init=function(){this.strings=[],this.string="",this.snodes=[],this.nodes=[],this.stack=[]},t.prototype.getPatterns=function(){var t=(0,o.makeArray)(this.options.skipHtmlTags),e=(0,o.makeArray)(this.options.ignoreHtmlClass),r=(0,o.makeArray)(this.options.processHtmlClass);this.skipHtmlTags=new RegExp("^(?:"+t.join("|")+")$","i"),this.ignoreHtmlClass=new RegExp("(?:^| )(?:"+e.join("|")+")(?: |$)"),this.processHtmlClass=new RegExp("(?:^| )(?:"+r+")(?: |$)")},t.prototype.pushString=function(){this.string.match(/\S/)&&(this.strings.push(this.string),this.nodes.push(this.snodes)),this.string="",this.snodes=[]},t.prototype.extendString=function(t,e){this.snodes.push([t,e.length]),this.string+=e},t.prototype.handleText=function(t,e){return e||this.extendString(t,this.adaptor.value(t)),this.adaptor.next(t)},t.prototype.handleTag=function(t,e){if(!e){var r=this.options.includeHtmlTags[this.adaptor.kind(t)];this.extendString(t,r)}return this.adaptor.next(t)},t.prototype.handleContainer=function(t,e){this.pushString();var r=this.adaptor.getAttribute(t,"class")||"",n=this.adaptor.kind(t)||"",o=this.processHtmlClass.exec(r),i=t;return!this.adaptor.firstChild(t)||this.adaptor.getAttribute(t,"data-MJX")||!o&&this.skipHtmlTags.exec(n)?i=this.adaptor.next(t):(this.adaptor.next(t)&&this.stack.push([this.adaptor.next(t),e]),i=this.adaptor.firstChild(t),e=(e||this.ignoreHtmlClass.exec(r))&&!o),[i,e]},t.prototype.handleOther=function(t,e){return this.pushString(),this.adaptor.next(t)},t.prototype.find=function(t){var e,r;this.init();for(var o=this.adaptor.next(t),i=!1,s=this.options.includeHtmlTags;t&&t!==o;){var a=this.adaptor.kind(t);"#text"===a?t=this.handleText(t,i):s.hasOwnProperty(a)?t=this.handleTag(t,i):a?(t=(e=n(this.handleContainer(t,i),2))[0],i=e[1]):t=this.handleOther(t,i),!t&&this.stack.length&&(this.pushString(),t=(r=n(this.stack.pop(),2))[0],i=r[1])}this.pushString();var l=[this.strings,this.nodes];return this.init(),l},t.OPTIONS={skipHtmlTags:["script","noscript","style","textarea","pre","code","annotation","annotation-xml"],includeHtmlTags:{br:"\n",wbr:"","#comment":""},ignoreHtmlClass:"mathjax_ignore",processHtmlClass:"mathjax_process"},t}();e.HTMLDomStrings=i},3726:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLHandler=void 0;var i=r(3670),s=r(3683),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.documentClass=s.HTMLDocument,e}return o(e,t),e.prototype.handlesDocument=function(t){var e=this.adaptor;if("string"==typeof t)try{t=e.parse(t,"text/html")}catch(t){}return t instanceof e.window.Document||t instanceof e.window.HTMLElement||t instanceof e.window.DocumentFragment},e.prototype.create=function(e,r){var n=this.adaptor;if("string"==typeof e)e=n.parse(e,"text/html");else if(e instanceof n.window.HTMLElement||e instanceof n.window.DocumentFragment){var o=e;e=n.parse("","text/html"),n.append(n.body(e),o)}return t.prototype.create.call(this,e,r)},e}(i.AbstractHandler);e.HTMLHandler=a},3363:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLMathItem=void 0;var i=r(4474),s=function(t){function e(e,r,n,o,i){return void 0===n&&(n=!0),void 0===o&&(o={node:null,n:0,delim:""}),void 0===i&&(i={node:null,n:0,delim:""}),t.call(this,e,r,n,o,i)||this}return o(e,t),Object.defineProperty(e.prototype,"adaptor",{get:function(){return this.inputJax.adaptor},enumerable:!1,configurable:!0}),e.prototype.updateDocument=function(t){if(this.state()<i.STATE.INSERTED){if(this.inputJax.processStrings){var e=this.start.node;if(e===this.end.node)this.end.n&&this.end.n<this.adaptor.value(this.end.node).length&&this.adaptor.split(this.end.node,this.end.n),this.start.n&&(e=this.adaptor.split(this.start.node,this.start.n)),this.adaptor.replace(this.typesetRoot,e);else{for(this.start.n&&(e=this.adaptor.split(e,this.start.n));e!==this.end.node;){var r=this.adaptor.next(e);this.adaptor.remove(e),e=r}this.adaptor.insert(this.typesetRoot,e),this.end.n<this.adaptor.value(e).length&&this.adaptor.split(e,this.end.n),this.adaptor.remove(e)}}else this.adaptor.replace(this.typesetRoot,this.start.node);this.start.node=this.end.node=this.typesetRoot,this.start.n=this.end.n=0,this.state(i.STATE.INSERTED)}},e.prototype.updateStyleSheet=function(t){t.addStyleSheet()},e.prototype.removeFromDocument=function(t){if(void 0===t&&(t=!1),this.state()>=i.STATE.TYPESET){var e=this.adaptor,r=this.start.node,n=e.text("");if(t){var o=this.start.delim+this.math+this.end.delim;if(this.inputJax.processStrings)n=e.text(o);else{var s=e.parse(o,"text/html");n=e.firstChild(e.body(s))}}e.parent(r)&&e.replace(n,r),this.start.node=this.end.node=n,this.start.n=this.end.n=0}},e}(i.AbstractMathItem);e.HTMLMathItem=s},3335:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLMathList=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(r(9e3).AbstractMathList);e.HTMLMathList=i},2892:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.MathML=void 0;var s=r(9206),a=r(7233),l=r(7525),c=r(625),u=r(2769),p=function(t){function e(e){void 0===e&&(e={});var r=this,n=i((0,a.separateOptions)(e,c.FindMathML.OPTIONS,u.MathMLCompile.OPTIONS),3),o=n[0],s=n[1],p=n[2];return(r=t.call(this,o)||this).findMathML=r.options.FindMathML||new c.FindMathML(s),r.mathml=r.options.MathMLCompile||new u.MathMLCompile(p),r.mmlFilters=new l.FunctionList,r}return o(e,t),e.prototype.setAdaptor=function(e){t.prototype.setAdaptor.call(this,e),this.findMathML.adaptor=e,this.mathml.adaptor=e},e.prototype.setMmlFactory=function(e){t.prototype.setMmlFactory.call(this,e),this.mathml.setMmlFactory(e)},Object.defineProperty(e.prototype,"processStrings",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.compile=function(t,e){var r=t.start.node;if(!r||!t.end.node||this.options.forceReparse||"#text"===this.adaptor.kind(r)){var n=this.executeFilters(this.preFilters,t,e,(t.math||"<math></math>").trim()),o=this.checkForErrors(this.adaptor.parse(n,"text/"+this.options.parseAs)),i=this.adaptor.body(o);1!==this.adaptor.childNodes(i).length&&this.error("MathML must consist of a single element"),r=this.adaptor.remove(this.adaptor.firstChild(i)),"math"!==this.adaptor.kind(r).replace(/^[a-z]+:/,"")&&this.error("MathML must be formed by a <math> element, not <"+this.adaptor.kind(r)+">")}return r=this.executeFilters(this.mmlFilters,t,e,r),this.executeFilters(this.postFilters,t,e,this.mathml.compile(r))},e.prototype.checkForErrors=function(t){var e=this.adaptor.tags(this.adaptor.body(t),"parsererror")[0];return e&&(""===this.adaptor.textContent(e)&&this.error("Error processing MathML"),this.options.parseError.call(this,e)),t},e.prototype.error=function(t){throw new Error(t)},e.prototype.findMath=function(t){return this.findMathML.findMath(t)},e.NAME="MathML",e.OPTIONS=(0,a.defaultOptions)({parseAs:"html",forceReparse:!1,FindMathML:null,MathMLCompile:null,parseError:function(t){this.error(this.adaptor.textContent(t).replace(/\n.*/g,""))}},s.AbstractInputJax.OPTIONS),e}(s.AbstractInputJax);e.MathML=p},625:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.FindMathML=void 0;var s=r(3494),a="http://www.w3.org/1998/Math/MathML",l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.findMath=function(t){var e=new Set;this.findMathNodes(t,e),this.findMathPrefixed(t,e);var r=this.adaptor.root(this.adaptor.document);return"html"===this.adaptor.kind(r)&&0===e.size&&this.findMathNS(t,e),this.processMath(e)},e.prototype.findMathNodes=function(t,e){var r,n;try{for(var o=i(this.adaptor.tags(t,"math")),s=o.next();!s.done;s=o.next()){var a=s.value;e.add(a)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.findMathPrefixed=function(t,e){var r,n,o,s,l=this.adaptor.root(this.adaptor.document);try{for(var c=i(this.adaptor.allAttributes(l)),u=c.next();!u.done;u=c.next()){var p=u.value;if("xmlns:"===p.name.substr(0,6)&&p.value===a){var h=p.name.substr(6);try{for(var f=(o=void 0,i(this.adaptor.tags(t,h+":math"))),d=f.next();!d.done;d=f.next()){var m=d.value;e.add(m)}}catch(t){o={error:t}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}},e.prototype.findMathNS=function(t,e){var r,n;try{for(var o=i(this.adaptor.tags(t,"math",a)),s=o.next();!s.done;s=o.next()){var l=s.value;e.add(l)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.processMath=function(t){var e,r,n=[];try{for(var o=i(Array.from(t)),s=o.next();!s.done;s=o.next()){var a=s.value,l="block"===this.adaptor.getAttribute(a,"display")||"display"===this.adaptor.getAttribute(a,"mode"),c={node:a,n:0,delim:""},u={node:a,n:0,delim:""};n.push({math:this.adaptor.outerHTML(a),start:c,end:u,display:l})}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},e.OPTIONS={},e}(s.AbstractFindMath);e.FindMathML=l},2769:function(t,e,r){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&o(e,t,r);return i(e,t),e},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MathMLCompile=void 0;var l=r(9007),c=r(7233),u=s(r(5368)),p=function(){function t(t){void 0===t&&(t={});var e=this.constructor;this.options=(0,c.userOptions)((0,c.defaultOptions)({},e.OPTIONS),t)}return t.prototype.setMmlFactory=function(t){this.factory=t},t.prototype.compile=function(t){var e=this.makeNode(t);return e.verifyTree(this.options.verify),e.setInheritedAttributes({},!1,0,!1),e.walkTree(this.markMrows),e},t.prototype.makeNode=function(t){var e,r,n=this.adaptor,o=!1,i=n.kind(t).replace(/^.*:/,""),s=n.getAttribute(t,"data-mjx-texclass")||"";s&&(s=this.filterAttribute("data-mjx-texclass",s)||"");var c=s&&"mrow"===i?"TeXAtom":i;try{for(var u=a(this.filterClassList(n.allClasses(t))),p=u.next();!p.done;p=u.next()){var h=p.value;h.match(/^MJX-TeXAtom-/)&&"mrow"===i?(s=h.substr(12),c="TeXAtom"):"MJX-fixedlimits"===h&&(o=!0)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}this.factory.getNodeClass(c)||this.error('Unknown node type "'+c+'"');var f=this.factory.create(c);return"TeXAtom"!==c||"OP"!==s||o||(f.setProperty("movesupsub",!0),f.attributes.setInherited("movablelimits",!0)),s&&(f.texClass=l.TEXCLASS[s],f.setProperty("texClass",f.texClass)),this.addAttributes(f,t),this.checkClass(f,t),this.addChildren(f,t),f},t.prototype.addAttributes=function(t,e){var r,n,o=!1;try{for(var i=a(this.adaptor.allAttributes(e)),s=i.next();!s.done;s=i.next()){var l=s.value,c=l.name,u=this.filterAttribute(c,l.value);if(null!==u&&"xmlns"!==c)if("data-mjx-"===c.substr(0,9))switch(c.substr(9)){case"alternate":t.setProperty("variantForm",!0);break;case"variant":t.attributes.set("mathvariant",u),o=!0;break;case"smallmatrix":t.setProperty("scriptlevel",1),t.setProperty("useHeight",!1);break;case"accent":t.setProperty("mathaccent","true"===u);break;case"auto-op":t.setProperty("autoOP","true"===u);break;case"script-align":t.setProperty("scriptalign",u)}else if("class"!==c){var p=u.toLowerCase();"true"===p||"false"===p?t.attributes.set(c,"true"===p):o&&"mathvariant"===c||t.attributes.set(c,u)}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.filterAttribute=function(t,e){return e},t.prototype.filterClassList=function(t){return t},t.prototype.addChildren=function(t,e){var r,n;if(0!==t.arity){var o=this.adaptor;try{for(var i=a(o.childNodes(e)),s=i.next();!s.done;s=i.next()){var l=s.value,c=o.kind(l);if("#comment"!==c)if("#text"===c)this.addText(t,l);else if(t.isKind("annotation-xml"))t.appendChild(this.factory.create("XML").setXML(l,o));else{var u=t.appendChild(this.makeNode(l));0===u.arity&&o.childNodes(l).length&&(this.options.fixMisplacedChildren?this.addChildren(t,l):u.mError("There should not be children for "+u.kind+" nodes",this.options.verify,!0))}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}},t.prototype.addText=function(t,e){var r=this.adaptor.value(e);(t.isToken||t.getProperty("isChars"))&&t.arity?(t.isToken&&(r=u.translate(r),r=this.trimSpace(r)),t.appendChild(this.factory.create("text").setText(r))):r.match(/\S/)&&this.error('Unexpected text node "'+r+'"')},t.prototype.checkClass=function(t,e){var r,n,o=[];try{for(var i=a(this.filterClassList(this.adaptor.allClasses(e))),s=i.next();!s.done;s=i.next()){var l=s.value;"MJX-"===l.substr(0,4)?"MJX-variant"===l?t.setProperty("variantForm",!0):"MJX-TeXAtom"!==l.substr(0,11)&&t.attributes.set("mathvariant",this.fixCalligraphic(l.substr(3))):o.push(l)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}o.length&&t.attributes.set("class",o.join(" "))},t.prototype.fixCalligraphic=function(t){return t.replace(/caligraphic/,"calligraphic")},t.prototype.markMrows=function(t){if(t.isKind("mrow")&&!t.isInferred&&t.childNodes.length>=2){var e=t.childNodes[0],r=t.childNodes[t.childNodes.length-1];e.isKind("mo")&&e.attributes.get("fence")&&e.attributes.get("stretchy")&&r.isKind("mo")&&r.attributes.get("fence")&&r.attributes.get("stretchy")&&(e.childNodes.length&&t.setProperty("open",e.getText()),r.childNodes.length&&t.setProperty("close",r.getText()))}},t.prototype.trimSpace=function(t){return t.replace(/[\t\n\r]/g," ").replace(/^ +/,"").replace(/ +$/,"").replace(/  +/g," ")},t.prototype.error=function(t){throw new Error(t)},t.OPTIONS={MmlFactory:null,fixMisplacedChildren:!0,verify:n({},l.AbstractMmlNode.verifyDefaults),translateEntities:!0},t}();e.MathMLCompile=p},8462:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TeX=void 0;var l=r(9206),c=r(7233),u=r(7073),p=a(r(4676)),h=a(r(1256)),f=a(r(8417)),d=a(r(3971)),m=a(r(8562)),y=r(6521),g=r(9899);r(2942);var b=function(t){function e(r){void 0===r&&(r={});var n=this,o=s((0,c.separateOptions)(r,e.OPTIONS,u.FindTeX.OPTIONS),3),i=o[0],a=o[1],l=o[2];(n=t.call(this,a)||this).findTeX=n.options.FindTeX||new u.FindTeX(l);var h=n.options.packages,f=n.configuration=e.configure(h),d=n._parseOptions=new m.default(f,[n.options,y.TagsFactory.OPTIONS]);return(0,c.userOptions)(d.options,i),f.config(n),e.tags(d,f),n.postFilters.add(p.default.cleanSubSup,-6),n.postFilters.add(p.default.setInherited,-5),n.postFilters.add(p.default.moveLimits,-4),n.postFilters.add(p.default.cleanStretchy,-3),n.postFilters.add(p.default.cleanAttributes,-2),n.postFilters.add(p.default.combineRelations,-1),n}return o(e,t),e.configure=function(t){var e=new g.ParserConfiguration(t,["tex"]);return e.init(),e},e.tags=function(t,e){y.TagsFactory.addTags(e.tags),y.TagsFactory.setDefault(t.options.tags),t.tags=y.TagsFactory.getDefault(),t.tags.configuration=t},e.prototype.setMmlFactory=function(e){t.prototype.setMmlFactory.call(this,e),this._parseOptions.nodeFactory.setMmlFactory(e)},Object.defineProperty(e.prototype,"parseOptions",{get:function(){return this._parseOptions},enumerable:!1,configurable:!0}),e.prototype.reset=function(t){void 0===t&&(t=0),this.parseOptions.tags.reset(t)},e.prototype.compile=function(t,e){this.parseOptions.clear(),this.executeFilters(this.preFilters,t,e,this.parseOptions);var r,n,o=t.display;this.latex=t.math,this.parseOptions.tags.startEquation(t);try{var i=new f.default(this.latex,{display:o,isInner:!1},this.parseOptions);r=i.mml(),n=i.stack.global}catch(t){if(!(t instanceof d.default))throw t;this.parseOptions.error=!0,r=this.options.formatError(this,t)}return r=this.parseOptions.nodeFactory.create("node","math",[r]),(null==n?void 0:n.indentalign)&&h.default.setAttribute(r,"indentalign",n.indentalign),o&&h.default.setAttribute(r,"display","block"),this.parseOptions.tags.finishEquation(t),this.parseOptions.root=r,this.executeFilters(this.postFilters,t,e,this.parseOptions),this.mathNode=this.parseOptions.root,this.mathNode},e.prototype.findMath=function(t){return this.findTeX.findMath(t)},e.prototype.formatError=function(t){var e=t.message.replace(/\n.*/,"");return this.parseOptions.nodeFactory.create("error",e,t.id,this.latex)},e.NAME="TeX",e.OPTIONS=i(i({},l.AbstractInputJax.OPTIONS),{FindTeX:null,packages:["base"],digits:/^(?:[0-9]+(?:\{,\}[0-9]{3})*(?:\.[0-9]*)?|\.[0-9]+)/,maxBuffer:5120,formatError:function(t,e){return t.formatError(e)}}),e}(l.AbstractInputJax);e.TeX=b},9899:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.ParserConfiguration=e.ConfigurationHandler=e.Configuration=void 0;var i,s=r(7233),a=r(2947),l=r(7525),c=r(8666),u=r(6521),p=function(){function t(t,e,r,n,o,i,s,a,l,c,u,p,h){void 0===e&&(e={}),void 0===r&&(r={}),void 0===n&&(n={}),void 0===o&&(o={}),void 0===i&&(i={}),void 0===s&&(s={}),void 0===a&&(a=[]),void 0===l&&(l=[]),void 0===c&&(c=null),void 0===u&&(u=null),this.name=t,this.handler=e,this.fallback=r,this.items=n,this.tags=o,this.options=i,this.nodes=s,this.preprocessors=a,this.postprocessors=l,this.initMethod=c,this.configMethod=u,this.priority=p,this.parser=h,this.handler=Object.assign({character:[],delimiter:[],macro:[],environment:[]},e)}return t.makeProcessor=function(t,e){return Array.isArray(t)?t:[t,e]},t._create=function(e,r){var n=this;void 0===r&&(r={});var o=r.priority||c.PrioritizedList.DEFAULTPRIORITY,i=r.init?this.makeProcessor(r.init,o):null,s=r.config?this.makeProcessor(r.config,o):null,a=(r.preprocessors||[]).map((function(t){return n.makeProcessor(t,o)})),l=(r.postprocessors||[]).map((function(t){return n.makeProcessor(t,o)})),u=r.parser||"tex";return new t(e,r.handler||{},r.fallback||{},r.items||{},r.tags||{},r.options||{},r.nodes||{},a,l,i,s,o,u)},t.create=function(e,r){void 0===r&&(r={});var n=t._create(e,r);return i.set(e,n),n},t.local=function(e){return void 0===e&&(e={}),t._create("",e)},Object.defineProperty(t.prototype,"init",{get:function(){return this.initMethod?this.initMethod[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.configMethod?this.configMethod[0]:null},enumerable:!1,configurable:!0}),t}();e.Configuration=p,function(t){var e=new Map;t.set=function(t,r){e.set(t,r)},t.get=function(t){return e.get(t)},t.keys=function(){return e.keys()}}(i=e.ConfigurationHandler||(e.ConfigurationHandler={}));var h=function(){function t(t,e){var r,o,i,s;void 0===e&&(e=["tex"]),this.initMethod=new l.FunctionList,this.configMethod=new l.FunctionList,this.configurations=new c.PrioritizedList,this.parsers=[],this.handlers=new a.SubHandlers,this.items={},this.tags={},this.options={},this.nodes={},this.parsers=e;try{for(var u=n(t.slice().reverse()),p=u.next();!p.done;p=u.next()){var h=p.value;this.addPackage(h)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}try{for(var f=n(this.configurations),d=f.next();!d.done;d=f.next()){var m=d.value,y=m.item,g=m.priority;this.append(y,g)}}catch(t){i={error:t}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}}return t.prototype.init=function(){this.initMethod.execute(this)},t.prototype.config=function(t){var e,r;this.configMethod.execute(this,t);try{for(var o=n(this.configurations),i=o.next();!i.done;i=o.next()){var s=i.value;this.addFilters(t,s.item)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.prototype.addPackage=function(t){var e="string"==typeof t?t:t[0],r=this.getPackage(e);r&&this.configurations.add(r,"string"==typeof t?r.priority:t[1])},t.prototype.add=function(t,e,r){var o,i;void 0===r&&(r={});var a=this.getPackage(t);this.append(a),this.configurations.add(a,a.priority),this.init();var l=e.parseOptions;l.nodeFactory.setCreators(a.nodes);try{for(var c=n(Object.keys(a.items)),p=c.next();!p.done;p=c.next()){var h=p.value;l.itemFactory.setNodeClass(h,a.items[h])}}catch(t){o={error:t}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}u.TagsFactory.addTags(a.tags),(0,s.defaultOptions)(l.options,a.options),(0,s.userOptions)(l.options,r),this.addFilters(e,a),a.config&&a.config(this,e)},t.prototype.getPackage=function(t){var e=i.get(t);if(e&&this.parsers.indexOf(e.parser)<0)throw Error("Package ".concat(t," doesn't target the proper parser"));return e},t.prototype.append=function(t,e){e=e||t.priority,t.initMethod&&this.initMethod.add(t.initMethod[0],t.initMethod[1]),t.configMethod&&this.configMethod.add(t.configMethod[0],t.configMethod[1]),this.handlers.add(t.handler,t.fallback,e),Object.assign(this.items,t.items),Object.assign(this.tags,t.tags),(0,s.defaultOptions)(this.options,t.options),Object.assign(this.nodes,t.nodes)},t.prototype.addFilters=function(t,e){var r,i,s,a;try{for(var l=n(e.preprocessors),c=l.next();!c.done;c=l.next()){var u=o(c.value,2),p=u[0],h=u[1];t.preFilters.add(p,h)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}try{for(var f=n(e.postprocessors),d=f.next();!d.done;d=f.next()){var m=o(d.value,2),y=m[0];h=m[1];t.postFilters.add(y,h)}}catch(t){s={error:t}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}},t}();e.ParserConfiguration=h},4676:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i,s=r(9007),a=o(r(1256));!function(t){t.cleanStretchy=function(t){var e,r,o=t.data;try{for(var i=n(o.getList("fixStretchy")),s=i.next();!s.done;s=i.next()){var l=s.value;if(a.default.getProperty(l,"fixStretchy")){var c=a.default.getForm(l);c&&c[3]&&c[3].stretchy&&a.default.setAttribute(l,"stretchy",!1);var u=l.parent;if(!(a.default.getTexClass(l)||c&&c[2])){var p=o.nodeFactory.create("node","TeXAtom",[l]);u.replaceChild(p,l),p.inheritAttributesFrom(l)}a.default.removeProperties(l,"fixStretchy")}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.cleanAttributes=function(t){t.data.root.walkTree((function(t,e){var r,o,i=t.attributes;if(i){var s=new Set((i.get("mjx-keep-attrs")||"").split(/ /));delete i.getAllAttributes()["mjx-keep-attrs"];try{for(var a=n(i.getExplicitNames()),l=a.next();!l.done;l=a.next()){var c=l.value;s.has(c)||i.attributes[c]!==t.attributes.getInherited(c)||delete i.attributes[c]}}catch(t){r={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}}}),{})},t.combineRelations=function(t){var o,i,l,c,u=[];try{for(var p=n(t.data.getList("mo")),h=p.next();!h.done;h=p.next()){var f=h.value;if(!f.getProperty("relationsCombined")&&f.parent&&(!f.parent||a.default.isType(f.parent,"mrow"))&&a.default.getTexClass(f)===s.TEXCLASS.REL){for(var d=f.parent,m=void 0,y=d.childNodes,g=y.indexOf(f)+1,b=a.default.getProperty(f,"variantForm");g<y.length&&(m=y[g])&&a.default.isType(m,"mo")&&a.default.getTexClass(m)===s.TEXCLASS.REL;){if(b!==a.default.getProperty(m,"variantForm")||!r(f,m)){null==f.attributes.getExplicit("rspace")&&a.default.setAttribute(f,"rspace","0pt"),null==m.attributes.getExplicit("lspace")&&a.default.setAttribute(m,"lspace","0pt");break}a.default.appendChildren(f,a.default.getChildren(m)),e(["stretchy","rspace"],f,m);try{for(var v=(l=void 0,n(m.getPropertyNames())),_=v.next();!_.done;_=v.next()){var S=_.value;f.setProperty(S,m.getProperty(S))}}catch(t){l={error:t}}finally{try{_&&!_.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}y.splice(g,1),u.push(m),m.parent=null,m.setProperty("relationsCombined",!0)}f.attributes.setInherited("form",f.getForms()[0])}}}catch(t){o={error:t}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}t.data.removeFromList("mo",u)};var e=function(t,e,r){var n=e.attributes,o=r.attributes;t.forEach((function(t){var e=o.getExplicit(t);null!=e&&n.set(t,e)}))},r=function(t,e){var r,o,i=function(t,e){return t.getExplicitNames().filter((function(r){return r!==e&&("stretchy"!==r||t.getExplicit("stretchy"))}))},s=t.attributes,a=e.attributes,l=i(s,"lspace"),c=i(a,"rspace");if(l.length!==c.length)return!1;try{for(var u=n(l),p=u.next();!p.done;p=u.next()){var h=p.value;if(s.getExplicit(h)!==a.getExplicit(h))return!1}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return!0},o=function(t,e,r){var o,i,s=[];try{for(var l=n(t.getList("m"+e+r)),c=l.next();!c.done;c=l.next()){var u=c.value,p=u.childNodes;if(!p[u[e]]||!p[u[r]]){var h=u.parent,f=p[u[e]]?t.nodeFactory.create("node","m"+e,[p[u.base],p[u[e]]]):t.nodeFactory.create("node","m"+r,[p[u.base],p[u[r]]]);a.default.copyAttributes(u,f),h?h.replaceChild(f,u):t.root=f,s.push(u)}}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}t.removeFromList("m"+e+r,s)};t.cleanSubSup=function(t){var e=t.data;e.error||(o(e,"sub","sup"),o(e,"under","over"))};var i=function(t,e,r){var o,i,s=[];try{for(var l=n(t.getList(e)),c=l.next();!c.done;c=l.next()){var u=c.value;if(!u.attributes.get("displaystyle")){var p=u.childNodes[u.base],h=p.coreMO();if(p.getProperty("movablelimits")&&!h.attributes.getExplicit("movablelimits")){var f=t.nodeFactory.create("node",r,u.childNodes);a.default.copyAttributes(u,f),u.parent?u.parent.replaceChild(f,u):t.root=f,s.push(u)}}}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}t.removeFromList(e,s)};t.moveLimits=function(t){var e=t.data;i(e,"munderover","msubsup"),i(e,"munder","msub"),i(e,"mover","msup")},t.setInherited=function(t){t.data.root.setInheritedAttributes({},t.math.display,0,!1)}}(i||(i={})),e.default=i},7073:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.FindTeX=void 0;var s=r(3494),a=r(505),l=r(4474),c=function(t){function e(e){var r=t.call(this,e)||this;return r.getPatterns(),r}return o(e,t),e.prototype.getPatterns=function(){var t=this,e=this.options,r=[],n=[],o=[];this.end={},this.env=this.sub=0;var i=1;e.inlineMath.forEach((function(e){return t.addPattern(r,e,!1)})),e.displayMath.forEach((function(e){return t.addPattern(r,e,!0)})),r.length&&n.push(r.sort(a.sortLength).join("|")),e.processEnvironments&&(n.push("\\\\begin\\s*\\{([^}]*)\\}"),this.env=i,i++),e.processEscapes&&o.push("\\\\([\\\\$])"),e.processRefs&&o.push("(\\\\(?:eq)?ref\\s*\\{[^}]*\\})"),o.length&&(n.push("("+o.join("|")+")"),this.sub=i),this.start=new RegExp(n.join("|"),"g"),this.hasPatterns=n.length>0},e.prototype.addPattern=function(t,e,r){var n=i(e,2),o=n[0],s=n[1];t.push((0,a.quotePattern)(o)),this.end[o]=[s,r,this.endPattern(s)]},e.prototype.endPattern=function(t,e){return new RegExp((e||(0,a.quotePattern)(t))+"|\\\\(?:[a-zA-Z]|.)|[{}]","g")},e.prototype.findEnd=function(t,e,r,n){for(var o,s=i(n,3),a=s[0],c=s[1],u=s[2],p=u.lastIndex=r.index+r[0].length,h=0;o=u.exec(t);){if((o[1]||o[0])===a&&0===h)return(0,l.protoItem)(r[0],t.substr(p,o.index-p),o[0],e,r.index,o.index+o[0].length,c);"{"===o[0]?h++:"}"===o[0]&&h&&h--}return null},e.prototype.findMathInString=function(t,e,r){var n,o;for(this.start.lastIndex=0;n=this.start.exec(r);){if(void 0!==n[this.env]&&this.env){var i="\\\\end\\s*(\\{"+(0,a.quotePattern)(n[this.env])+"\\})";(o=this.findEnd(r,e,n,["{"+n[this.env]+"}",!0,this.endPattern(null,i)]))&&(o.math=o.open+o.math+o.close,o.open=o.close="")}else if(void 0!==n[this.sub]&&this.sub){var s=n[this.sub];i=n.index+n[this.sub].length;o=2===s.length?(0,l.protoItem)("",s.substr(1),"",e,n.index,i):(0,l.protoItem)("",s,"",e,n.index,i,!1)}else o=this.findEnd(r,e,n,this.end[n[0]]);o&&(t.push(o),this.start.lastIndex=o.end.n)}},e.prototype.findMath=function(t){var e=[];if(this.hasPatterns)for(var r=0,n=t.length;r<n;r++)this.findMathInString(e,r,t[r]);return e},e.OPTIONS={inlineMath:[["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0,processRefs:!0},e}(s.AbstractFindMath);e.FindTeX=c},2947:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.SubHandlers=e.SubHandler=e.MapHandler=void 0;var i,s=r(8666),a=r(7525);!function(t){var e=new Map;t.register=function(t){e.set(t.name,t)},t.getMap=function(t){return e.get(t)}}(i=e.MapHandler||(e.MapHandler={}));var l=function(){function t(){this._configuration=new s.PrioritizedList,this._fallback=new a.FunctionList}return t.prototype.add=function(t,e,r){var o,a;void 0===r&&(r=s.PrioritizedList.DEFAULTPRIORITY);try{for(var l=n(t.slice().reverse()),c=l.next();!c.done;c=l.next()){var u=c.value,p=i.getMap(u);if(!p)return void this.warn("Configuration "+u+" not found! Omitted.");this._configuration.add(p,r)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}e&&this._fallback.add(e,r)},t.prototype.parse=function(t){var e,r;try{for(var i=n(this._configuration),s=i.next();!s.done;s=i.next()){var a=s.value.item.parse(t);if(a)return a}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}var l=o(t,2),c=l[0],u=l[1];Array.from(this._fallback)[0].item(c,u)},t.prototype.lookup=function(t){var e=this.applicable(t);return e?e.lookup(t):null},t.prototype.contains=function(t){return!!this.applicable(t)},t.prototype.toString=function(){var t,e,r=[];try{for(var o=n(this._configuration),i=o.next();!i.done;i=o.next()){var s=i.value.item;r.push(s.name)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r.join(", ")},t.prototype.applicable=function(t){var e,r;try{for(var o=n(this._configuration),i=o.next();!i.done;i=o.next()){var s=i.value.item;if(s.contains(t))return s}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return null},t.prototype.retrieve=function(t){var e,r;try{for(var o=n(this._configuration),i=o.next();!i.done;i=o.next()){var s=i.value.item;if(s.name===t)return s}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return null},t.prototype.warn=function(t){console.log("TexParser Warning: "+t)},t}();e.SubHandler=l;var c=function(){function t(){this.map=new Map}return t.prototype.add=function(t,e,r){var o,i;void 0===r&&(r=s.PrioritizedList.DEFAULTPRIORITY);try{for(var a=n(Object.keys(t)),c=a.next();!c.done;c=a.next()){var u=c.value,p=this.get(u);p||(p=new l,this.set(u,p)),p.add(t[u],e[u],r)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}},t.prototype.set=function(t,e){this.map.set(t,e)},t.prototype.get=function(t){return this.map.get(t)},t.prototype.retrieve=function(t){var e,r;try{for(var o=n(this.map.values()),i=o.next();!i.done;i=o.next()){var s=i.value.retrieve(t);if(s)return s}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return null},t.prototype.keys=function(){return this.map.keys()},t}();e.SubHandlers=c},8929:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.NodeFactory=void 0;var s=i(r(1256)),a=function(){function t(){this.mmlFactory=null,this.factory={node:t.createNode,token:t.createToken,text:t.createText,error:t.createError}}return t.createNode=function(t,e,r,n,o){void 0===r&&(r=[]),void 0===n&&(n={});var i=t.mmlFactory.create(e);return i.setChildren(r),o&&i.appendChild(o),s.default.setProperties(i,n),i},t.createToken=function(t,e,r,n){void 0===r&&(r={}),void 0===n&&(n="");var o=t.create("text",n);return t.create("node",e,[],r,o)},t.createText=function(t,e){return null==e?null:t.mmlFactory.create("text").setText(e)},t.createError=function(t,e){var r=t.create("text",e),n=t.create("node","mtext",[],{},r);return t.create("node","merror",[n],{"data-mjx-error":e})},t.prototype.setMmlFactory=function(t){this.mmlFactory=t},t.prototype.set=function(t,e){this.factory[t]=e},t.prototype.setCreators=function(t){for(var e in t)this.set(e,t[e])},t.prototype.create=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=this.factory[t]||this.factory.node,s=i.apply(void 0,o([this,e[0]],n(e.slice(1)),!1));return"node"===t&&this.configuration.addNode(e[0],s),s},t.prototype.get=function(t){return this.factory[t]},t}();e.NodeFactory=a},1256:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var s,a=r(9007),l=r(2756);!function(t){var e=new Map([["autoOP",!0],["fnOP",!0],["movesupsub",!0],["subsupOK",!0],["texprimestyle",!0],["useHeight",!0],["variantForm",!0],["withDelims",!0],["mathaccent",!0],["open",!0],["close",!0]]);function r(t,r){var o,i;try{for(var s=n(Object.keys(r)),a=s.next();!a.done;a=s.next()){var l=a.value,c=r[l];"texClass"===l?(t.texClass=c,t.setProperty(l,c)):"movablelimits"===l?(t.setProperty("movablelimits",c),(t.isKind("mo")||t.isKind("mstyle"))&&t.attributes.set("movablelimits",c)):"inferred"===l||(e.has(l)?t.setProperty(l,c):t.attributes.set(l,c))}}catch(t){o={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}function s(t,e,r){t.childNodes[e]=r,r&&(r.parent=t)}function c(t,e){return t.isKind(e)}t.createEntity=function(t){return String.fromCodePoint(parseInt(t,16))},t.getChildren=function(t){return t.childNodes},t.getText=function(t){return t.getText()},t.appendChildren=function(t,e){var r,o;try{for(var i=n(e),s=i.next();!s.done;s=i.next()){var a=s.value;t.appendChild(a)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},t.setAttribute=function(t,e,r){t.attributes.set(e,r)},t.setProperty=function(t,e,r){t.setProperty(e,r)},t.setProperties=r,t.getProperty=function(t,e){return t.getProperty(e)},t.getAttribute=function(t,e){return t.attributes.get(e)},t.removeProperties=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t.removeProperty.apply(t,i([],o(e),!1))},t.getChildAt=function(t,e){return t.childNodes[e]},t.setChild=s,t.copyChildren=function(t,e){for(var r=t.childNodes,n=0;n<r.length;n++)s(e,n,r[n])},t.copyAttributes=function(t,e){e.attributes=t.attributes,r(e,t.getAllProperties())},t.isType=c,t.isEmbellished=function(t){return t.isEmbellished},t.getTexClass=function(t){return t.texClass},t.getCoreMO=function(t){return t.coreMO()},t.isNode=function(t){return t instanceof a.AbstractMmlNode||t instanceof a.AbstractMmlEmptyNode},t.isInferred=function(t){return t.isInferred},t.getForm=function(t){var e,r;if(!c(t,"mo"))return null;var o=t,i=o.getForms();try{for(var s=n(i),a=s.next();!a.done;a=s.next()){var u=a.value,p=l.MmlMo.OPTABLE[u][o.getText()];if(p)return p}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return null}}(s||(s={})),e.default=s},5450:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,a=i(r(1256)),l=r(8317),c=i(r(1130));!function(t){t.variable=function(t,e){var r=c.default.getFontDef(t),n=t.stack.env;n.multiLetterIdentifiers&&""!==n.font&&(e=t.string.substr(t.i-1).match(n.multiLetterIdentifiers)[0],t.i+=e.length-1,r.mathvariant===l.TexConstant.Variant.NORMAL&&n.noAutoOP&&e.length>1&&(r.autoOP=!1));var o=t.create("token","mi",r,e);t.Push(o)},t.digit=function(t,e){var r,n=t.configuration.options.digits,o=t.string.slice(t.i-1).match(n),i=c.default.getFontDef(t);o?(r=t.create("token","mn",i,o[0].replace(/[{}]/g,"")),t.i+=o[0].length-1):r=t.create("token","mo",i,e),t.Push(r)},t.controlSequence=function(t,e){var r=t.GetCS();t.parse("macro",[t,r])},t.mathchar0mi=function(t,e){var r=e.attributes||{mathvariant:l.TexConstant.Variant.ITALIC},n=t.create("token","mi",r,e.char);t.Push(n)},t.mathchar0mo=function(t,e){var r=e.attributes||{};r.stretchy=!1;var n=t.create("token","mo",r,e.char);a.default.setProperty(n,"fixStretchy",!0),t.configuration.addNode("fixStretchy",n),t.Push(n)},t.mathchar7=function(t,e){var r=e.attributes||{mathvariant:l.TexConstant.Variant.NORMAL};t.stack.env.font&&(r.mathvariant=t.stack.env.font);var n=t.create("token","mi",r,e.char);t.Push(n)},t.delimiter=function(t,e){var r=e.attributes||{};r=Object.assign({fence:!1,stretchy:!1},r);var n=t.create("token","mo",r,e.char);t.Push(n)},t.environment=function(t,e,r,i){var s=i[0],a=t.itemFactory.create("begin").setProperties({name:e,end:s});a=r.apply(void 0,o([t,a],n(i.slice(1)),!1)),t.Push(a)}}(s||(s={})),e.default=s},8562:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=s(r(5453)),l=r(8929),c=s(r(1256)),u=r(7233),p=function(){function t(t,e){void 0===e&&(e=[]),this.options={},this.packageData=new Map,this.parsers=[],this.root=null,this.nodeLists={},this.error=!1,this.handlers=t.handlers,this.nodeFactory=new l.NodeFactory,this.nodeFactory.configuration=this,this.nodeFactory.setCreators(t.nodes),this.itemFactory=new a.default(t.items),this.itemFactory.configuration=this,u.defaultOptions.apply(void 0,o([this.options],n(e),!1)),(0,u.defaultOptions)(this.options,t.options)}return t.prototype.pushParser=function(t){this.parsers.unshift(t)},t.prototype.popParser=function(){this.parsers.shift()},Object.defineProperty(t.prototype,"parser",{get:function(){return this.parsers[0]},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.parsers=[],this.root=null,this.nodeLists={},this.error=!1,this.tags.resetTag()},t.prototype.addNode=function(t,e){var r=this.nodeLists[t];if(r||(r=this.nodeLists[t]=[]),r.push(e),e.kind!==t){var n=c.default.getProperty(e,"in-lists")||"",o=(n?n.split(/,/):[]).concat(t).join(",");c.default.setProperty(e,"in-lists",o)}},t.prototype.getList=function(t){var e,r,n=this.nodeLists[t]||[],o=[];try{for(var s=i(n),a=s.next();!a.done;a=s.next()){var l=a.value;this.inTree(l)&&o.push(l)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return this.nodeLists[t]=o,o},t.prototype.removeFromList=function(t,e){var r,n,o=this.nodeLists[t]||[];try{for(var s=i(e),a=s.next();!a.done;a=s.next()){var l=a.value,c=o.indexOf(l);c>=0&&o.splice(c,1)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},t.prototype.inTree=function(t){for(;t&&t!==this.root;)t=t.parent;return!!t},t}();e.default=p},1130:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,a=r(9007),l=i(r(1256)),c=i(r(8417)),u=i(r(3971)),p=r(5368);!function(t){var e=7.2,r={em:function(t){return t},ex:function(t){return.43*t},pt:function(t){return t/10},pc:function(t){return 1.2*t},px:function(t){return t*e/72},in:function(t){return t*e},cm:function(t){return t*e/2.54},mm:function(t){return t*e/25.4},mu:function(t){return t/18}},i="([-+]?([.,]\\d+|\\d+([.,]\\d*)?))",s="(pt|em|ex|mu|px|mm|cm|in|pc)",h=RegExp("^\\s*"+i+"\\s*"+s+"\\s*$"),f=RegExp("^\\s*"+i+"\\s*"+s+" ?");function d(t,e){void 0===e&&(e=!1);var o=t.match(e?f:h);return o?function(t){var e=n(t,3),o=e[0],i=e[1],s=e[2];if("mu"!==i)return[o,i,s];return[m(r[i](parseFloat(o||"1"))).slice(0,-2),"em",s]}([o[1].replace(/,/,"."),o[4],o[0].length]):[null,null,0]}function m(t){return Math.abs(t)<6e-4?"0em":t.toFixed(3).replace(/\.?0+$/,"")+"em"}function y(t,e,r){"{"!==e&&"}"!==e||(e="\\"+e);var n="{\\bigg"+r+" "+e+"}",o="{\\big"+r+" "+e+"}";return new c.default("\\mathchoice"+n+o+o+o,{},t).mml()}function g(t,e,r){e=e.replace(/^\s+/,p.entities.nbsp).replace(/\s+$/,p.entities.nbsp);var n=t.create("text",e);return t.create("node","mtext",[],r,n)}function b(t,e,r){if(r.match(/^[a-z]/i)&&e.match(/(^|[^\\])(\\\\)*\\[a-z]+$/i)&&(e+=" "),e.length+r.length>t.configuration.options.maxBuffer)throw new u.default("MaxBufferSize","MathJax internal buffer size exceeded; is there a recursive macro call?");return e+r}function v(t,e){for(;e>0;)t=t.trim().slice(1,-1),e--;return t.trim()}function _(t,e){for(var r=t.length,n=0,o="",i=0,s=0,a=!0,l=!1;i<r;){var c=t[i++];switch(c){case" ":break;case"{":a?s++:(l=!1,s>n&&(s=n)),n++;break;case"}":n&&n--,(a||l)&&(s--,l=!0),a=!1;break;default:if(!n&&-1!==e.indexOf(c))return[l?"true":v(o,s),c,t.slice(i)];a=!1,l=!1}o+=c}if(n)throw new u.default("ExtraOpenMissingClose","Extra open brace or missing close brace");return[l?"true":v(o,s),"",t.slice(i)]}t.matchDimen=d,t.dimen2em=function(t){var e=n(d(t),2),o=e[0],i=e[1],s=parseFloat(o||"1"),a=r[i];return a?a(s):0},t.Em=m,t.cols=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return m(t)})).join(" ")},t.fenced=function(t,e,r,n,o,i){void 0===o&&(o=""),void 0===i&&(i="");var s,u=t.nodeFactory,p=u.create("node","mrow",[],{open:e,close:n,texClass:a.TEXCLASS.INNER});if(o)s=new c.default("\\"+o+"l"+e,t.parser.stack.env,t).mml();else{var h=u.create("text",e);s=u.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:a.TEXCLASS.OPEN},h)}if(l.default.appendChildren(p,[s,r]),o)s=new c.default("\\"+o+"r"+n,t.parser.stack.env,t).mml();else{var f=u.create("text",n);s=u.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:a.TEXCLASS.CLOSE},f)}return i&&s.attributes.set("mathcolor",i),l.default.appendChildren(p,[s]),p},t.fixedFence=function(t,e,r,n){var o=t.nodeFactory.create("node","mrow",[],{open:e,close:n,texClass:a.TEXCLASS.ORD});return e&&l.default.appendChildren(o,[y(t,e,"l")]),l.default.isType(r,"mrow")?l.default.appendChildren(o,l.default.getChildren(r)):l.default.appendChildren(o,[r]),n&&l.default.appendChildren(o,[y(t,n,"r")]),o},t.mathPalette=y,t.fixInitialMO=function(t,e){for(var r=0,n=e.length;r<n;r++){var o=e[r];if(o&&!l.default.isType(o,"mspace")&&(!l.default.isType(o,"TeXAtom")||l.default.getChildren(o)[0]&&l.default.getChildren(l.default.getChildren(o)[0]).length)){if(l.default.isEmbellished(o)||l.default.isType(o,"TeXAtom")&&l.default.getTexClass(o)===a.TEXCLASS.REL){var i=t.nodeFactory.create("node","mi");e.unshift(i)}break}}},t.internalMath=function(t,e,r,n){if(t.configuration.options.internalMath)return t.configuration.options.internalMath(t,e,r,n);var o,i,s=n||t.stack.env.font,a=s?{mathvariant:s}:{},l=[],p=0,h=0,f="",d=0;if(e.match(/\\?[${}\\]|\\\(|\\(eq)?ref\s*\{/)){for(;p<e.length;)if("$"===(o=e.charAt(p++)))"$"===f&&0===d?(i=t.create("node","TeXAtom",[new c.default(e.slice(h,p-1),{},t.configuration).mml()]),l.push(i),f="",h=p):""===f&&(h<p-1&&l.push(g(t,e.slice(h,p-1),a)),f="$",h=p);else if("{"===o&&""!==f)d++;else if("}"===o)if("}"===f&&0===d){var m=new c.default(e.slice(h,p),{},t.configuration).mml();i=t.create("node","TeXAtom",[m],a),l.push(i),f="",h=p}else""!==f&&d&&d--;else if("\\"===o)if(""===f&&e.substr(p).match(/^(eq)?ref\s*\{/)){var y=RegExp["$&"].length;h<p-1&&l.push(g(t,e.slice(h,p-1),a)),f="}",h=p-1,p+=y}else"("===(o=e.charAt(p++))&&""===f?(h<p-2&&l.push(g(t,e.slice(h,p-2),a)),f=")",h=p):")"===o&&")"===f&&0===d?(i=t.create("node","TeXAtom",[new c.default(e.slice(h,p-2),{},t.configuration).mml()]),l.push(i),f="",h=p):o.match(/[${}\\]/)&&""===f&&(p--,e=e.substr(0,p-1)+e.substr(p));if(""!==f)throw new u.default("MathNotTerminated","Math not terminated in text box")}return h<e.length&&l.push(g(t,e.slice(h),a)),null!=r?l=[t.create("node","mstyle",l,{displaystyle:!1,scriptlevel:r})]:l.length>1&&(l=[t.create("node","mrow",l)]),l},t.internalText=g,t.underOver=function(e,r,n,o,i){if(t.checkMovableLimits(r),l.default.isType(r,"munderover")&&l.default.isEmbellished(r)){l.default.setProperties(l.default.getCoreMO(r),{lspace:0,rspace:0});var s=e.create("node","mo",[],{rspace:0});r=e.create("node","mrow",[s,r])}var c=e.create("node","munderover",[r]);l.default.setChild(c,"over"===o?c.over:c.under,n);var u=c;return i&&(u=e.create("node","TeXAtom",[c],{texClass:a.TEXCLASS.OP,movesupsub:!0})),l.default.setProperty(u,"subsupOK",!0),u},t.checkMovableLimits=function(t){var e=l.default.isType(t,"mo")?l.default.getForm(t):null;(l.default.getProperty(t,"movablelimits")||e&&e[3]&&e[3].movablelimits)&&l.default.setProperties(t,{movablelimits:!1})},t.trimSpaces=function(t){if("string"!=typeof t)return t;var e=t.trim();return e.match(/\\$/)&&t.match(/ $/)&&(e+=" "),e},t.setArrayAlign=function(e,r){return"t"===(r=t.trimSpaces(r||""))?e.arraydef.align="baseline 1":"b"===r?e.arraydef.align="baseline -1":"c"===r?e.arraydef.align="axis":r&&(e.arraydef.align=r),e},t.substituteArgs=function(t,e,r){for(var n="",o="",i=0;i<r.length;){var s=r.charAt(i++);if("\\"===s)n+=s+r.charAt(i++);else if("#"===s)if("#"===(s=r.charAt(i++)))n+=s;else{if(!s.match(/[1-9]/)||parseInt(s,10)>e.length)throw new u.default("IllegalMacroParam","Illegal macro parameter reference");o=b(t,b(t,o,n),e[parseInt(s,10)-1]),n=""}else n+=s}return b(t,o,n)},t.addArgs=b,t.checkMaxMacros=function(t,e){if(void 0===e&&(e=!0),!(++t.macroCount<=t.configuration.options.maxMacros))throw e?new u.default("MaxMacroSub1","MathJax maximum macro substitution count exceeded; is here a recursive macro call?"):new u.default("MaxMacroSub2","MathJax maximum substitution count exceeded; is there a recursive latex environment?")},t.checkEqnEnv=function(t){if(t.stack.global.eqnenv)throw new u.default("ErroneousNestingEq","Erroneous nesting of equation structures");t.stack.global.eqnenv=!0},t.copyNode=function(t,e){var r=t.copy(),n=e.configuration;return r.walkTree((function(t){var e,r;n.addNode(t.kind,t);var i=(t.getProperty("in-lists")||"").split(/,/);try{for(var s=o(i),a=s.next();!a.done;a=s.next()){var l=a.value;l&&n.addNode(l,t)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}})),r},t.MmlFilterAttribute=function(t,e,r){return r},t.getFontDef=function(t){var e=t.stack.env.font;return e?{mathvariant:e}:{}},t.keyvalOptions=function(t,e,r){var i,s;void 0===e&&(e=null),void 0===r&&(r=!1);var a=function(t){var e,r,o,i,s,a={},l=t;for(;l;)i=(e=n(_(l,["=",","]),3))[0],o=e[1],l=e[2],"="===o?(s=(r=n(_(l,[","]),3))[0],o=r[1],l=r[2],s="false"===s||"true"===s?JSON.parse(s):s,a[i]=s):i&&(a[i]=!0);return a}(t);if(e)try{for(var l=o(Object.keys(a)),c=l.next();!c.done;c=l.next()){var p=c.value;if(!e.hasOwnProperty(p)){if(r)throw new u.default("InvalidOption","Invalid option: %1",p);delete a[p]}}}catch(t){i={error:t}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}}(s||(s={})),e.default=s},9497:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=s(r(1256)),l=function(){function t(t,e,r){this._factory=t,this._env=e,this.global={},this.stack=[],this.global={isInner:r},this.stack=[this._factory.create("start",this.global)],e&&(this.stack[0].env=e),this.env=this.stack[0].env}return Object.defineProperty(t.prototype,"env",{get:function(){return this._env},set:function(t){this._env=t},enumerable:!1,configurable:!0}),t.prototype.Push=function(){for(var t,e,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];try{for(var l=n(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u){var p=a.default.isNode(u)?this._factory.create("mml",u):u;p.global=this.global;var h=o(this.stack.length?this.Top().checkItem(p):[null,!0],2),f=h[0],d=h[1];d&&(f?(this.Pop(),this.Push.apply(this,i([],o(f),!1))):(this.stack.push(p),p.env?(p.copyEnv&&Object.assign(p.env,this.env),this.env=p.env):p.env=this.env))}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}},t.prototype.Pop=function(){var t=this.stack.pop();return t.isOpen||delete t.env,this.env=this.stack.length?this.Top().env:{},t},t.prototype.Top=function(t){return void 0===t&&(t=1),this.stack.length<t?null:this.stack[this.stack.length-t]},t.prototype.Prev=function(t){var e=this.Top();return t?e.First:e.Pop()},t.prototype.toString=function(){return"stack[\n  "+this.stack.join("\n  ")+"\n]"},t}();e.default=l},8292:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseItem=e.MmlStack=void 0;var c=l(r(3971)),u=function(){function t(t){this._nodes=t}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),t.prototype.Push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this._nodes).push.apply(t,s([],i(e),!1))},t.prototype.Pop=function(){return this._nodes.pop()},Object.defineProperty(t.prototype,"First",{get:function(){return this._nodes[this.Size()-1]},set:function(t){this._nodes[this.Size()-1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Last",{get:function(){return this._nodes[0]},set:function(t){this._nodes[0]=t},enumerable:!1,configurable:!0}),t.prototype.Peek=function(t){return null==t&&(t=1),this._nodes.slice(this.Size()-t)},t.prototype.Size=function(){return this._nodes.length},t.prototype.Clear=function(){this._nodes=[]},t.prototype.toMml=function(t,e){return void 0===t&&(t=!0),1!==this._nodes.length||e?this.create("node",t?"inferredMrow":"mrow",this._nodes,{}):this.First},t.prototype.create=function(t){for(var e,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(e=this.factory.configuration.nodeFactory).create.apply(e,s([t],i(r),!1))},t}();e.MmlStack=u;var p=function(t){function e(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=t.call(this,r)||this;return o.factory=e,o.global={},o._properties={},o.isOpen&&(o._env={}),o}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"base"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"env",{get:function(){return this._env},set:function(t){this._env=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyEnv",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.getProperty=function(t){return this._properties[t]},e.prototype.setProperty=function(t,e){return this._properties[t]=e,this},Object.defineProperty(e.prototype,"isOpen",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFinal",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.isKind=function(t){return t===this.kind},e.prototype.checkItem=function(t){if(t.isKind("over")&&this.isOpen&&(t.setProperty("num",this.toMml(!1)),this.Clear()),t.isKind("cell")&&this.isOpen){if(t.getProperty("linebreak"))return e.fail;throw new c.default("Misplaced","Misplaced %1",t.getName())}if(t.isClose&&this.getErrors(t.kind)){var r=i(this.getErrors(t.kind),2),n=r[0],o=r[1];throw new c.default(n,o,t.getName())}return t.isFinal?(this.Push(t.First),e.fail):e.success},e.prototype.clearEnv=function(){var t,e;try{for(var r=a(Object.keys(this.env)),n=r.next();!n.done;n=r.next()){var o=n.value;delete this.env[o]}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e.prototype.setProperties=function(t){return Object.assign(this._properties,t),this},e.prototype.getName=function(){return this.getProperty("name")},e.prototype.toString=function(){return this.kind+"["+this.nodes.join("; ")+"]"},e.prototype.getErrors=function(t){return(this.constructor.errors||{})[t]||e.errors[t]},e.fail=[null,!1],e.success=[null,!0],e.errors={end:["MissingBeginExtraEnd","Missing \\begin{%1} or extra \\end{%1}"],close:["ExtraCloseMissingOpen","Extra close brace or missing open brace"],right:["MissingLeftExtraRight","Missing \\left or extra \\right"],middle:["ExtraMiddle","Extra \\middle"]},e}(u);e.BaseItem=p},5453:function(t,e,r){var n,o,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var s=r(8292),a=r(4574),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.BaseItem),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultKind="dummy",e.configuration=null,e}return i(e,t),e.DefaultStackItems=((o={})[l.prototype.kind]=l,o),e}(a.AbstractFactory);e.default=c},8803:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Macro=e.Symbol=void 0;var r=function(){function t(t,e,r){this._symbol=t,this._char=e,this._attributes=r}return Object.defineProperty(t.prototype,"symbol",{get:function(){return this._symbol},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"char",{get:function(){return this._char},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this._attributes},enumerable:!1,configurable:!0}),t}();e.Symbol=r;var n=function(){function t(t,e,r){void 0===r&&(r=[]),this._symbol=t,this._func=e,this._args=r}return Object.defineProperty(t.prototype,"symbol",{get:function(){return this._symbol},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"func",{get:function(){return this._func},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"args",{get:function(){return this._args},enumerable:!1,configurable:!0}),t}();e.Macro=n},9140:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.EnvironmentMap=e.CommandMap=e.MacroMap=e.DelimiterMap=e.CharacterMap=e.AbstractParseMap=e.RegExpMap=e.AbstractSymbolMap=e.parseResult=void 0;var l=r(8803),c=r(2947);function u(t){return void 0===t||t}e.parseResult=u;var p=function(){function t(t,e){this._name=t,this._parser=e,c.MapHandler.register(this)}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t.prototype.parserFor=function(t){return this.contains(t)?this.parser:null},t.prototype.parse=function(t){var e=i(t,2),r=e[0],n=e[1],o=this.parserFor(n),s=this.lookup(n);return o&&s?u(o(r,s)):null},Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser},set:function(t){this._parser=t},enumerable:!1,configurable:!0}),t}();e.AbstractSymbolMap=p;var h=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o._regExp=n,o}return o(e,t),e.prototype.contains=function(t){return this._regExp.test(t)},e.prototype.lookup=function(t){return this.contains(t)?t:null},e}(p);e.RegExpMap=h;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.map=new Map,e}return o(e,t),e.prototype.lookup=function(t){return this.map.get(t)},e.prototype.contains=function(t){return this.map.has(t)},e.prototype.add=function(t,e){this.map.set(t,e)},e.prototype.remove=function(t){this.map.delete(t)},e}(p);e.AbstractParseMap=f;var d=function(t){function e(e,r,n){var o,a,c=t.call(this,e,r)||this;try{for(var u=s(Object.keys(n)),p=u.next();!p.done;p=u.next()){var h=p.value,f=n[h],d=i("string"==typeof f?[f,null]:f,2),m=d[0],y=d[1],g=new l.Symbol(h,m,y);c.add(h,g)}}catch(t){o={error:t}}finally{try{p&&!p.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return c}return o(e,t),e}(f);e.CharacterMap=d;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.parse=function(e){var r=i(e,2),n=r[0],o=r[1];return t.prototype.parse.call(this,[n,"\\"+o])},e}(d);e.DelimiterMap=m;var y=function(t){function e(e,r,n){var o,a,c=t.call(this,e,null)||this;try{for(var u=s(Object.keys(r)),p=u.next();!p.done;p=u.next()){var h=p.value,f=r[h],d=i("string"==typeof f?[f]:f),m=d[0],y=d.slice(1),g=new l.Macro(h,n[m],y);c.add(h,g)}}catch(t){o={error:t}}finally{try{p&&!p.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return c}return o(e,t),e.prototype.parserFor=function(t){var e=this.lookup(t);return e?e.func:null},e.prototype.parse=function(t){var e=i(t,2),r=e[0],n=e[1],o=this.lookup(n),s=this.parserFor(n);return o&&s?u(s.apply(void 0,a([r,o.symbol],i(o.args),!1))):null},e}(f);e.MacroMap=y;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.parse=function(t){var e=i(t,2),r=e[0],n=e[1],o=this.lookup(n),s=this.parserFor(n);if(!o||!s)return null;var l=r.currentCS;r.currentCS="\\"+n;var c=s.apply(void 0,a([r,"\\"+o.symbol],i(o.args),!1));return r.currentCS=l,u(c)},e}(y);e.CommandMap=g;var b=function(t){function e(e,r,n,o){var i=t.call(this,e,n,o)||this;return i.parser=r,i}return o(e,t),e.prototype.parse=function(t){var e=i(t,2),r=e[0],n=e[1],o=this.lookup(n),s=this.parserFor(n);return o&&s?u(this.parser(r,o.symbol,s,o.args)):null},e}(y);e.EnvironmentMap=b},6521:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TagsFactory=e.AllTags=e.NoTags=e.AbstractTags=e.TagInfo=e.Label=void 0;var a=s(r(8417)),l=function(t,e){void 0===t&&(t="???"),void 0===e&&(e=""),this.tag=t,this.id=e};e.Label=l;var c=function(t,e,r,n,o,i,s,a){void 0===t&&(t=""),void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===n&&(n=null),void 0===o&&(o=""),void 0===i&&(i=""),void 0===s&&(s=!1),void 0===a&&(a=""),this.env=t,this.taggable=e,this.defaultTags=r,this.tag=n,this.tagId=o,this.tagFormat=i,this.noTag=s,this.labelId=a};e.TagInfo=c;var u=function(){function t(){this.counter=0,this.allCounter=0,this.configuration=null,this.ids={},this.allIds={},this.labels={},this.allLabels={},this.redo=!1,this.refUpdate=!1,this.currentTag=new c,this.history=[],this.stack=[],this.enTag=function(t,e){var r=this.configuration.nodeFactory,n=r.create("node","mtd",[t]),o=r.create("node","mlabeledtr",[e,n]);return r.create("node","mtable",[o],{side:this.configuration.options.tagSide,minlabelspacing:this.configuration.options.tagIndent,displaystyle:!0})}}return t.prototype.start=function(t,e,r){this.currentTag&&this.stack.push(this.currentTag),this.currentTag=new c(t,e,r)},Object.defineProperty(t.prototype,"env",{get:function(){return this.currentTag.env},enumerable:!1,configurable:!0}),t.prototype.end=function(){this.history.push(this.currentTag),this.currentTag=this.stack.pop()},t.prototype.tag=function(t,e){this.currentTag.tag=t,this.currentTag.tagFormat=e?t:this.formatTag(t),this.currentTag.noTag=!1},t.prototype.notag=function(){this.tag("",!0),this.currentTag.noTag=!0},Object.defineProperty(t.prototype,"noTag",{get:function(){return this.currentTag.noTag},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.currentTag.labelId},set:function(t){this.currentTag.labelId=t},enumerable:!1,configurable:!0}),t.prototype.formatUrl=function(t,e){return e+"#"+encodeURIComponent(t)},t.prototype.formatTag=function(t){return"("+t+")"},t.prototype.formatId=function(t){return"mjx-eqn:"+t.replace(/\s/g,"_")},t.prototype.formatNumber=function(t){return t.toString()},t.prototype.autoTag=function(){null==this.currentTag.tag&&(this.counter++,this.tag(this.formatNumber(this.counter),!1))},t.prototype.clearTag=function(){this.label="",this.tag(null,!0),this.currentTag.tagId=""},t.prototype.getTag=function(t){if(void 0===t&&(t=!1),t)return this.autoTag(),this.makeTag();var e=this.currentTag;return e.taggable&&!e.noTag&&(e.defaultTags&&this.autoTag(),e.tag)?this.makeTag():null},t.prototype.resetTag=function(){this.history=[],this.redo=!1,this.refUpdate=!1,this.clearTag()},t.prototype.reset=function(t){void 0===t&&(t=0),this.resetTag(),this.counter=this.allCounter=t,this.allLabels={},this.allIds={}},t.prototype.startEquation=function(t){this.history=[],this.stack=[],this.clearTag(),this.currentTag=new c("",void 0,void 0),this.labels={},this.ids={},this.counter=this.allCounter,this.redo=!1;var e=t.inputData.recompile;e&&(this.refUpdate=!0,this.counter=e.counter)},t.prototype.finishEquation=function(t){this.redo&&(t.inputData.recompile={state:t.state(),counter:this.allCounter}),this.refUpdate||(this.allCounter=this.counter),Object.assign(this.allIds,this.ids),Object.assign(this.allLabels,this.labels)},t.prototype.finalize=function(t,e){if(!e.display||this.currentTag.env||null==this.currentTag.tag)return t;var r=this.makeTag();return this.enTag(t,r)},t.prototype.makeId=function(){this.currentTag.tagId=this.formatId(this.configuration.options.useLabelIds&&this.label||this.currentTag.tag)},t.prototype.makeTag=function(){this.makeId(),this.label&&(this.labels[this.label]=new l(this.currentTag.tag,this.currentTag.tagId));var t=new a.default("\\text{"+this.currentTag.tagFormat+"}",{},this.configuration).mml();return this.configuration.nodeFactory.create("node","mtd",[t],{id:this.currentTag.tagId})},t}();e.AbstractTags=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.autoTag=function(){},e.prototype.getTag=function(){return this.currentTag.tag?t.prototype.getTag.call(this):null},e}(u);e.NoTags=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.finalize=function(t,e){if(!e.display||this.history.find((function(t){return t.taggable})))return t;var r=this.getTag(!0);return this.enTag(t,r)},e}(u);e.AllTags=h,function(t){var e=new Map([["none",p],["all",h]]),r="none";t.OPTIONS={tags:r,tagSide:"right",tagIndent:"0.8em",useLabelIds:!0,ignoreDuplicateLabels:!1},t.add=function(t,r){e.set(t,r)},t.addTags=function(e){var r,n;try{for(var o=i(Object.keys(e)),s=o.next();!s.done;s=o.next()){var a=s.value;t.add(a,e[a])}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.create=function(t){var n=e.get(t)||e.get(r);if(!n)throw Error("Unknown tags class");return new n},t.setDefault=function(t){r=t},t.getDefault=function(){return t.create(r)}}(e.TagsFactory||(e.TagsFactory={}))},8317:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.TexConstant=void 0,function(t){t.Variant={NORMAL:"normal",BOLD:"bold",ITALIC:"italic",BOLDITALIC:"bold-italic",DOUBLESTRUCK:"double-struck",FRAKTUR:"fraktur",BOLDFRAKTUR:"bold-fraktur",SCRIPT:"script",BOLDSCRIPT:"bold-script",SANSSERIF:"sans-serif",BOLDSANSSERIF:"bold-sans-serif",SANSSERIFITALIC:"sans-serif-italic",SANSSERIFBOLDITALIC:"sans-serif-bold-italic",MONOSPACE:"monospace",INITIAL:"inital",TAILED:"tailed",LOOPED:"looped",STRETCHED:"stretched",CALLIGRAPHIC:"-tex-calligraphic",BOLDCALLIGRAPHIC:"-tex-bold-calligraphic",OLDSTYLE:"-tex-oldstyle",BOLDOLDSTYLE:"-tex-bold-oldstyle",MATHITALIC:"-tex-mathit"},t.Form={PREFIX:"prefix",INFIX:"infix",POSTFIX:"postfix"},t.LineBreak={AUTO:"auto",NEWLINE:"newline",NOBREAK:"nobreak",GOODBREAK:"goodbreak",BADBREAK:"badbreak"},t.LineBreakStyle={BEFORE:"before",AFTER:"after",DUPLICATE:"duplicate",INFIXLINBREAKSTYLE:"infixlinebreakstyle"},t.IndentAlign={LEFT:"left",CENTER:"center",RIGHT:"right",AUTO:"auto",ID:"id",INDENTALIGN:"indentalign"},t.IndentShift={INDENTSHIFT:"indentshift"},t.LineThickness={THIN:"thin",MEDIUM:"medium",THICK:"thick"},t.Notation={LONGDIV:"longdiv",ACTUARIAL:"actuarial",PHASORANGLE:"phasorangle",RADICAL:"radical",BOX:"box",ROUNDEDBOX:"roundedbox",CIRCLE:"circle",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",UPDIAGONALSTRIKE:"updiagonalstrike",DOWNDIAGONALSTRIKE:"downdiagonalstrike",VERTICALSTRIKE:"verticalstrike",HORIZONTALSTRIKE:"horizontalstrike",NORTHEASTARROW:"northeastarrow",MADRUWB:"madruwb",UPDIAGONALARROW:"updiagonalarrow"},t.Align={TOP:"top",BOTTOM:"bottom",CENTER:"center",BASELINE:"baseline",AXIS:"axis",LEFT:"left",RIGHT:"right"},t.Lines={NONE:"none",SOLID:"solid",DASHED:"dashed"},t.Side={LEFT:"left",RIGHT:"right",LEFTOVERLAP:"leftoverlap",RIGHTOVERLAP:"rightoverlap"},t.Width={AUTO:"auto",FIT:"fit"},t.Actiontype={TOGGLE:"toggle",STATUSLINE:"statusline",TOOLTIP:"tooltip",INPUT:"input"},t.Overflow={LINBREAK:"linebreak",SCROLL:"scroll",ELIDE:"elide",TRUNCATE:"truncate",SCALE:"scale"},t.Unit={EM:"em",EX:"ex",PX:"px",IN:"in",CM:"cm",MM:"mm",PT:"pt",PC:"pc"}}(e.TexConstant||(e.TexConstant={}))},3971:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.id=e,this.message=t.processString(r,n)}return t.processString=function(e,r){for(var n=e.split(t.pattern),o=1,i=n.length;o<i;o+=2){var s=n[o].charAt(0);if(s>="0"&&s<="9")n[o]=r[parseInt(n[o],10)-1],"number"==typeof n[o]&&(n[o]=n[o].toString());else if("{"===s){if((s=n[o].substr(1))>="0"&&s<="9")n[o]=r[parseInt(n[o].substr(1,n[o].length-2),10)-1],"number"==typeof n[o]&&(n[o]=n[o].toString());else n[o].match(/^\{([a-z]+):%(\d+)\|(.*)\}$/)&&(n[o]="%"+n[o])}null==n[o]&&(n[o]="???")}return n.join("")},t.pattern=/%(\d+|\{\d+\}|\{[a-z]+:\%\d+(?:\|(?:%\{\d+\}|%.|[^\}])*)+\}|.)/g,t}();e.default=r},8417:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=s(r(1130)),l=s(r(9497)),c=s(r(3971)),u=r(9007),p=function(){function t(t,e,r){var o,i;this._string=t,this.configuration=r,this.macroCount=0,this.i=0,this.currentCS="";var s,a=e.hasOwnProperty("isInner"),c=e.isInner;if(delete e.isInner,e){s={};try{for(var u=n(Object.keys(e)),p=u.next();!p.done;p=u.next()){var h=p.value;s[h]=e[h]}}catch(t){o={error:t}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}this.configuration.pushParser(this),this.stack=new l.default(this.itemFactory,s,!a||c),this.Parse(),this.Push(this.itemFactory.create("stop"))}return Object.defineProperty(t.prototype,"options",{get:function(){return this.configuration.options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemFactory",{get:function(){return this.configuration.itemFactory},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tags",{get:function(){return this.configuration.tags},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"string",{get:function(){return this._string},set:function(t){this._string=t},enumerable:!1,configurable:!0}),t.prototype.parse=function(t,e){return this.configuration.handlers.get(t).parse(e)},t.prototype.lookup=function(t,e){return this.configuration.handlers.get(t).lookup(e)},t.prototype.contains=function(t,e){return this.configuration.handlers.get(t).contains(e)},t.prototype.toString=function(){var t,e,r="";try{for(var o=n(Array.from(this.configuration.handlers.keys())),i=o.next();!i.done;i=o.next()){var s=i.value;r+=s+": "+this.configuration.handlers.get(s)+"\n"}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r},t.prototype.Parse=function(){for(var t;this.i<this.string.length;)t=this.getCodePoint(),this.i+=t.length,this.parse("character",[this,t])},t.prototype.Push=function(t){t instanceof u.AbstractMmlNode&&t.isInferred?this.PushAll(t.childNodes):this.stack.Push(t)},t.prototype.PushAll=function(t){var e,r;try{for(var o=n(t),i=o.next();!i.done;i=o.next()){var s=i.value;this.stack.Push(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.prototype.mml=function(){if(!this.stack.Top().isKind("mml"))return null;var t=this.stack.Top().First;return this.configuration.popParser(),t},t.prototype.convertDelimiter=function(t){var e=this.lookup("delimiter",t);return e?e.char:null},t.prototype.getCodePoint=function(){var t=this.string.codePointAt(this.i);return void 0===t?"":String.fromCodePoint(t)},t.prototype.nextIsSpace=function(){return!!this.string.charAt(this.i).match(/\s/)},t.prototype.GetNext=function(){for(;this.nextIsSpace();)this.i++;return this.getCodePoint()},t.prototype.GetCS=function(){var t=this.string.slice(this.i).match(/^(([a-z]+) ?|[\uD800-\uDBFF].|.)/i);return t?(this.i+=t[0].length,t[2]||t[1]):(this.i++," ")},t.prototype.GetArgument=function(t,e){switch(this.GetNext()){case"":if(!e)throw new c.default("MissingArgFor","Missing argument for %1",this.currentCS);return null;case"}":if(!e)throw new c.default("ExtraCloseMissingOpen","Extra close brace or missing open brace");return null;case"\\":return this.i++,"\\"+this.GetCS();case"{":for(var r=++this.i,n=1;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"\\":this.i++;break;case"{":n++;break;case"}":if(0==--n)return this.string.slice(r,this.i-1)}throw new c.default("MissingCloseBrace","Missing close brace")}var o=this.getCodePoint();return this.i+=o.length,o},t.prototype.GetBrackets=function(t,e){if("["!==this.GetNext())return e;for(var r=++this.i,n=0;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"{":n++;break;case"\\":this.i++;break;case"}":if(n--<=0)throw new c.default("ExtraCloseLooking","Extra close brace while looking for %1","']'");break;case"]":if(0===n)return this.string.slice(r,this.i-1)}throw new c.default("MissingCloseBracket","Could not find closing ']' for argument to %1",this.currentCS)},t.prototype.GetDelimiter=function(t,e){var r=this.GetNext();if(this.i+=r.length,this.i<=this.string.length&&("\\"===r?r+=this.GetCS():"{"===r&&e&&(this.i--,r=this.GetArgument(t).trim()),this.contains("delimiter",r)))return this.convertDelimiter(r);throw new c.default("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)},t.prototype.GetDimen=function(t){if("{"===this.GetNext()){var e=this.GetArgument(t),r=o(a.default.matchDimen(e),2),n=r[0],i=r[1];if(n)return n+i}else{e=this.string.slice(this.i);var s=o(a.default.matchDimen(e,!0),3),l=(n=s[0],i=s[1],s[2]);if(n)return this.i+=l,n+i}throw new c.default("MissingDimOrUnits","Missing dimension or its units for %1",this.currentCS)},t.prototype.GetUpTo=function(t,e){for(;this.nextIsSpace();)this.i++;for(var r=this.i,n=0;this.i<this.string.length;){var o=this.i,i=this.GetNext();switch(this.i+=i.length,i){case"\\":i+=this.GetCS();break;case"{":n++;break;case"}":if(0===n)throw new c.default("ExtraCloseLooking","Extra close brace while looking for %1",e);n--}if(0===n&&i===e)return this.string.slice(r,o)}throw new c.default("TokenNotFoundForCommand","Could not find %1 for %2",e,this.currentCS)},t.prototype.ParseArg=function(e){return new t(this.GetArgument(e),this.stack.env,this.configuration).mml()},t.prototype.ParseUpTo=function(e,r){return new t(this.GetUpTo(e,r),this.stack.env,this.configuration).mml()},t.prototype.GetDelimiterArg=function(t){var e=a.default.trimSpaces(this.GetArgument(t));if(""===e)return null;if(this.contains("delimiter",e))return e;throw new c.default("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)},t.prototype.GetStar=function(){var t="*"===this.GetNext();return t&&this.i++,t},t.prototype.create=function(t){for(var e,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(e=this.configuration.nodeFactory).create.apply(e,i([t],o(r),!1))},t}();e.default=p},8021:function(t,e,r){var n,o,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AmsConfiguration=e.AmsTags=void 0;var s=r(9899),a=r(2790),l=r(6521),c=r(4387);r(7379);var u=r(9140),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(l.AbstractTags);e.AmsTags=p;e.AmsConfiguration=s.Configuration.create("ams",{handler:{character:["AMSmath-operatorLetter"],delimiter:["AMSsymbols-delimiter","AMSmath-delimiter"],macro:["AMSsymbols-mathchar0mi","AMSsymbols-mathchar0mo","AMSsymbols-delimiter","AMSsymbols-macros","AMSmath-mathchar0mo","AMSmath-macros","AMSmath-delimiter"],environment:["AMSmath-environment"]},items:(o={},o[a.MultlineItem.prototype.kind]=a.MultlineItem,o[a.FlalignItem.prototype.kind]=a.FlalignItem,o),tags:{ams:p},init:function(t){new u.CommandMap(c.NEW_OPS,{},{}),t.append(s.Configuration.local({handler:{macro:[c.NEW_OPS]},priority:-1}))},config:function(t,e){e.parseOptions.options.multlineWidth&&(e.parseOptions.options.ams.multlineWidth=e.parseOptions.options.multlineWidth),delete e.parseOptions.options.multlineWidth},options:{multlineWidth:"",ams:{multlineWidth:"100%",multlineIndent:"1em"}}})},2790:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.FlalignItem=e.MultlineItem=void 0;var a=r(1181),l=s(r(1130)),c=s(r(1256)),u=s(r(3971)),p=r(8317),h=function(t){function e(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=t.call(this,e)||this;return o.factory.configuration.tags.start("multline",!0,r[0]),o}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"multline"},enumerable:!1,configurable:!0}),e.prototype.EndEntry=function(){this.table.length&&l.default.fixInitialMO(this.factory.configuration,this.nodes);var t=this.getProperty("shove"),e=this.create("node","mtd",this.nodes,t?{columnalign:t}:{});this.setProperty("shove",null),this.row.push(e),this.Clear()},e.prototype.EndRow=function(){if(1!==this.row.length)throw new u.default("MultlineRowsOneCol","The rows within the %1 environment must have exactly one column","multline");var t=this.create("node","mtr",this.row);this.table.push(t),this.row=[]},e.prototype.EndTable=function(){if(t.prototype.EndTable.call(this),this.table.length){var e=this.table.length-1,r=-1;c.default.getAttribute(c.default.getChildren(this.table[0])[0],"columnalign")||c.default.setAttribute(c.default.getChildren(this.table[0])[0],"columnalign",p.TexConstant.Align.LEFT),c.default.getAttribute(c.default.getChildren(this.table[e])[0],"columnalign")||c.default.setAttribute(c.default.getChildren(this.table[e])[0],"columnalign",p.TexConstant.Align.RIGHT);var n=this.factory.configuration.tags.getTag();if(n){r=this.arraydef.side===p.TexConstant.Align.LEFT?0:this.table.length-1;var o=this.table[r],i=this.create("node","mlabeledtr",[n].concat(c.default.getChildren(o)));c.default.copyAttributes(o,i),this.table[r]=i}}this.factory.configuration.tags.end()},e}(a.ArrayItem);e.MultlineItem=h;var f=function(t){function e(e,r,n,o,i){var s=t.call(this,e)||this;return s.name=r,s.numbered=n,s.padded=o,s.center=i,s.factory.configuration.tags.start(r,n,n),s}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"flalign"},enumerable:!1,configurable:!0}),e.prototype.EndEntry=function(){t.prototype.EndEntry.call(this);var e=this.getProperty("xalignat");if(e&&this.row.length>e)throw new u.default("XalignOverflow","Extra %1 in row of %2","&",this.name)},e.prototype.EndRow=function(){for(var e,r=this.row,n=this.getProperty("xalignat");r.length<n;)r.push(this.create("node","mtd"));for(this.row=[],this.padded&&this.row.push(this.create("node","mtd"));e=r.shift();)this.row.push(e),(e=r.shift())&&this.row.push(e),(r.length||this.padded)&&this.row.push(this.create("node","mtd"));this.row.length>this.maxrow&&(this.maxrow=this.row.length),t.prototype.EndRow.call(this);var o=this.table[this.table.length-1];if(this.getProperty("zeroWidthLabel")&&o.isKind("mlabeledtr")){var s=c.default.getChildren(o)[0],a=this.factory.configuration.options.tagSide,l=i({width:0},"right"===a?{lspace:"-1width"}:{}),u=this.create("node","mpadded",c.default.getChildren(s),l);s.setChildren([u])}},e.prototype.EndTable=function(){(t.prototype.EndTable.call(this),this.center)&&(this.maxrow<=2&&(delete this.arraydef.width,delete this.global.indentalign))},e}(a.EqnArrayItem);e.FlalignItem=f},7379:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(4387),l=i(r(9140)),c=r(8317),u=s(r(5450)),p=s(r(1130)),h=r(9007),f=r(6010);new l.CharacterMap("AMSmath-mathchar0mo",u.default.mathchar0mo,{iiiint:["\u2a0c",{texClass:h.TEXCLASS.OP}]}),new l.RegExpMap("AMSmath-operatorLetter",a.AmsMethods.operatorLetter,/[-*]/i),new l.CommandMap("AMSmath-macros",{mathring:["Accent","02DA"],nobreakspace:"Tilde",negmedspace:["Spacer",f.MATHSPACE.negativemediummathspace],negthickspace:["Spacer",f.MATHSPACE.negativethickmathspace],idotsint:["MultiIntegral","\\int\\cdots\\int"],dddot:["Accent","20DB"],ddddot:["Accent","20DC"],sideset:"SideSet",boxed:["Macro","\\fbox{$\\displaystyle{#1}$}",1],tag:"HandleTag",notag:"HandleNoTag",eqref:["HandleRef",!0],substack:["Macro","\\begin{subarray}{c}#1\\end{subarray}",1],injlim:["NamedOp","inj&thinsp;lim"],projlim:["NamedOp","proj&thinsp;lim"],varliminf:["Macro","\\mathop{\\underline{\\mmlToken{mi}{lim}}}"],varlimsup:["Macro","\\mathop{\\overline{\\mmlToken{mi}{lim}}}"],varinjlim:["Macro","\\mathop{\\underrightarrow{\\mmlToken{mi}{lim}}}"],varprojlim:["Macro","\\mathop{\\underleftarrow{\\mmlToken{mi}{lim}}}"],DeclareMathOperator:"HandleDeclareOp",operatorname:"HandleOperatorName",genfrac:"Genfrac",frac:["Genfrac","","","",""],tfrac:["Genfrac","","","","1"],dfrac:["Genfrac","","","","0"],binom:["Genfrac","(",")","0",""],tbinom:["Genfrac","(",")","0","1"],dbinom:["Genfrac","(",")","0","0"],cfrac:"CFrac",shoveleft:["HandleShove",c.TexConstant.Align.LEFT],shoveright:["HandleShove",c.TexConstant.Align.RIGHT],xrightarrow:["xArrow",8594,5,10],xleftarrow:["xArrow",8592,10,5]},a.AmsMethods),new l.EnvironmentMap("AMSmath-environment",u.default.environment,{"equation*":["Equation",null,!1],"eqnarray*":["EqnArray",null,!1,!0,"rcl",p.default.cols(0,f.MATHSPACE.thickmathspace),".5em"],align:["EqnArray",null,!0,!0,"rl",p.default.cols(0,2)],"align*":["EqnArray",null,!1,!0,"rl",p.default.cols(0,2)],multline:["Multline",null,!0],"multline*":["Multline",null,!1],split:["EqnArray",null,!1,!1,"rl",p.default.cols(0)],gather:["EqnArray",null,!0,!0,"c"],"gather*":["EqnArray",null,!1,!0,"c"],alignat:["AlignAt",null,!0,!0],"alignat*":["AlignAt",null,!1,!0],alignedat:["AlignAt",null,!1,!1],aligned:["AmsEqnArray",null,null,null,"rl",p.default.cols(0,2),".5em","D"],gathered:["AmsEqnArray",null,null,null,"c",null,".5em","D"],xalignat:["XalignAt",null,!0,!0],"xalignat*":["XalignAt",null,!1,!0],xxalignat:["XalignAt",null,!1,!1],flalign:["FlalignArray",null,!0,!1,!0,"rlc","auto auto fit"],"flalign*":["FlalignArray",null,!1,!1,!0,"rlc","auto auto fit"],subarray:["Array",null,null,null,null,p.default.cols(0),"0.1em","S",1],smallmatrix:["Array",null,null,null,"c",p.default.cols(1/3),".2em","S",1],matrix:["Array",null,null,null,"c"],pmatrix:["Array",null,"(",")","c"],bmatrix:["Array",null,"[","]","c"],Bmatrix:["Array",null,"\\{","\\}","c"],vmatrix:["Array",null,"\\vert","\\vert","c"],Vmatrix:["Array",null,"\\Vert","\\Vert","c"],cases:["Array",null,"\\{",".","ll",null,".2em","T"]},a.AmsMethods),new l.DelimiterMap("AMSmath-delimiter",u.default.delimiter,{"\\lvert":["|",{texClass:h.TEXCLASS.OPEN}],"\\rvert":["|",{texClass:h.TEXCLASS.CLOSE}],"\\lVert":["\u2016",{texClass:h.TEXCLASS.OPEN}],"\\rVert":["\u2016",{texClass:h.TEXCLASS.CLOSE}]}),new l.CharacterMap("AMSsymbols-mathchar0mi",u.default.mathchar0mi,{digamma:"\u03dd",varkappa:"\u03f0",varGamma:["\u0393",{mathvariant:c.TexConstant.Variant.ITALIC}],varDelta:["\u0394",{mathvariant:c.TexConstant.Variant.ITALIC}],varTheta:["\u0398",{mathvariant:c.TexConstant.Variant.ITALIC}],varLambda:["\u039b",{mathvariant:c.TexConstant.Variant.ITALIC}],varXi:["\u039e",{mathvariant:c.TexConstant.Variant.ITALIC}],varPi:["\u03a0",{mathvariant:c.TexConstant.Variant.ITALIC}],varSigma:["\u03a3",{mathvariant:c.TexConstant.Variant.ITALIC}],varUpsilon:["\u03a5",{mathvariant:c.TexConstant.Variant.ITALIC}],varPhi:["\u03a6",{mathvariant:c.TexConstant.Variant.ITALIC}],varPsi:["\u03a8",{mathvariant:c.TexConstant.Variant.ITALIC}],varOmega:["\u03a9",{mathvariant:c.TexConstant.Variant.ITALIC}],beth:"\u2136",gimel:"\u2137",daleth:"\u2138",backprime:["\u2035",{variantForm:!0}],hslash:"\u210f",varnothing:["\u2205",{variantForm:!0}],blacktriangle:"\u25b4",triangledown:["\u25bd",{variantForm:!0}],blacktriangledown:"\u25be",square:"\u25fb",Box:"\u25fb",blacksquare:"\u25fc",lozenge:"\u25ca",Diamond:"\u25ca",blacklozenge:"\u29eb",circledS:["\u24c8",{mathvariant:c.TexConstant.Variant.NORMAL}],bigstar:"\u2605",sphericalangle:"\u2222",measuredangle:"\u2221",nexists:"\u2204",complement:"\u2201",mho:"\u2127",eth:["\xf0",{mathvariant:c.TexConstant.Variant.NORMAL}],Finv:"\u2132",diagup:"\u2571",Game:"\u2141",diagdown:"\u2572",Bbbk:["k",{mathvariant:c.TexConstant.Variant.DOUBLESTRUCK}],yen:"\xa5",circledR:"\xae",checkmark:"\u2713",maltese:"\u2720"}),new l.CharacterMap("AMSsymbols-mathchar0mo",u.default.mathchar0mo,{dotplus:"\u2214",ltimes:"\u22c9",smallsetminus:["\u2216",{variantForm:!0}],rtimes:"\u22ca",Cap:"\u22d2",doublecap:"\u22d2",leftthreetimes:"\u22cb",Cup:"\u22d3",doublecup:"\u22d3",rightthreetimes:"\u22cc",barwedge:"\u22bc",curlywedge:"\u22cf",veebar:"\u22bb",curlyvee:"\u22ce",doublebarwedge:"\u2a5e",boxminus:"\u229f",circleddash:"\u229d",boxtimes:"\u22a0",circledast:"\u229b",boxdot:"\u22a1",circledcirc:"\u229a",boxplus:"\u229e",centerdot:["\u22c5",{variantForm:!0}],divideontimes:"\u22c7",intercal:"\u22ba",leqq:"\u2266",geqq:"\u2267",leqslant:"\u2a7d",geqslant:"\u2a7e",eqslantless:"\u2a95",eqslantgtr:"\u2a96",lesssim:"\u2272",gtrsim:"\u2273",lessapprox:"\u2a85",gtrapprox:"\u2a86",approxeq:"\u224a",lessdot:"\u22d6",gtrdot:"\u22d7",lll:"\u22d8",llless:"\u22d8",ggg:"\u22d9",gggtr:"\u22d9",lessgtr:"\u2276",gtrless:"\u2277",lesseqgtr:"\u22da",gtreqless:"\u22db",lesseqqgtr:"\u2a8b",gtreqqless:"\u2a8c",doteqdot:"\u2251",Doteq:"\u2251",eqcirc:"\u2256",risingdotseq:"\u2253",circeq:"\u2257",fallingdotseq:"\u2252",triangleq:"\u225c",backsim:"\u223d",thicksim:["\u223c",{variantForm:!0}],backsimeq:"\u22cd",thickapprox:["\u2248",{variantForm:!0}],subseteqq:"\u2ac5",supseteqq:"\u2ac6",Subset:"\u22d0",Supset:"\u22d1",sqsubset:"\u228f",sqsupset:"\u2290",preccurlyeq:"\u227c",succcurlyeq:"\u227d",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",precsim:"\u227e",succsim:"\u227f",precapprox:"\u2ab7",succapprox:"\u2ab8",vartriangleleft:"\u22b2",lhd:"\u22b2",vartriangleright:"\u22b3",rhd:"\u22b3",trianglelefteq:"\u22b4",unlhd:"\u22b4",trianglerighteq:"\u22b5",unrhd:"\u22b5",vDash:["\u22a8",{variantForm:!0}],Vdash:"\u22a9",Vvdash:"\u22aa",smallsmile:["\u2323",{variantForm:!0}],shortmid:["\u2223",{variantForm:!0}],smallfrown:["\u2322",{variantForm:!0}],shortparallel:["\u2225",{variantForm:!0}],bumpeq:"\u224f",between:"\u226c",Bumpeq:"\u224e",pitchfork:"\u22d4",varpropto:["\u221d",{variantForm:!0}],backepsilon:"\u220d",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",therefore:"\u2234",because:"\u2235",eqsim:"\u2242",vartriangle:["\u25b3",{variantForm:!0}],Join:"\u22c8",nless:"\u226e",ngtr:"\u226f",nleq:"\u2270",ngeq:"\u2271",nleqslant:["\u2a87",{variantForm:!0}],ngeqslant:["\u2a88",{variantForm:!0}],nleqq:["\u2270",{variantForm:!0}],ngeqq:["\u2271",{variantForm:!0}],lneq:"\u2a87",gneq:"\u2a88",lneqq:"\u2268",gneqq:"\u2269",lvertneqq:["\u2268",{variantForm:!0}],gvertneqq:["\u2269",{variantForm:!0}],lnsim:"\u22e6",gnsim:"\u22e7",lnapprox:"\u2a89",gnapprox:"\u2a8a",nprec:"\u2280",nsucc:"\u2281",npreceq:["\u22e0",{variantForm:!0}],nsucceq:["\u22e1",{variantForm:!0}],precneqq:"\u2ab5",succneqq:"\u2ab6",precnsim:"\u22e8",succnsim:"\u22e9",precnapprox:"\u2ab9",succnapprox:"\u2aba",nsim:"\u2241",ncong:"\u2247",nshortmid:["\u2224",{variantForm:!0}],nshortparallel:["\u2226",{variantForm:!0}],nmid:"\u2224",nparallel:"\u2226",nvdash:"\u22ac",nvDash:"\u22ad",nVdash:"\u22ae",nVDash:"\u22af",ntriangleleft:"\u22ea",ntriangleright:"\u22eb",ntrianglelefteq:"\u22ec",ntrianglerighteq:"\u22ed",nsubseteq:"\u2288",nsupseteq:"\u2289",nsubseteqq:["\u2288",{variantForm:!0}],nsupseteqq:["\u2289",{variantForm:!0}],subsetneq:"\u228a",supsetneq:"\u228b",varsubsetneq:["\u228a",{variantForm:!0}],varsupsetneq:["\u228b",{variantForm:!0}],subsetneqq:"\u2acb",supsetneqq:"\u2acc",varsubsetneqq:["\u2acb",{variantForm:!0}],varsupsetneqq:["\u2acc",{variantForm:!0}],leftleftarrows:"\u21c7",rightrightarrows:"\u21c9",leftrightarrows:"\u21c6",rightleftarrows:"\u21c4",Lleftarrow:"\u21da",Rrightarrow:"\u21db",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",leftarrowtail:"\u21a2",rightarrowtail:"\u21a3",looparrowleft:"\u21ab",looparrowright:"\u21ac",leftrightharpoons:"\u21cb",rightleftharpoons:["\u21cc",{variantForm:!0}],curvearrowleft:"\u21b6",curvearrowright:"\u21b7",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",Lsh:"\u21b0",Rsh:"\u21b1",upuparrows:"\u21c8",downdownarrows:"\u21ca",upharpoonleft:"\u21bf",upharpoonright:"\u21be",downharpoonleft:"\u21c3",restriction:"\u21be",multimap:"\u22b8",downharpoonright:"\u21c2",leftrightsquigarrow:"\u21ad",rightsquigarrow:"\u21dd",leadsto:"\u21dd",dashrightarrow:"\u21e2",dashleftarrow:"\u21e0",nleftarrow:"\u219a",nrightarrow:"\u219b",nLeftarrow:"\u21cd",nRightarrow:"\u21cf",nleftrightarrow:"\u21ae",nLeftrightarrow:"\u21ce"}),new l.DelimiterMap("AMSsymbols-delimiter",u.default.delimiter,{"\\ulcorner":"\u231c","\\urcorner":"\u231d","\\llcorner":"\u231e","\\lrcorner":"\u231f"}),new l.CommandMap("AMSsymbols-macros",{implies:["Macro","\\;\\Longrightarrow\\;"],impliedby:["Macro","\\;\\Longleftarrow\\;"]},a.AmsMethods)},4387:function(t,e,r){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.NEW_OPS=e.AmsMethods=void 0;var s=i(r(1130)),a=i(r(5450)),l=i(r(1256)),c=r(8317),u=i(r(8417)),p=i(r(3971)),h=r(8803),f=i(r(7693)),d=r(9007);function m(t){if(!t||t.isInferred&&0===t.childNodes.length)return[null,null];if(t.isKind("msubsup")&&y(t))return[t,null];var e=l.default.getChildAt(t,0);return t.isInferred&&e&&y(e)?(t.childNodes.splice(0,1),[e,t]):[null,t]}function y(t){var e=t.childNodes[0];return e&&e.isKind("mi")&&""===e.getText()}e.AmsMethods={},e.AmsMethods.AmsEqnArray=function(t,e,r,n,o,i,a){var l=t.GetBrackets("\\begin{"+e.getName()+"}"),c=f.default.EqnArray(t,e,r,n,o,i,a);return s.default.setArrayAlign(c,l)},e.AmsMethods.AlignAt=function(t,r,n,o){var i,a,l=r.getName(),c="",u=[];if(o||(a=t.GetBrackets("\\begin{"+l+"}")),(i=t.GetArgument("\\begin{"+l+"}")).match(/[^0-9]/))throw new p.default("PositiveIntegerArg","Argument to %1 must me a positive integer","\\begin{"+l+"}");for(var h=parseInt(i,10);h>0;)c+="rl",u.push("0em 0em"),h--;var f=u.join(" ");if(o)return e.AmsMethods.EqnArray(t,r,n,o,c,f);var d=e.AmsMethods.EqnArray(t,r,n,o,c,f);return s.default.setArrayAlign(d,a)},e.AmsMethods.Multline=function(t,e,r){t.Push(e),s.default.checkEqnEnv(t);var n=t.itemFactory.create("multline",r,t.stack);return n.arraydef={displaystyle:!0,rowspacing:".5em",columnspacing:"100%",width:t.options.ams.multlineWidth,side:t.options.tagSide,minlabelspacing:t.options.tagIndent,framespacing:t.options.ams.multlineIndent+" 0",frame:"","data-width-includes-label":!0},n},e.AmsMethods.XalignAt=function(t,r,n,o){var i=t.GetArgument("\\begin{"+r.getName()+"}");if(i.match(/[^0-9]/))throw new p.default("PositiveIntegerArg","Argument to %1 must me a positive integer","\\begin{"+r.getName()+"}");var s=o?"crl":"rlc",a=o?"fit auto auto":"auto auto fit",l=e.AmsMethods.FlalignArray(t,r,n,o,!1,s,a,!0);return l.setProperty("xalignat",2*parseInt(i)),l},e.AmsMethods.FlalignArray=function(t,e,r,n,o,i,a,l){void 0===l&&(l=!1),t.Push(e),s.default.checkEqnEnv(t),i=i.split("").join(" ").replace(/r/g,"right").replace(/l/g,"left").replace(/c/g,"center");var c=t.itemFactory.create("flalign",e.getName(),r,n,o,t.stack);return c.arraydef={width:"100%",displaystyle:!0,columnalign:i,columnspacing:"0em",columnwidth:a,rowspacing:"3pt",side:t.options.tagSide,minlabelspacing:l?"0":t.options.tagIndent,"data-width-includes-label":!0},c.setProperty("zeroWidthLabel",l),c},e.NEW_OPS="ams-declare-ops",e.AmsMethods.HandleDeclareOp=function(t,r){var n=t.GetStar()?"*":"",o=s.default.trimSpaces(t.GetArgument(r));"\\"===o.charAt(0)&&(o=o.substr(1));var i=t.GetArgument(r);t.configuration.handlers.retrieve(e.NEW_OPS).add(o,new h.Macro(o,e.AmsMethods.Macro,["\\operatorname".concat(n,"{").concat(i,"}")]))},e.AmsMethods.HandleOperatorName=function(t,e){var r=t.GetStar(),o=s.default.trimSpaces(t.GetArgument(e)),i=new u.default(o,n(n({},t.stack.env),{font:c.TexConstant.Variant.NORMAL,multiLetterIdentifiers:/^[-*a-z]+/i,operatorLetters:!0}),t.configuration).mml();if(i.isKind("mi")||(i=t.create("node","TeXAtom",[i])),l.default.setProperties(i,{movesupsub:r,movablelimits:!0,texClass:d.TEXCLASS.OP}),!r){var a=t.GetNext(),p=t.i;"\\"===a&&++t.i&&"limits"!==t.GetCS()&&(t.i=p)}t.Push(i)},e.AmsMethods.SideSet=function(t,e){var r=o(m(t.ParseArg(e)),2),n=r[0],i=r[1],a=o(m(t.ParseArg(e)),2),c=a[0],u=a[1],p=t.ParseArg(e),h=p;n&&(i?n.replaceChild(t.create("node","mphantom",[t.create("node","mpadded",[s.default.copyNode(p,t)],{width:0})]),l.default.getChildAt(n,0)):(h=t.create("node","mmultiscripts",[p]),c&&l.default.appendChildren(h,[l.default.getChildAt(c,1)||t.create("node","none"),l.default.getChildAt(c,2)||t.create("node","none")]),l.default.setProperty(h,"scriptalign","left"),l.default.appendChildren(h,[t.create("node","mprescripts"),l.default.getChildAt(n,1)||t.create("node","none"),l.default.getChildAt(n,2)||t.create("node","none")]))),c&&h===p&&(c.replaceChild(p,l.default.getChildAt(c,0)),h=c);var f=t.create("node","TeXAtom",[],{texClass:d.TEXCLASS.OP,movesupsub:!0,movablelimits:!0});i&&(n&&f.appendChild(n),f.appendChild(i)),f.appendChild(h),u&&f.appendChild(u),t.Push(f)},e.AmsMethods.operatorLetter=function(t,e){return!!t.stack.env.operatorLetters&&a.default.variable(t,e)},e.AmsMethods.MultiIntegral=function(t,e,r){var n=t.GetNext();if("\\"===n){var o=t.i;n=t.GetArgument(e),t.i=o,"\\limits"===n&&(r="\\idotsint"===e?"\\!\\!\\mathop{\\,\\,"+r+"}":"\\!\\!\\!\\mathop{\\,\\,\\,"+r+"}")}t.string=r+" "+t.string.slice(t.i),t.i=0},e.AmsMethods.xArrow=function(t,e,r,n,o){var i={width:"+"+s.default.Em((n+o)/18),lspace:s.default.Em(n/18)},a=t.GetBrackets(e),c=t.ParseArg(e),p=t.create("node","mspace",[],{depth:".25em"}),h=t.create("token","mo",{stretchy:!0,texClass:d.TEXCLASS.REL},String.fromCodePoint(r));h=t.create("node","mstyle",[h],{scriptlevel:0});var f=t.create("node","munderover",[h]),m=t.create("node","mpadded",[c,p],i);if(l.default.setAttribute(m,"voffset","-.2em"),l.default.setAttribute(m,"height","-.2em"),l.default.setChild(f,f.over,m),a){var y=new u.default(a,t.stack.env,t.configuration).mml(),g=t.create("node","mspace",[],{height:".75em"});m=t.create("node","mpadded",[y,g],i),l.default.setAttribute(m,"voffset",".15em"),l.default.setAttribute(m,"depth","-.15em"),l.default.setChild(f,f.under,m)}l.default.setProperty(f,"subsupOK",!0),t.Push(f)},e.AmsMethods.HandleShove=function(t,e,r){var n=t.stack.Top();if("multline"!==n.kind)throw new p.default("CommandOnlyAllowedInEnv","%1 only allowed in %2 environment",t.currentCS,"multline");if(n.Size())throw new p.default("CommandAtTheBeginingOfLine","%1 must come at the beginning of the line",t.currentCS);n.setProperty("shove",r)},e.AmsMethods.CFrac=function(t,e){var r=s.default.trimSpaces(t.GetBrackets(e,"")),n=t.GetArgument(e),o=t.GetArgument(e),i={l:c.TexConstant.Align.LEFT,r:c.TexConstant.Align.RIGHT,"":""},a=new u.default("\\strut\\textstyle{"+n+"}",t.stack.env,t.configuration).mml(),h=new u.default("\\strut\\textstyle{"+o+"}",t.stack.env,t.configuration).mml(),f=t.create("node","mfrac",[a,h]);if(null==(r=i[r]))throw new p.default("IllegalAlign","Illegal alignment specified in %1",t.currentCS);r&&l.default.setProperties(f,{numalign:r,denomalign:r}),t.Push(f)},e.AmsMethods.Genfrac=function(t,e,r,n,o,i){null==r&&(r=t.GetDelimiterArg(e)),null==n&&(n=t.GetDelimiterArg(e)),null==o&&(o=t.GetArgument(e)),null==i&&(i=s.default.trimSpaces(t.GetArgument(e)));var a=t.ParseArg(e),c=t.ParseArg(e),u=t.create("node","mfrac",[a,c]);if(""!==o&&l.default.setAttribute(u,"linethickness",o),(r||n)&&(l.default.setProperty(u,"withDelims",!0),u=s.default.fixedFence(t.configuration,r,u,n)),""!==i){var h=parseInt(i,10),f=["D","T","S","SS"][h];if(null==f)throw new p.default("BadMathStyleFor","Bad math style for %1",t.currentCS);u=t.create("node","mstyle",[u]),"D"===f?l.default.setProperties(u,{displaystyle:!0,scriptlevel:0}):l.default.setProperties(u,{displaystyle:!1,scriptlevel:h-1})}t.Push(u)},e.AmsMethods.HandleTag=function(t,e){if(!t.tags.currentTag.taggable&&t.tags.env)throw new p.default("CommandNotAllowedInEnv","%1 not allowed in %2 environment",t.currentCS,t.tags.env);if(t.tags.currentTag.tag)throw new p.default("MultipleCommand","Multiple %1",t.currentCS);var r=t.GetStar(),n=s.default.trimSpaces(t.GetArgument(e));t.tags.tag(n,r)},e.AmsMethods.HandleNoTag=f.default.HandleNoTag,e.AmsMethods.HandleRef=f.default.HandleRef,e.AmsMethods.Macro=f.default.Macro,e.AmsMethods.Accent=f.default.Accent,e.AmsMethods.Tilde=f.default.Tilde,e.AmsMethods.Array=f.default.Array,e.AmsMethods.Spacer=f.default.Spacer,e.AmsMethods.NamedOp=f.default.NamedOp,e.AmsMethods.EqnArray=f.default.EqnArray,e.AmsMethods.Equation=f.default.Equation},1275:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoloadConfiguration=void 0;var i=r(9899),s=r(9140),a=r(8803),l=r(7741),c=r(265),u=r(7233);function p(t,e,r,i){var s,a,u,p;if(c.Package.packages.has(t.options.require.prefix+r)){var d=t.options.autoload[r],m=n(2===d.length&&Array.isArray(d[0])?d:[d,[]],2),y=m[0],g=m[1];try{for(var b=o(y),v=b.next();!v.done;v=b.next()){var _=v.value;h.remove(_)}}catch(t){s={error:t}}finally{try{v&&!v.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}try{for(var S=o(g),M=S.next();!M.done;M=S.next()){var O=M.value;f.remove(O)}}catch(t){u={error:t}}finally{try{M&&!M.done&&(p=S.return)&&p.call(S)}finally{if(u)throw u.error}}t.string=(i?e+" ":"\\begin{"+e.slice(1)+"}")+t.string.slice(t.i),t.i=0}(0,l.RequireLoad)(t,r)}var h=new s.CommandMap("autoload-macros",{},{}),f=new s.CommandMap("autoload-environments",{},{});e.AutoloadConfiguration=i.Configuration.create("autoload",{handler:{macro:["autoload-macros"],environment:["autoload-environments"]},options:{autoload:(0,u.expandable)({action:["toggle","mathtip","texttip"],amscd:[[],["CD"]],bbox:["bbox"],boldsymbol:["boldsymbol"],braket:["bra","ket","braket","set","Bra","Ket","Braket","Set","ketbra","Ketbra"],bussproofs:[[],["prooftree"]],cancel:["cancel","bcancel","xcancel","cancelto"],color:["color","definecolor","textcolor","colorbox","fcolorbox"],enclose:["enclose"],extpfeil:["xtwoheadrightarrow","xtwoheadleftarrow","xmapsto","xlongequal","xtofrom","Newextarrow"],html:["href","class","style","cssId"],mhchem:["ce","pu"],newcommand:["newcommand","renewcommand","newenvironment","renewenvironment","def","let"],unicode:["unicode"],verb:["verb"]})},config:function(t,e){var r,i,s,c,u,d,m=e.parseOptions,y=m.handlers.get("macro"),g=m.handlers.get("environment"),b=m.options.autoload;m.packageData.set("autoload",{Autoload:p});try{for(var v=o(Object.keys(b)),_=v.next();!_.done;_=v.next()){var S=_.value,M=b[S],O=n(2===M.length&&Array.isArray(M[0])?M:[M,[]],2),x=O[0],E=O[1];try{for(var A=(s=void 0,o(x)),C=A.next();!C.done;C=A.next()){var T=C.value;y.lookup(T)&&"color"!==T||h.add(T,new a.Macro(T,p,[S,!0]))}}catch(t){s={error:t}}finally{try{C&&!C.done&&(c=A.return)&&c.call(A)}finally{if(s)throw s.error}}try{for(var N=(u=void 0,o(E)),w=N.next();!w.done;w=N.next()){var L=w.value;g.lookup(L)||f.add(L,new a.Macro(L,p,[S,!1]))}}catch(t){u={error:t}}finally{try{w&&!w.done&&(d=N.return)&&d.call(N)}finally{if(u)throw u.error}}}}catch(t){r={error:t}}finally{try{_&&!_.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}m.packageData.get("require")||l.RequireConfiguration.config(t,e)},init:function(t){t.options.require||(0,u.defaultOptions)(t.options,l.RequireConfiguration.options)},priority:10})},2942:function(t,e,r){var n,o,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&s(e,t,r);return a(e,t),e},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseConfiguration=e.BaseTags=e.Other=void 0;var p=r(9899),h=r(2947),f=u(r(3971)),d=u(r(1256)),m=r(9140),y=l(r(1181)),g=r(6521);r(1267);var b=r(4082);function v(t,e){var r=t.stack.env.font?{mathvariant:t.stack.env.font}:{},n=h.MapHandler.getMap("remap").lookup(e),o=(0,b.getRange)(e),i=o?o[3]:"mo",s=t.create("token",i,r,n?n.char:e);o[4]&&s.attributes.set("mathvariant",o[4]),"mo"===i&&(d.default.setProperty(s,"fixStretchy",!0),t.configuration.addNode("fixStretchy",s)),t.Push(s)}new m.CharacterMap("remap",null,{"-":"\u2212","*":"\u2217","`":"\u2018"}),e.Other=v;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(g.AbstractTags);e.BaseTags=_,e.BaseConfiguration=p.Configuration.create("base",{handler:{character:["command","special","letter","digit"],delimiter:["delimiter"],macro:["delimiter","macros","mathchar0mi","mathchar0mo","mathchar7"],environment:["environment"]},fallback:{character:v,macro:function(t,e){throw new f.default("UndefinedControlSequence","Undefined control sequence %1","\\"+e)},environment:function(t,e){throw new f.default("UnknownEnv","Unknown environment '%1'",e)}},items:(o={},o[y.StartItem.prototype.kind]=y.StartItem,o[y.StopItem.prototype.kind]=y.StopItem,o[y.OpenItem.prototype.kind]=y.OpenItem,o[y.CloseItem.prototype.kind]=y.CloseItem,o[y.PrimeItem.prototype.kind]=y.PrimeItem,o[y.SubsupItem.prototype.kind]=y.SubsupItem,o[y.OverItem.prototype.kind]=y.OverItem,o[y.LeftItem.prototype.kind]=y.LeftItem,o[y.Middle.prototype.kind]=y.Middle,o[y.RightItem.prototype.kind]=y.RightItem,o[y.BeginItem.prototype.kind]=y.BeginItem,o[y.EndItem.prototype.kind]=y.EndItem,o[y.StyleItem.prototype.kind]=y.StyleItem,o[y.PositionItem.prototype.kind]=y.PositionItem,o[y.CellItem.prototype.kind]=y.CellItem,o[y.MmlItem.prototype.kind]=y.MmlItem,o[y.FnItem.prototype.kind]=y.FnItem,o[y.NotItem.prototype.kind]=y.NotItem,o[y.NonscriptItem.prototype.kind]=y.NonscriptItem,o[y.DotsItem.prototype.kind]=y.DotsItem,o[y.ArrayItem.prototype.kind]=y.ArrayItem,o[y.EqnArrayItem.prototype.kind]=y.EqnArrayItem,o[y.EquationItem.prototype.kind]=y.EquationItem,o),options:{maxMacros:1e3,baseURL:"undefined"==typeof document||0===document.getElementsByTagName("base").length?"":String(document.location).replace(/#.*$/,"")},tags:{base:_},postprocessors:[[function(t){var e,r,n=t.data;try{for(var o=c(n.getList("nonscript")),i=o.next();!i.done;i=o.next()){var s=i.value;if(s.attributes.get("scriptlevel")>0){var a=s.parent;if(a.childNodes.splice(a.childIndex(s),1),n.removeFromList(s.kind,[s]),s.isKind("mrow")){var l=s.childNodes[0];n.removeFromList("mstyle",[l]),n.removeFromList("mspace",l.childNodes[0].childNodes)}}else s.isKind("mrow")&&(s.parent.replaceChild(s.childNodes[0],s),n.removeFromList("mrow",[s]))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},-4]]})},1181:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.EquationItem=e.EqnArrayItem=e.ArrayItem=e.DotsItem=e.NonscriptItem=e.NotItem=e.FnItem=e.MmlItem=e.CellItem=e.PositionItem=e.StyleItem=e.EndItem=e.BeginItem=e.RightItem=e.Middle=e.LeftItem=e.OverItem=e.SubsupItem=e.PrimeItem=e.CloseItem=e.OpenItem=e.StopItem=e.StartItem=void 0;var l=r(2947),c=r(5368),u=r(9007),p=a(r(3971)),h=a(r(1130)),f=a(r(1256)),d=r(8292),m=function(t){function e(e,r){var n=t.call(this,e)||this;return n.global=r,n}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"start"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isKind("stop")){var r=this.toMml();return this.global.isInner||(r=this.factory.configuration.tags.finalize(r,this.env)),[[this.factory.create("mml",r)],!0]}return t.prototype.checkItem.call(this,e)},e}(d.BaseItem);e.StartItem=m;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"stop"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(d.BaseItem);e.StopItem=y;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"open"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isKind("close")){var r=this.toMml(),n=this.create("node","TeXAtom",[r]);return[[this.factory.create("mml",n)],!0]}return t.prototype.checkItem.call(this,e)},e.errors=Object.assign(Object.create(d.BaseItem.errors),{stop:["ExtraOpenMissingClose","Extra open brace or missing close brace"]}),e}(d.BaseItem);e.OpenItem=g;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"close"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(d.BaseItem);e.CloseItem=b;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"prime"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(t){var e=i(this.Peek(2),2),r=e[0],n=e[1];return!f.default.isType(r,"msubsup")||f.default.isType(r,"msup")?[[this.create("node","msup",[r,n]),t],!0]:(f.default.setChild(r,r.sup,n),[[r,t],!0])},e}(d.BaseItem);e.PrimeItem=v;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"subsup"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isKind("open")||e.isKind("left"))return d.BaseItem.success;var r=this.First,n=this.getProperty("position");if(e.isKind("mml")){if(this.getProperty("primes"))if(2!==n)f.default.setChild(r,2,this.getProperty("primes"));else{f.default.setProperty(this.getProperty("primes"),"variantForm",!0);var o=this.create("node","mrow",[this.getProperty("primes"),e.First]);e.First=o}return f.default.setChild(r,n,e.First),null!=this.getProperty("movesupsub")&&f.default.setProperty(r,"movesupsub",this.getProperty("movesupsub")),[[this.factory.create("mml",r)],!0]}if(t.prototype.checkItem.call(this,e)[1]){var a=this.getErrors(["","sub","sup"][n]);throw new(p.default.bind.apply(p.default,s([void 0,a[0],a[1]],i(a.splice(2)),!1)))}return null},e.errors=Object.assign(Object.create(d.BaseItem.errors),{stop:["MissingScript","Missing superscript or subscript argument"],sup:["MissingOpenForSup","Missing open brace for superscript"],sub:["MissingOpenForSub","Missing open brace for subscript"]}),e}(d.BaseItem);e.SubsupItem=_;var S=function(t){function e(e){var r=t.call(this,e)||this;return r.setProperty("name","\\over"),r}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"over"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isKind("over"))throw new p.default("AmbiguousUseOf","Ambiguous use of %1",e.getName());if(e.isClose){var r=this.create("node","mfrac",[this.getProperty("num"),this.toMml(!1)]);return null!=this.getProperty("thickness")&&f.default.setAttribute(r,"linethickness",this.getProperty("thickness")),(this.getProperty("open")||this.getProperty("close"))&&(f.default.setProperty(r,"withDelims",!0),r=h.default.fixedFence(this.factory.configuration,this.getProperty("open"),r,this.getProperty("close"))),[[this.factory.create("mml",r),e],!0]}return t.prototype.checkItem.call(this,e)},e.prototype.toString=function(){return"over["+this.getProperty("num")+" / "+this.nodes.join("; ")+"]"},e}(d.BaseItem);e.OverItem=S;var M=function(t){function e(e,r){var n=t.call(this,e)||this;return n.setProperty("delim",r),n}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"left"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isKind("right"))return[[this.factory.create("mml",h.default.fenced(this.factory.configuration,this.getProperty("delim"),this.toMml(),e.getProperty("delim"),"",e.getProperty("color")))],!0];if(e.isKind("middle")){var r={stretchy:!0};return e.getProperty("color")&&(r.mathcolor=e.getProperty("color")),this.Push(this.create("node","TeXAtom",[],{texClass:u.TEXCLASS.CLOSE}),this.create("token","mo",r,e.getProperty("delim")),this.create("node","TeXAtom",[],{texClass:u.TEXCLASS.OPEN})),this.env={},[[this],!0]}return t.prototype.checkItem.call(this,e)},e.errors=Object.assign(Object.create(d.BaseItem.errors),{stop:["ExtraLeftMissingRight","Extra \\left or missing \\right"]}),e}(d.BaseItem);e.LeftItem=M;var O=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.setProperty("delim",r),n&&o.setProperty("color",n),o}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"middle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(d.BaseItem);e.Middle=O;var x=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.setProperty("delim",r),n&&o.setProperty("color",n),o}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"right"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(d.BaseItem);e.RightItem=x;var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"begin"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isKind("end")){if(e.getName()!==this.getName())throw new p.default("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),e.getName());return this.getProperty("end")?d.BaseItem.fail:[[this.factory.create("mml",this.toMml())],!0]}if(e.isKind("stop"))throw new p.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return t.prototype.checkItem.call(this,e)},e}(d.BaseItem);e.BeginItem=E;var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"end"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(d.BaseItem);e.EndItem=A;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"style"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(!e.isClose)return t.prototype.checkItem.call(this,e);var r=this.create("node","mstyle",this.nodes,this.getProperty("styles"));return[[this.factory.create("mml",r),e],!0]},e}(d.BaseItem);e.StyleItem=C;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"position"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isClose)throw new p.default("MissingBoxFor","Missing box for %1",this.getName());if(e.isFinal){var r=e.toMml();switch(this.getProperty("move")){case"vertical":return r=this.create("node","mpadded",[r],{height:this.getProperty("dh"),depth:this.getProperty("dd"),voffset:this.getProperty("dh")}),[[this.factory.create("mml",r)],!0];case"horizontal":return[[this.factory.create("mml",this.getProperty("left")),e,this.factory.create("mml",this.getProperty("right"))],!0]}}return t.prototype.checkItem.call(this,e)},e}(d.BaseItem);e.PositionItem=T;var N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"cell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(d.BaseItem);e.CellItem=N;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"isFinal",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kind",{get:function(){return"mml"},enumerable:!1,configurable:!0}),e}(d.BaseItem);e.MmlItem=w;var L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"fn"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){var r=this.First;if(r){if(e.isOpen)return d.BaseItem.success;if(!e.isKind("fn")){var n=e.First;if(!e.isKind("mml")||!n)return[[r,e],!0];if(f.default.isType(n,"mstyle")&&n.childNodes.length&&f.default.isType(n.childNodes[0].childNodes[0],"mspace")||f.default.isType(n,"mspace"))return[[r,e],!0];f.default.isEmbellished(n)&&(n=f.default.getCoreMO(n));var o=f.default.getForm(n);if(null!=o&&[0,0,1,1,0,1,1,0,0,0][o[2]])return[[r,e],!0]}var i=this.create("token","mo",{texClass:u.TEXCLASS.NONE},c.entities.ApplyFunction);return[[r,i,e],!0]}return t.prototype.checkItem.apply(this,arguments)},e}(d.BaseItem);e.FnItem=L;var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.remap=l.MapHandler.getMap("not_remap"),e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"not"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(t){var e,r,n;if(t.isKind("open")||t.isKind("left"))return d.BaseItem.success;if(t.isKind("mml")&&(f.default.isType(t.First,"mo")||f.default.isType(t.First,"mi")||f.default.isType(t.First,"mtext"))&&(e=t.First,1===(r=f.default.getText(e)).length&&!f.default.getProperty(e,"movesupsub")&&1===f.default.getChildren(e).length))return this.remap.contains(r)?(n=this.create("text",this.remap.lookup(r).char),f.default.setChild(e,0,n)):(n=this.create("text","\u0338"),f.default.appendChildren(e,[n])),[[t],!0];n=this.create("text","\u29f8");var o=this.create("node","mtext",[],{},n),i=this.create("node","mpadded",[o],{width:0});return[[e=this.create("node","TeXAtom",[i],{texClass:u.TEXCLASS.REL}),t],!0]},e}(d.BaseItem);e.NotItem=I;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"nonscript"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(t){if(t.isKind("mml")&&1===t.Size()){var e=t.First;if(e.isKind("mstyle")&&e.notParent&&(e=f.default.getChildren(f.default.getChildren(e)[0])[0]),e.isKind("mspace")){if(e!==t.First){var r=this.create("node","mrow",[t.Pop()]);t.Push(r)}this.factory.configuration.addNode("nonscript",t.First)}}return[[t],!0]},e}(d.BaseItem);e.NonscriptItem=P;var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"dots"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(t){if(t.isKind("open")||t.isKind("left"))return d.BaseItem.success;var e=this.getProperty("ldots"),r=t.First;if(t.isKind("mml")&&f.default.isEmbellished(r)){var n=f.default.getTexClass(f.default.getCoreMO(r));n!==u.TEXCLASS.BIN&&n!==u.TEXCLASS.REL||(e=this.getProperty("cdots"))}return[[e,t],!0]},e}(d.BaseItem);e.DotsItem=R;var k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.table=[],e.row=[],e.frame=[],e.hfill=[],e.arraydef={},e.dashed=!1,e}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"array"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyEnv",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isClose&&!e.isKind("over")){if(e.getProperty("isEntry"))return this.EndEntry(),this.clearEnv(),d.BaseItem.fail;if(e.getProperty("isCR"))return this.EndEntry(),this.EndRow(),this.clearEnv(),d.BaseItem.fail;this.EndTable(),this.clearEnv();var r=this.factory.create("mml",this.createMml());if(this.getProperty("requireClose")){if(e.isKind("close"))return[[r],!0];throw new p.default("MissingCloseBrace","Missing close brace")}return[[r,e],!0]}return t.prototype.checkItem.call(this,e)},e.prototype.createMml=function(){var t=this.arraydef.scriptlevel;delete this.arraydef.scriptlevel;var e=this.create("node","mtable",this.table,this.arraydef);return t&&e.setProperty("scriptlevel",t),4===this.frame.length?f.default.setAttribute(e,"frame",this.dashed?"dashed":"solid"):this.frame.length&&(this.arraydef.rowlines&&(this.arraydef.rowlines=this.arraydef.rowlines.replace(/none( none)+$/,"none")),f.default.setAttribute(e,"frame",""),e=this.create("node","menclose",[e],{notation:this.frame.join(" ")}),"none"===(this.arraydef.columnlines||"none")&&"none"===(this.arraydef.rowlines||"none")||f.default.setAttribute(e,"data-padding",0)),(this.getProperty("open")||this.getProperty("close"))&&(e=h.default.fenced(this.factory.configuration,this.getProperty("open"),e,this.getProperty("close"))),e},e.prototype.EndEntry=function(){var t=this.create("node","mtd",this.nodes);this.hfill.length&&(0===this.hfill[0]&&f.default.setAttribute(t,"columnalign","right"),this.hfill[this.hfill.length-1]===this.Size()&&f.default.setAttribute(t,"columnalign",f.default.getAttribute(t,"columnalign")?"center":"left")),this.row.push(t),this.Clear(),this.hfill=[]},e.prototype.EndRow=function(){var t;this.getProperty("isNumbered")&&3===this.row.length?(this.row.unshift(this.row.pop()),t=this.create("node","mlabeledtr",this.row)):t=this.create("node","mtr",this.row),this.table.push(t),this.row=[]},e.prototype.EndTable=function(){(this.Size()||this.row.length)&&(this.EndEntry(),this.EndRow()),this.checkLines()},e.prototype.checkLines=function(){if(this.arraydef.rowlines){var t=this.arraydef.rowlines.split(/ /);t.length===this.table.length?(this.frame.push("bottom"),t.pop(),this.arraydef.rowlines=t.join(" ")):t.length<this.table.length-1&&(this.arraydef.rowlines+=" none")}if(this.getProperty("rowspacing")){for(var e=this.arraydef.rowspacing.split(/ /);e.length<this.table.length;)e.push(this.getProperty("rowspacing")+"em");this.arraydef.rowspacing=e.join(" ")}},e.prototype.addRowSpacing=function(t){if(this.arraydef.rowspacing){var e=this.arraydef.rowspacing.split(/ /);if(!this.getProperty("rowspacing")){var r=h.default.dimen2em(e[0]);this.setProperty("rowspacing",r)}for(var n=this.getProperty("rowspacing");e.length<this.table.length;)e.push(h.default.Em(n));e[this.table.length-1]=h.default.Em(Math.max(0,n+h.default.dimen2em(t))),this.arraydef.rowspacing=e.join(" ")}},e}(d.BaseItem);e.ArrayItem=k;var j=function(t){function e(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=t.call(this,e)||this;return o.maxrow=0,o.factory.configuration.tags.start(r[0],r[2],r[1]),o}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"eqnarray"},enumerable:!1,configurable:!0}),e.prototype.EndEntry=function(){this.row.length&&h.default.fixInitialMO(this.factory.configuration,this.nodes);var t=this.create("node","mtd",this.nodes);this.row.push(t),this.Clear()},e.prototype.EndRow=function(){this.row.length>this.maxrow&&(this.maxrow=this.row.length);var t="mtr",e=this.factory.configuration.tags.getTag();e&&(this.row=[e].concat(this.row),t="mlabeledtr"),this.factory.configuration.tags.clearTag();var r=this.create("node",t,this.row);this.table.push(r),this.row=[]},e.prototype.EndTable=function(){t.prototype.EndTable.call(this),this.factory.configuration.tags.end(),this.extendArray("columnalign",this.maxrow),this.extendArray("columnwidth",this.maxrow),this.extendArray("columnspacing",this.maxrow-1)},e.prototype.extendArray=function(t,e){if(this.arraydef[t]){var r=this.arraydef[t].split(/ /),n=s([],i(r),!1);if(n.length>1){for(;n.length<e;)n.push.apply(n,s([],i(r),!1));this.arraydef[t]=n.slice(0,e).join(" ")}}},e}(k);e.EqnArrayItem=j;var B=function(t){function e(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=t.call(this,e)||this;return o.factory.configuration.tags.start("equation",!0,r[0]),o}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"equation"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isKind("end")){var r=this.toMml(),n=this.factory.configuration.tags.getTag();return this.factory.configuration.tags.end(),[[n?this.factory.configuration.tags.enTag(r,n):r,e],!0]}if(e.isKind("stop"))throw new p.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return t.prototype.checkItem.call(this,e)},e}(d.BaseItem);e.EquationItem=B},1267:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(9140)),l=r(8317),c=s(r(7693)),u=s(r(5450)),p=s(r(1130)),h=r(9007),f=r(6010);new a.RegExpMap("letter",u.default.variable,/[a-z]/i),new a.RegExpMap("digit",u.default.digit,/[0-9.,]/),new a.RegExpMap("command",u.default.controlSequence,/^\\/),new a.MacroMap("special",{"{":"Open","}":"Close","~":"Tilde","^":"Superscript",_:"Subscript"," ":"Space","\t":"Space","\r":"Space","\n":"Space","'":"Prime","%":"Comment","&":"Entry","#":"Hash","\xa0":"Space","\u2019":"Prime"},c.default),new a.CharacterMap("mathchar0mi",u.default.mathchar0mi,{alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03f5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03d5",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",varepsilon:"\u03b5",vartheta:"\u03d1",varpi:"\u03d6",varrho:"\u03f1",varsigma:"\u03c2",varphi:"\u03c6",S:["\xa7",{mathvariant:l.TexConstant.Variant.NORMAL}],aleph:["\u2135",{mathvariant:l.TexConstant.Variant.NORMAL}],hbar:["\u210f",{variantForm:!0}],imath:"\u0131",jmath:"\u0237",ell:"\u2113",wp:["\u2118",{mathvariant:l.TexConstant.Variant.NORMAL}],Re:["\u211c",{mathvariant:l.TexConstant.Variant.NORMAL}],Im:["\u2111",{mathvariant:l.TexConstant.Variant.NORMAL}],partial:["\u2202",{mathvariant:l.TexConstant.Variant.ITALIC}],infty:["\u221e",{mathvariant:l.TexConstant.Variant.NORMAL}],prime:["\u2032",{variantForm:!0}],emptyset:["\u2205",{mathvariant:l.TexConstant.Variant.NORMAL}],nabla:["\u2207",{mathvariant:l.TexConstant.Variant.NORMAL}],top:["\u22a4",{mathvariant:l.TexConstant.Variant.NORMAL}],bot:["\u22a5",{mathvariant:l.TexConstant.Variant.NORMAL}],angle:["\u2220",{mathvariant:l.TexConstant.Variant.NORMAL}],triangle:["\u25b3",{mathvariant:l.TexConstant.Variant.NORMAL}],backslash:["\u2216",{mathvariant:l.TexConstant.Variant.NORMAL}],forall:["\u2200",{mathvariant:l.TexConstant.Variant.NORMAL}],exists:["\u2203",{mathvariant:l.TexConstant.Variant.NORMAL}],neg:["\xac",{mathvariant:l.TexConstant.Variant.NORMAL}],lnot:["\xac",{mathvariant:l.TexConstant.Variant.NORMAL}],flat:["\u266d",{mathvariant:l.TexConstant.Variant.NORMAL}],natural:["\u266e",{mathvariant:l.TexConstant.Variant.NORMAL}],sharp:["\u266f",{mathvariant:l.TexConstant.Variant.NORMAL}],clubsuit:["\u2663",{mathvariant:l.TexConstant.Variant.NORMAL}],diamondsuit:["\u2662",{mathvariant:l.TexConstant.Variant.NORMAL}],heartsuit:["\u2661",{mathvariant:l.TexConstant.Variant.NORMAL}],spadesuit:["\u2660",{mathvariant:l.TexConstant.Variant.NORMAL}]}),new a.CharacterMap("mathchar0mo",u.default.mathchar0mo,{surd:"\u221a",coprod:["\u2210",{texClass:h.TEXCLASS.OP,movesupsub:!0}],bigvee:["\u22c1",{texClass:h.TEXCLASS.OP,movesupsub:!0}],bigwedge:["\u22c0",{texClass:h.TEXCLASS.OP,movesupsub:!0}],biguplus:["\u2a04",{texClass:h.TEXCLASS.OP,movesupsub:!0}],bigcap:["\u22c2",{texClass:h.TEXCLASS.OP,movesupsub:!0}],bigcup:["\u22c3",{texClass:h.TEXCLASS.OP,movesupsub:!0}],int:["\u222b",{texClass:h.TEXCLASS.OP}],intop:["\u222b",{texClass:h.TEXCLASS.OP,movesupsub:!0,movablelimits:!0}],iint:["\u222c",{texClass:h.TEXCLASS.OP}],iiint:["\u222d",{texClass:h.TEXCLASS.OP}],prod:["\u220f",{texClass:h.TEXCLASS.OP,movesupsub:!0}],sum:["\u2211",{texClass:h.TEXCLASS.OP,movesupsub:!0}],bigotimes:["\u2a02",{texClass:h.TEXCLASS.OP,movesupsub:!0}],bigoplus:["\u2a01",{texClass:h.TEXCLASS.OP,movesupsub:!0}],bigodot:["\u2a00",{texClass:h.TEXCLASS.OP,movesupsub:!0}],oint:["\u222e",{texClass:h.TEXCLASS.OP}],bigsqcup:["\u2a06",{texClass:h.TEXCLASS.OP,movesupsub:!0}],smallint:["\u222b",{largeop:!1}],triangleleft:"\u25c3",triangleright:"\u25b9",bigtriangleup:"\u25b3",bigtriangledown:"\u25bd",wedge:"\u2227",land:"\u2227",vee:"\u2228",lor:"\u2228",cap:"\u2229",cup:"\u222a",ddagger:"\u2021",dagger:"\u2020",sqcap:"\u2293",sqcup:"\u2294",uplus:"\u228e",amalg:"\u2a3f",diamond:"\u22c4",bullet:"\u2219",wr:"\u2240",div:"\xf7",divsymbol:"\xf7",odot:["\u2299",{largeop:!1}],oslash:["\u2298",{largeop:!1}],otimes:["\u2297",{largeop:!1}],ominus:["\u2296",{largeop:!1}],oplus:["\u2295",{largeop:!1}],mp:"\u2213",pm:"\xb1",circ:"\u2218",bigcirc:"\u25ef",setminus:"\u2216",cdot:"\u22c5",ast:"\u2217",times:"\xd7",star:"\u22c6",propto:"\u221d",sqsubseteq:"\u2291",sqsupseteq:"\u2292",parallel:"\u2225",mid:"\u2223",dashv:"\u22a3",vdash:"\u22a2",leq:"\u2264",le:"\u2264",geq:"\u2265",ge:"\u2265",lt:"<",gt:">",succ:"\u227b",prec:"\u227a",approx:"\u2248",succeq:"\u2ab0",preceq:"\u2aaf",supset:"\u2283",subset:"\u2282",supseteq:"\u2287",subseteq:"\u2286",in:"\u2208",ni:"\u220b",notin:"\u2209",owns:"\u220b",gg:"\u226b",ll:"\u226a",sim:"\u223c",simeq:"\u2243",perp:"\u22a5",equiv:"\u2261",asymp:"\u224d",smile:"\u2323",frown:"\u2322",ne:"\u2260",neq:"\u2260",cong:"\u2245",doteq:"\u2250",bowtie:"\u22c8",models:"\u22a8",notChar:"\u29f8",Leftrightarrow:"\u21d4",Leftarrow:"\u21d0",Rightarrow:"\u21d2",leftrightarrow:"\u2194",leftarrow:"\u2190",gets:"\u2190",rightarrow:"\u2192",to:["\u2192",{accent:!1}],mapsto:"\u21a6",leftharpoonup:"\u21bc",leftharpoondown:"\u21bd",rightharpoonup:"\u21c0",rightharpoondown:"\u21c1",nearrow:"\u2197",searrow:"\u2198",nwarrow:"\u2196",swarrow:"\u2199",rightleftharpoons:"\u21cc",hookrightarrow:"\u21aa",hookleftarrow:"\u21a9",longleftarrow:"\u27f5",Longleftarrow:"\u27f8",longrightarrow:"\u27f6",Longrightarrow:"\u27f9",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",ldots:"\u2026",cdots:"\u22ef",vdots:"\u22ee",ddots:"\u22f1",dotsc:"\u2026",dotsb:"\u22ef",dotsm:"\u22ef",dotsi:"\u22ef",dotso:"\u2026",ldotp:[".",{texClass:h.TEXCLASS.PUNCT}],cdotp:["\u22c5",{texClass:h.TEXCLASS.PUNCT}],colon:[":",{texClass:h.TEXCLASS.PUNCT}]}),new a.CharacterMap("mathchar7",u.default.mathchar7,{Gamma:"\u0393",Delta:"\u0394",Theta:"\u0398",Lambda:"\u039b",Xi:"\u039e",Pi:"\u03a0",Sigma:"\u03a3",Upsilon:"\u03a5",Phi:"\u03a6",Psi:"\u03a8",Omega:"\u03a9",_:"_","#":"#",$:"$","%":"%","&":"&",And:"&"}),new a.DelimiterMap("delimiter",u.default.delimiter,{"(":"(",")":")","[":"[","]":"]","<":"\u27e8",">":"\u27e9","\\lt":"\u27e8","\\gt":"\u27e9","/":"/","|":["|",{texClass:h.TEXCLASS.ORD}],".":"","\\\\":"\\","\\lmoustache":"\u23b0","\\rmoustache":"\u23b1","\\lgroup":"\u27ee","\\rgroup":"\u27ef","\\arrowvert":"\u23d0","\\Arrowvert":"\u2016","\\bracevert":"\u23aa","\\Vert":["\u2016",{texClass:h.TEXCLASS.ORD}],"\\|":["\u2016",{texClass:h.TEXCLASS.ORD}],"\\vert":["|",{texClass:h.TEXCLASS.ORD}],"\\uparrow":"\u2191","\\downarrow":"\u2193","\\updownarrow":"\u2195","\\Uparrow":"\u21d1","\\Downarrow":"\u21d3","\\Updownarrow":"\u21d5","\\backslash":"\\","\\rangle":"\u27e9","\\langle":"\u27e8","\\rbrace":"}","\\lbrace":"{","\\}":"}","\\{":"{","\\rceil":"\u2309","\\lceil":"\u2308","\\rfloor":"\u230b","\\lfloor":"\u230a","\\lbrack":"[","\\rbrack":"]"}),new a.CommandMap("macros",{displaystyle:["SetStyle","D",!0,0],textstyle:["SetStyle","T",!1,0],scriptstyle:["SetStyle","S",!1,1],scriptscriptstyle:["SetStyle","SS",!1,2],rm:["SetFont",l.TexConstant.Variant.NORMAL],mit:["SetFont",l.TexConstant.Variant.ITALIC],oldstyle:["SetFont",l.TexConstant.Variant.OLDSTYLE],cal:["SetFont",l.TexConstant.Variant.CALLIGRAPHIC],it:["SetFont",l.TexConstant.Variant.MATHITALIC],bf:["SetFont",l.TexConstant.Variant.BOLD],bbFont:["SetFont",l.TexConstant.Variant.DOUBLESTRUCK],scr:["SetFont",l.TexConstant.Variant.SCRIPT],frak:["SetFont",l.TexConstant.Variant.FRAKTUR],sf:["SetFont",l.TexConstant.Variant.SANSSERIF],tt:["SetFont",l.TexConstant.Variant.MONOSPACE],mathrm:["MathFont",l.TexConstant.Variant.NORMAL],mathup:["MathFont",l.TexConstant.Variant.NORMAL],mathnormal:["MathFont",""],mathbf:["MathFont",l.TexConstant.Variant.BOLD],mathbfup:["MathFont",l.TexConstant.Variant.BOLD],mathit:["MathFont",l.TexConstant.Variant.MATHITALIC],mathbfit:["MathFont",l.TexConstant.Variant.BOLDITALIC],mathbb:["MathFont",l.TexConstant.Variant.DOUBLESTRUCK],Bbb:["MathFont",l.TexConstant.Variant.DOUBLESTRUCK],mathfrak:["MathFont",l.TexConstant.Variant.FRAKTUR],mathbffrak:["MathFont",l.TexConstant.Variant.BOLDFRAKTUR],mathscr:["MathFont",l.TexConstant.Variant.SCRIPT],mathbfscr:["MathFont",l.TexConstant.Variant.BOLDSCRIPT],mathsf:["MathFont",l.TexConstant.Variant.SANSSERIF],mathsfup:["MathFont",l.TexConstant.Variant.SANSSERIF],mathbfsf:["MathFont",l.TexConstant.Variant.BOLDSANSSERIF],mathbfsfup:["MathFont",l.TexConstant.Variant.BOLDSANSSERIF],mathsfit:["MathFont",l.TexConstant.Variant.SANSSERIFITALIC],mathbfsfit:["MathFont",l.TexConstant.Variant.SANSSERIFBOLDITALIC],mathtt:["MathFont",l.TexConstant.Variant.MONOSPACE],mathcal:["MathFont",l.TexConstant.Variant.CALLIGRAPHIC],mathbfcal:["MathFont",l.TexConstant.Variant.BOLDCALLIGRAPHIC],symrm:["MathFont",l.TexConstant.Variant.NORMAL],symup:["MathFont",l.TexConstant.Variant.NORMAL],symnormal:["MathFont",""],symbf:["MathFont",l.TexConstant.Variant.BOLD],symbfup:["MathFont",l.TexConstant.Variant.BOLD],symit:["MathFont",l.TexConstant.Variant.ITALIC],symbfit:["MathFont",l.TexConstant.Variant.BOLDITALIC],symbb:["MathFont",l.TexConstant.Variant.DOUBLESTRUCK],symfrak:["MathFont",l.TexConstant.Variant.FRAKTUR],symbffrak:["MathFont",l.TexConstant.Variant.BOLDFRAKTUR],symscr:["MathFont",l.TexConstant.Variant.SCRIPT],symbfscr:["MathFont",l.TexConstant.Variant.BOLDSCRIPT],symsf:["MathFont",l.TexConstant.Variant.SANSSERIF],symsfup:["MathFont",l.TexConstant.Variant.SANSSERIF],symbfsf:["MathFont",l.TexConstant.Variant.BOLDSANSSERIF],symbfsfup:["MathFont",l.TexConstant.Variant.BOLDSANSSERIF],symsfit:["MathFont",l.TexConstant.Variant.SANSSERIFITALIC],symbfsfit:["MathFont",l.TexConstant.Variant.SANSSERIFBOLDITALIC],symtt:["MathFont",l.TexConstant.Variant.MONOSPACE],symcal:["MathFont",l.TexConstant.Variant.CALLIGRAPHIC],symbfcal:["MathFont",l.TexConstant.Variant.BOLDCALLIGRAPHIC],textrm:["HBox",null,l.TexConstant.Variant.NORMAL],textup:["HBox",null,l.TexConstant.Variant.NORMAL],textnormal:["HBox"],textit:["HBox",null,l.TexConstant.Variant.ITALIC],textbf:["HBox",null,l.TexConstant.Variant.BOLD],textsf:["HBox",null,l.TexConstant.Variant.SANSSERIF],texttt:["HBox",null,l.TexConstant.Variant.MONOSPACE],tiny:["SetSize",.5],Tiny:["SetSize",.6],scriptsize:["SetSize",.7],small:["SetSize",.85],normalsize:["SetSize",1],large:["SetSize",1.2],Large:["SetSize",1.44],LARGE:["SetSize",1.73],huge:["SetSize",2.07],Huge:["SetSize",2.49],arcsin:"NamedFn",arccos:"NamedFn",arctan:"NamedFn",arg:"NamedFn",cos:"NamedFn",cosh:"NamedFn",cot:"NamedFn",coth:"NamedFn",csc:"NamedFn",deg:"NamedFn",det:"NamedOp",dim:"NamedFn",exp:"NamedFn",gcd:"NamedOp",hom:"NamedFn",inf:"NamedOp",ker:"NamedFn",lg:"NamedFn",lim:"NamedOp",liminf:["NamedOp","lim&thinsp;inf"],limsup:["NamedOp","lim&thinsp;sup"],ln:"NamedFn",log:"NamedFn",max:"NamedOp",min:"NamedOp",Pr:"NamedOp",sec:"NamedFn",sin:"NamedFn",sinh:"NamedFn",sup:"NamedOp",tan:"NamedFn",tanh:"NamedFn",limits:["Limits",1],nolimits:["Limits",0],overline:["UnderOver","2015"],underline:["UnderOver","2015"],overbrace:["UnderOver","23DE",1],underbrace:["UnderOver","23DF",1],overparen:["UnderOver","23DC"],underparen:["UnderOver","23DD"],overrightarrow:["UnderOver","2192"],underrightarrow:["UnderOver","2192"],overleftarrow:["UnderOver","2190"],underleftarrow:["UnderOver","2190"],overleftrightarrow:["UnderOver","2194"],underleftrightarrow:["UnderOver","2194"],overset:"Overset",underset:"Underset",overunderset:"Overunderset",stackrel:["Macro","\\mathrel{\\mathop{#2}\\limits^{#1}}",2],stackbin:["Macro","\\mathbin{\\mathop{#2}\\limits^{#1}}",2],over:"Over",overwithdelims:"Over",atop:"Over",atopwithdelims:"Over",above:"Over",abovewithdelims:"Over",brace:["Over","{","}"],brack:["Over","[","]"],choose:["Over","(",")"],frac:"Frac",sqrt:"Sqrt",root:"Root",uproot:["MoveRoot","upRoot"],leftroot:["MoveRoot","leftRoot"],left:"LeftRight",right:"LeftRight",middle:"LeftRight",llap:"Lap",rlap:"Lap",raise:"RaiseLower",lower:"RaiseLower",moveleft:"MoveLeftRight",moveright:"MoveLeftRight",",":["Spacer",f.MATHSPACE.thinmathspace],":":["Spacer",f.MATHSPACE.mediummathspace],">":["Spacer",f.MATHSPACE.mediummathspace],";":["Spacer",f.MATHSPACE.thickmathspace],"!":["Spacer",f.MATHSPACE.negativethinmathspace],enspace:["Spacer",.5],quad:["Spacer",1],qquad:["Spacer",2],thinspace:["Spacer",f.MATHSPACE.thinmathspace],negthinspace:["Spacer",f.MATHSPACE.negativethinmathspace],hskip:"Hskip",hspace:"Hskip",kern:"Hskip",mskip:"Hskip",mspace:"Hskip",mkern:"Hskip",rule:"rule",Rule:["Rule"],Space:["Rule","blank"],nonscript:"Nonscript",big:["MakeBig",h.TEXCLASS.ORD,.85],Big:["MakeBig",h.TEXCLASS.ORD,1.15],bigg:["MakeBig",h.TEXCLASS.ORD,1.45],Bigg:["MakeBig",h.TEXCLASS.ORD,1.75],bigl:["MakeBig",h.TEXCLASS.OPEN,.85],Bigl:["MakeBig",h.TEXCLASS.OPEN,1.15],biggl:["MakeBig",h.TEXCLASS.OPEN,1.45],Biggl:["MakeBig",h.TEXCLASS.OPEN,1.75],bigr:["MakeBig",h.TEXCLASS.CLOSE,.85],Bigr:["MakeBig",h.TEXCLASS.CLOSE,1.15],biggr:["MakeBig",h.TEXCLASS.CLOSE,1.45],Biggr:["MakeBig",h.TEXCLASS.CLOSE,1.75],bigm:["MakeBig",h.TEXCLASS.REL,.85],Bigm:["MakeBig",h.TEXCLASS.REL,1.15],biggm:["MakeBig",h.TEXCLASS.REL,1.45],Biggm:["MakeBig",h.TEXCLASS.REL,1.75],mathord:["TeXAtom",h.TEXCLASS.ORD],mathop:["TeXAtom",h.TEXCLASS.OP],mathopen:["TeXAtom",h.TEXCLASS.OPEN],mathclose:["TeXAtom",h.TEXCLASS.CLOSE],mathbin:["TeXAtom",h.TEXCLASS.BIN],mathrel:["TeXAtom",h.TEXCLASS.REL],mathpunct:["TeXAtom",h.TEXCLASS.PUNCT],mathinner:["TeXAtom",h.TEXCLASS.INNER],vcenter:["TeXAtom",h.TEXCLASS.VCENTER],buildrel:"BuildRel",hbox:["HBox",0],text:"HBox",mbox:["HBox",0],fbox:"FBox",boxed:["Macro","\\fbox{$\\displaystyle{#1}$}",1],framebox:"FrameBox",strut:"Strut",mathstrut:["Macro","\\vphantom{(}"],phantom:"Phantom",vphantom:["Phantom",1,0],hphantom:["Phantom",0,1],smash:"Smash",acute:["Accent","00B4"],grave:["Accent","0060"],ddot:["Accent","00A8"],tilde:["Accent","007E"],bar:["Accent","00AF"],breve:["Accent","02D8"],check:["Accent","02C7"],hat:["Accent","005E"],vec:["Accent","2192"],dot:["Accent","02D9"],widetilde:["Accent","007E",1],widehat:["Accent","005E",1],matrix:"Matrix",array:"Matrix",pmatrix:["Matrix","(",")"],cases:["Matrix","{","","left left",null,".1em",null,!0],eqalign:["Matrix",null,null,"right left",(0,f.em)(f.MATHSPACE.thickmathspace),".5em","D"],displaylines:["Matrix",null,null,"center",null,".5em","D"],cr:"Cr","\\":"CrLaTeX",newline:["CrLaTeX",!0],hline:["HLine","solid"],hdashline:["HLine","dashed"],eqalignno:["Matrix",null,null,"right left",(0,f.em)(f.MATHSPACE.thickmathspace),".5em","D",null,"right"],leqalignno:["Matrix",null,null,"right left",(0,f.em)(f.MATHSPACE.thickmathspace),".5em","D",null,"left"],hfill:"HFill",hfil:"HFill",hfilll:"HFill",bmod:["Macro",'\\mmlToken{mo}[lspace="thickmathspace" rspace="thickmathspace"]{mod}'],pmod:["Macro","\\pod{\\mmlToken{mi}{mod}\\kern 6mu #1}",1],mod:["Macro","\\mathchoice{\\kern18mu}{\\kern12mu}{\\kern12mu}{\\kern12mu}\\mmlToken{mi}{mod}\\,\\,#1",1],pod:["Macro","\\mathchoice{\\kern18mu}{\\kern8mu}{\\kern8mu}{\\kern8mu}(#1)",1],iff:["Macro","\\;\\Longleftrightarrow\\;"],skew:["Macro","{{#2{#3\\mkern#1mu}\\mkern-#1mu}{}}",3],pmb:["Macro","\\rlap{#1}\\kern1px{#1}",1],TeX:["Macro","T\\kern-.14em\\lower.5ex{E}\\kern-.115em X"],LaTeX:["Macro","L\\kern-.325em\\raise.21em{\\scriptstyle{A}}\\kern-.17em\\TeX"]," ":["Macro","\\text{ }"],not:"Not",dots:"Dots",space:"Tilde","\xa0":"Tilde",begin:"BeginEnd",end:"BeginEnd",label:"HandleLabel",ref:"HandleRef",nonumber:"HandleNoTag",mathchoice:"MathChoice",mmlToken:"MmlToken"},c.default),new a.EnvironmentMap("environment",u.default.environment,{array:["AlignedArray"],equation:["Equation",null,!0],eqnarray:["EqnArray",null,!0,!0,"rcl",p.default.cols(0,f.MATHSPACE.thickmathspace),".5em"]},c.default),new a.CharacterMap("not_remap",null,{"\u2190":"\u219a","\u2192":"\u219b","\u2194":"\u21ae","\u21d0":"\u21cd","\u21d2":"\u21cf","\u21d4":"\u21ce","\u2208":"\u2209","\u220b":"\u220c","\u2223":"\u2224","\u2225":"\u2226","\u223c":"\u2241","~":"\u2241","\u2243":"\u2244","\u2245":"\u2247","\u2248":"\u2249","\u224d":"\u226d","=":"\u2260","\u2261":"\u2262","<":"\u226e",">":"\u226f","\u2264":"\u2270","\u2265":"\u2271","\u2272":"\u2274","\u2273":"\u2275","\u2276":"\u2278","\u2277":"\u2279","\u227a":"\u2280","\u227b":"\u2281","\u2282":"\u2284","\u2283":"\u2285","\u2286":"\u2288","\u2287":"\u2289","\u22a2":"\u22ac","\u22a8":"\u22ad","\u22a9":"\u22ae","\u22ab":"\u22af","\u227c":"\u22e0","\u227d":"\u22e1","\u2291":"\u22e2","\u2292":"\u22e3","\u22b2":"\u22ea","\u22b3":"\u22eb","\u22b4":"\u22ec","\u22b5":"\u22ed","\u2203":"\u2204"})},7693:function(t,e,r){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&o(e,t,r);return i(e,t),e},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=s(r(1181)),u=l(r(1256)),p=l(r(3971)),h=l(r(8417)),f=r(8317),d=l(r(1130)),m=r(9007),y=r(6521),g=r(6010),b=r(5368),v=r(7233),_={},S={fontfamily:1,fontsize:1,fontweight:1,fontstyle:1,color:1,background:1,id:1,class:1,href:1,style:1};function M(t,e){var r=t.stack.env,n=r.inRoot;r.inRoot=!0;var o=new h.default(e,r,t.configuration),i=o.mml(),s=o.stack.global;if(s.leftRoot||s.upRoot){var a={};s.leftRoot&&(a.width=s.leftRoot),s.upRoot&&(a.voffset=s.upRoot,a.height=s.upRoot),i=t.create("node","mpadded",[i],a)}return r.inRoot=n,i}_.Open=function(t,e){t.Push(t.itemFactory.create("open"))},_.Close=function(t,e){t.Push(t.itemFactory.create("close"))},_.Tilde=function(t,e){t.Push(t.create("token","mtext",{},b.entities.nbsp))},_.Space=function(t,e){},_.Superscript=function(t,e){var r,n,o;t.GetNext().match(/\d/)&&(t.string=t.string.substr(0,t.i+1)+" "+t.string.substr(t.i+1));var i=t.stack.Top();i.isKind("prime")?(o=(r=a(i.Peek(2),2))[0],n=r[1],t.stack.Pop()):(o=t.stack.Prev())||(o=t.create("token","mi",{},""));var s=u.default.getProperty(o,"movesupsub"),l=u.default.isType(o,"msubsup")?o.sup:o.over;if(u.default.isType(o,"msubsup")&&!u.default.isType(o,"msup")&&u.default.getChildAt(o,o.sup)||u.default.isType(o,"munderover")&&!u.default.isType(o,"mover")&&u.default.getChildAt(o,o.over)&&!u.default.getProperty(o,"subsupOK"))throw new p.default("DoubleExponent","Double exponent: use braces to clarify");u.default.isType(o,"msubsup")&&!u.default.isType(o,"msup")||(s?((!u.default.isType(o,"munderover")||u.default.isType(o,"mover")||u.default.getChildAt(o,o.over))&&(o=t.create("node","munderover",[o],{movesupsub:!0})),l=o.over):l=(o=t.create("node","msubsup",[o])).sup),t.Push(t.itemFactory.create("subsup",o).setProperties({position:l,primes:n,movesupsub:s}))},_.Subscript=function(t,e){var r,n,o;t.GetNext().match(/\d/)&&(t.string=t.string.substr(0,t.i+1)+" "+t.string.substr(t.i+1));var i=t.stack.Top();i.isKind("prime")?(o=(r=a(i.Peek(2),2))[0],n=r[1],t.stack.Pop()):(o=t.stack.Prev())||(o=t.create("token","mi",{},""));var s=u.default.getProperty(o,"movesupsub"),l=u.default.isType(o,"msubsup")?o.sub:o.under;if(u.default.isType(o,"msubsup")&&!u.default.isType(o,"msup")&&u.default.getChildAt(o,o.sub)||u.default.isType(o,"munderover")&&!u.default.isType(o,"mover")&&u.default.getChildAt(o,o.under)&&!u.default.getProperty(o,"subsupOK"))throw new p.default("DoubleSubscripts","Double subscripts: use braces to clarify");u.default.isType(o,"msubsup")&&!u.default.isType(o,"msup")||(s?((!u.default.isType(o,"munderover")||u.default.isType(o,"mover")||u.default.getChildAt(o,o.under))&&(o=t.create("node","munderover",[o],{movesupsub:!0})),l=o.under):l=(o=t.create("node","msubsup",[o])).sub),t.Push(t.itemFactory.create("subsup",o).setProperties({position:l,primes:n,movesupsub:s}))},_.Prime=function(t,e){var r=t.stack.Prev();if(r||(r=t.create("node","mi")),u.default.isType(r,"msubsup")&&!u.default.isType(r,"msup")&&u.default.getChildAt(r,r.sup))throw new p.default("DoubleExponentPrime","Prime causes double exponent: use braces to clarify");var n="";t.i--;do{n+=b.entities.prime,t.i++,e=t.GetNext()}while("'"===e||e===b.entities.rsquo);n=["","\u2032","\u2033","\u2034","\u2057"][n.length]||n;var o=t.create("token","mo",{variantForm:!0},n);t.Push(t.itemFactory.create("prime",r,o))},_.Comment=function(t,e){for(;t.i<t.string.length&&"\n"!==t.string.charAt(t.i);)t.i++},_.Hash=function(t,e){throw new p.default("CantUseHash1","You can't use 'macro parameter character #' in math mode")},_.MathFont=function(t,e,r){var o=t.GetArgument(e),i=new h.default(o,n(n({},t.stack.env),{font:r,multiLetterIdentifiers:/^[a-zA-Z]+/,noAutoOP:!0}),t.configuration).mml();t.Push(t.create("node","TeXAtom",[i]))},_.SetFont=function(t,e,r){t.stack.env.font=r},_.SetStyle=function(t,e,r,n,o){t.stack.env.style=r,t.stack.env.level=o,t.Push(t.itemFactory.create("style").setProperty("styles",{displaystyle:n,scriptlevel:o}))},_.SetSize=function(t,e,r){t.stack.env.size=r,t.Push(t.itemFactory.create("style").setProperty("styles",{mathsize:(0,g.em)(r)}))},_.Spacer=function(t,e,r){var n=t.create("node","mspace",[],{width:(0,g.em)(r)}),o=t.create("node","mstyle",[n],{scriptlevel:0});t.Push(o)},_.LeftRight=function(t,e){var r=e.substr(1);t.Push(t.itemFactory.create(r,t.GetDelimiter(e),t.stack.env.color))},_.NamedFn=function(t,e,r){r||(r=e.substr(1));var n=t.create("token","mi",{texClass:m.TEXCLASS.OP},r);t.Push(t.itemFactory.create("fn",n))},_.NamedOp=function(t,e,r){r||(r=e.substr(1)),r=r.replace(/&thinsp;/,"\u2006");var n=t.create("token","mo",{movablelimits:!0,movesupsub:!0,form:f.TexConstant.Form.PREFIX,texClass:m.TEXCLASS.OP},r);t.Push(n)},_.Limits=function(t,e,r){var n=t.stack.Prev(!0);if(!n||u.default.getTexClass(u.default.getCoreMO(n))!==m.TEXCLASS.OP&&null==u.default.getProperty(n,"movesupsub"))throw new p.default("MisplacedLimits","%1 is allowed only on operators",t.currentCS);var o,i=t.stack.Top();u.default.isType(n,"munderover")&&!r?(o=t.create("node","msubsup"),u.default.copyChildren(n,o),n=i.Last=o):u.default.isType(n,"msubsup")&&r&&(o=t.create("node","munderover"),u.default.copyChildren(n,o),n=i.Last=o),u.default.setProperty(n,"movesupsub",!!r),u.default.setProperties(u.default.getCoreMO(n),{movablelimits:!1}),(u.default.getAttribute(n,"movablelimits")||u.default.getProperty(n,"movablelimits"))&&u.default.setProperties(n,{movablelimits:!1})},_.Over=function(t,e,r,n){var o=t.itemFactory.create("over").setProperty("name",t.currentCS);r||n?(o.setProperty("open",r),o.setProperty("close",n)):e.match(/withdelims$/)&&(o.setProperty("open",t.GetDelimiter(e)),o.setProperty("close",t.GetDelimiter(e))),e.match(/^\\above/)?o.setProperty("thickness",t.GetDimen(e)):(e.match(/^\\atop/)||r||n)&&o.setProperty("thickness",0),t.Push(o)},_.Frac=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e),o=t.create("node","mfrac",[r,n]);t.Push(o)},_.Sqrt=function(t,e){var r=t.GetBrackets(e),n=t.GetArgument(e);"\\frac"===n&&(n+="{"+t.GetArgument(n)+"}{"+t.GetArgument(n)+"}");var o=new h.default(n,t.stack.env,t.configuration).mml();o=r?t.create("node","mroot",[o,M(t,r)]):t.create("node","msqrt",[o]),t.Push(o)},_.Root=function(t,e){var r=t.GetUpTo(e,"\\of"),n=t.ParseArg(e),o=t.create("node","mroot",[n,M(t,r)]);t.Push(o)},_.MoveRoot=function(t,e,r){if(!t.stack.env.inRoot)throw new p.default("MisplacedMoveRoot","%1 can appear only within a root",t.currentCS);if(t.stack.global[r])throw new p.default("MultipleMoveRoot","Multiple use of %1",t.currentCS);var n=t.GetArgument(e);if(!n.match(/-?[0-9]+/))throw new p.default("IntegerArg","The argument to %1 must be an integer",t.currentCS);"-"!==(n=parseInt(n,10)/15+"em").substr(0,1)&&(n="+"+n),t.stack.global[r]=n},_.Accent=function(t,e,r,o){var i=t.ParseArg(e),s=n(n({},d.default.getFontDef(t)),{accent:!0,mathaccent:!0}),a=u.default.createEntity(r),l=t.create("token","mo",s,a);u.default.setAttribute(l,"stretchy",!!o);var c=u.default.isEmbellished(i)?u.default.getCoreMO(i):i;(u.default.isType(c,"mo")||u.default.getProperty(c,"movablelimits"))&&u.default.setProperties(c,{movablelimits:!1});var p=t.create("node","munderover");u.default.setChild(p,0,i),u.default.setChild(p,1,null),u.default.setChild(p,2,l);var h=t.create("node","TeXAtom",[p]);t.Push(h)},_.UnderOver=function(t,e,r,n){var o=u.default.createEntity(r),i=t.create("token","mo",{stretchy:!0,accent:!0},o),s="o"===e.charAt(1)?"over":"under",a=t.ParseArg(e);t.Push(d.default.underOver(t,a,i,s,n))},_.Overset=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e);d.default.checkMovableLimits(n),r.isKind("mo")&&u.default.setAttribute(r,"accent",!1);var o=t.create("node","mover",[n,r]);t.Push(o)},_.Underset=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e);d.default.checkMovableLimits(n),r.isKind("mo")&&u.default.setAttribute(r,"accent",!1);var o=t.create("node","munder",[n,r],{accentunder:!1});t.Push(o)},_.Overunderset=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e),o=t.ParseArg(e);d.default.checkMovableLimits(o),r.isKind("mo")&&u.default.setAttribute(r,"accent",!1),n.isKind("mo")&&u.default.setAttribute(n,"accent",!1);var i=t.create("node","munderover",[o,n,r],{accent:!1,accentunder:!1});t.Push(i)},_.TeXAtom=function(t,e,r){var n,o,i,s={texClass:r};if(r===m.TEXCLASS.OP){s.movesupsub=s.movablelimits=!0;var a=t.GetArgument(e),l=a.match(/^\s*\\rm\s+([a-zA-Z0-9 ]+)$/);l?(s.mathvariant=f.TexConstant.Variant.NORMAL,o=t.create("token","mi",s,l[1])):(i=new h.default(a,t.stack.env,t.configuration).mml(),o=t.create("node","TeXAtom",[i],s)),n=t.itemFactory.create("fn",o)}else i=t.ParseArg(e),n=t.create("node","TeXAtom",[i],s);t.Push(n)},_.MmlToken=function(t,e){var r,n=t.GetArgument(e),o=t.GetBrackets(e,"").replace(/^\s+/,""),i=t.GetArgument(e),s={},a=[];try{r=t.create("node",n)}catch(t){r=null}if(!r||!r.isToken)throw new p.default("NotMathMLToken","%1 is not a token element",n);for(;""!==o;){var l=o.match(/^([a-z]+)\s*=\s*('[^']*'|"[^"]*"|[^ ,]*)\s*,?\s*/i);if(!l)throw new p.default("InvalidMathMLAttr","Invalid MathML attribute: %1",o);if(!r.attributes.hasDefault(l[1])&&!S[l[1]])throw new p.default("UnknownAttrForElement","%1 is not a recognized attribute for %2",l[1],n);var c=d.default.MmlFilterAttribute(t,l[1],l[2].replace(/^(['"])(.*)\1$/,"$2"));c&&("true"===c.toLowerCase()?c=!0:"false"===c.toLowerCase()&&(c=!1),s[l[1]]=c,a.push(l[1])),o=o.substr(l[0].length)}a.length&&(s["mjx-keep-attrs"]=a.join(" "));var h=t.create("text",i);r.appendChild(h),u.default.setProperties(r,s),t.Push(r)},_.Strut=function(t,e){var r=t.create("node","mrow"),n=t.create("node","mpadded",[r],{height:"8.6pt",depth:"3pt",width:0});t.Push(n)},_.Phantom=function(t,e,r,n){var o=t.create("node","mphantom",[t.ParseArg(e)]);(r||n)&&(o=t.create("node","mpadded",[o]),n&&(u.default.setAttribute(o,"height",0),u.default.setAttribute(o,"depth",0)),r&&u.default.setAttribute(o,"width",0));var i=t.create("node","TeXAtom",[o]);t.Push(i)},_.Smash=function(t,e){var r=d.default.trimSpaces(t.GetBrackets(e,"")),n=t.create("node","mpadded",[t.ParseArg(e)]);switch(r){case"b":u.default.setAttribute(n,"depth",0);break;case"t":u.default.setAttribute(n,"height",0);break;default:u.default.setAttribute(n,"height",0),u.default.setAttribute(n,"depth",0)}var o=t.create("node","TeXAtom",[n]);t.Push(o)},_.Lap=function(t,e){var r=t.create("node","mpadded",[t.ParseArg(e)],{width:0});"\\llap"===e&&u.default.setAttribute(r,"lspace","-1width");var n=t.create("node","TeXAtom",[r]);t.Push(n)},_.RaiseLower=function(t,e){var r=t.GetDimen(e),n=t.itemFactory.create("position").setProperties({name:t.currentCS,move:"vertical"});"-"===r.charAt(0)&&(r=r.slice(1),e="raise"===e.substr(1)?"\\lower":"\\raise"),"\\lower"===e?(n.setProperty("dh","-"+r),n.setProperty("dd","+"+r)):(n.setProperty("dh","+"+r),n.setProperty("dd","-"+r)),t.Push(n)},_.MoveLeftRight=function(t,e){var r=t.GetDimen(e),n="-"===r.charAt(0)?r.slice(1):"-"+r;if("\\moveleft"===e){var o=r;r=n,n=o}t.Push(t.itemFactory.create("position").setProperties({name:t.currentCS,move:"horizontal",left:t.create("node","mspace",[],{width:r}),right:t.create("node","mspace",[],{width:n})}))},_.Hskip=function(t,e){var r=t.create("node","mspace",[],{width:t.GetDimen(e)});t.Push(r)},_.Nonscript=function(t,e){t.Push(t.itemFactory.create("nonscript"))},_.Rule=function(t,e,r){var n={width:t.GetDimen(e),height:t.GetDimen(e),depth:t.GetDimen(e)};"blank"!==r&&(n.mathbackground=t.stack.env.color||"black");var o=t.create("node","mspace",[],n);t.Push(o)},_.rule=function(t,e){var r=t.GetBrackets(e),n=t.GetDimen(e),o=t.GetDimen(e),i=t.create("node","mspace",[],{width:n,height:o,mathbackground:t.stack.env.color||"black"});r&&(i=t.create("node","mpadded",[i],{voffset:r}),r.match(/^\-/)?(u.default.setAttribute(i,"height",r),u.default.setAttribute(i,"depth","+"+r.substr(1))):u.default.setAttribute(i,"height","+"+r)),t.Push(i)},_.MakeBig=function(t,e,r,n){var o=String(n*=1.411764705882353).replace(/(\.\d\d\d).+/,"$1")+"em",i=t.GetDelimiter(e,!0),s=t.create("token","mo",{minsize:o,maxsize:o,fence:!0,stretchy:!0,symmetric:!0},i),a=t.create("node","TeXAtom",[s],{texClass:r});t.Push(a)},_.BuildRel=function(t,e){var r=t.ParseUpTo(e,"\\over"),n=t.ParseArg(e),o=t.create("node","munderover");u.default.setChild(o,0,n),u.default.setChild(o,1,null),u.default.setChild(o,2,r);var i=t.create("node","TeXAtom",[o],{texClass:m.TEXCLASS.REL});t.Push(i)},_.HBox=function(t,e,r,n){t.PushAll(d.default.internalMath(t,t.GetArgument(e),r,n))},_.FBox=function(t,e){var r=d.default.internalMath(t,t.GetArgument(e)),n=t.create("node","menclose",r,{notation:"box"});t.Push(n)},_.FrameBox=function(t,e){var r=t.GetBrackets(e),n=t.GetBrackets(e)||"c",o=d.default.internalMath(t,t.GetArgument(e));r&&(o=[t.create("node","mpadded",o,{width:r,"data-align":(0,v.lookup)(n,{l:"left",r:"right"},"center")})]);var i=t.create("node","TeXAtom",[t.create("node","menclose",o,{notation:"box"})],{texClass:m.TEXCLASS.ORD});t.Push(i)},_.Not=function(t,e){t.Push(t.itemFactory.create("not"))},_.Dots=function(t,e){var r=u.default.createEntity("2026"),n=u.default.createEntity("22EF"),o=t.create("token","mo",{stretchy:!1},r),i=t.create("token","mo",{stretchy:!1},n);t.Push(t.itemFactory.create("dots").setProperties({ldots:o,cdots:i}))},_.Matrix=function(t,e,r,n,o,i,s,a,l,c){var u=t.GetNext();if(""===u)throw new p.default("MissingArgFor","Missing argument for %1",t.currentCS);"{"===u?t.i++:(t.string=u+"}"+t.string.slice(t.i+1),t.i=0);var h=t.itemFactory.create("array").setProperty("requireClose",!0);h.arraydef={rowspacing:s||"4pt",columnspacing:i||"1em"},l&&h.setProperty("isCases",!0),c&&(h.setProperty("isNumbered",!0),h.arraydef.side=c),(r||n)&&(h.setProperty("open",r),h.setProperty("close",n)),"D"===a&&(h.arraydef.displaystyle=!0),null!=o&&(h.arraydef.columnalign=o),t.Push(h)},_.Entry=function(t,e){t.Push(t.itemFactory.create("cell").setProperties({isEntry:!0,name:e}));var r=t.stack.Top(),n=r.getProperty("casesEnv");if(r.getProperty("isCases")||n){for(var o=t.string,i=0,s=-1,a=t.i,l=o.length,c=n?new RegExp("^\\\\end\\s*\\{".concat(n.replace(/\*/,"\\*"),"\\}")):null;a<l;){var u=o.charAt(a);if("{"===u)i++,a++;else if("}"===u)0===i?l=0:(0===--i&&s<0&&(s=a-t.i),a++);else{if("&"===u&&0===i)throw new p.default("ExtraAlignTab","Extra alignment tab in \\cases text");if("\\"===u){var h=o.substr(a);h.match(/^((\\cr)[^a-zA-Z]|\\\\)/)||c&&h.match(c)?l=0:a+=2}else a++}}var f=o.substr(t.i,a-t.i);if(!f.match(/^\s*\\text[^a-zA-Z]/)||s!==f.replace(/\s+$/,"").length-1){var m=d.default.internalMath(t,d.default.trimSpaces(f),0);t.PushAll(m),t.i=a}}},_.Cr=function(t,e){t.Push(t.itemFactory.create("cell").setProperties({isCR:!0,name:e}))},_.CrLaTeX=function(t,e,r){var n;if(void 0===r&&(r=!1),!r&&("*"===t.string.charAt(t.i)&&t.i++,"["===t.string.charAt(t.i))){var o=t.GetBrackets(e,""),i=a(d.default.matchDimen(o),2),s=i[0],l=i[1];if(o&&!s)throw new p.default("BracketMustBeDimension","Bracket argument to %1 must be a dimension",t.currentCS);n=s+l}t.Push(t.itemFactory.create("cell").setProperties({isCR:!0,name:e,linebreak:!0}));var u,h=t.stack.Top();h instanceof c.ArrayItem?n&&h.addRowSpacing(n):(n&&(u=t.create("node","mspace",[],{depth:n}),t.Push(u)),u=t.create("node","mspace",[],{linebreak:f.TexConstant.LineBreak.NEWLINE}),t.Push(u))},_.HLine=function(t,e,r){null==r&&(r="solid");var n=t.stack.Top();if(!(n instanceof c.ArrayItem)||n.Size())throw new p.default("Misplaced","Misplaced %1",t.currentCS);if(n.table.length){for(var o=n.arraydef.rowlines?n.arraydef.rowlines.split(/ /):[];o.length<n.table.length;)o.push("none");o[n.table.length-1]=r,n.arraydef.rowlines=o.join(" ")}else n.frame.push("top")},_.HFill=function(t,e){var r=t.stack.Top();if(!(r instanceof c.ArrayItem))throw new p.default("UnsupportedHFill","Unsupported use of %1",t.currentCS);r.hfill.push(r.Size())},_.BeginEnd=function(t,e){var r=t.GetArgument(e);if(r.match(/\\/i))throw new p.default("InvalidEnv","Invalid environment name '%1'",r);var n=t.configuration.handlers.get("environment").lookup(r);if(n&&"\\end"===e){if(!n.args[0]){var o=t.itemFactory.create("end").setProperty("name",r);return void t.Push(o)}t.stack.env.closing=r}d.default.checkMaxMacros(t,!1),t.parse("environment",[t,r])},_.Array=function(t,e,r,n,o,i,s,a,l){o||(o=t.GetArgument("\\begin{"+e.getName()+"}"));var c=("c"+o).replace(/[^clr|:]/g,"").replace(/[^|:]([|:])+/g,"$1");o=(o=o.replace(/[^clr]/g,"").split("").join(" ")).replace(/l/g,"left").replace(/r/g,"right").replace(/c/g,"center");var u=t.itemFactory.create("array");return u.arraydef={columnalign:o,columnspacing:i||"1em",rowspacing:s||"4pt"},c.match(/[|:]/)&&(c.charAt(0).match(/[|:]/)&&(u.frame.push("left"),u.dashed=":"===c.charAt(0)),c.charAt(c.length-1).match(/[|:]/)&&u.frame.push("right"),c=c.substr(1,c.length-2),u.arraydef.columnlines=c.split("").join(" ").replace(/[^|: ]/g,"none").replace(/\|/g,"solid").replace(/:/g,"dashed")),r&&u.setProperty("open",t.convertDelimiter(r)),n&&u.setProperty("close",t.convertDelimiter(n)),"'"===(a||"").charAt(1)&&(u.arraydef["data-cramped"]=!0,a=a.charAt(0)),"D"===a?u.arraydef.displaystyle=!0:a&&(u.arraydef.displaystyle=!1),"S"===a&&(u.arraydef.scriptlevel=1),l&&(u.arraydef.useHeight=!1),t.Push(e),u},_.AlignedArray=function(t,e){var r=t.GetBrackets("\\begin{"+e.getName()+"}"),n=_.Array(t,e);return d.default.setArrayAlign(n,r)},_.Equation=function(t,e,r){return t.Push(e),d.default.checkEqnEnv(t),t.itemFactory.create("equation",r).setProperty("name",e.getName())},_.EqnArray=function(t,e,r,n,o,i){t.Push(e),n&&d.default.checkEqnEnv(t),o=(o=o.replace(/[^clr]/g,"").split("").join(" ")).replace(/l/g,"left").replace(/r/g,"right").replace(/c/g,"center");var s=t.itemFactory.create("eqnarray",e.getName(),r,n,t.stack.global);return s.arraydef={displaystyle:!0,columnalign:o,columnspacing:i||"1em",rowspacing:"3pt",side:t.options.tagSide,minlabelspacing:t.options.tagIndent},s},_.HandleNoTag=function(t,e){t.tags.notag()},_.HandleLabel=function(t,e){var r=t.GetArgument(e);if(""!==r&&!t.tags.refUpdate){if(t.tags.label)throw new p.default("MultipleCommand","Multiple %1",t.currentCS);if(t.tags.label=r,(t.tags.allLabels[r]||t.tags.labels[r])&&!t.options.ignoreDuplicateLabels)throw new p.default("MultipleLabel","Label '%1' multiply defined",r);t.tags.labels[r]=new y.Label}},_.HandleRef=function(t,e,r){var n=t.GetArgument(e),o=t.tags.allLabels[n]||t.tags.labels[n];o||(t.tags.refUpdate||(t.tags.redo=!0),o=new y.Label);var i=o.tag;r&&(i=t.tags.formatTag(i));var s=t.create("node","mrow",d.default.internalMath(t,i),{href:t.tags.formatUrl(o.id,t.options.baseURL),class:"MathJax_ref"});t.Push(s)},_.Macro=function(t,e,r,n,o){if(n){var i=[];if(null!=o){var s=t.GetBrackets(e);i.push(null==s?o:s)}for(var a=i.length;a<n;a++)i.push(t.GetArgument(e));r=d.default.substituteArgs(t,i,r)}t.string=d.default.addArgs(t,r,t.string.slice(t.i)),t.i=0,d.default.checkMaxMacros(t)},_.MathChoice=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e),o=t.ParseArg(e),i=t.ParseArg(e);t.Push(t.create("node","MathChoice",[r,n,o,i]))},e.default=_},8458:function(t,e,r){var n,o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigMacrosConfiguration=void 0;var s=r(9899),a=r(7233),l=r(9140),c=i(r(5450)),u=r(8803),p=i(r(1110)),h=r(6793),f="configmacros-map",d="configmacros-env-map";e.ConfigMacrosConfiguration=s.Configuration.create("configmacros",{init:function(t){new l.CommandMap(f,{},{}),new l.EnvironmentMap(d,c.default.environment,{},{}),t.append(s.Configuration.local({handler:{macro:[f],environment:[d]},priority:3}))},config:function(t,e){!function(t){var e,r,n=t.parseOptions.handlers.retrieve(f),i=t.parseOptions.options.macros;try{for(var s=o(Object.keys(i)),a=s.next();!a.done;a=s.next()){var l=a.value,c="string"==typeof i[l]?[i[l]]:i[l],h=Array.isArray(c[2])?new u.Macro(l,p.default.MacroWithTemplate,c.slice(0,2).concat(c[2])):new u.Macro(l,p.default.Macro,c);n.add(l,h)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}}(e),function(t){var e,r,n=t.parseOptions.handlers.retrieve(d),i=t.parseOptions.options.environments;try{for(var s=o(Object.keys(i)),a=s.next();!a.done;a=s.next()){var l=a.value;n.add(l,new u.Macro(l,p.default.BeginEnv,[!0].concat(i[l])))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}}(e)},items:(n={},n[h.BeginEnvItem.prototype.kind]=h.BeginEnvItem,n),options:{macros:(0,a.expandable)({}),environments:(0,a.expandable)({})}})},1496:function(t,e,r){var n,o=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&o(e,t,r);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.NewcommandConfiguration=void 0;var l=r(9899),c=r(6793),u=a(r(5579));r(5117);var p=a(r(5450)),h=s(r(9140));e.NewcommandConfiguration=l.Configuration.create("newcommand",{handler:{macro:["Newcommand-macros"]},items:(n={},n[c.BeginEnvItem.prototype.kind]=c.BeginEnvItem,n),options:{maxMacros:1e3},init:function(t){new h.DelimiterMap(u.default.NEW_DELIMITER,p.default.delimiter,{}),new h.CommandMap(u.default.NEW_COMMAND,{},{}),new h.EnvironmentMap(u.default.NEW_ENVIRONMENT,p.default.environment,{},{}),t.append(l.Configuration.local({handler:{character:[],delimiter:[u.default.NEW_DELIMITER],macro:[u.default.NEW_DELIMITER,u.default.NEW_COMMAND],environment:[u.default.NEW_ENVIRONMENT]},priority:-1}))}})},6793:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BeginEnvItem=void 0;var s=i(r(3971)),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return"beginEnv"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){if(e.isKind("end")){if(e.getName()!==this.getName())throw new s.default("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),e.getName());return[[this.factory.create("mml",this.toMml())],!0]}if(e.isKind("stop"))throw new s.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return t.prototype.checkItem.call(this,e)},e}(r(8292).BaseItem);e.BeginEnvItem=a},5117:function(t,e,r){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(1110));new(r(9140).CommandMap)("Newcommand-macros",{newcommand:"NewCommand",renewcommand:"NewCommand",newenvironment:"NewEnvironment",renewenvironment:"NewEnvironment",def:"MacroDef",let:"Let"},o.default)},1110:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=s(r(3971)),l=i(r(9140)),c=s(r(7693)),u=s(r(1130)),p=s(r(5579)),h={NewCommand:function(t,e){var r=p.default.GetCsNameArgument(t,e),n=p.default.GetArgCount(t,e),o=t.GetBrackets(e),i=t.GetArgument(e);p.default.addMacro(t,r,h.Macro,[i,n,o])},NewEnvironment:function(t,e){var r=u.default.trimSpaces(t.GetArgument(e)),n=p.default.GetArgCount(t,e),o=t.GetBrackets(e),i=t.GetArgument(e),s=t.GetArgument(e);p.default.addEnvironment(t,r,h.BeginEnv,[!0,i,s,n,o])},MacroDef:function(t,e){var r=p.default.GetCSname(t,e),n=p.default.GetTemplate(t,e,"\\"+r),o=t.GetArgument(e);n instanceof Array?p.default.addMacro(t,r,h.MacroWithTemplate,[o].concat(n)):p.default.addMacro(t,r,h.Macro,[o,n])},Let:function(t,e){var r=p.default.GetCSname(t,e),n=t.GetNext();"="===n&&(t.i++,n=t.GetNext());var o=t.configuration.handlers;if("\\"!==n){t.i++;var i=o.get("delimiter").lookup(n);i?p.default.addDelimiter(t,"\\"+r,i.char,i.attributes):p.default.addMacro(t,r,h.Macro,[n])}else{e=p.default.GetCSname(t,e);var s=o.get("delimiter").lookup("\\"+e);if(s)return void p.default.addDelimiter(t,"\\"+r,s.char,s.attributes);var a=o.get("macro").applicable(e);if(!a)return;if(a instanceof l.MacroMap){var c=a.lookup(e);return void p.default.addMacro(t,r,c.func,c.args,c.symbol)}s=a.lookup(e);var u=p.default.disassembleSymbol(r,s);p.default.addMacro(t,r,(function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=p.default.assembleSymbol(r);return a.parser(t,o)}),u)}},MacroWithTemplate:function(t,e,r,n){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];var s=parseInt(n,10);if(s){var l=[];if(t.GetNext(),o[0]&&!p.default.MatchParam(t,o[0]))throw new a.default("MismatchUseDef","Use of %1 doesn't match its definition",e);for(var c=0;c<s;c++)l.push(p.default.GetParameter(t,e,o[c+1]));r=u.default.substituteArgs(t,l,r)}t.string=u.default.addArgs(t,r,t.string.slice(t.i)),t.i=0,u.default.checkMaxMacros(t)},BeginEnv:function(t,e,r,n,o,i){if(e.getProperty("end")&&t.stack.env.closing===e.getName()){delete t.stack.env.closing;var s=t.string.slice(t.i);return t.string=n,t.i=0,t.Parse(),t.string=s,t.i=0,t.itemFactory.create("end").setProperty("name",e.getName())}if(o){var a=[];if(null!=i){var l=t.GetBrackets("\\begin{"+e.getName()+"}");a.push(null==l?i:l)}for(var c=a.length;c<o;c++)a.push(t.GetArgument("\\begin{"+e.getName()+"}"));r=u.default.substituteArgs(t,a,r),n=u.default.substituteArgs(t,[],n)}return t.string=u.default.addArgs(t,r,t.string.slice(t.i)),t.i=0,t.itemFactory.create("beginEnv").setProperty("name",e.getName())}};h.Macro=c.default.Macro,e.default=h},5579:function(t,e,r){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(r(1130)),s=n(r(3971)),a=r(8803);!function(t){function e(t,e){return t.string.substr(t.i,e.length)!==e||e.match(/\\[a-z]+$/i)&&t.string.charAt(t.i+e.length).match(/[a-z]/i)?0:(t.i+=e.length,1)}t.disassembleSymbol=function(t,e){var r=[t,e.char];if(e.attributes)for(var n in e.attributes)r.push(n),r.push(e.attributes[n]);return r},t.assembleSymbol=function(t){for(var e=t[0],r=t[1],n={},o=2;o<t.length;o+=2)n[t[o]]=t[o+1];return new a.Symbol(e,r,n)},t.GetCSname=function(t,e){if("\\"!==t.GetNext())throw new s.default("MissingCS","%1 must be followed by a control sequence",e);return i.default.trimSpaces(t.GetArgument(e)).substr(1)},t.GetCsNameArgument=function(t,e){var r=i.default.trimSpaces(t.GetArgument(e));if("\\"===r.charAt(0)&&(r=r.substr(1)),!r.match(/^(.|[a-z]+)$/i))throw new s.default("IllegalControlSequenceName","Illegal control sequence name for %1",e);return r},t.GetArgCount=function(t,e){var r=t.GetBrackets(e);if(r&&!(r=i.default.trimSpaces(r)).match(/^[0-9]+$/))throw new s.default("IllegalParamNumber","Illegal number of parameters specified in %1",e);return r},t.GetTemplate=function(t,e,r){for(var n=t.GetNext(),o=[],i=0,a=t.i;t.i<t.string.length;){if("#"===(n=t.GetNext())){if(a!==t.i&&(o[i]=t.string.substr(a,t.i-a)),!(n=t.string.charAt(++t.i)).match(/^[1-9]$/))throw new s.default("CantUseHash2","Illegal use of # in template for %1",r);if(parseInt(n)!==++i)throw new s.default("SequentialParam","Parameters for %1 must be numbered sequentially",r);a=t.i+1}else if("{"===n)return a!==t.i&&(o[i]=t.string.substr(a,t.i-a)),o.length>0?[i.toString()].concat(o):i;t.i++}throw new s.default("MissingReplacementString","Missing replacement string for definition of %1",e)},t.GetParameter=function(t,r,n){if(null==n)return t.GetArgument(r);for(var o=t.i,i=0,a=0;t.i<t.string.length;){var l=t.string.charAt(t.i);if("{"===l)t.i===o&&(a=1),t.GetArgument(r),i=t.i-o;else{if(e(t,n))return a&&(o++,i-=2),t.string.substr(o,i);if("\\"===l){t.i++,i++,a=0;var c=t.string.substr(t.i).match(/[a-z]+|./i);c&&(t.i+=c[0].length,i=t.i-o)}else t.i++,i++,a=0}}throw new s.default("RunawayArgument","Runaway argument for %1?",r)},t.MatchParam=e,t.addDelimiter=function(e,r,n,o){e.configuration.handlers.retrieve(t.NEW_DELIMITER).add(r,new a.Symbol(r,n,o))},t.addMacro=function(e,r,n,o,i){void 0===i&&(i=""),e.configuration.handlers.retrieve(t.NEW_COMMAND).add(r,new a.Macro(i||r,n,o))},t.addEnvironment=function(e,r,n,o){e.configuration.handlers.retrieve(t.NEW_ENVIRONMENT).add(r,new a.Macro(r,n,o))},t.NEW_DELIMITER="new-Delimiter",t.NEW_COMMAND="new-Command",t.NEW_ENVIRONMENT="new-Environment"}(o||(o={})),e.default=o},4898:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.NoUndefinedConfiguration=void 0;var o=r(9899);e.NoUndefinedConfiguration=o.Configuration.create("noundefined",{fallback:{macro:function(t,e){var r,o,i=t.create("text","\\"+e),s=t.options.noundefined||{},a={};try{for(var l=n(["color","background","size"]),c=l.next();!c.done;c=l.next()){var u=c.value;s[u]&&(a["math"+u]=s[u])}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}t.Push(t.create("node","mtext",[],a,i))}},options:{noundefined:{color:"red",background:"",size:""}},priority:3})},7741:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RequireConfiguration=e.options=e.RequireMethods=e.RequireLoad=void 0;var a=r(9899),l=r(9140),c=s(r(3971)),u=r(9515),p=r(265),h=r(235),f=r(5713),d=r(7233),m=u.MathJax.config;function y(t,e){var r,o=t.parseOptions.options.require,i=t.parseOptions.packageData.get("require").required,s=e.substr(o.prefix.length);if(i.indexOf(s)<0){i.push(s),function(t,e){var r,o;void 0===e&&(e=[]);var i=t.parseOptions.options.require.prefix;try{for(var s=n(e),a=s.next();!a.done;a=s.next()){var l=a.value;l.substr(0,i.length)===i&&y(t,l)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}}(t,h.CONFIG.dependencies[e]);var l=a.ConfigurationHandler.get(s);if(l){var c=m[e]||{};l.options&&1===Object.keys(l.options).length&&l.options[s]&&((r={})[s]=c,c=r),t.configuration.add(s,t,c);var u=t.parseOptions.packageData.get("require").configured;l.preprocessors.length&&!u.has(s)&&(u.set(s,!0),f.mathjax.retryAfter(Promise.resolve()))}}}function g(t,e){var r=t.options.require,n=r.allow,o=("["===e.substr(0,1)?"":r.prefix)+e;if(!(n.hasOwnProperty(o)?n[o]:n.hasOwnProperty(e)?n[e]:r.defaultAllow))throw new c.default("BadRequire",'Extension "%1" is not allowed to be loaded',o);p.Package.packages.has(o)?y(t.configuration.packageData.get("require").jax,o):f.mathjax.retryAfter(h.Loader.load(o))}e.RequireLoad=g,e.RequireMethods={Require:function(t,e){var r=t.GetArgument(e);if(r.match(/[^_a-zA-Z0-9]/)||""===r)throw new c.default("BadPackageName","Argument for %1 is not a valid package name",e);g(t,r)}},e.options={require:{allow:(0,d.expandable)({base:!1,"all-packages":!1,autoload:!1,configmacros:!1,tagformat:!1,setoptions:!1}),defaultAllow:!0,prefix:"tex"}},new l.CommandMap("require",{require:"Require"},e.RequireMethods),e.RequireConfiguration=a.Configuration.create("require",{handler:{macro:["require"]},config:function(t,e){e.parseOptions.packageData.set("require",{jax:e,required:i([],o(e.options.packages),!1),configured:new Map});var r=e.parseOptions.options.require,n=r.prefix;if(n.match(/[^_a-zA-Z0-9]/))throw Error("Illegal characters used in \\require prefix");h.CONFIG.paths[n]||(h.CONFIG.paths[n]="[mathjax]/input/tex/extensions"),r.prefix="["+n+"]/"},options:e.options})},5713:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.mathjax=void 0;var n=r(3282),o=r(805),i=r(4542);e.mathjax={version:n.VERSION,handlers:new o.HandlerList,document:function(t,r){return e.mathjax.handlers.document(t,r)},handleRetriesFor:i.handleRetriesFor,retryAfter:i.retryAfter,asyncLoad:null}},50:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&s(e,t,r);return a(e,t),e},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTML=void 0;var u=r(3055),p=r(4139),h=r(9261),f=r(6797),d=r(2760),m=l(r(6010)),y=r(505),g=function(t){function e(e){void 0===e&&(e=null);var r=t.call(this,e,h.CHTMLWrapperFactory,d.TeXFont)||this;return r.chtmlStyles=null,r.font.adaptiveCSS(r.options.adaptiveCSS),r.wrapperUsage=new f.Usage,r}return o(e,t),e.prototype.escaped=function(t,e){return this.setDocument(e),this.html("span",{},[this.text(t.math)])},e.prototype.styleSheet=function(r){if(this.chtmlStyles){if(this.options.adaptiveCSS){var n=new p.CssStyles;this.addWrapperStyles(n),this.updateFontStyles(n),this.adaptor.insertRules(this.chtmlStyles,n.getStyleRules())}return this.chtmlStyles}var o=this.chtmlStyles=t.prototype.styleSheet.call(this,r);return this.adaptor.setAttribute(o,"id",e.STYLESHEETID),this.wrapperUsage.update(),o},e.prototype.updateFontStyles=function(t){t.addStyles(this.font.updateStyles({}))},e.prototype.addWrapperStyles=function(e){var r,n;if(this.options.adaptiveCSS)try{for(var o=c(this.wrapperUsage.update()),i=o.next();!i.done;i=o.next()){var s=i.value,a=this.factory.getNodeClass(s);a&&this.addClassStyles(a,e)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else t.prototype.addWrapperStyles.call(this,e)},e.prototype.addClassStyles=function(e,r){var n,o=e;o.autoStyle&&"unknown"!==o.kind&&r.addStyles(((n={})["mjx-"+o.kind]={display:"inline-block","text-align":"left"},n)),this.wrapperUsage.add(o.kind),t.prototype.addClassStyles.call(this,e,r)},e.prototype.processMath=function(t,e){this.factory.wrap(t).toCHTML(e)},e.prototype.clearCache=function(){this.cssStyles.clear(),this.font.clearCache(),this.wrapperUsage.clear(),this.chtmlStyles=null},e.prototype.reset=function(){this.clearCache()},e.prototype.unknownText=function(t,e,r){void 0===r&&(r=null);var n={},o=100/this.math.metrics.scale;if(100!==o&&(n["font-size"]=this.fixed(o,1)+"%",n.padding=m.em(75/o)+" 0 "+m.em(20/o)+" 0"),"-explicitFont"!==e){var i=(0,y.unicodeChars)(t);(1!==i.length||i[0]<119808||i[0]>120831)&&this.cssFontStyles(this.font.getCssFont(e),n)}if(null!==r){var s=this.math.metrics;n.width=Math.round(r*s.em*s.scale)+"px"}return this.html("mjx-utext",{variant:e,style:n},[this.text(t)])},e.prototype.measureTextNode=function(t){var e=this.adaptor,r=e.clone(t);e.setStyle(r,"font-family",e.getStyle(r,"font-family").replace(/MJXZERO, /g,""));var n=this.html("mjx-measure-text",{style:{position:"absolute","white-space":"nowrap"}},[r]);e.append(e.parent(this.math.start.node),this.container),e.append(this.container,n);var o=e.nodeSize(r,this.math.metrics.em)[0]/this.math.metrics.scale;return e.remove(this.container),e.remove(n),{w:o,h:.75,d:.2}},e.NAME="CHTML",e.OPTIONS=i(i({},u.CommonOutputJax.OPTIONS),{adaptiveCSS:!0,matchFontHeight:!0}),e.commonStyles={'mjx-container[jax="CHTML"]':{"line-height":0},'mjx-container [space="1"]':{"margin-left":".111em"},'mjx-container [space="2"]':{"margin-left":".167em"},'mjx-container [space="3"]':{"margin-left":".222em"},'mjx-container [space="4"]':{"margin-left":".278em"},'mjx-container [space="5"]':{"margin-left":".333em"},'mjx-container [rspace="1"]':{"margin-right":".111em"},'mjx-container [rspace="2"]':{"margin-right":".167em"},'mjx-container [rspace="3"]':{"margin-right":".222em"},'mjx-container [rspace="4"]':{"margin-right":".278em"},'mjx-container [rspace="5"]':{"margin-right":".333em"},'mjx-container [size="s"]':{"font-size":"70.7%"},'mjx-container [size="ss"]':{"font-size":"50%"},'mjx-container [size="Tn"]':{"font-size":"60%"},'mjx-container [size="sm"]':{"font-size":"85%"},'mjx-container [size="lg"]':{"font-size":"120%"},'mjx-container [size="Lg"]':{"font-size":"144%"},'mjx-container [size="LG"]':{"font-size":"173%"},'mjx-container [size="hg"]':{"font-size":"207%"},'mjx-container [size="HG"]':{"font-size":"249%"},'mjx-container [width="full"]':{width:"100%"},"mjx-box":{display:"inline-block"},"mjx-block":{display:"block"},"mjx-itable":{display:"inline-table"},"mjx-row":{display:"table-row"},"mjx-row > *":{display:"table-cell"},"mjx-mtext":{display:"inline-block"},"mjx-mstyle":{display:"inline-block"},"mjx-merror":{display:"inline-block",color:"red","background-color":"yellow"},"mjx-mphantom":{visibility:"hidden"},"_::-webkit-full-page-media, _:future, :root mjx-container":{"will-change":"opacity"}},e.STYLESHEETID="MJX-CHTML-styles",e}(u.CommonOutputJax);e.CHTML=g},8042:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||s(e,t,r)},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.AddCSS=e.CHTMLFontData=void 0;var u=r(5884),p=r(6797),h=r(6010);a(r(5884),e);var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.charUsage=new p.Usage,e.delimUsage=new p.Usage,e}return o(e,t),e.charOptions=function(e,r){return t.charOptions.call(this,e,r)},e.prototype.adaptiveCSS=function(t){this.options.adaptiveCSS=t},e.prototype.clearCache=function(){this.options.adaptiveCSS&&(this.charUsage.clear(),this.delimUsage.clear())},e.prototype.createVariant=function(e,r,n){void 0===r&&(r=null),void 0===n&&(n=null),t.prototype.createVariant.call(this,e,r,n);var o=this.constructor;this.variant[e].classes=o.defaultVariantClasses[e],this.variant[e].letter=o.defaultVariantLetters[e]},e.prototype.defineChars=function(r,n){var o,i;t.prototype.defineChars.call(this,r,n);var s=this.variant[r].letter;try{for(var a=l(Object.keys(n)),c=a.next();!c.done;c=a.next()){var u=c.value,p=e.charOptions(n,parseInt(u));void 0===p.f&&(p.f=s)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}},Object.defineProperty(e.prototype,"styles",{get:function(){var t=this.constructor,e=i({},t.defaultStyles);return this.addFontURLs(e,t.defaultFonts,this.options.fontURL),this.options.adaptiveCSS?this.updateStyles(e):this.allStyles(e),e},enumerable:!1,configurable:!0}),e.prototype.updateStyles=function(t){var e,r,n,o;try{for(var i=l(this.delimUsage.update()),s=i.next();!s.done;s=i.next()){var a=s.value;this.addDelimiterStyles(t,a,this.delimiters[a])}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}try{for(var u=l(this.charUsage.update()),p=u.next();!p.done;p=u.next()){var h=c(p.value,2),f=h[0],d=(a=h[1],this.variant[f]);this.addCharStyles(t,d.letter,a,d.chars[a])}}catch(t){n={error:t}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return t},e.prototype.allStyles=function(t){var e,r,n,o,i,s;try{for(var a=l(Object.keys(this.delimiters)),c=a.next();!c.done;c=a.next()){var u=c.value,p=parseInt(u);this.addDelimiterStyles(t,p,this.delimiters[p])}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}try{for(var h=l(Object.keys(this.variant)),f=h.next();!f.done;f=h.next()){var d=f.value,m=this.variant[d],y=m.letter;try{for(var g=(i=void 0,l(Object.keys(m.chars))),b=g.next();!b.done;b=g.next()){u=b.value,p=parseInt(u);var v=m.chars[p];(v[3]||{}).smp||(v.length<4&&(v[3]={}),this.addCharStyles(t,y,p,v))}}catch(t){i={error:t}}finally{try{b&&!b.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}}}catch(t){n={error:t}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}},e.prototype.addFontURLs=function(t,e,r){var n,o;try{for(var s=l(Object.keys(e)),a=s.next();!a.done;a=s.next()){var c=a.value,u=i({},e[c]);u.src=u.src.replace(/%%URL%%/,r),t[c]=u}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},e.prototype.addDelimiterStyles=function(t,e,r){var n=this.charSelector(e);r.c&&r.c!==e&&(t[".mjx-stretched mjx-c"+(n=this.charSelector(r.c))+"::before"]={content:this.charContent(r.c)}),r.stretch&&(1===r.dir?this.addDelimiterVStyles(t,n,r):this.addDelimiterHStyles(t,n,r))},e.prototype.addDelimiterVStyles=function(t,e,r){var n=r.HDW,o=c(r.stretch,4),i=o[0],s=o[1],a=o[2],l=o[3],u=this.addDelimiterVPart(t,e,"beg",i,n);this.addDelimiterVPart(t,e,"ext",s,n);var p=this.addDelimiterVPart(t,e,"end",a,n),h={};if(l){var f=this.addDelimiterVPart(t,e,"mid",l,n);h.height="50%",t["mjx-stretchy-v"+e+" > mjx-mid"]={"margin-top":this.em(-f/2),"margin-bottom":this.em(-f/2)}}u&&(h["border-top-width"]=this.em0(u-.03)),p&&(h["border-bottom-width"]=this.em0(p-.03),t["mjx-stretchy-v"+e+" > mjx-end"]={"margin-top":this.em(-p)}),Object.keys(h).length&&(t["mjx-stretchy-v"+e+" > mjx-ext"]=h)},e.prototype.addDelimiterVPart=function(t,e,r,n,o){if(!n)return 0;var i=this.getDelimiterData(n),s=(o[2]-i[2])/2,a={content:this.charContent(n)};return"ext"!==r?a.padding=this.padding(i,s):(a.width=this.em0(o[2]),s&&(a["padding-left"]=this.em0(s))),t["mjx-stretchy-v"+e+" mjx-"+r+" mjx-c::before"]=a,i[0]+i[1]},e.prototype.addDelimiterHStyles=function(t,e,r){var n=c(r.stretch,4),o=n[0],i=n[1],s=n[2],a=n[3],l=r.HDW;this.addDelimiterHPart(t,e,"beg",o,l),this.addDelimiterHPart(t,e,"ext",i,l),this.addDelimiterHPart(t,e,"end",s,l),a&&(this.addDelimiterHPart(t,e,"mid",a,l),t["mjx-stretchy-h"+e+" > mjx-ext"]={width:"50%"})},e.prototype.addDelimiterHPart=function(t,e,r,n,o){if(n){var i=this.getDelimiterData(n)[3],s={content:i&&i.c?'"'+i.c+'"':this.charContent(n)};s.padding=this.padding(o,0,-o[2]),t["mjx-stretchy-h"+e+" mjx-"+r+" mjx-c::before"]=s}},e.prototype.addCharStyles=function(t,e,r,n){var o=n[3],i=void 0!==o.f?o.f:e;t["mjx-c"+this.charSelector(r)+(i?".TEX-"+i:"")+"::before"]={padding:this.padding(n,0,o.ic||0),content:null!=o.c?'"'+o.c+'"':this.charContent(r)}},e.prototype.getDelimiterData=function(t){return this.getChar("-smallop",t)},e.prototype.em=function(t){return(0,h.em)(t)},e.prototype.em0=function(t){return(0,h.em)(Math.max(0,t))},e.prototype.padding=function(t,e,r){var n=c(t,3),o=n[0],i=n[1];return void 0===e&&(e=0),void 0===r&&(r=0),[o,n[2]+r,i,e].map(this.em0).join(" ")},e.prototype.charContent=function(t){return'"'+(t>=32&&t<=126&&34!==t&&39!==t&&92!==t?String.fromCharCode(t):"\\"+t.toString(16).toUpperCase())+'"'},e.prototype.charSelector=function(t){return".mjx-c"+t.toString(16).toUpperCase()},e.OPTIONS=i(i({},u.FontData.OPTIONS),{fontURL:"js/output/chtml/fonts/tex-woff-v2"}),e.JAX="CHTML",e.defaultVariantClasses={},e.defaultVariantLetters={},e.defaultStyles={"mjx-c::before":{display:"block",width:0}},e.defaultFonts={"@font-face /* 0 */":{"font-family":"MJXZERO",src:'url("%%URL%%/MathJax_Zero.woff") format("woff")'}},e}(u.FontData);e.CHTMLFontData=f,e.AddCSS=function(t,e){var r,n;try{for(var o=l(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s=i.value,a=parseInt(s);Object.assign(u.FontData.charOptions(t,a),e[a])}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return t}},8270:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=e.DiagonalArrow=e.DiagonalStrike=e.Border2=e.Border=e.RenderElement=void 0;var l=i(r(5552));s(r(5552),e);e.RenderElement=function(t,e){return void 0===e&&(e=""),function(r,n){var o=r.adjustBorder(r.html("mjx-"+t));if(e){var i=r.getOffset(e);if(r.thickness!==l.THICKNESS||i){var s="translate".concat(e,"(").concat(r.em(r.thickness/2-i),")");r.adaptor.setStyle(o,"transform",s)}}r.adaptor.append(r.chtml,o)}};e.Border=function(t){return l.CommonBorder((function(e,r){e.adaptor.setStyle(r,"border-"+t,e.em(e.thickness)+" solid")}))(t)};e.Border2=function(t,e,r){return l.CommonBorder2((function(t,n){var o=t.em(t.thickness)+" solid";t.adaptor.setStyle(n,"border-"+e,o),t.adaptor.setStyle(n,"border-"+r,o)}))(t,e,r)};e.DiagonalStrike=function(t,e){return l.CommonDiagonalStrike((function(t){return function(r,n){var o=r.getBBox(),i=o.w,s=o.h,l=o.d,c=a(r.getArgMod(i,s+l),2),u=c[0],p=c[1],h=e*r.thickness/2,f=r.adjustBorder(r.html(t,{style:{width:r.em(p),transform:"rotate("+r.fixed(-e*u)+"rad) translateY("+h+"em)"}}));r.adaptor.append(r.chtml,f)}}))(t)};e.DiagonalArrow=function(t){return l.CommonDiagonalArrow((function(t,e){t.adaptor.append(t.chtml,e)}))(t)};e.Arrow=function(t){return l.CommonArrow((function(t,e){t.adaptor.append(t.chtml,e)}))(t)}},6797:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Usage=void 0;var r=function(){function t(){this.used=new Set,this.needsUpdate=[]}return t.prototype.add=function(t){var e=JSON.stringify(t);this.used.has(e)||this.needsUpdate.push(t),this.used.add(e)},t.prototype.has=function(t){return this.used.has(JSON.stringify(t))},t.prototype.clear=function(){this.used.clear(),this.needsUpdate=[]},t.prototype.update=function(){var t=this.needsUpdate;return this.needsUpdate=[],t},t}();e.Usage=r},5355:function(t,e,r){var n,o,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&s(e,t,r);return a(e,t),e},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLWrapper=e.SPACE=e.FONTSIZE=void 0;var p=l(r(6010)),h=r(7519),f=r(6469);e.FONTSIZE={"70.7%":"s","70%":"s","50%":"ss","60%":"Tn","85%":"sm","120%":"lg","144%":"Lg","173%":"LG","207%":"hg","249%":"HG"},e.SPACE=((o={})[p.em(2/18)]="1",o[p.em(3/18)]="2",o[p.em(4/18)]="3",o[p.em(5/18)]="4",o[p.em(6/18)]="5",o);var d=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.chtml=null,e}return i(r,t),r.prototype.toCHTML=function(t){var e,r,n=this.standardCHTMLnode(t);try{for(var o=c(this.childNodes),i=o.next();!i.done;i=o.next()){i.value.toCHTML(n)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},r.prototype.standardCHTMLnode=function(t){this.markUsed();var e=this.createCHTMLnode(t);return this.handleStyles(),this.handleVariant(),this.handleScale(),this.handleColor(),this.handleSpace(),this.handleAttributes(),this.handlePWidth(),e},r.prototype.markUsed=function(){this.jax.wrapperUsage.add(this.kind)},r.prototype.createCHTMLnode=function(t){var e=this.node.attributes.get("href");return e&&(t=this.adaptor.append(t,this.html("a",{href:e}))),this.chtml=this.adaptor.append(t,this.html("mjx-"+this.node.kind)),this.chtml},r.prototype.handleStyles=function(){if(this.styles){var t=this.styles.cssText;if(t){this.adaptor.setAttribute(this.chtml,"style",t);var e=this.styles.get("font-family");e&&this.adaptor.setStyle(this.chtml,"font-family","MJXZERO, "+e)}}},r.prototype.handleVariant=function(){this.node.isToken&&"-explicitFont"!==this.variant&&this.adaptor.setAttribute(this.chtml,"class",(this.font.getVariant(this.variant)||this.font.getVariant("normal")).classes)},r.prototype.handleScale=function(){this.setScale(this.chtml,this.bbox.rscale)},r.prototype.setScale=function(t,r){var n=Math.abs(r-1)<.001?1:r;if(t&&1!==n){var o=this.percent(n);e.FONTSIZE[o]?this.adaptor.setAttribute(t,"size",e.FONTSIZE[o]):this.adaptor.setStyle(t,"fontSize",o)}return t},r.prototype.handleSpace=function(){var t,r;try{for(var n=c([[this.bbox.L,"space","marginLeft"],[this.bbox.R,"rspace","marginRight"]]),o=n.next();!o.done;o=n.next()){var i=o.value,s=u(i,3),a=s[0],l=s[1],p=s[2];if(a){var h=this.em(a);e.SPACE[h]?this.adaptor.setAttribute(this.chtml,l,e.SPACE[h]):this.adaptor.setStyle(this.chtml,p,h)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},r.prototype.handleColor=function(){var t=this.node.attributes,e=t.getExplicit("mathcolor"),r=t.getExplicit("color"),n=t.getExplicit("mathbackground"),o=t.getExplicit("background");(e||r)&&this.adaptor.setStyle(this.chtml,"color",e||r),(n||o)&&this.adaptor.setStyle(this.chtml,"backgroundColor",n||o)},r.prototype.handleAttributes=function(){var t,e,n,o,i=this.node.attributes,s=i.getAllDefaults(),a=r.skipAttributes;try{for(var l=c(i.getExplicitNames()),u=l.next();!u.done;u=l.next()){var p=u.value;!1!==a[p]&&(p in s||a[p]||this.adaptor.hasAttribute(this.chtml,p))||this.adaptor.setAttribute(this.chtml,p,i.getExplicit(p))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}if(i.get("class")){var h=i.get("class").trim().split(/ +/);try{for(var f=c(h),d=f.next();!d.done;d=f.next()){var m=d.value;this.adaptor.addClass(this.chtml,m)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}},r.prototype.handlePWidth=function(){this.bbox.pwidth&&(this.bbox.pwidth===f.BBox.fullWidth?this.adaptor.setAttribute(this.chtml,"width","full"):this.adaptor.setStyle(this.chtml,"width",this.bbox.pwidth))},r.prototype.setIndent=function(t,e,r){var n=this.adaptor;if("center"===e||"left"===e){var o=this.getBBox().L;n.setStyle(t,"margin-left",this.em(r+o))}if("center"===e||"right"===e){var i=this.getBBox().R;n.setStyle(t,"margin-right",this.em(-r+i))}},r.prototype.drawBBox=function(){var t=this.getBBox(),e=t.w,r=t.h,n=t.d,o=t.R,i=this.html("mjx-box",{style:{opacity:.25,"margin-left":this.em(-e-o)}},[this.html("mjx-box",{style:{height:this.em(r),width:this.em(e),"background-color":"red"}}),this.html("mjx-box",{style:{height:this.em(n),width:this.em(e),"margin-left":this.em(-e),"vertical-align":this.em(-n),"background-color":"green"}})]),s=this.chtml||this.parent.chtml,a=this.adaptor.getAttribute(s,"size");a&&this.adaptor.setAttribute(i,"size",a);var l=this.adaptor.getStyle(s,"fontSize");l&&this.adaptor.setStyle(i,"fontSize",l),this.adaptor.append(this.adaptor.parent(s),i),this.adaptor.setStyle(s,"backgroundColor","#FFEE00")},r.prototype.html=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r=[]),this.jax.html(t,e,r)},r.prototype.text=function(t){return this.jax.text(t)},r.prototype.char=function(t){return this.font.charSelector(t).substr(1)},r.kind="unknown",r.autoStyle=!0,r}(h.CommonWrapper);e.CHTMLWrapper=d},9261:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLWrapperFactory=void 0;var i=r(4420),s=r(9086),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.defaultNodes=s.CHTMLWrappers,e}(i.CommonWrapperFactory);e.CHTMLWrapperFactory=a},9086:function(t,e,r){var n;Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLWrappers=void 0;var o=r(5355),i=r(804),s=r(1653),a=r(6287),l=r(6460),c=r(4597),u=r(1259),p=r(2970),h=r(5964),f=r(8147),d=r(4798),m=r(2275),y=r(9063),g=r(5610),b=r(8776),v=r(4300),_=r(6590),S=r(6781),M=r(8002),O=r(3571),x=r(7056),E=r(8102),A=r(6911),C=r(421),T=r(95),N=r(1148);e.CHTMLWrappers=((n={})[i.CHTMLmath.kind]=i.CHTMLmath,n[d.CHTMLmrow.kind]=d.CHTMLmrow,n[d.CHTMLinferredMrow.kind]=d.CHTMLinferredMrow,n[s.CHTMLmi.kind]=s.CHTMLmi,n[a.CHTMLmo.kind]=a.CHTMLmo,n[l.CHTMLmn.kind]=l.CHTMLmn,n[c.CHTMLms.kind]=c.CHTMLms,n[u.CHTMLmtext.kind]=u.CHTMLmtext,n[p.CHTMLmspace.kind]=p.CHTMLmspace,n[h.CHTMLmpadded.kind]=h.CHTMLmpadded,n[f.CHTMLmenclose.kind]=f.CHTMLmenclose,n[y.CHTMLmfrac.kind]=y.CHTMLmfrac,n[g.CHTMLmsqrt.kind]=g.CHTMLmsqrt,n[b.CHTMLmroot.kind]=b.CHTMLmroot,n[v.CHTMLmsub.kind]=v.CHTMLmsub,n[v.CHTMLmsup.kind]=v.CHTMLmsup,n[v.CHTMLmsubsup.kind]=v.CHTMLmsubsup,n[_.CHTMLmunder.kind]=_.CHTMLmunder,n[_.CHTMLmover.kind]=_.CHTMLmover,n[_.CHTMLmunderover.kind]=_.CHTMLmunderover,n[S.CHTMLmmultiscripts.kind]=S.CHTMLmmultiscripts,n[m.CHTMLmfenced.kind]=m.CHTMLmfenced,n[M.CHTMLmtable.kind]=M.CHTMLmtable,n[O.CHTMLmtr.kind]=O.CHTMLmtr,n[O.CHTMLmlabeledtr.kind]=O.CHTMLmlabeledtr,n[x.CHTMLmtd.kind]=x.CHTMLmtd,n[E.CHTMLmaction.kind]=E.CHTMLmaction,n[A.CHTMLmglyph.kind]=A.CHTMLmglyph,n[C.CHTMLsemantics.kind]=C.CHTMLsemantics,n[C.CHTMLannotation.kind]=C.CHTMLannotation,n[C.CHTMLannotationXML.kind]=C.CHTMLannotationXML,n[C.CHTMLxml.kind]=C.CHTMLxml,n[T.CHTMLTeXAtom.kind]=T.CHTMLTeXAtom,n[N.CHTMLTextNode.kind]=N.CHTMLTextNode,n[o.CHTMLWrapper.kind]=o.CHTMLWrapper,n)},95:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLTeXAtom=void 0;var i=r(5355),s=r(9800),a=r(3948),l=r(9007),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(e){if(t.prototype.toCHTML.call(this,e),this.adaptor.setAttribute(this.chtml,"texclass",l.TEXCLASSNAMES[this.node.texClass]),this.node.texClass===l.TEXCLASS.VCENTER){var r=this.childNodes[0].getBBox(),n=r.h,o=(n+r.d)/2+this.font.params.axis_height-n;this.adaptor.setStyle(this.chtml,"verticalAlign",this.em(o))}},e.kind=a.TeXAtom.prototype.kind,e}((0,s.CommonTeXAtomMixin)(i.CHTMLWrapper));e.CHTMLTeXAtom=c},1148:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLTextNode=void 0;var s=r(9007),a=r(5355),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e,r;this.markUsed();var n=this.adaptor,o=this.parent.variant,s=this.node.getText();if(0!==s.length)if("-explicitFont"===o)n.append(t,this.jax.unknownText(s,o,this.getBBox().w));else{var a=this.remappedText(s,o);try{for(var l=i(a),c=l.next();!c.done;c=l.next()){var u=c.value,p=this.getVariantChar(o,u)[3],h=p.f?" TEX-"+p.f:"",f=p.unknown?this.jax.unknownText(String.fromCodePoint(u),o):this.html("mjx-c",{class:this.char(u)+h});n.append(t,f),!p.unknown&&this.font.charUsage.add([o,u])}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}}},e.kind=s.TextNode.prototype.kind,e.autoStyle=!1,e.styles={"mjx-c":{display:"inline-block"},"mjx-utext":{display:"inline-block",padding:".75em 0 .2em 0"}},e}((0,r(1160).CommonTextNodeMixin)(a.CHTMLWrapper));e.CHTMLTextNode=l},8102:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmaction=void 0;var i=r(5355),s=r(1956),a=r(1956),l=r(9145),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e=this.standardCHTMLnode(t);this.selected.toCHTML(e),this.action(this,this.data)},e.prototype.setEventHandler=function(t,e){this.chtml.addEventListener(t,e)},e.kind=l.MmlMaction.prototype.kind,e.styles={"mjx-maction":{position:"relative"},"mjx-maction > mjx-tool":{display:"none",position:"absolute",bottom:0,right:0,width:0,height:0,"z-index":500},"mjx-tool > mjx-tip":{display:"inline-block",padding:".2em",border:"1px solid #888","font-size":"70%","background-color":"#F8F8F8",color:"black","box-shadow":"2px 2px 5px #AAAAAA"},"mjx-maction[toggle]":{cursor:"pointer"},"mjx-status":{display:"block",position:"fixed",left:"1em",bottom:"1em","min-width":"25%",padding:".2em .4em",border:"1px solid #888","font-size":"90%","background-color":"#F8F8F8",color:"black"}},e.actions=new Map([["toggle",[function(t,e){t.adaptor.setAttribute(t.chtml,"toggle",t.node.attributes.get("selection"));var r=t.factory.jax.math,n=t.factory.jax.document,o=t.node;t.setEventHandler("click",(function(t){r.end.node||(r.start.node=r.end.node=r.typesetRoot,r.start.n=r.end.n=0),o.nextToggleSelection(),r.rerender(n),t.stopPropagation()}))},{}]],["tooltip",[function(t,e){var r=t.childNodes[1];if(r)if(r.node.isKind("mtext")){var n=r.node.getText();t.adaptor.setAttribute(t.chtml,"title",n)}else{var o=t.adaptor,i=o.append(t.chtml,t.html("mjx-tool",{style:{bottom:t.em(-t.dy),right:t.em(-t.dx)}},[t.html("mjx-tip")]));r.toCHTML(o.firstChild(i)),t.setEventHandler("mouseover",(function(r){e.stopTimers(t,e);var n=setTimeout((function(){return o.setStyle(i,"display","block")}),e.postDelay);e.hoverTimer.set(t,n),r.stopPropagation()})),t.setEventHandler("mouseout",(function(r){e.stopTimers(t,e);var n=setTimeout((function(){return o.setStyle(i,"display","")}),e.clearDelay);e.clearTimer.set(t,n),r.stopPropagation()}))}},a.TooltipData]],["statusline",[function(t,e){var r=t.childNodes[1];if(r&&r.node.isKind("mtext")){var n=t.adaptor,o=r.node.getText();n.setAttribute(t.chtml,"statusline",o),t.setEventHandler("mouseover",(function(r){if(null===e.status){var i=n.body(n.document);e.status=n.append(i,t.html("mjx-status",{},[t.text(o)]))}r.stopPropagation()})),t.setEventHandler("mouseout",(function(t){e.status&&(n.remove(e.status),e.status=null),t.stopPropagation()}))}},{status:null}]]]),e}((0,s.CommonMactionMixin)(i.CHTMLWrapper));e.CHTMLmaction=c},804:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmath=void 0;var s=r(5355),a=r(7490),l=r(3233),c=r(6469),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e);var r=this.chtml,n=this.adaptor;"block"===this.node.attributes.get("display")?(n.setAttribute(r,"display","true"),n.setAttribute(e,"display","true"),this.handleDisplay(e)):this.handleInline(e),n.addClass(r,"MJX-TEX")},e.prototype.handleDisplay=function(t){var e=this.adaptor,r=i(this.getAlignShift(),2),n=r[0],o=r[1];if("center"!==n&&e.setAttribute(t,"justify",n),this.bbox.pwidth===c.BBox.fullWidth){if(e.setAttribute(t,"width","full"),this.jax.table){var s=this.jax.table.getOuterBBox(),a=s.L,l=s.w,u=s.R;"right"===n?u=Math.max(u||-o,-o):"left"===n?a=Math.max(a||o,o):"center"===n&&(l+=2*Math.abs(o));var p=this.em(Math.max(0,a+l+u));e.setStyle(t,"min-width",p),e.setStyle(this.jax.table.chtml,"min-width",p)}}else this.setIndent(this.chtml,n,o)},e.prototype.handleInline=function(t){var e=this.adaptor,r=e.getStyle(this.chtml,"margin-right");r&&(e.setStyle(this.chtml,"margin-right",""),e.setStyle(t,"margin-right",r),e.setStyle(t,"width","0"))},e.prototype.setChildPWidths=function(e,r,n){return void 0===r&&(r=null),void 0===n&&(n=!0),!!this.parent&&t.prototype.setChildPWidths.call(this,e,r,n)},e.kind=l.MmlMath.prototype.kind,e.styles={"mjx-math":{"line-height":0,"text-align":"left","text-indent":0,"font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","letter-spacing":"normal","border-collapse":"collapse","word-wrap":"normal","word-spacing":"normal","white-space":"nowrap",direction:"ltr",padding:"1px 0"},'mjx-container[jax="CHTML"][display="true"]':{display:"block","text-align":"center",margin:"1em 0"},'mjx-container[jax="CHTML"][display="true"][width="full"]':{display:"flex"},'mjx-container[jax="CHTML"][display="true"] mjx-math':{padding:0},'mjx-container[jax="CHTML"][justify="left"]':{"text-align":"left"},'mjx-container[jax="CHTML"][justify="right"]':{"text-align":"right"}},e}((0,a.CommonMathMixin)(s.CHTMLWrapper));e.CHTMLmath=u},8147:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return s(e,t),e},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmenclose=void 0;var u=r(5355),p=r(7313),h=a(r(8270)),f=r(6661),d=r(6010);function m(t,e){return Math.atan2(t,e).toFixed(3).replace(/\.?0+$/,"")}var y=m(h.ARROWDX,h.ARROWY),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e,r,n,o,i=this.adaptor,s=this.standardCHTMLnode(t),a=i.append(s,this.html("mjx-box"));this.renderChild?this.renderChild(this,a):this.childNodes[0].toCHTML(a);try{for(var c=l(Object.keys(this.notations)),u=c.next();!u.done;u=c.next()){var p=u.value,f=this.notations[p];!f.renderChild&&f.renderer(this,a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}var d=this.getPadding();try{for(var m=l(h.sideNames),y=m.next();!y.done;y=m.next()){var g=y.value,b=h.sideIndex[g];d[b]>0&&i.setStyle(a,"padding-"+g,this.em(d[b]))}}catch(t){n={error:t}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(n)throw n.error}}},e.prototype.arrow=function(t,e,r,n,o){void 0===n&&(n=""),void 0===o&&(o=0);var i=this.getBBox().w,s={width:this.em(t)};i!==t&&(s.left=this.em((i-t)/2)),e&&(s.transform="rotate("+this.fixed(e)+"rad)");var a=this.html("mjx-arrow",{style:s},[this.html("mjx-aline"),this.html("mjx-rthead"),this.html("mjx-rbhead")]);return r&&(this.adaptor.append(a,this.html("mjx-lthead")),this.adaptor.append(a,this.html("mjx-lbhead")),this.adaptor.setAttribute(a,"double","true")),this.adjustArrow(a,r),this.moveArrow(a,n,o),a},e.prototype.adjustArrow=function(t,e){var r=this,n=this.thickness,o=this.arrowhead;if(o.x!==h.ARROWX||o.y!==h.ARROWY||o.dx!==h.ARROWDX||n!==h.THICKNESS){var i=c([n*o.x,n*o.y].map((function(t){return r.em(t)})),2),s=i[0],a=i[1],l=m(o.dx,o.y),u=c(this.adaptor.childNodes(t),5),p=u[0],f=u[1],d=u[2],y=u[3],g=u[4];this.adjustHead(f,[a,"0","1px",s],l),this.adjustHead(d,["1px","0",a,s],"-"+l),this.adjustHead(y,[a,s,"1px","0"],"-"+l),this.adjustHead(g,["1px",s,a,"0"],l),this.adjustLine(p,n,o.x,e)}},e.prototype.adjustHead=function(t,e,r){t&&(this.adaptor.setStyle(t,"border-width",e.join(" ")),this.adaptor.setStyle(t,"transform","skewX("+r+"rad)"))},e.prototype.adjustLine=function(t,e,r,n){this.adaptor.setStyle(t,"borderTop",this.em(e)+" solid"),this.adaptor.setStyle(t,"top",this.em(-e/2)),this.adaptor.setStyle(t,"right",this.em(e*(r-1))),n&&this.adaptor.setStyle(t,"left",this.em(e*(r-1)))},e.prototype.moveArrow=function(t,e,r){if(r){var n=this.adaptor.getStyle(t,"transform");this.adaptor.setStyle(t,"transform","translate".concat(e,"(").concat(this.em(-r),")").concat(n?" "+n:""))}},e.prototype.adjustBorder=function(t){return this.thickness!==h.THICKNESS&&this.adaptor.setStyle(t,"borderWidth",this.em(this.thickness)),t},e.prototype.adjustThickness=function(t){return this.thickness!==h.THICKNESS&&this.adaptor.setStyle(t,"strokeWidth",this.fixed(this.thickness)),t},e.prototype.fixed=function(t,e){return void 0===e&&(e=3),Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")},e.prototype.em=function(e){return t.prototype.em.call(this,e)},e.kind=f.MmlMenclose.prototype.kind,e.styles={"mjx-menclose":{position:"relative"},"mjx-menclose > mjx-dstrike":{display:"inline-block",left:0,top:0,position:"absolute","border-top":h.SOLID,"transform-origin":"top left"},"mjx-menclose > mjx-ustrike":{display:"inline-block",left:0,bottom:0,position:"absolute","border-top":h.SOLID,"transform-origin":"bottom left"},"mjx-menclose > mjx-hstrike":{"border-top":h.SOLID,position:"absolute",left:0,right:0,bottom:"50%",transform:"translateY("+(0,d.em)(h.THICKNESS/2)+")"},"mjx-menclose > mjx-vstrike":{"border-left":h.SOLID,position:"absolute",top:0,bottom:0,right:"50%",transform:"translateX("+(0,d.em)(h.THICKNESS/2)+")"},"mjx-menclose > mjx-rbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:h.SOLID,"border-radius":(0,d.em)(h.THICKNESS+h.PADDING)},"mjx-menclose > mjx-cbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:h.SOLID,"border-radius":"50%"},"mjx-menclose > mjx-arrow":{position:"absolute",left:0,bottom:"50%",height:0,width:0},"mjx-menclose > mjx-arrow > *":{display:"block",position:"absolute","transform-origin":"bottom","border-left":(0,d.em)(h.THICKNESS*h.ARROWX)+" solid","border-right":0,"box-sizing":"border-box"},"mjx-menclose > mjx-arrow > mjx-aline":{left:0,top:(0,d.em)(-h.THICKNESS/2),right:(0,d.em)(h.THICKNESS*(h.ARROWX-1)),height:0,"border-top":(0,d.em)(h.THICKNESS)+" solid","border-left":0},"mjx-menclose > mjx-arrow[double] > mjx-aline":{left:(0,d.em)(h.THICKNESS*(h.ARROWX-1)),height:0},"mjx-menclose > mjx-arrow > mjx-rthead":{transform:"skewX("+y+"rad)",right:0,bottom:"-1px","border-bottom":"1px solid transparent","border-top":(0,d.em)(h.THICKNESS*h.ARROWY)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-rbhead":{transform:"skewX(-"+y+"rad)","transform-origin":"top",right:0,top:"-1px","border-top":"1px solid transparent","border-bottom":(0,d.em)(h.THICKNESS*h.ARROWY)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lthead":{transform:"skewX(-"+y+"rad)",left:0,bottom:"-1px","border-left":0,"border-right":(0,d.em)(h.THICKNESS*h.ARROWX)+" solid","border-bottom":"1px solid transparent","border-top":(0,d.em)(h.THICKNESS*h.ARROWY)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lbhead":{transform:"skewX("+y+"rad)","transform-origin":"top",left:0,top:"-1px","border-left":0,"border-right":(0,d.em)(h.THICKNESS*h.ARROWX)+" solid","border-top":"1px solid transparent","border-bottom":(0,d.em)(h.THICKNESS*h.ARROWY)+" solid transparent"},"mjx-menclose > dbox":{position:"absolute",top:0,bottom:0,left:(0,d.em)(-1.5*h.PADDING),width:(0,d.em)(3*h.PADDING),border:(0,d.em)(h.THICKNESS)+" solid","border-radius":"50%","clip-path":"inset(0 0 0 "+(0,d.em)(1.5*h.PADDING)+")","box-sizing":"border-box"}},e.notations=new Map([h.Border("top"),h.Border("right"),h.Border("bottom"),h.Border("left"),h.Border2("actuarial","top","right"),h.Border2("madruwb","bottom","right"),h.DiagonalStrike("up",1),h.DiagonalStrike("down",-1),["horizontalstrike",{renderer:h.RenderElement("hstrike","Y"),bbox:function(t){return[0,t.padding,0,t.padding]}}],["verticalstrike",{renderer:h.RenderElement("vstrike","X"),bbox:function(t){return[t.padding,0,t.padding,0]}}],["box",{renderer:function(t,e){t.adaptor.setStyle(e,"border",t.em(t.thickness)+" solid")},bbox:h.fullBBox,border:h.fullBorder,remove:"left right top bottom"}],["roundedbox",{renderer:h.RenderElement("rbox"),bbox:h.fullBBox}],["circle",{renderer:h.RenderElement("cbox"),bbox:h.fullBBox}],["phasorangle",{renderer:function(t,e){var r=t.getBBox(),n=r.h,o=r.d,i=c(t.getArgMod(1.75*t.padding,n+o),2),s=i[0],a=i[1],l=t.thickness*Math.sin(s)*.9;t.adaptor.setStyle(e,"border-bottom",t.em(t.thickness)+" solid");var u=t.adjustBorder(t.html("mjx-ustrike",{style:{width:t.em(a),transform:"translateX("+t.em(l)+") rotate("+t.fixed(-s)+"rad)"}}));t.adaptor.append(t.chtml,u)},bbox:function(t){var e=t.padding/2,r=t.thickness;return[2*e,e,e+r,3*e+r]},border:function(t){return[0,0,t.thickness,0]},remove:"bottom"}],h.Arrow("up"),h.Arrow("down"),h.Arrow("left"),h.Arrow("right"),h.Arrow("updown"),h.Arrow("leftright"),h.DiagonalArrow("updiagonal"),h.DiagonalArrow("northeast"),h.DiagonalArrow("southeast"),h.DiagonalArrow("northwest"),h.DiagonalArrow("southwest"),h.DiagonalArrow("northeastsouthwest"),h.DiagonalArrow("northwestsoutheast"),["longdiv",{renderer:function(t,e){var r=t.adaptor;r.setStyle(e,"border-top",t.em(t.thickness)+" solid");var n=r.append(t.chtml,t.html("dbox")),o=t.thickness,i=t.padding;o!==h.THICKNESS&&r.setStyle(n,"border-width",t.em(o)),i!==h.PADDING&&(r.setStyle(n,"left",t.em(-1.5*i)),r.setStyle(n,"width",t.em(3*i)),r.setStyle(n,"clip-path","inset(0 0 0 "+t.em(1.5*i)+")"))},bbox:function(t){var e=t.padding,r=t.thickness;return[e+r,e,e,2*e+r/2]}}],["radical",{renderer:function(t,e){t.msqrt.toCHTML(e);var r=t.sqrtTRBL();t.adaptor.setStyle(t.msqrt.chtml,"margin",r.map((function(e){return t.em(-e)})).join(" "))},init:function(t){t.msqrt=t.createMsqrt(t.childNodes[0])},bbox:function(t){return t.sqrtTRBL()},renderChild:!0}]]),e}((0,p.CommonMencloseMixin)(u.CHTMLWrapper));e.CHTMLmenclose=g},2275:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmfenced=void 0;var i=r(5355),s=r(7555),a=r(5410),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e=this.standardCHTMLnode(t);this.mrow.toCHTML(e)},e.kind=a.MmlMfenced.prototype.kind,e}((0,s.CommonMfencedMixin)(i.CHTMLWrapper));e.CHTMLmfenced=l},9063:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmfrac=void 0;var s=r(5355),a=r(2688),l=r(6850),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){this.standardCHTMLnode(t);var e=this.node.attributes.getList("linethickness","bevelled"),r=e.linethickness,n=e.bevelled,o=this.isDisplay();if(n)this.makeBevelled(o);else{var i=this.length2em(String(r),.06);0===i?this.makeAtop(o):this.makeFraction(o,i)}},e.prototype.makeFraction=function(t,e){var r,n,o=this.node.attributes.getList("numalign","denomalign"),s=o.numalign,a=o.denomalign,l=t?{type:"d"}:{},c=this.node.getProperty("withDelims")?i(i({},l),{delims:"true"}):i({},l),u="center"!==s?{align:s}:{},p="center"!==a?{align:a}:{},h=i({},l),f=i({},l),d=this.font.params;if(.06!==e){var m=d.axis_height,y=this.em(e),g=this.getTUV(t,e),b=g.T,v=g.u,_=g.v,S=(t?this.em(3*e):y)+" -.1em";l.style={height:y,"border-top":y+" solid",margin:S};var M=this.em(Math.max(0,v));f.style={height:M,"vertical-align":"-"+M},h.style={height:this.em(Math.max(0,_))},c.style={"vertical-align":this.em(m-b)}}this.adaptor.append(this.chtml,this.html("mjx-frac",c,[r=this.html("mjx-num",u,[this.html("mjx-nstrut",f)]),this.html("mjx-dbox",{},[this.html("mjx-dtable",{},[this.html("mjx-line",l),this.html("mjx-row",{},[n=this.html("mjx-den",p,[this.html("mjx-dstrut",h)])])])])])),this.childNodes[0].toCHTML(r),this.childNodes[1].toCHTML(n)},e.prototype.makeAtop=function(t){var e,r,n=this.node.attributes.getList("numalign","denomalign"),o=n.numalign,s=n.denomalign,a=t?{type:"d",atop:!0}:{atop:!0},l=this.node.getProperty("withDelims")?i(i({},a),{delims:!0}):i({},a),c="center"!==o?{align:o}:{},u="center"!==s?{align:s}:{},p=this.getUVQ(t),h=p.v,f=p.q;c.style={"padding-bottom":this.em(f)},l.style={"vertical-align":this.em(-h)},this.adaptor.append(this.chtml,this.html("mjx-frac",l,[e=this.html("mjx-num",c),r=this.html("mjx-den",u)])),this.childNodes[0].toCHTML(e),this.childNodes[1].toCHTML(r)},e.prototype.makeBevelled=function(t){var e=this.adaptor;e.setAttribute(this.chtml,"bevelled","ture");var r=e.append(this.chtml,this.html("mjx-num"));this.childNodes[0].toCHTML(r),this.bevel.toCHTML(this.chtml);var n=e.append(this.chtml,this.html("mjx-den"));this.childNodes[1].toCHTML(n);var o=this.getBevelData(t),i=o.u,s=o.v,a=o.delta,l=o.nbox,c=o.dbox;i&&e.setStyle(r,"verticalAlign",this.em(i/l.scale)),s&&e.setStyle(n,"verticalAlign",this.em(s/c.scale));var u=this.em(-a/2);e.setStyle(this.bevel.chtml,"marginLeft",u),e.setStyle(this.bevel.chtml,"marginRight",u)},e.kind=l.MmlMfrac.prototype.kind,e.styles={"mjx-frac":{display:"inline-block","vertical-align":"0.17em",padding:"0 .22em"},'mjx-frac[type="d"]':{"vertical-align":".04em"},"mjx-frac[delims]":{padding:"0 .1em"},"mjx-frac[atop]":{padding:"0 .12em"},"mjx-frac[atop][delims]":{padding:"0"},"mjx-dtable":{display:"inline-table",width:"100%"},"mjx-dtable > *":{"font-size":"2000%"},"mjx-dbox":{display:"block","font-size":"5%"},"mjx-num":{display:"block","text-align":"center"},"mjx-den":{display:"block","text-align":"center"},"mjx-mfrac[bevelled] > mjx-num":{display:"inline-block"},"mjx-mfrac[bevelled] > mjx-den":{display:"inline-block"},'mjx-den[align="right"], mjx-num[align="right"]':{"text-align":"right"},'mjx-den[align="left"], mjx-num[align="left"]':{"text-align":"left"},"mjx-nstrut":{display:"inline-block",height:".054em",width:0,"vertical-align":"-.054em"},'mjx-nstrut[type="d"]':{height:".217em","vertical-align":"-.217em"},"mjx-dstrut":{display:"inline-block",height:".505em",width:0},'mjx-dstrut[type="d"]':{height:".726em"},"mjx-line":{display:"block","box-sizing":"border-box","min-height":"1px",height:".06em","border-top":".06em solid",margin:".06em -.1em",overflow:"hidden"},'mjx-line[type="d"]':{margin:".18em -.1em"}},e}((0,a.CommonMfracMixin)(s.CHTMLWrapper));e.CHTMLmfrac=c},6911:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmglyph=void 0;var i=r(5355),s=r(5636),a=r(3985),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e=this.standardCHTMLnode(t);if(this.charWrapper)this.charWrapper.toCHTML(e);else{var r=this.node.attributes.getList("src","alt"),n=r.src,o=r.alt,i={width:this.em(this.width),height:this.em(this.height)};this.valign&&(i.verticalAlign=this.em(this.valign));var s=this.html("img",{src:n,style:i,alt:o,title:o});this.adaptor.append(e,s)}},e.kind=a.MmlMglyph.prototype.kind,e.styles={"mjx-mglyph > img":{display:"inline-block",border:0,padding:0}},e}((0,s.CommonMglyphMixin)(i.CHTMLWrapper));e.CHTMLmglyph=l},1653:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmi=void 0;var i=r(5355),s=r(5723),a=r(450),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.kind=a.MmlMi.prototype.kind,e}((0,s.CommonMiMixin)(i.CHTMLWrapper));e.CHTMLmi=l},6781:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmmultiscripts=void 0;var s=r(4300),a=r(8009),l=r(6405),c=r(505),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e=this.standardCHTMLnode(t),r=this.scriptData,n=this.node.getProperty("scriptalign")||"right left",o=i((0,c.split)(n+" "+n),2),s=o[0],a=o[1],l=this.combinePrePost(r.sub,r.psub),u=this.combinePrePost(r.sup,r.psup),p=i(this.getUVQ(l,u),2),h=p[0],f=p[1];if(r.numPrescripts){var d=this.addScripts(h,-f,!0,r.psub,r.psup,this.firstPrescript,r.numPrescripts);"right"!==s&&this.adaptor.setAttribute(d,"script-align",s)}if(this.childNodes[0].toCHTML(e),r.numScripts){d=this.addScripts(h,-f,!1,r.sub,r.sup,1,r.numScripts);"left"!==a&&this.adaptor.setAttribute(d,"script-align",a)}},e.prototype.addScripts=function(t,e,r,n,o,i,s){for(var a=this.adaptor,l=t-o.d+(e-n.h),c=t<0&&0===e?n.h+t:t,u=l>0?{style:{height:this.em(l)}}:{},p=c?{style:{"vertical-align":this.em(c)}}:{},h=this.html("mjx-row"),f=this.html("mjx-row",u),d=this.html("mjx-row"),m="mjx-"+(r?"pre":"")+"scripts",y=i+2*s;i<y;)this.childNodes[i++].toCHTML(a.append(d,this.html("mjx-cell"))),this.childNodes[i++].toCHTML(a.append(h,this.html("mjx-cell")));return a.append(this.chtml,this.html(m,p,[h,f,d]))},e.kind=l.MmlMmultiscripts.prototype.kind,e.styles={"mjx-prescripts":{display:"inline-table","padding-left":".05em"},"mjx-scripts":{display:"inline-table","padding-right":".05em"},"mjx-prescripts > mjx-row > mjx-cell":{"text-align":"right"},'[script-align="left"] > mjx-row > mjx-cell':{"text-align":"left"},'[script-align="center"] > mjx-row > mjx-cell':{"text-align":"center"},'[script-align="right"] > mjx-row > mjx-cell':{"text-align":"right"}},e}((0,a.CommonMmultiscriptsMixin)(s.CHTMLmsubsup));e.CHTMLmmultiscripts=u},6460:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmn=void 0;var i=r(5355),s=r(5023),a=r(3050),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.kind=a.MmlMn.prototype.kind,e}((0,s.CommonMnMixin)(i.CHTMLWrapper));e.CHTMLmn=l},6287:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmo=void 0;var s=r(5355),a=r(7096),l=r(2756),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e,r,n=this.node.attributes,o=n.get("symmetric")&&2!==this.stretch.dir,s=0!==this.stretch.dir;s&&null===this.size&&this.getStretchedVariant([]);var a=this.standardCHTMLnode(t);if(s&&this.size<0)this.stretchHTML(a);else{if(o||n.get("largeop")){var l=this.em(this.getCenterOffset());"0"!==l&&this.adaptor.setStyle(a,"verticalAlign",l)}this.node.getProperty("mathaccent")&&(this.adaptor.setStyle(a,"width","0"),this.adaptor.setStyle(a,"margin-left",this.em(this.getAccentOffset())));try{for(var c=i(this.childNodes),u=c.next();!u.done;u=c.next()){u.value.toCHTML(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}}},e.prototype.stretchHTML=function(t){var e=this.getText().codePointAt(0);this.font.delimUsage.add(e),this.childNodes[0].markUsed();var r=this.stretch,n=r.stretch,o=[];n[0]&&o.push(this.html("mjx-beg",{},[this.html("mjx-c")])),o.push(this.html("mjx-ext",{},[this.html("mjx-c")])),4===n.length&&o.push(this.html("mjx-mid",{},[this.html("mjx-c")]),this.html("mjx-ext",{},[this.html("mjx-c")])),n[2]&&o.push(this.html("mjx-end",{},[this.html("mjx-c")]));var i={},s=this.bbox,l=s.h,c=s.d,u=s.w;1===r.dir?(o.push(this.html("mjx-mark")),i.height=this.em(l+c),i.verticalAlign=this.em(-c)):i.width=this.em(u);var p=a.DirectionVH[r.dir],h={class:this.char(r.c||e),style:i},f=this.html("mjx-stretchy-"+p,h,o);this.adaptor.append(t,f)},e.kind=l.MmlMo.prototype.kind,e.styles={"mjx-stretchy-h":{display:"inline-table",width:"100%"},"mjx-stretchy-h > *":{display:"table-cell",width:0},"mjx-stretchy-h > * > mjx-c":{display:"inline-block",transform:"scalex(1.0000001)"},"mjx-stretchy-h > * > mjx-c::before":{display:"inline-block",width:"initial"},"mjx-stretchy-h > mjx-ext":{"/* IE */ overflow":"hidden","/* others */ overflow":"clip visible",width:"100%"},"mjx-stretchy-h > mjx-ext > mjx-c::before":{transform:"scalex(500)"},"mjx-stretchy-h > mjx-ext > mjx-c":{width:0},"mjx-stretchy-h > mjx-beg > mjx-c":{"margin-right":"-.1em"},"mjx-stretchy-h > mjx-end > mjx-c":{"margin-left":"-.1em"},"mjx-stretchy-v":{display:"inline-block"},"mjx-stretchy-v > *":{display:"block"},"mjx-stretchy-v > mjx-beg":{height:0},"mjx-stretchy-v > mjx-end > mjx-c":{display:"block"},"mjx-stretchy-v > * > mjx-c":{transform:"scaley(1.0000001)","transform-origin":"left center",overflow:"hidden"},"mjx-stretchy-v > mjx-ext":{display:"block",height:"100%","box-sizing":"border-box",border:"0px solid transparent","/* IE */ overflow":"hidden","/* others */ overflow":"visible clip"},"mjx-stretchy-v > mjx-ext > mjx-c::before":{width:"initial","box-sizing":"border-box"},"mjx-stretchy-v > mjx-ext > mjx-c":{transform:"scaleY(500) translateY(.075em)",overflow:"visible"},"mjx-mark":{display:"inline-block",height:"0px"}},e}((0,a.CommonMoMixin)(s.CHTMLWrapper));e.CHTMLmo=c},5964:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmpadded=void 0;var a=r(5355),l=r(6898),c=r(7238),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e,r,n=this.standardCHTMLnode(t),o=[],a={},l=i(this.getDimens(),9),c=l[2],u=l[3],p=l[4],h=l[5],f=l[6],d=l[7],m=l[8];if(h&&(a.width=this.em(c+h)),(u||p)&&(a.margin=this.em(u)+" 0 "+this.em(p)),f+m||d){a.position="relative";var y=this.html("mjx-rbox",{style:{left:this.em(f+m),top:this.em(-d),"max-width":a.width}});f+m&&this.childNodes[0].getBBox().pwidth&&(this.adaptor.setAttribute(y,"width","full"),this.adaptor.setStyle(y,"left",this.em(f))),o.push(y)}n=this.adaptor.append(n,this.html("mjx-block",{style:a},o));try{for(var g=s(this.childNodes),b=g.next();!b.done;b=g.next()){b.value.toCHTML(o[0]||n)}}catch(t){e={error:t}}finally{try{b&&!b.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}},e.kind=c.MmlMpadded.prototype.kind,e.styles={"mjx-mpadded":{display:"inline-block"},"mjx-rbox":{display:"inline-block",position:"relative"}},e}((0,l.CommonMpaddedMixin)(a.CHTMLWrapper));e.CHTMLmpadded=u},8776:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmroot=void 0;var s=r(5610),a=r(6991),l=r(6145),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.addRoot=function(t,e,r,n){e.toCHTML(t);var o=i(this.getRootDimens(r,n),3),s=o[0],a=o[1],l=o[2];this.adaptor.setStyle(t,"verticalAlign",this.em(a)),this.adaptor.setStyle(t,"width",this.em(s)),l&&this.adaptor.setStyle(this.adaptor.firstChild(t),"paddingLeft",this.em(l))},e.kind=l.MmlMroot.prototype.kind,e}((0,a.CommonMrootMixin)(s.CHTMLmsqrt));e.CHTMLmroot=c},4798:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLinferredMrow=e.CHTMLmrow=void 0;var s=r(5355),a=r(8411),l=r(8411),c=r(9878),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e,r,n=this.node.isInferred?this.chtml=t:this.standardCHTMLnode(t),o=!1;try{for(var s=i(this.childNodes),a=s.next();!a.done;a=s.next()){var l=a.value;l.toCHTML(n),l.bbox.w<0&&(o=!0)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}if(o){var c=this.getBBox().w;c&&(this.adaptor.setStyle(n,"width",this.em(Math.max(0,c))),c<0&&this.adaptor.setStyle(n,"marginRight",this.em(c)))}},e.kind=c.MmlMrow.prototype.kind,e}((0,a.CommonMrowMixin)(s.CHTMLWrapper));e.CHTMLmrow=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.kind=c.MmlInferredMrow.prototype.kind,e}((0,l.CommonInferredMrowMixin)(u));e.CHTMLinferredMrow=p},4597:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLms=void 0;var i=r(5355),s=r(4126),a=r(7265),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.kind=a.MmlMs.prototype.kind,e}((0,s.CommonMsMixin)(i.CHTMLWrapper));e.CHTMLms=l},2970:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmspace=void 0;var i=r(5355),s=r(258),a=r(6030),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e=this.standardCHTMLnode(t),r=this.getBBox(),n=r.w,o=r.h,i=r.d;n<0&&(this.adaptor.setStyle(e,"marginRight",this.em(n)),n=0),n&&this.adaptor.setStyle(e,"width",this.em(n)),(o=Math.max(0,o+i))&&this.adaptor.setStyle(e,"height",this.em(Math.max(0,o))),i&&this.adaptor.setStyle(e,"verticalAlign",this.em(-i))},e.kind=a.MmlMspace.prototype.kind,e}((0,s.CommonMspaceMixin)(i.CHTMLWrapper));e.CHTMLmspace=l},5610:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmsqrt=void 0;var s=r(5355),a=r(4093),l=r(7131),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e,r,n,o,s=this.childNodes[this.surd],a=this.childNodes[this.base],l=s.getBBox(),c=a.getOuterBBox(),u=i(this.getPQ(l),2)[1],p=this.font.params.rule_thickness,h=c.h+u+p,f=this.standardCHTMLnode(t);null!=this.root&&(n=this.adaptor.append(f,this.html("mjx-root")),o=this.childNodes[this.root]);var d=this.adaptor.append(f,this.html("mjx-sqrt",{},[e=this.html("mjx-surd"),r=this.html("mjx-box",{style:{paddingTop:this.em(u)}})]));this.addRoot(n,o,l,h),s.toCHTML(e),a.toCHTML(r),s.size<0&&this.adaptor.addClass(d,"mjx-tall")},e.prototype.addRoot=function(t,e,r,n){},e.kind=l.MmlMsqrt.prototype.kind,e.styles={"mjx-root":{display:"inline-block","white-space":"nowrap"},"mjx-surd":{display:"inline-block","vertical-align":"top"},"mjx-sqrt":{display:"inline-block","padding-top":".07em"},"mjx-sqrt > mjx-box":{"border-top":".07em solid"},"mjx-sqrt.mjx-tall > mjx-box":{"padding-left":".3em","margin-left":"-.3em"}},e}((0,a.CommonMsqrtMixin)(s.CHTMLWrapper));e.CHTMLmsqrt=c},4300:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmsubsup=e.CHTMLmsup=e.CHTMLmsub=void 0;var s=r(8650),a=r(905),l=r(905),c=r(905),u=r(4461),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.kind=u.MmlMsub.prototype.kind,e}((0,a.CommonMsubMixin)(s.CHTMLscriptbase));e.CHTMLmsub=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.kind=u.MmlMsup.prototype.kind,e}((0,l.CommonMsupMixin)(s.CHTMLscriptbase));e.CHTMLmsup=h;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e=this.adaptor,r=this.standardCHTMLnode(t),n=i([this.baseChild,this.supChild,this.subChild],3),o=n[0],s=n[1],a=n[2],l=i(this.getUVQ(),3),c=l[1],u=l[2],p={"vertical-align":this.em(c)};o.toCHTML(r);var h=e.append(r,this.html("mjx-script",{style:p}));s.toCHTML(h),e.append(h,this.html("mjx-spacer",{style:{"margin-top":this.em(u)}})),a.toCHTML(h);var f=this.getAdjustedIc();f&&e.setStyle(s.chtml,"marginLeft",this.em(f/s.bbox.rscale)),this.baseRemoveIc&&e.setStyle(h,"marginLeft",this.em(-this.baseIc))},e.kind=u.MmlMsubsup.prototype.kind,e.styles={"mjx-script":{display:"inline-block","padding-right":".05em","padding-left":".033em"},"mjx-script > mjx-spacer":{display:"block"}},e}((0,c.CommonMsubsupMixin)(s.CHTMLscriptbase));e.CHTMLmsubsup=f},8002:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmtable=void 0;var a=r(5355),l=r(6237),c=r(1349),u=r(505),p=function(t){function e(e,r,n){void 0===n&&(n=null);var o=t.call(this,e,r,n)||this;return o.itable=o.html("mjx-itable"),o.labels=o.html("mjx-itable"),o}return o(e,t),e.prototype.getAlignShift=function(){var e=t.prototype.getAlignShift.call(this);return this.isTop||(e[1]=0),e},e.prototype.toCHTML=function(t){var e,r,n=this.standardCHTMLnode(t);this.adaptor.append(n,this.html("mjx-table",{},[this.itable]));try{for(var o=i(this.childNodes),s=o.next();!s.done;s=o.next()){s.value.toCHTML(this.itable)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}this.padRows(),this.handleColumnSpacing(),this.handleColumnLines(),this.handleColumnWidths(),this.handleRowSpacing(),this.handleRowLines(),this.handleRowHeights(),this.handleFrame(),this.handleWidth(),this.handleLabels(),this.handleAlign(),this.handleJustify(),this.shiftColor()},e.prototype.shiftColor=function(){var t=this.adaptor,e=t.getStyle(this.chtml,"backgroundColor");e&&(t.setStyle(this.chtml,"backgroundColor",""),t.setStyle(this.itable,"backgroundColor",e))},e.prototype.padRows=function(){var t,e,r=this.adaptor;try{for(var n=i(r.childNodes(this.itable)),o=n.next();!o.done;o=n.next())for(var s=o.value;r.childNodes(s).length<this.numCols;)r.append(s,this.html("mjx-mtd",{extra:!0}))}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.handleColumnSpacing=function(){var t,e,r,n,o=this.childNodes[0]?1/this.childNodes[0].getBBox().rscale:1,s=this.getEmHalfSpacing(this.fSpace[0],this.cSpace,o),a=this.frame;try{for(var l=i(this.tableRows),c=l.next();!c.done;c=l.next()){var u=c.value,p=0;try{for(var h=(r=void 0,i(u.tableCells)),f=h.next();!f.done;f=h.next()){var d=f.value,m=s[p++],y=s[p],g=d?d.chtml:this.adaptor.childNodes(u.chtml)[p];(p>1&&"0.4em"!==m||a&&1===p)&&this.adaptor.setStyle(g,"paddingLeft",m),(p<this.numCols&&"0.4em"!==y||a&&p===this.numCols)&&this.adaptor.setStyle(g,"paddingRight",y)}}catch(t){r={error:t}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}},e.prototype.handleColumnLines=function(){var t,e,r,n;if("none"!==this.node.attributes.get("columnlines")){var o=this.getColumnAttributes("columnlines");try{for(var s=i(this.childNodes),a=s.next();!a.done;a=s.next()){var l=a.value,c=0;try{for(var u=(r=void 0,i(this.adaptor.childNodes(l.chtml).slice(1))),p=u.next();!p.done;p=u.next()){var h=p.value,f=o[c++];"none"!==f&&this.adaptor.setStyle(h,"borderLeft",".07em "+f)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}}},e.prototype.handleColumnWidths=function(){var t,e,r,n;try{for(var o=i(this.childNodes),s=o.next();!s.done;s=o.next()){var a=s.value,l=0;try{for(var c=(r=void 0,i(this.adaptor.childNodes(a.chtml))),u=c.next();!u.done;u=c.next()){var p=u.value,h=this.cWidths[l++];if(null!==h){var f="number"==typeof h?this.em(h):h;this.adaptor.setStyle(p,"width",f),this.adaptor.setStyle(p,"maxWidth",f),this.adaptor.setStyle(p,"minWidth",f)}}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.handleRowSpacing=function(){var t,e,r,n,o=this.childNodes[0]?1/this.childNodes[0].getBBox().rscale:1,s=this.getEmHalfSpacing(this.fSpace[1],this.rSpace,o),a=this.frame,l=0;try{for(var c=i(this.childNodes),u=c.next();!u.done;u=c.next()){var p=u.value,h=s[l++],f=s[l];try{for(var d=(r=void 0,i(p.childNodes)),m=d.next();!m.done;m=d.next()){var y=m.value;(l>1&&"0.215em"!==h||a&&1===l)&&this.adaptor.setStyle(y.chtml,"paddingTop",h),(l<this.numRows&&"0.215em"!==f||a&&l===this.numRows)&&this.adaptor.setStyle(y.chtml,"paddingBottom",f)}}catch(t){r={error:t}}finally{try{m&&!m.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}},e.prototype.handleRowLines=function(){var t,e,r,n;if("none"!==this.node.attributes.get("rowlines")){var o=this.getRowAttributes("rowlines"),s=0;try{for(var a=i(this.childNodes.slice(1)),l=a.next();!l.done;l=a.next()){var c=l.value,u=o[s++];if("none"!==u)try{for(var p=(r=void 0,i(this.adaptor.childNodes(c.chtml))),h=p.next();!h.done;h=p.next()){var f=h.value;this.adaptor.setStyle(f,"borderTop",".07em "+u)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}}},e.prototype.handleRowHeights=function(){this.node.attributes.get("equalrows")&&this.handleEqualRows()},e.prototype.handleEqualRows=function(){for(var t=this.getRowHalfSpacing(),e=this.getTableData(),r=e.H,n=e.D,o=e.NH,i=e.ND,s=this.getEqualRowHeight(),a=0;a<this.numRows;a++){var l=this.childNodes[a];this.setRowHeight(l,s+t[a]+t[a+1]+this.rLines[a]),s!==o[a]+i[a]&&this.setRowBaseline(l,s,(s-r[a]+n[a])/2)}},e.prototype.setRowHeight=function(t,e){this.adaptor.setStyle(t.chtml,"height",this.em(e))},e.prototype.setRowBaseline=function(t,e,r){var n,o,s=t.node.attributes.get("rowalign");try{for(var a=i(t.childNodes),l=a.next();!l.done;l=a.next()){var c=l.value;if(this.setCellBaseline(c,s,e,r))break}}catch(t){n={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}},e.prototype.setCellBaseline=function(t,e,r,n){var o=t.node.attributes.get("rowalign");if("baseline"===o||"axis"===o){var i=this.adaptor,s=i.lastChild(t.chtml);i.setStyle(s,"height",this.em(r)),i.setStyle(s,"verticalAlign",this.em(-n));var a=t.parent;if(!(a.node.isKind("mlabeledtr")&&t===a.childNodes[0]||"baseline"!==e&&"axis"!==e))return!0}return!1},e.prototype.handleFrame=function(){this.frame&&this.fLine&&this.adaptor.setStyle(this.itable,"border",".07em "+this.node.attributes.get("frame"))},e.prototype.handleWidth=function(){var t=this.adaptor,e=this.getBBox(),r=e.w,n=e.L,o=e.R;t.setStyle(this.chtml,"minWidth",this.em(n+r+o));var i=this.node.attributes.get("width");if((0,u.isPercent)(i))t.setStyle(this.chtml,"width",""),t.setAttribute(this.chtml,"width","full");else if(!this.hasLabels){if("auto"===i)return;i=this.em(this.length2em(i)+2*this.fLine)}var s=t.firstChild(this.chtml);if(t.setStyle(s,"width",i),t.setStyle(s,"minWidth",this.em(r)),n||o){t.setStyle(this.chtml,"margin","");var a=this.node.attributes.get("data-width-includes-label")?"padding":"margin";n===o?t.setStyle(s,a,"0 "+this.em(o)):t.setStyle(s,a,"0 "+this.em(o)+" 0 "+this.em(n))}t.setAttribute(this.itable,"width","full")},e.prototype.handleAlign=function(){var t=s(this.getAlignmentRow(),2),e=t[0],r=t[1];if(null===r)"axis"!==e&&this.adaptor.setAttribute(this.chtml,"align",e);else{var n=this.getVerticalPosition(r,e);this.adaptor.setAttribute(this.chtml,"align","top"),this.adaptor.setStyle(this.chtml,"verticalAlign",this.em(n))}},e.prototype.handleJustify=function(){var t=this.getAlignShift()[0];"center"!==t&&this.adaptor.setAttribute(this.chtml,"justify",t)},e.prototype.handleLabels=function(){if(this.hasLabels){var t=this.labels,e=this.node.attributes,r=this.adaptor,n=e.get("side");r.setAttribute(this.chtml,"side",n),r.setAttribute(t,"align",n),r.setStyle(t,n,"0");var o=s(this.addLabelPadding(n),2),i=o[0],a=o[1];if(a){var l=r.firstChild(this.chtml);this.setIndent(l,i,a)}this.updateRowHeights(),this.addLabelSpacing()}},e.prototype.addLabelPadding=function(t){var e=s(this.getPadAlignShift(t),3),r=e[1],n=e[2],o={};if("right"===t&&!this.node.attributes.get("data-width-includes-label")){var i=this.node.attributes.get("width"),a=this.getBBox(),l=a.w,c=a.L,p=a.R;o.style={width:(0,u.isPercent)(i)?"calc("+i+" + "+this.em(c+p)+")":this.em(c+l+p)}}return this.adaptor.append(this.chtml,this.html("mjx-labels",o,[this.labels])),[r,n]},e.prototype.updateRowHeights=function(){for(var t=this.getTableData(),e=t.H,r=t.D,n=t.NH,o=t.ND,i=this.getRowHalfSpacing(),s=0;s<this.numRows;s++){var a=this.childNodes[s];this.setRowHeight(a,e[s]+r[s]+i[s]+i[s+1]+this.rLines[s]),e[s]!==n[s]||r[s]!==o[s]?this.setRowBaseline(a,e[s]+r[s],r[s]):a.node.isKind("mlabeledtr")&&this.setCellBaseline(a.childNodes[0],"",e[s]+r[s],r[s])}},e.prototype.addLabelSpacing=function(){for(var t=this.adaptor,e=this.node.attributes.get("equalrows"),r=this.getTableData(),n=r.H,o=r.D,i=e?this.getEqualRowHeight():0,s=this.getRowHalfSpacing(),a=this.fLine,l=t.firstChild(this.labels),c=0;c<this.numRows;c++){this.childNodes[c].node.isKind("mlabeledtr")?(a&&t.insert(this.html("mjx-mtr",{style:{height:this.em(a)}}),l),t.setStyle(l,"height",this.em((e?i:n[c]+o[c])+s[c]+s[c+1])),l=t.next(l),a=this.rLines[c]):a+=s[c]+(e?i:n[c]+o[c])+s[c+1]+this.rLines[c]}},e.kind=c.MmlMtable.prototype.kind,e.styles={"mjx-mtable":{"vertical-align":".25em","text-align":"center",position:"relative","box-sizing":"border-box","border-spacing":0,"border-collapse":"collapse"},'mjx-mstyle[size="s"] mjx-mtable':{"vertical-align":".354em"},"mjx-labels":{position:"absolute",left:0,top:0},"mjx-table":{display:"inline-block","vertical-align":"-.5ex","box-sizing":"border-box"},"mjx-table > mjx-itable":{"vertical-align":"middle","text-align":"left","box-sizing":"border-box"},"mjx-labels > mjx-itable":{position:"absolute",top:0},'mjx-mtable[justify="left"]':{"text-align":"left"},'mjx-mtable[justify="right"]':{"text-align":"right"},'mjx-mtable[justify="left"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="left"][side="right"]':{"padding-left":"0 ! important"},'mjx-mtable[justify="right"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="right"][side="right"]':{"padding-left":"0 ! important"},"mjx-mtable[align]":{"vertical-align":"baseline"},'mjx-mtable[align="top"] > mjx-table':{"vertical-align":"top"},'mjx-mtable[align="bottom"] > mjx-table':{"vertical-align":"bottom"},'mjx-mtable[side="right"] mjx-labels':{"min-width":"100%"}},e}((0,l.CommonMtableMixin)(a.CHTMLWrapper));e.CHTMLmtable=p},7056:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmtd=void 0;var i=r(5355),s=r(5164),a=r(4359),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e);var r=this.node.attributes.get("rowalign"),n=this.node.attributes.get("columnalign");r!==this.parent.node.attributes.get("rowalign")&&this.adaptor.setAttribute(this.chtml,"rowalign",r),"center"===n||"mlabeledtr"===this.parent.kind&&this===this.parent.childNodes[0]&&n===this.parent.parent.node.attributes.get("side")||this.adaptor.setStyle(this.chtml,"textAlign",n),this.parent.parent.node.getProperty("useHeight")&&this.adaptor.append(this.chtml,this.html("mjx-tstrut"))},e.kind=a.MmlMtd.prototype.kind,e.styles={"mjx-mtd":{display:"table-cell","text-align":"center",padding:".215em .4em"},"mjx-mtd:first-child":{"padding-left":0},"mjx-mtd:last-child":{"padding-right":0},"mjx-mtable > * > mjx-itable > *:first-child > mjx-mtd":{"padding-top":0},"mjx-mtable > * > mjx-itable > *:last-child > mjx-mtd":{"padding-bottom":0},"mjx-tstrut":{display:"inline-block",height:"1em","vertical-align":"-.25em"},'mjx-labels[align="left"] > mjx-mtr > mjx-mtd':{"text-align":"left"},'mjx-labels[align="right"] > mjx-mtr > mjx-mtd':{"text-align":"right"},"mjx-mtd[extra]":{padding:0},'mjx-mtd[rowalign="top"]':{"vertical-align":"top"},'mjx-mtd[rowalign="center"]':{"vertical-align":"middle"},'mjx-mtd[rowalign="bottom"]':{"vertical-align":"bottom"},'mjx-mtd[rowalign="baseline"]':{"vertical-align":"baseline"},'mjx-mtd[rowalign="axis"]':{"vertical-align":".25em"}},e}((0,s.CommonMtdMixin)(i.CHTMLWrapper));e.CHTMLmtd=l},1259:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmtext=void 0;var i=r(5355),s=r(6319),a=r(4770),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.kind=a.MmlMtext.prototype.kind,e}((0,s.CommonMtextMixin)(i.CHTMLWrapper));e.CHTMLmtext=l},3571:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmlabeledtr=e.CHTMLmtr=void 0;var i=r(5355),s=r(5766),a=r(5766),l=r(5022),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e);var r=this.node.attributes.get("rowalign");"baseline"!==r&&this.adaptor.setAttribute(this.chtml,"rowalign",r)},e.kind=l.MmlMtr.prototype.kind,e.styles={"mjx-mtr":{display:"table-row"},'mjx-mtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}},e}((0,s.CommonMtrMixin)(i.CHTMLWrapper));e.CHTMLmtr=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e);var r=this.adaptor.firstChild(this.chtml);if(r){this.adaptor.remove(r);var n=this.node.attributes.get("rowalign"),o="baseline"!==n&&"axis"!==n?{rowalign:n}:{},i=this.html("mjx-mtr",o,[r]);this.adaptor.append(this.parent.labels,i)}},e.prototype.markUsed=function(){t.prototype.markUsed.call(this),this.jax.wrapperUsage.add(c.kind)},e.kind=l.MmlMlabeledtr.prototype.kind,e.styles={"mjx-mlabeledtr":{display:"table-row"},'mjx-mlabeledtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mlabeledtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mlabeledtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mlabeledtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mlabeledtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}},e}((0,a.CommonMlabeledtrMixin)(c));e.CHTMLmlabeledtr=u},6590:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmunderover=e.CHTMLmover=e.CHTMLmunder=void 0;var i=r(4300),s=r(1971),a=r(1971),l=r(1971),c=r(5184),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(e){if(this.hasMovableLimits())return t.prototype.toCHTML.call(this,e),void this.adaptor.setAttribute(this.chtml,"limits","false");this.chtml=this.standardCHTMLnode(e);var r=this.adaptor.append(this.adaptor.append(this.chtml,this.html("mjx-row")),this.html("mjx-base")),n=this.adaptor.append(this.adaptor.append(this.chtml,this.html("mjx-row")),this.html("mjx-under"));this.baseChild.toCHTML(r),this.scriptChild.toCHTML(n);var o=this.baseChild.getOuterBBox(),i=this.scriptChild.getOuterBBox(),s=this.getUnderKV(o,i)[0],a=this.isLineBelow?0:this.getDelta(!0);this.adaptor.setStyle(n,"paddingTop",this.em(s)),this.setDeltaW([r,n],this.getDeltaW([o,i],[0,-a])),this.adjustUnderDepth(n,i)},e.kind=c.MmlMunder.prototype.kind,e.styles={"mjx-over":{"text-align":"left"},'mjx-munder:not([limits="false"])':{display:"inline-table"},"mjx-munder > mjx-row":{"text-align":"left"},"mjx-under":{"padding-bottom":".1em"}},e}((0,s.CommonMunderMixin)(i.CHTMLmsub));e.CHTMLmunder=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(e){if(this.hasMovableLimits())return t.prototype.toCHTML.call(this,e),void this.adaptor.setAttribute(this.chtml,"limits","false");this.chtml=this.standardCHTMLnode(e);var r=this.adaptor.append(this.chtml,this.html("mjx-over")),n=this.adaptor.append(this.chtml,this.html("mjx-base"));this.scriptChild.toCHTML(r),this.baseChild.toCHTML(n);var o=this.scriptChild.getOuterBBox(),i=this.baseChild.getOuterBBox();this.adjustBaseHeight(n,i);var s=this.getOverKU(i,o)[0],a=this.isLineAbove?0:this.getDelta();this.adaptor.setStyle(r,"paddingBottom",this.em(s)),this.setDeltaW([n,r],this.getDeltaW([i,o],[0,a])),this.adjustOverDepth(r,o)},e.kind=c.MmlMover.prototype.kind,e.styles={'mjx-mover:not([limits="false"])':{"padding-top":".1em"},'mjx-mover:not([limits="false"]) > *':{display:"block","text-align":"left"}},e}((0,a.CommonMoverMixin)(i.CHTMLmsup));e.CHTMLmover=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(e){if(this.hasMovableLimits())return t.prototype.toCHTML.call(this,e),void this.adaptor.setAttribute(this.chtml,"limits","false");this.chtml=this.standardCHTMLnode(e);var r=this.adaptor.append(this.chtml,this.html("mjx-over")),n=this.adaptor.append(this.adaptor.append(this.chtml,this.html("mjx-box")),this.html("mjx-munder")),o=this.adaptor.append(this.adaptor.append(n,this.html("mjx-row")),this.html("mjx-base")),i=this.adaptor.append(this.adaptor.append(n,this.html("mjx-row")),this.html("mjx-under"));this.overChild.toCHTML(r),this.baseChild.toCHTML(o),this.underChild.toCHTML(i);var s=this.overChild.getOuterBBox(),a=this.baseChild.getOuterBBox(),l=this.underChild.getOuterBBox();this.adjustBaseHeight(o,a);var c=this.getOverKU(a,s)[0],u=this.getUnderKV(a,l)[0],p=this.getDelta();this.adaptor.setStyle(r,"paddingBottom",this.em(c)),this.adaptor.setStyle(i,"paddingTop",this.em(u)),this.setDeltaW([o,i,r],this.getDeltaW([a,l,s],[0,this.isLineBelow?0:-p,this.isLineAbove?0:p])),this.adjustOverDepth(r,s),this.adjustUnderDepth(i,l)},e.prototype.markUsed=function(){t.prototype.markUsed.call(this),this.jax.wrapperUsage.add(i.CHTMLmsubsup.kind)},e.kind=c.MmlMunderover.prototype.kind,e.styles={'mjx-munderover:not([limits="false"])':{"padding-top":".1em"},'mjx-munderover:not([limits="false"]) > *':{display:"block"}},e}((0,l.CommonMunderoverMixin)(i.CHTMLmsubsup));e.CHTMLmunderover=h},8650:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLscriptbase=void 0;var a=r(5355),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){this.chtml=this.standardCHTMLnode(t);var e=i(this.getOffset(),2),r=e[0],n=e[1],o=r-(this.baseRemoveIc?this.baseIc:0),s={"vertical-align":this.em(n)};o&&(s["margin-left"]=this.em(o)),this.baseChild.toCHTML(this.chtml),this.scriptChild.toCHTML(this.adaptor.append(this.chtml,this.html("mjx-script",{style:s})))},e.prototype.setDeltaW=function(t,e){for(var r=0;r<e.length;r++)e[r]&&this.adaptor.setStyle(t[r],"paddingLeft",this.em(e[r]))},e.prototype.adjustOverDepth=function(t,e){e.d>=0||this.adaptor.setStyle(t,"marginBottom",this.em(e.d*e.rscale))},e.prototype.adjustUnderDepth=function(t,e){var r,n;if(!(e.d>=0)){var o=this.adaptor,i=this.em(e.d),a=this.html("mjx-box",{style:{"margin-bottom":i,"vertical-align":i}});try{for(var l=s(o.childNodes(o.firstChild(t))),c=l.next();!c.done;c=l.next()){var u=c.value;o.append(a,u)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}o.append(o.firstChild(t),a)}},e.prototype.adjustBaseHeight=function(t,e){if(this.node.attributes.get("accent")){var r=this.font.params.x_height*e.scale;e.h<r&&(this.adaptor.setStyle(t,"paddingTop",this.em(r-e.h)),e.h=r)}},e.kind="scriptbase",e}((0,r(167).CommonScriptbaseMixin)(a.CHTMLWrapper));e.CHTMLscriptbase=l},421:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLxml=e.CHTMLannotationXML=e.CHTMLannotation=e.CHTMLsemantics=void 0;var i=r(5355),s=r(5806),a=r(9102),l=r(9007),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){var e=this.standardCHTMLnode(t);this.childNodes.length&&this.childNodes[0].toCHTML(e)},e.kind=a.MmlSemantics.prototype.kind,e}((0,s.CommonSemanticsMixin)(i.CHTMLWrapper));e.CHTMLsemantics=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e)},e.prototype.computeBBox=function(){return this.bbox},e.kind=a.MmlAnnotation.prototype.kind,e}(i.CHTMLWrapper);e.CHTMLannotation=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.kind=a.MmlAnnotationXML.prototype.kind,e.styles={"mjx-annotation-xml":{"font-family":"initial","line-height":"normal"}},e}(i.CHTMLWrapper);e.CHTMLannotationXML=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toCHTML=function(t){this.chtml=this.adaptor.append(t,this.adaptor.clone(this.node.getXML()))},e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r=this.jax.measureXMLnode(this.node.getXML()),n=r.w,o=r.h,i=r.d;t.w=n,t.h=o,t.d=i},e.prototype.getStyles=function(){},e.prototype.getScale=function(){},e.prototype.getVariant=function(){},e.kind=l.XMLNode.prototype.kind,e.autoStyle=!1,e}(i.CHTMLWrapper);e.CHTMLxml=h},2760:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.TeXFont=void 0;var s=r(8042),a=r(5920),l=r(4005),c=r(1015),u=r(4515),p=r(6555),h=r(2183),f=r(3490),d=r(9056),m=r(3019),y=r(2713),g=r(7517),b=r(4182),v=r(2679),_=r(5469),S=r(7563),M=r(9409),O=r(775),x=r(9551),E=r(7907),A=r(9659),C=r(98),T=r(6275),N=r(6530),w=r(4409),L=r(5292),I=r(9124),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.defaultCssFamilyPrefix="MJXZERO",e.defaultVariantClasses={normal:"mjx-n",bold:"mjx-b",italic:"mjx-i","bold-italic":"mjx-b mjx-i","double-struck":"mjx-ds mjx-b",fraktur:"mjx-fr","bold-fraktur":"mjx-fr mjx-b",script:"mjx-sc mjx-i","bold-script":"mjx-sc mjx-b mjx-i","sans-serif":"mjx-ss","bold-sans-serif":"mjx-ss mjx-b","sans-serif-italic":"mjx-ss mjx-i","sans-serif-bold-italic":"mjx-ss mjx-b mjx-i",monospace:"mjx-ty","-smallop":"mjx-sop","-largeop":"mjx-lop","-size3":"mjx-s3","-size4":"mjx-s4","-tex-calligraphic":"mjx-cal mjx-i","-tex-bold-calligraphic":"mjx-cal mjx-b","-tex-mathit":"mjx-mit mjx-i","-tex-oldstyle":"mjx-os","-tex-bold-oldstyle":"mjx-os mjx-b","-tex-variant":"mjx-var"},e.defaultVariantLetters={normal:"",bold:"B",italic:"MI","bold-italic":"BI","double-struck":"A",fraktur:"FR","bold-fraktur":"FRB",script:"SC","bold-script":"SCB","sans-serif":"SS","bold-sans-serif":"SSB","sans-serif-italic":"SSI","sans-serif-bold-italic":"SSBI",monospace:"T","-smallop":"S1","-largeop":"S2","-size3":"S3","-size4":"S4","-tex-calligraphic":"C","-tex-bold-calligraphic":"CB","-tex-mathit":"MI","-tex-oldstyle":"C","-tex-bold-oldstyle":"CB","-tex-variant":"A"},e.defaultDelimiters=I.delimiters,e.defaultChars={normal:y.normal,bold:c.bold,italic:f.italic,"bold-italic":l.boldItalic,"double-struck":u.doubleStruck,fraktur:h.fraktur,"bold-fraktur":p.frakturBold,script:M.script,"bold-script":S.scriptBold,"sans-serif":_.sansSerif,"bold-sans-serif":b.sansSerifBold,"sans-serif-italic":v.sansSerifItalic,"sans-serif-bold-italic":g.sansSerifBoldItalic,monospace:m.monospace,"-smallop":O.smallop,"-largeop":d.largeop,"-size3":N.texSize3,"-size4":w.texSize4,"-tex-calligraphic":E.texCalligraphic,"-tex-bold-calligraphic":x.texCalligraphicBold,"-tex-mathit":A.texMathit,"-tex-oldstyle":T.texOldstyle,"-tex-bold-oldstyle":C.texOldstyleBold,"-tex-variant":L.texVariant},e.defaultStyles=i(i({},s.CHTMLFontData.defaultStyles),{".MJX-TEX":{"font-family":"MJXZERO, MJXTEX"},".TEX-B":{"font-family":"MJXZERO, MJXTEX-B"},".TEX-I":{"font-family":"MJXZERO, MJXTEX-I"},".TEX-MI":{"font-family":"MJXZERO, MJXTEX-MI"},".TEX-BI":{"font-family":"MJXZERO, MJXTEX-BI"},".TEX-S1":{"font-family":"MJXZERO, MJXTEX-S1"},".TEX-S2":{"font-family":"MJXZERO, MJXTEX-S2"},".TEX-S3":{"font-family":"MJXZERO, MJXTEX-S3"},".TEX-S4":{"font-family":"MJXZERO, MJXTEX-S4"},".TEX-A":{"font-family":"MJXZERO, MJXTEX-A"},".TEX-C":{"font-family":"MJXZERO, MJXTEX-C"},".TEX-CB":{"font-family":"MJXZERO, MJXTEX-CB"},".TEX-FR":{"font-family":"MJXZERO, MJXTEX-FR"},".TEX-FRB":{"font-family":"MJXZERO, MJXTEX-FRB"},".TEX-SS":{"font-family":"MJXZERO, MJXTEX-SS"},".TEX-SSB":{"font-family":"MJXZERO, MJXTEX-SSB"},".TEX-SSI":{"font-family":"MJXZERO, MJXTEX-SSI"},".TEX-SC":{"font-family":"MJXZERO, MJXTEX-SC"},".TEX-T":{"font-family":"MJXZERO, MJXTEX-T"},".TEX-V":{"font-family":"MJXZERO, MJXTEX-V"},".TEX-VB":{"font-family":"MJXZERO, MJXTEX-VB"},"mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c":{"font-family":"MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important"}}),e.defaultFonts=i(i({},s.CHTMLFontData.defaultFonts),{"@font-face /* 1 */":{"font-family":"MJXTEX",src:'url("%%URL%%/MathJax_Main-Regular.woff") format("woff")'},"@font-face /* 2 */":{"font-family":"MJXTEX-B",src:'url("%%URL%%/MathJax_Main-Bold.woff") format("woff")'},"@font-face /* 3 */":{"font-family":"MJXTEX-I",src:'url("%%URL%%/MathJax_Math-Italic.woff") format("woff")'},"@font-face /* 4 */":{"font-family":"MJXTEX-MI",src:'url("%%URL%%/MathJax_Main-Italic.woff") format("woff")'},"@font-face /* 5 */":{"font-family":"MJXTEX-BI",src:'url("%%URL%%/MathJax_Math-BoldItalic.woff") format("woff")'},"@font-face /* 6 */":{"font-family":"MJXTEX-S1",src:'url("%%URL%%/MathJax_Size1-Regular.woff") format("woff")'},"@font-face /* 7 */":{"font-family":"MJXTEX-S2",src:'url("%%URL%%/MathJax_Size2-Regular.woff") format("woff")'},"@font-face /* 8 */":{"font-family":"MJXTEX-S3",src:'url("%%URL%%/MathJax_Size3-Regular.woff") format("woff")'},"@font-face /* 9 */":{"font-family":"MJXTEX-S4",src:'url("%%URL%%/MathJax_Size4-Regular.woff") format("woff")'},"@font-face /* 10 */":{"font-family":"MJXTEX-A",src:'url("%%URL%%/MathJax_AMS-Regular.woff") format("woff")'},"@font-face /* 11 */":{"font-family":"MJXTEX-C",src:'url("%%URL%%/MathJax_Calligraphic-Regular.woff") format("woff")'},"@font-face /* 12 */":{"font-family":"MJXTEX-CB",src:'url("%%URL%%/MathJax_Calligraphic-Bold.woff") format("woff")'},"@font-face /* 13 */":{"font-family":"MJXTEX-FR",src:'url("%%URL%%/MathJax_Fraktur-Regular.woff") format("woff")'},"@font-face /* 14 */":{"font-family":"MJXTEX-FRB",src:'url("%%URL%%/MathJax_Fraktur-Bold.woff") format("woff")'},"@font-face /* 15 */":{"font-family":"MJXTEX-SS",src:'url("%%URL%%/MathJax_SansSerif-Regular.woff") format("woff")'},"@font-face /* 16 */":{"font-family":"MJXTEX-SSB",src:'url("%%URL%%/MathJax_SansSerif-Bold.woff") format("woff")'},"@font-face /* 17 */":{"font-family":"MJXTEX-SSI",src:'url("%%URL%%/MathJax_SansSerif-Italic.woff") format("woff")'},"@font-face /* 18 */":{"font-family":"MJXTEX-SC",src:'url("%%URL%%/MathJax_Script-Regular.woff") format("woff")'},"@font-face /* 19 */":{"font-family":"MJXTEX-T",src:'url("%%URL%%/MathJax_Typewriter-Regular.woff") format("woff")'},"@font-face /* 20 */":{"font-family":"MJXTEX-V",src:'url("%%URL%%/MathJax_Vector-Regular.woff") format("woff")'},"@font-face /* 21 */":{"font-family":"MJXTEX-VB",src:'url("%%URL%%/MathJax_Vector-Bold.woff") format("woff")'}}),e}((0,a.CommonTeXFontMixin)(s.CHTMLFontData));e.TeXFont=P},4005:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.boldItalic=void 0;var n=r(8042),o=r(3980);e.boldItalic=(0,n.AddCSS)(o.boldItalic,{305:{f:"B"},567:{f:"B"},8260:{c:"/"},8710:{c:"\\394"},10744:{c:"/"}})},1015:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.bold=void 0;var n=r(8042),o=r(1103);e.bold=(0,n.AddCSS)(o.bold,{183:{c:"\\22C5"},305:{f:""},567:{f:""},697:{c:"\\2032"},8194:{c:""},8195:{c:""},8196:{c:""},8197:{c:""},8198:{c:""},8201:{c:""},8202:{c:""},8213:{c:"\\2014"},8214:{c:"\\2225"},8215:{c:"_"},8226:{c:"\\2219"},8243:{c:"\\2032\\2032"},8244:{c:"\\2032\\2032\\2032"},8254:{c:"\\2C9"},8260:{c:"/"},8279:{c:"\\2032\\2032\\2032\\2032"},8407:{c:"\\2192",f:"VB"},8602:{c:"\\2190\\338"},8603:{c:"\\2192\\338"},8622:{c:"\\2194\\338"},8653:{c:"\\21D0\\338"},8654:{c:"\\21D4\\338"},8655:{c:"\\21D2\\338"},8708:{c:"\\2203\\338"},8710:{c:"\\394"},8716:{c:"\\220B\\338"},8740:{c:"\\2223\\338"},8742:{c:"\\2225\\338"},8769:{c:"\\223C\\338"},8772:{c:"\\2243\\338"},8775:{c:"\\2245\\338"},8777:{c:"\\2248\\338"},8802:{c:"\\2261\\338"},8813:{c:"\\224D\\338"},8814:{c:"<\\338"},8815:{c:">\\338"},8816:{c:"\\2264\\338"},8817:{c:"\\2265\\338"},8832:{c:"\\227A\\338"},8833:{c:"\\227B\\338"},8836:{c:"\\2282\\338"},8837:{c:"\\2283\\338"},8840:{c:"\\2286\\338"},8841:{c:"\\2287\\338"},8876:{c:"\\22A2\\338"},8877:{c:"\\22A8\\338"},8930:{c:"\\2291\\338"},8931:{c:"\\2292\\338"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},9653:{c:"\\25B3"},9663:{c:"\\25BD"},10072:{c:"\\2223"},10744:{c:"/",f:"BI"},10799:{c:"\\D7"},12296:{c:"\\27E8"},12297:{c:"\\27E9"}})},4515:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.doubleStruck=void 0;var n=r(6001);Object.defineProperty(e,"doubleStruck",{enumerable:!0,get:function(){return n.doubleStruck}})},6555:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.frakturBold=void 0;var n=r(8042),o=r(3696);e.frakturBold=(0,n.AddCSS)(o.frakturBold,{8260:{c:"/"}})},2183:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.fraktur=void 0;var n=r(8042),o=r(9587);e.fraktur=(0,n.AddCSS)(o.fraktur,{8260:{c:"/"}})},3490:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.italic=void 0;var n=r(8042),o=r(8348);e.italic=(0,n.AddCSS)(o.italic,{47:{f:"I"},989:{c:"\\E008",f:"A"},8213:{c:"\\2014"},8215:{c:"_"},8260:{c:"/",f:"I"},8710:{c:"\\394",f:"I"},10744:{c:"/",f:"I"}})},9056:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.largeop=void 0;var n=r(8042),o=r(1376);e.largeop=(0,n.AddCSS)(o.largeop,{8214:{f:"S1"},8260:{c:"/"},8593:{f:"S1"},8595:{f:"S1"},8657:{f:"S1"},8659:{f:"S1"},8739:{f:"S1"},8741:{f:"S1"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},9168:{f:"S1"},10072:{c:"\\2223",f:"S1"},10764:{c:"\\222C\\222C"},12296:{c:"\\27E8"},12297:{c:"\\27E9"}})},3019:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.monospace=void 0;var n=r(8042),o=r(1439);e.monospace=(0,n.AddCSS)(o.monospace,{697:{c:"\\2032"},913:{c:"A"},914:{c:"B"},917:{c:"E"},918:{c:"Z"},919:{c:"H"},921:{c:"I"},922:{c:"K"},924:{c:"M"},925:{c:"N"},927:{c:"O"},929:{c:"P"},932:{c:"T"},935:{c:"X"},8215:{c:"_"},8243:{c:"\\2032\\2032"},8244:{c:"\\2032\\2032\\2032"},8260:{c:"/"},8279:{c:"\\2032\\2032\\2032\\2032"},8710:{c:"\\394"}})},2713:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.normal=void 0;var n=r(8042),o=r(331);e.normal=(0,n.AddCSS)(o.normal,{163:{f:"MI"},165:{f:"A"},174:{f:"A"},183:{c:"\\22C5"},240:{f:"A"},697:{c:"\\2032"},913:{c:"A"},914:{c:"B"},917:{c:"E"},918:{c:"Z"},919:{c:"H"},921:{c:"I"},922:{c:"K"},924:{c:"M"},925:{c:"N"},927:{c:"O"},929:{c:"P"},932:{c:"T"},935:{c:"X"},8192:{c:""},8193:{c:""},8194:{c:""},8195:{c:""},8196:{c:""},8197:{c:""},8198:{c:""},8201:{c:""},8202:{c:""},8203:{c:""},8204:{c:""},8213:{c:"\\2014"},8214:{c:"\\2225"},8215:{c:"_"},8226:{c:"\\2219"},8243:{c:"\\2032\\2032"},8244:{c:"\\2032\\2032\\2032"},8245:{f:"A"},8246:{c:"\\2035\\2035",f:"A"},8247:{c:"\\2035\\2035\\2035",f:"A"},8254:{c:"\\2C9"},8260:{c:"/"},8279:{c:"\\2032\\2032\\2032\\2032"},8288:{c:""},8289:{c:""},8290:{c:""},8291:{c:""},8292:{c:""},8407:{c:"\\2192",f:"V"},8450:{c:"C",f:"A"},8459:{c:"H",f:"SC"},8460:{c:"H",f:"FR"},8461:{c:"H",f:"A"},8462:{c:"h",f:"I"},8463:{f:"A"},8464:{c:"I",f:"SC"},8465:{c:"I",f:"FR"},8466:{c:"L",f:"SC"},8469:{c:"N",f:"A"},8473:{c:"P",f:"A"},8474:{c:"Q",f:"A"},8475:{c:"R",f:"SC"},8476:{c:"R",f:"FR"},8477:{c:"R",f:"A"},8484:{c:"Z",f:"A"},8486:{c:"\\3A9"},8487:{f:"A"},8488:{c:"Z",f:"FR"},8492:{c:"B",f:"SC"},8493:{c:"C",f:"FR"},8496:{c:"E",f:"SC"},8497:{c:"F",f:"SC"},8498:{f:"A"},8499:{c:"M",f:"SC"},8502:{f:"A"},8503:{f:"A"},8504:{f:"A"},8513:{f:"A"},8602:{f:"A"},8603:{f:"A"},8606:{f:"A"},8608:{f:"A"},8610:{f:"A"},8611:{f:"A"},8619:{f:"A"},8620:{f:"A"},8621:{f:"A"},8622:{f:"A"},8624:{f:"A"},8625:{f:"A"},8630:{f:"A"},8631:{f:"A"},8634:{f:"A"},8635:{f:"A"},8638:{f:"A"},8639:{f:"A"},8642:{f:"A"},8643:{f:"A"},8644:{f:"A"},8646:{f:"A"},8647:{f:"A"},8648:{f:"A"},8649:{f:"A"},8650:{f:"A"},8651:{f:"A"},8653:{f:"A"},8654:{f:"A"},8655:{f:"A"},8666:{f:"A"},8667:{f:"A"},8669:{f:"A"},8672:{f:"A"},8674:{f:"A"},8705:{f:"A"},8708:{c:"\\2203\\338"},8710:{c:"\\394"},8716:{c:"\\220B\\338"},8717:{f:"A"},8719:{f:"S1"},8720:{f:"S1"},8721:{f:"S1"},8724:{f:"A"},8737:{f:"A"},8738:{f:"A"},8740:{f:"A"},8742:{f:"A"},8748:{f:"S1"},8749:{f:"S1"},8750:{f:"S1"},8756:{f:"A"},8757:{f:"A"},8765:{f:"A"},8769:{f:"A"},8770:{f:"A"},8772:{c:"\\2243\\338"},8775:{c:"\\2246",f:"A"},8777:{c:"\\2248\\338"},8778:{f:"A"},8782:{f:"A"},8783:{f:"A"},8785:{f:"A"},8786:{f:"A"},8787:{f:"A"},8790:{f:"A"},8791:{f:"A"},8796:{f:"A"},8802:{c:"\\2261\\338"},8806:{f:"A"},8807:{f:"A"},8808:{f:"A"},8809:{f:"A"},8812:{f:"A"},8813:{c:"\\224D\\338"},8814:{f:"A"},8815:{f:"A"},8816:{f:"A"},8817:{f:"A"},8818:{f:"A"},8819:{f:"A"},8820:{c:"\\2272\\338"},8821:{c:"\\2273\\338"},8822:{f:"A"},8823:{f:"A"},8824:{c:"\\2276\\338"},8825:{c:"\\2277\\338"},8828:{f:"A"},8829:{f:"A"},8830:{f:"A"},8831:{f:"A"},8832:{f:"A"},8833:{f:"A"},8836:{c:"\\2282\\338"},8837:{c:"\\2283\\338"},8840:{f:"A"},8841:{f:"A"},8842:{f:"A"},8843:{f:"A"},8847:{f:"A"},8848:{f:"A"},8858:{f:"A"},8859:{f:"A"},8861:{f:"A"},8862:{f:"A"},8863:{f:"A"},8864:{f:"A"},8865:{f:"A"},8873:{f:"A"},8874:{f:"A"},8876:{f:"A"},8877:{f:"A"},8878:{f:"A"},8879:{f:"A"},8882:{f:"A"},8883:{f:"A"},8884:{f:"A"},8885:{f:"A"},8888:{f:"A"},8890:{f:"A"},8891:{f:"A"},8892:{f:"A"},8896:{f:"S1"},8897:{f:"S1"},8898:{f:"S1"},8899:{f:"S1"},8903:{f:"A"},8905:{f:"A"},8906:{f:"A"},8907:{f:"A"},8908:{f:"A"},8909:{f:"A"},8910:{f:"A"},8911:{f:"A"},8912:{f:"A"},8913:{f:"A"},8914:{f:"A"},8915:{f:"A"},8916:{f:"A"},8918:{f:"A"},8919:{f:"A"},8920:{f:"A"},8921:{f:"A"},8922:{f:"A"},8923:{f:"A"},8926:{f:"A"},8927:{f:"A"},8928:{f:"A"},8929:{f:"A"},8930:{c:"\\2291\\338"},8931:{c:"\\2292\\338"},8934:{f:"A"},8935:{f:"A"},8936:{f:"A"},8937:{f:"A"},8938:{f:"A"},8939:{f:"A"},8940:{f:"A"},8941:{f:"A"},8965:{c:"\\22BC",f:"A"},8966:{c:"\\2A5E",f:"A"},8988:{c:"\\250C",f:"A"},8989:{c:"\\2510",f:"A"},8990:{c:"\\2514",f:"A"},8991:{c:"\\2518",f:"A"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},9168:{f:"S1"},9416:{f:"A"},9484:{f:"A"},9488:{f:"A"},9492:{f:"A"},9496:{f:"A"},9585:{f:"A"},9586:{f:"A"},9632:{f:"A"},9633:{f:"A"},9642:{c:"\\25A0",f:"A"},9650:{f:"A"},9652:{c:"\\25B2",f:"A"},9653:{c:"\\25B3"},9654:{f:"A"},9656:{c:"\\25B6",f:"A"},9660:{f:"A"},9662:{c:"\\25BC",f:"A"},9663:{c:"\\25BD"},9664:{f:"A"},9666:{c:"\\25C0",f:"A"},9674:{f:"A"},9723:{c:"\\25A1",f:"A"},9724:{c:"\\25A0",f:"A"},9733:{f:"A"},10003:{f:"A"},10016:{f:"A"},10072:{c:"\\2223"},10731:{f:"A"},10744:{c:"/",f:"I"},10752:{f:"S1"},10753:{f:"S1"},10754:{f:"S1"},10756:{f:"S1"},10758:{f:"S1"},10764:{c:"\\222C\\222C",f:"S1"},10799:{c:"\\D7"},10846:{f:"A"},10877:{f:"A"},10878:{f:"A"},10885:{f:"A"},10886:{f:"A"},10887:{f:"A"},10888:{f:"A"},10889:{f:"A"},10890:{f:"A"},10891:{f:"A"},10892:{f:"A"},10901:{f:"A"},10902:{f:"A"},10933:{f:"A"},10934:{f:"A"},10935:{f:"A"},10936:{f:"A"},10937:{f:"A"},10938:{f:"A"},10949:{f:"A"},10950:{f:"A"},10955:{f:"A"},10956:{f:"A"},12296:{c:"\\27E8"},12297:{c:"\\27E9"},57350:{f:"A"},57351:{f:"A"},57352:{f:"A"},57353:{f:"A"},57356:{f:"A"},57357:{f:"A"},57358:{f:"A"},57359:{f:"A"},57360:{f:"A"},57361:{f:"A"},57366:{f:"A"},57367:{f:"A"},57368:{f:"A"},57369:{f:"A"},57370:{f:"A"},57371:{f:"A"},119808:{c:"A",f:"B"},119809:{c:"B",f:"B"},119810:{c:"C",f:"B"},119811:{c:"D",f:"B"},119812:{c:"E",f:"B"},119813:{c:"F",f:"B"},119814:{c:"G",f:"B"},119815:{c:"H",f:"B"},119816:{c:"I",f:"B"},119817:{c:"J",f:"B"},119818:{c:"K",f:"B"},119819:{c:"L",f:"B"},119820:{c:"M",f:"B"},119821:{c:"N",f:"B"},119822:{c:"O",f:"B"},119823:{c:"P",f:"B"},119824:{c:"Q",f:"B"},119825:{c:"R",f:"B"},119826:{c:"S",f:"B"},119827:{c:"T",f:"B"},119828:{c:"U",f:"B"},119829:{c:"V",f:"B"},119830:{c:"W",f:"B"},119831:{c:"X",f:"B"},119832:{c:"Y",f:"B"},119833:{c:"Z",f:"B"},119834:{c:"a",f:"B"},119835:{c:"b",f:"B"},119836:{c:"c",f:"B"},119837:{c:"d",f:"B"},119838:{c:"e",f:"B"},119839:{c:"f",f:"B"},119840:{c:"g",f:"B"},119841:{c:"h",f:"B"},119842:{c:"i",f:"B"},119843:{c:"j",f:"B"},119844:{c:"k",f:"B"},119845:{c:"l",f:"B"},119846:{c:"m",f:"B"},119847:{c:"n",f:"B"},119848:{c:"o",f:"B"},119849:{c:"p",f:"B"},119850:{c:"q",f:"B"},119851:{c:"r",f:"B"},119852:{c:"s",f:"B"},119853:{c:"t",f:"B"},119854:{c:"u",f:"B"},119855:{c:"v",f:"B"},119856:{c:"w",f:"B"},119857:{c:"x",f:"B"},119858:{c:"y",f:"B"},119859:{c:"z",f:"B"},119860:{c:"A",f:"I"},119861:{c:"B",f:"I"},119862:{c:"C",f:"I"},119863:{c:"D",f:"I"},119864:{c:"E",f:"I"},119865:{c:"F",f:"I"},119866:{c:"G",f:"I"},119867:{c:"H",f:"I"},119868:{c:"I",f:"I"},119869:{c:"J",f:"I"},119870:{c:"K",f:"I"},119871:{c:"L",f:"I"},119872:{c:"M",f:"I"},119873:{c:"N",f:"I"},119874:{c:"O",f:"I"},119875:{c:"P",f:"I"},119876:{c:"Q",f:"I"},119877:{c:"R",f:"I"},119878:{c:"S",f:"I"},119879:{c:"T",f:"I"},119880:{c:"U",f:"I"},119881:{c:"V",f:"I"},119882:{c:"W",f:"I"},119883:{c:"X",f:"I"},119884:{c:"Y",f:"I"},119885:{c:"Z",f:"I"},119886:{c:"a",f:"I"},119887:{c:"b",f:"I"},119888:{c:"c",f:"I"},119889:{c:"d",f:"I"},119890:{c:"e",f:"I"},119891:{c:"f",f:"I"},119892:{c:"g",f:"I"},119894:{c:"i",f:"I"},119895:{c:"j",f:"I"},119896:{c:"k",f:"I"},119897:{c:"l",f:"I"},119898:{c:"m",f:"I"},119899:{c:"n",f:"I"},119900:{c:"o",f:"I"},119901:{c:"p",f:"I"},119902:{c:"q",f:"I"},119903:{c:"r",f:"I"},119904:{c:"s",f:"I"},119905:{c:"t",f:"I"},119906:{c:"u",f:"I"},119907:{c:"v",f:"I"},119908:{c:"w",f:"I"},119909:{c:"x",f:"I"},119910:{c:"y",f:"I"},119911:{c:"z",f:"I"},119912:{c:"A",f:"BI"},119913:{c:"B",f:"BI"},119914:{c:"C",f:"BI"},119915:{c:"D",f:"BI"},119916:{c:"E",f:"BI"},119917:{c:"F",f:"BI"},119918:{c:"G",f:"BI"},119919:{c:"H",f:"BI"},119920:{c:"I",f:"BI"},119921:{c:"J",f:"BI"},119922:{c:"K",f:"BI"},119923:{c:"L",f:"BI"},119924:{c:"M",f:"BI"},119925:{c:"N",f:"BI"},119926:{c:"O",f:"BI"},119927:{c:"P",f:"BI"},119928:{c:"Q",f:"BI"},119929:{c:"R",f:"BI"},119930:{c:"S",f:"BI"},119931:{c:"T",f:"BI"},119932:{c:"U",f:"BI"},119933:{c:"V",f:"BI"},119934:{c:"W",f:"BI"},119935:{c:"X",f:"BI"},119936:{c:"Y",f:"BI"},119937:{c:"Z",f:"BI"},119938:{c:"a",f:"BI"},119939:{c:"b",f:"BI"},119940:{c:"c",f:"BI"},119941:{c:"d",f:"BI"},119942:{c:"e",f:"BI"},119943:{c:"f",f:"BI"},119944:{c:"g",f:"BI"},119945:{c:"h",f:"BI"},119946:{c:"i",f:"BI"},119947:{c:"j",f:"BI"},119948:{c:"k",f:"BI"},119949:{c:"l",f:"BI"},119950:{c:"m",f:"BI"},119951:{c:"n",f:"BI"},119952:{c:"o",f:"BI"},119953:{c:"p",f:"BI"},119954:{c:"q",f:"BI"},119955:{c:"r",f:"BI"},119956:{c:"s",f:"BI"},119957:{c:"t",f:"BI"},119958:{c:"u",f:"BI"},119959:{c:"v",f:"BI"},119960:{c:"w",f:"BI"},119961:{c:"x",f:"BI"},119962:{c:"y",f:"BI"},119963:{c:"z",f:"BI"},119964:{c:"A",f:"SC"},119966:{c:"C",f:"SC"},119967:{c:"D",f:"SC"},119970:{c:"G",f:"SC"},119973:{c:"J",f:"SC"},119974:{c:"K",f:"SC"},119977:{c:"N",f:"SC"},119978:{c:"O",f:"SC"},119979:{c:"P",f:"SC"},119980:{c:"Q",f:"SC"},119982:{c:"S",f:"SC"},119983:{c:"T",f:"SC"},119984:{c:"U",f:"SC"},119985:{c:"V",f:"SC"},119986:{c:"W",f:"SC"},119987:{c:"X",f:"SC"},119988:{c:"Y",f:"SC"},119989:{c:"Z",f:"SC"},120068:{c:"A",f:"FR"},120069:{c:"B",f:"FR"},120071:{c:"D",f:"FR"},120072:{c:"E",f:"FR"},120073:{c:"F",f:"FR"},120074:{c:"G",f:"FR"},120077:{c:"J",f:"FR"},120078:{c:"K",f:"FR"},120079:{c:"L",f:"FR"},120080:{c:"M",f:"FR"},120081:{c:"N",f:"FR"},120082:{c:"O",f:"FR"},120083:{c:"P",f:"FR"},120084:{c:"Q",f:"FR"},120086:{c:"S",f:"FR"},120087:{c:"T",f:"FR"},120088:{c:"U",f:"FR"},120089:{c:"V",f:"FR"},120090:{c:"W",f:"FR"},120091:{c:"X",f:"FR"},120092:{c:"Y",f:"FR"},120094:{c:"a",f:"FR"},120095:{c:"b",f:"FR"},120096:{c:"c",f:"FR"},120097:{c:"d",f:"FR"},120098:{c:"e",f:"FR"},120099:{c:"f",f:"FR"},120100:{c:"g",f:"FR"},120101:{c:"h",f:"FR"},120102:{c:"i",f:"FR"},120103:{c:"j",f:"FR"},120104:{c:"k",f:"FR"},120105:{c:"l",f:"FR"},120106:{c:"m",f:"FR"},120107:{c:"n",f:"FR"},120108:{c:"o",f:"FR"},120109:{c:"p",f:"FR"},120110:{c:"q",f:"FR"},120111:{c:"r",f:"FR"},120112:{c:"s",f:"FR"},120113:{c:"t",f:"FR"},120114:{c:"u",f:"FR"},120115:{c:"v",f:"FR"},120116:{c:"w",f:"FR"},120117:{c:"x",f:"FR"},120118:{c:"y",f:"FR"},120119:{c:"z",f:"FR"},120120:{c:"A",f:"A"},120121:{c:"B",f:"A"},120123:{c:"D",f:"A"},120124:{c:"E",f:"A"},120125:{c:"F",f:"A"},120126:{c:"G",f:"A"},120128:{c:"I",f:"A"},120129:{c:"J",f:"A"},120130:{c:"K",f:"A"},120131:{c:"L",f:"A"},120132:{c:"M",f:"A"},120134:{c:"O",f:"A"},120138:{c:"S",f:"A"},120139:{c:"T",f:"A"},120140:{c:"U",f:"A"},120141:{c:"V",f:"A"},120142:{c:"W",f:"A"},120143:{c:"X",f:"A"},120144:{c:"Y",f:"A"},120172:{c:"A",f:"FRB"},120173:{c:"B",f:"FRB"},120174:{c:"C",f:"FRB"},120175:{c:"D",f:"FRB"},120176:{c:"E",f:"FRB"},120177:{c:"F",f:"FRB"},120178:{c:"G",f:"FRB"},120179:{c:"H",f:"FRB"},120180:{c:"I",f:"FRB"},120181:{c:"J",f:"FRB"},120182:{c:"K",f:"FRB"},120183:{c:"L",f:"FRB"},120184:{c:"M",f:"FRB"},120185:{c:"N",f:"FRB"},120186:{c:"O",f:"FRB"},120187:{c:"P",f:"FRB"},120188:{c:"Q",f:"FRB"},120189:{c:"R",f:"FRB"},120190:{c:"S",f:"FRB"},120191:{c:"T",f:"FRB"},120192:{c:"U",f:"FRB"},120193:{c:"V",f:"FRB"},120194:{c:"W",f:"FRB"},120195:{c:"X",f:"FRB"},120196:{c:"Y",f:"FRB"},120197:{c:"Z",f:"FRB"},120198:{c:"a",f:"FRB"},120199:{c:"b",f:"FRB"},120200:{c:"c",f:"FRB"},120201:{c:"d",f:"FRB"},120202:{c:"e",f:"FRB"},120203:{c:"f",f:"FRB"},120204:{c:"g",f:"FRB"},120205:{c:"h",f:"FRB"},120206:{c:"i",f:"FRB"},120207:{c:"j",f:"FRB"},120208:{c:"k",f:"FRB"},120209:{c:"l",f:"FRB"},120210:{c:"m",f:"FRB"},120211:{c:"n",f:"FRB"},120212:{c:"o",f:"FRB"},120213:{c:"p",f:"FRB"},120214:{c:"q",f:"FRB"},120215:{c:"r",f:"FRB"},120216:{c:"s",f:"FRB"},120217:{c:"t",f:"FRB"},120218:{c:"u",f:"FRB"},120219:{c:"v",f:"FRB"},120220:{c:"w",f:"FRB"},120221:{c:"x",f:"FRB"},120222:{c:"y",f:"FRB"},120223:{c:"z",f:"FRB"},120224:{c:"A",f:"SS"},120225:{c:"B",f:"SS"},120226:{c:"C",f:"SS"},120227:{c:"D",f:"SS"},120228:{c:"E",f:"SS"},120229:{c:"F",f:"SS"},120230:{c:"G",f:"SS"},120231:{c:"H",f:"SS"},120232:{c:"I",f:"SS"},120233:{c:"J",f:"SS"},120234:{c:"K",f:"SS"},120235:{c:"L",f:"SS"},120236:{c:"M",f:"SS"},120237:{c:"N",f:"SS"},120238:{c:"O",f:"SS"},120239:{c:"P",f:"SS"},120240:{c:"Q",f:"SS"},120241:{c:"R",f:"SS"},120242:{c:"S",f:"SS"},120243:{c:"T",f:"SS"},120244:{c:"U",f:"SS"},120245:{c:"V",f:"SS"},120246:{c:"W",f:"SS"},120247:{c:"X",f:"SS"},120248:{c:"Y",f:"SS"},120249:{c:"Z",f:"SS"},120250:{c:"a",f:"SS"},120251:{c:"b",f:"SS"},120252:{c:"c",f:"SS"},120253:{c:"d",f:"SS"},120254:{c:"e",f:"SS"},120255:{c:"f",f:"SS"},120256:{c:"g",f:"SS"},120257:{c:"h",f:"SS"},120258:{c:"i",f:"SS"},120259:{c:"j",f:"SS"},120260:{c:"k",f:"SS"},120261:{c:"l",f:"SS"},120262:{c:"m",f:"SS"},120263:{c:"n",f:"SS"},120264:{c:"o",f:"SS"},120265:{c:"p",f:"SS"},120266:{c:"q",f:"SS"},120267:{c:"r",f:"SS"},120268:{c:"s",f:"SS"},120269:{c:"t",f:"SS"},120270:{c:"u",f:"SS"},120271:{c:"v",f:"SS"},120272:{c:"w",f:"SS"},120273:{c:"x",f:"SS"},120274:{c:"y",f:"SS"},120275:{c:"z",f:"SS"},120276:{c:"A",f:"SSB"},120277:{c:"B",f:"SSB"},120278:{c:"C",f:"SSB"},120279:{c:"D",f:"SSB"},120280:{c:"E",f:"SSB"},120281:{c:"F",f:"SSB"},120282:{c:"G",f:"SSB"},120283:{c:"H",f:"SSB"},120284:{c:"I",f:"SSB"},120285:{c:"J",f:"SSB"},120286:{c:"K",f:"SSB"},120287:{c:"L",f:"SSB"},120288:{c:"M",f:"SSB"},120289:{c:"N",f:"SSB"},120290:{c:"O",f:"SSB"},120291:{c:"P",f:"SSB"},120292:{c:"Q",f:"SSB"},120293:{c:"R",f:"SSB"},120294:{c:"S",f:"SSB"},120295:{c:"T",f:"SSB"},120296:{c:"U",f:"SSB"},120297:{c:"V",f:"SSB"},120298:{c:"W",f:"SSB"},120299:{c:"X",f:"SSB"},120300:{c:"Y",f:"SSB"},120301:{c:"Z",f:"SSB"},120302:{c:"a",f:"SSB"},120303:{c:"b",f:"SSB"},120304:{c:"c",f:"SSB"},120305:{c:"d",f:"SSB"},120306:{c:"e",f:"SSB"},120307:{c:"f",f:"SSB"},120308:{c:"g",f:"SSB"},120309:{c:"h",f:"SSB"},120310:{c:"i",f:"SSB"},120311:{c:"j",f:"SSB"},120312:{c:"k",f:"SSB"},120313:{c:"l",f:"SSB"},120314:{c:"m",f:"SSB"},120315:{c:"n",f:"SSB"},120316:{c:"o",f:"SSB"},120317:{c:"p",f:"SSB"},120318:{c:"q",f:"SSB"},120319:{c:"r",f:"SSB"},120320:{c:"s",f:"SSB"},120321:{c:"t",f:"SSB"},120322:{c:"u",f:"SSB"},120323:{c:"v",f:"SSB"},120324:{c:"w",f:"SSB"},120325:{c:"x",f:"SSB"},120326:{c:"y",f:"SSB"},120327:{c:"z",f:"SSB"},120328:{c:"A",f:"SSI"},120329:{c:"B",f:"SSI"},120330:{c:"C",f:"SSI"},120331:{c:"D",f:"SSI"},120332:{c:"E",f:"SSI"},120333:{c:"F",f:"SSI"},120334:{c:"G",f:"SSI"},120335:{c:"H",f:"SSI"},120336:{c:"I",f:"SSI"},120337:{c:"J",f:"SSI"},120338:{c:"K",f:"SSI"},120339:{c:"L",f:"SSI"},120340:{c:"M",f:"SSI"},120341:{c:"N",f:"SSI"},120342:{c:"O",f:"SSI"},120343:{c:"P",f:"SSI"},120344:{c:"Q",f:"SSI"},120345:{c:"R",f:"SSI"},120346:{c:"S",f:"SSI"},120347:{c:"T",f:"SSI"},120348:{c:"U",f:"SSI"},120349:{c:"V",f:"SSI"},120350:{c:"W",f:"SSI"},120351:{c:"X",f:"SSI"},120352:{c:"Y",f:"SSI"},120353:{c:"Z",f:"SSI"},120354:{c:"a",f:"SSI"},120355:{c:"b",f:"SSI"},120356:{c:"c",f:"SSI"},120357:{c:"d",f:"SSI"},120358:{c:"e",f:"SSI"},120359:{c:"f",f:"SSI"},120360:{c:"g",f:"SSI"},120361:{c:"h",f:"SSI"},120362:{c:"i",f:"SSI"},120363:{c:"j",f:"SSI"},120364:{c:"k",f:"SSI"},120365:{c:"l",f:"SSI"},120366:{c:"m",f:"SSI"},120367:{c:"n",f:"SSI"},120368:{c:"o",f:"SSI"},120369:{c:"p",f:"SSI"},120370:{c:"q",f:"SSI"},120371:{c:"r",f:"SSI"},120372:{c:"s",f:"SSI"},120373:{c:"t",f:"SSI"},120374:{c:"u",f:"SSI"},120375:{c:"v",f:"SSI"},120376:{c:"w",f:"SSI"},120377:{c:"x",f:"SSI"},120378:{c:"y",f:"SSI"},120379:{c:"z",f:"SSI"},120432:{c:"A",f:"T"},120433:{c:"B",f:"T"},120434:{c:"C",f:"T"},120435:{c:"D",f:"T"},120436:{c:"E",f:"T"},120437:{c:"F",f:"T"},120438:{c:"G",f:"T"},120439:{c:"H",f:"T"},120440:{c:"I",f:"T"},120441:{c:"J",f:"T"},120442:{c:"K",f:"T"},120443:{c:"L",f:"T"},120444:{c:"M",f:"T"},120445:{c:"N",f:"T"},120446:{c:"O",f:"T"},120447:{c:"P",f:"T"},120448:{c:"Q",f:"T"},120449:{c:"R",f:"T"},120450:{c:"S",f:"T"},120451:{c:"T",f:"T"},120452:{c:"U",f:"T"},120453:{c:"V",f:"T"},120454:{c:"W",f:"T"},120455:{c:"X",f:"T"},120456:{c:"Y",f:"T"},120457:{c:"Z",f:"T"},120458:{c:"a",f:"T"},120459:{c:"b",f:"T"},120460:{c:"c",f:"T"},120461:{c:"d",f:"T"},120462:{c:"e",f:"T"},120463:{c:"f",f:"T"},120464:{c:"g",f:"T"},120465:{c:"h",f:"T"},120466:{c:"i",f:"T"},120467:{c:"j",f:"T"},120468:{c:"k",f:"T"},120469:{c:"l",f:"T"},120470:{c:"m",f:"T"},120471:{c:"n",f:"T"},120472:{c:"o",f:"T"},120473:{c:"p",f:"T"},120474:{c:"q",f:"T"},120475:{c:"r",f:"T"},120476:{c:"s",f:"T"},120477:{c:"t",f:"T"},120478:{c:"u",f:"T"},120479:{c:"v",f:"T"},120480:{c:"w",f:"T"},120481:{c:"x",f:"T"},120482:{c:"y",f:"T"},120483:{c:"z",f:"T"},120488:{c:"A",f:"B"},120489:{c:"B",f:"B"},120490:{c:"\\393",f:"B"},120491:{c:"\\394",f:"B"},120492:{c:"E",f:"B"},120493:{c:"Z",f:"B"},120494:{c:"H",f:"B"},120495:{c:"\\398",f:"B"},120496:{c:"I",f:"B"},120497:{c:"K",f:"B"},120498:{c:"\\39B",f:"B"},120499:{c:"M",f:"B"},120500:{c:"N",f:"B"},120501:{c:"\\39E",f:"B"},120502:{c:"O",f:"B"},120503:{c:"\\3A0",f:"B"},120504:{c:"P",f:"B"},120506:{c:"\\3A3",f:"B"},120507:{c:"T",f:"B"},120508:{c:"\\3A5",f:"B"},120509:{c:"\\3A6",f:"B"},120510:{c:"X",f:"B"},120511:{c:"\\3A8",f:"B"},120512:{c:"\\3A9",f:"B"},120513:{c:"\\2207",f:"B"},120546:{c:"A",f:"I"},120547:{c:"B",f:"I"},120548:{c:"\\393",f:"I"},120549:{c:"\\394",f:"I"},120550:{c:"E",f:"I"},120551:{c:"Z",f:"I"},120552:{c:"H",f:"I"},120553:{c:"\\398",f:"I"},120554:{c:"I",f:"I"},120555:{c:"K",f:"I"},120556:{c:"\\39B",f:"I"},120557:{c:"M",f:"I"},120558:{c:"N",f:"I"},120559:{c:"\\39E",f:"I"},120560:{c:"O",f:"I"},120561:{c:"\\3A0",f:"I"},120562:{c:"P",f:"I"},120564:{c:"\\3A3",f:"I"},120565:{c:"T",f:"I"},120566:{c:"\\3A5",f:"I"},120567:{c:"\\3A6",f:"I"},120568:{c:"X",f:"I"},120569:{c:"\\3A8",f:"I"},120570:{c:"\\3A9",f:"I"},120572:{c:"\\3B1",f:"I"},120573:{c:"\\3B2",f:"I"},120574:{c:"\\3B3",f:"I"},120575:{c:"\\3B4",f:"I"},120576:{c:"\\3B5",f:"I"},120577:{c:"\\3B6",f:"I"},120578:{c:"\\3B7",f:"I"},120579:{c:"\\3B8",f:"I"},120580:{c:"\\3B9",f:"I"},120581:{c:"\\3BA",f:"I"},120582:{c:"\\3BB",f:"I"},120583:{c:"\\3BC",f:"I"},120584:{c:"\\3BD",f:"I"},120585:{c:"\\3BE",f:"I"},120586:{c:"\\3BF",f:"I"},120587:{c:"\\3C0",f:"I"},120588:{c:"\\3C1",f:"I"},120589:{c:"\\3C2",f:"I"},120590:{c:"\\3C3",f:"I"},120591:{c:"\\3C4",f:"I"},120592:{c:"\\3C5",f:"I"},120593:{c:"\\3C6",f:"I"},120594:{c:"\\3C7",f:"I"},120595:{c:"\\3C8",f:"I"},120596:{c:"\\3C9",f:"I"},120597:{c:"\\2202"},120598:{c:"\\3F5",f:"I"},120599:{c:"\\3D1",f:"I"},120600:{c:"\\E009",f:"A"},120601:{c:"\\3D5",f:"I"},120602:{c:"\\3F1",f:"I"},120603:{c:"\\3D6",f:"I"},120604:{c:"A",f:"BI"},120605:{c:"B",f:"BI"},120606:{c:"\\393",f:"BI"},120607:{c:"\\394",f:"BI"},120608:{c:"E",f:"BI"},120609:{c:"Z",f:"BI"},120610:{c:"H",f:"BI"},120611:{c:"\\398",f:"BI"},120612:{c:"I",f:"BI"},120613:{c:"K",f:"BI"},120614:{c:"\\39B",f:"BI"},120615:{c:"M",f:"BI"},120616:{c:"N",f:"BI"},120617:{c:"\\39E",f:"BI"},120618:{c:"O",f:"BI"},120619:{c:"\\3A0",f:"BI"},120620:{c:"P",f:"BI"},120622:{c:"\\3A3",f:"BI"},120623:{c:"T",f:"BI"},120624:{c:"\\3A5",f:"BI"},120625:{c:"\\3A6",f:"BI"},120626:{c:"X",f:"BI"},120627:{c:"\\3A8",f:"BI"},120628:{c:"\\3A9",f:"BI"},120630:{c:"\\3B1",f:"BI"},120631:{c:"\\3B2",f:"BI"},120632:{c:"\\3B3",f:"BI"},120633:{c:"\\3B4",f:"BI"},120634:{c:"\\3B5",f:"BI"},120635:{c:"\\3B6",f:"BI"},120636:{c:"\\3B7",f:"BI"},120637:{c:"\\3B8",f:"BI"},120638:{c:"\\3B9",f:"BI"},120639:{c:"\\3BA",f:"BI"},120640:{c:"\\3BB",f:"BI"},120641:{c:"\\3BC",f:"BI"},120642:{c:"\\3BD",f:"BI"},120643:{c:"\\3BE",f:"BI"},120644:{c:"\\3BF",f:"BI"},120645:{c:"\\3C0",f:"BI"},120646:{c:"\\3C1",f:"BI"},120647:{c:"\\3C2",f:"BI"},120648:{c:"\\3C3",f:"BI"},120649:{c:"\\3C4",f:"BI"},120650:{c:"\\3C5",f:"BI"},120651:{c:"\\3C6",f:"BI"},120652:{c:"\\3C7",f:"BI"},120653:{c:"\\3C8",f:"BI"},120654:{c:"\\3C9",f:"BI"},120655:{c:"\\2202",f:"B"},120656:{c:"\\3F5",f:"BI"},120657:{c:"\\3D1",f:"BI"},120658:{c:"\\E009",f:"A"},120659:{c:"\\3D5",f:"BI"},120660:{c:"\\3F1",f:"BI"},120661:{c:"\\3D6",f:"BI"},120662:{c:"A",f:"SSB"},120663:{c:"B",f:"SSB"},120664:{c:"\\393",f:"SSB"},120665:{c:"\\394",f:"SSB"},120666:{c:"E",f:"SSB"},120667:{c:"Z",f:"SSB"},120668:{c:"H",f:"SSB"},120669:{c:"\\398",f:"SSB"},120670:{c:"I",f:"SSB"},120671:{c:"K",f:"SSB"},120672:{c:"\\39B",f:"SSB"},120673:{c:"M",f:"SSB"},120674:{c:"N",f:"SSB"},120675:{c:"\\39E",f:"SSB"},120676:{c:"O",f:"SSB"},120677:{c:"\\3A0",f:"SSB"},120678:{c:"P",f:"SSB"},120680:{c:"\\3A3",f:"SSB"},120681:{c:"T",f:"SSB"},120682:{c:"\\3A5",f:"SSB"},120683:{c:"\\3A6",f:"SSB"},120684:{c:"X",f:"SSB"},120685:{c:"\\3A8",f:"SSB"},120686:{c:"\\3A9",f:"SSB"},120782:{c:"0",f:"B"},120783:{c:"1",f:"B"},120784:{c:"2",f:"B"},120785:{c:"3",f:"B"},120786:{c:"4",f:"B"},120787:{c:"5",f:"B"},120788:{c:"6",f:"B"},120789:{c:"7",f:"B"},120790:{c:"8",f:"B"},120791:{c:"9",f:"B"},120802:{c:"0",f:"SS"},120803:{c:"1",f:"SS"},120804:{c:"2",f:"SS"},120805:{c:"3",f:"SS"},120806:{c:"4",f:"SS"},120807:{c:"5",f:"SS"},120808:{c:"6",f:"SS"},120809:{c:"7",f:"SS"},120810:{c:"8",f:"SS"},120811:{c:"9",f:"SS"},120812:{c:"0",f:"SSB"},120813:{c:"1",f:"SSB"},120814:{c:"2",f:"SSB"},120815:{c:"3",f:"SSB"},120816:{c:"4",f:"SSB"},120817:{c:"5",f:"SSB"},120818:{c:"6",f:"SSB"},120819:{c:"7",f:"SSB"},120820:{c:"8",f:"SSB"},120821:{c:"9",f:"SSB"},120822:{c:"0",f:"T"},120823:{c:"1",f:"T"},120824:{c:"2",f:"T"},120825:{c:"3",f:"T"},120826:{c:"4",f:"T"},120827:{c:"5",f:"T"},120828:{c:"6",f:"T"},120829:{c:"7",f:"T"},120830:{c:"8",f:"T"},120831:{c:"9",f:"T"}})},7517:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.sansSerifBoldItalic=void 0;var n=r(8042),o=r(4886);e.sansSerifBoldItalic=(0,n.AddCSS)(o.sansSerifBoldItalic,{305:{f:"SSB"},567:{f:"SSB"}})},4182:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.sansSerifBold=void 0;var n=r(8042),o=r(4471);e.sansSerifBold=(0,n.AddCSS)(o.sansSerifBold,{8213:{c:"\\2014"},8215:{c:"_"},8260:{c:"/"},8710:{c:"\\394"}})},2679:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.sansSerifItalic=void 0;var n=r(8042),o=r(5181);e.sansSerifItalic=(0,n.AddCSS)(o.sansSerifItalic,{913:{c:"A"},914:{c:"B"},917:{c:"E"},918:{c:"Z"},919:{c:"H"},921:{c:"I"},922:{c:"K"},924:{c:"M"},925:{c:"N"},927:{c:"O"},929:{c:"P"},932:{c:"T"},935:{c:"X"},8213:{c:"\\2014"},8215:{c:"_"},8260:{c:"/"},8710:{c:"\\394"}})},5469:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.sansSerif=void 0;var n=r(8042),o=r(3526);e.sansSerif=(0,n.AddCSS)(o.sansSerif,{913:{c:"A"},914:{c:"B"},917:{c:"E"},918:{c:"Z"},919:{c:"H"},921:{c:"I"},922:{c:"K"},924:{c:"M"},925:{c:"N"},927:{c:"O"},929:{c:"P"},932:{c:"T"},935:{c:"X"},8213:{c:"\\2014"},8215:{c:"_"},8260:{c:"/"},8710:{c:"\\394"}})},7563:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.scriptBold=void 0;var n=r(5649);Object.defineProperty(e,"scriptBold",{enumerable:!0,get:function(){return n.scriptBold}})},9409:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.script=void 0;var n=r(7153);Object.defineProperty(e,"script",{enumerable:!0,get:function(){return n.script}})},775:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.smallop=void 0;var n=r(8042),o=r(5745);e.smallop=(0,n.AddCSS)(o.smallop,{8260:{c:"/"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},10072:{c:"\\2223"},10764:{c:"\\222C\\222C"},12296:{c:"\\27E8"},12297:{c:"\\27E9"}})},9551:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.texCalligraphicBold=void 0;var n=r(8042),o=r(1411);e.texCalligraphicBold=(0,n.AddCSS)(o.texCalligraphicBold,{305:{f:"B"},567:{f:"B"}})},7907:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.texCalligraphic=void 0;var n=r(6384);Object.defineProperty(e,"texCalligraphic",{enumerable:!0,get:function(){return n.texCalligraphic}})},9659:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.texMathit=void 0;var n=r(6041);Object.defineProperty(e,"texMathit",{enumerable:!0,get:function(){return n.texMathit}})},98:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.texOldstyleBold=void 0;var n=r(8199);Object.defineProperty(e,"texOldstyleBold",{enumerable:!0,get:function(){return n.texOldstyleBold}})},6275:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.texOldstyle=void 0;var n=r(9848);Object.defineProperty(e,"texOldstyle",{enumerable:!0,get:function(){return n.texOldstyle}})},6530:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.texSize3=void 0;var n=r(8042),o=r(7906);e.texSize3=(0,n.AddCSS)(o.texSize3,{8260:{c:"/"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},12296:{c:"\\27E8"},12297:{c:"\\27E9"}})},4409:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.texSize4=void 0;var n=r(8042),o=r(2644);e.texSize4=(0,n.AddCSS)(o.texSize4,{8260:{c:"/"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},12296:{c:"\\27E8"},12297:{c:"\\27E9"},57685:{c:"\\E153\\E152"},57686:{c:"\\E151\\E150"}})},5292:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.texVariant=void 0;var n=r(8042),o=r(4926);e.texVariant=(0,n.AddCSS)(o.texVariant,{1008:{c:"\\E009"},8463:{f:""},8740:{c:"\\E006"},8742:{c:"\\E007"},8808:{c:"\\E00C"},8809:{c:"\\E00D"},8816:{c:"\\E011"},8817:{c:"\\E00E"},8840:{c:"\\E016"},8841:{c:"\\E018"},8842:{c:"\\E01A"},8843:{c:"\\E01B"},10887:{c:"\\E010"},10888:{c:"\\E00F"},10955:{c:"\\E017"},10956:{c:"\\E019"}})},5884:function(t,e,r){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.FontData=e.NOSTRETCH=e.H=e.V=void 0;var a=r(7233);e.V=1,e.H=2,e.NOSTRETCH={dir:0};var l=function(){function t(t){var e,r,l,c;void 0===t&&(t=null),this.variant={},this.delimiters={},this.cssFontMap={},this.remapChars={},this.skewIcFactor=.75;var u=this.constructor;this.options=(0,a.userOptions)((0,a.defaultOptions)({},u.OPTIONS),t),this.params=n({},u.defaultParams),this.sizeVariants=i([],o(u.defaultSizeVariants),!1),this.stretchVariants=i([],o(u.defaultStretchVariants),!1),this.cssFontMap=n({},u.defaultCssFonts);try{for(var p=s(Object.keys(this.cssFontMap)),h=p.next();!h.done;h=p.next()){var f=h.value;"unknown"===this.cssFontMap[f][0]&&(this.cssFontMap[f][0]=this.options.unknownFamily)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}this.cssFamilyPrefix=u.defaultCssFamilyPrefix,this.createVariants(u.defaultVariants),this.defineDelimiters(u.defaultDelimiters);try{for(var d=s(Object.keys(u.defaultChars)),m=d.next();!m.done;m=d.next()){var y=m.value;this.defineChars(y,u.defaultChars[y])}}catch(t){l={error:t}}finally{try{m&&!m.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}this.defineRemap("accent",u.defaultAccentMap),this.defineRemap("mo",u.defaultMoMap),this.defineRemap("mn",u.defaultMnMap)}return t.charOptions=function(t,e){var r=t[e];return 3===r.length&&(r[3]={}),r[3]},Object.defineProperty(t.prototype,"styles",{get:function(){return this._styles},set:function(t){this._styles=t},enumerable:!1,configurable:!0}),t.prototype.createVariant=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=null);var n={linked:[],chars:e?Object.create(this.variant[e].chars):{}};r&&this.variant[r]&&(Object.assign(n.chars,this.variant[r].chars),this.variant[r].linked.push(n.chars),n.chars=Object.create(n.chars)),this.remapSmpChars(n.chars,t),this.variant[t]=n},t.prototype.remapSmpChars=function(t,e){var r,n,i,a,l=this.constructor;if(l.VariantSmp[e]){var c=l.SmpRemap,u=[null,null,l.SmpRemapGreekU,l.SmpRemapGreekL];try{for(var p=s(l.SmpRanges),h=p.next();!h.done;h=p.next()){var f=o(h.value,3),d=f[0],m=f[1],y=f[2],g=l.VariantSmp[e][d];if(g){for(var b=m;b<=y;b++)if(930!==b){var v=g+b-m;t[b]=this.smpChar(c[v]||v)}if(u[d])try{for(var _=(i=void 0,s(Object.keys(u[d]).map((function(t){return parseInt(t)})))),S=_.next();!S.done;S=_.next()){t[b=S.value]=this.smpChar(g+u[d][b])}}catch(t){i={error:t}}finally{try{S&&!S.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}}}catch(t){r={error:t}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}"bold"===e&&(t[988]=this.smpChar(120778),t[989]=this.smpChar(120779))},t.prototype.smpChar=function(t){return[,,,{smp:t}]},t.prototype.createVariants=function(t){var e,r;try{for(var n=s(t),o=n.next();!o.done;o=n.next()){var i=o.value;this.createVariant(i[0],i[1],i[2])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.defineChars=function(t,e){var r,n,o=this.variant[t];Object.assign(o.chars,e);try{for(var i=s(o.linked),a=i.next();!a.done;a=i.next()){var l=a.value;Object.assign(l,e)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.defineDelimiters=function(t){Object.assign(this.delimiters,t)},t.prototype.defineRemap=function(t,e){this.remapChars.hasOwnProperty(t)||(this.remapChars[t]={}),Object.assign(this.remapChars[t],e)},t.prototype.getDelimiter=function(t){return this.delimiters[t]},t.prototype.getSizeVariant=function(t,e){return this.delimiters[t].variants&&(e=this.delimiters[t].variants[e]),this.sizeVariants[e]},t.prototype.getStretchVariant=function(t,e){return this.stretchVariants[this.delimiters[t].stretchv?this.delimiters[t].stretchv[e]:0]},t.prototype.getChar=function(t,e){return this.variant[t].chars[e]},t.prototype.getVariant=function(t){return this.variant[t]},t.prototype.getCssFont=function(t){return this.cssFontMap[t]||["serif",!1,!1]},t.prototype.getFamily=function(t){return this.cssFamilyPrefix?this.cssFamilyPrefix+", "+t:t},t.prototype.getRemappedChar=function(t,e){return(this.remapChars[t]||{})[e]},t.OPTIONS={unknownFamily:"serif"},t.JAX="common",t.NAME="",t.defaultVariants=[["normal"],["bold","normal"],["italic","normal"],["bold-italic","italic","bold"],["double-struck","bold"],["fraktur","normal"],["bold-fraktur","bold","fraktur"],["script","italic"],["bold-script","bold-italic","script"],["sans-serif","normal"],["bold-sans-serif","bold","sans-serif"],["sans-serif-italic","italic","sans-serif"],["sans-serif-bold-italic","bold-italic","bold-sans-serif"],["monospace","normal"]],t.defaultCssFonts={normal:["unknown",!1,!1],bold:["unknown",!1,!0],italic:["unknown",!0,!1],"bold-italic":["unknown",!0,!0],"double-struck":["unknown",!1,!0],fraktur:["unknown",!1,!1],"bold-fraktur":["unknown",!1,!0],script:["cursive",!1,!1],"bold-script":["cursive",!1,!0],"sans-serif":["sans-serif",!1,!1],"bold-sans-serif":["sans-serif",!1,!0],"sans-serif-italic":["sans-serif",!0,!1],"sans-serif-bold-italic":["sans-serif",!0,!0],monospace:["monospace",!1,!1]},t.defaultCssFamilyPrefix="",t.VariantSmp={bold:[119808,119834,120488,120514,120782],italic:[119860,119886,120546,120572],"bold-italic":[119912,119938,120604,120630],script:[119964,119990],"bold-script":[120016,120042],fraktur:[120068,120094],"double-struck":[120120,120146,,,120792],"bold-fraktur":[120172,120198],"sans-serif":[120224,120250,,,120802],"bold-sans-serif":[120276,120302,120662,120688,120812],"sans-serif-italic":[120328,120354],"sans-serif-bold-italic":[120380,120406,120720,120746],monospace:[120432,120458,,,120822]},t.SmpRanges=[[0,65,90],[1,97,122],[2,913,937],[3,945,969],[4,48,57]],t.SmpRemap={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},t.SmpRemapGreekU={8711:25,1012:17},t.SmpRemapGreekL={977:27,981:29,982:31,1008:28,1009:30,1013:26,8706:25},t.defaultAccentMap={768:"\u02cb",769:"\u02ca",770:"\u02c6",771:"\u02dc",772:"\u02c9",774:"\u02d8",775:"\u02d9",776:"\xa8",778:"\u02da",780:"\u02c7",8594:"\u20d7",8242:"'",8243:"''",8244:"'''",8245:"`",8246:"``",8247:"```",8279:"''''",8400:"\u21bc",8401:"\u21c0",8406:"\u2190",8417:"\u2194",8432:"*",8411:"...",8412:"....",8428:"\u21c1",8429:"\u21bd",8430:"\u2190",8431:"\u2192"},t.defaultMoMap={45:"\u2212"},t.defaultMnMap={45:"\u2212"},t.defaultParams={x_height:.442,quad:1,num1:.676,num2:.394,num3:.444,denom1:.686,denom2:.345,sup1:.413,sup2:.363,sup3:.289,sub1:.15,sub2:.247,sup_drop:.386,sub_drop:.05,delim1:2.39,delim2:1,axis_height:.25,rule_thickness:.06,big_op_spacing1:.111,big_op_spacing2:.167,big_op_spacing3:.2,big_op_spacing4:.6,big_op_spacing5:.1,surd_height:.075,scriptspace:.05,nulldelimiterspace:.12,delimiterfactor:901,delimitershortfall:.3,min_rule_thickness:1.25,separation_factor:1.75,extra_ic:.033},t.defaultDelimiters={},t.defaultChars={},t.defaultSizeVariants=[],t.defaultStretchVariants=[],t}();e.FontData=l},5552:function(t,e){var r=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonArrow=e.CommonDiagonalArrow=e.CommonDiagonalStrike=e.CommonBorder2=e.CommonBorder=e.arrowBBox=e.diagonalArrowDef=e.arrowDef=e.arrowBBoxW=e.arrowBBoxHD=e.arrowHead=e.fullBorder=e.fullPadding=e.fullBBox=e.sideNames=e.sideIndex=e.SOLID=e.PADDING=e.THICKNESS=e.ARROWY=e.ARROWDX=e.ARROWX=void 0,e.ARROWX=4,e.ARROWDX=1,e.ARROWY=2,e.THICKNESS=.067,e.PADDING=.2,e.SOLID=e.THICKNESS+"em solid",e.sideIndex={top:0,right:1,bottom:2,left:3},e.sideNames=Object.keys(e.sideIndex),e.fullBBox=function(t){return new Array(4).fill(t.thickness+t.padding)},e.fullPadding=function(t){return new Array(4).fill(t.padding)},e.fullBorder=function(t){return new Array(4).fill(t.thickness)};e.arrowHead=function(t){return Math.max(t.padding,t.thickness*(t.arrowhead.x+t.arrowhead.dx+1))};e.arrowBBoxHD=function(t,e){if(t.childNodes[0]){var r=t.childNodes[0].getBBox(),n=r.h,o=r.d;e[0]=e[2]=Math.max(0,t.thickness*t.arrowhead.y-(n+o)/2)}return e};e.arrowBBoxW=function(t,e){if(t.childNodes[0]){var r=t.childNodes[0].getBBox().w;e[1]=e[3]=Math.max(0,t.thickness*t.arrowhead.y-r/2)}return e},e.arrowDef={up:[-Math.PI/2,!1,!0,"verticalstrike"],down:[Math.PI/2,!1,!0,"verticakstrike"],right:[0,!1,!1,"horizontalstrike"],left:[Math.PI,!1,!1,"horizontalstrike"],updown:[Math.PI/2,!0,!0,"verticalstrike uparrow downarrow"],leftright:[0,!0,!1,"horizontalstrike leftarrow rightarrow"]},e.diagonalArrowDef={updiagonal:[-1,0,!1,"updiagonalstrike northeastarrow"],northeast:[-1,0,!1,"updiagonalstrike updiagonalarrow"],southeast:[1,0,!1,"downdiagonalstrike"],northwest:[1,Math.PI,!1,"downdiagonalstrike"],southwest:[-1,Math.PI,!1,"updiagonalstrike"],northeastsouthwest:[-1,0,!0,"updiagonalstrike northeastarrow updiagonalarrow southwestarrow"],northwestsoutheast:[1,0,!0,"downdiagonalstrike northwestarrow southeastarrow"]},e.arrowBBox={up:function(t){return(0,e.arrowBBoxW)(t,[(0,e.arrowHead)(t),0,t.padding,0])},down:function(t){return(0,e.arrowBBoxW)(t,[t.padding,0,(0,e.arrowHead)(t),0])},right:function(t){return(0,e.arrowBBoxHD)(t,[0,(0,e.arrowHead)(t),0,t.padding])},left:function(t){return(0,e.arrowBBoxHD)(t,[0,t.padding,0,(0,e.arrowHead)(t)])},updown:function(t){return(0,e.arrowBBoxW)(t,[(0,e.arrowHead)(t),0,(0,e.arrowHead)(t),0])},leftright:function(t){return(0,e.arrowBBoxHD)(t,[0,(0,e.arrowHead)(t),0,(0,e.arrowHead)(t)])}};e.CommonBorder=function(t){return function(r){var n=e.sideIndex[r];return[r,{renderer:t,bbox:function(t){var e=[0,0,0,0];return e[n]=t.thickness+t.padding,e},border:function(t){var e=[0,0,0,0];return e[n]=t.thickness,e}}]}};e.CommonBorder2=function(t){return function(r,n,o){var i=e.sideIndex[n],s=e.sideIndex[o];return[r,{renderer:t,bbox:function(t){var e=t.thickness+t.padding,r=[0,0,0,0];return r[i]=r[s]=e,r},border:function(t){var e=[0,0,0,0];return e[i]=e[s]=t.thickness,e},remove:n+" "+o}]}};e.CommonDiagonalStrike=function(t){return function(r){var n="mjx-"+r.charAt(0)+"strike";return[r+"diagonalstrike",{renderer:t(n),bbox:e.fullBBox}]}};e.CommonDiagonalArrow=function(t){return function(n){var o=r(e.diagonalArrowDef[n],4),i=o[0],s=o[1],a=o[2];return[n+"arrow",{renderer:function(e,n){var o=r(e.arrowAW(),2),l=o[0],c=o[1],u=e.arrow(c,i*(l-s),a);t(e,u)},bbox:function(t){var e=t.arrowData(),n=e.a,o=e.x,i=e.y,s=r([t.arrowhead.x,t.arrowhead.y,t.arrowhead.dx],3),a=s[0],l=s[1],c=s[2],u=r(t.getArgMod(a+c,l),2),p=u[0],h=u[1],f=i+(p>n?t.thickness*h*Math.sin(p-n):0),d=o+(p>Math.PI/2-n?t.thickness*h*Math.sin(p+n-Math.PI/2):0);return[f,d,f,d]},remove:o[3]}]}};e.CommonArrow=function(t){return function(n){var o=r(e.arrowDef[n],4),i=o[0],s=o[1],a=o[2],l=o[3];return[n+"arrow",{renderer:function(e,n){var o=e.getBBox(),l=o.w,c=o.h,u=o.d,p=r(a?[c+u,"X"]:[l,"Y"],2),h=p[0],f=p[1],d=e.getOffset(f),m=e.arrow(h,i,s,f,d);t(e,m)},bbox:e.arrowBBox[n],remove:l}]}}},3055:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonOutputJax=void 0;var l=r(2975),c=r(4474),u=r(7233),p=r(6010),h=r(8054),f=r(4139),d=function(t){function e(e,r,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null);var o=this,i=s((0,u.separateOptions)(e,n.OPTIONS),2),a=i[0],l=i[1];return(o=t.call(this,a)||this).factory=o.options.wrapperFactory||new r,o.factory.jax=o,o.cssStyles=o.options.cssStyles||new f.CssStyles,o.font=o.options.font||new n(l),o.unknownCache=new Map,o}return o(e,t),e.prototype.typeset=function(t,e){this.setDocument(e);var r=this.createNode();return this.toDOM(t,r,e),r},e.prototype.createNode=function(){var t=this.constructor.NAME;return this.html("mjx-container",{class:"MathJax",jax:t})},e.prototype.setScale=function(t){var e=this.math.metrics.scale*this.options.scale;1!==e&&this.adaptor.setStyle(t,"fontSize",(0,p.percent)(e))},e.prototype.toDOM=function(t,e,r){void 0===r&&(r=null),this.setDocument(r),this.math=t,this.pxPerEm=t.metrics.ex/this.font.params.x_height,t.root.setTeXclass(null),this.setScale(e),this.nodeMap=new Map,this.container=e,this.processMath(t.root,e),this.nodeMap=null,this.executeFilters(this.postFilters,t,r,e)},e.prototype.getBBox=function(t,e){this.setDocument(e),this.math=t,t.root.setTeXclass(null),this.nodeMap=new Map;var r=this.factory.wrap(t.root).getOuterBBox();return this.nodeMap=null,r},e.prototype.getMetrics=function(t){var e,r;this.setDocument(t);var n=this.adaptor,o=this.getMetricMaps(t);try{for(var i=a(t.math),s=i.next();!s.done;s=i.next()){var l=s.value,u=n.parent(l.start.node);if(l.state()<c.STATE.METRICS&&u){var p=o[l.display?1:0].get(u),h=p.em,f=p.ex,d=p.containerWidth,m=p.lineWidth,y=p.scale,g=p.family;l.setMetrics(h,f,d,m,y),this.options.mtextInheritFont&&(l.outputData.mtextFamily=g),this.options.merrorInheritFont&&(l.outputData.merrorFamily=g),l.state(c.STATE.METRICS)}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},e.prototype.getMetricsFor=function(t,e){var r=this.options.mtextInheritFont||this.options.merrorInheritFont,n=this.getTestElement(t,e),o=this.measureMetrics(n,r);return this.adaptor.remove(n),o},e.prototype.getMetricMaps=function(t){var e,r,n,o,i,s,l,u,p,h,f=this.adaptor,d=[new Map,new Map];try{for(var m=a(t.math),y=m.next();!y.done;y=m.next()){var g=y.value;if((A=f.parent(g.start.node))&&g.state()<c.STATE.METRICS){var b=d[g.display?1:0];b.has(A)||b.set(A,this.getTestElement(A,g.display))}}}catch(t){e={error:t}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(e)throw e.error}}var v=this.options.mtextInheritFont||this.options.merrorInheritFont,_=[new Map,new Map];try{for(var S=a(_.keys()),M=S.next();!M.done;M=S.next()){var O=M.value;try{for(var x=(i=void 0,a(d[O].keys())),E=x.next();!E.done;E=x.next()){var A=E.value;_[O].set(A,this.measureMetrics(d[O].get(A),v))}}catch(t){i={error:t}}finally{try{E&&!E.done&&(s=x.return)&&s.call(x)}finally{if(i)throw i.error}}}}catch(t){n={error:t}}finally{try{M&&!M.done&&(o=S.return)&&o.call(S)}finally{if(n)throw n.error}}try{for(var C=a(_.keys()),T=C.next();!T.done;T=C.next()){O=T.value;try{for(var N=(p=void 0,a(d[O].values())),w=N.next();!w.done;w=N.next()){A=w.value;f.remove(A)}}catch(t){p={error:t}}finally{try{w&&!w.done&&(h=N.return)&&h.call(N)}finally{if(p)throw p.error}}}}catch(t){l={error:t}}finally{try{T&&!T.done&&(u=C.return)&&u.call(C)}finally{if(l)throw l.error}}return _},e.prototype.getTestElement=function(t,e){var r=this.adaptor;if(!this.testInline){this.testInline=this.html("mjx-test",{style:{display:"inline-block",width:"100%","font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","text-indent":0,"text-transform":"none","letter-spacing":"normal","word-spacing":"normal",overflow:"hidden",height:"1px","margin-right":"-1px"}},[this.html("mjx-left-box",{style:{display:"inline-block",width:0,float:"left"}}),this.html("mjx-ex-box",{style:{position:"absolute",overflow:"hidden",width:"1px",height:"60ex"}}),this.html("mjx-right-box",{style:{display:"inline-block",width:0,float:"right"}})]),this.testDisplay=r.clone(this.testInline),r.setStyle(this.testDisplay,"display","table"),r.setStyle(this.testDisplay,"margin-right",""),r.setStyle(r.firstChild(this.testDisplay),"display","none");var n=r.lastChild(this.testDisplay);r.setStyle(n,"display","table-cell"),r.setStyle(n,"width","10000em"),r.setStyle(n,"float","")}return r.append(t,r.clone(e?this.testDisplay:this.testInline))},e.prototype.measureMetrics=function(t,e){var r=this.adaptor,n=e?r.fontFamily(t):"",o=r.fontSize(t),i=s(r.nodeSize(r.childNode(t,1)),2),a=i[0],l=i[1],c=a?l/60:o*this.options.exFactor;return{em:o,ex:c,containerWidth:a?"table"===r.getStyle(t,"display")?r.nodeSize(r.lastChild(t))[0]-1:r.nodeBBox(r.lastChild(t)).left-r.nodeBBox(r.firstChild(t)).left-2:1e6,lineWidth:1e6,scale:Math.max(this.options.minScale,this.options.matchFontHeight?c/this.font.params.x_height/o:1),family:n}},e.prototype.styleSheet=function(t){var e,r;if(this.setDocument(t),this.cssStyles.clear(),this.cssStyles.addStyles(this.constructor.commonStyles),"getStyles"in t)try{for(var n=a(t.getStyles()),o=n.next();!o.done;o=n.next()){var i=o.value;this.cssStyles.addStyles(i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this.addWrapperStyles(this.cssStyles),this.addFontStyles(this.cssStyles),this.html("style",{id:"MJX-styles"},[this.text("\n"+this.cssStyles.cssText+"\n")])},e.prototype.addFontStyles=function(t){t.addStyles(this.font.styles)},e.prototype.addWrapperStyles=function(t){var e,r;try{for(var n=a(this.factory.getKinds()),o=n.next();!o.done;o=n.next()){var i=o.value;this.addClassStyles(this.factory.getNodeClass(i),t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},e.prototype.addClassStyles=function(t,e){e.addStyles(t.styles)},e.prototype.setDocument=function(t){t&&(this.document=t,this.adaptor.document=t.document)},e.prototype.html=function(t,e,r,n){return void 0===e&&(e={}),void 0===r&&(r=[]),this.adaptor.node(t,e,r,n)},e.prototype.text=function(t){return this.adaptor.text(t)},e.prototype.fixed=function(t,e){return void 0===e&&(e=3),Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")},e.prototype.measureText=function(t,e,r){void 0===r&&(r=["",!1,!1]);var n=this.unknownText(t,e);if("-explicitFont"===e){var o=this.cssFontStyles(r);this.adaptor.setAttributes(n,{style:o})}return this.measureTextNodeWithCache(n,t,e,r)},e.prototype.measureTextNodeWithCache=function(t,e,r,n){void 0===n&&(n=["",!1,!1]),"-explicitFont"===r&&(r=[n[0],n[1]?"T":"F",n[2]?"T":"F",""].join("-")),this.unknownCache.has(r)||this.unknownCache.set(r,new Map);var o=this.unknownCache.get(r),i=o.get(e);if(i)return i;var s=this.measureTextNode(t);return o.set(e,s),s},e.prototype.measureXMLnode=function(t){var e=this.adaptor,r=this.html("mjx-xml-block",{style:{display:"inline-block"}},[e.clone(t)]),n=this.html("mjx-baseline",{style:{display:"inline-block",width:0,height:0}}),o=this.html("mjx-measure-xml",{style:{position:"absolute",display:"inline-block","font-family":"initial","line-height":"normal"}},[n,r]);e.append(e.parent(this.math.start.node),this.container),e.append(this.container,o);var i=this.math.metrics.em*this.math.metrics.scale,s=e.nodeBBox(r),a=s.left,l=s.right,c=s.bottom,u=s.top,p=(l-a)/i,h=(e.nodeBBox(n).top-u)/i,f=(c-u)/i-h;return e.remove(this.container),e.remove(o),{w:p,h:h,d:f}},e.prototype.cssFontStyles=function(t,e){void 0===e&&(e={});var r=s(t,3),n=r[0],o=r[1],i=r[2];return e["font-family"]=this.font.getFamily(n),o&&(e["font-style"]="italic"),i&&(e["font-weight"]="bold"),e},e.prototype.getFontData=function(t){return t||(t=new h.Styles),[this.font.getFamily(t.get("font-family")),"italic"===t.get("font-style"),"bold"===t.get("font-weight")]},e.NAME="Common",e.OPTIONS=i(i({},l.AbstractOutputJax.OPTIONS),{scale:1,minScale:.5,mtextInheritFont:!1,merrorInheritFont:!1,mtextFont:"",merrorFont:"serif",mathmlSpacing:!1,skipAttributes:{},exFactor:.5,displayAlign:"center",displayIndent:"0",wrapperFactory:null,font:null,cssStyles:null}),e.commonStyles={},e}(l.AbstractOutputJax);e.CommonOutputJax=d},7519:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return s(e,t),e},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},u=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonWrapper=void 0;var p=r(8912),h=r(9007),f=r(505),d=a(r(6010)),m=r(8054),y=r(6469),g=r(5884),b=2/18;function v(t,e){return t?e<b?0:b:e}var _=function(t){function e(e,r,n){void 0===n&&(n=null);var o=t.call(this,e,r)||this;return o.parent=null,o.removedStyles=null,o.styles=null,o.variant="",o.bboxComputed=!1,o.stretch=g.NOSTRETCH,o.font=null,o.parent=n,o.font=e.jax.font,o.bbox=y.BBox.zero(),o.getStyles(),o.getVariant(),o.getScale(),o.getSpace(),o.childNodes=r.childNodes.map((function(t){var e=o.wrap(t);return e.bbox.pwidth&&(r.notParent||r.isKind("math"))&&(o.bbox.pwidth=y.BBox.fullWidth),e})),o}return o(e,t),Object.defineProperty(e.prototype,"jax",{get:function(){return this.factory.jax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adaptor",{get:function(){return this.factory.jax.adaptor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metrics",{get:function(){return this.factory.jax.math.metrics},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixesPWidth",{get:function(){return!this.node.notParent&&!this.node.isToken},enumerable:!1,configurable:!0}),e.prototype.wrap=function(t,e){void 0===e&&(e=null);var r=this.factory.wrap(t,e||this);return e&&e.childNodes.push(r),this.jax.nodeMap.set(t,r),r},e.prototype.getBBox=function(t){if(void 0===t&&(t=!0),this.bboxComputed)return this.bbox;var e=t?this.bbox:y.BBox.zero();return this.computeBBox(e),this.bboxComputed=t,e},e.prototype.getOuterBBox=function(t){var e,r;void 0===t&&(t=!0);var n=this.getBBox(t);if(!this.styles)return n;var o=new y.BBox;Object.assign(o,n);try{for(var i=l(y.BBox.StyleAdjust),s=i.next();!s.done;s=i.next()){var a=c(s.value,2),u=a[0],p=a[1],h=this.styles.get(u);h&&(o[p]+=this.length2em(h,1,o.rscale))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return o},e.prototype.computeBBox=function(t,e){var r,n;void 0===e&&(e=!1),t.empty();try{for(var o=l(this.childNodes),i=o.next();!i.done;i=o.next()){var s=i.value;t.append(s.getOuterBBox())}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.clean(),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0)},e.prototype.setChildPWidths=function(t,e,r){var n,o;if(void 0===e&&(e=null),void 0===r&&(r=!0),t)return!1;r&&(this.bbox.pwidth="");var i=!1;try{for(var s=l(this.childNodes),a=s.next();!a.done;a=s.next()){var c=a.value,u=c.getOuterBBox();u.pwidth&&c.setChildPWidths(t,null===e?u.w:e,r)&&(i=!0)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i},e.prototype.invalidateBBox=function(){this.bboxComputed&&(this.bboxComputed=!1,this.parent&&this.parent.invalidateBBox())},e.prototype.copySkewIC=function(t){var e=this.childNodes[0];(null==e?void 0:e.bbox.sk)&&(t.sk=e.bbox.sk),(null==e?void 0:e.bbox.dx)&&(t.dx=e.bbox.dx);var r=this.childNodes[this.childNodes.length-1];(null==r?void 0:r.bbox.ic)&&(t.ic=r.bbox.ic,t.w+=t.ic)},e.prototype.getStyles=function(){var t=this.node.attributes.getExplicit("style");if(t)for(var r=this.styles=new m.Styles(t),n=0,o=e.removeStyles.length;n<o;n++){var i=e.removeStyles[n];r.get(i)&&(this.removedStyles||(this.removedStyles={}),this.removedStyles[i]=r.get(i),r.set(i,""))}},e.prototype.getVariant=function(){if(this.node.isToken){var t=this.node.attributes,r=t.get("mathvariant");if(!t.getExplicit("mathvariant")){var n=t.getList("fontfamily","fontweight","fontstyle");if(this.removedStyles){var o=this.removedStyles;o.fontFamily&&(n.family=o.fontFamily),o.fontWeight&&(n.weight=o.fontWeight),o.fontStyle&&(n.style=o.fontStyle)}n.fontfamily&&(n.family=n.fontfamily),n.fontweight&&(n.weight=n.fontweight),n.fontstyle&&(n.style=n.fontstyle),n.weight&&n.weight.match(/^\d+$/)&&(n.weight=parseInt(n.weight)>600?"bold":"normal"),n.family?r=this.explicitVariant(n.family,n.weight,n.style):(this.node.getProperty("variantForm")&&(r="-tex-variant"),r=(e.BOLDVARIANTS[n.weight]||{})[r]||r,r=(e.ITALICVARIANTS[n.style]||{})[r]||r)}this.variant=r}},e.prototype.explicitVariant=function(t,e,r){var n=this.styles;return n||(n=this.styles=new m.Styles),n.set("fontFamily",t),e&&n.set("fontWeight",e),r&&n.set("fontStyle",r),"-explicitFont"},e.prototype.getScale=function(){var t=1,e=this.parent,r=e?e.bbox.scale:1,n=this.node.attributes,o=Math.min(n.get("scriptlevel"),2),i=n.get("fontsize"),s=this.node.isToken||this.node.isKind("mstyle")?n.get("mathsize"):n.getInherited("mathsize");if(0!==o){t=Math.pow(n.get("scriptsizemultiplier"),o);var a=this.length2em(n.get("scriptminsize"),.8,1);t<a&&(t=a)}this.removedStyles&&this.removedStyles.fontSize&&!i&&(i=this.removedStyles.fontSize),i&&!n.getExplicit("mathsize")&&(s=i),"1"!==s&&(t*=this.length2em(s,1,1)),this.bbox.scale=t,this.bbox.rscale=t/r},e.prototype.getSpace=function(){var t=this.isTopEmbellished(),e=this.node.hasSpacingAttributes();this.jax.options.mathmlSpacing||e?t&&this.getMathMLSpacing():this.getTeXSpacing(t,e)},e.prototype.getMathMLSpacing=function(){var t=this.node.coreMO(),e=t.coreParent(),r=e.parent;if(r&&r.isKind("mrow")&&1!==r.childNodes.length){var n=t.attributes,o=n.get("scriptlevel")>0;this.bbox.L=n.isSet("lspace")?Math.max(0,this.length2em(n.get("lspace"))):v(o,t.lspace),this.bbox.R=n.isSet("rspace")?Math.max(0,this.length2em(n.get("rspace"))):v(o,t.rspace);var i=r.childIndex(e);if(0!==i){var s=r.childNodes[i-1];if(s.isEmbellished){var a=this.jax.nodeMap.get(s).getBBox();a.R&&(this.bbox.L=Math.max(0,this.bbox.L-a.R))}}}},e.prototype.getTeXSpacing=function(t,e){if(!e){var r=this.node.texSpacing();r&&(this.bbox.L=this.length2em(r))}if(t||e){var n=this.node.coreMO().attributes;n.isSet("lspace")&&(this.bbox.L=Math.max(0,this.length2em(n.get("lspace")))),n.isSet("rspace")&&(this.bbox.R=Math.max(0,this.length2em(n.get("rspace"))))}},e.prototype.isTopEmbellished=function(){return this.node.isEmbellished&&!(this.node.parent&&this.node.parent.isEmbellished)},e.prototype.core=function(){return this.jax.nodeMap.get(this.node.core())},e.prototype.coreMO=function(){return this.jax.nodeMap.get(this.node.coreMO())},e.prototype.getText=function(){var t,e,r="";if(this.node.isToken)try{for(var n=l(this.node.childNodes),o=n.next();!o.done;o=n.next()){var i=o.value;i instanceof h.TextNode&&(r+=i.getText())}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},e.prototype.canStretch=function(t){if(this.stretch=g.NOSTRETCH,this.node.isEmbellished){var e=this.core();e&&e.node!==this.node&&e.canStretch(t)&&(this.stretch=e.stretch)}return 0!==this.stretch.dir},e.prototype.getAlignShift=function(){var t,e=(t=this.node.attributes).getList.apply(t,u([],c(h.indentAttributes),!1)),r=e.indentalign,n=e.indentshift,o=e.indentalignfirst,i=e.indentshiftfirst;return"indentalign"!==o&&(r=o),"auto"===r&&(r=this.jax.options.displayAlign),"indentshift"!==i&&(n=i),"auto"===n&&(n=this.jax.options.displayIndent,"right"!==r||n.match(/^\s*0[a-z]*\s*$/)||(n=("-"+n.trim()).replace(/^--/,""))),[r,this.length2em(n,this.metrics.containerWidth)]},e.prototype.getAlignX=function(t,e,r){return"right"===r?t-(e.w+e.R)*e.rscale:"left"===r?e.L*e.rscale:(t-e.w*e.rscale)/2},e.prototype.getAlignY=function(t,e,r,n,o){return"top"===o?t-r:"bottom"===o?n-e:"center"===o?(t-r-(e-n))/2:0},e.prototype.getWrapWidth=function(t){return this.childNodes[t].getBBox().w},e.prototype.getChildAlign=function(t){return"left"},e.prototype.percent=function(t){return d.percent(t)},e.prototype.em=function(t){return d.em(t)},e.prototype.px=function(t,e){return void 0===e&&(e=-d.BIGDIMEN),d.px(t,e,this.metrics.em)},e.prototype.length2em=function(t,e,r){return void 0===e&&(e=1),void 0===r&&(r=null),null===r&&(r=this.bbox.scale),d.length2em(t,e,r,this.jax.pxPerEm)},e.prototype.unicodeChars=function(t,e){void 0===e&&(e=this.variant);var r=(0,f.unicodeChars)(t),n=this.font.getVariant(e);if(n&&n.chars){var o=n.chars;r=r.map((function(t){return((o[t]||[])[3]||{}).smp||t}))}return r},e.prototype.remapChars=function(t){return t},e.prototype.mmlText=function(t){return this.node.factory.create("text").setText(t)},e.prototype.mmlNode=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r=[]),this.node.factory.create(t,e,r)},e.prototype.createMo=function(t){var e=this.node.factory,r=e.create("text").setText(t),n=e.create("mo",{stretchy:!0},[r]);n.inheritAttributesFrom(this.node);var o=this.wrap(n);return o.parent=this,o},e.prototype.getVariantChar=function(t,e){var r=this.font.getChar(t,e)||[0,0,0,{unknown:!0}];return 3===r.length&&(r[3]={}),r},e.kind="unknown",e.styles={},e.removeStyles=["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","font"],e.skipAttributes={fontfamily:!0,fontsize:!0,fontweight:!0,fontstyle:!0,color:!0,background:!0,class:!0,href:!0,style:!0,xmlns:!0},e.BOLDVARIANTS={bold:{normal:"bold",italic:"bold-italic",fraktur:"bold-fraktur",script:"bold-script","sans-serif":"bold-sans-serif","sans-serif-italic":"sans-serif-bold-italic"},normal:{bold:"normal","bold-italic":"italic","bold-fraktur":"fraktur","bold-script":"script","bold-sans-serif":"sans-serif","sans-serif-bold-italic":"sans-serif-italic"}},e.ITALICVARIANTS={italic:{normal:"italic",bold:"bold-italic","sans-serif":"sans-serif-italic","bold-sans-serif":"sans-serif-bold-italic"},normal:{italic:"normal","bold-italic":"bold","sans-serif-italic":"sans-serif","sans-serif-bold-italic":"bold-sans-serif"}},e}(p.AbstractWrapper);e.CommonWrapper=_},4420:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonWrapperFactory=void 0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jax=null,e}return o(e,t),Object.defineProperty(e.prototype,"Wrappers",{get:function(){return this.node},enumerable:!1,configurable:!0}),e.defaultNodes={},e}(r(3811).AbstractWrapperFactory);e.CommonWrapperFactory=i},9800:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonTeXAtomMixin=void 0;var i=r(9007);e.CommonTeXAtomMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.computeBBox=function(e,r){if(void 0===r&&(r=!1),t.prototype.computeBBox.call(this,e,r),this.childNodes[0]&&this.childNodes[0].bbox.ic&&(e.ic=this.childNodes[0].bbox.ic),this.node.texClass===i.TEXCLASS.VCENTER){var n=e.h,o=(n+e.d)/2+this.font.params.axis_height-n;e.h+=o,e.d-=o}},e}(t)}},1160:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonTextNodeMixin=void 0,e.CommonTextNodeMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.computeBBox=function(t,e){var r,n;void 0===e&&(e=!1);var s=this.parent.variant,a=this.node.getText();if("-explicitFont"===s){var l=this.jax.getFontData(this.parent.styles),c=this.jax.measureText(a,s,l),u=c.w,p=c.h,h=c.d;t.h=p,t.d=h,t.w=u}else{var f=this.remappedText(a,s);t.empty();try{for(var d=o(f),m=d.next();!m.done;m=d.next()){var y=m.value,g=i(this.getVariantChar(s,y),4),b=(p=g[0],h=g[1],u=g[2],g[3]);if(b.unknown){var v=this.jax.measureText(String.fromCodePoint(y),s);u=v.w,p=v.h,h=v.d}t.w+=u,p>t.h&&(t.h=p),h>t.d&&(t.d=h),t.ic=b.ic||0,t.sk=b.sk||0,t.dx=b.dx||0}}catch(t){r={error:t}}finally{try{m&&!m.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}f.length>1&&(t.sk=0),t.clean()}},e.prototype.remappedText=function(t,e){var r=this.parent.stretch.c;return r?[r]:this.parent.remapChars(this.unicodeChars(t,e))},e.prototype.getStyles=function(){},e.prototype.getVariant=function(){},e.prototype.getScale=function(){},e.prototype.getSpace=function(){},e}(t)}},1956:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMactionMixin=e.TooltipData=void 0;var a=r(505);e.TooltipData={dx:".2em",dy:".1em",postDelay:600,clearDelay:100,hoverTimer:new Map,clearTimer:new Map,stopTimers:function(t,e){e.clearTimer.has(t)&&(clearTimeout(e.clearTimer.get(t)),e.clearTimer.delete(t)),e.hoverTimer.has(t)&&(clearTimeout(e.hoverTimer.get(t)),e.hoverTimer.delete(t))}},e.CommonMactionMixin=function(t){return function(t){function r(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,s([],i(e),!1))||this,o=n.constructor.actions,a=n.node.attributes.get("actiontype"),l=i(o.get(a)||[function(t,e){},{}],2),c=l[0],u=l[1];return n.action=c,n.data=u,n.getParameters(),n}return o(r,t),Object.defineProperty(r.prototype,"selected",{get:function(){var t=this.node.attributes.get("selection"),e=Math.max(1,Math.min(this.childNodes.length,t))-1;return this.childNodes[e]||this.wrap(this.node.selected)},enumerable:!1,configurable:!0}),r.prototype.getParameters=function(){var t=this.node.attributes.get("data-offsets"),r=i((0,a.split)(t||""),2),n=r[0],o=r[1];this.dx=this.length2em(n||e.TooltipData.dx),this.dy=this.length2em(o||e.TooltipData.dy)},r.prototype.computeBBox=function(t,e){void 0===e&&(e=!1),t.updateFrom(this.selected.getOuterBBox()),this.selected.setChildPWidths(e)},r}(t)}},7490:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMathMixin=void 0,e.CommonMathMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getWrapWidth=function(t){return this.parent?this.getBBox().w:this.metrics.containerWidth/this.jax.pxPerEm},e}(t)}},7313:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return s(e,t),e},l=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},c=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMencloseMixin=void 0;var p=a(r(5552)),h=r(505);e.CommonMencloseMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,c([],l(e),!1))||this;return n.notations={},n.renderChild=null,n.msqrt=null,n.padding=p.PADDING,n.thickness=p.THICKNESS,n.arrowhead={x:p.ARROWX,y:p.ARROWY,dx:p.ARROWDX},n.TRBL=[0,0,0,0],n.getParameters(),n.getNotations(),n.removeRedundantNotations(),n.initializeNotations(),n.TRBL=n.getBBoxExtenders(),n}return o(e,t),e.prototype.getParameters=function(){var t=this.node.attributes,e=t.get("data-padding");void 0!==e&&(this.padding=this.length2em(e,p.PADDING));var r=t.get("data-thickness");void 0!==r&&(this.thickness=this.length2em(r,p.THICKNESS));var n=t.get("data-arrowhead");if(void 0!==n){var o=l((0,h.split)(n),3),i=o[0],s=o[1],a=o[2];this.arrowhead={x:i?parseFloat(i):p.ARROWX,y:s?parseFloat(s):p.ARROWY,dx:a?parseFloat(a):p.ARROWDX}}},e.prototype.getNotations=function(){var t,e,r=this.constructor.notations;try{for(var n=u((0,h.split)(this.node.attributes.get("notation"))),o=n.next();!o.done;o=n.next()){var i=o.value,s=r.get(i);s&&(this.notations[i]=s,s.renderChild&&(this.renderChild=s.renderer))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.removeRedundantNotations=function(){var t,e,r,n;try{for(var o=u(Object.keys(this.notations)),i=o.next();!i.done;i=o.next()){var s=i.value;if(this.notations[s]){var a=this.notations[s].remove||"";try{for(var l=(r=void 0,u(a.split(/ /))),c=l.next();!c.done;c=l.next()){var p=c.value;delete this.notations[p]}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.initializeNotations=function(){var t,e;try{for(var r=u(Object.keys(this.notations)),n=r.next();!n.done;n=r.next()){var o=n.value,i=this.notations[o].init;i&&i(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r=l(this.TRBL,4),n=r[0],o=r[1],i=r[2],s=r[3],a=this.childNodes[0].getBBox();t.combine(a,s,0),t.h+=n,t.d+=i,t.w+=o,this.setChildPWidths(e)},e.prototype.getBBoxExtenders=function(){var t,e,r=[0,0,0,0];try{for(var n=u(Object.keys(this.notations)),o=n.next();!o.done;o=n.next()){var i=o.value;this.maximizeEntries(r,this.notations[i].bbox(this))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},e.prototype.getPadding=function(){var t,e,r=this,n=[0,0,0,0];try{for(var o=u(Object.keys(this.notations)),i=o.next();!i.done;i=o.next()){var s=i.value,a=this.notations[s].border;a&&this.maximizeEntries(n,a(this))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return[0,1,2,3].map((function(t){return r.TRBL[t]-n[t]}))},e.prototype.maximizeEntries=function(t,e){for(var r=0;r<t.length;r++)t[r]<e[r]&&(t[r]=e[r])},e.prototype.getOffset=function(t){var e=l(this.TRBL,4),r=e[0],n=e[1],o=e[2],i=e[3],s=("X"===t?n-i:o-r)/2;return Math.abs(s)>.001?s:0},e.prototype.getArgMod=function(t,e){return[Math.atan2(e,t),Math.sqrt(t*t+e*e)]},e.prototype.arrow=function(t,e,r,n,o){return void 0===n&&(n=""),void 0===o&&(o=0),null},e.prototype.arrowData=function(){var t=l([this.padding,this.thickness],2),e=t[0],r=t[1]*(this.arrowhead.x+Math.max(1,this.arrowhead.dx)),n=this.childNodes[0].getBBox(),o=n.h,i=n.d,s=n.w,a=o+i,c=Math.sqrt(a*a+s*s),u=Math.max(e,r*s/c),p=Math.max(e,r*a/c),h=l(this.getArgMod(s+2*u,a+2*p),2);return{a:h[0],W:h[1],x:u,y:p}},e.prototype.arrowAW=function(){var t=this.childNodes[0].getBBox(),e=t.h,r=t.d,n=t.w,o=l(this.TRBL,4),i=o[0],s=o[1],a=o[2],c=o[3];return this.getArgMod(c+n+s,i+e+r+a)},e.prototype.createMsqrt=function(t){var e=this.node.factory.create("msqrt");e.inheritAttributesFrom(this.node),e.childNodes[0]=t.node;var r=this.wrap(e);return r.parent=this,r},e.prototype.sqrtTRBL=function(){var t=this.msqrt.getBBox(),e=this.msqrt.childNodes[0].getBBox();return[t.h-e.h,0,t.d-e.d,t.w-e.w]},e}(t)}},7555:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMfencedMixin=void 0,e.CommonMfencedMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,i([],o(e),!1))||this;return n.mrow=null,n.createMrow(),n.addMrowChildren(),n}return n(e,t),e.prototype.createMrow=function(){var t=this.node.factory.create("inferredMrow");t.inheritAttributesFrom(this.node),this.mrow=this.wrap(t),this.mrow.parent=this},e.prototype.addMrowChildren=function(){var t,e,r=this.node,n=this.mrow;this.addMo(r.open),this.childNodes.length&&n.childNodes.push(this.childNodes[0]);var o=0;try{for(var i=s(this.childNodes.slice(1)),a=i.next();!a.done;a=i.next()){var l=a.value;this.addMo(r.separators[o++]),n.childNodes.push(l)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.addMo(r.close),n.stretchChildren()},e.prototype.addMo=function(t){if(t){var e=this.wrap(t);this.mrow.childNodes.push(e),e.parent=this.mrow}},e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1),t.updateFrom(this.mrow.getOuterBBox()),this.setChildPWidths(e)},e}(t)}},2688:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMfracMixin=void 0,e.CommonMfracMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,i([],o(e),!1))||this;if(n.bevel=null,n.pad=n.node.getProperty("withDelims")?0:n.font.params.nulldelimiterspace,n.node.attributes.get("bevelled")){var s=n.getBevelData(n.isDisplay()).H,a=n.bevel=n.createMo("/");a.node.attributes.set("symmetric",!0),a.canStretch(1),a.getStretchedVariant([s],!0)}return n}return n(e,t),e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1),t.empty();var r=this.node.attributes.getList("linethickness","bevelled"),n=r.linethickness,o=r.bevelled,i=this.isDisplay(),s=null;if(o)this.getBevelledBBox(t,i);else{var a=this.length2em(String(n),.06);s=-2*this.pad,0===a?this.getAtopBBox(t,i):(this.getFractionBBox(t,i,a),s-=.2),s+=t.w}t.clean(),this.setChildPWidths(e,s)},e.prototype.getFractionBBox=function(t,e,r){var n=this.childNodes[0].getOuterBBox(),o=this.childNodes[1].getOuterBBox(),i=this.font.params.axis_height,s=this.getTUV(e,r),a=s.T,l=s.u,c=s.v;t.combine(n,0,i+a+Math.max(n.d*n.rscale,l)),t.combine(o,0,i-a-Math.max(o.h*o.rscale,c)),t.w+=2*this.pad+.2},e.prototype.getTUV=function(t,e){var r=this.font.params,n=r.axis_height,o=(t?3.5:1.5)*e;return{T:(t?3.5:1.5)*e,u:(t?r.num1:r.num2)-n-o,v:(t?r.denom1:r.denom2)+n-o}},e.prototype.getAtopBBox=function(t,e){var r=this.getUVQ(e),n=r.u,o=r.v,i=r.nbox,s=r.dbox;t.combine(i,0,n),t.combine(s,0,-o),t.w+=2*this.pad},e.prototype.getUVQ=function(t){var e=this.childNodes[0].getOuterBBox(),r=this.childNodes[1].getOuterBBox(),n=this.font.params,i=o(t?[n.num1,n.denom1]:[n.num3,n.denom2],2),s=i[0],a=i[1],l=(t?7:3)*n.rule_thickness,c=s-e.d*e.scale-(r.h*r.scale-a);return c<l&&(s+=(l-c)/2,a+=(l-c)/2,c=l),{u:s,v:a,q:c,nbox:e,dbox:r}},e.prototype.getBevelledBBox=function(t,e){var r=this.getBevelData(e),n=r.u,o=r.v,i=r.delta,s=r.nbox,a=r.dbox,l=this.bevel.getOuterBBox();t.combine(s,0,n),t.combine(l,t.w-i/2,0),t.combine(a,t.w-i/2,o)},e.prototype.getBevelData=function(t){var e=this.childNodes[0].getOuterBBox(),r=this.childNodes[1].getOuterBBox(),n=t?.4:.15,o=Math.max(e.scale*(e.h+e.d),r.scale*(r.h+r.d))+2*n,i=this.font.params.axis_height;return{H:o,delta:n,u:e.scale*(e.d-e.h)/2+i+n,v:r.scale*(r.d-r.h)/2+i-n,nbox:e,dbox:r}},e.prototype.canStretch=function(t){return!1},e.prototype.isDisplay=function(){var t=this.node.attributes.getList("displaystyle","scriptlevel"),e=t.displaystyle,r=t.scriptlevel;return e&&0===r},e.prototype.getWrapWidth=function(t){var e=this.node.attributes;return e.get("bevelled")?this.childNodes[t].getOuterBBox().w:this.getBBox().w-(this.length2em(e.get("linethickness"))?.2:0)-2*this.pad},e.prototype.getChildAlign=function(t){var e=this.node.attributes;return e.get("bevelled")?"left":e.get(["numalign","denomalign"][t])},e}(t)}},5636:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMglyphMixin=void 0,e.CommonMglyphMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,i([],o(e),!1))||this;return n.getParameters(),n}return n(e,t),e.prototype.getParameters=function(){var t=this.node.attributes.getList("width","height","valign","src","index"),e=t.width,r=t.height,n=t.valign,o=t.src,i=t.index;if(o)this.width="auto"===e?1:this.length2em(e),this.height="auto"===r?1:this.length2em(r),this.valign=this.length2em(n||"0");else{var s=String.fromCodePoint(parseInt(i)),a=this.node.factory;this.charWrapper=this.wrap(a.create("text").setText(s)),this.charWrapper.parent=this}},e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1),this.charWrapper?t.updateFrom(this.charWrapper.getBBox()):(t.w=this.width,t.h=this.height+this.valign,t.d=-this.valign)},e}(t)}},5723:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMiMixin=void 0,e.CommonMiMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.computeBBox=function(e,r){void 0===r&&(r=!1),t.prototype.computeBBox.call(this,e),this.copySkewIC(e)},e}(t)}},8009:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMmultiscriptsMixin=e.ScriptNames=e.NextScript=void 0;var l=r(6469);e.NextScript={base:"subList",subList:"supList",supList:"subList",psubList:"psupList",psupList:"psubList"},e.ScriptNames=["sup","sup","psup","psub"],e.CommonMmultiscriptsMixin=function(t){return function(t){function r(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,s([],i(e),!1))||this;return n.scriptData=null,n.firstPrescript=0,n.getScriptData(),n}return o(r,t),r.prototype.combinePrePost=function(t,e){var r=new l.BBox(t);return r.combine(e,0,0),r},r.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r=this.font.params.scriptspace,n=this.scriptData,o=this.combinePrePost(n.sub,n.psub),s=this.combinePrePost(n.sup,n.psup),a=i(this.getUVQ(o,s),2),l=a[0],c=a[1];if(t.empty(),n.numPrescripts&&(t.combine(n.psup,r,l),t.combine(n.psub,r,c)),t.append(n.base),n.numScripts){var u=t.w;t.combine(n.sup,u,l),t.combine(n.sub,u,c),t.w+=r}t.clean(),this.setChildPWidths(e)},r.prototype.getScriptData=function(){var t=this.scriptData={base:null,sub:l.BBox.empty(),sup:l.BBox.empty(),psub:l.BBox.empty(),psup:l.BBox.empty(),numPrescripts:0,numScripts:0},e=this.getScriptBBoxLists();this.combineBBoxLists(t.sub,t.sup,e.subList,e.supList),this.combineBBoxLists(t.psub,t.psup,e.psubList,e.psupList),t.base=e.base[0],t.numPrescripts=e.psubList.length,t.numScripts=e.subList.length},r.prototype.getScriptBBoxLists=function(){var t,r,n={base:[],subList:[],supList:[],psubList:[],psupList:[]},o="base";try{for(var i=a(this.childNodes),s=i.next();!s.done;s=i.next()){var l=s.value;l.node.isKind("mprescripts")?o="psubList":(n[o].push(l.getOuterBBox()),o=e.NextScript[o])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this.firstPrescript=n.subList.length+n.supList.length+2,this.padLists(n.subList,n.supList),this.padLists(n.psubList,n.psupList),n},r.prototype.padLists=function(t,e){t.length>e.length&&e.push(l.BBox.empty())},r.prototype.combineBBoxLists=function(t,e,r,n){for(var o=0;o<r.length;o++){var s=i(this.getScaledWHD(r[o]),3),a=s[0],l=s[1],c=s[2],u=i(this.getScaledWHD(n[o]),3),p=u[0],h=u[1],f=u[2],d=Math.max(a,p);t.w+=d,e.w+=d,l>t.h&&(t.h=l),c>t.d&&(t.d=c),h>e.h&&(e.h=h),f>e.d&&(e.d=f)}},r.prototype.getScaledWHD=function(t){var e=t.w,r=t.h,n=t.d,o=t.rscale;return[e*o,r*o,n*o]},r.prototype.getUVQ=function(e,r){var n;if(!this.UVQ){var o=i([0,0,0],3),s=o[0],a=o[1],l=o[2];0===e.h&&0===e.d?s=this.getU():0===r.h&&0===r.d?s=-this.getV():(s=(n=i(t.prototype.getUVQ.call(this,e,r),3))[0],a=n[1],l=n[2]),this.UVQ=[s,a,l]}return this.UVQ},r}(t)}},5023:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMnMixin=void 0,e.CommonMnMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.remapChars=function(t){if(t.length){var e=this.font.getRemappedChar("mn",t[0]);if(e){var r=this.unicodeChars(e,this.variant);1===r.length?t[0]=r[0]:t=r.concat(t.slice(1))}}return t},e}(t)}},7096:function(t,e,r){var n,o,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__assign||function(){return s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s.apply(this,arguments)},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},l=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMoMixin=e.DirectionVH=void 0;var u=r(6469),p=r(505),h=r(5884);e.DirectionVH=((o={})[1]="v",o[2]="h",o),e.CommonMoMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,l([],a(e),!1))||this;return n.size=null,n.isAccent=n.node.isAccent,n}return i(e,t),e.prototype.computeBBox=function(t,e){if(void 0===e&&(e=!1),this.protoBBox(t),this.node.attributes.get("symmetric")&&2!==this.stretch.dir){var r=this.getCenterOffset(t);t.h+=r,t.d-=r}this.node.getProperty("mathaccent")&&(0===this.stretch.dir||this.size>=0)&&(t.w=0)},e.prototype.protoBBox=function(e){var r=0!==this.stretch.dir;r&&null===this.size&&this.getStretchedVariant([0]),r&&this.size<0||(t.prototype.computeBBox.call(this,e),this.copySkewIC(e))},e.prototype.getAccentOffset=function(){var t=u.BBox.empty();return this.protoBBox(t),-t.w/2},e.prototype.getCenterOffset=function(e){return void 0===e&&(e=null),e||(e=u.BBox.empty(),t.prototype.computeBBox.call(this,e)),(e.h+e.d)/2+this.font.params.axis_height-e.h},e.prototype.getVariant=function(){this.node.attributes.get("largeop")?this.variant=this.node.attributes.get("displaystyle")?"-largeop":"-smallop":this.node.attributes.getExplicit("mathvariant")||!1!==this.node.getProperty("pseudoscript")?t.prototype.getVariant.call(this):this.variant="-tex-variant"},e.prototype.canStretch=function(t){if(0!==this.stretch.dir)return this.stretch.dir===t;if(!this.node.attributes.get("stretchy"))return!1;var e=this.getText();if(1!==Array.from(e).length)return!1;var r=this.font.getDelimiter(e.codePointAt(0));return this.stretch=r&&r.dir===t?r:h.NOSTRETCH,0!==this.stretch.dir},e.prototype.getStretchedVariant=function(t,e){var r,n;if(void 0===e&&(e=!1),0!==this.stretch.dir){var o=this.getWH(t),i=this.getSize("minsize",0),a=this.getSize("maxsize",1/0),l=this.node.getProperty("mathaccent");o=Math.max(i,Math.min(a,o));var u=this.font.params.delimiterfactor/1e3,p=this.font.params.delimitershortfall,h=i||e?o:l?Math.min(o/u,o+p):Math.max(o*u,o-p),f=this.stretch,d=f.c||this.getText().codePointAt(0),m=0;if(f.sizes)try{for(var y=c(f.sizes),g=y.next();!g.done;g=y.next()){if(g.value>=h)return l&&m&&m--,this.variant=this.font.getSizeVariant(d,m),this.size=m,void(f.schar&&f.schar[m]&&(this.stretch=s(s({},this.stretch),{c:f.schar[m]})));m++}}catch(t){r={error:t}}finally{try{g&&!g.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}f.stretch?(this.size=-1,this.invalidateBBox(),this.getStretchBBox(t,this.checkExtendedHeight(o,f),f)):(this.variant=this.font.getSizeVariant(d,m-1),this.size=m-1)}},e.prototype.getSize=function(t,e){var r=this.node.attributes;return r.isSet(t)&&(e=this.length2em(r.get(t),1,1)),e},e.prototype.getWH=function(t){if(0===t.length)return 0;if(1===t.length)return t[0];var e=a(t,2),r=e[0],n=e[1],o=this.font.params.axis_height;return this.node.attributes.get("symmetric")?2*Math.max(r-o,n+o):r+n},e.prototype.getStretchBBox=function(t,e,r){var n;r.hasOwnProperty("min")&&r.min>e&&(e=r.min);var o=a(r.HDW,3),i=o[0],s=o[1],l=o[2];1===this.stretch.dir?(i=(n=a(this.getBaseline(t,e,r),2))[0],s=n[1]):l=e,this.bbox.h=i,this.bbox.d=s,this.bbox.w=l},e.prototype.getBaseline=function(t,e,r){var n=2===t.length&&t[0]+t[1]===e,o=this.node.attributes.get("symmetric"),i=a(n?t:[e,0],2),s=i[0],l=i[1],c=a([s+l,0],2),u=c[0],p=c[1];if(o){var h=this.font.params.axis_height;n&&(u=2*Math.max(s-h,l+h)),p=u/2-h}else if(n)p=l;else{var f=a(r.HDW||[.75,.25],2),d=f[0],m=f[1];p=m*(u/(d+m))}return[u-p,p]},e.prototype.checkExtendedHeight=function(t,e){if(e.fullExt){var r=a(e.fullExt,2),n=r[0],o=r[1];t=o+Math.ceil(Math.max(0,t-o)/n)*n}return t},e.prototype.remapChars=function(t){var e=this.node.getProperty("primes");if(e)return(0,p.unicodeChars)(e);if(1===t.length){var r=this.node.coreParent().parent,n=this.isAccent&&!r.isKind("mrow")?"accent":"mo",o=this.font.getRemappedChar(n,t[0]);o&&(t=this.unicodeChars(o,this.variant))}return t},e}(t)}},6898:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMpaddedMixin=void 0,e.CommonMpaddedMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getDimens=function(){var t=this.node.attributes.getList("width","height","depth","lspace","voffset"),e=this.childNodes[0].getBBox(),r=e.w,n=e.h,o=e.d,i=r,s=n,a=o,l=0,c=0,u=0;""!==t.width&&(r=this.dimen(t.width,e,"w",0)),""!==t.height&&(n=this.dimen(t.height,e,"h",0)),""!==t.depth&&(o=this.dimen(t.depth,e,"d",0)),""!==t.voffset&&(c=this.dimen(t.voffset,e)),""!==t.lspace&&(l=this.dimen(t.lspace,e));var p=this.node.attributes.get("data-align");return p&&(u=this.getAlignX(r,e,p)),[s,a,i,n-s,o-a,r-i,l,c,u]},e.prototype.dimen=function(t,e,r,n){void 0===r&&(r=""),void 0===n&&(n=null);var o=(t=String(t)).match(/width|height|depth/),i=o?e[o[0].charAt(0)]:r?e[r]:0,s=this.length2em(t,i)||0;return t.match(/^[-+]/)&&r&&(s+=i),null!=n&&(s=Math.max(n,s)),s},e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r=o(this.getDimens(),6),n=r[0],i=r[1],s=r[2],a=r[3],l=r[4],c=r[5];t.w=s+c,t.h=n+a,t.d=i+l,this.setChildPWidths(e,t.w)},e.prototype.getWrapWidth=function(t){return this.getBBox().w},e.prototype.getChildAlign=function(t){return this.node.attributes.get("data-align")||"left"},e}(t)}},6991:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMrootMixin=void 0,e.CommonMrootMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"surd",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.combineRootBBox=function(t,e,r){var n=this.childNodes[this.root].getOuterBBox(),o=this.getRootDimens(e,r)[1];t.combine(n,0,o)},e.prototype.getRootDimens=function(t,e){var r=this.childNodes[this.surd],n=this.childNodes[this.root].getOuterBBox(),o=(r.size<0?.5:.6)*t.w,i=n.w,s=n.rscale,a=Math.max(i,o/s),l=Math.max(0,a-i);return[a*s-o,this.rootHeight(n,t,r.size,e),l]},e.prototype.rootHeight=function(t,e,r,n){var o=e.h+e.d;return(r<0?1.9:.55*o)-(o-n)+Math.max(0,t.d*t.rscale)},e}(t)}},8411:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonInferredMrowMixin=e.CommonMrowMixin=void 0;var l=r(6469);e.CommonMrowMixin=function(t){return function(t){function e(){for(var e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var c=t.apply(this,s([],i(n),!1))||this;c.stretchChildren();try{for(var u=a(c.childNodes),p=u.next();!p.done;p=u.next()){var h=p.value;if(h.bbox.pwidth){c.bbox.pwidth=l.BBox.fullWidth;break}}}catch(t){e={error:t}}finally{try{p&&!p.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return c}return o(e,t),Object.defineProperty(e.prototype,"fixesPWidth",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.stretchChildren=function(){var t,e,r,n,o,i,s=[];try{for(var l=a(this.childNodes),c=l.next();!c.done;c=l.next()){(x=c.value).canStretch(1)&&s.push(x)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}var u=s.length,p=this.childNodes.length;if(u&&p>1){var h=0,f=0,d=u>1&&u===p;try{for(var m=a(this.childNodes),y=m.next();!y.done;y=m.next()){var g=0===(x=y.value).stretch.dir;if(d||g){var b=x.getOuterBBox(g),v=b.h,_=b.d,S=b.rscale;(v*=S)>h&&(h=v),(_*=S)>f&&(f=_)}}}catch(t){r={error:t}}finally{try{y&&!y.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}try{for(var M=a(s),O=M.next();!O.done;O=M.next()){var x;(x=O.value).coreMO().getStretchedVariant([h,f])}}catch(t){o={error:t}}finally{try{O&&!O.done&&(i=M.return)&&i.call(M)}finally{if(o)throw o.error}}}},e}(t)},e.CommonInferredMrowMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getScale=function(){this.bbox.scale=this.parent.bbox.scale,this.bbox.rscale=1},e}(t)}},4126:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMsMixin=void 0,e.CommonMsMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,i([],o(e),!1))||this,s=n.node.attributes,a=s.getList("lquote","rquote");return"monospace"!==n.variant&&(s.isSet("lquote")||'"'!==a.lquote||(a.lquote="\u201c"),s.isSet("rquote")||'"'!==a.rquote||(a.rquote="\u201d")),n.childNodes.unshift(n.createText(a.lquote)),n.childNodes.push(n.createText(a.rquote)),n}return n(e,t),e.prototype.createText=function(t){var e=this.wrap(this.mmlText(t));return e.parent=this,e},e}(t)}},258:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMspaceMixin=void 0,e.CommonMspaceMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r=this.node.attributes;t.w=this.length2em(r.get("width"),0),t.h=this.length2em(r.get("height"),0),t.d=this.length2em(r.get("depth"),0)},e.prototype.handleVariant=function(){},e}(t)}},4093:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMsqrtMixin=void 0;var a=r(6469);e.CommonMsqrtMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,s([],i(e),!1))||this,o=n.createMo("\u221a");o.canStretch(1);var a=n.childNodes[n.base].getOuterBBox(),l=a.h,c=a.d,u=n.font.params.rule_thickness,p=n.node.attributes.get("displaystyle")?n.font.params.x_height:u;return n.surdH=l+c+2*u+p/4,o.getStretchedVariant([n.surdH-c,c],!0),n}return o(e,t),Object.defineProperty(e.prototype,"base",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"surd",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.createMo=function(e){var r=t.prototype.createMo.call(this,e);return this.childNodes.push(r),r},e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r=this.childNodes[this.surd].getBBox(),n=new a.BBox(this.childNodes[this.base].getOuterBBox()),o=this.getPQ(r)[1],s=this.font.params.rule_thickness,l=n.h+o+s,c=i(this.getRootDimens(r,l),1)[0];t.h=l+s,this.combineRootBBox(t,r,l),t.combine(r,c,l-r.h),t.combine(n,c+r.w,0),t.clean(),this.setChildPWidths(e)},e.prototype.combineRootBBox=function(t,e,r){},e.prototype.getPQ=function(t){var e=this.font.params.rule_thickness,r=this.node.attributes.get("displaystyle")?this.font.params.x_height:e;return[r,t.h+t.d>this.surdH?(t.h+t.d-(this.surdH-2*e-r/2))/2:e+r/4]},e.prototype.getRootDimens=function(t,e){return[0,0,0,0]},e}(t)}},905:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMsubsupMixin=e.CommonMsupMixin=e.CommonMsubMixin=void 0,e.CommonMsubMixin=function(t){var e;return e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"scriptChild",{get:function(){return this.childNodes[this.node.sub]},enumerable:!1,configurable:!0}),e.prototype.getOffset=function(){return[0,-this.getV()]},e}(t),e.useIC=!1,e},e.CommonMsupMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"scriptChild",{get:function(){return this.childNodes[this.node.sup]},enumerable:!1,configurable:!0}),e.prototype.getOffset=function(){return[this.getAdjustedIc()-(this.baseRemoveIc?0:this.baseIc),this.getU()]},e}(t)},e.CommonMsubsupMixin=function(t){var e;return e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UVQ=null,e}return n(e,t),Object.defineProperty(e.prototype,"subChild",{get:function(){return this.childNodes[this.node.sub]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supChild",{get:function(){return this.childNodes[this.node.sup]},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r=this.baseChild.getOuterBBox(),n=o([this.subChild.getOuterBBox(),this.supChild.getOuterBBox()],2),i=n[0],s=n[1];t.empty(),t.append(r);var a=this.getBaseWidth(),l=this.getAdjustedIc(),c=o(this.getUVQ(),2),u=c[0],p=c[1];t.combine(i,a,p),t.combine(s,a+l,u),t.w+=this.font.params.scriptspace,t.clean(),this.setChildPWidths(e)},e.prototype.getUVQ=function(t,e){void 0===t&&(t=this.subChild.getOuterBBox()),void 0===e&&(e=this.supChild.getOuterBBox());var r=this.baseCore.getOuterBBox();if(this.UVQ)return this.UVQ;var n=this.font.params,i=3*n.rule_thickness,s=this.length2em(this.node.attributes.get("subscriptshift"),n.sub2),a=this.baseCharZero(r.d*this.baseScale+n.sub_drop*t.rscale),l=o([this.getU(),Math.max(a,s)],2),c=l[0],u=l[1],p=c-e.d*e.rscale-(t.h*t.rscale-u);if(p<i){u+=i-p;var h=.8*n.x_height-(c-e.d*e.rscale);h>0&&(c+=h,u-=h)}return c=Math.max(this.length2em(this.node.attributes.get("superscriptshift"),c),c),u=Math.max(this.length2em(this.node.attributes.get("subscriptshift"),u),u),p=c-e.d*e.rscale-(t.h*t.rscale-u),this.UVQ=[c,-u,p],this.UVQ},e}(t),e.useIC=!1,e}},6237:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMtableMixin=void 0;var l=r(6469),c=r(505),u=r(7875);e.CommonMtableMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,s([],i(e),!1))||this;n.numCols=0,n.numRows=0,n.data=null,n.pwidthCells=[],n.pWidth=0,n.numCols=(0,u.max)(n.tableRows.map((function(t){return t.numCells}))),n.numRows=n.childNodes.length,n.hasLabels=n.childNodes.reduce((function(t,e){return t||e.node.isKind("mlabeledtr")}),!1),n.findContainer(),n.isTop=!n.container||n.container.node.isKind("math")&&!n.container.parent,n.isTop&&(n.jax.table=n),n.getPercentageWidth();var o=n.node.attributes;return n.frame="none"!==o.get("frame"),n.fLine=n.frame&&o.get("frame")?.07:0,n.fSpace=n.frame?n.convertLengths(n.getAttributeArray("framespacing")):[0,0],n.cSpace=n.convertLengths(n.getColumnAttributes("columnspacing")),n.rSpace=n.convertLengths(n.getRowAttributes("rowspacing")),n.cLines=n.getColumnAttributes("columnlines").map((function(t){return"none"===t?0:.07})),n.rLines=n.getRowAttributes("rowlines").map((function(t){return"none"===t?0:.07})),n.cWidths=n.getColumnWidths(),n.stretchRows(),n.stretchColumns(),n}return o(e,t),Object.defineProperty(e.prototype,"tableRows",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),e.prototype.findContainer=function(){for(var t=this,e=t.parent;e&&(e.node.notParent||e.node.isKind("mrow"));)t=e,e=e.parent;this.container=e,this.containerI=t.node.childPosition()},e.prototype.getPercentageWidth=function(){if(this.hasLabels)this.bbox.pwidth=l.BBox.fullWidth;else{var t=this.node.attributes.get("width");(0,c.isPercent)(t)&&(this.bbox.pwidth=t)}},e.prototype.stretchRows=function(){for(var t=this.node.attributes.get("equalrows"),e=t?this.getEqualRowHeight():0,r=t?this.getTableData():{H:[0],D:[0]},n=r.H,o=r.D,i=this.tableRows,s=0;s<this.numRows;s++){var a=t?[(e+n[s]-o[s])/2,(e-n[s]+o[s])/2]:null;i[s].stretchChildren(a)}},e.prototype.stretchColumns=function(){for(var t=0;t<this.numCols;t++){var e="number"==typeof this.cWidths[t]?this.cWidths[t]:null;this.stretchColumn(t,e)}},e.prototype.stretchColumn=function(t,e){var r,n,o,i,s,l,c=[];try{for(var u=a(this.tableRows),p=u.next();!p.done;p=u.next()){if(g=p.value.getChild(t))0===(M=g.childNodes[0]).stretch.dir&&M.canStretch(2)&&c.push(M)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}var h=c.length,f=this.childNodes.length;if(h&&f>1){if(null===e){e=0;var d=h>1&&h===f;try{for(var m=a(this.tableRows),y=m.next();!y.done;y=m.next()){var g;if(g=y.value.getChild(t)){var b=0===(M=g.childNodes[0]).stretch.dir;if(d||b){var v=M.getBBox(b).w;v>e&&(e=v)}}}}catch(t){o={error:t}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}}try{for(var _=a(c),S=_.next();!S.done;S=_.next()){var M;(M=S.value).coreMO().getStretchedVariant([e])}}catch(t){s={error:t}}finally{try{S&&!S.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}},e.prototype.getTableData=function(){if(this.data)return this.data;for(var t=new Array(this.numRows).fill(0),e=new Array(this.numRows).fill(0),r=new Array(this.numCols).fill(0),n=new Array(this.numRows),o=new Array(this.numRows),i=[0],s=this.tableRows,a=0;a<s.length;a++){for(var l=0,c=s[a],u=c.node.attributes.get("rowalign"),p=0;p<c.numCells;p++){var h=c.getChild(p);l=this.updateHDW(h,p,a,u,t,e,r,l),this.recordPWidthCell(h,p)}n[a]=t[a],o[a]=e[a],c.labeled&&(l=this.updateHDW(c.childNodes[0],0,a,u,t,e,i,l)),this.extendHD(a,t,e,l),this.extendHD(a,n,o,l)}var f=i[0];return this.data={H:t,D:e,W:r,NH:n,ND:o,L:f},this.data},e.prototype.updateHDW=function(t,e,r,n,o,i,s,a){var l=t.getBBox(),c=l.h,u=l.d,p=l.w,h=t.parent.bbox.rscale;1!==t.parent.bbox.rscale&&(c*=h,u*=h,p*=h),this.node.getProperty("useHeight")&&(c<.75&&(c=.75),u<.25&&(u=.25));var f=0;return"baseline"!==(n=t.node.attributes.get("rowalign")||n)&&"axis"!==n&&(f=c+u,c=u=0),c>o[r]&&(o[r]=c),u>i[r]&&(i[r]=u),f>a&&(a=f),s&&p>s[e]&&(s[e]=p),a},e.prototype.extendHD=function(t,e,r,n){var o=(n-(e[t]+r[t]))/2;o<1e-5||(e[t]+=o,r[t]+=o)},e.prototype.recordPWidthCell=function(t,e){t.childNodes[0]&&t.childNodes[0].getBBox().pwidth&&this.pwidthCells.push([t,e])},e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r,n,o=this.getTableData(),s=o.H,a=o.D;if(this.node.attributes.get("equalrows")){var l=this.getEqualRowHeight();r=(0,u.sum)([].concat(this.rLines,this.rSpace))+l*this.numRows}else r=(0,u.sum)(s.concat(a,this.rLines,this.rSpace));r+=2*(this.fLine+this.fSpace[1]);var p=this.getComputedWidths();n=(0,u.sum)(p.concat(this.cLines,this.cSpace))+2*(this.fLine+this.fSpace[0]);var h=this.node.attributes.get("width");"auto"!==h&&(n=Math.max(this.length2em(h,0)+2*this.fLine,n));var f=i(this.getBBoxHD(r),2),d=f[0],m=f[1];t.h=d,t.d=m,t.w=n;var y=i(this.getBBoxLR(),2),g=y[0],b=y[1];t.L=g,t.R=b,(0,c.isPercent)(h)||this.setColumnPWidths()},e.prototype.setChildPWidths=function(t,e,r){var n=this.node.attributes.get("width");if(!(0,c.isPercent)(n))return!1;this.hasLabels||(this.bbox.pwidth="",this.container.bbox.pwidth="");var o=this.bbox,i=o.w,s=o.L,a=o.R,l=this.node.attributes.get("data-width-includes-label"),p=Math.max(i,this.length2em(n,Math.max(e,s+i+a)))-(l?s+a:0),h=this.node.attributes.get("equalcolumns")?Array(this.numCols).fill(this.percent(1/Math.max(1,this.numCols))):this.getColumnAttributes("columnwidth",0);this.cWidths=this.getColumnWidthsFixed(h,p);var f=this.getComputedWidths();return this.pWidth=(0,u.sum)(f.concat(this.cLines,this.cSpace))+2*(this.fLine+this.fSpace[0]),this.isTop&&(this.bbox.w=this.pWidth),this.setColumnPWidths(),this.pWidth!==i&&this.parent.invalidateBBox(),this.pWidth!==i},e.prototype.setColumnPWidths=function(){var t,e,r=this.cWidths;try{for(var n=a(this.pwidthCells),o=n.next();!o.done;o=n.next()){var s=i(o.value,2),l=s[0],c=s[1];l.setChildPWidths(!1,r[c])&&(l.invalidateBBox(),l.getBBox())}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.getBBoxHD=function(t){var e=i(this.getAlignmentRow(),2),r=e[0],n=e[1];if(null===n){var o=this.font.params.axis_height,s=t/2;return{top:[0,t],center:[s,s],bottom:[t,0],baseline:[s,s],axis:[s+o,s-o]}[r]||[s,s]}var a=this.getVerticalPosition(n,r);return[a,t-a]},e.prototype.getBBoxLR=function(){if(this.hasLabels){var t=this.node.attributes,e=t.get("side"),r=i(this.getPadAlignShift(e),2),n=r[0],o=r[1],s=this.hasLabels&&!!t.get("data-width-includes-label");return s&&this.frame&&this.fSpace[0]&&(n-=this.fSpace[0]),"center"!==o||s?"left"===e?[n,0]:[0,n]:[n,n]}return[0,0]},e.prototype.getPadAlignShift=function(t){var e=this.getTableData().L+this.length2em(this.node.attributes.get("minlabelspacing")),r=i(null==this.styles?["",""]:[this.styles.get("padding-left"),this.styles.get("padding-right")],2),n=r[0],o=r[1];(n||o)&&(e=Math.max(e,this.length2em(n||"0"),this.length2em(o||"0")));var s=i(this.getAlignShift(),2),a=s[0],l=s[1];return a===t&&(l="left"===t?Math.max(e,l)-e:Math.min(-e,l)+e),[e,a,l]},e.prototype.getAlignShift=function(){return this.isTop?t.prototype.getAlignShift.call(this):[this.container.getChildAlign(this.containerI),0]},e.prototype.getWidth=function(){return this.pWidth||this.getBBox().w},e.prototype.getEqualRowHeight=function(){var t=this.getTableData(),e=t.H,r=t.D,n=Array.from(e.keys()).map((function(t){return e[t]+r[t]}));return Math.max.apply(Math,n)},e.prototype.getComputedWidths=function(){var t=this,e=this.getTableData().W,r=Array.from(e.keys()).map((function(r){return"number"==typeof t.cWidths[r]?t.cWidths[r]:e[r]}));return this.node.attributes.get("equalcolumns")&&(r=Array(r.length).fill((0,u.max)(r))),r},e.prototype.getColumnWidths=function(){var t=this.node.attributes.get("width");if(this.node.attributes.get("equalcolumns"))return this.getEqualColumns(t);var e=this.getColumnAttributes("columnwidth",0);return"auto"===t?this.getColumnWidthsAuto(e):(0,c.isPercent)(t)?this.getColumnWidthsPercent(e):this.getColumnWidthsFixed(e,this.length2em(t))},e.prototype.getEqualColumns=function(t){var e,r=Math.max(1,this.numCols);if("auto"===t){var n=this.getTableData().W;e=(0,u.max)(n)}else if((0,c.isPercent)(t))e=this.percent(1/r);else{var o=(0,u.sum)([].concat(this.cLines,this.cSpace))+2*this.fSpace[0];e=Math.max(0,this.length2em(t)-o)/r}return Array(this.numCols).fill(e)},e.prototype.getColumnWidthsAuto=function(t){var e=this;return t.map((function(t){return"auto"===t||"fit"===t?null:(0,c.isPercent)(t)?t:e.length2em(t)}))},e.prototype.getColumnWidthsPercent=function(t){var e=this,r=t.indexOf("fit")>=0,n=(r?this.getTableData():{W:null}).W;return Array.from(t.keys()).map((function(o){var i=t[o];return"fit"===i?null:"auto"===i?r?n[o]:null:(0,c.isPercent)(i)?i:e.length2em(i)}))},e.prototype.getColumnWidthsFixed=function(t,e){var r=this,n=Array.from(t.keys()),o=n.filter((function(e){return"fit"===t[e]})),i=n.filter((function(e){return"auto"===t[e]})),s=o.length||i.length,a=(s?this.getTableData():{W:null}).W,l=e-(0,u.sum)([].concat(this.cLines,this.cSpace))-2*this.fSpace[0],c=l;n.forEach((function(e){var n=t[e];c-="fit"===n||"auto"===n?a[e]:r.length2em(n,l)}));var p=s&&c>0?c/s:0;return n.map((function(e){var n=t[e];return"fit"===n?a[e]+p:"auto"===n?a[e]+(0===o.length?p:0):r.length2em(n,l)}))},e.prototype.getVerticalPosition=function(t,e){for(var r=this.node.attributes.get("equalrows"),n=this.getTableData(),o=n.H,s=n.D,a=r?this.getEqualRowHeight():0,l=this.getRowHalfSpacing(),c=this.fLine,u=0;u<t;u++)c+=l[u]+(r?a:o[u]+s[u])+l[u+1]+this.rLines[u];var p=i(r?[(a+o[t]-s[t])/2,(a-o[t]+s[t])/2]:[o[t],s[t]],2),h=p[0],f=p[1];return c+={top:0,center:l[t]+(h+f)/2,bottom:l[t]+h+f+l[t+1],baseline:l[t]+h,axis:l[t]+h-.25}[e]||0},e.prototype.getEmHalfSpacing=function(t,e,r){void 0===r&&(r=1);var n=this.em(t*r),o=this.addEm(e,2/r);return o.unshift(n),o.push(n),o},e.prototype.getRowHalfSpacing=function(){var t=this.rSpace.map((function(t){return t/2}));return t.unshift(this.fSpace[1]),t.push(this.fSpace[1]),t},e.prototype.getColumnHalfSpacing=function(){var t=this.cSpace.map((function(t){return t/2}));return t.unshift(this.fSpace[0]),t.push(this.fSpace[0]),t},e.prototype.getAlignmentRow=function(){var t=i((0,c.split)(this.node.attributes.get("align")),2),e=t[0],r=t[1];if(null==r)return[e,null];var n=parseInt(r);return n<0&&(n+=this.numRows+1),[e,n<1||n>this.numRows?null:n-1]},e.prototype.getColumnAttributes=function(t,e){void 0===e&&(e=1);var r=this.numCols-e,n=this.getAttributeArray(t);if(0===n.length)return null;for(;n.length<r;)n.push(n[n.length-1]);return n.length>r&&n.splice(r),n},e.prototype.getRowAttributes=function(t,e){void 0===e&&(e=1);var r=this.numRows-e,n=this.getAttributeArray(t);if(0===n.length)return null;for(;n.length<r;)n.push(n[n.length-1]);return n.length>r&&n.splice(r),n},e.prototype.getAttributeArray=function(t){var e=this.node.attributes.get(t);return e?(0,c.split)(e):[this.node.attributes.getDefault(t)]},e.prototype.addEm=function(t,e){var r=this;return void 0===e&&(e=1),t?t.map((function(t){return r.em(t/e)})):null},e.prototype.convertLengths=function(t){var e=this;return t?t.map((function(t){return e.length2em(t)})):null},e}(t)}},5164:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMtdMixin=void 0,e.CommonMtdMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"fixesPWidth",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.invalidateBBox=function(){this.bboxComputed=!1},e.prototype.getWrapWidth=function(t){var e=this.parent.parent,r=this.parent,n=this.node.childPosition()-(r.labeled?1:0);return"number"==typeof e.cWidths[n]?e.cWidths[n]:e.getTableData().W[n]},e.prototype.getChildAlign=function(t){return this.node.attributes.get("columnalign")},e}(t)}},6319:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMtextMixin=void 0,e.CommonMtextMixin=function(t){var e;return e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getVariant=function(){var e=this.jax.options,r=this.jax.math.outputData,n=(!!r.merrorFamily||!!e.merrorFont)&&this.node.Parent.isKind("merror");if(r.mtextFamily||e.mtextFont||n){var o=this.node.attributes.get("mathvariant"),i=this.constructor.INHERITFONTS[o]||this.jax.font.getCssFont(o),s=i[0]||(n?r.merrorFamily||e.merrorFont:r.mtextFamily||e.mtextFont);this.variant=this.explicitVariant(s,i[2]?"bold":"",i[1]?"italic":"")}else t.prototype.getVariant.call(this)},e}(t),e.INHERITFONTS={normal:["",!1,!1],bold:["",!1,!0],italic:["",!0,!1],"bold-italic":["",!0,!0]},e}},5766:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMlabeledtrMixin=e.CommonMtrMixin=void 0,e.CommonMtrMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"fixesPWidth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numCells",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labeled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tableCells",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),e.prototype.getChild=function(t){return this.childNodes[t]},e.prototype.getChildBBoxes=function(){return this.childNodes.map((function(t){return t.getBBox()}))},e.prototype.stretchChildren=function(t){var e,r,n,i,s,a;void 0===t&&(t=null);var l=[],c=this.labeled?this.childNodes.slice(1):this.childNodes;try{for(var u=o(c),p=u.next();!p.done;p=u.next()){(E=p.value.childNodes[0]).canStretch(1)&&l.push(E)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}var h=l.length,f=this.childNodes.length;if(h&&f>1){if(null===t){var d=0,m=0,y=h>1&&h===f;try{for(var g=o(c),b=g.next();!b.done;b=g.next()){var v=0===(E=b.value.childNodes[0]).stretch.dir;if(y||v){var _=E.getBBox(v),S=_.h,M=_.d;S>d&&(d=S),M>m&&(m=M)}}}catch(t){n={error:t}}finally{try{b&&!b.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}t=[d,m]}try{for(var O=o(l),x=O.next();!x.done;x=O.next()){var E;(E=x.value).coreMO().getStretchedVariant(t)}}catch(t){s={error:t}}finally{try{x&&!x.done&&(a=O.return)&&a.call(O)}finally{if(s)throw s.error}}}},e}(t)},e.CommonMlabeledtrMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"numCells",{get:function(){return Math.max(0,this.childNodes.length-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labeled",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tableCells",{get:function(){return this.childNodes.slice(1)},enumerable:!1,configurable:!0}),e.prototype.getChild=function(t){return this.childNodes[t+1]},e.prototype.getChildBBoxes=function(){return this.childNodes.slice(1).map((function(t){return t.getBBox()}))},e}(t)}},1971:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMunderoverMixin=e.CommonMoverMixin=e.CommonMunderMixin=void 0,e.CommonMunderMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,i([],o(e),!1))||this;return n.stretchChildren(),n}return n(e,t),Object.defineProperty(e.prototype,"scriptChild",{get:function(){return this.childNodes[this.node.under]},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(e,r){if(void 0===r&&(r=!1),this.hasMovableLimits())t.prototype.computeBBox.call(this,e,r);else{e.empty();var n=this.baseChild.getOuterBBox(),i=this.scriptChild.getOuterBBox(),s=this.getUnderKV(n,i)[1],a=this.isLineBelow?0:this.getDelta(!0),l=o(this.getDeltaW([n,i],[0,-a]),2),c=l[0],u=l[1];e.combine(n,c,0),e.combine(i,u,s),e.d+=this.font.params.big_op_spacing5,e.clean(),this.setChildPWidths(r)}},e}(t)},e.CommonMoverMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,i([],o(e),!1))||this;return n.stretchChildren(),n}return n(e,t),Object.defineProperty(e.prototype,"scriptChild",{get:function(){return this.childNodes[this.node.over]},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(e){if(this.hasMovableLimits())t.prototype.computeBBox.call(this,e);else{e.empty();var r=this.baseChild.getOuterBBox(),n=this.scriptChild.getOuterBBox();this.node.attributes.get("accent")&&(r.h=Math.max(r.h,this.font.params.x_height*r.scale));var i=this.getOverKU(r,n)[1],s=this.isLineAbove?0:this.getDelta(),a=o(this.getDeltaW([r,n],[0,s]),2),l=a[0],c=a[1];e.combine(r,l,0),e.combine(n,c,i),e.h+=this.font.params.big_op_spacing5,e.clean()}},e}(t)},e.CommonMunderoverMixin=function(t){return function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,i([],o(e),!1))||this;return n.stretchChildren(),n}return n(e,t),Object.defineProperty(e.prototype,"underChild",{get:function(){return this.childNodes[this.node.under]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overChild",{get:function(){return this.childNodes[this.node.over]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subChild",{get:function(){return this.underChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supChild",{get:function(){return this.overChild},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(e){if(this.hasMovableLimits())t.prototype.computeBBox.call(this,e);else{e.empty();var r=this.overChild.getOuterBBox(),n=this.baseChild.getOuterBBox(),i=this.underChild.getOuterBBox();this.node.attributes.get("accent")&&(n.h=Math.max(n.h,this.font.params.x_height*n.scale));var s=this.getOverKU(n,r)[1],a=this.getUnderKV(n,i)[1],l=this.getDelta(),c=o(this.getDeltaW([n,i,r],[0,this.isLineBelow?0:-l,this.isLineAbove?0:l]),3),u=c[0],p=c[1],h=c[2];e.combine(n,u,0),e.combine(r,h,s),e.combine(i,p,a);var f=this.font.params.big_op_spacing5;e.h+=f,e.d+=f,e.clean()}},e}(t)}},167:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonScriptbaseMixin=void 0;var l=r(9007);e.CommonScriptbaseMixin=function(t){var e;return e=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,s([],i(e),!1))||this;n.baseScale=1,n.baseIc=0,n.baseRemoveIc=!1,n.baseIsChar=!1,n.baseHasAccentOver=null,n.baseHasAccentUnder=null,n.isLineAbove=!1,n.isLineBelow=!1,n.isMathAccent=!1;var o=n.baseCore=n.getBaseCore();return o?(n.setBaseAccentsFor(o),n.baseScale=n.getBaseScale(),n.baseIc=n.getBaseIc(),n.baseIsChar=n.isCharBase(),n.isMathAccent=n.baseIsChar&&n.scriptChild&&!!n.scriptChild.coreMO().node.getProperty("mathaccent"),n.checkLineAccents(),n.baseRemoveIc=!n.isLineAbove&&!n.isLineBelow&&(!n.constructor.useIC||n.isMathAccent),n):n}return o(e,t),Object.defineProperty(e.prototype,"baseChild",{get:function(){return this.childNodes[this.node.base]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scriptChild",{get:function(){return this.childNodes[1]},enumerable:!1,configurable:!0}),e.prototype.getBaseCore=function(){for(var t=this.getSemanticBase()||this.childNodes[0];t&&(1===t.childNodes.length&&(t.node.isKind("mrow")||t.node.isKind("TeXAtom")&&t.node.texClass!==l.TEXCLASS.VCENTER||t.node.isKind("mstyle")||t.node.isKind("mpadded")||t.node.isKind("mphantom")||t.node.isKind("semantics"))||t.node.isKind("munderover")&&t.isMathAccent);)this.setBaseAccentsFor(t),t=t.childNodes[0];return t||(this.baseHasAccentOver=this.baseHasAccentUnder=!1),t||this.childNodes[0]},e.prototype.setBaseAccentsFor=function(t){t.node.isKind("munderover")&&(null===this.baseHasAccentOver&&(this.baseHasAccentOver=!!t.node.attributes.get("accent")),null===this.baseHasAccentUnder&&(this.baseHasAccentUnder=!!t.node.attributes.get("accentunder")))},e.prototype.getSemanticBase=function(){var t=this.node.attributes.getExplicit("data-semantic-fencepointer");return this.getBaseFence(this.baseChild,t)},e.prototype.getBaseFence=function(t,e){var r,n;if(!t||!t.node.attributes||!e)return null;if(t.node.attributes.getExplicit("data-semantic-id")===e)return t;try{for(var o=a(t.childNodes),i=o.next();!i.done;i=o.next()){var s=i.value,l=this.getBaseFence(s,e);if(l)return l}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return null},e.prototype.getBaseScale=function(){for(var t=this.baseCore,e=1;t&&t!==this;){e*=t.getOuterBBox().rscale,t=t.parent}return e},e.prototype.getBaseIc=function(){return this.baseCore.getOuterBBox().ic*this.baseScale},e.prototype.getAdjustedIc=function(){var t=this.baseCore.getOuterBBox();return(t.ic?1.05*t.ic+.05:0)*this.baseScale},e.prototype.isCharBase=function(){var t=this.baseCore;return(t.node.isKind("mo")&&null===t.size||t.node.isKind("mi")||t.node.isKind("mn"))&&1===t.bbox.rscale&&1===Array.from(t.getText()).length},e.prototype.checkLineAccents=function(){if(this.node.isKind("munderover"))if(this.node.isKind("mover"))this.isLineAbove=this.isLineAccent(this.scriptChild);else if(this.node.isKind("munder"))this.isLineBelow=this.isLineAccent(this.scriptChild);else{this.isLineAbove=this.isLineAccent(this.overChild),this.isLineBelow=this.isLineAccent(this.underChild)}},e.prototype.isLineAccent=function(t){var e=t.coreMO().node;return e.isToken&&"\u2015"===e.getText()},e.prototype.getBaseWidth=function(){var t=this.baseChild.getOuterBBox();return t.w*t.rscale-(this.baseRemoveIc?this.baseIc:0)+this.font.params.extra_ic},e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r=this.getBaseWidth(),n=i(this.getOffset(),2),o=n[0],s=n[1];t.append(this.baseChild.getOuterBBox()),t.combine(this.scriptChild.getOuterBBox(),r+o,s),t.w+=this.font.params.scriptspace,t.clean(),this.setChildPWidths(e)},e.prototype.getOffset=function(){return[0,0]},e.prototype.baseCharZero=function(t){var e=!!this.baseCore.node.attributes.get("largeop"),r=this.baseScale;return this.baseIsChar&&!e&&1===r?0:t},e.prototype.getV=function(){var t=this.baseCore.getOuterBBox(),e=this.scriptChild.getOuterBBox(),r=this.font.params,n=this.length2em(this.node.attributes.get("subscriptshift"),r.sub1);return Math.max(this.baseCharZero(t.d*this.baseScale+r.sub_drop*e.rscale),n,e.h*e.rscale-.8*r.x_height)},e.prototype.getU=function(){var t=this.baseCore.getOuterBBox(),e=this.scriptChild.getOuterBBox(),r=this.font.params,n=this.node.attributes.getList("displaystyle","superscriptshift"),o=this.node.getProperty("texprimestyle")?r.sup3:n.displaystyle?r.sup1:r.sup2,i=this.length2em(n.superscriptshift,o);return Math.max(this.baseCharZero(t.h*this.baseScale-r.sup_drop*e.rscale),i,e.d*e.rscale+1/4*r.x_height)},e.prototype.hasMovableLimits=function(){var t=this.node.attributes.get("displaystyle"),e=this.baseChild.coreMO().node;return!t&&!!e.attributes.get("movablelimits")},e.prototype.getOverKU=function(t,e){var r=this.node.attributes.get("accent"),n=this.font.params,o=e.d*e.rscale,i=n.rule_thickness*n.separation_factor,s=this.baseHasAccentOver?i:0,a=this.isLineAbove?3*n.rule_thickness:i,l=(r?a:Math.max(n.big_op_spacing1,n.big_op_spacing3-Math.max(0,o)))-s;return[l,t.h*t.rscale+l+o]},e.prototype.getUnderKV=function(t,e){var r=this.node.attributes.get("accentunder"),n=this.font.params,o=e.h*e.rscale,i=n.rule_thickness*n.separation_factor,s=this.baseHasAccentUnder?i:0,a=this.isLineBelow?3*n.rule_thickness:i,l=(r?a:Math.max(n.big_op_spacing2,n.big_op_spacing4-o))-s;return[l,-(t.d*t.rscale+l+o)]},e.prototype.getDeltaW=function(t,e){var r,n,o,l;void 0===e&&(e=[0,0,0]);var c=this.node.attributes.get("align"),u=t.map((function(t){return t.w*t.rscale}));u[0]-=this.baseRemoveIc&&!this.baseCore.node.attributes.get("largeop")?this.baseIc:0;var p=Math.max.apply(Math,s([],i(u),!1)),h=[],f=0;try{for(var d=a(u.keys()),m=d.next();!m.done;m=d.next()){var y=m.value;h[y]=("center"===c?(p-u[y])/2:"right"===c?p-u[y]:0)+e[y],h[y]<f&&(f=-h[y])}}catch(t){r={error:t}}finally{try{m&&!m.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}if(f)try{for(var g=a(h.keys()),b=g.next();!b.done;b=g.next()){y=b.value;h[y]+=f}}catch(t){o={error:t}}finally{try{b&&!b.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}return[1,2].map((function(e){return h[e]+=t[e]?t[e].dx*t[0].scale:0})),h},e.prototype.getDelta=function(t){void 0===t&&(t=!1);var e=this.node.attributes.get("accent"),r=this.baseCore.getOuterBBox(),n=r.sk,o=r.ic;return((e&&!t?n:0)+this.font.skewIcFactor*o)*this.baseScale},e.prototype.stretchChildren=function(){var t,e,r,n,o,i,s=[];try{for(var l=a(this.childNodes),c=l.next();!c.done;c=l.next()){(M=c.value).canStretch(2)&&s.push(M)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}var u=s.length,p=this.childNodes.length;if(u&&p>1){var h=0,f=u>1&&u===p;try{for(var d=a(this.childNodes),m=d.next();!m.done;m=d.next()){var y=0===(M=m.value).stretch.dir;if(f||y){var g=M.getOuterBBox(y),b=g.w,v=g.rscale;b*v>h&&(h=b*v)}}}catch(t){r={error:t}}finally{try{m&&!m.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}try{for(var _=a(s),S=_.next();!S.done;S=_.next()){var M;(M=S.value).coreMO().getStretchedVariant([h/M.bbox.rscale])}}catch(t){o={error:t}}finally{try{S&&!S.done&&(i=_.return)&&i.call(_)}finally{if(o)throw o.error}}}},e}(t),e.useIC=!0,e}},5806:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonSemanticsMixin=void 0,e.CommonSemanticsMixin=function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.computeBBox=function(t,e){if(void 0===e&&(e=!1),this.childNodes.length){var r=this.childNodes[0].getBBox(),n=r.w,o=r.h,i=r.d;t.w=n,t.h=o,t.d=i}},e}(t)}},5920:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o.apply(this,arguments)},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonTeXFontMixin=void 0,e.CommonTeXFontMixin=function(t){var e;return e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getDelimiterData=function(t){return this.getChar("-smallop",t)||this.getChar("-size4",t)},e}(t),e.NAME="TeX",e.defaultVariants=s(s([],i(t.defaultVariants),!1),[["-smallop","normal"],["-largeop","normal"],["-size3","normal"],["-size4","normal"],["-tex-calligraphic","italic"],["-tex-bold-calligraphic","bold-italic"],["-tex-oldstyle","normal"],["-tex-bold-oldstyle","bold"],["-tex-mathit","italic"],["-tex-variant","normal"]],!1),e.defaultCssFonts=o(o({},t.defaultCssFonts),{"-smallop":["serif",!1,!1],"-largeop":["serif",!1,!1],"-size3":["serif",!1,!1],"-size4":["serif",!1,!1],"-tex-calligraphic":["cursive",!0,!1],"-tex-bold-calligraphic":["cursive",!0,!0],"-tex-oldstyle":["serif",!1,!1],"-tex-bold-oldstyle":["serif",!1,!0],"-tex-mathit":["serif",!0,!1]}),e.defaultSizeVariants=["normal","-smallop","-largeop","-size3","-size4","-tex-variant"],e.defaultStretchVariants=["-size4"],e}},3980:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.boldItalic=void 0,e.boldItalic={47:[.711,.21,.894],305:[.452,.008,.394,{sk:.0319}],567:[.451,.201,.439,{sk:.0958}],8260:[.711,.21,.894],8710:[.711,0,.958,{sk:.192}],10744:[.711,.21,.894]}},1103:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.bold=void 0,e.bold={33:[.705,0,.35],34:[.694,-.329,.603],35:[.694,.193,.958],36:[.75,.056,.575],37:[.75,.056,.958],38:[.705,.011,.894],39:[.694,-.329,.319],40:[.75,.249,.447],41:[.75,.249,.447],42:[.75,-.306,.575],43:[.633,.131,.894],44:[.171,.194,.319],45:[.278,-.166,.383],46:[.171,0,.319],47:[.75,.25,.575],58:[.444,0,.319],59:[.444,.194,.319],60:[.587,.085,.894],61:[.393,-.109,.894],62:[.587,.085,.894],63:[.7,0,.543],64:[.699,.006,.894],91:[.75,.25,.319],92:[.75,.25,.575],93:[.75,.25,.319],94:[.694,-.52,.575],95:[-.01,.061,.575],96:[.706,-.503,.575],123:[.75,.25,.575],124:[.75,.249,.319],125:[.75,.25,.575],126:[.344,-.202,.575],168:[.695,-.535,.575],172:[.371,-.061,.767],175:[.607,-.54,.575],176:[.702,-.536,.575],177:[.728,.035,.894],180:[.706,-.503,.575],183:[.336,-.166,.319],215:[.53,.028,.894],247:[.597,.096,.894],305:[.442,0,.278,{sk:.0278}],567:[.442,.205,.306,{sk:.0833}],697:[.563,-.033,.344],710:[.694,-.52,.575],711:[.66,-.515,.575],713:[.607,-.54,.575],714:[.706,-.503,.575],715:[.706,-.503,.575],728:[.694,-.5,.575],729:[.695,-.525,.575],730:[.702,-.536,.575],732:[.694,-.552,.575],768:[.706,-.503,0],769:[.706,-.503,0],770:[.694,-.52,0],771:[.694,-.552,0],772:[.607,-.54,0],774:[.694,-.5,0],775:[.695,-.525,0],776:[.695,-.535,0],778:[.702,-.536,0],779:[.714,-.511,0],780:[.66,-.515,0],824:[.711,.21,0],8194:[0,0,.5],8195:[0,0,.999],8196:[0,0,.333],8197:[0,0,.25],8198:[0,0,.167],8201:[0,0,.167],8202:[0,0,.083],8211:[.3,-.249,.575],8212:[.3,-.249,1.15],8213:[.3,-.249,1.15],8214:[.75,.248,.575],8215:[-.01,.061,.575],8216:[.694,-.329,.319],8217:[.694,-.329,.319],8220:[.694,-.329,.603],8221:[.694,-.329,.603],8224:[.702,.211,.511],8225:[.702,.202,.511],8226:[.474,-.028,.575],8230:[.171,0,1.295],8242:[.563,-.033,.344],8243:[.563,0,.688],8244:[.563,0,1.032],8254:[.607,-.54,.575],8260:[.75,.25,.575],8279:[.563,0,1.376],8407:[.723,-.513,.575],8463:[.694,.008,.668,{sk:-.0319}],8467:[.702,.019,.474,{sk:.128}],8472:[.461,.21,.74],8501:[.694,0,.703],8592:[.518,.017,1.15],8593:[.694,.193,.575],8594:[.518,.017,1.15],8595:[.694,.194,.575],8596:[.518,.017,1.15],8597:[.767,.267,.575],8598:[.724,.194,1.15],8599:[.724,.193,1.15],8600:[.694,.224,1.15],8601:[.694,.224,1.15],8602:[.711,.21,1.15],8603:[.711,.21,1.15],8614:[.518,.017,1.15],8617:[.518,.017,1.282],8618:[.518,.017,1.282],8622:[.711,.21,1.15],8636:[.518,-.22,1.15],8637:[.281,.017,1.15],8640:[.518,-.22,1.15],8641:[.281,.017,1.15],8652:[.718,.017,1.15],8653:[.711,.21,1.15],8654:[.711,.21,1.15],8655:[.711,.21,1.15],8656:[.547,.046,1.15],8657:[.694,.193,.703],8658:[.547,.046,1.15],8659:[.694,.194,.703],8660:[.547,.046,1.15],8661:[.767,.267,.703],8704:[.694,.016,.639],8707:[.694,0,.639],8708:[.711,.21,.639],8709:[.767,.073,.575],8710:[.698,0,.958],8712:[.587,.086,.767],8713:[.711,.21,.767],8715:[.587,.086,.767],8716:[.711,.21,.767],8722:[.281,-.221,.894],8723:[.537,.227,.894],8725:[.75,.25,.575],8726:[.75,.25,.575],8727:[.472,-.028,.575],8728:[.474,-.028,.575],8729:[.474,-.028,.575],8730:[.82,.18,.958,{ic:.03}],8733:[.451,.008,.894],8734:[.452,.008,1.15],8736:[.714,0,.722],8739:[.75,.249,.319],8740:[.75,.249,.319],8741:[.75,.248,.575],8742:[.75,.248,.575],8743:[.604,.017,.767],8744:[.604,.016,.767],8745:[.603,.016,.767],8746:[.604,.016,.767],8747:[.711,.211,.569,{ic:.063}],8764:[.391,-.109,.894],8768:[.583,.082,.319],8769:[.711,.21,.894],8771:[.502,0,.894],8772:[.711,.21,.894],8773:[.638,.027,.894],8775:[.711,.21,.894],8776:[.524,-.032,.894],8777:[.711,.21,.894],8781:[.533,.032,.894],8784:[.721,-.109,.894],8800:[.711,.21,.894],8801:[.505,0,.894],8802:[.711,.21,.894],8804:[.697,.199,.894],8805:[.697,.199,.894],8810:[.617,.116,1.15],8811:[.618,.116,1.15],8813:[.711,.21,.894],8814:[.711,.21,.894],8815:[.711,.21,.894],8816:[.711,.21,.894],8817:[.711,.21,.894],8826:[.585,.086,.894],8827:[.586,.086,.894],8832:[.711,.21,.894],8833:[.711,.21,.894],8834:[.587,.085,.894],8835:[.587,.086,.894],8836:[.711,.21,.894],8837:[.711,.21,.894],8838:[.697,.199,.894],8839:[.697,.199,.894],8840:[.711,.21,.894],8841:[.711,.21,.894],8846:[.604,.016,.767],8849:[.697,.199,.894],8850:[.697,.199,.894],8851:[.604,0,.767],8852:[.604,0,.767],8853:[.632,.132,.894],8854:[.632,.132,.894],8855:[.632,.132,.894],8856:[.632,.132,.894],8857:[.632,.132,.894],8866:[.693,0,.703],8867:[.693,0,.703],8868:[.694,0,.894],8869:[.693,0,.894],8872:[.75,.249,.974],8876:[.711,.21,.703],8877:[.75,.249,.974],8900:[.523,.021,.575],8901:[.336,-.166,.319],8902:[.502,0,.575],8904:[.54,.039,1],8930:[.711,.21,.894],8931:[.711,.21,.894],8942:[.951,.029,.319],8943:[.336,-.166,1.295],8945:[.871,-.101,1.323],8968:[.75,.248,.511],8969:[.75,.248,.511],8970:[.749,.248,.511],8971:[.749,.248,.511],8994:[.405,-.108,1.15],8995:[.392,-.126,1.15],9001:[.75,.249,.447],9002:[.75,.249,.447],9651:[.711,0,1.022],9653:[.711,0,1.022],9657:[.54,.039,.575],9661:[.5,.21,1.022],9663:[.5,.21,1.022],9667:[.539,.038,.575],9711:[.711,.211,1.15],9824:[.719,.129,.894],9825:[.711,.024,.894],9826:[.719,.154,.894],9827:[.719,.129,.894],9837:[.75,.017,.447],9838:[.741,.223,.447],9839:[.724,.224,.447],10072:[.75,.249,.319],10216:[.75,.249,.447],10217:[.75,.249,.447],10229:[.518,.017,1.805],10230:[.518,.017,1.833],10231:[.518,.017,2.126],10232:[.547,.046,1.868],10233:[.547,.046,1.87],10234:[.547,.046,2.126],10236:[.518,.017,1.833],10744:[.711,.21,.894],10799:[.53,.028,.894],10815:[.686,0,.9],10927:[.696,.199,.894],10928:[.697,.199,.894],12296:[.75,.249,.447],12297:[.75,.249,.447]}},9124:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.delimiters=e.VSIZES=e.HDW3=e.HDW2=e.HDW1=void 0;var n=r(5884);e.HDW1=[.75,.25,.875],e.HDW2=[.85,.349,.667],e.HDW3=[.583,.082,.5],e.VSIZES=[1,1.2,1.8,2.4,3];var o={c:47,dir:n.V,sizes:e.VSIZES},i={c:175,dir:n.H,sizes:[.5],stretch:[0,175],HDW:[.59,-.544,.5]},s={c:710,dir:n.H,sizes:[.5,.556,1,1.444,1.889]},a={c:732,dir:n.H,sizes:[.5,.556,1,1.444,1.889]},l={c:8211,dir:n.H,sizes:[.5],stretch:[0,8211],HDW:[.285,-.248,.5]},c={c:8592,dir:n.H,sizes:[1],stretch:[8592,8722],HDW:e.HDW3},u={c:8594,dir:n.H,sizes:[1],stretch:[0,8722,8594],HDW:e.HDW3},p={c:8596,dir:n.H,sizes:[1],stretch:[8592,8722,8594],HDW:e.HDW3},h={c:8612,dir:n.H,stretch:[8592,8722,8739],HDW:e.HDW3,min:1.278},f={c:8614,dir:n.H,sizes:[1],stretch:[8739,8722,8594],HDW:e.HDW3},d={c:8656,dir:n.H,sizes:[1],stretch:[8656,61],HDW:e.HDW3},m={c:8658,dir:n.H,sizes:[1],stretch:[0,61,8658],HDW:e.HDW3},y={c:8660,dir:n.H,sizes:[1],stretch:[8656,61,8658],HDW:e.HDW3},g={c:8722,dir:n.H,sizes:[.778],stretch:[0,8722],HDW:e.HDW3},b={c:8739,dir:n.V,sizes:[1],stretch:[0,8739],HDW:[.627,.015,.333]},v={c:9180,dir:n.H,sizes:[.778,1],schar:[8994,8994],variants:[5,0],stretch:[57680,57684,57681],HDW:[.32,.2,.5]},_={c:9181,dir:n.H,sizes:[.778,1],schar:[8995,8995],variants:[5,0],stretch:[57682,57684,57683],HDW:[.32,.2,.5]},S={c:9182,dir:n.H,stretch:[57680,57684,57681,57685],HDW:[.32,.2,.5],min:1.8},M={c:9183,dir:n.H,stretch:[57682,57684,57683,57686],HDW:[.32,.2,.5],min:1.8},O={c:10216,dir:n.V,sizes:e.VSIZES},x={c:10217,dir:n.V,sizes:e.VSIZES},E={c:10502,dir:n.H,stretch:[8656,61,8739],HDW:e.HDW3,min:1.278},A={c:10503,dir:n.H,stretch:[8872,61,8658],HDW:e.HDW3,min:1.278};e.delimiters={40:{dir:n.V,sizes:e.VSIZES,stretch:[9115,9116,9117],HDW:[.85,.349,.875]},41:{dir:n.V,sizes:e.VSIZES,stretch:[9118,9119,9120],HDW:[.85,.349,.875]},45:g,47:o,61:{dir:n.H,sizes:[.778],stretch:[0,61],HDW:e.HDW3},91:{dir:n.V,sizes:e.VSIZES,stretch:[9121,9122,9123],HDW:e.HDW2},92:{dir:n.V,sizes:e.VSIZES},93:{dir:n.V,sizes:e.VSIZES,stretch:[9124,9125,9126],HDW:e.HDW2},94:s,95:l,123:{dir:n.V,sizes:e.VSIZES,stretch:[9127,9130,9129,9128],HDW:[.85,.349,.889]},124:{dir:n.V,sizes:[1],stretch:[0,8739],HDW:[.75,.25,.333]},125:{dir:n.V,sizes:e.VSIZES,stretch:[9131,9130,9133,9132],HDW:[.85,.349,.889]},126:a,175:i,710:s,713:i,732:a,770:s,771:a,818:l,8211:l,8212:l,8213:l,8214:{dir:n.V,sizes:[.602,1],schar:[0,8741],variants:[1,0],stretch:[0,8741],HDW:[.602,0,.556]},8215:l,8254:i,8407:u,8592:c,8593:{dir:n.V,sizes:[.888],stretch:[8593,9168],HDW:[.6,0,.667]},8594:u,8595:{dir:n.V,sizes:[.888],stretch:[0,9168,8595],HDW:[.6,0,.667]},8596:p,8597:{dir:n.V,sizes:[1.044],stretch:[8593,9168,8595],HDW:e.HDW1},8606:{dir:n.H,sizes:[1],stretch:[8606,8722],HDW:e.HDW3},8608:{dir:n.H,sizes:[1],stretch:[0,8722,8608],HDW:e.HDW3},8612:h,8613:{dir:n.V,stretch:[8593,9168,8869],HDW:e.HDW1,min:1.555},8614:f,8615:{dir:n.V,stretch:[8868,9168,8595],HDW:e.HDW1,min:1.555},8624:{dir:n.V,sizes:[.722],stretch:[8624,9168],HDW:e.HDW1},8625:{dir:n.V,sizes:[.722],stretch:[8625,9168],HDW:e.HDW1},8636:{dir:n.H,sizes:[1],stretch:[8636,8722],HDW:e.HDW3},8637:{dir:n.H,sizes:[1],stretch:[8637,8722],HDW:e.HDW3},8638:{dir:n.V,sizes:[.888],stretch:[8638,9168],HDW:e.HDW1},8639:{dir:n.V,sizes:[.888],stretch:[8639,9168],HDW:e.HDW1},8640:{dir:n.H,sizes:[1],stretch:[0,8722,8640],HDW:e.HDW3},8641:{dir:n.H,sizes:[1],stretch:[0,8722,8641],HDW:e.HDW3},8642:{dir:n.V,sizes:[.888],stretch:[0,9168,8642],HDW:e.HDW1},8643:{dir:n.V,sizes:[.888],stretch:[0,9168,8643],HDW:e.HDW1},8656:d,8657:{dir:n.V,sizes:[.888],stretch:[8657,8214],HDW:[.599,0,.778]},8658:m,8659:{dir:n.V,sizes:[.888],stretch:[0,8214,8659],HDW:[.6,0,.778]},8660:y,8661:{dir:n.V,sizes:[1.044],stretch:[8657,8214,8659],HDW:[.75,.25,.778]},8666:{dir:n.H,sizes:[1],stretch:[8666,8801],HDW:[.464,-.036,.5]},8667:{dir:n.H,sizes:[1],stretch:[0,8801,8667],HDW:[.464,-.036,.5]},8722:g,8725:o,8730:{dir:n.V,sizes:e.VSIZES,stretch:[57345,57344,9143],fullExt:[.65,2.3],HDW:[.85,.35,1.056]},8739:b,8741:{dir:n.V,sizes:[1],stretch:[0,8741],HDW:[.627,.015,.556]},8968:{dir:n.V,sizes:e.VSIZES,stretch:[9121,9122],HDW:e.HDW2},8969:{dir:n.V,sizes:e.VSIZES,stretch:[9124,9125],HDW:e.HDW2},8970:{dir:n.V,sizes:e.VSIZES,stretch:[0,9122,9123],HDW:e.HDW2},8971:{dir:n.V,sizes:e.VSIZES,stretch:[0,9125,9126],HDW:e.HDW2},8978:v,8994:v,8995:_,9001:O,9002:x,9130:{dir:n.V,sizes:[.32],stretch:[9130,9130,9130],HDW:[.29,.015,.889]},9135:l,9136:{dir:n.V,sizes:[.989],stretch:[9127,9130,9133],HDW:[.75,.25,.889]},9137:{dir:n.V,sizes:[.989],stretch:[9131,9130,9129],HDW:[.75,.25,.889]},9140:{dir:n.H,stretch:[9484,8722,9488],HDW:e.HDW3,min:1},9141:{dir:n.H,stretch:[9492,8722,9496],HDW:e.HDW3,min:1},9168:{dir:n.V,sizes:[.602,1],schar:[0,8739],variants:[1,0],stretch:[0,8739],HDW:[.602,0,.333]},9180:v,9181:_,9182:S,9183:M,9184:{dir:n.H,stretch:[714,713,715],HDW:[.59,-.544,.5],min:1},9185:{dir:n.H,stretch:[715,713,714],HDW:[.59,-.544,.5],min:1},9472:l,10072:b,10216:O,10217:x,10222:{dir:n.V,sizes:[.989],stretch:[9127,9130,9129],HDW:[.75,.25,.889]},10223:{dir:n.V,sizes:[.989],stretch:[9131,9130,9133],HDW:[.75,.25,.889]},10229:c,10230:u,10231:p,10232:d,10233:m,10234:y,10235:h,10236:f,10237:E,10238:A,10502:E,10503:A,10574:{dir:n.H,stretch:[8636,8722,8640],HDW:e.HDW3,min:2},10575:{dir:n.V,stretch:[8638,9168,8642],HDW:e.HDW1,min:1.776},10576:{dir:n.H,stretch:[8637,8722,8641],HDW:e.HDW3,min:2},10577:{dir:n.V,stretch:[8639,9168,8643],HDW:e.HDW1,min:.5},10586:{dir:n.H,stretch:[8636,8722,8739],HDW:e.HDW3,min:1.278},10587:{dir:n.H,stretch:[8739,8722,8640],HDW:e.HDW3,min:1.278},10588:{dir:n.V,stretch:[8638,9168,8869],HDW:e.HDW1,min:1.556},10589:{dir:n.V,stretch:[8868,9168,8642],HDW:e.HDW1,min:1.556},10590:{dir:n.H,stretch:[8637,8722,8739],HDW:e.HDW3,min:1.278},10591:{dir:n.H,stretch:[8739,8722,8641],HDW:e.HDW3,min:1.278},10592:{dir:n.V,stretch:[8639,9168,8869],HDW:e.HDW1,min:1.776},10593:{dir:n.V,stretch:[8868,9168,8643],HDW:e.HDW1,min:1.776},12296:O,12297:x,65079:S,65080:M}},6001:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.doubleStruck=void 0,e.doubleStruck={}},3696:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.frakturBold=void 0,e.frakturBold={33:[.689,.012,.349],34:[.695,-.432,.254],38:[.696,.016,.871],39:[.695,-.436,.25],40:[.737,.186,.459],41:[.735,.187,.459],42:[.692,-.449,.328],43:[.598,.082,.893],44:[.107,.191,.328],45:[.275,-.236,.893],46:[.102,.015,.328],47:[.721,.182,.593],48:[.501,.012,.593],49:[.489,0,.593],50:[.491,0,.593],51:[.487,.193,.593],52:[.495,.196,.593],53:[.481,.19,.593],54:[.704,.012,.593],55:[.479,.197,.593],56:[.714,.005,.593],57:[.487,.195,.593],58:[.457,.012,.255],59:[.458,.19,.255],61:[.343,-.168,.582],63:[.697,.014,.428],91:[.74,.13,.257],93:[.738,.132,.257],94:[.734,-.452,.59],8216:[.708,-.411,.254],8217:[.692,-.394,.254],8260:[.721,.182,.593],58113:[.63,.027,.587],58114:[.693,.212,.394,{ic:.014}],58115:[.681,.219,.387],58116:[.473,.212,.593],58117:[.684,.027,.393],58120:[.679,.22,.981],58121:[.717,.137,.727]}},9587:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.fraktur=void 0,e.fraktur={33:[.689,.012,.296],34:[.695,-.432,.215],38:[.698,.011,.738],39:[.695,-.436,.212],40:[.737,.186,.389],41:[.735,.187,.389],42:[.692,-.449,.278],43:[.598,.082,.756],44:[.107,.191,.278],45:[.275,-.236,.756],46:[.102,.015,.278],47:[.721,.182,.502],48:[.492,.013,.502],49:[.468,0,.502],50:[.474,0,.502],51:[.473,.182,.502],52:[.476,.191,.502],53:[.458,.184,.502],54:[.7,.013,.502],55:[.468,.181,.502],56:[.705,.01,.502],57:[.469,.182,.502],58:[.457,.012,.216],59:[.458,.189,.216],61:[.368,-.132,.756],63:[.693,.011,.362],91:[.74,.13,.278],93:[.738,.131,.278],94:[.734,-.452,.5],8216:[.708,-.41,.215],8217:[.692,-.395,.215],8260:[.721,.182,.502],58112:[.683,.032,.497],58113:[.616,.03,.498],58114:[.68,.215,.333],58115:[.679,.224,.329],58116:[.471,.214,.503],58117:[.686,.02,.333],58118:[.577,.021,.334,{ic:.013}],58119:[.475,.022,.501,{ic:.013}]}},8348:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.italic=void 0,e.italic={33:[.716,0,.307,{ic:.073}],34:[.694,-.379,.514,{ic:.024}],35:[.694,.194,.818,{ic:.01}],37:[.75,.056,.818,{ic:.029}],38:[.716,.022,.767,{ic:.035}],39:[.694,-.379,.307,{ic:.07}],40:[.75,.25,.409,{ic:.108}],41:[.75,.25,.409],42:[.75,-.32,.511,{ic:.073}],43:[.557,.057,.767],44:[.121,.194,.307],45:[.251,-.18,.358],46:[.121,0,.307],47:[.716,.215,.778],48:[.665,.021,.511,{ic:.051}],49:[.666,0,.511],50:[.666,.022,.511,{ic:.04}],51:[.666,.022,.511,{ic:.051}],52:[.666,.194,.511],53:[.666,.022,.511,{ic:.056}],54:[.665,.022,.511,{ic:.054}],55:[.666,.022,.511,{ic:.123}],56:[.666,.021,.511,{ic:.042}],57:[.666,.022,.511,{ic:.042}],58:[.431,0,.307],59:[.431,.194,.307],61:[.367,-.133,.767],63:[.716,0,.511,{ic:.04}],64:[.705,.011,.767,{ic:.022}],91:[.75,.25,.307,{ic:.139}],93:[.75,.25,.307,{ic:.052}],94:[.694,-.527,.511,{ic:.017}],95:[-.025,.062,.511,{ic:.043}],126:[.318,-.208,.511,{ic:.06}],305:[.441,.01,.307,{ic:.033}],567:[.442,.204,.332],768:[.697,-.5,0],769:[.697,-.5,0,{ic:.039}],770:[.694,-.527,0,{ic:.017}],771:[.668,-.558,0,{ic:.06}],772:[.589,-.544,0,{ic:.054}],774:[.694,-.515,0,{ic:.062}],775:[.669,-.548,0],776:[.669,-.554,0,{ic:.045}],778:[.716,-.542,0],779:[.697,-.503,0,{ic:.065}],780:[.638,-.502,0,{ic:.029}],989:[.605,.085,.778],8211:[.285,-.248,.511,{ic:.043}],8212:[.285,-.248,1.022,{ic:.016}],8213:[.285,-.248,1.022,{ic:.016}],8215:[-.025,.062,.511,{ic:.043}],8216:[.694,-.379,.307,{ic:.055}],8217:[.694,-.379,.307,{ic:.07}],8220:[.694,-.379,.514,{ic:.092}],8221:[.694,-.379,.514,{ic:.024}],8260:[.716,.215,.778],8463:[.695,.013,.54,{ic:.022}],8710:[.716,0,.833,{sk:.167}],10744:[.716,.215,.778]}},1376:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.largeop=void 0,e.largeop={40:[1.15,.649,.597],41:[1.15,.649,.597],47:[1.15,.649,.811],91:[1.15,.649,.472],92:[1.15,.649,.811],93:[1.15,.649,.472],123:[1.15,.649,.667],125:[1.15,.649,.667],710:[.772,-.565,1],732:[.75,-.611,1],770:[.772,-.565,0],771:[.75,-.611,0],8214:[.602,0,.778],8260:[1.15,.649,.811],8593:[.6,0,.667],8595:[.6,0,.667],8657:[.599,0,.778],8659:[.6,0,.778],8719:[.95,.45,1.278],8720:[.95,.45,1.278],8721:[.95,.45,1.444],8730:[1.15,.65,1,{ic:.02}],8739:[.627,.015,.333],8741:[.627,.015,.556],8747:[1.36,.862,.556,{ic:.388}],8748:[1.36,.862,1.084,{ic:.388}],8749:[1.36,.862,1.592,{ic:.388}],8750:[1.36,.862,.556,{ic:.388}],8896:[.95,.45,1.111],8897:[.95,.45,1.111],8898:[.949,.45,1.111],8899:[.95,.449,1.111],8968:[1.15,.649,.528],8969:[1.15,.649,.528],8970:[1.15,.649,.528],8971:[1.15,.649,.528],9001:[1.15,.649,.611],9002:[1.15,.649,.611],9168:[.602,0,.667],10072:[.627,.015,.333],10216:[1.15,.649,.611],10217:[1.15,.649,.611],10752:[.949,.449,1.511],10753:[.949,.449,1.511],10754:[.949,.449,1.511],10756:[.95,.449,1.111],10758:[.95,.45,1.111],10764:[1.36,.862,2.168,{ic:.388}],12296:[1.15,.649,.611],12297:[1.15,.649,.611]}},1439:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.monospace=void 0,e.monospace={32:[0,0,.525],33:[.622,0,.525],34:[.623,-.333,.525],35:[.611,0,.525],36:[.694,.082,.525],37:[.694,.083,.525],38:[.622,.011,.525],39:[.611,-.287,.525],40:[.694,.082,.525],41:[.694,.082,.525],42:[.52,-.09,.525],43:[.531,-.081,.525],44:[.14,.139,.525],45:[.341,-.271,.525],46:[.14,0,.525],47:[.694,.083,.525],58:[.431,0,.525],59:[.431,.139,.525],60:[.557,-.055,.525],61:[.417,-.195,.525],62:[.557,-.055,.525],63:[.617,0,.525],64:[.617,.006,.525],91:[.694,.082,.525],92:[.694,.083,.525],93:[.694,.082,.525],94:[.611,-.46,.525],95:[-.025,.095,.525],96:[.681,-.357,.525],123:[.694,.083,.525],124:[.694,.082,.525],125:[.694,.083,.525],126:[.611,-.466,.525],127:[.612,-.519,.525],160:[0,0,.525],305:[.431,0,.525],567:[.431,.228,.525],697:[.623,-.334,.525],768:[.611,-.485,0],769:[.611,-.485,0],770:[.611,-.46,0],771:[.611,-.466,0],772:[.577,-.5,0],774:[.611,-.504,0],776:[.612,-.519,0],778:[.619,-.499,0],780:[.577,-.449,0],913:[.623,0,.525],914:[.611,0,.525],915:[.611,0,.525],916:[.623,0,.525],917:[.611,0,.525],918:[.611,0,.525],919:[.611,0,.525],920:[.621,.01,.525],921:[.611,0,.525],922:[.611,0,.525],923:[.623,0,.525],924:[.611,0,.525],925:[.611,0,.525],926:[.611,0,.525],927:[.621,.01,.525],928:[.611,0,.525],929:[.611,0,.525],931:[.611,0,.525],932:[.611,0,.525],933:[.622,0,.525],934:[.611,0,.525],935:[.611,0,.525],936:[.611,0,.525],937:[.622,0,.525],8215:[-.025,.095,.525],8242:[.623,-.334,.525],8243:[.623,0,1.05],8244:[.623,0,1.575],8260:[.694,.083,.525],8279:[.623,0,2.1],8710:[.623,0,.525]}},331:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.normal=void 0,e.normal={32:[0,0,.25],33:[.716,0,.278],34:[.694,-.379,.5],35:[.694,.194,.833],36:[.75,.056,.5],37:[.75,.056,.833],38:[.716,.022,.778],39:[.694,-.379,.278],40:[.75,.25,.389],41:[.75,.25,.389],42:[.75,-.32,.5],43:[.583,.082,.778],44:[.121,.194,.278],45:[.252,-.179,.333],46:[.12,0,.278],47:[.75,.25,.5],48:[.666,.022,.5],49:[.666,0,.5],50:[.666,0,.5],51:[.665,.022,.5],52:[.677,0,.5],53:[.666,.022,.5],54:[.666,.022,.5],55:[.676,.022,.5],56:[.666,.022,.5],57:[.666,.022,.5],58:[.43,0,.278],59:[.43,.194,.278],60:[.54,.04,.778],61:[.583,.082,.778],62:[.54,.04,.778],63:[.705,0,.472],64:[.705,.011,.778],65:[.716,0,.75],66:[.683,0,.708],67:[.705,.021,.722],68:[.683,0,.764],69:[.68,0,.681],70:[.68,0,.653],71:[.705,.022,.785],72:[.683,0,.75],73:[.683,0,.361],74:[.683,.022,.514],75:[.683,0,.778],76:[.683,0,.625],77:[.683,0,.917],78:[.683,0,.75],79:[.705,.022,.778],80:[.683,0,.681],81:[.705,.193,.778],82:[.683,.022,.736],83:[.705,.022,.556],84:[.677,0,.722],85:[.683,.022,.75],86:[.683,.022,.75],87:[.683,.022,1.028],88:[.683,0,.75],89:[.683,0,.75],90:[.683,0,.611],91:[.75,.25,.278],92:[.75,.25,.5],93:[.75,.25,.278],94:[.694,-.531,.5],95:[-.025,.062,.5],96:[.699,-.505,.5],97:[.448,.011,.5],98:[.694,.011,.556],99:[.448,.011,.444],100:[.694,.011,.556],101:[.448,.011,.444],102:[.705,0,.306,{ic:.066}],103:[.453,.206,.5],104:[.694,0,.556],105:[.669,0,.278],106:[.669,.205,.306],107:[.694,0,.528],108:[.694,0,.278],109:[.442,0,.833],110:[.442,0,.556],111:[.448,.01,.5],112:[.442,.194,.556],113:[.442,.194,.528],114:[.442,0,.392],115:[.448,.011,.394],116:[.615,.01,.389],117:[.442,.011,.556],118:[.431,.011,.528],119:[.431,.011,.722],120:[.431,0,.528],121:[.431,.204,.528],122:[.431,0,.444],123:[.75,.25,.5],124:[.75,.249,.278],125:[.75,.25,.5],126:[.318,-.215,.5],160:[0,0,.25],163:[.714,.011,.769],165:[.683,0,.75],168:[.669,-.554,.5],172:[.356,-.089,.667],174:[.709,.175,.947],175:[.59,-.544,.5],176:[.715,-.542,.5],177:[.666,0,.778],180:[.699,-.505,.5],183:[.31,-.19,.278],215:[.491,-.009,.778],240:[.749,.021,.556],247:[.537,.036,.778],305:[.442,0,.278,{sk:.0278}],567:[.442,.205,.306,{sk:.0833}],697:[.56,-.043,.275],710:[.694,-.531,.5],711:[.644,-.513,.5],713:[.59,-.544,.5],714:[.699,-.505,.5],715:[.699,-.505,.5],728:[.694,-.515,.5],729:[.669,-.549,.5],730:[.715,-.542,.5],732:[.668,-.565,.5],768:[.699,-.505,0],769:[.699,-.505,0],770:[.694,-.531,0],771:[.668,-.565,0],772:[.59,-.544,0],774:[.694,-.515,0],775:[.669,-.549,0],776:[.669,-.554,0],778:[.715,-.542,0],779:[.701,-.51,0],780:[.644,-.513,0],824:[.716,.215,0],913:[.716,0,.75],914:[.683,0,.708],915:[.68,0,.625],916:[.716,0,.833],917:[.68,0,.681],918:[.683,0,.611],919:[.683,0,.75],920:[.705,.022,.778],921:[.683,0,.361],922:[.683,0,.778],923:[.716,0,.694],924:[.683,0,.917],925:[.683,0,.75],926:[.677,0,.667],927:[.705,.022,.778],928:[.68,0,.75],929:[.683,0,.681],931:[.683,0,.722],932:[.677,0,.722],933:[.705,0,.778],934:[.683,0,.722],935:[.683,0,.75],936:[.683,0,.778],937:[.704,0,.722],8192:[0,0,.5],8193:[0,0,1],8194:[0,0,.5],8195:[0,0,1],8196:[0,0,.333],8197:[0,0,.25],8198:[0,0,.167],8201:[0,0,.167],8202:[0,0,.1],8203:[0,0,0],8204:[0,0,0],8211:[.285,-.248,.5],8212:[.285,-.248,1],8213:[.285,-.248,1],8214:[.75,.25,.5],8215:[-.025,.062,.5],8216:[.694,-.379,.278],8217:[.694,-.379,.278],8220:[.694,-.379,.5],8221:[.694,-.379,.5],8224:[.705,.216,.444],8225:[.705,.205,.444],8226:[.444,-.055,.5],8230:[.12,0,1.172],8242:[.56,-.043,.275],8243:[.56,0,.55],8244:[.56,0,.825],8245:[.56,-.043,.275],8246:[.56,0,.55],8247:[.56,0,.825],8254:[.59,-.544,.5],8260:[.75,.25,.5],8279:[.56,0,1.1],8288:[0,0,0],8289:[0,0,0],8290:[0,0,0],8291:[0,0,0],8292:[0,0,0],8407:[.714,-.516,.5],8450:[.702,.019,.722],8459:[.717,.036,.969,{ic:.272,sk:.333}],8460:[.666,.133,.72],8461:[.683,0,.778],8462:[.694,.011,.576,{sk:-.0278}],8463:[.695,.013,.54,{ic:.022}],8464:[.717,.017,.809,{ic:.137,sk:.333}],8465:[.686,.026,.554],8466:[.717,.017,.874,{ic:.161,sk:.306}],8467:[.705,.02,.417,{sk:.111}],8469:[.683,.02,.722],8472:[.453,.216,.636,{sk:.111}],8473:[.683,0,.611],8474:[.701,.181,.778],8475:[.717,.017,.85,{ic:.037,sk:.194}],8476:[.686,.026,.828],8477:[.683,0,.722],8484:[.683,0,.667],8486:[.704,0,.722],8487:[.684,.022,.722],8488:[.729,.139,.602],8492:[.708,.028,.908,{ic:.02,sk:.194}],8493:[.685,.024,.613],8496:[.707,.008,.562,{ic:.156,sk:.139}],8497:[.735,.036,.895,{ic:.095,sk:.222}],8498:[.695,0,.556],8499:[.721,.05,1.08,{ic:.136,sk:.444}],8501:[.694,0,.611],8502:[.763,.021,.667,{ic:.02}],8503:[.764,.043,.444],8504:[.764,.043,.667],8513:[.705,.023,.639],8592:[.511,.011,1],8593:[.694,.193,.5],8594:[.511,.011,1],8595:[.694,.194,.5],8596:[.511,.011,1],8597:[.772,.272,.5],8598:[.72,.195,1],8599:[.72,.195,1],8600:[.695,.22,1],8601:[.695,.22,1],8602:[.437,-.06,1],8603:[.437,-.06,1],8606:[.417,-.083,1],8608:[.417,-.083,1],8610:[.417,-.083,1.111],8611:[.417,-.083,1.111],8614:[.511,.011,1],8617:[.511,.011,1.126],8618:[.511,.011,1.126],8619:[.575,.041,1],8620:[.575,.041,1],8621:[.417,-.083,1.389],8622:[.437,-.06,1],8624:[.722,0,.5],8625:[.722,0,.5],8630:[.461,0,1],8631:[.46,0,1],8634:[.65,.083,.778],8635:[.65,.083,.778],8636:[.511,-.23,1],8637:[.27,.011,1],8638:[.694,.194,.417],8639:[.694,.194,.417],8640:[.511,-.23,1],8641:[.27,.011,1],8642:[.694,.194,.417],8643:[.694,.194,.417],8644:[.667,0,1],8646:[.667,0,1],8647:[.583,.083,1],8648:[.694,.193,.833],8649:[.583,.083,1],8650:[.694,.194,.833],8651:[.514,.014,1],8652:[.671,.011,1],8653:[.534,.035,1],8654:[.534,.037,1],8655:[.534,.035,1],8656:[.525,.024,1],8657:[.694,.194,.611],8658:[.525,.024,1],8659:[.694,.194,.611],8660:[.526,.025,1],8661:[.772,.272,.611],8666:[.611,.111,1],8667:[.611,.111,1],8669:[.417,-.083,1],8672:[.437,-.064,1.334],8674:[.437,-.064,1.334],8704:[.694,.022,.556],8705:[.846,.021,.5],8706:[.715,.022,.531,{ic:.035,sk:.0833}],8707:[.694,0,.556],8708:[.716,.215,.556],8709:[.772,.078,.5],8710:[.716,0,.833],8711:[.683,.033,.833],8712:[.54,.04,.667],8713:[.716,.215,.667],8715:[.54,.04,.667],8716:[.716,.215,.667],8717:[.44,0,.429,{ic:.027}],8719:[.75,.25,.944],8720:[.75,.25,.944],8721:[.75,.25,1.056],8722:[.583,.082,.778],8723:[.5,.166,.778],8724:[.766,.093,.778],8725:[.75,.25,.5],8726:[.75,.25,.5],8727:[.465,-.035,.5],8728:[.444,-.055,.5],8729:[.444,-.055,.5],8730:[.8,.2,.833,{ic:.02}],8733:[.442,.011,.778],8734:[.442,.011,1],8736:[.694,0,.722],8737:[.714,.02,.722],8738:[.551,.051,.722],8739:[.75,.249,.278],8740:[.75,.252,.278,{ic:.019}],8741:[.75,.25,.5],8742:[.75,.25,.5,{ic:.018}],8743:[.598,.022,.667],8744:[.598,.022,.667],8745:[.598,.022,.667],8746:[.598,.022,.667],8747:[.716,.216,.417,{ic:.055}],8748:[.805,.306,.819,{ic:.138}],8749:[.805,.306,1.166,{ic:.138}],8750:[.805,.306,.472,{ic:.138}],8756:[.471,.082,.667],8757:[.471,.082,.667],8764:[.367,-.133,.778],8765:[.367,-.133,.778],8768:[.583,.083,.278],8769:[.467,-.032,.778],8770:[.463,-.034,.778],8771:[.464,-.036,.778],8772:[.716,.215,.778],8773:[.589,-.022,.778],8775:[.652,.155,.778],8776:[.483,-.055,.778],8777:[.716,.215,.778],8778:[.579,.039,.778],8781:[.484,-.016,.778],8782:[.492,-.008,.778],8783:[.492,-.133,.778],8784:[.67,-.133,.778],8785:[.609,.108,.778],8786:[.601,.101,.778],8787:[.601,.102,.778],8790:[.367,-.133,.778],8791:[.721,-.133,.778],8796:[.859,-.133,.778],8800:[.716,.215,.778],8801:[.464,-.036,.778],8802:[.716,.215,.778],8804:[.636,.138,.778],8805:[.636,.138,.778],8806:[.753,.175,.778],8807:[.753,.175,.778],8808:[.752,.286,.778],8809:[.752,.286,.778],8810:[.568,.067,1],8811:[.567,.067,1],8812:[.75,.25,.5],8813:[.716,.215,.778],8814:[.708,.209,.778],8815:[.708,.209,.778],8816:[.801,.303,.778],8817:[.801,.303,.778],8818:[.732,.228,.778],8819:[.732,.228,.778],8820:[.732,.228,.778],8821:[.732,.228,.778],8822:[.681,.253,.778],8823:[.681,.253,.778],8824:[.716,.253,.778],8825:[.716,.253,.778],8826:[.539,.041,.778],8827:[.539,.041,.778],8828:[.58,.153,.778],8829:[.58,.154,.778],8830:[.732,.228,.778],8831:[.732,.228,.778],8832:[.705,.208,.778],8833:[.705,.208,.778],8834:[.54,.04,.778],8835:[.54,.04,.778],8836:[.716,.215,.778],8837:[.716,.215,.778],8838:[.636,.138,.778],8839:[.636,.138,.778],8840:[.801,.303,.778],8841:[.801,.303,.778],8842:[.635,.241,.778],8843:[.635,.241,.778],8846:[.598,.022,.667],8847:[.539,.041,.778],8848:[.539,.041,.778],8849:[.636,.138,.778],8850:[.636,.138,.778],8851:[.598,0,.667],8852:[.598,0,.667],8853:[.583,.083,.778],8854:[.583,.083,.778],8855:[.583,.083,.778],8856:[.583,.083,.778],8857:[.583,.083,.778],8858:[.582,.082,.778],8859:[.582,.082,.778],8861:[.582,.082,.778],8862:[.689,0,.778],8863:[.689,0,.778],8864:[.689,0,.778],8865:[.689,0,.778],8866:[.694,0,.611],8867:[.694,0,.611],8868:[.668,0,.778],8869:[.668,0,.778],8872:[.75,.249,.867],8873:[.694,0,.722],8874:[.694,0,.889],8876:[.695,0,.611],8877:[.695,0,.611],8878:[.695,0,.722],8879:[.695,0,.722],8882:[.539,.041,.778],8883:[.539,.041,.778],8884:[.636,.138,.778],8885:[.636,.138,.778],8888:[.408,-.092,1.111],8890:[.431,.212,.556],8891:[.716,0,.611],8892:[.716,0,.611],8896:[.75,.249,.833],8897:[.75,.249,.833],8898:[.75,.249,.833],8899:[.75,.249,.833],8900:[.488,-.012,.5],8901:[.31,-.19,.278],8902:[.486,-.016,.5],8903:[.545,.044,.778],8904:[.505,.005,.9],8905:[.492,-.008,.778],8906:[.492,-.008,.778],8907:[.694,.022,.778],8908:[.694,.022,.778],8909:[.464,-.036,.778],8910:[.578,.021,.76],8911:[.578,.022,.76],8912:[.54,.04,.778],8913:[.54,.04,.778],8914:[.598,.022,.667],8915:[.598,.022,.667],8916:[.736,.022,.667],8918:[.541,.041,.778],8919:[.541,.041,.778],8920:[.568,.067,1.333],8921:[.568,.067,1.333],8922:[.886,.386,.778],8923:[.886,.386,.778],8926:[.734,0,.778],8927:[.734,0,.778],8928:[.801,.303,.778],8929:[.801,.303,.778],8930:[.716,.215,.778],8931:[.716,.215,.778],8934:[.73,.359,.778],8935:[.73,.359,.778],8936:[.73,.359,.778],8937:[.73,.359,.778],8938:[.706,.208,.778],8939:[.706,.208,.778],8940:[.802,.303,.778],8941:[.801,.303,.778],8942:[1.3,.03,.278],8943:[.31,-.19,1.172],8945:[1.52,-.1,1.282],8965:[.716,0,.611],8966:[.813,.097,.611],8968:[.75,.25,.444],8969:[.75,.25,.444],8970:[.75,.25,.444],8971:[.75,.25,.444],8988:[.694,-.306,.5],8989:[.694,-.306,.5],8990:[.366,.022,.5],8991:[.366,.022,.5],8994:[.388,-.122,1],8995:[.378,-.134,1],9001:[.75,.25,.389],9002:[.75,.25,.389],9136:[.744,.244,.412],9137:[.744,.244,.412],9168:[.602,0,.667],9416:[.709,.175,.902],9484:[.694,-.306,.5],9488:[.694,-.306,.5],9492:[.366,.022,.5],9496:[.366,.022,.5],9585:[.694,.195,.889],9586:[.694,.195,.889],9632:[.689,0,.778],9633:[.689,0,.778],9642:[.689,0,.778],9650:[.575,.02,.722],9651:[.716,0,.889],9652:[.575,.02,.722],9653:[.716,0,.889],9654:[.539,.041,.778],9656:[.539,.041,.778],9657:[.505,.005,.5],9660:[.576,.019,.722],9661:[.5,.215,.889],9662:[.576,.019,.722],9663:[.5,.215,.889],9664:[.539,.041,.778],9666:[.539,.041,.778],9667:[.505,.005,.5],9674:[.716,.132,.667],9711:[.715,.215,1],9723:[.689,0,.778],9724:[.689,0,.778],9733:[.694,.111,.944],9824:[.727,.13,.778],9825:[.716,.033,.778],9826:[.727,.162,.778],9827:[.726,.13,.778],9837:[.75,.022,.389],9838:[.734,.223,.389],9839:[.723,.223,.389],10003:[.706,.034,.833],10016:[.716,.022,.833],10072:[.75,.249,.278],10216:[.75,.25,.389],10217:[.75,.25,.389],10222:[.744,.244,.412],10223:[.744,.244,.412],10229:[.511,.011,1.609],10230:[.511,.011,1.638],10231:[.511,.011,1.859],10232:[.525,.024,1.609],10233:[.525,.024,1.638],10234:[.525,.024,1.858],10236:[.511,.011,1.638],10731:[.716,.132,.667],10744:[.716,.215,.778],10752:[.75,.25,1.111],10753:[.75,.25,1.111],10754:[.75,.25,1.111],10756:[.75,.249,.833],10758:[.75,.249,.833],10764:[.805,.306,1.638,{ic:.138}],10799:[.491,-.009,.778],10815:[.683,0,.75],10846:[.813,.097,.611],10877:[.636,.138,.778],10878:[.636,.138,.778],10885:[.762,.29,.778],10886:[.762,.29,.778],10887:[.635,.241,.778],10888:[.635,.241,.778],10889:[.761,.387,.778],10890:[.761,.387,.778],10891:[1.003,.463,.778],10892:[1.003,.463,.778],10901:[.636,.138,.778],10902:[.636,.138,.778],10927:[.636,.138,.778],10928:[.636,.138,.778],10933:[.752,.286,.778],10934:[.752,.286,.778],10935:[.761,.294,.778],10936:[.761,.294,.778],10937:[.761,.337,.778],10938:[.761,.337,.778],10949:[.753,.215,.778],10950:[.753,.215,.778],10955:[.783,.385,.778],10956:[.783,.385,.778],12296:[.75,.25,.389],12297:[.75,.25,.389],57350:[.43,.023,.222,{ic:.018}],57351:[.431,.024,.389,{ic:.018}],57352:[.605,.085,.778],57353:[.434,.006,.667,{ic:.067}],57356:[.752,.284,.778],57357:[.752,.284,.778],57358:[.919,.421,.778],57359:[.801,.303,.778],57360:[.801,.303,.778],57361:[.919,.421,.778],57366:[.828,.33,.778],57367:[.752,.332,.778],57368:[.828,.33,.778],57369:[.752,.333,.778],57370:[.634,.255,.778],57371:[.634,.254,.778],119808:[.698,0,.869],119809:[.686,0,.818],119810:[.697,.011,.831],119811:[.686,0,.882],119812:[.68,0,.756],119813:[.68,0,.724],119814:[.697,.01,.904],119815:[.686,0,.9],119816:[.686,0,.436],119817:[.686,.011,.594],119818:[.686,0,.901],119819:[.686,0,.692],119820:[.686,0,1.092],119821:[.686,0,.9],119822:[.696,.01,.864],119823:[.686,0,.786],119824:[.696,.193,.864],119825:[.686,.011,.862],119826:[.697,.011,.639],119827:[.675,0,.8],119828:[.686,.011,.885],119829:[.686,.007,.869],119830:[.686,.007,1.189],119831:[.686,0,.869],119832:[.686,0,.869],119833:[.686,0,.703],119834:[.453,.006,.559],119835:[.694,.006,.639],119836:[.453,.006,.511],119837:[.694,.006,.639],119838:[.452,.006,.527],119839:[.7,0,.351,{ic:.101}],119840:[.455,.201,.575],119841:[.694,0,.639],119842:[.695,0,.319],119843:[.695,.2,.351],119844:[.694,0,.607],119845:[.694,0,.319],119846:[.45,0,.958],119847:[.45,0,.639],119848:[.452,.005,.575],119849:[.45,.194,.639],119850:[.45,.194,.607],119851:[.45,0,.474],119852:[.453,.006,.454],119853:[.635,.005,.447],119854:[.45,.006,.639],119855:[.444,0,.607],119856:[.444,0,.831],119857:[.444,0,.607],119858:[.444,.2,.607],119859:[.444,0,.511],119860:[.716,0,.75,{sk:.139}],119861:[.683,0,.759,{sk:.0833}],119862:[.705,.022,.715,{ic:.045,sk:.0833}],119863:[.683,0,.828,{sk:.0556}],119864:[.68,0,.738,{ic:.026,sk:.0833}],119865:[.68,0,.643,{ic:.106,sk:.0833}],119866:[.705,.022,.786,{sk:.0833}],119867:[.683,0,.831,{ic:.057,sk:.0556}],119868:[.683,0,.44,{ic:.064,sk:.111}],119869:[.683,.022,.555,{ic:.078,sk:.167}],119870:[.683,0,.849,{ic:.04,sk:.0556}],119871:[.683,0,.681,{sk:.0278}],119872:[.683,0,.97,{ic:.081,sk:.0833}],119873:[.683,0,.803,{ic:.085,sk:.0833}],119874:[.704,.022,.763,{sk:.0833}],119875:[.683,0,.642,{ic:.109,sk:.0833}],119876:[.704,.194,.791,{sk:.0833}],119877:[.683,.021,.759,{sk:.0833}],119878:[.705,.022,.613,{ic:.032,sk:.0833}],119879:[.677,0,.584,{ic:.12,sk:.0833}],119880:[.683,.022,.683,{ic:.084,sk:.0278}],119881:[.683,.022,.583,{ic:.186}],119882:[.683,.022,.944,{ic:.104}],119883:[.683,0,.828,{ic:.024,sk:.0833}],119884:[.683,0,.581,{ic:.182}],119885:[.683,0,.683,{ic:.04,sk:.0833}],119886:[.441,.01,.529],119887:[.694,.011,.429],119888:[.442,.011,.433,{sk:.0556}],119889:[.694,.01,.52,{sk:.167}],119890:[.442,.011,.466,{sk:.0556}],119891:[.705,.205,.49,{ic:.06,sk:.167}],119892:[.442,.205,.477,{sk:.0278}],119894:[.661,.011,.345],119895:[.661,.204,.412],119896:[.694,.011,.521],119897:[.694,.011,.298,{sk:.0833}],119898:[.442,.011,.878],119899:[.442,.011,.6],119900:[.441,.011,.485,{sk:.0556}],119901:[.442,.194,.503,{sk:.0833}],119902:[.442,.194,.446,{ic:.014,sk:.0833}],119903:[.442,.011,.451,{sk:.0556}],119904:[.442,.01,.469,{sk:.0556}],119905:[.626,.011,.361,{sk:.0833}],119906:[.442,.011,.572,{sk:.0278}],119907:[.443,.011,.485,{sk:.0278}],119908:[.443,.011,.716,{sk:.0833}],119909:[.442,.011,.572,{sk:.0278}],119910:[.442,.205,.49,{sk:.0556}],119911:[.442,.011,.465,{sk:.0556}],119912:[.711,0,.869,{sk:.16}],119913:[.686,0,.866,{sk:.0958}],119914:[.703,.017,.817,{ic:.038,sk:.0958}],119915:[.686,0,.938,{sk:.0639}],119916:[.68,0,.81,{ic:.015,sk:.0958}],119917:[.68,0,.689,{ic:.12,sk:.0958}],119918:[.703,.016,.887,{sk:.0958}],119919:[.686,0,.982,{ic:.045,sk:.0639}],119920:[.686,0,.511,{ic:.062,sk:.128}],119921:[.686,.017,.631,{ic:.063,sk:.192}],119922:[.686,0,.971,{ic:.032,sk:.0639}],119923:[.686,0,.756,{sk:.0319}],119924:[.686,0,1.142,{ic:.077,sk:.0958}],119925:[.686,0,.95,{ic:.077,sk:.0958}],119926:[.703,.017,.837,{sk:.0958}],119927:[.686,0,.723,{ic:.124,sk:.0958}],119928:[.703,.194,.869,{sk:.0958}],119929:[.686,.017,.872,{sk:.0958}],119930:[.703,.017,.693,{ic:.021,sk:.0958}],119931:[.675,0,.637,{ic:.135,sk:.0958}],119932:[.686,.016,.8,{ic:.077,sk:.0319}],119933:[.686,.016,.678,{ic:.208}],119934:[.686,.017,1.093,{ic:.114}],119935:[.686,0,.947,{sk:.0958}],119936:[.686,0,.675,{ic:.201}],119937:[.686,0,.773,{ic:.032,sk:.0958}],119938:[.452,.008,.633],119939:[.694,.008,.521],119940:[.451,.008,.513,{sk:.0639}],119941:[.694,.008,.61,{sk:.192}],119942:[.452,.008,.554,{sk:.0639}],119943:[.701,.201,.568,{ic:.056,sk:.192}],119944:[.452,.202,.545,{sk:.0319}],119945:[.694,.008,.668,{sk:-.0319}],119946:[.694,.008,.405],119947:[.694,.202,.471],119948:[.694,.008,.604],119949:[.694,.008,.348,{sk:.0958}],119950:[.452,.008,1.032],119951:[.452,.008,.713],119952:[.452,.008,.585,{sk:.0639}],119953:[.452,.194,.601,{sk:.0958}],119954:[.452,.194,.542,{sk:.0958}],119955:[.452,.008,.529,{sk:.0639}],119956:[.451,.008,.531,{sk:.0639}],119957:[.643,.007,.415,{sk:.0958}],119958:[.452,.008,.681,{sk:.0319}],119959:[.453,.008,.567,{sk:.0319}],119960:[.453,.008,.831,{sk:.0958}],119961:[.452,.008,.659,{sk:.0319}],119962:[.452,.202,.59,{sk:.0639}],119963:[.452,.008,.555,{sk:.0639}],119964:[.717,.008,.803,{ic:.213,sk:.389}],119966:[.728,.026,.666,{ic:.153,sk:.278}],119967:[.708,.031,.774,{ic:.081,sk:.111}],119970:[.717,.037,.61,{ic:.128,sk:.25}],119973:[.717,.314,1.052,{ic:.081,sk:.417}],119974:[.717,.037,.914,{ic:.29,sk:.361}],119977:[.726,.036,.902,{ic:.306,sk:.389}],119978:[.707,.008,.738,{ic:.067,sk:.167}],119979:[.716,.037,1.013,{ic:.018,sk:.222}],119980:[.717,.017,.883,{sk:.278}],119982:[.708,.036,.868,{ic:.148,sk:.333}],119983:[.735,.037,.747,{ic:.249,sk:.222}],119984:[.717,.017,.8,{ic:.16,sk:.25}],119985:[.717,.017,.622,{ic:.228,sk:.222}],119986:[.717,.017,.805,{ic:.221,sk:.25}],119987:[.717,.017,.944,{ic:.187,sk:.278}],119988:[.716,.017,.71,{ic:.249,sk:.194}],119989:[.717,.016,.821,{ic:.211,sk:.306}],120068:[.696,.026,.718],120069:[.691,.027,.884],120071:[.685,.027,.832],120072:[.685,.024,.663],120073:[.686,.153,.611],120074:[.69,.026,.785],120077:[.686,.139,.552],120078:[.68,.027,.668,{ic:.014}],120079:[.686,.026,.666],120080:[.692,.027,1.05],120081:[.686,.025,.832],120082:[.729,.027,.827],120083:[.692,.218,.828],120084:[.729,.069,.827],120086:[.692,.027,.829],120087:[.701,.027,.669],120088:[.697,.027,.646,{ic:.019}],120089:[.686,.026,.831],120090:[.686,.027,1.046],120091:[.688,.027,.719],120092:[.686,.218,.833],120094:[.47,.035,.5],120095:[.685,.031,.513],120096:[.466,.029,.389],120097:[.609,.033,.499],120098:[.467,.03,.401],120099:[.681,.221,.326],120100:[.47,.209,.504],120101:[.688,.205,.521],120102:[.673,.02,.279],120103:[.672,.208,.281],120104:[.689,.025,.389],120105:[.685,.02,.28],120106:[.475,.026,.767],120107:[.475,.022,.527],120108:[.48,.028,.489],120109:[.541,.212,.5],120110:[.479,.219,.489],120111:[.474,.021,.389],120112:[.478,.029,.443],120113:[.64,.02,.333,{ic:.015}],120114:[.474,.023,.517],120115:[.53,.028,.512],120116:[.532,.028,.774],120117:[.472,.188,.389],120118:[.528,.218,.499],120119:[.471,.214,.391],120120:[.701,0,.722],120121:[.683,0,.667],120123:[.683,0,.722],120124:[.683,0,.667],120125:[.683,0,.611],120126:[.702,.019,.778],120128:[.683,0,.389],120129:[.683,.077,.5],120130:[.683,0,.778],120131:[.683,0,.667],120132:[.683,0,.944],120134:[.701,.019,.778],120138:[.702,.012,.556],120139:[.683,0,.667],120140:[.683,.019,.722],120141:[.683,.02,.722],120142:[.683,.019,1],120143:[.683,0,.722],120144:[.683,0,.722],120172:[.686,.031,.847],120173:[.684,.031,1.044],120174:[.676,.032,.723],120175:[.683,.029,.982],120176:[.686,.029,.783],120177:[.684,.146,.722],120178:[.687,.029,.927],120179:[.683,.126,.851],120180:[.681,.025,.655],120181:[.68,.141,.652],120182:[.681,.026,.789,{ic:.017}],120183:[.683,.028,.786],120184:[.683,.032,1.239],120185:[.679,.03,.983],120186:[.726,.03,.976],120187:[.688,.223,.977],120188:[.726,.083,.976],120189:[.688,.028,.978],120190:[.685,.031,.978],120191:[.686,.03,.79,{ic:.012}],120192:[.688,.039,.851,{ic:.02}],120193:[.685,.029,.982],120194:[.683,.03,1.235],120195:[.681,.035,.849],120196:[.688,.214,.984],120197:[.677,.148,.711],120198:[.472,.032,.603],120199:[.69,.032,.59],120200:[.473,.026,.464],120201:[.632,.028,.589],120202:[.471,.027,.472],120203:[.687,.222,.388],120204:[.472,.208,.595],120205:[.687,.207,.615],120206:[.686,.025,.331],120207:[.682,.203,.332],120208:[.682,.025,.464],120209:[.681,.024,.337],120210:[.476,.031,.921],120211:[.473,.028,.654],120212:[.482,.034,.609],120213:[.557,.207,.604],120214:[.485,.211,.596],120215:[.472,.026,.46],120216:[.479,.034,.523],120217:[.648,.027,.393,{ic:.014}],120218:[.472,.032,.589,{ic:.014}],120219:[.546,.027,.604],120220:[.549,.032,.918],120221:[.471,.188,.459],120222:[.557,.221,.589],120223:[.471,.214,.461],120224:[.694,0,.667],120225:[.694,0,.667],120226:[.705,.011,.639],120227:[.694,0,.722],120228:[.691,0,.597],120229:[.691,0,.569],120230:[.704,.011,.667],120231:[.694,0,.708],120232:[.694,0,.278],120233:[.694,.022,.472],120234:[.694,0,.694],120235:[.694,0,.542],120236:[.694,0,.875],120237:[.694,0,.708],120238:[.715,.022,.736],120239:[.694,0,.639],120240:[.715,.125,.736],120241:[.694,0,.646],120242:[.716,.022,.556],120243:[.688,0,.681],120244:[.694,.022,.688],120245:[.694,0,.667],120246:[.694,0,.944],120247:[.694,0,.667],120248:[.694,0,.667],120249:[.694,0,.611],120250:[.46,.01,.481],120251:[.694,.011,.517],120252:[.46,.01,.444],120253:[.694,.01,.517],120254:[.461,.01,.444],120255:[.705,0,.306,{ic:.041}],120256:[.455,.206,.5],120257:[.694,0,.517],120258:[.68,0,.239],120259:[.68,.205,.267],120260:[.694,0,.489],120261:[.694,0,.239],120262:[.455,0,.794],120263:[.455,0,.517],120264:[.46,.01,.5],120265:[.455,.194,.517],120266:[.455,.194,.517],120267:[.455,0,.342],120268:[.46,.01,.383],120269:[.571,.01,.361],120270:[.444,.01,.517],120271:[.444,0,.461],120272:[.444,0,.683],120273:[.444,0,.461],120274:[.444,.204,.461],120275:[.444,0,.435],120276:[.694,0,.733],120277:[.694,0,.733],120278:[.704,.011,.703],120279:[.694,0,.794],120280:[.691,0,.642],120281:[.691,0,.611],120282:[.705,.011,.733],120283:[.694,0,.794],120284:[.694,0,.331],120285:[.694,.022,.519],120286:[.694,0,.764],120287:[.694,0,.581],120288:[.694,0,.978],120289:[.694,0,.794],120290:[.716,.022,.794],120291:[.694,0,.703],120292:[.716,.106,.794],120293:[.694,0,.703],120294:[.716,.022,.611],120295:[.688,0,.733],120296:[.694,.022,.764],120297:[.694,0,.733],120298:[.694,0,1.039],120299:[.694,0,.733],120300:[.694,0,.733],120301:[.694,0,.672],120302:[.475,.011,.525],120303:[.694,.01,.561],120304:[.475,.011,.489],120305:[.694,.011,.561],120306:[.474,.01,.511],120307:[.705,0,.336,{ic:.045}],120308:[.469,.206,.55],120309:[.694,0,.561],120310:[.695,0,.256],120311:[.695,.205,.286],120312:[.694,0,.531],120313:[.694,0,.256],120314:[.469,0,.867],120315:[.468,0,.561],120316:[.474,.011,.55],120317:[.469,.194,.561],120318:[.469,.194,.561],120319:[.469,0,.372],120320:[.474,.01,.422],120321:[.589,.01,.404],120322:[.458,.011,.561],120323:[.458,0,.5],120324:[.458,0,.744],120325:[.458,0,.5],120326:[.458,.205,.5],120327:[.458,0,.476],120328:[.694,0,.667],120329:[.694,0,.667,{ic:.029}],120330:[.705,.01,.639,{ic:.08}],120331:[.694,0,.722,{ic:.025}],120332:[.691,0,.597,{ic:.091}],120333:[.691,0,.569,{ic:.104}],120334:[.705,.011,.667,{ic:.063}],120335:[.694,0,.708,{ic:.06}],120336:[.694,0,.278,{ic:.06}],120337:[.694,.022,.472,{ic:.063}],120338:[.694,0,.694,{ic:.091}],120339:[.694,0,.542],120340:[.694,0,.875,{ic:.054}],120341:[.694,0,.708,{ic:.058}],120342:[.716,.022,.736,{ic:.027}],120343:[.694,0,.639,{ic:.051}],120344:[.716,.125,.736,{ic:.027}],120345:[.694,0,.646,{ic:.052}],120346:[.716,.022,.556,{ic:.053}],120347:[.688,0,.681,{ic:.109}],120348:[.694,.022,.688,{ic:.059}],120349:[.694,0,.667,{ic:.132}],120350:[.694,0,.944,{ic:.132}],120351:[.694,0,.667,{ic:.091}],120352:[.694,0,.667,{ic:.143}],120353:[.694,0,.611,{ic:.091}],120354:[.461,.01,.481],120355:[.694,.011,.517,{ic:.022}],120356:[.46,.011,.444,{ic:.055}],120357:[.694,.01,.517,{ic:.071}],120358:[.46,.011,.444,{ic:.028}],120359:[.705,0,.306,{ic:.188}],120360:[.455,.206,.5,{ic:.068}],120361:[.694,0,.517],120362:[.68,0,.239,{ic:.076}],120363:[.68,.204,.267,{ic:.069}],120364:[.694,0,.489,{ic:.054}],120365:[.694,0,.239,{ic:.072}],120366:[.455,0,.794],120367:[.454,0,.517],120368:[.461,.011,.5,{ic:.023}],120369:[.455,.194,.517,{ic:.021}],120370:[.455,.194,.517,{ic:.021}],120371:[.455,0,.342,{ic:.082}],120372:[.461,.011,.383,{ic:.053}],120373:[.571,.011,.361,{ic:.049}],120374:[.444,.01,.517,{ic:.02}],120375:[.444,0,.461,{ic:.079}],120376:[.444,0,.683,{ic:.079}],120377:[.444,0,.461,{ic:.076}],120378:[.444,.205,.461,{ic:.079}],120379:[.444,0,.435,{ic:.059}],120432:[.623,0,.525],120433:[.611,0,.525],120434:[.622,.011,.525],120435:[.611,0,.525],120436:[.611,0,.525],120437:[.611,0,.525],120438:[.622,.011,.525],120439:[.611,0,.525],120440:[.611,0,.525],120441:[.611,.011,.525],120442:[.611,0,.525],120443:[.611,0,.525],120444:[.611,0,.525],120445:[.611,0,.525],120446:[.621,.01,.525],120447:[.611,0,.525],120448:[.621,.138,.525],120449:[.611,.011,.525],120450:[.622,.011,.525],120451:[.611,0,.525],120452:[.611,.011,.525],120453:[.611,.007,.525],120454:[.611,.007,.525],120455:[.611,0,.525],120456:[.611,0,.525],120457:[.611,0,.525],120458:[.439,.006,.525],120459:[.611,.006,.525],120460:[.44,.006,.525],120461:[.611,.006,.525],120462:[.44,.006,.525],120463:[.617,0,.525],120464:[.442,.229,.525],120465:[.611,0,.525],120466:[.612,0,.525],120467:[.612,.228,.525],120468:[.611,0,.525],120469:[.611,0,.525],120470:[.436,0,.525,{ic:.011}],120471:[.436,0,.525],120472:[.44,.006,.525],120473:[.437,.221,.525],120474:[.437,.221,.525,{ic:.02}],120475:[.437,0,.525],120476:[.44,.006,.525],120477:[.554,.006,.525],120478:[.431,.005,.525],120479:[.431,0,.525],120480:[.431,0,.525],120481:[.431,0,.525],120482:[.431,.228,.525],120483:[.431,0,.525],120488:[.698,0,.869],120489:[.686,0,.818],120490:[.68,0,.692],120491:[.698,0,.958],120492:[.68,0,.756],120493:[.686,0,.703],120494:[.686,0,.9],120495:[.696,.01,.894],120496:[.686,0,.436],120497:[.686,0,.901],120498:[.698,0,.806],120499:[.686,0,1.092],120500:[.686,0,.9],120501:[.675,0,.767],120502:[.696,.01,.864],120503:[.68,0,.9],120504:[.686,0,.786],120506:[.686,0,.831],120507:[.675,0,.8],120508:[.697,0,.894],120509:[.686,0,.831],120510:[.686,0,.869],120511:[.686,0,.894],120512:[.696,0,.831],120513:[.686,.024,.958],120546:[.716,0,.75,{sk:.139}],120547:[.683,0,.759,{sk:.0833}],120548:[.68,0,.615,{ic:.106,sk:.0833}],120549:[.716,0,.833,{sk:.167}],120550:[.68,0,.738,{ic:.026,sk:.0833}],120551:[.683,0,.683,{ic:.04,sk:.0833}],120552:[.683,0,.831,{ic:.057,sk:.0556}],120553:[.704,.022,.763,{sk:.0833}],120554:[.683,0,.44,{ic:.064,sk:.111}],120555:[.683,0,.849,{ic:.04,sk:.0556}],120556:[.716,0,.694,{sk:.167}],120557:[.683,0,.97,{ic:.081,sk:.0833}],120558:[.683,0,.803,{ic:.085,sk:.0833}],120559:[.677,0,.742,{ic:.035,sk:.0833}],120560:[.704,.022,.763,{sk:.0833}],120561:[.68,0,.831,{ic:.056,sk:.0556}],120562:[.683,0,.642,{ic:.109,sk:.0833}],120564:[.683,0,.78,{ic:.026,sk:.0833}],120565:[.677,0,.584,{ic:.12,sk:.0833}],120566:[.705,0,.583,{ic:.117,sk:.0556}],120567:[.683,0,.667,{sk:.0833}],120568:[.683,0,.828,{ic:.024,sk:.0833}],120569:[.683,0,.612,{ic:.08,sk:.0556}],120570:[.704,0,.772,{ic:.014,sk:.0833}],120572:[.442,.011,.64,{sk:.0278}],120573:[.705,.194,.566,{sk:.0833}],120574:[.441,.216,.518,{ic:.025}],120575:[.717,.01,.444,{sk:.0556}],120576:[.452,.022,.466,{sk:.0833}],120577:[.704,.204,.438,{ic:.033,sk:.0833}],120578:[.442,.216,.497,{sk:.0556}],120579:[.705,.01,.469,{sk:.0833}],120580:[.442,.01,.354,{sk:.0556}],120581:[.442,.011,.576],120582:[.694,.012,.583],120583:[.442,.216,.603,{sk:.0278}],120584:[.442,0,.494,{ic:.036,sk:.0278}],120585:[.704,.205,.438,{sk:.111}],120586:[.441,.011,.485,{sk:.0556}],120587:[.431,.011,.57],120588:[.442,.216,.517,{sk:.0833}],120589:[.442,.107,.363,{ic:.042,sk:.0833}],120590:[.431,.011,.571],120591:[.431,.013,.437,{ic:.08,sk:.0278}],120592:[.443,.01,.54,{sk:.0278}],120593:[.442,.218,.654,{sk:.0833}],120594:[.442,.204,.626,{sk:.0556}],120595:[.694,.205,.651,{sk:.111}],120596:[.443,.011,.622],120597:[.715,.022,.531,{ic:.035,sk:.0833}],120598:[.431,.011,.406,{sk:.0556}],120599:[.705,.011,.591,{sk:.0833}],120600:[.434,.006,.667,{ic:.067}],120601:[.694,.205,.596,{sk:.0833}],120602:[.442,.194,.517,{sk:.0833}],120603:[.431,.01,.828],120604:[.711,0,.869,{sk:.16}],120605:[.686,0,.866,{sk:.0958}],120606:[.68,0,.657,{ic:.12,sk:.0958}],120607:[.711,0,.958,{sk:.192}],120608:[.68,0,.81,{ic:.015,sk:.0958}],120609:[.686,0,.773,{ic:.032,sk:.0958}],120610:[.686,0,.982,{ic:.045,sk:.0639}],120611:[.702,.017,.867,{sk:.0958}],120612:[.686,0,.511,{ic:.062,sk:.128}],120613:[.686,0,.971,{ic:.032,sk:.0639}],120614:[.711,0,.806,{sk:.192}],120615:[.686,0,1.142,{ic:.077,sk:.0958}],120616:[.686,0,.95,{ic:.077,sk:.0958}],120617:[.675,0,.841,{ic:.026,sk:.0958}],120618:[.703,.017,.837,{sk:.0958}],120619:[.68,0,.982,{ic:.044,sk:.0639}],120620:[.686,0,.723,{ic:.124,sk:.0958}],120622:[.686,0,.885,{ic:.017,sk:.0958}],120623:[.675,0,.637,{ic:.135,sk:.0958}],120624:[.703,0,.671,{ic:.131,sk:.0639}],120625:[.686,0,.767,{sk:.0958}],120626:[.686,0,.947,{sk:.0958}],120627:[.686,0,.714,{ic:.076,sk:.0639}],120628:[.703,0,.879,{sk:.0958}],120630:[.452,.008,.761,{sk:.0319}],120631:[.701,.194,.66,{sk:.0958}],120632:[.451,.211,.59,{ic:.027}],120633:[.725,.008,.522,{sk:.0639}],120634:[.461,.017,.529,{sk:.0958}],120635:[.711,.202,.508,{ic:.013,sk:.0958}],120636:[.452,.211,.6,{sk:.0639}],120637:[.702,.008,.562,{sk:.0958}],120638:[.452,.008,.412,{sk:.0639}],120639:[.452,.008,.668],120640:[.694,.013,.671],120641:[.452,.211,.708,{sk:.0319}],120642:[.452,0,.577,{ic:.031,sk:.0319}],120643:[.711,.201,.508,{sk:.128}],120644:[.452,.008,.585,{sk:.0639}],120645:[.444,.008,.682],120646:[.451,.211,.612,{sk:.0958}],120647:[.451,.105,.424,{ic:.033,sk:.0958}],120648:[.444,.008,.686],120649:[.444,.013,.521,{ic:.089,sk:.0319}],120650:[.453,.008,.631,{sk:.0319}],120651:[.452,.216,.747,{sk:.0958}],120652:[.452,.201,.718,{sk:.0639}],120653:[.694,.202,.758,{sk:.128}],120654:[.453,.008,.718],120655:[.71,.017,.628,{ic:.029,sk:.0958}],120656:[.444,.007,.483,{sk:.0639}],120657:[.701,.008,.692,{sk:.0958}],120658:[.434,.006,.667,{ic:.067}],120659:[.694,.202,.712,{sk:.0958}],120660:[.451,.194,.612,{sk:.0958}],120661:[.444,.008,.975],120662:[.694,0,.733],120663:[.694,0,.733],120664:[.691,0,.581],120665:[.694,0,.917],120666:[.691,0,.642],120667:[.694,0,.672],120668:[.694,0,.794],120669:[.716,.022,.856],120670:[.694,0,.331],120671:[.694,0,.764],120672:[.694,0,.672],120673:[.694,0,.978],120674:[.694,0,.794],120675:[.688,0,.733],120676:[.716,.022,.794],120677:[.691,0,.794],120678:[.694,0,.703],120680:[.694,0,.794],120681:[.688,0,.733],120682:[.715,0,.856],120683:[.694,0,.794],120684:[.694,0,.733],120685:[.694,0,.856],120686:[.716,0,.794],120782:[.654,.01,.575],120783:[.655,0,.575],120784:[.654,0,.575],120785:[.655,.011,.575],120786:[.656,0,.575],120787:[.655,.011,.575],120788:[.655,.011,.575],120789:[.676,.011,.575],120790:[.654,.011,.575],120791:[.654,.011,.575],120802:[.678,.022,.5],120803:[.678,0,.5],120804:[.677,0,.5],120805:[.678,.022,.5],120806:[.656,0,.5],120807:[.656,.021,.5],120808:[.677,.022,.5],120809:[.656,.011,.5],120810:[.678,.022,.5],120811:[.677,.022,.5],120812:[.715,.022,.55],120813:[.716,0,.55],120814:[.716,0,.55],120815:[.716,.022,.55],120816:[.694,0,.55],120817:[.694,.022,.55],120818:[.716,.022,.55],120819:[.695,.011,.55],120820:[.715,.022,.55],120821:[.716,.022,.55],120822:[.621,.01,.525],120823:[.622,0,.525],120824:[.622,0,.525],120825:[.622,.011,.525],120826:[.624,0,.525],120827:[.611,.01,.525],120828:[.622,.011,.525],120829:[.627,.01,.525],120830:[.621,.01,.525],120831:[.622,.011,.525]}},4886:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.sansSerifBoldItalic=void 0,e.sansSerifBoldItalic={305:[.458,0,.256],567:[.458,.205,.286]}},4471:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.sansSerifBold=void 0,e.sansSerifBold={33:[.694,0,.367],34:[.694,-.442,.558],35:[.694,.193,.917],36:[.75,.056,.55],37:[.75,.056,1.029],38:[.716,.022,.831],39:[.694,-.442,.306],40:[.75,.249,.428],41:[.75,.25,.428],42:[.75,-.293,.55],43:[.617,.116,.856],44:[.146,.106,.306],45:[.273,-.186,.367],46:[.146,0,.306],47:[.75,.249,.55],58:[.458,0,.306],59:[.458,.106,.306],61:[.407,-.094,.856],63:[.705,0,.519],64:[.704,.011,.733],91:[.75,.25,.343],93:[.75,.25,.343],94:[.694,-.537,.55],95:[-.023,.11,.55],126:[.344,-.198,.55],305:[.458,0,.256],567:[.458,.205,.286],768:[.694,-.537,0],769:[.694,-.537,0],770:[.694,-.537,0],771:[.694,-.548,0],772:[.66,-.56,0],774:[.694,-.552,0],775:[.695,-.596,0],776:[.695,-.595,0],778:[.694,-.538,0],779:[.694,-.537,0],780:[.657,-.5,0],8211:[.327,-.24,.55],8212:[.327,-.24,1.1],8213:[.327,-.24,1.1],8215:[-.023,.11,.55],8216:[.694,-.443,.306],8217:[.694,-.442,.306],8220:[.694,-.443,.558],8221:[.694,-.442,.558],8260:[.75,.249,.55],8710:[.694,0,.917]}},5181:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.sansSerifItalic=void 0,e.sansSerifItalic={33:[.694,0,.319,{ic:.036}],34:[.694,-.471,.5],35:[.694,.194,.833,{ic:.018}],36:[.75,.056,.5,{ic:.065}],37:[.75,.056,.833],38:[.716,.022,.758],39:[.694,-.471,.278,{ic:.057}],40:[.75,.25,.389,{ic:.102}],41:[.75,.25,.389],42:[.75,-.306,.5,{ic:.068}],43:[.583,.083,.778],44:[.098,.125,.278],45:[.259,-.186,.333],46:[.098,0,.278],47:[.75,.25,.5,{ic:.1}],48:[.678,.022,.5,{ic:.049}],49:[.678,0,.5],50:[.678,0,.5,{ic:.051}],51:[.678,.022,.5,{ic:.044}],52:[.656,0,.5,{ic:.021}],53:[.656,.022,.5,{ic:.055}],54:[.678,.022,.5,{ic:.048}],55:[.656,.011,.5,{ic:.096}],56:[.678,.022,.5,{ic:.054}],57:[.677,.022,.5,{ic:.045}],58:[.444,0,.278],59:[.444,.125,.278],61:[.37,-.13,.778,{ic:.018}],63:[.704,0,.472,{ic:.064}],64:[.705,.01,.667,{ic:.04}],91:[.75,.25,.289,{ic:.136}],93:[.75,.25,.289,{ic:.064}],94:[.694,-.527,.5,{ic:.033}],95:[-.038,.114,.5,{ic:.065}],126:[.327,-.193,.5,{ic:.06}],305:[.444,0,.239,{ic:.019}],567:[.444,.204,.267,{ic:.019}],768:[.694,-.527,0],769:[.694,-.527,0,{ic:.063}],770:[.694,-.527,0,{ic:.033}],771:[.677,-.543,0,{ic:.06}],772:[.631,-.552,0,{ic:.064}],774:[.694,-.508,0,{ic:.073}],775:[.68,-.576,0],776:[.68,-.582,0,{ic:.04}],778:[.693,-.527,0],779:[.694,-.527,0,{ic:.063}],780:[.654,-.487,0,{ic:.06}],913:[.694,0,.667],914:[.694,0,.667,{ic:.029}],915:[.691,0,.542,{ic:.104}],916:[.694,0,.833],917:[.691,0,.597,{ic:.091}],918:[.694,0,.611,{ic:.091}],919:[.694,0,.708,{ic:.06}],920:[.715,.022,.778,{ic:.026}],921:[.694,0,.278,{ic:.06}],922:[.694,0,.694,{ic:.091}],923:[.694,0,.611],924:[.694,0,.875,{ic:.054}],925:[.694,0,.708,{ic:.058}],926:[.688,0,.667,{ic:.098}],927:[.716,.022,.736,{ic:.027}],928:[.691,0,.708,{ic:.06}],929:[.694,0,.639,{ic:.051}],931:[.694,0,.722,{ic:.091}],932:[.688,0,.681,{ic:.109}],933:[.716,0,.778,{ic:.065}],934:[.694,0,.722,{ic:.021}],935:[.694,0,.667,{ic:.091}],936:[.694,0,.778,{ic:.076}],937:[.716,0,.722,{ic:.047}],8211:[.312,-.236,.5,{ic:.065}],8212:[.312,-.236,1,{ic:.065}],8213:[.312,-.236,1,{ic:.065}],8215:[-.038,.114,.5,{ic:.065}],8216:[.694,-.471,.278,{ic:.058}],8217:[.694,-.471,.278,{ic:.057}],8220:[.694,-.471,.5,{ic:.114}],8221:[.694,-.471,.5],8260:[.75,.25,.5,{ic:.1}],8710:[.694,0,.833]}},3526:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.sansSerif=void 0,e.sansSerif={33:[.694,0,.319],34:[.694,-.471,.5],35:[.694,.194,.833],36:[.75,.056,.5],37:[.75,.056,.833],38:[.716,.022,.758],39:[.694,-.471,.278],40:[.75,.25,.389],41:[.75,.25,.389],42:[.75,-.306,.5],43:[.583,.082,.778],44:[.098,.125,.278],45:[.259,-.186,.333],46:[.098,0,.278],47:[.75,.25,.5],58:[.444,0,.278],59:[.444,.125,.278],61:[.37,-.13,.778],63:[.704,0,.472],64:[.704,.011,.667],91:[.75,.25,.289],93:[.75,.25,.289],94:[.694,-.527,.5],95:[-.038,.114,.5],126:[.327,-.193,.5],305:[.444,0,.239],567:[.444,.205,.267],768:[.694,-.527,0],769:[.694,-.527,0],770:[.694,-.527,0],771:[.677,-.543,0],772:[.631,-.552,0],774:[.694,-.508,0],775:[.68,-.576,0],776:[.68,-.582,0],778:[.694,-.527,0],779:[.694,-.527,0],780:[.654,-.487,0],913:[.694,0,.667],914:[.694,0,.667],915:[.691,0,.542],916:[.694,0,.833],917:[.691,0,.597],918:[.694,0,.611],919:[.694,0,.708],920:[.716,.021,.778],921:[.694,0,.278],922:[.694,0,.694],923:[.694,0,.611],924:[.694,0,.875],925:[.694,0,.708],926:[.688,0,.667],927:[.715,.022,.736],928:[.691,0,.708],929:[.694,0,.639],931:[.694,0,.722],932:[.688,0,.681],933:[.716,0,.778],934:[.694,0,.722],935:[.694,0,.667],936:[.694,0,.778],937:[.716,0,.722],8211:[.312,-.236,.5],8212:[.312,-.236,1],8213:[.312,-.236,1],8215:[-.038,.114,.5],8216:[.694,-.471,.278],8217:[.694,-.471,.278],8220:[.694,-.471,.5],8221:[.694,-.471,.5],8260:[.75,.25,.5],8710:[.694,0,.833]}},5649:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.scriptBold=void 0,e.scriptBold={}},7153:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.script=void 0,e.script={}},5745:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.smallop=void 0,e.smallop={40:[.85,.349,.458],41:[.85,.349,.458],47:[.85,.349,.578],91:[.85,.349,.417],92:[.85,.349,.578],93:[.85,.349,.417],123:[.85,.349,.583],125:[.85,.349,.583],710:[.744,-.551,.556],732:[.722,-.597,.556],770:[.744,-.551,0],771:[.722,-.597,0],8214:[.602,0,.778],8260:[.85,.349,.578],8593:[.6,0,.667],8595:[.6,0,.667],8657:[.599,0,.778],8659:[.6,0,.778],8719:[.75,.25,.944],8720:[.75,.25,.944],8721:[.75,.25,1.056],8730:[.85,.35,1,{ic:.02}],8739:[.627,.015,.333],8741:[.627,.015,.556],8747:[.805,.306,.472,{ic:.138}],8748:[.805,.306,.819,{ic:.138}],8749:[.805,.306,1.166,{ic:.138}],8750:[.805,.306,.472,{ic:.138}],8896:[.75,.249,.833],8897:[.75,.249,.833],8898:[.75,.249,.833],8899:[.75,.249,.833],8968:[.85,.349,.472],8969:[.85,.349,.472],8970:[.85,.349,.472],8971:[.85,.349,.472],9001:[.85,.35,.472],9002:[.85,.35,.472],9168:[.602,0,.667],10072:[.627,.015,.333],10216:[.85,.35,.472],10217:[.85,.35,.472],10752:[.75,.25,1.111],10753:[.75,.25,1.111],10754:[.75,.25,1.111],10756:[.75,.249,.833],10758:[.75,.249,.833],10764:[.805,.306,1.638,{ic:.138}],12296:[.85,.35,.472],12297:[.85,.35,.472]}},1411:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.texCalligraphicBold=void 0,e.texCalligraphicBold={65:[.751,.049,.921,{ic:.068,sk:.224}],66:[.705,.017,.748,{sk:.16}],67:[.703,.02,.613,{sk:.16}],68:[.686,0,.892,{sk:.0958}],69:[.703,.016,.607,{ic:.02,sk:.128}],70:[.686,.03,.814,{ic:.116,sk:.128}],71:[.703,.113,.682,{sk:.128}],72:[.686,.048,.987,{sk:.128}],73:[.686,0,.642,{ic:.104,sk:.0319}],74:[.686,.114,.779,{ic:.158,sk:.192}],75:[.703,.017,.871,{sk:.0639}],76:[.703,.017,.788,{sk:.16}],77:[.703,.049,1.378,{sk:.16}],78:[.84,.049,.937,{ic:.168,sk:.0958}],79:[.703,.017,.906,{sk:.128}],80:[.686,.067,.81,{ic:.036,sk:.0958}],81:[.703,.146,.939,{sk:.128}],82:[.686,.017,.99,{sk:.0958}],83:[.703,.016,.696,{ic:.025,sk:.16}],84:[.72,.069,.644,{ic:.303,sk:.0319}],85:[.686,.024,.715,{ic:.056,sk:.0958}],86:[.686,.077,.737,{ic:.037,sk:.0319}],87:[.686,.077,1.169,{ic:.037,sk:.0958}],88:[.686,0,.817,{ic:.089,sk:.16}],89:[.686,.164,.759,{ic:.038,sk:.0958}],90:[.686,0,.818,{ic:.035,sk:.16}],305:[.452,.008,.394,{sk:.0319}],567:[.451,.201,.439,{sk:.0958}]}},6384:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.texCalligraphic=void 0,e.texCalligraphic={65:[.728,.05,.798,{ic:.021,sk:.194}],66:[.705,.022,.657,{sk:.139}],67:[.705,.025,.527,{sk:.139}],68:[.683,0,.771,{sk:.0833}],69:[.705,.022,.528,{ic:.036,sk:.111}],70:[.683,.032,.719,{ic:.11,sk:.111}],71:[.704,.119,.595,{sk:.111}],72:[.683,.048,.845,{sk:.111}],73:[.683,0,.545,{ic:.097,sk:.0278}],74:[.683,.119,.678,{ic:.161,sk:.167}],75:[.705,.022,.762,{sk:.0556}],76:[.705,.022,.69,{sk:.139}],77:[.705,.05,1.201,{sk:.139}],78:[.789,.05,.82,{ic:.159,sk:.0833}],79:[.705,.022,.796,{sk:.111}],80:[.683,.057,.696,{ic:.037,sk:.0833}],81:[.705,.131,.817,{sk:.111}],82:[.682,.022,.848,{sk:.0833}],83:[.705,.022,.606,{ic:.036,sk:.139}],84:[.717,.068,.545,{ic:.288,sk:.0278}],85:[.683,.028,.626,{ic:.061,sk:.0833}],86:[.683,.052,.613,{ic:.045,sk:.0278}],87:[.683,.053,.988,{ic:.046,sk:.0833}],88:[.683,0,.713,{ic:.094,sk:.139}],89:[.683,.143,.668,{ic:.046,sk:.0833}],90:[.683,0,.725,{ic:.042,sk:.139}]}},6041:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.texMathit=void 0,e.texMathit={65:[.716,0,.743],66:[.683,0,.704],67:[.705,.021,.716],68:[.683,0,.755],69:[.68,0,.678],70:[.68,0,.653],71:[.705,.022,.774],72:[.683,0,.743],73:[.683,0,.386],74:[.683,.021,.525],75:[.683,0,.769],76:[.683,0,.627],77:[.683,0,.897],78:[.683,0,.743],79:[.704,.022,.767],80:[.683,0,.678],81:[.704,.194,.767],82:[.683,.022,.729],83:[.705,.022,.562],84:[.677,0,.716],85:[.683,.022,.743],86:[.683,.022,.743],87:[.683,.022,.999],88:[.683,0,.743],89:[.683,0,.743],90:[.683,0,.613],97:[.442,.011,.511],98:[.694,.011,.46],99:[.441,.01,.46],100:[.694,.011,.511],101:[.442,.01,.46],102:[.705,.204,.307],103:[.442,.205,.46],104:[.694,.011,.511],105:[.656,.01,.307],106:[.656,.204,.307],107:[.694,.011,.46],108:[.694,.011,.256],109:[.442,.011,.818],110:[.442,.011,.562],111:[.442,.011,.511],112:[.442,.194,.511],113:[.442,.194,.46],114:[.442,.011,.422],115:[.442,.011,.409],116:[.626,.011,.332],117:[.441,.011,.537],118:[.443,.01,.46],119:[.443,.011,.664],120:[.442,.011,.464],121:[.441,.205,.486],122:[.442,.011,.409]}},8199:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.texOldstyleBold=void 0,e.texOldstyleBold={48:[.46,.017,.575],49:[.461,0,.575],50:[.46,0,.575],51:[.461,.211,.575],52:[.469,.194,.575],53:[.461,.211,.575],54:[.66,.017,.575],55:[.476,.211,.575],56:[.661,.017,.575],57:[.461,.21,.575],65:[.751,.049,.921,{ic:.068,sk:.224}],66:[.705,.017,.748,{sk:.16}],67:[.703,.02,.613,{sk:.16}],68:[.686,0,.892,{sk:.0958}],69:[.703,.016,.607,{ic:.02,sk:.128}],70:[.686,.03,.814,{ic:.116,sk:.128}],71:[.703,.113,.682,{sk:.128}],72:[.686,.048,.987,{sk:.128}],73:[.686,0,.642,{ic:.104,sk:.0319}],74:[.686,.114,.779,{ic:.158,sk:.192}],75:[.703,.017,.871,{sk:.0639}],76:[.703,.017,.788,{sk:.16}],77:[.703,.049,1.378,{sk:.16}],78:[.84,.049,.937,{ic:.168,sk:.0958}],79:[.703,.017,.906,{sk:.128}],80:[.686,.067,.81,{ic:.036,sk:.0958}],81:[.703,.146,.939,{sk:.128}],82:[.686,.017,.99,{sk:.0958}],83:[.703,.016,.696,{ic:.025,sk:.16}],84:[.72,.069,.644,{ic:.303,sk:.0319}],85:[.686,.024,.715,{ic:.056,sk:.0958}],86:[.686,.077,.737,{ic:.037,sk:.0319}],87:[.686,.077,1.169,{ic:.037,sk:.0958}],88:[.686,0,.817,{ic:.089,sk:.16}],89:[.686,.164,.759,{ic:.038,sk:.0958}],90:[.686,0,.818,{ic:.035,sk:.16}]}},9848:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.texOldstyle=void 0,e.texOldstyle={48:[.452,.022,.5],49:[.453,0,.5],50:[.453,0,.5],51:[.452,.216,.5],52:[.464,.194,.5],53:[.453,.216,.5],54:[.665,.022,.5],55:[.463,.216,.5],56:[.666,.021,.5],57:[.453,.216,.5],65:[.728,.05,.798,{ic:.021,sk:.194}],66:[.705,.022,.657,{sk:.139}],67:[.705,.025,.527,{sk:.139}],68:[.683,0,.771,{sk:.0833}],69:[.705,.022,.528,{ic:.036,sk:.111}],70:[.683,.032,.719,{ic:.11,sk:.111}],71:[.704,.119,.595,{sk:.111}],72:[.683,.048,.845,{sk:.111}],73:[.683,0,.545,{ic:.097,sk:.0278}],74:[.683,.119,.678,{ic:.161,sk:.167}],75:[.705,.022,.762,{sk:.0556}],76:[.705,.022,.69,{sk:.139}],77:[.705,.05,1.201,{sk:.139}],78:[.789,.05,.82,{ic:.159,sk:.0833}],79:[.705,.022,.796,{sk:.111}],80:[.683,.057,.696,{ic:.037,sk:.0833}],81:[.705,.131,.817,{sk:.111}],82:[.682,.022,.848,{sk:.0833}],83:[.705,.022,.606,{ic:.036,sk:.139}],84:[.717,.068,.545,{ic:.288,sk:.0278}],85:[.683,.028,.626,{ic:.061,sk:.0833}],86:[.683,.052,.613,{ic:.045,sk:.0278}],87:[.683,.053,.988,{ic:.046,sk:.0833}],88:[.683,0,.713,{ic:.094,sk:.139}],89:[.683,.143,.668,{ic:.046,sk:.0833}],90:[.683,0,.725,{ic:.042,sk:.139}]}},7906:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.texSize3=void 0,e.texSize3={40:[1.45,.949,.736],41:[1.45,.949,.736],47:[1.45,.949,1.044],91:[1.45,.949,.528],92:[1.45,.949,1.044],93:[1.45,.949,.528],123:[1.45,.949,.75],125:[1.45,.949,.75],710:[.772,-.564,1.444],732:[.749,-.61,1.444],770:[.772,-.564,0],771:[.749,-.61,0],8260:[1.45,.949,1.044],8730:[1.45,.95,1,{ic:.02}],8968:[1.45,.949,.583],8969:[1.45,.949,.583],8970:[1.45,.949,.583],8971:[1.45,.949,.583],9001:[1.45,.95,.75],9002:[1.45,.949,.75],10216:[1.45,.95,.75],10217:[1.45,.949,.75],12296:[1.45,.95,.75],12297:[1.45,.949,.75]}},2644:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.texSize4=void 0,e.texSize4={40:[1.75,1.249,.792],41:[1.75,1.249,.792],47:[1.75,1.249,1.278],91:[1.75,1.249,.583],92:[1.75,1.249,1.278],93:[1.75,1.249,.583],123:[1.75,1.249,.806],125:[1.75,1.249,.806],710:[.845,-.561,1.889,{ic:.013}],732:[.823,-.583,1.889],770:[.845,-.561,0,{ic:.013}],771:[.823,-.583,0],8260:[1.75,1.249,1.278],8730:[1.75,1.25,1,{ic:.02}],8968:[1.75,1.249,.639],8969:[1.75,1.249,.639],8970:[1.75,1.249,.639],8971:[1.75,1.249,.639],9001:[1.75,1.248,.806],9002:[1.75,1.248,.806],9115:[1.154,.655,.875],9116:[.61,.01,.875],9117:[1.165,.644,.875],9118:[1.154,.655,.875],9119:[.61,.01,.875],9120:[1.165,.644,.875],9121:[1.154,.645,.667],9122:[.602,0,.667],9123:[1.155,.644,.667],9124:[1.154,.645,.667],9125:[.602,0,.667],9126:[1.155,.644,.667],9127:[.899,.01,.889],9128:[1.16,.66,.889],9129:[.01,.899,.889],9130:[.29,.015,.889],9131:[.899,.01,.889],9132:[1.16,.66,.889],9133:[.01,.899,.889],9143:[.935,.885,1.056],10216:[1.75,1.248,.806],10217:[1.75,1.248,.806],12296:[1.75,1.248,.806],12297:[1.75,1.248,.806],57344:[.625,.014,1.056],57345:[.605,.014,1.056,{ic:.02}],57680:[.12,.213,.45,{ic:.01}],57681:[.12,.213,.45,{ic:.024}],57682:[.333,0,.45,{ic:.01}],57683:[.333,0,.45,{ic:.024}],57684:[.32,.2,.4,{ic:.01}],57685:[.333,0,.9,{ic:.01}],57686:[.12,.213,.9,{ic:.01}]}},4926:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.texVariant=void 0,e.texVariant={710:[.845,-.561,2.333,{ic:.013}],732:[.899,-.628,2.333],770:[.845,-.561,0,{ic:.013}],771:[.899,-.628,0],1008:[.434,.006,.667,{ic:.067}],8463:[.695,.013,.54,{ic:.022}],8592:[.437,-.064,.5],8594:[.437,-.064,.5],8652:[.514,.014,1],8708:[.86,.166,.556],8709:[.587,0,.778],8722:[.27,-.23,.5],8726:[.43,.023,.778],8733:[.472,-.028,.778],8739:[.43,.023,.222],8740:[.43,.023,.222,{ic:.018}],8741:[.431,.023,.389],8742:[.431,.024,.389,{ic:.018}],8764:[.365,-.132,.778],8776:[.481,-.05,.778],8808:[.752,.284,.778],8809:[.752,.284,.778],8816:[.919,.421,.778],8817:[.919,.421,.778],8840:[.828,.33,.778],8841:[.828,.33,.778],8842:[.634,.255,.778],8843:[.634,.254,.778],8872:[.694,0,.611],8901:[.189,0,.278],8994:[.378,-.122,.778],8995:[.378,-.143,.778],9651:[.575,.02,.722],9661:[.576,.019,.722],10887:[.801,.303,.778],10888:[.801,.303,.778],10955:[.752,.332,.778],10956:[.752,.333,.778]}},5865:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.MJContextMenu=void 0;var a=r(5073),l=r(6186),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mathItem=null,e.annotation="",e.annotationTypes={},e}return o(e,t),e.prototype.post=function(e,r){if(this.mathItem){if(void 0!==r){var n=this.mathItem.inputJax.name,o=this.findID("Show","Original");o.content="MathML"===n?"Original MathML":n+" Commands",this.findID("Copy","Original").content=o.content;var i=this.findID("Settings","semantics");"MathML"===n?i.disable():i.enable(),this.getAnnotationMenu(),this.dynamicSubmenus()}t.prototype.post.call(this,e,r)}},e.prototype.unpost=function(){t.prototype.unpost.call(this),this.mathItem=null},e.prototype.findID=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=this,s=null;try{for(var a=i(r),c=a.next();!c.done;c=a.next()){var u=c.value;o?(s=o.find(u),o=s instanceof l.Submenu?s.submenu:null):s=null}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return s},e.prototype.getAnnotationMenu=function(){var t=this,e=this.getAnnotations(this.getSemanticNode());this.createAnnotationMenu("Show",e,(function(){return t.showAnnotation.post()})),this.createAnnotationMenu("Copy",e,(function(){return t.copyAnnotation()}))},e.prototype.getSemanticNode=function(){for(var t=this.mathItem.root;t&&!t.isKind("semantics");){if(t.isToken||1!==t.childNodes.length)return null;t=t.childNodes[0]}return t},e.prototype.getAnnotations=function(t){var e,r,n=[];if(!t)return n;try{for(var o=i(t.childNodes),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.isKind("annotation")){var l=this.annotationMatch(a);if(l){var c=a.childNodes.reduce((function(t,e){return t+e.toString()}),"");n.push([l,c])}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},e.prototype.annotationMatch=function(t){var e,r,n=t.attributes.get("encoding");try{for(var o=i(Object.keys(this.annotationTypes)),s=o.next();!s.done;s=o.next()){var a=s.value;if(this.annotationTypes[a].indexOf(n)>=0)return a}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return null},e.prototype.createAnnotationMenu=function(t,e,r){var n=this,o=this.findID(t,"Annotation");o.submenu=this.factory.get("subMenu")(this.factory,{items:e.map((function(t){var e=s(t,2),o=e[0],i=e[1];return{type:"command",id:o,content:o,action:function(){n.annotation=i,r()}}})),id:"annotations"},o),e.length?o.enable():o.disable()},e.prototype.dynamicSubmenus=function(){var t,r;try{for(var n=i(e.DynamicSubmenus),o=n.next();!o.done;o=n.next()){var a=s(o.value,2),l=a[0],c=a[1],u=this.find(l);if(u){var p=c(this,u);u.submenu=p,p.items.length?u.enable():u.disable()}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.DynamicSubmenus=new Map,e}(a.ContextMenu);e.MJContextMenu=c},8310:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Menu=void 0;var s=r(5713),a=r(4474),l=r(9515),c=r(7233),u=r(5865),p=r(473),h=r(4414),f=r(4922),d=r(6914),m=r(3463),y=r(7309),g=i(r(5445)),b=l.MathJax,v="undefined"!=typeof window&&window.navigator&&"Mac"===window.navigator.platform.substr(0,3),_=function(){function t(t,e){void 0===e&&(e={});var r=this;this.settings=null,this.defaultSettings=null,this.menu=null,this.MmlVisitor=new p.MmlVisitor,this.jax={CHTML:null,SVG:null},this.rerenderStart=a.STATE.LAST,this.about=new f.Info('<b style="font-size:120%;">MathJax</b> v'+s.mathjax.version,(function(){var t=[];return t.push("Input Jax: "+r.document.inputJax.map((function(t){return t.name})).join(", ")),t.push("Output Jax: "+r.document.outputJax.name),t.push("Document Type: "+r.document.kind),t.join("<br/>")}),'<a href="https://www.mathjax.org">www.mathjax.org</a>'),this.help=new f.Info("<b>MathJax Help</b>",(function(){return["<p><b>MathJax</b> is a JavaScript library that allows page"," authors to include mathematics within their web pages."," As a reader, you don't need to do anything to make that happen.</p>","<p><b>Browsers</b>: MathJax works with all modern browsers including"," Edge, Firefox, Chrome, Safari, Opera, and most mobile browsers.</p>","<p><b>Math Menu</b>: MathJax adds a contextual menu to equations."," Right-click or CTRL-click on any mathematics to access the menu.</p>",'<div style="margin-left: 1em;">',"<p><b>Show Math As:</b> These options allow you to view the formula's"," source markup (as MathML or in its original format).</p>","<p><b>Copy to Clipboard:</b> These options copy the formula's source markup,"," as MathML or in its original format, to the clipboard"," (in browsers that support that).</p>","<p><b>Math Settings:</b> These give you control over features of MathJax,"," such the size of the mathematics, and the mechanism used"," to display equations.</p>","<p><b>Accessibility</b>: MathJax can work with screen"," readers to make mathematics accessible to the visually impaired."," Turn on the explorer to enable generation of speech strings"," and the ability to investigate expressions interactively.</p>","<p><b>Language</b>: This menu lets you select the language used by MathJax"," for its menus and warning messages. (Not yet implemented in version 3.)</p>","</div>","<p><b>Math Zoom</b>: If you are having difficulty reading an"," equation, MathJax can enlarge it to help you see it better, or"," you can scall all the math on the page to make it larger."," Turn these features on in the <b>Math Settings</b> menu.</p>","<p><b>Preferences</b>: MathJax uses your browser's localStorage database"," to save the preferences set via this menu locally in your browser.  These"," are not used to track you, and are not transferred or used remotely by"," MathJax in any way.</p>"].join("\n")}),'<a href="https://www.mathjax.org">www.mathjax.org</a>'),this.mathmlCode=new h.SelectableInfo("MathJax MathML Expression",(function(){if(!r.menu.mathItem)return"";var t=r.toMML(r.menu.mathItem);return"<pre>"+r.formatSource(t)+"</pre>"}),""),this.originalText=new h.SelectableInfo("MathJax Original Source",(function(){if(!r.menu.mathItem)return"";var t=r.menu.mathItem.math;return'<pre style="font-size:125%; margin:0">'+r.formatSource(t)+"</pre>"}),""),this.annotationText=new h.SelectableInfo("MathJax Annotation Text",(function(){if(!r.menu.mathItem)return"";var t=r.menu.annotation;return'<pre style="font-size:125%; margin:0">'+r.formatSource(t)+"</pre>"}),""),this.zoomBox=new f.Info("MathJax Zoomed Expression",(function(){if(!r.menu.mathItem)return"";var t=r.menu.mathItem.typesetRoot.cloneNode(!0);return t.style.margin="0",'<div style="font-size: '+1.25*parseFloat(r.settings.zscale)+'%">'+t.outerHTML+"</div>"}),""),this.document=t,this.options=(0,c.userOptions)((0,c.defaultOptions)({},this.constructor.OPTIONS),e),this.initSettings(),this.mergeUserSettings(),this.initMenu(),this.applySettings()}return Object.defineProperty(t.prototype,"isLoading",{get:function(){return t.loading>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadingPromise",{get:function(){return this.isLoading?(t._loadingPromise||(t._loadingPromise=new Promise((function(e,r){t._loadingOK=e,t._loadingFailed=r}))),t._loadingPromise):Promise.resolve()},enumerable:!1,configurable:!0}),t.prototype.initSettings=function(){this.settings=this.options.settings,this.jax=this.options.jax;var t=this.document.outputJax;this.jax[t.name]=t,this.settings.renderer=t.name,b._.a11y&&b._.a11y.explorer&&Object.assign(this.settings,this.document.options.a11y),this.settings.scale=t.options.scale,this.defaultSettings=Object.assign({},this.settings)},t.prototype.initMenu=function(){var t=this,e=new d.Parser([["contextMenu",u.MJContextMenu.fromJson.bind(u.MJContextMenu)]]);this.menu=e.parse({type:"contextMenu",id:"MathJax_Menu",pool:[this.variable("texHints"),this.variable("semantics"),this.variable("zoom"),this.variable("zscale"),this.variable("renderer",(function(e){return t.setRenderer(e)})),this.variable("alt"),this.variable("cmd"),this.variable("ctrl"),this.variable("shift"),this.variable("scale",(function(e){return t.setScale(e)})),this.variable("explorer",(function(e){return t.setExplorer(e)})),this.a11yVar("highlight"),this.a11yVar("backgroundColor"),this.a11yVar("backgroundOpacity"),this.a11yVar("foregroundColor"),this.a11yVar("foregroundOpacity"),this.a11yVar("speech"),this.a11yVar("subtitles"),this.a11yVar("braille"),this.a11yVar("viewBraille"),this.a11yVar("locale",(function(t){return g.default.setupEngine({locale:t})})),this.a11yVar("speechRules",(function(e){var r=n(e.split("-"),2),o=r[0],i=r[1];t.document.options.sre.domain=o,t.document.options.sre.style=i})),this.a11yVar("magnification"),this.a11yVar("magnify"),this.a11yVar("treeColoring"),this.a11yVar("infoType"),this.a11yVar("infoRole"),this.a11yVar("infoPrefix"),this.variable("autocollapse"),this.variable("collapsible",(function(e){return t.setCollapsible(e)})),this.variable("inTabOrder",(function(e){return t.setTabOrder(e)})),this.variable("assistiveMml",(function(e){return t.setAssistiveMml(e)}))],items:[this.submenu("Show","Show Math As",[this.command("MathMLcode","MathML Code",(function(){return t.mathmlCode.post()})),this.command("Original","Original Form",(function(){return t.originalText.post()})),this.submenu("Annotation","Annotation")]),this.submenu("Copy","Copy to Clipboard",[this.command("MathMLcode","MathML Code",(function(){return t.copyMathML()})),this.command("Original","Original Form",(function(){return t.copyOriginal()})),this.submenu("Annotation","Annotation")]),this.rule(),this.submenu("Settings","Math Settings",[this.submenu("Renderer","Math Renderer",this.radioGroup("renderer",[["CHTML"],["SVG"]])),this.rule(),this.submenu("ZoomTrigger","Zoom Trigger",[this.command("ZoomNow","Zoom Once Now",(function(){return t.zoom(null,"",t.menu.mathItem)})),this.rule(),this.radioGroup("zoom",[["Click"],["DoubleClick","Double-Click"],["NoZoom","No Zoom"]]),this.rule(),this.label("TriggerRequires","Trigger Requires:"),this.checkbox(v?"Option":"Alt",v?"Option":"Alt","alt"),this.checkbox("Command","Command","cmd",{hidden:!v}),this.checkbox("Control","Control","ctrl",{hiddne:v}),this.checkbox("Shift","Shift","shift")]),this.submenu("ZoomFactor","Zoom Factor",this.radioGroup("zscale",[["150%"],["175%"],["200%"],["250%"],["300%"],["400%"]])),this.rule(),this.command("Scale","Scale All Math...",(function(){return t.scaleAllMath()})),this.rule(),this.checkbox("texHints","Add TeX hints to MathML","texHints"),this.checkbox("semantics","Add original as annotation","semantics"),this.rule(),this.command("Reset","Reset to defaults",(function(){return t.resetDefaults()}))]),this.submenu("Accessibility","Accessibility",[this.checkbox("Activate","Activate","explorer"),this.submenu("Speech","Speech",[this.checkbox("Speech","Speech Output","speech"),this.checkbox("Subtitles","Speech Subtitles","subtitles"),this.checkbox("Braille","Braille Output","braille"),this.checkbox("View Braille","Braille Subtitles","viewBraille"),this.rule(),this.submenu("A11yLanguage","Language"),this.rule(),this.submenu("Mathspeak","Mathspeak Rules",this.radioGroup("speechRules",[["mathspeak-default","Verbose"],["mathspeak-brief","Brief"],["mathspeak-sbrief","Superbrief"]])),this.submenu("Clearspeak","Clearspeak Rules",this.radioGroup("speechRules",[["clearspeak-default","Auto"]])),this.submenu("ChromeVox","ChromeVox Rules",this.radioGroup("speechRules",[["chromevox-default","Standard"],["chromevox-alternative","Alternative"]]))]),this.submenu("Highlight","Highlight",[this.submenu("Background","Background",this.radioGroup("backgroundColor",[["Blue"],["Red"],["Green"],["Yellow"],["Cyan"],["Magenta"],["White"],["Black"]])),{type:"slider",variable:"backgroundOpacity",content:" "},this.submenu("Foreground","Foreground",this.radioGroup("foregroundColor",[["Black"],["White"],["Magenta"],["Cyan"],["Yellow"],["Green"],["Red"],["Blue"]])),{type:"slider",variable:"foregroundOpacity",content:" "},this.rule(),this.radioGroup("highlight",[["None"],["Hover"],["Flame"]]),this.rule(),this.checkbox("TreeColoring","Tree Coloring","treeColoring")]),this.submenu("Magnification","Magnification",[this.radioGroup("magnification",[["None"],["Keyboard"],["Mouse"]]),this.rule(),this.radioGroup("magnify",[["200%"],["300%"],["400%"],["500%"]])]),this.submenu("Semantic Info","Semantic Info",[this.checkbox("Type","Type","infoType"),this.checkbox("Role","Role","infoRole"),this.checkbox("Prefix","Prefix","infoPrefix")],!0),this.rule(),this.checkbox("Collapsible","Collapsible Math","collapsible"),this.checkbox("AutoCollapse","Auto Collapse","autocollapse",{disabled:!0}),this.rule(),this.checkbox("InTabOrder","Include in Tab Order","inTabOrder"),this.checkbox("AssistiveMml","Include Hidden MathML","assistiveMml")]),this.submenu("Language","Language"),this.rule(),this.command("About","About MathJax",(function(){return t.about.post()})),this.command("Help","MathJax Help",(function(){return t.help.post()}))]});var r=this.menu;this.about.attachMenu(r),this.help.attachMenu(r),this.originalText.attachMenu(r),this.annotationText.attachMenu(r),this.mathmlCode.attachMenu(r),this.zoomBox.attachMenu(r),this.checkLoadableItems(),this.enableExplorerItems(this.settings.explorer),r.showAnnotation=this.annotationText,r.copyAnnotation=this.copyAnnotation.bind(this),r.annotationTypes=this.options.annotationTypes,y.CssStyles.addInfoStyles(this.document.document),y.CssStyles.addMenuStyles(this.document.document)},t.prototype.checkLoadableItems=function(){var t,e;if(b&&b._&&b.loader&&b.startup)!this.settings.collapsible||b._.a11y&&b._.a11y.complexity||this.loadA11y("complexity"),!this.settings.explorer||b._.a11y&&b._.a11y.explorer||this.loadA11y("explorer"),!this.settings.assistiveMml||b._.a11y&&b._.a11y["assistive-mml"]||this.loadA11y("assistive-mml");else{var r=this.menu;try{for(var n=o(Object.keys(this.jax)),i=n.next();!i.done;i=n.next()){var s=i.value;this.jax[s]||r.findID("Settings","Renderer",s).disable()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}r.findID("Accessibility","Activate").disable(),r.findID("Accessibility","AutoCollapse").disable(),r.findID("Accessibility","Collapsible").disable()}},t.prototype.enableExplorerItems=function(t){var e,r,n=this.menu.findID("Accessibility","Activate").menu;try{for(var i=o(n.items.slice(1)),s=i.next();!s.done;s=i.next()){var a=s.value;if(a instanceof m.Rule)break;t?a.enable():a.disable()}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.mergeUserSettings=function(){try{var e=localStorage.getItem(t.MENU_STORAGE);if(!e)return;Object.assign(this.settings,JSON.parse(e)),this.setA11y(this.settings)}catch(t){console.log("MathJax localStorage error: "+t.message)}},t.prototype.saveUserSettings=function(){var e,r,n={};try{for(var i=o(Object.keys(this.settings)),s=i.next();!s.done;s=i.next()){var a=s.value;this.settings[a]!==this.defaultSettings[a]&&(n[a]=this.settings[a])}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}try{Object.keys(n).length?localStorage.setItem(t.MENU_STORAGE,JSON.stringify(n)):localStorage.removeItem(t.MENU_STORAGE)}catch(t){console.log("MathJax localStorage error: "+t.message)}},t.prototype.setA11y=function(t){b._.a11y&&b._.a11y.explorer&&b._.a11y.explorer_ts.setA11yOptions(this.document,t)},t.prototype.getA11y=function(t){if(b._.a11y&&b._.a11y.explorer)return void 0!==this.document.options.a11y[t]?this.document.options.a11y[t]:this.document.options.sre[t]},t.prototype.applySettings=function(){this.setTabOrder(this.settings.inTabOrder),this.document.options.enableAssistiveMml=this.settings.assistiveMml,this.document.outputJax.options.scale=parseFloat(this.settings.scale),this.settings.renderer!==this.defaultSettings.renderer&&this.setRenderer(this.settings.renderer)},t.prototype.setScale=function(t){this.document.outputJax.options.scale=parseFloat(t),this.document.rerender()},t.prototype.setRenderer=function(t){var e=this;if(this.jax[t])this.setOutputJax(t);else{var r=t.toLowerCase();this.loadComponent("output/"+r,(function(){var n=b.startup;r in n.constructors&&(n.useOutput(r,!0),n.output=n.getOutputJax(),e.jax[t]=n.output,e.setOutputJax(t))}))}},t.prototype.setOutputJax=function(t){this.jax[t].setAdaptor(this.document.adaptor),this.document.outputJax=this.jax[t],this.rerender()},t.prototype.setTabOrder=function(t){this.menu.store.inTaborder(t)},t.prototype.setAssistiveMml=function(t){this.document.options.enableAssistiveMml=t,!t||b._.a11y&&b._.a11y["assistive-mml"]?this.rerender():this.loadA11y("assistive-mml")},t.prototype.setExplorer=function(t){this.enableExplorerItems(t),this.document.options.enableExplorer=t,!t||b._.a11y&&b._.a11y.explorer?this.rerender(this.settings.collapsible?a.STATE.RERENDER:a.STATE.COMPILED):this.loadA11y("explorer")},t.prototype.setCollapsible=function(t){this.document.options.enableComplexity=t,!t||b._.a11y&&b._.a11y.complexity?this.rerender(a.STATE.COMPILED):this.loadA11y("complexity")},t.prototype.scaleAllMath=function(){var t=(100*parseFloat(this.settings.scale)).toFixed(1).replace(/.0$/,""),e=prompt("Scale all mathematics (compared to surrounding text) by",t+"%");if(e)if(e.match(/^\s*\d+(\.\d*)?\s*%?\s*$/)){var r=parseFloat(e)/100;r?this.menu.pool.lookup("scale").setValue(String(r)):alert("The scale should not be zero")}else alert("The scale should be a percentage (e.g., 120%)")},t.prototype.resetDefaults=function(){var e,r;t.loading++;var n=this.menu.pool,i=this.defaultSettings;try{for(var s=o(Object.keys(this.settings)),l=s.next();!l.done;l=s.next()){var c=l.value,u=n.lookup(c);if(u){u.setValue(i[c]);var p=u.items[0];p&&p.executeCallbacks_()}else this.settings[c]=i[c]}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}t.loading--,this.rerender(a.STATE.COMPILED)},t.prototype.checkComponent=function(e){var r=t.loadingPromises.get(e);r&&s.mathjax.retryAfter(r)},t.prototype.loadComponent=function(e,r){if(!t.loadingPromises.has(e)){var n=b.loader;if(n){t.loading++;var o=n.load(e).then((function(){t.loading--,t.loadingPromises.delete(e),r(),0===t.loading&&t._loadingPromise&&(t._loadingPromise=null,t._loadingOK())})).catch((function(e){t._loadingPromise?(t._loadingPromise=null,t._loadingFailed(e)):console.log(e)}));t.loadingPromises.set(e,o)}}},t.prototype.loadA11y=function(e){var r=this,n=!a.STATE.ENRICHED;this.loadComponent("a11y/"+e,(function(){var o=b.startup;s.mathjax.handlers.unregister(o.handler),o.handler=o.getHandler(),s.mathjax.handlers.register(o.handler);var i=r.document;r.document=o.document=o.getDocument(),r.document.menu=r,r.document.outputJax.reset(),r.transferMathList(i),r.document.processed=i.processed,t._loadingPromise||(r.document.outputJax.reset(),r.rerender("complexity"===e||n?a.STATE.COMPILED:a.STATE.TYPESET))}))},t.prototype.transferMathList=function(t){var e,r,n=this.document.options.MathItem;try{for(var i=o(t.math),s=i.next();!s.done;s=i.next()){var a=s.value,l=new n;Object.assign(l,a),this.document.math.push(l)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.formatSource=function(t){return t.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.prototype.toMML=function(t){return this.MmlVisitor.visitTree(t.root,t,{texHints:this.settings.texHints,semantics:this.settings.semantics&&"MathML"!==t.inputJax.name})},t.prototype.zoom=function(t,e,r){t&&!this.isZoomEvent(t,e)||(this.menu.mathItem=r,t&&this.menu.post(t),this.zoomBox.post())},t.prototype.isZoomEvent=function(t,e){return this.settings.zoom===e&&(!this.settings.alt||t.altKey)&&(!this.settings.ctrl||t.ctrlKey)&&(!this.settings.cmd||t.metaKey)&&(!this.settings.shift||t.shiftKey)},t.prototype.rerender=function(e){void 0===e&&(e=a.STATE.TYPESET),this.rerenderStart=Math.min(e,this.rerenderStart),t.loading||(this.rerenderStart<=a.STATE.COMPILED&&this.document.reset({inputJax:[]}),this.document.rerender(this.rerenderStart),this.rerenderStart=a.STATE.LAST)},t.prototype.copyMathML=function(){this.copyToClipboard(this.toMML(this.menu.mathItem))},t.prototype.copyOriginal=function(){this.copyToClipboard(this.menu.mathItem.math.trim())},t.prototype.copyAnnotation=function(){this.copyToClipboard(this.menu.annotation.trim())},t.prototype.copyToClipboard=function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.cssText="height: 1px; width: 1px; padding: 1px; position: absolute; left: -10px",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(t){alert("Can't copy to clipboard: "+t.message)}document.body.removeChild(e)},t.prototype.addMenu=function(t){var e=this,r=t.typesetRoot;r.addEventListener("contextmenu",(function(){return e.menu.mathItem=t}),!0),r.addEventListener("keydown",(function(){return e.menu.mathItem=t}),!0),r.addEventListener("click",(function(r){return e.zoom(r,"Click",t)}),!0),r.addEventListener("dblclick",(function(r){return e.zoom(r,"DoubleClick",t)}),!0),this.menu.store.insert(r)},t.prototype.clear=function(){this.menu.store.clear()},t.prototype.variable=function(t,e){var r=this;return{name:t,getter:function(){return r.settings[t]},setter:function(n){r.settings[t]=n,e&&e(n),r.saveUserSettings()}}},t.prototype.a11yVar=function(t,e){var r=this;return{name:t,getter:function(){return r.getA11y(t)},setter:function(n){r.settings[t]=n;var o={};o[t]=n,r.setA11y(o),e&&e(n),r.saveUserSettings()}}},t.prototype.submenu=function(t,e,r,n){var i,s;void 0===r&&(r=[]),void 0===n&&(n=!1);var a=[];try{for(var l=o(r),c=l.next();!c.done;c=l.next()){var u=c.value;Array.isArray(u)?a=a.concat(u):a.push(u)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return{type:"submenu",id:t,content:e,menu:{items:a},disabled:0===a.length||n}},t.prototype.command=function(t,e,r,n){return void 0===n&&(n={}),Object.assign({type:"command",id:t,content:e,action:r},n)},t.prototype.checkbox=function(t,e,r,n){return void 0===n&&(n={}),Object.assign({type:"checkbox",id:t,content:e,variable:r},n)},t.prototype.radioGroup=function(t,e){var r=this;return e.map((function(e){return r.radio(e[0],e[1]||e[0],t)}))},t.prototype.radio=function(t,e,r,n){return void 0===n&&(n={}),Object.assign({type:"radio",id:t,content:e,variable:r},n)},t.prototype.label=function(t,e){return{type:"label",id:t,content:e}},t.prototype.rule=function(){return{type:"rule"}},t.MENU_STORAGE="MathJax-Menu-Settings",t.OPTIONS={settings:{texHints:!0,semantics:!1,zoom:"NoZoom",zscale:"200%",renderer:"CHTML",alt:!1,cmd:!1,ctrl:!1,shift:!1,scale:1,autocollapse:!1,collapsible:!1,inTabOrder:!0,assistiveMml:!0,explorer:!1},jax:{CHTML:null,SVG:null},annotationTypes:(0,c.expandable)({TeX:["TeX","LaTeX","application/x-tex"],StarMath:["StarMath 5.0"],Maple:["Maple"],ContentMathML:["MathML-Content","application/mathml-content+xml"],OpenMath:["OpenMath"]})},t.loading=0,t.loadingPromises=new Map,t._loadingPromise=null,t._loadingOK=null,t._loadingFailed=null,t}();e.Menu=_},4001:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuHandler=e.MenuMathDocumentMixin=e.MenuMathItemMixin=void 0;var c=r(5713),u=r(4474),p=r(7233),h=r(8310);function f(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.addMenu=function(t,e){void 0===e&&(e=!1),this.state()>=u.STATE.CONTEXT_MENU||(this.isEscaped||!t.options.enableMenu&&!e||t.menu.addMenu(this),this.state(u.STATE.CONTEXT_MENU))},e.prototype.checkLoading=function(t){t.checkLoading()},e}(t)}function d(t){var e;return e=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,a([],s(e),!1))||this;n.menu=new n.options.MenuClass(n,n.options.menuOptions);var o=n.constructor.ProcessBits;return o.has("context-menu")||o.allocate("context-menu"),n.options.MathItem=f(n.options.MathItem),n}return o(e,t),e.prototype.addMenu=function(){var t,e;if(!this.processed.isSet("context-menu")){try{for(var r=l(this.math),n=r.next();!n.done;n=r.next()){n.value.addMenu(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.processed.set("context-menu")}return this},e.prototype.checkLoading=function(){this.menu.isLoading&&c.mathjax.retryAfter(this.menu.loadingPromise.catch((function(t){return console.log(t)})));var t=this.menu.settings;return t.collapsible&&(this.options.enableComplexity=!0,this.menu.checkComponent("a11y/complexity")),t.explorer&&(this.options.enableEnrichment=!0,this.options.enableExplorer=!0,this.menu.checkComponent("a11y/explorer")),this},e.prototype.state=function(e,r){return void 0===r&&(r=!1),t.prototype.state.call(this,e,r),e<u.STATE.CONTEXT_MENU&&this.processed.clear("context-menu"),this},e.prototype.updateDocument=function(){return t.prototype.updateDocument.call(this),this.menu.menu.store.sort(),this},e}(t),e.OPTIONS=i(i({enableEnrichment:!0,enableComplexity:!0,enableExplorer:!0,enrichSpeech:"none",enrichError:function(t,e,r){return console.warn("Enrichment Error:",r)}},t.OPTIONS),{MenuClass:h.Menu,menuOptions:h.Menu.OPTIONS,enableMenu:!0,sre:t.OPTIONS.sre||(0,p.expandable)({}),a11y:t.OPTIONS.a11y||(0,p.expandable)({}),renderActions:(0,p.expandable)(i(i({},t.OPTIONS.renderActions),{addMenu:[u.STATE.CONTEXT_MENU],checkLoading:[u.STATE.UNPROCESSED+1]}))}),e}(0,u.newState)("CONTEXT_MENU",170),e.MenuMathItemMixin=f,e.MenuMathDocumentMixin=d,e.MenuHandler=function(t){return t.documentClass=d(t.documentClass),t}},473:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MmlVisitor=void 0;var i=r(9259),s=r(7233),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.options={texHints:!0,semantics:!1},e.mathItem=null,e}return o(e,t),e.prototype.visitTree=function(t,e,r){return void 0===e&&(e=null),void 0===r&&(r={}),this.mathItem=e,(0,s.userOptions)(this.options,r),this.visitNode(t,"")},e.prototype.visitTeXAtomNode=function(e,r){return this.options.texHints?t.prototype.visitTeXAtomNode.call(this,e,r):e.childNodes[0]&&1===e.childNodes[0].childNodes.length?this.visitNode(e.childNodes[0],r):r+"<mrow"+this.getAttributes(e)+">\n"+this.childNodeMml(e,r+"  ","\n")+r+"</mrow>"},e.prototype.visitMathNode=function(e,r){if(!this.options.semantics||"TeX"!==this.mathItem.inputJax.name)return t.prototype.visitDefault.call(this,e,r);var n=e.childNodes.length&&e.childNodes[0].childNodes.length>1;return r+"<math"+this.getAttributes(e)+">\n"+r+"  <semantics>\n"+(n?r+"    <mrow>\n":"")+this.childNodeMml(e,r+(n?"      ":"    "),"\n")+(n?r+"    </mrow>\n":"")+r+'    <annotation encoding="application/x-tex">'+this.mathItem.math+"</annotation>\n"+r+"  </semantics>\n"+r+"</math>"},e}(i.SerializedMmlVisitor);e.MmlVisitor=a},4414:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SelectableInfo=void 0;var i=r(4922),s=r(2165),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.addEvents=function(t){var e=this;t.addEventListener("keypress",(function(t){"a"===t.key&&(t.ctrlKey||t.metaKey)&&(e.selectAll(),e.stop(t))}))},e.prototype.selectAll=function(){document.getSelection().selectAllChildren(this.html.querySelector("pre"))},e.prototype.copyToClipboard=function(){this.selectAll();try{document.execCommand("copy")}catch(t){alert("Can't copy to clipboard: "+t.message)}document.getSelection().removeAllRanges()},e.prototype.generateHtml=function(){var e=this;t.prototype.generateHtml.call(this);var r=this.html.querySelector("span."+s.HtmlClasses.INFOSIGNATURE).appendChild(document.createElement("input"));r.type="button",r.value="Copy to Clipboard",r.addEventListener("click",(function(t){return e.copyToClipboard()}))},e}(i.Info);e.SelectableInfo=a},9923:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.asyncLoad=void 0;var n=r(5713);e.asyncLoad=function(t){return n.mathjax.asyncLoad?new Promise((function(e,r){var o=n.mathjax.asyncLoad(t);o instanceof Promise?o.then((function(t){return e(t)})).catch((function(t){return r(t)})):e(o)})):Promise.reject("Can't load '".concat(t,"': No asyncLoad method specified"))}},6469:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.BBox=void 0;var n=r(6010),o=function(){function t(t){void 0===t&&(t={w:0,h:-n.BIGDIMEN,d:-n.BIGDIMEN}),this.w=t.w||0,this.h="h"in t?t.h:-n.BIGDIMEN,this.d="d"in t?t.d:-n.BIGDIMEN,this.L=this.R=this.ic=this.sk=this.dx=0,this.scale=this.rscale=1,this.pwidth=""}return t.zero=function(){return new t({h:0,d:0,w:0})},t.empty=function(){return new t},t.prototype.empty=function(){return this.w=0,this.h=this.d=-n.BIGDIMEN,this},t.prototype.clean=function(){this.w===-n.BIGDIMEN&&(this.w=0),this.h===-n.BIGDIMEN&&(this.h=0),this.d===-n.BIGDIMEN&&(this.d=0)},t.prototype.rescale=function(t){this.w*=t,this.h*=t,this.d*=t},t.prototype.combine=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0);var n=t.rscale,o=e+n*(t.w+t.L+t.R),i=r+n*t.h,s=n*t.d-r;o>this.w&&(this.w=o),i>this.h&&(this.h=i),s>this.d&&(this.d=s)},t.prototype.append=function(t){var e=t.rscale;this.w+=e*(t.w+t.L+t.R),e*t.h>this.h&&(this.h=e*t.h),e*t.d>this.d&&(this.d=e*t.d)},t.prototype.updateFrom=function(t){this.h=t.h,this.d=t.d,this.w=t.w,t.pwidth&&(this.pwidth=t.pwidth)},t.fullWidth="100%",t.StyleAdjust=[["borderTopWidth","h"],["borderRightWidth","w"],["borderBottomWidth","d"],["borderLeftWidth","w",0],["paddingTop","h"],["paddingRight","w"],["paddingBottom","d"],["paddingLeft","w",0]],t}();e.BBox=o},6751:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.BitFieldClass=e.BitField=void 0;var a=function(){function t(){this.bits=0}return t.allocate=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var s=o(n),a=s.next();!a.done;a=s.next()){var l=a.value;if(this.has(l))throw new Error("Bit already allocated for "+l);if(this.next===t.MAXBIT)throw new Error("Maximum number of bits already allocated");this.names.set(l,this.next),this.next<<=1}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}},t.has=function(t){return this.names.has(t)},t.prototype.set=function(t){this.bits|=this.getBit(t)},t.prototype.clear=function(t){this.bits&=~this.getBit(t)},t.prototype.isSet=function(t){return!!(this.bits&this.getBit(t))},t.prototype.reset=function(){this.bits=0},t.prototype.getBit=function(t){var e=this.constructor.names.get(t);if(!e)throw new Error("Unknown bit-field name: "+t);return e},t.MAXBIT=1<<31,t.next=1,t.names=new Map,t}();e.BitField=a,e.BitFieldClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(a);return r.allocate.apply(r,s([],i(t),!1)),r}},5368:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.numeric=e.translate=e.remove=e.add=e.entities=e.options=void 0;var n=r(4542),o=r(9923);e.options={loadMissingEntities:!0},e.entities={ApplyFunction:"\u2061",Backslash:"\u2216",Because:"\u2235",Breve:"\u02d8",Cap:"\u22d2",CenterDot:"\xb7",CircleDot:"\u2299",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",Congruent:"\u2261",ContourIntegral:"\u222e",Coproduct:"\u2210",Cross:"\u2a2f",Cup:"\u22d3",CupCap:"\u224d",Dagger:"\u2021",Del:"\u2207",Delta:"\u0394",Diamond:"\u22c4",DifferentialD:"\u2146",DotEqual:"\u2250",DoubleDot:"\xa8",DoubleRightTee:"\u22a8",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",DownLeftVector:"\u21bd",DownRightVector:"\u21c1",DownTee:"\u22a4",Downarrow:"\u21d3",Element:"\u2208",EqualTilde:"\u2242",Equilibrium:"\u21cc",Exists:"\u2203",ExponentialE:"\u2147",FilledVerySmallSquare:"\u25aa",ForAll:"\u2200",Gamma:"\u0393",Gg:"\u22d9",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Hacek:"\u02c7",Hat:"^",HumpDownHump:"\u224e",HumpEqual:"\u224f",Im:"\u2111",ImaginaryI:"\u2148",Integral:"\u222b",Intersection:"\u22c2",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",Lambda:"\u039b",Larr:"\u219e",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",LeftArrowRightArrow:"\u21c6",LeftCeiling:"\u2308",LeftDownVector:"\u21c3",LeftFloor:"\u230a",LeftRightArrow:"\u2194",LeftTee:"\u22a3",LeftTriangle:"\u22b2",LeftTriangleEqual:"\u22b4",LeftUpVector:"\u21bf",LeftVector:"\u21bc",Leftarrow:"\u21d0",Leftrightarrow:"\u21d4",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",Ll:"\u22d8",Lleftarrow:"\u21da",LongLeftArrow:"\u27f5",LongLeftRightArrow:"\u27f7",LongRightArrow:"\u27f6",Longleftarrow:"\u27f8",Longleftrightarrow:"\u27fa",Longrightarrow:"\u27f9",Lsh:"\u21b0",MinusPlus:"\u2213",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotLeftTriangle:"\u22ea",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotPrecedes:"\u2280",NotPrecedesSlantEqual:"\u22e0",NotRightTriangle:"\u22eb",NotRightTriangleEqual:"\u22ed",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsSlantEqual:"\u22e1",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotVerticalBar:"\u2224",Omega:"\u03a9",OverBar:"\u203e",OverBrace:"\u23de",PartialD:"\u2202",Phi:"\u03a6",Pi:"\u03a0",PlusMinus:"\xb1",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",Product:"\u220f",Proportional:"\u221d",Psi:"\u03a8",Rarr:"\u21a0",Re:"\u211c",ReverseEquilibrium:"\u21cb",RightAngleBracket:"\u27e9",RightArrow:"\u2192",RightArrowLeftArrow:"\u21c4",RightCeiling:"\u2309",RightDownVector:"\u21c2",RightFloor:"\u230b",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTriangle:"\u22b3",RightTriangleEqual:"\u22b5",RightUpVector:"\u21be",RightVector:"\u21c0",Rightarrow:"\u21d2",Rrightarrow:"\u21db",Rsh:"\u21b1",Sigma:"\u03a3",SmallCircle:"\u2218",Sqrt:"\u221a",Square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",Star:"\u22c6",Subset:"\u22d0",SubsetEqual:"\u2286",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",SuchThat:"\u220b",Sum:"\u2211",Superset:"\u2283",SupersetEqual:"\u2287",Supset:"\u22d1",Therefore:"\u2234",Theta:"\u0398",Tilde:"\u223c",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",UnderBar:"_",UnderBrace:"\u23df",Union:"\u22c3",UnionPlus:"\u228e",UpArrow:"\u2191",UpDownArrow:"\u2195",UpTee:"\u22a5",Uparrow:"\u21d1",Updownarrow:"\u21d5",Upsilon:"\u03a5",Vdash:"\u22a9",Vee:"\u22c1",VerticalBar:"\u2223",VerticalTilde:"\u2240",Vvdash:"\u22aa",Wedge:"\u22c0",Xi:"\u039e",amp:"&",acute:"\xb4",aleph:"\u2135",alpha:"\u03b1",amalg:"\u2a3f",and:"\u2227",ang:"\u2220",angmsd:"\u2221",angsph:"\u2222",ape:"\u224a",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",beta:"\u03b2",beth:"\u2136",between:"\u226c",bigcirc:"\u25ef",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",blacklozenge:"\u29eb",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",bowtie:"\u22c8",boxdl:"\u2510",boxdr:"\u250c",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxul:"\u2518",boxur:"\u2514",bsol:"\\",bull:"\u2022",cap:"\u2229",check:"\u2713",chi:"\u03c7",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledR:"\xae",circledS:"\u24c8",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",clubs:"\u2663",colon:":",comp:"\u2201",ctdot:"\u22ef",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cup:"\u222a",curarr:"\u21b7",curlyvee:"\u22ce",curlywedge:"\u22cf",dagger:"\u2020",daleth:"\u2138",ddarr:"\u21ca",deg:"\xb0",delta:"\u03b4",digamma:"\u03dd",div:"\xf7",divideontimes:"\u22c7",dot:"\u02d9",doteqdot:"\u2251",dotplus:"\u2214",dotsquare:"\u22a1",dtdot:"\u22f1",ecir:"\u2256",efDot:"\u2252",egs:"\u2a96",ell:"\u2113",els:"\u2a95",empty:"\u2205",epsi:"\u03b5",epsiv:"\u03f5",erDot:"\u2253",eta:"\u03b7",eth:"\xf0",flat:"\u266d",fork:"\u22d4",frown:"\u2322",gEl:"\u2a8c",gamma:"\u03b3",gap:"\u2a86",gimel:"\u2137",gnE:"\u2269",gnap:"\u2a8a",gne:"\u2a88",gnsim:"\u22e7",gt:">",gtdot:"\u22d7",harrw:"\u21ad",hbar:"\u210f",hellip:"\u2026",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",imath:"\u0131",infin:"\u221e",intcal:"\u22ba",iota:"\u03b9",jmath:"\u0237",kappa:"\u03ba",kappav:"\u03f0",lEg:"\u2a8b",lambda:"\u03bb",lap:"\u2a85",larrlp:"\u21ab",larrtl:"\u21a2",lbrace:"{",lbrack:"[",le:"\u2264",leftleftarrows:"\u21c7",leftthreetimes:"\u22cb",lessdot:"\u22d6",lmoust:"\u23b0",lnE:"\u2268",lnap:"\u2a89",lne:"\u2a87",lnsim:"\u22e6",longmapsto:"\u27fc",looparrowright:"\u21ac",lowast:"\u2217",loz:"\u25ca",lt:"<",ltimes:"\u22c9",ltri:"\u25c3",macr:"\xaf",malt:"\u2720",mho:"\u2127",mu:"\u03bc",multimap:"\u22b8",nLeftarrow:"\u21cd",nLeftrightarrow:"\u21ce",nRightarrow:"\u21cf",nVDash:"\u22af",nVdash:"\u22ae",natur:"\u266e",nearr:"\u2197",nharr:"\u21ae",nlarr:"\u219a",not:"\xac",nrarr:"\u219b",nu:"\u03bd",nvDash:"\u22ad",nvdash:"\u22ac",nwarr:"\u2196",omega:"\u03c9",omicron:"\u03bf",or:"\u2228",osol:"\u2298",period:".",phi:"\u03c6",phiv:"\u03d5",pi:"\u03c0",piv:"\u03d6",prap:"\u2ab7",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",prime:"\u2032",psi:"\u03c8",quot:'"',rarrtl:"\u21a3",rbrace:"}",rbrack:"]",rho:"\u03c1",rhov:"\u03f1",rightrightarrows:"\u21c9",rightthreetimes:"\u22cc",ring:"\u02da",rmoust:"\u23b1",rtimes:"\u22ca",rtri:"\u25b9",scap:"\u2ab8",scnE:"\u2ab6",scnap:"\u2aba",scnsim:"\u22e9",sdot:"\u22c5",searr:"\u2198",sect:"\xa7",sharp:"\u266f",sigma:"\u03c3",sigmav:"\u03c2",simne:"\u2246",smile:"\u2323",spades:"\u2660",sub:"\u2282",subE:"\u2ac5",subnE:"\u2acb",subne:"\u228a",supE:"\u2ac6",supnE:"\u2acc",supne:"\u228b",swarr:"\u2199",tau:"\u03c4",theta:"\u03b8",thetav:"\u03d1",tilde:"\u02dc",times:"\xd7",triangle:"\u25b5",triangleq:"\u225c",upsi:"\u03c5",upuparrows:"\u21c8",veebar:"\u22bb",vellip:"\u22ee",weierp:"\u2118",xi:"\u03be",yen:"\xa5",zeta:"\u03b6",zigrarr:"\u21dd",nbsp:"\xa0",rsquo:"\u2019",lsquo:"\u2018"};var i={};function s(t,r){if("#"===r.charAt(0))return a(r.slice(1));if(e.entities[r])return e.entities[r];if(e.options.loadMissingEntities){var s=r.match(/^[a-zA-Z](fr|scr|opf)$/)?RegExp.$1:r.charAt(0).toLowerCase();i[s]||(i[s]=!0,(0,n.retryAfter)((0,o.asyncLoad)("./util/entities/"+s+".js")))}return t}function a(t){var e="x"===t.charAt(0)?parseInt(t.slice(1),16):parseInt(t);return String.fromCodePoint(e)}e.add=function(t,r){Object.assign(e.entities,t),i[r]=!0},e.remove=function(t){delete e.entities[t]},e.translate=function(t){return t.replace(/&([a-z][a-z0-9]*|#(?:[0-9]+|x[0-9a-f]+));/gi,s)},e.numeric=a},7525:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionList=void 0;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.execute=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=i(this),l=o.next();!l.done;l=o.next()){var c=l.value,u=c.item.apply(c,a([],s(r),!1));if(!1===u)return!1}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return!0},e.prototype.asyncExecute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=-1,n=this.items;return new Promise((function(e,o){!function i(){for(var l;++r<n.length;){var c=(l=n[r]).item.apply(l,a([],s(t),!1));if(c instanceof Promise)return void c.then(i).catch((function(t){return o(t)}));if(!1===c)return void e(!1)}e(!0)}()}))},e}(r(8666).PrioritizedList);e.FunctionList=l},103:function(t,e){var r=this&&this.__generator||function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedList=e.ListItem=e.END=void 0,e.END=Symbol();var s=function(t){void 0===t&&(t=null),this.next=null,this.prev=null,this.data=t};e.ListItem=s;var a=function(){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.list=new s(e.END),this.list.next=this.list.prev=this.list,this.push.apply(this,o([],n(t),!1))}return t.prototype.isBefore=function(t,e){return t<e},t.prototype.push=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=i(r),a=o.next();!a.done;a=o.next()){var l=a.value,c=new s(l);c.next=this.list,c.prev=this.list.prev,this.list.prev=c,c.prev.next=c}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return this},t.prototype.pop=function(){var t=this.list.prev;return t.data===e.END?null:(this.list.prev=t.prev,t.prev.next=this.list,t.next=t.prev=null,t.data)},t.prototype.unshift=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=i(r.slice(0).reverse()),a=o.next();!a.done;a=o.next()){var l=a.value,c=new s(l);c.next=this.list.next,c.prev=this.list,this.list.next=c,c.next.prev=c}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return this},t.prototype.shift=function(){var t=this.list.next;return t.data===e.END?null:(this.list.next=t.next,t.next.prev=this.list,t.next=t.prev=null,t.data)},t.prototype.remove=function(){for(var t,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var s=new Map;try{for(var a=i(n),l=a.next();!l.done;l=a.next()){var c=l.value;s.set(c,!0)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}for(var u=this.list.next;u.data!==e.END;){var p=u.next;s.has(u.data)&&(u.prev.next=u.next,u.next.prev=u.prev,u.next=u.prev=null),u=p}},t.prototype.clear=function(){return this.list.next.prev=this.list.prev.next=null,this.list.next=this.list.prev=this.list,this},t.prototype[Symbol.iterator]=function(){var t;return r(this,(function(r){switch(r.label){case 0:t=this.list.next,r.label=1;case 1:return t.data===e.END?[3,3]:[4,t.data];case 2:return r.sent(),t=t.next,[3,1];case 3:return[2]}}))},t.prototype.reversed=function(){var t;return r(this,(function(r){switch(r.label){case 0:t=this.list.prev,r.label=1;case 1:return t.data===e.END?[3,3]:[4,t.data];case 2:return r.sent(),t=t.prev,[3,1];case 3:return[2]}}))},t.prototype.insert=function(t,r){void 0===r&&(r=null),null===r&&(r=this.isBefore.bind(this));for(var n=new s(t),o=this.list.next;o.data!==e.END&&r(o.data,n.data);)o=o.next;return n.prev=o.prev,n.next=o,o.prev.next=o.prev=n,this},t.prototype.sort=function(e){var r,n;void 0===e&&(e=null),null===e&&(e=this.isBefore.bind(this));var o=[];try{for(var s=i(this),a=s.next();!a.done;a=s.next()){var l=a.value;o.push(new t(l))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(this.list.next=this.list.prev=this.list;o.length>1;){var c=o.shift(),u=o.shift();c.merge(u,e),o.push(c)}return o.length&&(this.list=o[0].list),this},t.prototype.merge=function(t,r){var o,i,s,a,l;void 0===r&&(r=null),null===r&&(r=this.isBefore.bind(this));for(var c=this.list.next,u=t.list.next;c.data!==e.END&&u.data!==e.END;)r(u.data,c.data)?(o=n([c,u],2),u.prev.next=o[0],c.prev.next=o[1],i=n([c.prev,u.prev],2),u.prev=i[0],c.prev=i[1],s=n([t.list,this.list],2),this.list.prev.next=s[0],t.list.prev.next=s[1],a=n([t.list.prev,this.list.prev],2),this.list.prev=a[0],t.list.prev=a[1],c=(l=n([u.next,c],2))[0],u=l[1]):c=c.next;return u.data!==e.END&&(this.list.prev.next=t.list.next,t.list.next.prev=this.list.prev,t.list.prev.next=this.list,this.list.prev=t.list.prev,t.list.next=t.list.prev=t.list),this},t}();e.LinkedList=a},7233:function(t,e){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.lookup=e.separateOptions=e.selectOptionsFromKeys=e.selectOptions=e.userOptions=e.defaultOptions=e.insert=e.copy=e.keys=e.makeArray=e.expandable=e.Expandable=e.OPTIONS=e.REMOVE=e.APPEND=e.isObject=void 0;var i={}.constructor;function s(t){return"object"==typeof t&&null!==t&&(t.constructor===i||t.constructor===a)}e.isObject=s,e.APPEND="[+]",e.REMOVE="[-]",e.OPTIONS={invalidOption:"warn",optionError:function(t,r){if("fatal"===e.OPTIONS.invalidOption)throw new Error(t);console.warn("MathJax: "+t)}};var a=function(){};function l(t){return Object.assign(Object.create(a.prototype),t)}function c(t){return t?Object.keys(t).concat(Object.getOwnPropertySymbols(t)):[]}function u(t){var e,n,o={};try{for(var i=r(c(t)),h=i.next();!h.done;h=i.next()){var f=h.value,d=Object.getOwnPropertyDescriptor(t,f),m=d.value;Array.isArray(m)?d.value=p([],m,!1):s(m)&&(d.value=u(m)),d.enumerable&&(o[f]=d)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return Object.defineProperties(t.constructor===a?l({}):{},o)}function p(t,i,l){var h,f;void 0===l&&(l=!0);var d=function(r){if(l&&void 0===t[r]&&t.constructor!==a)return"symbol"==typeof r&&(r=r.toString()),e.OPTIONS.optionError('Invalid option "'.concat(r,'" (no default value).'),r),"continue";var h=i[r],f=t[r];if(!s(h)||null===f||"object"!=typeof f&&"function"!=typeof f)Array.isArray(h)?(t[r]=[],p(t[r],h,!1)):s(h)?t[r]=u(h):t[r]=h;else{var d=c(h);Array.isArray(f)&&(1===d.length&&(d[0]===e.APPEND||d[0]===e.REMOVE)&&Array.isArray(h[d[0]])||2===d.length&&d.sort().join(",")===e.APPEND+","+e.REMOVE&&Array.isArray(h[e.APPEND])&&Array.isArray(h[e.REMOVE]))?(h[e.REMOVE]&&(f=t[r]=f.filter((function(t){return h[e.REMOVE].indexOf(t)<0}))),h[e.APPEND]&&(t[r]=o(o([],n(f),!1),n(h[e.APPEND]),!1))):p(f,h,l)}};try{for(var m=r(c(i)),y=m.next();!y.done;y=m.next()){d(y.value)}}catch(t){h={error:t}}finally{try{y&&!y.done&&(f=m.return)&&f.call(m)}finally{if(h)throw h.error}}return t}function h(t){for(var e,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var s={};try{for(var a=r(o),l=a.next();!l.done;l=a.next()){var c=l.value;t.hasOwnProperty(c)&&(s[c]=t[c])}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s}e.Expandable=a,e.expandable=l,e.makeArray=function(t){return Array.isArray(t)?t:[t]},e.keys=c,e.copy=u,e.insert=p,e.defaultOptions=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach((function(e){return p(t,e,!1)})),t},e.userOptions=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach((function(e){return p(t,e,!0)})),t},e.selectOptions=h,e.selectOptionsFromKeys=function(t,e){return h.apply(void 0,o([t],n(Object.keys(e)),!1))},e.separateOptions=function(t){for(var e,n,o,i,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var l=[];try{for(var c=r(s),u=c.next();!u.done;u=c.next()){var p=u.value,h={},f={};try{for(var d=(o=void 0,r(Object.keys(t||{}))),m=d.next();!m.done;m=d.next()){var y=m.value;(void 0===p[y]?f:h)[y]=t[y]}}catch(t){o={error:t}}finally{try{m&&!m.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}l.push(h),t=f}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return l.unshift(t),l},e.lookup=function(t,e,r){return void 0===r&&(r=null),e.hasOwnProperty(t)?e[t]:r}},8666:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.PrioritizedList=void 0;var r=function(){function t(){this.items=[],this.items=[]}return t.prototype[Symbol.iterator]=function(){var t=0,e=this.items;return{next:function(){return{value:e[t++],done:t>e.length}}}},t.prototype.add=function(e,r){void 0===r&&(r=t.DEFAULTPRIORITY);var n=this.items.length;do{n--}while(n>=0&&r<this.items[n].priority);return this.items.splice(n+1,0,{item:e,priority:r}),e},t.prototype.remove=function(t){var e=this.items.length;do{e--}while(e>=0&&this.items[e].item!==t);e>=0&&this.items.splice(e,1)},t.DEFAULTPRIORITY=5,t}();e.PrioritizedList=r},4542:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.retryAfter=e.handleRetriesFor=void 0,e.handleRetriesFor=function(t){return new Promise((function e(r,n){try{r(t())}catch(t){t.retry&&t.retry instanceof Promise?t.retry.then((function(){return e(r,n)})).catch((function(t){return n(t)})):t.restart&&t.restart.isCallback?MathJax.Callback.After((function(){return e(r,n)}),t.restart):n(t)}}))},e.retryAfter=function(t){var e=new Error("MathJax retry");throw e.retry=t,e}},4139:function(t,e){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CssStyles=void 0;var n=function(){function t(t){void 0===t&&(t=null),this.styles={},this.addStyles(t)}return Object.defineProperty(t.prototype,"cssText",{get:function(){return this.getStyleString()},enumerable:!1,configurable:!0}),t.prototype.addStyles=function(t){var e,n;if(t)try{for(var o=r(Object.keys(t)),i=o.next();!i.done;i=o.next()){var s=i.value;this.styles[s]||(this.styles[s]={}),Object.assign(this.styles[s],t[s])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.prototype.removeStyles=function(){for(var t,e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{for(var i=r(n),s=i.next();!s.done;s=i.next()){var a=s.value;delete this.styles[a]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.clear=function(){this.styles={}},t.prototype.getStyleString=function(){return this.getStyleRules().join("\n\n")},t.prototype.getStyleRules=function(){var t,e,n=Object.keys(this.styles),o=new Array(n.length),i=0;try{for(var s=r(n),a=s.next();!a.done;a=s.next()){var l=a.value;o[i++]=l+" {\n"+this.getStyleDefString(this.styles[l])+"\n}"}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return o},t.prototype.getStyleDefString=function(t){var e,n,o=Object.keys(t),i=new Array(o.length),s=0;try{for(var a=r(o),l=a.next();!l.done;l=a.next()){var c=l.value;i[s++]="  "+c+": "+t[c]+";"}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i.join("\n")},t}();e.CssStyles=n},8054:function(t,e){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Styles=void 0;var i=["top","right","bottom","left"],s=["width","style","color"];function a(t){for(var e=t.split(/((?:'[^']*'|"[^"]*"|,[\s\n]|[^\s\n])*)/g),r=[];e.length>1;)e.shift(),r.push(e.shift());return r}function l(t){var e,n,o=a(this.styles[t]);0===o.length&&o.push(""),1===o.length&&o.push(o[0]),2===o.length&&o.push(o[0]),3===o.length&&o.push(o[1]);try{for(var i=r(v.connect[t].children),s=i.next();!s.done;s=i.next()){var l=s.value;this.setStyle(this.childName(t,l),o.shift())}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}function c(t){var e,n,o=v.connect[t].children,i=[];try{for(var s=r(o),a=s.next();!a.done;a=s.next()){var l=a.value,c=this.styles[t+"-"+l];if(!c)return void delete this.styles[t];i.push(c)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}i[3]===i[1]&&(i.pop(),i[2]===i[0]&&(i.pop(),i[1]===i[0]&&i.pop())),this.styles[t]=i.join(" ")}function u(t){var e,n;try{for(var o=r(v.connect[t].children),i=o.next();!i.done;i=o.next()){var s=i.value;this.setStyle(this.childName(t,s),this.styles[t])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}function p(t){var e,i,s=o([],n(v.connect[t].children),!1),a=this.styles[this.childName(t,s.shift())];try{for(var l=r(s),c=l.next();!c.done;c=l.next()){var u=c.value;if(this.styles[this.childName(t,u)]!==a)return void delete this.styles[t]}}catch(t){e={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}this.styles[t]=a}var h=/^(?:[\d.]+(?:[a-z]+)|thin|medium|thick|inherit|initial|unset)$/,f=/^(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit|initial|unset)$/;function d(t){var e,n,o,i,s={width:"",style:"",color:""};try{for(var l=r(a(this.styles[t])),c=l.next();!c.done;c=l.next()){var u=c.value;u.match(h)&&""===s.width?s.width=u:u.match(f)&&""===s.style?s.style=u:s.color=u}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}try{for(var p=r(v.connect[t].children),d=p.next();!d.done;d=p.next()){var m=d.value;this.setStyle(this.childName(t,m),s[m])}}catch(t){o={error:t}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}}function m(t){var e,n,o=[];try{for(var i=r(v.connect[t].children),s=i.next();!s.done;s=i.next()){var a=s.value,l=this.styles[this.childName(t,a)];l&&o.push(l)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}o.length?this.styles[t]=o.join(" "):delete this.styles[t]}var y={style:/^(?:normal|italic|oblique|inherit|initial|unset)$/,variant:new RegExp("^(?:"+["normal|none","inherit|initial|unset","common-ligatures|no-common-ligatures","discretionary-ligatures|no-discretionary-ligatures","historical-ligatures|no-historical-ligatures","contextual|no-contextual","(?:stylistic|character-variant|swash|ornaments|annotation)\\([^)]*\\)","small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","lining-nums|oldstyle-nums|proportional-nums|tabular-nums","diagonal-fractions|stacked-fractions","ordinal|slashed-zero","jis78|jis83|jis90|jis04|simplified|traditional","full-width|proportional-width","ruby"].join("|")+")$"),weight:/^(?:normal|bold|bolder|lighter|[1-9]00|inherit|initial|unset)$/,stretch:new RegExp("^(?:"+["normal","(?:(?:ultra|extra|semi)-)?condensed","(?:(?:semi|extra|ulta)-)?expanded","inherit|initial|unset"].join("|")+")$"),size:new RegExp("^(?:"+["xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller","[d.]+%|[d.]+[a-z]+","inherit|initial|unset"].join("|")+")(?:/(?:normal|[d.+](?:%|[a-z]+)?))?$")};function g(t){var e,o,i,s,l=a(this.styles[t]),c={style:"",variant:[],weight:"",stretch:"",size:"",family:"","line-height":""};try{for(var u=r(l),p=u.next();!p.done;p=u.next()){var h=p.value;c.family=h;try{for(var f=(i=void 0,r(Object.keys(y))),d=f.next();!d.done;d=f.next()){var m=d.value;if((Array.isArray(c[m])||""===c[m])&&h.match(y[m]))if("size"===m){var g=n(h.split(/\//),2),b=g[0],_=g[1];c[m]=b,_&&(c["line-height"]=_)}else""===c.size&&(Array.isArray(c[m])?c[m].push(h):c[m]=h)}}catch(t){i={error:t}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(e)throw e.error}}!function(t,e){var n,o;try{for(var i=r(v.connect[t].children),s=i.next();!s.done;s=i.next()){var a=s.value,l=this.childName(t,a);if(Array.isArray(e[a])){var c=e[a];c.length&&(this.styles[l]=c.join(" "))}else""!==e[a]&&(this.styles[l]=e[a])}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}}(t,c),delete this.styles[t]}function b(t){}var v=function(){function t(t){void 0===t&&(t=""),this.parse(t)}return Object.defineProperty(t.prototype,"cssText",{get:function(){var t,e,n=[];try{for(var o=r(Object.keys(this.styles)),i=o.next();!i.done;i=o.next()){var s=i.value,a=this.parentName(s);this.styles[a]||n.push(s+": "+this.styles[s]+";")}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n.join(" ")},enumerable:!1,configurable:!0}),t.prototype.set=function(e,r){for(e=this.normalizeName(e),this.setStyle(e,r),t.connect[e]&&!t.connect[e].combine&&(this.combineChildren(e),delete this.styles[e]);e.match(/-/)&&(e=this.parentName(e),t.connect[e]);)t.connect[e].combine.call(this,e)},t.prototype.get=function(t){return t=this.normalizeName(t),this.styles.hasOwnProperty(t)?this.styles[t]:""},t.prototype.setStyle=function(e,r){this.styles[e]=r,t.connect[e]&&t.connect[e].children&&t.connect[e].split.call(this,e),""===r&&delete this.styles[e]},t.prototype.combineChildren=function(e){var n,o,i=this.parentName(e);try{for(var s=r(t.connect[e].children),a=s.next();!a.done;a=s.next()){var l=a.value,c=this.childName(i,l);t.connect[c].combine.call(this,c)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},t.prototype.parentName=function(t){var e=t.replace(/-[^-]*$/,"");return t===e?"":e},t.prototype.childName=function(e,r){return r.match(/-/)?r:(t.connect[e]&&!t.connect[e].combine&&(r+=e.replace(/.*-/,"-"),e=this.parentName(e)),e+"-"+r)},t.prototype.normalizeName=function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))},t.prototype.parse=function(t){void 0===t&&(t="");var e=this.constructor.pattern;this.styles={};for(var r=t.replace(e.comment,"").split(e.style);r.length>1;){var o=n(r.splice(0,3),3),i=o[0],s=o[1],a=o[2];if(i.match(/[^\s\n]/))return;this.set(s,a)}},t.pattern={style:/([-a-z]+)[\s\n]*:[\s\n]*((?:'[^']*'|"[^"]*"|\n|.)*?)[\s\n]*(?:;|$)/g,comment:/\/\*[^]*?\*\//g},t.connect={padding:{children:i,split:l,combine:c},border:{children:i,split:u,combine:p},"border-top":{children:s,split:d,combine:m},"border-right":{children:s,split:d,combine:m},"border-bottom":{children:s,split:d,combine:m},"border-left":{children:s,split:d,combine:m},"border-width":{children:i,split:l,combine:null},"border-style":{children:i,split:l,combine:null},"border-color":{children:i,split:l,combine:null},font:{children:["style","variant","weight","stretch","line-height","size","family"],split:g,combine:b}},t}();e.Styles=v},6010:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.px=e.emRounded=e.em=e.percent=e.length2em=e.MATHSPACE=e.RELUNITS=e.UNITS=e.BIGDIMEN=void 0,e.BIGDIMEN=1e6,e.UNITS={px:1,in:96,cm:96/2.54,mm:96/25.4},e.RELUNITS={em:1,ex:.431,pt:.1,pc:1.2,mu:1/18},e.MATHSPACE={veryverythinmathspace:1/18,verythinmathspace:2/18,thinmathspace:3/18,mediummathspace:4/18,thickmathspace:5/18,verythickmathspace:6/18,veryverythickmathspace:7/18,negativeveryverythinmathspace:-1/18,negativeverythinmathspace:-2/18,negativethinmathspace:-3/18,negativemediummathspace:-4/18,negativethickmathspace:-5/18,negativeverythickmathspace:-6/18,negativeveryverythickmathspace:-7/18,thin:.04,medium:.06,thick:.1,normal:1,big:2,small:1/Math.sqrt(2),infinity:e.BIGDIMEN},e.length2em=function(t,r,n,o){if(void 0===r&&(r=0),void 0===n&&(n=1),void 0===o&&(o=16),"string"!=typeof t&&(t=String(t)),""===t||null==t)return r;if(e.MATHSPACE[t])return e.MATHSPACE[t];var i=t.match(/^\s*([-+]?(?:\.\d+|\d+(?:\.\d*)?))?(pt|em|ex|mu|px|pc|in|mm|cm|%)?/);if(!i)return r;var s=parseFloat(i[1]||"1"),a=i[2];return e.UNITS.hasOwnProperty(a)?s*e.UNITS[a]/o/n:e.RELUNITS.hasOwnProperty(a)?s*e.RELUNITS[a]:"%"===a?s/100*r:s*r},e.percent=function(t){return(100*t).toFixed(1).replace(/\.?0+$/,"")+"%"},e.em=function(t){return Math.abs(t)<.001?"0":t.toFixed(3).replace(/\.?0+$/,"")+"em"},e.emRounded=function(t,e){return void 0===e&&(e=16),t=(Math.round(t*e)+.05)/e,Math.abs(t)<.001?"0em":t.toFixed(3).replace(/\.?0+$/,"")+"em"},e.px=function(t,r,n){return void 0===r&&(r=-e.BIGDIMEN),void 0===n&&(n=16),t*=n,r&&t<r&&(t=r),Math.abs(t)<.1?"0":t.toFixed(1).replace(/\.0$/,"")+"px"}},7875:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.max=e.sum=void 0,e.sum=function(t){return t.reduce((function(t,e){return t+e}),0)},e.max=function(t){return t.reduce((function(t,e){return Math.max(t,e)}),0)}},505:function(t,e){var r=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},n=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.split=e.isPercent=e.unicodeString=e.unicodeChars=e.quotePattern=e.sortLength=void 0,e.sortLength=function(t,e){return t.length!==e.length?e.length-t.length:t===e?0:t<e?-1:1},e.quotePattern=function(t){return t.replace(/([\^$(){}+*?\-|\[\]\:\\])/g,"\\$1")},e.unicodeChars=function(t){return Array.from(t).map((function(t){return t.codePointAt(0)}))},e.unicodeString=function(t){return String.fromCodePoint.apply(String,n([],r(t),!1))},e.isPercent=function(t){return!!t.match(/%\s*$/)},e.split=function(t){return t.trim().split(/\s+/)}},9329:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractEntry=void 0;var i=r(9328),s=r(2165),a=function(t){function e(e,r){var n=t.call(this)||this;return n._menu=e,n._type=r,n.className=s.HtmlClasses.MENUITEM,n.role="menuitem",n.hidden=!1,n}return o(e,t),Object.defineProperty(e.prototype,"menu",{get:function(){return this._menu},set:function(t){this._menu=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),e.prototype.hide=function(){this.hidden=!0,this.menu.generateMenu()},e.prototype.show=function(){this.hidden=!1,this.menu.generateMenu()},e.prototype.isHidden=function(){return this.hidden},e}(i.MenuElement);e.AbstractEntry=a},1340:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractItem=void 0;var s=r(9329),a=r(2556),l=r(2165),c=function(t){function e(e,r,n,o){var i=t.call(this,e,r)||this;return i._content=n,i.disabled=!1,i.callbacks=[],i._id=o||n,i}return o(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.generateHtml(),this.menu&&this.menu.generateHtml()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.press=function(){this.disabled||(this.executeAction(),this.executeCallbacks_())},e.prototype.executeAction=function(){},e.prototype.registerCallback=function(t){-1===this.callbacks.indexOf(t)&&this.callbacks.push(t)},e.prototype.unregisterCallback=function(t){var e=this.callbacks.indexOf(t);-1!==e&&this.callbacks.splice(e,1)},e.prototype.mousedown=function(t){this.press(),this.stop(t)},e.prototype.mouseover=function(t){this.focus(),this.stop(t)},e.prototype.mouseout=function(t){this.deactivate(),this.stop(t)},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this);var e=this.html;e.setAttribute("aria-disabled","false"),e.textContent=this.content},e.prototype.activate=function(){this.disabled||this.html.classList.add(l.HtmlClasses.MENUACTIVE)},e.prototype.deactivate=function(){this.html.classList.remove(l.HtmlClasses.MENUACTIVE)},e.prototype.focus=function(){this.menu.focused=this,t.prototype.focus.call(this),this.activate()},e.prototype.unfocus=function(){this.deactivate(),t.prototype.unfocus.call(this)},e.prototype.escape=function(t){a.MenuUtil.close(this)},e.prototype.up=function(t){this.menu.up(t)},e.prototype.down=function(t){this.menu.down(t)},e.prototype.left=function(t){this.menu.left(t)},e.prototype.right=function(t){this.menu.right(t)},e.prototype.space=function(t){this.press()},e.prototype.disable=function(){this.disabled=!0;var t=this.html;t.classList.add(l.HtmlClasses.MENUDISABLED),t.setAttribute("aria-disabled","true")},e.prototype.enable=function(){this.disabled=!1;var t=this.html;t.classList.remove(l.HtmlClasses.MENUDISABLED),t.removeAttribute("aria-disabled")},e.prototype.executeCallbacks_=function(){var t,e;try{for(var r=i(this.callbacks),n=r.next();!n.done;n=r.next()){var o=n.value;try{o(this)}catch(t){a.MenuUtil.error(t,"Callback for menu entry "+this.id+" failed.")}}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e}(s.AbstractEntry);e.AbstractItem=c},1484:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractMenu=void 0;var s=r(8372),a=r(1340),l=r(2165),c=r(6186),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.className=l.HtmlClasses.CONTEXTMENU,e.role="menu",e._items=[],e._baseMenu=null,e}return o(e,t),Object.defineProperty(e.prototype,"baseMenu",{get:function(){return this._baseMenu},set:function(t){this._baseMenu=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pool",{get:function(){return this.variablePool},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this._focused},set:function(t){if(this._focused!==t){this._focused||this.unfocus();var e=this._focused;this._focused=t,e&&e.unfocus()}},enumerable:!1,configurable:!0}),e.prototype.up=function(t){var e=this.items.filter((function(t){return t instanceof a.AbstractItem&&!t.isHidden()}));if(0!==e.length)if(this.focused){var r=e.indexOf(this.focused);-1!==r&&e[r=r?--r:e.length-1].focus()}else e[e.length-1].focus()},e.prototype.down=function(t){var e=this.items.filter((function(t){return t instanceof a.AbstractItem&&!t.isHidden()}));if(0!==e.length)if(this.focused){var r=e.indexOf(this.focused);-1!==r&&e[r=++r===e.length?0:r].focus()}else e[0].focus()},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this),this.generateMenu()},e.prototype.generateMenu=function(){var t,e,r=this.html;r.classList.add(l.HtmlClasses.MENU);try{for(var n=i(this.items),o=n.next();!o.done;o=n.next()){var s=o.value;if(s.isHidden()){var a=s.html;a.parentNode&&a.parentNode.removeChild(a)}else r.appendChild(s.html)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.post=function(e,r){this.variablePool.update(),t.prototype.post.call(this,e,r)},e.prototype.unpostSubmenus=function(){var t,e,r=this.items.filter((function(t){return t instanceof c.Submenu}));try{for(var n=i(r),o=n.next();!o.done;o=n.next()){var s=o.value;s.submenu.unpost(),s!==this.focused&&s.unfocus()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.unpost=function(){t.prototype.unpost.call(this),this.unpostSubmenus(),this.focused=null},e.prototype.find=function(t){var e,r;try{for(var n=i(this.items),o=n.next();!o.done;o=n.next()){var s=o.value;if("rule"!==s.type){if(s.id===t)return s;if("submenu"===s.type){var a=s.submenu.find(t);if(a)return a}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return null},e}(s.AbstractPostable);e.AbstractMenu=u},2868:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractNavigatable=void 0;var n=r(3205),o=r(8853),i=function(){function t(){this.bubble=!1}return t.prototype.bubbleKey=function(){this.bubble=!0},t.prototype.keydown=function(t){switch(t.keyCode){case n.KEY.ESCAPE:this.escape(t);break;case n.KEY.RIGHT:this.right(t);break;case n.KEY.LEFT:this.left(t);break;case n.KEY.UP:this.up(t);break;case n.KEY.DOWN:this.down(t);break;case n.KEY.RETURN:case n.KEY.SPACE:this.space(t);break;default:return}this.bubble?this.bubble=!1:this.stop(t)},t.prototype.escape=function(t){},t.prototype.space=function(t){},t.prototype.left=function(t){},t.prototype.right=function(t){},t.prototype.up=function(t){},t.prototype.down=function(t){},t.prototype.stop=function(t){t&&(t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0)},t.prototype.mousedown=function(t){return this.stop(t)},t.prototype.mouseup=function(t){return this.stop(t)},t.prototype.mouseover=function(t){return this.stop(t)},t.prototype.mouseout=function(t){return this.stop(t)},t.prototype.click=function(t){return this.stop(t)},t.prototype.addEvents=function(t){t.addEventListener(o.MOUSE.DOWN,this.mousedown.bind(this)),t.addEventListener(o.MOUSE.UP,this.mouseup.bind(this)),t.addEventListener(o.MOUSE.OVER,this.mouseover.bind(this)),t.addEventListener(o.MOUSE.OUT,this.mouseout.bind(this)),t.addEventListener(o.MOUSE.CLICK,this.click.bind(this)),t.addEventListener("keydown",this.keydown.bind(this)),t.addEventListener("dragstart",this.stop.bind(this)),t.addEventListener(o.MOUSE.SELECTSTART,this.stop.bind(this)),t.addEventListener("contextmenu",this.stop.bind(this)),t.addEventListener(o.MOUSE.DBLCLICK,this.stop.bind(this))},t}();e.AbstractNavigatable=i},8372:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractPostable=void 0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.posted=!1,e}return o(e,t),e.prototype.isPosted=function(){return this.posted},e.prototype.post=function(t,e){this.posted||(void 0!==t&&void 0!==e&&this.html.setAttribute("style","left: "+t+"px; top: "+e+"px;"),this.display(),this.posted=!0)},e.prototype.unpost=function(){if(this.posted){var t=this.html;t.parentNode&&t.parentNode.removeChild(t),this.posted=!1}},e}(r(9328).MenuElement);e.AbstractPostable=i},6765:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractVariableItem=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this);var e=this.html;this.span||this.generateSpan(),e.appendChild(this.span),this.update()},e.prototype.register=function(){this.variable.register(this)},e.prototype.unregister=function(){this.variable.unregister(this)},e.prototype.update=function(){this.updateAria(),this.span&&this.updateSpan()},e}(r(1340).AbstractItem);e.AbstractVariableItem=i},5179:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CloseButton=void 0;var i=r(8372),s=r(2165),a=function(t){function e(e){var r=t.call(this)||this;return r.element=e,r.className=s.HtmlClasses.MENUCLOSE,r.role="button",r}return o(e,t),e.prototype.generateHtml=function(){var t=document.createElement("span");t.classList.add(this.className),t.setAttribute("role",this.role),t.setAttribute("tabindex","0");var e=document.createElement("span");e.textContent="\xd7",t.appendChild(e),this.html=t},e.prototype.display=function(){},e.prototype.unpost=function(){t.prototype.unpost.call(this),this.element.unpost()},e.prototype.keydown=function(e){this.bubbleKey(),t.prototype.keydown.call(this,e)},e.prototype.space=function(t){this.unpost(),this.stop(t)},e.prototype.mousedown=function(t){this.unpost(),this.stop(t)},e}(i.AbstractPostable);e.CloseButton=a},5073:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ContextMenu=void 0;var i=r(1484),s=r(2165),a=r(1932),l=r(2358),c=function(t){function e(e){var r=t.call(this)||this;return r.factory=e,r.id="",r.moving=!1,r._store=new a.MenuStore(r),r.widgets=[],r.variablePool=new l.VariablePool,r}return o(e,t),e.fromJson=function(t,e){var r=e.pool,n=e.items,o=e.id,i=void 0===o?"":o,s=new this(t);s.id=i;var a=t.get("variable");r.forEach((function(e){return a(t,e,s.pool)}));var l=t.get("items")(t,n,s);return s.items=l,s},e.prototype.generateHtml=function(){this.isPosted()&&this.unpost(),t.prototype.generateHtml.call(this),this._frame=document.createElement("div"),this._frame.classList.add(s.HtmlClasses.MENUFRAME);var e="left: 0px; top: 0px; z-index: 200; width: 100%; height: 100%; border: 0px; padding: 0px; margin: 0px;";this._frame.setAttribute("style","position: absolute; "+e);var r=document.createElement("div");r.setAttribute("style","position: fixed; "+e),this._frame.appendChild(r),r.addEventListener("mousedown",function(t){this.unpost(),this.unpostWidgets(),this.stop(t)}.bind(this))},e.prototype.display=function(){document.body.appendChild(this.frame),this.frame.appendChild(this.html),this.focus()},e.prototype.escape=function(t){this.unpost(),this.unpostWidgets()},e.prototype.unpost=function(){if(t.prototype.unpost.call(this),!(this.widgets.length>0)){this.frame.parentNode.removeChild(this.frame);var e=this.store;this.moving||e.insertTaborder(),e.active.focus()}},e.prototype.left=function(t){this.move_(this.store.previous())},e.prototype.right=function(t){this.move_(this.store.next())},Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),e.prototype.post=function(e,r){if(void 0!==r)return this.moving||this.store.removeTaborder(),void t.prototype.post.call(this,e,r);var n,o,i,s=e;if(s instanceof Event?(n=s.target,this.stop(s)):n=s,s instanceof MouseEvent&&(o=s.pageX,i=s.pageY,o||i||!s.clientX||(o=s.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=s.clientY+document.body.scrollTop+document.documentElement.scrollTop)),!o&&!i&&n){var a=window.pageXOffset||document.documentElement.scrollLeft,l=window.pageYOffset||document.documentElement.scrollTop,c=n.getBoundingClientRect();o=(c.right+c.left)/2+a,i=(c.bottom+c.top)/2+l}this.store.active=n,this.anchor=this.store.active;var u=this.html;o+u.offsetWidth>document.body.offsetWidth-5&&(o=document.body.offsetWidth-u.offsetWidth-5),this.post(o,i)},e.prototype.registerWidget=function(t){this.widgets.push(t)},e.prototype.unregisterWidget=function(t){var e=this.widgets.indexOf(t);e>-1&&this.widgets.splice(e,1),0===this.widgets.length&&this.unpost()},e.prototype.unpostWidgets=function(){this.widgets.forEach((function(t){return t.unpost()}))},e.prototype.toJson=function(){return{type:""}},e.prototype.move_=function(t){this.anchor&&t!==this.anchor&&(this.moving=!0,this.unpost(),this.post(t),this.moving=!1)},e}(i.AbstractMenu);e.ContextMenu=c},7309:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CssStyles=void 0;var n=r(2165);!function(t){function e(t){return"."+(n.HtmlClasses[t]||t)}var r={};r[e("INFOCLOSE")]="{  top:.2em; right:.2em;}",r[e("INFOCONTENT")]="{  overflow:auto; text-align:left; font-size:80%;  padding:.4em .6em; border:1px inset; margin:1em 0px;  max-height:20em; max-width:30em; background-color:#EEEEEE;  white-space:normal;}",r[e("INFO")+e("MOUSEPOST")]="{outline:none;}",r[e("INFO")]='{  position:fixed; left:50%; width:auto; text-align:center;  border:3px outset; padding:1em 2em; background-color:#DDDDDD;  color:black;  cursor:default; font-family:message-box; font-size:120%;  font-style:normal; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 15px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius:15px;               /* Safari and Chrome */  -moz-border-radius:15px;                  /* Firefox */  -khtml-border-radius:15px;                /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color="gray", Positive="true"); /* IE */}';var o={};o[e("MENU")]="{  position:absolute;  background-color:white;  color:black;  width:auto; padding:5px 0px;  border:1px solid #CCCCCC; margin:0; cursor:default;  font: menu; text-align:left; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 5px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius: 5px;             /* Safari and Chrome */  -moz-border-radius: 5px;                /* Firefox */  -khtml-border-radius: 5px;              /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */}",o[e("MENUITEM")]="{  padding: 1px 2em;  background:transparent;}",o[e("MENUARROW")]="{  position:absolute; right:.5em; padding-top:.25em; color:#666666;  font-family: null; font-size: .75em}",o[e("MENUACTIVE")+" "+e("MENUARROW")]="{color:white}",o[e("MENUARROW")+e("RTL")]="{left:.5em; right:auto}",o[e("MENUCHECK")]="{  position:absolute; left:.7em;  font-family: null}",o[e("MENUCHECK")+e("RTL")]="{ right:.7em; left:auto }",o[e("MENURADIOCHECK")]="{  position:absolute; left: .7em;}",o[e("MENURADIOCHECK")+e("RTL")]="{  right: .7em; left:auto}",o[e("MENUINPUTBOX")]="{  padding-left: 1em; right:.5em; color:#666666;  font-family: null;}",o[e("MENUINPUTBOX")+e("RTL")]="{  left: .1em;}",o[e("MENUCOMBOBOX")]="{  left:.1em; padding-bottom:.5em;}",o[e("MENUSLIDER")]="{  left: .1em;}",o[e("SLIDERVALUE")]="{  position:absolute; right:.1em; padding-top:.25em; color:#333333;  font-size: .75em}",o[e("SLIDERBAR")]="{  outline: none; background: #d3d3d3}",o[e("MENULABEL")]="{  padding: 1px 2em 3px 1.33em;  font-style:italic}",o[e("MENURULE")]="{  border-top: 1px solid #DDDDDD;  margin: 4px 3px;}",o[e("MENUDISABLED")]="{  color:GrayText}",o[e("MENUACTIVE")]="{  background-color: #606872;  color: white;}",o[e("MENUDISABLED")+":focus"]="{  background-color: #E8E8E8}",o[e("MENULABEL")+":focus"]="{  background-color: #E8E8E8}",o[e("CONTEXTMENU")+":focus"]="{  outline:none}",o[e("CONTEXTMENU")+" "+e("MENUITEM")+":focus"]="{  outline:none}",o[e("SELECTIONMENU")]="{  position:relative; float:left;  border-bottom: none; -webkit-box-shadow:none; -webkit-border-radius:0px; }",o[e("SELECTIONITEM")]="{  padding-right: 1em;}",o[e("SELECTION")]="{  right: 40%; width:50%; }",o[e("SELECTIONBOX")]="{  padding: 0em; max-height:20em; max-width: none;  background-color:#FFFFFF;}",o[e("SELECTIONDIVIDER")]="{  clear: both; border-top: 2px solid #000000;}",o[e("MENU")+" "+e("MENUCLOSE")]="{  top:-10px; left:-10px}";var i={};i[e("MENUCLOSE")]='{  position:absolute;  cursor:pointer;  display:inline-block;  border:2px solid #AAA;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  font-family: "Courier New", Courier;  font-size:24px;  color:#F0F0F0}',i[e("MENUCLOSE")+" span"]="{  display:block; background-color:#AAA; border:1.5px solid;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  line-height:0;  padding:8px 0 6px     /* may need to be browser-specific */}",i[e("MENUCLOSE")+":hover"]="{  color:white!important;  border:2px solid #CCC!important}",i[e("MENUCLOSE")+":hover span"]="{  background-color:#CCC!important}",i[e("MENUCLOSE")+":hover:focus"]="{  outline:none}";var s=!1,a=!1,l=!1;function c(t){l||(u(i,t),l=!0)}function u(t,e){var r=e||document,n=r.createElement("style");n.type="text/css";var o="";for(var i in t)o+=i,o+=" ",o+=t[i],o+="\n";n.innerHTML=o,r.head.appendChild(n)}t.addMenuStyles=function(t){a||(u(o,t),a=!0,c(t))},t.addInfoStyles=function(t){s||(u(r,t),s=!0,c(t))}}(e.CssStyles||(e.CssStyles={}))},2165:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlAttrs=e.HtmlClasses=void 0;function r(t){return"CtxtMenu_"+t}function n(t){return r(t)}function o(t){return r(t)}e.HtmlClasses={ATTACHED:n("Attached"),CONTEXTMENU:n("ContextMenu"),MENU:n("Menu"),MENUARROW:n("MenuArrow"),MENUACTIVE:n("MenuActive"),MENUCHECK:n("MenuCheck"),MENUCLOSE:n("MenuClose"),MENUCOMBOBOX:n("MenuComboBox"),MENUDISABLED:n("MenuDisabled"),MENUFRAME:n("MenuFrame"),MENUITEM:n("MenuItem"),MENULABEL:n("MenuLabel"),MENURADIOCHECK:n("MenuRadioCheck"),MENUINPUTBOX:n("MenuInputBox"),MENURULE:n("MenuRule"),MENUSLIDER:n("MenuSlider"),MOUSEPOST:n("MousePost"),RTL:n("RTL"),INFO:n("Info"),INFOCLOSE:n("InfoClose"),INFOCONTENT:n("InfoContent"),INFOSIGNATURE:n("InfoSignature"),INFOTITLE:n("InfoTitle"),SLIDERVALUE:n("SliderValue"),SLIDERBAR:n("SliderBar"),SELECTION:n("Selection"),SELECTIONBOX:n("SelectionBox"),SELECTIONMENU:n("SelectionMenu"),SELECTIONDIVIDER:n("SelectionDivider"),SELECTIONITEM:n("SelectionItem")},e.HtmlAttrs={COUNTER:o("Counter"),KEYDOWNFUNC:o("keydownFunc"),CONTEXTMENUFUNC:o("contextmenuFunc"),OLDTAB:o("Oldtabindex"),TOUCHFUNC:o("TouchFunc")}},4922:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Info=void 0;var i=r(5179),s=r(2165),a=function(t){function e(e,r,n){var o=t.call(this)||this;return o.title=e,o.signature=n,o.className=s.HtmlClasses.INFO,o.role="dialog",o.contentDiv=o.generateContent(),o.close=o.generateClose(),o.content=r||function(){return""},o}return o(e,t),e.prototype.attachMenu=function(t){this.menu=t},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this);var e=this.html;e.appendChild(this.generateTitle()),e.appendChild(this.contentDiv),e.appendChild(this.generateSignature()),e.appendChild(this.close.html),e.setAttribute("tabindex","0")},e.prototype.post=function(){t.prototype.post.call(this);var e=document.documentElement,r=this.html,n=window.innerHeight||e.clientHeight||e.scrollHeight||0,o=Math.floor(-r.offsetWidth/2),i=Math.floor((n-r.offsetHeight)/3);r.setAttribute("style","margin-left: "+o+"px; top: "+i+"px;"),window.event instanceof MouseEvent&&r.classList.add(s.HtmlClasses.MOUSEPOST),r.focus()},e.prototype.display=function(){this.menu.registerWidget(this),this.contentDiv.innerHTML=this.content();var t=this.menu.html;t.parentNode&&t.parentNode.removeChild(t),this.menu.frame.appendChild(this.html)},e.prototype.click=function(t){},e.prototype.keydown=function(e){this.bubbleKey(),t.prototype.keydown.call(this,e)},e.prototype.escape=function(t){this.unpost()},e.prototype.unpost=function(){t.prototype.unpost.call(this),this.html.classList.remove(s.HtmlClasses.MOUSEPOST),this.menu.unregisterWidget(this)},e.prototype.generateClose=function(){var t=new i.CloseButton(this),e=t.html;return e.classList.add(s.HtmlClasses.INFOCLOSE),e.setAttribute("aria-label","Close Dialog Box"),t},e.prototype.generateTitle=function(){var t=document.createElement("span");return t.innerHTML=this.title,t.classList.add(s.HtmlClasses.INFOTITLE),t},e.prototype.generateContent=function(){var t=document.createElement("div");return t.classList.add(s.HtmlClasses.INFOCONTENT),t.setAttribute("tabindex","0"),t},e.prototype.generateSignature=function(){var t=document.createElement("span");return t.innerHTML=this.signature,t.classList.add(s.HtmlClasses.INFOSIGNATURE),t},e.prototype.toJson=function(){return{type:""}},e}(r(8372).AbstractPostable);e.Info=a},1409:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Checkbox=void 0;var i=r(6765),s=r(2556),a=r(2165),l=function(t){function e(e,r,n,o){var i=t.call(this,e,"checkbox",r,o)||this;return i.role="menuitemcheckbox",i.variable=e.pool.lookup(n),i.register(),i}return o(e,t),e.fromJson=function(t,e,r){return new this(r,e.content,e.variable,e.id)},e.prototype.executeAction=function(){this.variable.setValue(!this.variable.getValue()),s.MenuUtil.close(this)},e.prototype.generateSpan=function(){this.span=document.createElement("span"),this.span.textContent="\u2713",this.span.classList.add(a.HtmlClasses.MENUCHECK)},e.prototype.updateAria=function(){this.html.setAttribute("aria-checked",this.variable.getValue()?"true":"false")},e.prototype.updateSpan=function(){this.span.style.display=this.variable.getValue()?"":"none"},e.prototype.toJson=function(){return{type:""}},e}(i.AbstractVariableItem);e.Checkbox=l},9886:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Combo=void 0;var i=r(6765),s=r(2556),a=r(2165),l=r(3205),c=function(t){function e(e,r,n,o){var i=t.call(this,e,"combobox",r,o)||this;return i.role="combobox",i.inputEvent=!1,i.variable=e.pool.lookup(n),i.register(),i}return o(e,t),e.fromJson=function(t,e,r){return new this(r,e.content,e.variable,e.id)},e.prototype.executeAction=function(){this.variable.setValue(this.input.value,s.MenuUtil.getActiveElement(this))},e.prototype.space=function(e){t.prototype.space.call(this,e),s.MenuUtil.close(this)},e.prototype.focus=function(){t.prototype.focus.call(this),this.input.focus()},e.prototype.unfocus=function(){t.prototype.unfocus.call(this),this.updateSpan()},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this),this.html.classList.add(a.HtmlClasses.MENUCOMBOBOX)},e.prototype.generateSpan=function(){this.span=document.createElement("span"),this.span.classList.add(a.HtmlClasses.MENUINPUTBOX),this.input=document.createElement("input"),this.input.addEventListener("keydown",this.inputKey.bind(this)),this.input.setAttribute("size","10em"),this.input.setAttribute("type","text"),this.input.setAttribute("tabindex","-1"),this.span.appendChild(this.input)},e.prototype.inputKey=function(t){this.bubbleKey(),this.inputEvent=!0},e.prototype.keydown=function(e){if(this.inputEvent&&e.keyCode!==l.KEY.ESCAPE&&e.keyCode!==l.KEY.RETURN)return this.inputEvent=!1,void e.stopPropagation();t.prototype.keydown.call(this,e),e.stopPropagation()},e.prototype.updateAria=function(){},e.prototype.updateSpan=function(){var t;try{t=this.variable.getValue(s.MenuUtil.getActiveElement(this))}catch(e){t=""}this.input.value=t},e.prototype.toJson=function(){return{type:""}},e}(i.AbstractVariableItem);e.Combo=c},3467:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Command=void 0;var i=r(1340),s=r(2556),a=function(t){function e(e,r,n,o){var i=t.call(this,e,"command",r,o)||this;return i.command=n,i}return o(e,t),e.fromJson=function(t,e,r){return new this(r,e.content,e.action,e.id)},e.prototype.executeAction=function(){try{this.command(s.MenuUtil.getActiveElement(this))}catch(t){s.MenuUtil.error(t,"Illegal command callback.")}s.MenuUtil.close(this)},e.prototype.toJson=function(){return{type:""}},e}(i.AbstractItem);e.Command=a},2965:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;var i=r(1340),s=r(2165),a=function(t){function e(e,r,n){return t.call(this,e,"label",r,n)||this}return o(e,t),e.fromJson=function(t,e,r){return new this(r,e.content,e.id)},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this),this.html.classList.add(s.HtmlClasses.MENULABEL)},e.prototype.toJson=function(){return{type:""}},e}(i.AbstractItem);e.Label=a},385:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Radio=void 0;var i=r(6765),s=r(2556),a=r(2165),l=function(t){function e(e,r,n,o){var i=t.call(this,e,"radio",r,o)||this;return i.role="menuitemradio",i.variable=e.pool.lookup(n),i.register(),i}return o(e,t),e.fromJson=function(t,e,r){return new this(r,e.content,e.variable,e.id)},e.prototype.executeAction=function(){this.variable.setValue(this.id),s.MenuUtil.close(this)},e.prototype.generateSpan=function(){this.span=document.createElement("span"),this.span.textContent="\u2713",this.span.classList.add(a.HtmlClasses.MENURADIOCHECK)},e.prototype.updateAria=function(){this.html.setAttribute("aria-checked",this.variable.getValue()===this.id?"true":"false")},e.prototype.updateSpan=function(){this.span.style.display=this.variable.getValue()===this.id?"":"none"},e.prototype.toJson=function(){return{type:""}},e}(i.AbstractVariableItem);e.Radio=l},3463:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Rule=void 0;var i=r(9329),s=r(2165),a=function(t){function e(e){var r=t.call(this,e,"rule")||this;return r.className=s.HtmlClasses.MENUITEM,r.role="separator",r}return o(e,t),e.fromJson=function(t,e,r){return new this(r)},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this);var e=this.html;e.classList.add(s.HtmlClasses.MENURULE),e.setAttribute("aria-orientation","vertical")},e.prototype.addEvents=function(t){},e.prototype.toJson=function(){return{type:"rule"}},e}(i.AbstractEntry);e.Rule=a},7625:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;var i=r(6765),s=r(2556),a=r(2165),l=r(3205),c=function(t){function e(e,r,n,o){var i=t.call(this,e,"slider",r,o)||this;return i.role="slider",i.labelId="ctx_slideLabel"+s.MenuUtil.counter(),i.valueId="ctx_slideValue"+s.MenuUtil.counter(),i.inputEvent=!1,i.variable=e.pool.lookup(n),i.register(),i}return o(e,t),e.fromJson=function(t,e,r){return new this(r,e.content,e.variable,e.id)},e.prototype.executeAction=function(){this.variable.setValue(this.input.value,s.MenuUtil.getActiveElement(this)),this.update()},e.prototype.space=function(e){t.prototype.space.call(this,e),s.MenuUtil.close(this)},e.prototype.focus=function(){t.prototype.focus.call(this),this.input.focus()},e.prototype.unfocus=function(){t.prototype.unfocus.call(this),this.updateSpan()},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this),this.html.classList.add(a.HtmlClasses.MENUSLIDER),this.valueSpan=document.createElement("span"),this.valueSpan.setAttribute("id",this.valueId),this.valueSpan.classList.add(a.HtmlClasses.SLIDERVALUE),this.html.appendChild(this.valueSpan)},e.prototype.generateSpan=function(){this.span=document.createElement("span"),this.labelSpan=document.createElement("span"),this.labelSpan.setAttribute("id",this.labelId),this.labelSpan.appendChild(this.html.childNodes[0]),this.html.appendChild(this.labelSpan),this.input=document.createElement("input"),this.input.setAttribute("type","range"),this.input.setAttribute("min","0"),this.input.setAttribute("max","100"),this.input.setAttribute("aria-valuemin","0"),this.input.setAttribute("aria-valuemax","100"),this.input.setAttribute("aria-labelledby",this.labelId),this.input.addEventListener("keydown",this.inputKey.bind(this)),this.input.addEventListener("input",this.executeAction.bind(this)),this.input.classList.add(a.HtmlClasses.SLIDERBAR),this.span.appendChild(this.input)},e.prototype.inputKey=function(t){this.inputEvent=!0},e.prototype.mousedown=function(t){t.stopPropagation()},e.prototype.mouseup=function(t){event.stopPropagation()},e.prototype.keydown=function(e){var r=e.keyCode;return r===l.KEY.UP||r===l.KEY.DOWN?(e.preventDefault(),void t.prototype.keydown.call(this,e)):this.inputEvent&&r!==l.KEY.ESCAPE&&r!==l.KEY.RETURN?(this.inputEvent=!1,void e.stopPropagation()):(t.prototype.keydown.call(this,e),void e.stopPropagation())},e.prototype.updateAria=function(){var t=this.variable.getValue();t&&this.input&&(this.input.setAttribute("aria-valuenow",t),this.input.setAttribute("aria-valuetext",t+"%"))},e.prototype.updateSpan=function(){var t;try{t=this.variable.getValue(s.MenuUtil.getActiveElement(this)),this.valueSpan.innerHTML=t+"%"}catch(e){t=""}this.input.value=t},e.prototype.toJson=function(){return{type:""}},e}(i.AbstractVariableItem);e.Slider=c},6186:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Submenu=void 0;var i=r(1340),s=r(2165),a=function(t){function e(e,r,n){var o=t.call(this,e,"submenu",r,n)||this;return o._submenu=null,o}return o(e,t),e.fromJson=function(t,e,r){var n=e.content,o=e.menu,i=new this(r,n,e.id),s=t.get("subMenu")(t,o,i);return i.submenu=s,i},Object.defineProperty(e.prototype,"submenu",{get:function(){return this._submenu},set:function(t){this._submenu=t},enumerable:!1,configurable:!0}),e.prototype.mouseover=function(t){this.focus(),this.stop(t)},e.prototype.mouseout=function(t){this.stop(t)},e.prototype.unfocus=function(){if(this.submenu.isPosted()){if(this.menu.focused!==this)return t.prototype.unfocus.call(this),void this.menu.unpostSubmenus();this.html.setAttribute("tabindex","-1"),this.html.blur()}else t.prototype.unfocus.call(this)},e.prototype.focus=function(){t.prototype.focus.call(this),this.submenu.isPosted()||this.disabled||this.submenu.post()},e.prototype.executeAction=function(){this.submenu.isPosted()?this.submenu.unpost():this.submenu.post()},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this);var e=this.html;this.span=document.createElement("span"),this.span.textContent="\u25ba",this.span.classList.add(s.HtmlClasses.MENUARROW),e.appendChild(this.span),e.setAttribute("aria-haspopup","true")},e.prototype.left=function(e){this.submenu.isPosted()?this.submenu.unpost():t.prototype.left.call(this,e)},e.prototype.right=function(t){this.submenu.isPosted()?this.submenu.down(t):this.submenu.post()},e.prototype.toJson=function(){return{type:""}},e}(i.AbstractItem);e.Submenu=a},3205:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.KEY=void 0,function(t){t[t.RETURN=13]="RETURN",t[t.ESCAPE=27]="ESCAPE",t[t.SPACE=32]="SPACE",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN"}(e.KEY||(e.KEY={}))},9328:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MenuElement=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.addAttributes=function(t){for(var e in t)this.html.setAttribute(e,t[e])},Object.defineProperty(e.prototype,"html",{get:function(){return this._html||this.generateHtml(),this._html},set:function(t){this._html=t,this.addEvents(t)},enumerable:!1,configurable:!0}),e.prototype.generateHtml=function(){var t=document.createElement("div");t.classList.add(this.className),t.setAttribute("role",this.role),this.html=t},e.prototype.focus=function(){var t=this.html;t.setAttribute("tabindex","0"),t.focus()},e.prototype.unfocus=function(){var t=this.html;t.hasAttribute("tabindex")&&t.setAttribute("tabindex","-1");try{t.blur()}catch(t){}t.blur()},e}(r(2868).AbstractNavigatable);e.MenuElement=i},1932:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuStore=void 0;var o=r(2556),i=r(2165),s=r(3205),a=function(){function t(t){this.menu=t,this.store=[],this._active=null,this.counter=0,this.attachedClass=i.HtmlClasses.ATTACHED+"_"+o.MenuUtil.counter(),this.taborder=!0,this.attrMap={}}return Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(t){do{if(-1!==this.store.indexOf(t)){this._active=t;break}t=t.parentNode}while(t)},enumerable:!1,configurable:!0}),t.prototype.next=function(){var t=this.store.length;if(0===t)return this.active=null,null;var e=this.store.indexOf(this.active);return e=-1===e?0:e<t-1?e+1:0,this.active=this.store[e],this.active},t.prototype.previous=function(){var t=this.store.length;if(0===t)return this.active=null,null;var e=t-1,r=this.store.indexOf(this.active);return r=-1===r||0===r?e:r-1,this.active=this.store[r],this.active},t.prototype.clear=function(){this.remove(this.store)},t.prototype.insert=function(t){var e,r,o=t instanceof HTMLElement?[t]:t;try{for(var i=n(o),s=i.next();!s.done;s=i.next()){var a=s.value;this.insertElement(a)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}this.sort()},t.prototype.remove=function(t){var e,r,o=t instanceof HTMLElement?[t]:t;try{for(var i=n(o),s=i.next();!s.done;s=i.next()){var a=s.value;this.removeElement(a)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}this.sort()},t.prototype.inTaborder=function(t){this.taborder&&!t&&this.removeTaborder(),!this.taborder&&t&&this.insertTaborder(),this.taborder=t},t.prototype.insertTaborder=function(){this.taborder&&this.insertTaborder_()},t.prototype.removeTaborder=function(){this.taborder&&this.removeTaborder_()},t.prototype.insertElement=function(t){t.classList.contains(this.attachedClass)||(t.classList.add(this.attachedClass),this.taborder&&this.addTabindex(t),this.addEvents(t))},t.prototype.removeElement=function(t){t.classList.contains(this.attachedClass)&&(t.classList.remove(this.attachedClass),this.taborder&&this.removeTabindex(t),this.removeEvents(t))},t.prototype.sort=function(){var t=document.getElementsByClassName(this.attachedClass);this.store=[].slice.call(t)},t.prototype.insertTaborder_=function(){this.store.forEach((function(t){return t.setAttribute("tabindex","0")}))},t.prototype.removeTaborder_=function(){this.store.forEach((function(t){return t.setAttribute("tabindex","-1")}))},t.prototype.addTabindex=function(t){t.hasAttribute("tabindex")&&t.setAttribute(i.HtmlAttrs.OLDTAB,t.getAttribute("tabindex")),t.setAttribute("tabindex","0")},t.prototype.removeTabindex=function(t){t.hasAttribute(i.HtmlAttrs.OLDTAB)?(t.setAttribute("tabindex",t.getAttribute(i.HtmlAttrs.OLDTAB)),t.removeAttribute(i.HtmlAttrs.OLDTAB)):t.removeAttribute("tabindex")},t.prototype.addEvents=function(t){t.hasAttribute(i.HtmlAttrs.COUNTER)||(this.addEvent(t,"contextmenu",this.menu.post.bind(this.menu)),this.addEvent(t,"keydown",this.keydown.bind(this)),t.setAttribute(i.HtmlAttrs.COUNTER,this.counter.toString()),this.counter++)},t.prototype.addEvent=function(t,e,r){var n=i.HtmlAttrs[e.toUpperCase()+"FUNC"];this.attrMap[n+this.counter]=r,t.addEventListener(e,r)},t.prototype.removeEvents=function(t){if(t.hasAttribute(i.HtmlAttrs.COUNTER)){var e=t.getAttribute(i.HtmlAttrs.COUNTER);this.removeEvent(t,"contextmenu",e),this.removeEvent(t,"keydown",e),t.removeAttribute(i.HtmlAttrs.COUNTER)}},t.prototype.removeEvent=function(t,e,r){var n=i.HtmlAttrs[e.toUpperCase()+"FUNC"],o=this.attrMap[n+r];t.removeEventListener(e,o)},t.prototype.keydown=function(t){t.keyCode===s.KEY.SPACE&&(this.menu.post(t),t.preventDefault(),t.stopImmediatePropagation())},t}();e.MenuStore=a},2556:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MenuUtil=void 0,function(t){t.close=function(t){var e=t.menu;e.baseMenu?e.baseMenu.unpost():e.unpost()},t.getActiveElement=function(t){var e=t.menu;return(e.baseMenu?e.baseMenu:e).store.active},t.error=function(t,e){console.error("ContextMenu Error: "+e)},t.counter=function(){return e++};var e=0}(e.MenuUtil||(e.MenuUtil={}))},8853:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MOUSE=void 0,e.MOUSE={CLICK:"click",DBLCLICK:"dblclick",DOWN:"mousedown",UP:"mouseup",OVER:"mouseover",OUT:"mouseout",MOVE:"mousemove",SELECTEND:"selectend",SELECTSTART:"selectstart"}},6914:function(t,e,r){var n=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var a=r(3467),l=r(5073),c=r(3737),u=r(1409),p=r(9886),h=r(2965),f=r(385),d=r(6186),m=r(3463),y=r(7625),g=r(4834),b=r(2100),v=r(2308),_=function(){function t(t){var e=this;void 0===t&&(t=[]),this._initList=[["command",a.Command.fromJson.bind(a.Command)],["checkbox",u.Checkbox.fromJson.bind(u.Checkbox)],["combo",p.Combo.fromJson.bind(p.Combo)],["slider",y.Slider.fromJson.bind(y.Slider)],["label",h.Label.fromJson.bind(h.Label)],["radio",f.Radio.fromJson.bind(f.Radio)],["rule",m.Rule.fromJson.bind(m.Rule)],["submenu",d.Submenu.fromJson.bind(d.Submenu)],["contextMenu",l.ContextMenu.fromJson.bind(l.ContextMenu)],["subMenu",g.SubMenu.fromJson.bind(g.SubMenu)],["variable",c.Variable.fromJson.bind(c.Variable)],["items",this.items.bind(this)],["selectionMenu",b.SelectionMenu.fromJson.bind(b.SelectionMenu)],["selectionBox",b.SelectionBox.fromJson.bind(b.SelectionBox)]],this._factory=new v.ParserFactory(this._initList),t.forEach((function(t){var r=o(t,2),n=r[0],i=r[1];return e.factory.add(n,i)}))}return Object.defineProperty(t.prototype,"factory",{get:function(){return this._factory},enumerable:!1,configurable:!0}),t.prototype.items=function(t,e,r){var n,o,s=[];try{for(var a=i(e),l=a.next();!l.done;l=a.next()){var c=l.value,u=this.parse(c,r);u&&(r.items.push(u),c.disabled&&u.disable(),c.hidden&&s.push(u))}}catch(t){n={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return s.forEach((function(t){return t.hide()})),r.items},t.prototype.parse=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var o=t.type,i=n(t,["type"]),a=this.factory.get(o);return a?a.apply(void 0,s([this.factory,i],e)):null},t}();e.Parser=_},2308:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParserFactory=void 0;var r=function(){function t(t){this._parser=new Map(t)}return t.prototype.get=function(t){return this._parser.get(t)},t.prototype.add=function(t,e){this._parser.set(t,e)},t}();e.ParserFactory=r},2100:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionBox=e.SelectionMenu=void 0;var s=r(2556),a=r(2165),l=r(1484),c=r(4922),u=function(t){function e(e){var r=t.call(this)||this;return r.anchor=e,r.className=a.HtmlClasses.SELECTIONMENU,r.variablePool=r.anchor.menu.pool,r.baseMenu=r.anchor.menu,r}return o(e,t),e.fromJson=function(t,e,r){var n=e.title,o=e.values,i=e.variable,s=new this(r),a=t.get("label")(t,{content:n||"",id:n||"id"},s),l=t.get("rule")(t,{},s),c=o.map((function(e){return t.get("radio")(t,{content:e,variable:i,id:e},s)})),u=[a,l].concat(c);return s.items=u,s},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this),this.items.forEach((function(t){return t.html.classList.add(a.HtmlClasses.SELECTIONITEM)}))},e.prototype.display=function(){},e.prototype.right=function(t){this.anchor.right(t)},e.prototype.left=function(t){this.anchor.left(t)},e}(l.AbstractMenu);e.SelectionMenu=u;var p=function(t){function e(e,r,n,o){void 0===n&&(n="none"),void 0===o&&(o="vertical");var i=t.call(this,e,null,r)||this;return i.style=n,i.grid=o,i._selections=[],i.prefix="ctxt-selection",i._balanced=!0,i}return o(e,t),e.fromJson=function(t,e,r){var n=e.title,o=e.signature,i=e.selections,s=new this(n,o,e.order,e.grid);s.attachMenu(r);var a=i.map((function(e){return t.get("selectionMenu")(t,e,s)}));return s.selections=a,s},e.prototype.attachMenu=function(t){this.menu=t},Object.defineProperty(e.prototype,"selections",{get:function(){return this._selections},set:function(t){var e=this;this._selections=[],t.forEach((function(t){return e.addSelection(t)}))},enumerable:!1,configurable:!0}),e.prototype.addSelection=function(t){t.anchor=this,this._selections.push(t)},e.prototype.rowDiv=function(t){var e=this,r=document.createElement("div");this.contentDiv.appendChild(r);var n=t.map((function(t){return r.appendChild(t.html),t.html.id||(t.html.id=e.prefix+s.MenuUtil.counter()),t.html.getBoundingClientRect()})),o=n.map((function(t){return t.width})),i=o.reduce((function(t,e){return t+e}),0),l=n.reduce((function(t,e){return Math.max(t,e.height)}),0);return r.classList.add(a.HtmlClasses.SELECTIONDIVIDER),r.setAttribute("style","height: "+l+"px;"),[r,i,l,o]},e.prototype.display=function(){if(t.prototype.display.call(this),this.order(),this.selections.length){for(var e=[],r=0,n=[],o=this.getChunkSize(this.selections.length),s=function(t){var s=a.selections.slice(t,t+o),l=i(a.rowDiv(s),4),c=l[0],u=l[1],p=l[2],h=l[3];e.push(c),r=Math.max(r,u),s.forEach((function(t){return t.html.style.height=p+"px"})),n=a.combineColumn(n,h)},a=this,l=0;l<this.selections.length;l+=o)s(l);this._balanced&&(this.balanceColumn(e,n),r=n.reduce((function(t,e){return t+e}),20)),e.forEach((function(t){return t.style.width=r+"px"}))}},e.prototype.getChunkSize=function(t){switch(this.grid){case"square":return Math.floor(Math.sqrt(t));case"horizontal":return Math.floor(t/e.chunkSize);default:return e.chunkSize}},e.prototype.balanceColumn=function(t,e){t.forEach((function(t){for(var r=Array.from(t.children),n=0,o=void 0;o=r[n];n++)o.style.width=e[n]+"px"}))},e.prototype.combineColumn=function(t,e){for(var r=[],n=0;t[n]||e[n];){if(!t[n]){r=r.concat(e.slice(n));break}if(!e[n]){r=r.concat(t.slice(n));break}r.push(Math.max(t[n],e[n])),n++}return r},e.prototype.left=function(t){var e=this;this.move(t,(function(t){return(0===t?e.selections.length:t)-1}))},e.prototype.right=function(t){var e=this;this.move(t,(function(t){return t===e.selections.length-1?0:t+1}))},e.prototype.generateHtml=function(){t.prototype.generateHtml.call(this),this.html.classList.add(a.HtmlClasses.SELECTION)},e.prototype.generateContent=function(){var e=t.prototype.generateContent.call(this);return e.classList.add(a.HtmlClasses.SELECTIONBOX),e.removeAttribute("tabindex"),e},e.prototype.findSelection=function(t){var e=t.target,r=null;if(e.id&&(r=this.selections.find((function(t){return t.html.id===e.id}))),!r){var n=e.parentElement.id;r=this.selections.find((function(t){return t.html.id===n}))}return r},e.prototype.move=function(t,e){var r=this.findSelection(t);r.focused&&r.focused.unfocus();var n=e(this.selections.indexOf(r));this.selections[n].focus()},e.prototype.order=function(){this.selections.sort(e.orderMethod.get(this.style))},e.prototype.toJson=function(){return{type:""}},e.chunkSize=4,e.orderMethod=new Map([["alphabetical",function(t,e){return t.items[0].content.localeCompare(e.items[0].content)}],["none",function(t,e){return 1}],["decreasing",function(t,e){var r=t.items.length,n=e.items.length;return r<n?1:n<r?-1:0}],["increasing",function(t,e){var r=t.items.length,n=e.items.length;return r<n?-1:n<r?1:0}]]),e}(c.Info);e.SelectionBox=p},4834:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SubMenu=void 0;var i=function(t){function e(e){var r=t.call(this)||this;return r._anchor=e,r.variablePool=r.anchor.menu.pool,r.setBaseMenu(),r}return o(e,t),e.fromJson=function(t,e,r){var n=e.items,o=new this(r),i=t.get("items")(t,n,o);return o.items=i,o},Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},enumerable:!1,configurable:!0}),e.prototype.post=function(){if(this.anchor.menu.isPosted()){for(var e=this.anchor.html,r=this.html,n=this.baseMenu.frame,o=e.offsetWidth,i=o-2,s=0;e&&e!==n;)i+=e.offsetLeft,s+=e.offsetTop,e=e.parentNode;i+r.offsetWidth>document.body.offsetWidth-5&&(i=Math.max(5,i-o-r.offsetWidth+6)),t.prototype.post.call(this,i,s)}},e.prototype.display=function(){this.baseMenu.frame.appendChild(this.html)},e.prototype.setBaseMenu=function(){var t=this;do{t=t.anchor.menu}while(t instanceof e);this.baseMenu=t},e.prototype.left=function(t){this.focused=null,this.anchor.focus()},e.prototype.toJson=function(){return{type:""}},e}(r(1484).AbstractMenu);e.SubMenu=i},3737:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;var n=r(2556),o=function(){function t(t,e,r){this._name=t,this.getter=e,this.setter=r,this.items=[]}return t.fromJson=function(t,e,r){var n=new this(e.name,e.getter,e.setter);r.insert(n)},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t.prototype.getValue=function(t){try{return this.getter(t)}catch(t){return n.MenuUtil.error(t,"Command of variable "+this.name+" failed."),null}},t.prototype.setValue=function(t,e){try{this.setter(t,e)}catch(t){n.MenuUtil.error(t,"Command of variable "+this.name+" failed.")}this.update()},t.prototype.register=function(t){-1===this.items.indexOf(t)&&this.items.push(t)},t.prototype.unregister=function(t){var e=this.items.indexOf(t);-1!==e&&this.items.splice(e,1)},t.prototype.update=function(){this.items.forEach((function(t){return t.update()}))},t.prototype.registerCallback=function(t){this.items.forEach((function(e){return e.registerCallback(t)}))},t.prototype.unregisterCallback=function(t){this.items.forEach((function(e){return e.unregisterCallback(t)}))},t.prototype.toJson=function(){return{type:"variable",name:this.name,getter:this.getter.toString(),setter:this.setter.toString()}},t}();e.Variable=o},2358:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariablePool=void 0;var r=function(){function t(){this.pool={}}return t.prototype.insert=function(t){this.pool[t.name]=t},t.prototype.lookup=function(t){return this.pool[t]},t.prototype.remove=function(t){delete this.pool[t]},t.prototype.update=function(){for(var t in this.pool)this.pool[t].update()},t}();e.VariablePool=r},3921:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractAudioRenderer=void 0;const n=r(5897);e.AbstractAudioRenderer=class{constructor(){this.separator_=" "}setSeparator(t){this.separator_=t}getSeparator(){return"braille"===n.default.getInstance().modality?"":this.separator_}error(t){return null}merge(t){let e="";const r=t.length-1;for(let n,o=0;n=t[o];o++)if(e+=n.speech,o<r){const t=n.attributes.separator;e+=void 0!==t?t:this.getSeparator()}return e}finalize(t){return t}pauseValue(t){let e;switch(t){case"long":e=750;break;case"medium":e=500;break;case"short":e=250;break;default:e=parseInt(t,10)}return Math.floor(e*n.default.getInstance().getRate()/100)}}},4196:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AcssRenderer=void 0;const n=r(4440),o=r(8496),i=r(3706),s=r(182);class a extends s.MarkupRenderer{markup(t){this.setScaleFunction(-2,2,0,10,0);const e=i.personalityMarkup(t),r=[],n={open:[]};let o=null,s=!1;for(let t,a=0;t=e[a];a++){if(i.isMarkupElement(t)){i.mergeMarkup(n,t);continue}if(i.isPauseElement(t)){s&&(o=i.mergePause(o,t,Math.max));continue}const e='"'+this.merge(t.span)+'"';s=!0,o&&(r.push(this.pause(o)),o=null);const a=this.prosody_(n);r.push(a?"(text ("+a+") "+e+")":e)}return"(exp "+r.join(" ")+")"}error(t){return'(error "'+o.Move.get(t)+'")'}prosodyElement(t,e){switch(e=this.applyScaleFunction(e),t){case n.personalityProps.RATE:return"(richness . "+e+")";case n.personalityProps.PITCH:return"(average-pitch . "+e+")";case n.personalityProps.VOLUME:return"(stress . "+e+")"}return"(value . "+e+")"}pause(t){return"(pause . "+this.pauseValue(t[n.personalityProps.PAUSE])+")"}prosody_(t){const e=t.open,r=[];for(let n,o=0;n=e[o];o++)r.push(this.prosodyElement(n,t[n]));return r.join(" ")}}e.AcssRenderer=a},3706:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.isSpanElement=e.isPauseElement=e.isMarkupElement=e.personalityMarkup=e.sortClose=e.mergeMarkup=e.mergePause=void 0;const n=r(707),o=r(4440),i=r(9536);function s(t,e,r){return(r||function(r,n){return"number"==typeof r&&"number"==typeof n?r+n:"number"==typeof r?n:"number"==typeof n?r:[t,e].sort()[0]}).call(null,t,e)}e.mergePause=function(t,e,r){return t?{pause:s(t.pause,e.pause,r)}:e},e.mergeMarkup=function(t,e){delete t.open,e.close.forEach((e=>delete t[e])),e.open.forEach((r=>t[r]=e[r]));const r=Object.keys(t);t.open=r},e.sortClose=function(t,e){if(t.length<=1)return t;const r=[];for(let n,o=0;n=e[o],t.length;o++)n.close&&n.close.length&&n.close.forEach((function(e){const n=t.indexOf(e);-1!==n&&(r.unshift(e),t.splice(n,1))}));return r};let a={},l=[];function c(t,e){const r=t[t.length-1];if(r){if(f(e)&&f(r)){if(void 0===r.join)return void(r.span=r.span.concat(e.span));const t=r.span.pop(),n=e.span.shift();return r.span.push(t+r.join+n),r.span=r.span.concat(e.span),void(r.join=e.join)}h(e)&&h(r)?r.pause=s(r.pause,e.pause):t.push(e)}else t.push(e)}function u(t,e){t.rate&&(e.rate=t.rate),t.pitch&&(e.pitch=t.pitch),t.volume&&(e.volume=t.volume)}function p(t){return"object"==typeof t&&t.open}function h(t){return"object"==typeof t&&1===Object.keys(t).length&&Object.keys(t)[0]===o.personalityProps.PAUSE}function f(t){const e=Object.keys(t);return"object"==typeof t&&(1===e.length&&"span"===e[0]||2===e.length&&("span"===e[0]&&"join"===e[1]||"span"===e[1]&&"join"===e[0]))}function d(t,e,r,n,a,l=!1){if(l){const l=t[t.length-1];let c;if(l&&(c=l[o.personalityProps.JOIN]),l&&!e.speech&&a&&h(l)){const t=o.personalityProps.PAUSE;l[t]=s(l[t],a[t]),a=null}if(l&&e.speech&&0===Object.keys(r).length&&f(l)){if(void 0!==c){const t=l.span.pop();e=new i.Span(t.speech+c+e.speech,t.attributes)}l.span.push(e),e=new i.Span("",{}),l[o.personalityProps.JOIN]=n}}0!==Object.keys(r).length&&t.push(r),e.speech&&t.push({span:[e],join:n}),a&&t.push(a)}function m(t,e){if(!e)return t;const r={};for(const n of o.personalityPropList){const o=t[n],i=e[n];if(!o&&!i||o&&i&&o===i)continue;const s=o||0;p(r)||(r.open=[],r.close=[]),o||r.close.push(n),i||r.open.push(n),i&&o&&(r.close.push(n),r.open.push(n)),e[n]=s,r[n]=s,a[n]?a[n].push(s):a[n]=[s]}if(p(r)){let t=r.close.slice();for(;t.length>0;){let o=l.pop();const i=(0,n.setdifference)(o,t);if(t=(0,n.setdifference)(t,o),o=i,0!==t.length){if(0!==o.length){r.close=r.close.concat(o),r.open=r.open.concat(o);for(let t,n=0;t=o[n];n++)r[t]=e[t]}}else 0!==o.length&&l.push(o)}l.push(r.open)}return r}e.personalityMarkup=function(t){a={},l=[];let e=[];const r={};for(let n,i=0;n=t[i];i++){let t=null;const i=n.descriptionSpan(),s=n.personality,a=s[o.personalityProps.JOIN];delete s[o.personalityProps.JOIN],void 0!==s[o.personalityProps.PAUSE]&&(t={[o.personalityProps.PAUSE]:s[o.personalityProps.PAUSE]},delete s[o.personalityProps.PAUSE]);d(e,i,m(s,r),a,t,!0)}return e=e.concat(function(){const t=[];for(let e=l.length-1;e>=0;e--){const r=l[e];if(r.length){const e={open:[],close:[]};for(let t=0;t<r.length;t++){const n=r[t];e.close.push(n),e[n]=0}t.push(e)}}return t}()),e=function(t){const e={},r=[];for(let n,o=0;n=t[o];o++){if(!p(n)){c(r,n);continue}if(!n.close||1!==n.close.length||n.open.length){u(n,e),r.push(n);continue}let i=t[o+1];if(!i||f(i)){u(n,e),r.push(n);continue}const s=h(i)?i:null;s&&(i=t[o+2]),i&&p(i)&&i.open[0]===n.close[0]&&!i.close.length&&i[i.open[0]]===e[i.open[0]]?s?(c(r,s),o+=2):o+=1:(u(n,e),r.push(n))}return r}(e),e},e.isMarkupElement=p,e.isPauseElement=h,e.isSpanElement=f},7052:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AuditoryDescription=void 0;const n=r(2105),o=r(9536);class i{constructor({context:t,text:e,userValue:r,annotation:n,attributes:o,personality:i,layout:s}){this.context=t||"",this.text=e||"",this.userValue=r||"",this.annotation=n||"",this.attributes=o||{},this.personality=i||{},this.layout=s||""}static create(t,e={}){return t.text=n.Grammar.getInstance().apply(t.text,e),new i(t)}isEmpty(){return 0===this.context.length&&0===this.text.length&&0===this.userValue.length&&0===this.annotation.length}clone(){let t,e;if(this.personality){t={};for(const e in this.personality)t[e]=this.personality[e]}if(this.attributes){e={};for(const t in this.attributes)e[t]=this.attributes[t]}return new i({context:this.context,text:this.text,userValue:this.userValue,annotation:this.annotation,personality:t,attributes:e,layout:this.layout})}toString(){return'AuditoryDescription(context="'+this.context+'"  text="'+this.text+'"  userValue="'+this.userValue+'"  annotation="'+this.annotation+'")'}descriptionString(){return this.context&&this.text?this.context+" "+this.text:this.context||this.text}descriptionSpan(){return new o.Span(this.descriptionString(),this.attributes)}equals(t){return this.context===t.context&&this.text===t.text&&this.userValue===t.userValue&&this.annotation===t.annotation}}e.AuditoryDescription=i},8290:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.isXml=e.registerRenderer=e.error=e.finalize=e.merge=e.markup=e.getSeparator=e.setSeparator=void 0;const n=r(5897),o=r(4440),i=r(4196),s=r(8639),a=r(8990),l=r(6660),c=r(9536),u=r(7504),p=r(3757),h=r(4032),f=r(2456),d=new u.SsmlRenderer,m=new Map([[o.Markup.NONE,new h.StringRenderer],[o.Markup.PUNCTUATION,new a.PunctuationRenderer],[o.Markup.LAYOUT,new s.LayoutRenderer],[o.Markup.ACSS,new i.AcssRenderer],[o.Markup.SABLE,new l.SableRenderer],[o.Markup.VOICEXML,d],[o.Markup.SSML,d],[o.Markup.SSML_STEP,new p.SsmlStepRenderer]]);e.setSeparator=function(t){const e=m.get(n.default.getInstance().markup);e&&e.setSeparator(t)},e.getSeparator=function(){const t=m.get(n.default.getInstance().markup);return t?t.getSeparator():""},e.markup=function(t){const e=m.get(n.default.getInstance().markup);return e?e.markup(t):""},e.merge=function(t){const e=t.map((t=>"string"==typeof t?new c.Span(t,{}):t)),r=m.get(n.default.getInstance().markup);return r?r.merge(e):t.join()},e.finalize=function(t){const e=m.get(n.default.getInstance().markup);return e?e.finalize(t):t},e.error=function(t){const e=m.get(n.default.getInstance().markup);return e?e.error(t):""},e.registerRenderer=function(t,e){m.set(t,e)},e.isXml=function(){return m.get(n.default.getInstance().markup)instanceof f.XmlRenderer}},8639:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.LayoutRenderer=void 0;const n=r(2057),o=r(5740),i=r(4440),s=r(3706),a=r(2456);class l extends a.XmlRenderer{finalize(t){return function(t){c="";const e=o.parseInput(`<all>${t}</all>`);return n.Debugger.getInstance().output(o.formatXml(e.toString())),c=f(e),c}(t)}pause(t){return""}prosodyElement(t,e){return t===i.personalityProps.LAYOUT?`<${e}>`:""}closeTag(t){return`</${t}>`}markup(t){const e=[];let r=[];for(const n of t){if(!n.layout){r.push(n);continue}e.push(this.processContent(r)),r=[];const t=n.layout;t.match(/^begin/)?e.push("<"+t.replace(/^begin/,"")+">"):t.match(/^end/)?e.push("</"+t.replace(/^end/,"")+">"):console.warn("Something went wrong with layout markup: "+t)}return e.push(this.processContent(r)),e.join("")}processContent(t){const e=[],r=s.personalityMarkup(t);for(let t,n=0;t=r[n];n++)t.span?e.push(this.merge(t.span)):s.isPauseElement(t);return e.join("")}}e.LayoutRenderer=l;let c="";const u={TABLE:function(t){let e=g(t);e.forEach((t=>{t.cells=t.cells.slice(1).slice(0,-1),t.width=t.width.slice(1).slice(0,-1)}));const[r,n]=b(e);return e=v(e,n),_(e,r)},CASES:function(t){let e=g(t);e.forEach((t=>{t.cells=t.cells.slice(0,-1),t.width=t.width.slice(0,-1)}));const[r,n]=b(e);return e=v(e,n),_(e,r)},CAYLEY:function(t){let e=g(t);e.forEach((t=>{t.cells=t.cells.slice(1).slice(0,-1),t.width=t.width.slice(1).slice(0,-1),t.sep=t.sep+t.sep}));const[r,n]=b(e),o={lfence:"",rfence:"",cells:n.map((t=>"\u2810"+new Array(t).join("\u2812"))),width:n,height:1,sep:e[0].sep};return e.splice(1,0,o),e=v(e,n),_(e,r)},MATRIX:function(t){let e=g(t);const[r,n]=b(e);return e=v(e,n),_(e,r)},CELL:f,FENCE:f,ROW:f,FRACTION:function(t){const[e,r,,n,o]=Array.from(t.childNodes),i=p(r),s=p(n),a=m(i),l=m(s);let c=Math.max(a,l);const u=e+new Array(c+1).join("\u2812")+o;return c=u.length,`${x(i,c)}\n${u}\n${x(s,c)}`},NUMERATOR:E,DENOMINATOR:E};function p(t){const e=o.tagName(t),r=u[e];return r?r(t):t.textContent}function h(t,e){if(!t||!e)return t+e;const r=d(t),n=d(e),o=r-n;t=o<0?y(t,n,m(t)):t,e=o>0?y(e,r,m(e)):e;const i=t.split(/\r\n|\r|\n/),s=e.split(/\r\n|\r|\n/),a=[];for(let t=0;t<i.length;t++)a.push(i[t]+s[t]);return a.join("\n")}function f(t){let e="";for(const r of Array.from(t.childNodes))e=r.nodeType!==o.NodeType.TEXT_NODE?h(e,p(r)):h(e,r.textContent);return e}function d(t){return t.split(/\r\n|\r|\n/).length}function m(t){return t.split(/\r\n|\r|\n/).reduce(((t,e)=>Math.max(e.length,t)),0)}function y(t,e,r){return t=function(t,e){const r=e-d(t);return t+(r>0?new Array(r+1).join("\n"):"")}(t,e),function(t,e){const r=t.split(/\r\n|\r|\n/),n=[];for(const t of r){const r=e-t.length;n.push(t+(r>0?new Array(r+1).join("\u2800"):""))}return n.join("\n")}(t,r)}function g(t){const e=Array.from(t.childNodes),r=[];for(const t of e)t.nodeType===o.NodeType.ELEMENT_NODE&&r.push(O(t));return r}function b(t){const e=t.reduce(((t,e)=>Math.max(e.height,t)),0),r=[];for(let e=0;e<t[0].width.length;e++)r.push(t.map((t=>t.width[e])).reduce(((t,e)=>Math.max(t,e)),0));return[e,r]}function v(t,e){const r=[];for(const n of t){if(0===n.height)continue;const t=[];for(let r=0;r<n.cells.length;r++)t.push(y(n.cells[r],n.height,e[r]));n.cells=t,r.push(n)}return r}function _(t,e){if(1===e)return t.map((t=>t.lfence+t.cells.join(t.sep)+t.rfence)).join("\n");const r=[];for(const e of t){const t=S(e.sep,e.height);let n=e.cells.shift();for(;e.cells.length;)n=h(n,t),n=h(n,e.cells.shift());n=h(S(e.lfence,e.height),n),n=h(n,S(e.rfence,e.height)),r.push(n),r.push(e.lfence+new Array(m(n)-3).join(e.sep)+e.rfence)}return r.slice(0,-1).join("\n")}function S(t,e){let r="";for(;e;)r+=t+"\n",e--;return r.slice(0,-1)}function M(t){return t.nodeType===o.NodeType.ELEMENT_NODE&&"FENCE"===o.tagName(t)?p(t):""}function O(t){const e=Array.from(t.childNodes),r=M(e[0]),n=M(e[e.length-1]);r&&e.shift(),n&&e.pop();let i="";const s=[];for(const t of e){if(t.nodeType===o.NodeType.TEXT_NODE){i=t.textContent;continue}const e=p(t);s.push(e)}return{lfence:r,rfence:n,sep:i,cells:s,height:s.reduce(((t,e)=>Math.max(d(e),t)),0),width:s.map(m)}}function x(t,e){const r=(e-m(t))/2,[n,o]=Math.floor(r)===r?[r,r]:[Math.floor(r),Math.ceil(r)],i=t.split(/\r\n|\r|\n/),s=[],[a,l]=[new Array(n+1).join("\u2800"),new Array(o+1).join("\u2800")];for(const t of i)s.push(a+t+l);return s.join("\n")}function E(t){const e=t.firstChild,r=f(t);if(e&&e.nodeType===o.NodeType.ELEMENT_NODE){if("ENGLISH"===o.tagName(e))return"\u2830"+r;if("NUMBER"===o.tagName(e))return"\u283c"+r}return r}},182:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.MarkupRenderer=void 0;const n=r(4440),o=r(3921);class i extends o.AbstractAudioRenderer{constructor(){super(...arguments),this.ignoreElements=[n.personalityProps.LAYOUT],this.scaleFunction=null}setScaleFunction(t,e,r,n,o=0){this.scaleFunction=i=>{const s=(i-t)/(e-t),a=r*(1-s)+n*s;return+(Math.round(a+"e+"+o)+"e-"+o)}}applyScaleFunction(t){return this.scaleFunction?this.scaleFunction(t):t}ignoreElement(t){return-1!==this.ignoreElements.indexOf(t)}}e.MarkupRenderer=i},8990:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.PunctuationRenderer=void 0;const n=r(4440),o=r(3921),i=r(3706);class s extends o.AbstractAudioRenderer{markup(t){const e=i.personalityMarkup(t);let r="",o=null,s=!1;for(let t,a=0;t=e[a];a++)i.isMarkupElement(t)||(i.isPauseElement(t)?s&&(o=i.mergePause(o,t,Math.max)):(o&&(r+=this.pause(o[n.personalityProps.PAUSE]),o=null),r+=(s?this.getSeparator():"")+this.merge(t.span),s=!0));return r}pause(t){let e;return e="number"==typeof t?t<=250?"short":t<=500?"medium":"long":t,s.PAUSE_PUNCTUATION.get(e)||""}}e.PunctuationRenderer=s,s.PAUSE_PUNCTUATION=new Map([["short",","],["medium",";"],["long","."]])},6660:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SableRenderer=void 0;const n=r(4440),o=r(2456);class i extends o.XmlRenderer{finalize(t){return'<?xml version="1.0"?><!DOCTYPE SABLE PUBLIC "-//SABLE//DTD SABLE speech mark up//EN" "Sable.v0_2.dtd" []><SABLE>'+this.getSeparator()+t+this.getSeparator()+"</SABLE>"}pause(t){return'<BREAK MSEC="'+this.pauseValue(t[n.personalityProps.PAUSE])+'"/>'}prosodyElement(t,e){switch(e=this.applyScaleFunction(e),t){case n.personalityProps.PITCH:return'<PITCH RANGE="'+e+'%">';case n.personalityProps.RATE:return'<RATE SPEED="'+e+'%">';case n.personalityProps.VOLUME:return'<VOLUME LEVEL="'+e+'%">';default:return"<"+t.toUpperCase()+' VALUE="'+e+'">'}}closeTag(t){return"</"+t.toUpperCase()+">"}}e.SableRenderer=i},9536:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;e.Span=class{constructor(t,e){this.speech=t,this.attributes=e}}},7504:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SsmlRenderer=void 0;const n=r(5897),o=r(4440),i=r(2456);class s extends i.XmlRenderer{finalize(t){return'<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis"><prosody rate="'+n.default.getInstance().getRate()+'%">'+this.getSeparator()+t+this.getSeparator()+"</prosody></speak>"}pause(t){return'<break time="'+this.pauseValue(t[o.personalityProps.PAUSE])+'ms"/>'}prosodyElement(t,e){const r=(e=Math.floor(this.applyScaleFunction(e)))<0?e.toString():"+"+e.toString();return"<prosody "+t.toLowerCase()+'="'+r+(t===o.personalityProps.VOLUME?">":'%">')}closeTag(t){return"</prosody>"}}e.SsmlRenderer=s},3757:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SsmlStepRenderer=void 0;const n=r(7504);class o extends n.SsmlRenderer{markup(t){return o.MARKS={},super.markup(t)}merge(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r],i=n.attributes.extid;i&&!o.MARKS[i]&&(e.push('<mark name="'+i+'"/>'),o.MARKS[i]=!0),1===n.speech.length&&n.speech.match(/[a-zA-Z]/)?e.push('<say-as interpret-as="'+o.CHARACTER_ATTR+'">'+n.speech+"</say-as>"):e.push(n.speech)}return e.join(this.getSeparator())}}e.SsmlStepRenderer=o,o.CHARACTER_ATTR="character",o.MARKS={}},4032:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.StringRenderer=void 0;const n=r(3921),o=r(3706);class i extends n.AbstractAudioRenderer{markup(t){let e="";const r=(0,o.personalityMarkup)(t).filter((t=>t.span));if(!r.length)return e;const n=r.length-1;for(let t,o=0;t=r[o];o++){if(t.span&&(e+=this.merge(t.span)),o>=n)continue;const r=t.join;e+=void 0===r?this.getSeparator():r}return e}}e.StringRenderer=i},2456:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.XmlRenderer=void 0;const n=r(5897),o=r(3706),i=r(182);class s extends i.MarkupRenderer{markup(t){this.setScaleFunction(-2,2,-100,100,2);const e=o.personalityMarkup(t),r=[],i=[];for(let t,s=0;t=e[s];s++)if(t.span)r.push(this.merge(t.span));else if(o.isPauseElement(t))r.push(this.pause(t));else{if(t.close.length)for(let e=0;e<t.close.length;e++){const e=i.pop();if(-1===t.close.indexOf(e))throw new n.SREError("Unknown closing markup element: "+e);r.push(this.closeTag(e))}if(t.open.length){o.sortClose(t.open.slice(),e.slice(s+1)).forEach((e=>{r.push(this.prosodyElement(e,t[e])),i.push(e)}))}}return r.join(" ")}}e.XmlRenderer=s},707:function(t,e){function r(t,e){return t?e?t.filter((t=>e.indexOf(t)<0)):t:[]}Object.defineProperty(e,"__esModule",{value:!0}),e.union=e.setdifference=e.interleaveLists=e.removeEmpty=void 0,e.removeEmpty=function(t){return t.filter((t=>t))},e.interleaveLists=function(t,e){const r=[];for(;t.length||e.length;)t.length&&r.push(t.shift()),e.length&&r.push(e.shift());return r},e.setdifference=r,e.union=function(t,e){return t&&e?t.concat(r(e,t)):t||e||[]}},2139:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.loadScript=e.loadMapsForIE_=e.installWGXpath_=e.loadWGXpath_=e.mapsForIE=e.detectEdge=e.detectIE=void 0;const n=r(2315),o=r(5274);function i(t){l(n.default.WGXpath),s(t)}function s(t,e){let r=e||1;"undefined"==typeof wgxpath&&r<10?setTimeout((function(){s(t,r++)}),200):r>=10||(n.default.wgxpath=wgxpath,t?n.default.wgxpath.install({document:document}):n.default.wgxpath.install(),o.xpath.evaluate=document.evaluate,o.xpath.result=XPathResult,o.xpath.createNSResolver=document.createNSResolver)}function a(){l(n.default.mathmapsIePath)}function l(t){const e=n.default.document.createElement("script");e.type="text/javascript",e.src=t,n.default.document.head?n.default.document.head.appendChild(e):n.default.document.body.appendChild(e)}e.detectIE=function(){return"undefined"!=typeof window&&"ActiveXObject"in window&&"clipboardData"in window&&(a(),i(),!0)},e.detectEdge=function(){var t;return"undefined"!=typeof window&&"MSGestureEvent"in window&&null===(null===(t=window.chrome)||void 0===t?void 0:t.loadTimes)&&(document.evaluate=null,i(!0),!0)},e.mapsForIE=null,e.loadWGXpath_=i,e.installWGXpath_=s,e.loadMapsForIE_=a,e.loadScript=l},2057:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Debugger=void 0;const n=r(2315);class o{constructor(){this.isActive_=!1,this.outputFunction_=console.info,this.stream_=null}static getInstance(){return o.instance=o.instance||new o,o.instance}init(t){t&&this.startDebugFile_(t),this.isActive_=!0}output(...t){this.isActive_&&this.output_(t)}generateOutput(t){this.isActive_&&this.output_(t.apply(t,[]))}exit(t=(()=>{})){this.isActive_&&this.stream_&&this.stream_.end("","",t)}startDebugFile_(t){this.stream_=n.default.fs.createWriteStream(t),this.outputFunction_=function(...t){this.stream_.write(t.join(" ")),this.stream_.write("\n")}.bind(this),this.stream_.on("error",function(t){console.info("Invalid log file. Debug information sent to console."),this.outputFunction_=console.info}.bind(this)),this.stream_.on("finish",(function(){console.info("Finalizing debug file.")}))}output_(t){this.outputFunction_.apply(console.info===this.outputFunction_?console:this.outputFunction_,["Speech Rule Engine Debugger:"].concat(t))}}e.Debugger=o},5740:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeXml=e.cloneNode=e.tagName=e.querySelectorAll=e.querySelectorAllByAttrValue=e.querySelectorAllByAttr=e.formatXml=e.createTextNode=e.createElementNS=e.createElement=e.replaceNode=e.NodeType=e.parseInput=e.XML_ENTITIES=e.trimInput_=e.toArray=void 0;const n=r(5897),o=r(4440),i=r(2315),s=r(5274);function a(t){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r]);return e}function l(t){return(t=t.replace(/&nbsp;/g,"\xa0")).replace(/>[ \f\n\r\t\v\u200b]+</g,"><").trim()}function c(t,e){if(!e)return[!1,""];const r=t.match(/^<([^> ]+).*>/),n=e.match(/^<\/([^>]+)>(.*)/);return r&&n&&r[1]===n[1]?[!0,n[2]]:[!1,""]}e.toArray=a,e.trimInput_=l,e.XML_ENTITIES={"&lt;":!0,"&gt;":!0,"&amp;":!0,"&quot;":!0,"&apos;":!0},e.parseInput=function(t){const e=new i.default.xmldom.DOMParser,r=l(t),a=!!r.match(/&(?!lt|gt|amp|quot|apos)\w+;/g);if(!r)throw new Error("Empty input!");try{const t=e.parseFromString(r,a?"text/html":"text/xml");return n.default.getInstance().mode===o.Mode.HTTP?(s.xpath.currentDocument=t,a?t.body.childNodes[0]:t.documentElement):t.documentElement}catch(t){throw new n.SREError("Illegal input: "+t.message)}},function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",t[t.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",t[t.ENTITY_NODE=6]="ENTITY_NODE",t[t.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE",t[t.DOCUMENT_NODE=9]="DOCUMENT_NODE",t[t.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",t[t.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",t[t.NOTATION_NODE=12]="NOTATION_NODE"}(e.NodeType||(e.NodeType={})),e.replaceNode=function(t,e){t.parentNode&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},e.createElement=function(t){return i.default.document.createElement(t)},e.createElementNS=function(t,e){return i.default.document.createElementNS(t,e)},e.createTextNode=function(t){return i.default.document.createTextNode(t)},e.formatXml=function(t){let e="",r=/(>)(<)(\/*)/g,n=0,o=(t=t.replace(r,"$1\r\n$2$3")).split("\r\n");for(r=/(\.)*(<)(\/*)/g,o=o.map((t=>t.replace(r,"$1\r\n$2$3").split("\r\n"))).reduce(((t,e)=>t.concat(e)),[]);o.length;){let t=o.shift();if(!t)continue;let r=0;if(t.match(/^<\w[^>/]*>[^>]+$/)){const e=c(t,o[0]);e[0]?e[1]?(t+=o.shift().slice(0,-e[1].length),e[1].trim()&&o.unshift(e[1])):t+=o.shift():r=1}else if(t.match(/^<\/\w/))0!==n&&(n-=1);else if(t.match(/^<\w[^>]*[^/]>.*$/))r=1;else if(t.match(/^<\w[^>]*\/>.+$/)){const e=t.indexOf(">")+1;t.slice(e).trim()&&o.unshift(),t=t.slice(0,e)}else r=0;e+=new Array(n+1).join("  ")+t+"\r\n",n+=r}return e},e.querySelectorAllByAttr=function(t,e){return t.querySelectorAll?a(t.querySelectorAll(`[${e}]`)):s.evalXPath(`.//*[@${e}]`,t)},e.querySelectorAllByAttrValue=function(t,e,r){return t.querySelectorAll?a(t.querySelectorAll(`[${e}="${r}"]`)):s.evalXPath(`.//*[@${e}="${r}"]`,t)},e.querySelectorAll=function(t,e){return t.querySelectorAll?a(t.querySelectorAll(e)):s.evalXPath(`.//${e}`,t)},e.tagName=function(t){return t.tagName.toUpperCase()},e.cloneNode=function(t){return t.cloneNode(!0)},e.serializeXml=function(t){return(new i.default.xmldom.XMLSerializer).serializeToString(t)}},5897:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.EnginePromise=e.SREError=void 0;const n=r(1676),o=r(4440),i=r(2057),s=r(1377);class a extends Error{constructor(t=""){super(),this.message=t,this.name="SRE Error"}}e.SREError=a;class l{constructor(){this.customLoader=null,this.parsers={},this.comparator=null,this.mode=o.Mode.SYNC,this.init=!0,this.delay=!1,this.comparators={},this.domain="mathspeak",this.style=n.DynamicCstr.DEFAULT_VALUES[n.Axis.STYLE],this._defaultLocale=n.DynamicCstr.DEFAULT_VALUES[n.Axis.LOCALE],this.locale=this.defaultLocale,this.subiso="",this.modality=n.DynamicCstr.DEFAULT_VALUES[n.Axis.MODALITY],this.speech=o.Speech.NONE,this.markup=o.Markup.NONE,this.walker="Table",this.structure=!1,this.ruleSets=[],this.strict=!1,this.isIE=!1,this.isEdge=!1,this.rate="100",this.pprint=!1,this.config=!1,this.rules="",this.prune="",this.evaluator=l.defaultEvaluator,this.defaultParser=new n.DynamicCstrParser(n.DynamicCstr.DEFAULT_ORDER),this.parser=this.defaultParser,this.dynamicCstr=n.DynamicCstr.defaultCstr()}set defaultLocale(t){this._defaultLocale=s.Variables.ensureLocale(t,this._defaultLocale)}get defaultLocale(){return this._defaultLocale}static getInstance(){return l.instance=l.instance||new l,l.instance}static defaultEvaluator(t,e){return t}static evaluateNode(t){return l.nodeEvaluator(t)}getRate(){const t=parseInt(this.rate,10);return isNaN(t)?100:t}setDynamicCstr(t){if(this.defaultLocale&&(n.DynamicCstr.DEFAULT_VALUES[n.Axis.LOCALE]=this.defaultLocale),t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const o=e[r];if(-1!==n.DynamicCstr.DEFAULT_ORDER.indexOf(o)){const e=t[o];this[o]=e}}}o.DOMAIN_TO_STYLES[this.domain]=this.style;const e=[this.locale,this.modality,this.domain,this.style].join("."),r=n.DynamicProperties.createProp([n.DynamicCstr.DEFAULT_VALUES[n.Axis.LOCALE]],[n.DynamicCstr.DEFAULT_VALUES[n.Axis.MODALITY]],[n.DynamicCstr.DEFAULT_VALUES[n.Axis.DOMAIN]],[n.DynamicCstr.DEFAULT_VALUES[n.Axis.STYLE]]),i=this.comparators[this.domain],s=this.parsers[this.domain];this.parser=s||this.defaultParser,this.dynamicCstr=this.parser.parse(e),this.dynamicCstr.updateProperties(r.getProperties()),this.comparator=i?i():new n.DefaultComparator(this.dynamicCstr)}configurate(t){this.mode!==o.Mode.HTTP||this.config||(!function(t){const e=document.documentElement.querySelectorAll('script[type="text/x-sre-config"]');for(let r=0,n=e.length;r<n;r++){let n;try{n=e[r].innerHTML;const o=JSON.parse(n);for(const e in o)t[e]=o[e]}catch(t){i.Debugger.getInstance().output("Illegal configuration ",n)}}}(t),this.config=!0),function(t){if("undefined"!=typeof SREfeature)for(const[e,r]of Object.entries(SREfeature))t[e]=r}(t)}setCustomLoader(t){t&&(this.customLoader=t)}}e.default=l,l.BINARY_FEATURES=["strict","structure","pprint"],l.STRING_FEATURES=["markup","style","domain","speech","walker","defaultLocale","locale","delay","modality","rate","rules","subiso","prune"],l.nodeEvaluator=function(t){return[]};class c{static get(t=l.getInstance().locale){return c.promises[t]||Promise.resolve("")}static getall(){return Promise.all(Object.values(c.promises))}}e.EnginePromise=c,c.loaded={},c.promises={}},4440:function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),e.DOMAIN_TO_STYLES=e.Markup=e.Speech=e.personalityPropList=e.personalityProps=e.Mode=void 0,function(t){t.SYNC="sync",t.ASYNC="async",t.HTTP="http"}(e.Mode||(e.Mode={})),function(t){t.PITCH="pitch",t.RATE="rate",t.VOLUME="volume",t.PAUSE="pause",t.JOIN="join",t.LAYOUT="layout"}(r=e.personalityProps||(e.personalityProps={})),e.personalityPropList=[r.PITCH,r.RATE,r.VOLUME,r.PAUSE,r.JOIN],function(t){t.NONE="none",t.SHALLOW="shallow",t.DEEP="deep"}(e.Speech||(e.Speech={})),function(t){t.NONE="none",t.LAYOUT="layout",t.PUNCTUATION="punctuation",t.SSML="ssml",t.SSML_STEP="ssml_step",t.ACSS="acss",t.SABLE="sable",t.VOICEXML="voicexml"}(e.Markup||(e.Markup={})),e.DOMAIN_TO_STYLES={mathspeak:"default",clearspeak:"default"}},6828:function(t,e,r){var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{l(n.next(t))}catch(t){i(t)}}function a(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.setup=void 0;const o=r(7491),i=r(6141),s=r(2139),a=r(5897),l=r(7248),c=r(2315);e.setup=function(t){return n(this,void 0,void 0,(function*(){const e=a.default.getInstance();"default"!==t.domain||"speech"!==t.modality&&t.modality&&"speech"!==e.modality||(t.domain="mathspeak");const r=r=>{void 0!==t[r]&&(e[r]=t[r])};return r("mode"),e.configurate(t),a.default.BINARY_FEATURES.forEach((r=>{void 0!==t[r]&&(e[r]=!!t[r])})),a.default.STRING_FEATURES.forEach(r),t.json&&(c.default.jsonPath=l.makePath(t.json)),t.xpath&&(c.default.WGXpath=t.xpath),e.setCustomLoader(t.custom),function(t){t.isIE=s.detectIE(),t.isEdge=s.detectEdge()}(e),o.setLocale(),e.setDynamicCstr(),e.init?(a.EnginePromise.promises.init=new Promise(((t,e)=>{setTimeout((()=>{t("init")}),10)})),e.init=!1,a.EnginePromise.get()):e.delay?(e.delay=!1,a.EnginePromise.get()):i.loadLocale()}))}},8496:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Event=e.EventType=e.Move=e.KeyCode=void 0,function(t){t[t.ENTER=13]="ENTER",t[t.ESC=27]="ESC",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.TAB=9]="TAB",t[t.LESS=188]="LESS",t[t.GREATER=190]="GREATER",t[t.DASH=189]="DASH",t[t.ZERO=48]="ZERO",t[t.ONE=49]="ONE",t[t.TWO=50]="TWO",t[t.THREE=51]="THREE",t[t.FOUR=52]="FOUR",t[t.FIVE=53]="FIVE",t[t.SIX=54]="SIX",t[t.SEVEN=55]="SEVEN",t[t.EIGHT=56]="EIGHT",t[t.NINE=57]="NINE",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z"}(e.KeyCode||(e.KeyCode={})),e.Move=new Map([[13,"ENTER"],[27,"ESC"],[32,"SPACE"],[33,"PAGE_UP"],[34,"PAGE_DOWN"],[35,"END"],[36,"HOME"],[37,"LEFT"],[38,"UP"],[39,"RIGHT"],[40,"DOWN"],[9,"TAB"],[188,"LESS"],[190,"GREATER"],[189,"DASH"],[48,"ZERO"],[49,"ONE"],[50,"TWO"],[51,"THREE"],[52,"FOUR"],[53,"FIVE"],[54,"SIX"],[55,"SEVEN"],[56,"EIGHT"],[57,"NINE"],[65,"A"],[66,"B"],[67,"C"],[68,"D"],[69,"E"],[70,"F"],[71,"G"],[72,"H"],[73,"I"],[74,"J"],[75,"K"],[76,"L"],[77,"M"],[78,"N"],[79,"O"],[80,"P"],[81,"Q"],[82,"R"],[83,"S"],[84,"T"],[85,"U"],[86,"V"],[87,"W"],[88,"X"],[89,"Y"],[90,"Z"]]),function(t){t.CLICK="click",t.DBLCLICK="dblclick",t.MOUSEDOWN="mousedown",t.MOUSEUP="mouseup",t.MOUSEOVER="mouseover",t.MOUSEOUT="mouseout",t.MOUSEMOVE="mousemove",t.SELECTSTART="selectstart",t.KEYPRESS="keypress",t.KEYDOWN="keydown",t.KEYUP="keyup",t.TOUCHSTART="touchstart",t.TOUCHMOVE="touchmove",t.TOUCHEND="touchend",t.TOUCHCANCEL="touchcancel"}(e.EventType||(e.EventType={}));e.Event=class{constructor(t,e,r){this.src=t,this.type=e,this.callback=r}add(){this.src.addEventListener(this.type,this.callback)}remove(){this.src.removeEventListener(this.type,this.callback)}}},7248:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.localePath=e.makePath=void 0;const n=r(2315);function o(t){return t.match("/$")?t:t+"/"}e.makePath=o,e.localePath=function(t,e="json"){return o(n.default.jsonPath)+t+(e.match(/^\./)?e:"."+e)}},3769:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.KeyProcessor=e.Processor=void 0;const n=r(8496);class o{constructor(t,e){this.name=t,this.process=e.processor,this.postprocess=e.postprocessor||((t,e)=>t),this.processor=this.postprocess?function(t){return this.postprocess(this.process(t),t)}:this.process,this.print=e.print||o.stringify_,this.pprint=e.pprint||this.print}static stringify_(t){return t?t.toString():t}}e.Processor=o,o.LocalState={walker:null,speechGenerator:null,highlighter:null};class i extends o{constructor(t,e){super(t,e),this.key=e.key||i.getKey_}static getKey_(t){return"string"==typeof t?n.KeyCode[t.toUpperCase()]:t}}e.KeyProcessor=i},6499:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.keypress=e.output=e.print=e.process=e.set=void 0;const n=r(8290),o=r(5714),i=r(3090),s=r(4356),a=r(1414),l=r(9552),c=r(9543),u=r(3362),p=r(1204),h=r(5740),f=r(5897),d=r(4440),m=r(3769),y=r(5274),g=new Map;function b(t){g.set(t.name,t)}function v(t){const e=g.get(t);if(!e)throw new f.SREError("Unknown processor "+t);return e}function _(t,e){const r=v(t);try{return r.processor(e)}catch(t){throw new f.SREError("Processing error for expression "+e)}}function S(t,e){const r=v(t);return f.default.getInstance().pprint?r.pprint(e):r.print(e)}e.set=b,e.process=_,e.print=S,e.output=function(t,e){const r=v(t);try{const t=r.processor(e);return f.default.getInstance().pprint?r.pprint(t):r.print(t)}catch(t){throw new f.SREError("Processing error for expression "+e)}},e.keypress=function(t,e){const r=v(t),n=r instanceof m.KeyProcessor?r.key(e):e,o=r.processor(n);return f.default.getInstance().pprint?r.pprint(o):r.print(o)},b(new m.Processor("semantic",{processor:function(t){const e=h.parseInput(t);return a.xmlTree(e)},postprocessor:function(t,e){const r=f.default.getInstance().speech;if(r===d.Speech.NONE)return t;const o=h.cloneNode(t);let i=c.computeMarkup(o);if(r===d.Speech.SHALLOW)return t.setAttribute("speech",n.finalize(i)),t;const s=y.evalXPath(".//*[@id]",t),a=y.evalXPath(".//*[@id]",o);for(let t,e,r=0;t=s[r],e=a[r];r++)i=c.computeMarkup(e),t.setAttribute("speech",n.finalize(i));return t},pprint:function(t){return h.formatXml(t.toString())}})),b(new m.Processor("speech",{processor:function(t){const e=h.parseInput(t),r=a.xmlTree(e),o=c.computeSpeech(r);return n.finalize(n.markup(o))},pprint:function(t){const e=t.toString();return n.isXml()?h.formatXml(e):e}})),b(new m.Processor("json",{processor:function(t){const e=h.parseInput(t);return a.getTree(e).toJson()},postprocessor:function(t,e){const r=f.default.getInstance().speech;if(r===d.Speech.NONE)return t;const o=h.parseInput(e),i=a.xmlTree(o),s=c.computeMarkup(i);if(r===d.Speech.SHALLOW)return t.stree.speech=n.finalize(s),t;const l=t=>{const e=y.evalXPath(`.//*[@id=${t.id}]`,i)[0],r=c.computeMarkup(e);t.speech=n.finalize(r),t.children&&t.children.forEach(l)};return l(t.stree),t},print:function(t){return JSON.stringify(t)},pprint:function(t){return JSON.stringify(t,null,2)}})),b(new m.Processor("description",{processor:function(t){const e=h.parseInput(t),r=a.xmlTree(e);return c.computeSpeech(r)},print:function(t){return JSON.stringify(t)},pprint:function(t){return JSON.stringify(t,null,2)}})),b(new m.Processor("enriched",{processor:function(t){return o.semanticMathmlSync(t)},postprocessor:function(t,e){const r=p.getSemanticRoot(t);let n;switch(f.default.getInstance().speech){case d.Speech.NONE:break;case d.Speech.SHALLOW:n=l.generator("Adhoc"),n.getSpeech(r,t);break;case d.Speech.DEEP:n=l.generator("Tree"),n.getSpeech(t,t)}return t},pprint:function(t){return h.formatXml(t.toString())}})),b(new m.Processor("walker",{processor:function(t){const e=l.generator("Node");m.Processor.LocalState.speechGenerator=e,e.setOptions({modality:f.default.getInstance().modality,locale:f.default.getInstance().locale,domain:f.default.getInstance().domain,style:f.default.getInstance().style}),m.Processor.LocalState.highlighter=i.highlighter({color:"black"},{color:"white"},{renderer:"NativeMML"});const r=_("enriched",t),n=S("enriched",r);return m.Processor.LocalState.walker=u.walker(f.default.getInstance().walker,r,e,m.Processor.LocalState.highlighter,n),m.Processor.LocalState.walker},print:function(t){return m.Processor.LocalState.walker.speech()}})),b(new m.KeyProcessor("move",{processor:function(t){if(!m.Processor.LocalState.walker)return null;return!1===m.Processor.LocalState.walker.move(t)?n.error(t):m.Processor.LocalState.walker.speech()}})),b(new m.Processor("number",{processor:function(t){const e=parseInt(t,10);return isNaN(e)?"":s.LOCALE.NUMBERS.numberToWords(e)}})),b(new m.Processor("ordinal",{processor:function(t){const e=parseInt(t,10);return isNaN(e)?"":s.LOCALE.NUMBERS.wordOrdinal(e)}})),b(new m.Processor("numericOrdinal",{processor:function(t){const e=parseInt(t,10);return isNaN(e)?"":s.LOCALE.NUMBERS.numericOrdinal(e)}})),b(new m.Processor("vulgar",{processor:function(t){const[e,r]=t.split("/").map((t=>parseInt(t,10)));return isNaN(e)||isNaN(r)?"":_("speech",`<mfrac><mn>${e}</mn><mn>${r}</mn></mfrac>`)}}))},2998:function(t,e,r){var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{l(n.next(t))}catch(t){i(t)}}function a(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.localePath=e.exit=e.move=e.walk=e.processFile=e.file=e.vulgar=e.numericOrdinal=e.ordinal=e.number=e.toEnriched=e.toDescription=e.toJson=e.toSemantic=e.toSpeech=e.localeLoader=e.engineReady=e.engineSetup=e.setupEngine=e.version=void 0;const o=r(5897),i=r(6828),s=r(4440),a=r(7248),l=r(6499),c=r(2315),u=r(1377),p=r(6141);function h(t){return n(this,void 0,void 0,(function*(){return(0,i.setup)(t)}))}function f(t,e){return l.process(t,e)}function d(t,e,r){switch(o.default.getInstance().mode){case s.Mode.ASYNC:return function(t,e,r){return n(this,void 0,void 0,(function*(){const n=yield c.default.fs.promises.readFile(e,{encoding:"utf8"}),i=l.output(t,n);if(r)try{c.default.fs.promises.writeFile(r,i)}catch(t){throw new o.SREError("Can not write to file: "+r)}return i}))}(t,e,r);case s.Mode.SYNC:return function(t,e,r){const n=function(t){let e;try{e=c.default.fs.readFileSync(t,{encoding:"utf8"})}catch(e){throw new o.SREError("Can not open file: "+t)}return e}(e),i=l.output(t,n);if(r)try{c.default.fs.writeFileSync(r,i)}catch(t){throw new o.SREError("Can not write to file: "+r)}return i}(t,e,r);default:throw new o.SREError(`Can process files in ${o.default.getInstance().mode} mode`)}}e.version=u.Variables.VERSION,e.setupEngine=h,e.engineSetup=function(){const t=["mode"].concat(o.default.STRING_FEATURES,o.default.BINARY_FEATURES),e=o.default.getInstance(),r={};return t.forEach((function(t){r[t]=e[t]})),r.json=c.default.jsonPath,r.xpath=c.default.WGXpath,r.rules=e.ruleSets.slice(),r},e.engineReady=function(){return n(this,void 0,void 0,(function*(){return h({}).then((()=>o.EnginePromise.getall()))}))},e.localeLoader=p.standardLoader,e.toSpeech=function(t){return f("speech",t)},e.toSemantic=function(t){return f("semantic",t)},e.toJson=function(t){return f("json",t)},e.toDescription=function(t){return f("description",t)},e.toEnriched=function(t){return f("enriched",t)},e.number=function(t){return f("number",t)},e.ordinal=function(t){return f("ordinal",t)},e.numericOrdinal=function(t){return f("numericOrdinal",t)},e.vulgar=function(t){return f("vulgar",t)},e.file={},e.file.toSpeech=function(t,e){return d("speech",t,e)},e.file.toSemantic=function(t,e){return d("semantic",t,e)},e.file.toJson=function(t,e){return d("json",t,e)},e.file.toDescription=function(t,e){return d("description",t,e)},e.file.toEnriched=function(t,e){return d("enriched",t,e)},e.processFile=d,e.walk=function(t){return l.output("walker",t)},e.move=function(t){return l.keypress("move",t)},e.exit=function(t){const e=t||0;o.EnginePromise.getall().then((()=>process.exit(e)))},e.localePath=a.localePath,c.default.documentSupported?h({mode:s.Mode.HTTP}).then((()=>h({}))):h({mode:s.Mode.SYNC}).then((()=>h({mode:s.Mode.ASYNC})))},2315:function(__unused_webpack_module,exports,__webpack_require__){var __dirname="/";Object.defineProperty(exports,"__esModule",{value:!0});const variables_1=__webpack_require__(1377);class SystemExternal{static extRequire(library){if("undefined"!=typeof process){const nodeRequire=eval("require");return nodeRequire(library)}return null}}exports.default=SystemExternal,SystemExternal.windowSupported=!("undefined"==typeof window),SystemExternal.documentSupported=SystemExternal.windowSupported&&!(void 0===window.document),SystemExternal.xmldom=SystemExternal.documentSupported?window:SystemExternal.extRequire("xmldom-sre"),SystemExternal.document=SystemExternal.documentSupported?window.document:(new SystemExternal.xmldom.DOMImplementation).createDocument("","",0),SystemExternal.xpath=SystemExternal.documentSupported?document:function(){const t={document:{},XPathResult:{}};return SystemExternal.extRequire("wicked-good-xpath").install(t),t.document.XPathResult=t.XPathResult,t.document}(),SystemExternal.mathmapsIePath="https://cdn.jsdelivr.net/npm/sre-mathmaps-ie@"+variables_1.Variables.VERSION+"mathmaps_ie.js",SystemExternal.commander=SystemExternal.documentSupported?null:SystemExternal.extRequire("commander"),SystemExternal.fs=SystemExternal.documentSupported?null:SystemExternal.extRequire("fs"),SystemExternal.url=variables_1.Variables.url,SystemExternal.jsonPath=(SystemExternal.documentSupported?SystemExternal.url:process.env.SRE_JSON_PATH||__webpack_require__.g.SRE_JSON_PATH||__dirname+"/mathmaps")+"/",SystemExternal.WGXpath=variables_1.Variables.WGXpath,SystemExternal.wgxpath=null},1377:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Variables=void 0;class r{static ensureLocale(t,e){return r.LOCALES.get(t)?t:(console.error(`Locale ${t} does not exist! Using ${r.LOCALES.get(e)} instead.`),e)}}e.Variables=r,r.VERSION="4.0.6",r.LOCALES=new Map([["ca","Catalan"],["da","Danish"],["de","German"],["en","English"],["es","Spanish"],["fr","French"],["hi","Hindi"],["it","Italian"],["nb","Bokm\xe5l"],["nn","Nynorsk"],["sv","Swedish"],["nemeth","Nemeth"]]),r.mathjaxVersion="3.2.1",r.url="https://cdn.jsdelivr.net/npm/speech-rule-engine@"+r.VERSION+"/lib/mathmaps",r.WGXpath="https://cdn.jsdelivr.net/npm/wicked-good-xpath@1.3.0/dist/wgxpath.install.js"},5274:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.updateEvaluator=e.evaluateString=e.evaluateBoolean=e.getLeafNodes=e.evalXPath=e.resolveNameSpace=e.xpath=void 0;const n=r(5897),o=r(4440),i=r(2315);function s(){return"undefined"!=typeof XPathResult}e.xpath={currentDocument:null,evaluate:s()?document.evaluate:i.default.xpath.evaluate,result:s()?XPathResult:i.default.xpath.XPathResult,createNSResolver:s()?document.createNSResolver:i.default.xpath.createNSResolver};const a={xhtml:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",mml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function l(t){return a[t]||null}e.resolveNameSpace=l;class c{constructor(){this.lookupNamespaceURI=l}}function u(t,r,i){return n.default.getInstance().mode!==o.Mode.HTTP||n.default.getInstance().isIE||n.default.getInstance().isEdge?e.xpath.evaluate(t,r,new c,i,null):e.xpath.currentDocument.evaluate(t,r,l,i,null)}function p(t,r){let n;try{n=u(t,r,e.xpath.result.ORDERED_NODE_ITERATOR_TYPE)}catch(t){return[]}const o=[];for(let t=n.iterateNext();t;t=n.iterateNext())o.push(t);return o}e.evalXPath=p,e.getLeafNodes=function(t){return p(".//*[count(*)=0]",t)},e.evaluateBoolean=function(t,r){let n;try{n=u(t,r,e.xpath.result.BOOLEAN_TYPE)}catch(t){return!1}return n.booleanValue},e.evaluateString=function(t,r){let n;try{n=u(t,r,e.xpath.result.STRING_TYPE)}catch(t){return""}return n.stringValue},e.updateEvaluator=function(t){if(n.default.getInstance().mode!==o.Mode.HTTP)return;let r=t;for(;r&&!r.evaluate;)r=r.parentNode;r&&r.evaluate?e.xpath.currentDocument=r:t.ownerDocument&&(e.xpath.currentDocument=t.ownerDocument)}},9268:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractEnrichCase=void 0;e.AbstractEnrichCase=class{constructor(t){this.semantic=t}}},6061:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseBinomial=void 0;const n=r(5740),o=r(9268),i=r(5452),s=r(2298);class a extends o.AbstractEnrichCase{constructor(t){super(t),this.mml=t.mathmlTree}static test(t){return!t.mathmlTree&&"line"===t.type&&"binomial"===t.role}getMathml(){if(!this.semantic.childNodes.length)return this.mml;const t=this.semantic.childNodes[0];if(this.mml=(0,i.walkTree)(t),this.mml.hasAttribute(s.Attribute.TYPE)){const t=n.createElement("mrow");t.setAttribute(s.Attribute.ADDED,"true"),n.replaceNode(this.mml,t),t.appendChild(this.mml),this.mml=t}return(0,s.setAttributes)(this.mml,this.semantic),this.mml}}e.CaseBinomial=a},5765:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseDoubleScript=void 0;const n=r(5740),o=r(9268),i=r(5452),s=r(2298);class a extends o.AbstractEnrichCase{constructor(t){super(t),this.mml=t.mathmlTree}static test(t){if(!t.mathmlTree||!t.childNodes.length)return!1;const e=n.tagName(t.mathmlTree),r=t.childNodes[0].role;return"MSUBSUP"===e&&"subsup"===r||"MUNDEROVER"===e&&"underover"===r}getMathml(){const t=this.semantic.childNodes[0],e=t.childNodes[0],r=this.semantic.childNodes[1],n=t.childNodes[1],o=i.walkTree(r),a=i.walkTree(e),l=i.walkTree(n);return(0,s.setAttributes)(this.mml,this.semantic),this.mml.setAttribute(s.Attribute.CHILDREN,(0,s.makeIdList)([e,n,r])),[a,l,o].forEach((t=>i.getInnerNode(t).setAttribute(s.Attribute.PARENT,this.mml.getAttribute(s.Attribute.ID)))),this.mml.setAttribute(s.Attribute.TYPE,t.role),i.addCollapsedAttribute(this.mml,[this.semantic.id,[t.id,e.id,n.id],r.id]),this.mml}}e.CaseDoubleScript=a},7251:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseEmbellished=void 0;const n=r(5740),o=r(5952),i=r(9268),s=r(5765),a=r(7014),l=r(6887),c=r(5452),u=r(2298);class p extends i.AbstractEnrichCase{constructor(t){super(t),this.fenced=null,this.fencedMml=null,this.fencedMmlNodes=[],this.ofence=null,this.ofenceMml=null,this.ofenceMap={},this.cfence=null,this.cfenceMml=null,this.cfenceMap={},this.parentCleanup=[]}static test(t){return!(!t.mathmlTree||!t.fencePointer||t.mathmlTree.getAttribute("data-semantic-type"))}static makeEmptyNode_(t){const e=n.createElement("mrow"),r=new o.SemanticNode(t);return r.type="empty",r.mathmlTree=e,r}static fencedMap_(t,e){e[t.id]=t.mathmlTree,t.embellished&&p.fencedMap_(t.childNodes[0],e)}getMathml(){this.getFenced_(),this.fencedMml=c.walkTree(this.fenced),this.getFencesMml_(),"empty"!==this.fenced.type||this.fencedMml.parentNode||(this.fencedMml.setAttribute(u.Attribute.ADDED,"true"),this.cfenceMml.parentNode.insertBefore(this.fencedMml,this.cfenceMml)),this.getFencedMml_();return this.rewrite_()}fencedElement(t){return"fenced"===t.type||"matrix"===t.type||"vector"===t.type}getFenced_(){let t=this.semantic;for(;!this.fencedElement(t);)t=t.childNodes[0];this.fenced=t.childNodes[0],this.ofence=t.contentNodes[0],this.cfence=t.contentNodes[1],p.fencedMap_(this.ofence,this.ofenceMap),p.fencedMap_(this.cfence,this.cfenceMap)}getFencedMml_(){let t=this.ofenceMml.nextSibling;for(t=t===this.fencedMml?t:this.fencedMml;t&&t!==this.cfenceMml;)this.fencedMmlNodes.push(t),t=t.nextSibling}getFencesMml_(){let t=this.semantic;const e=Object.keys(this.ofenceMap),r=Object.keys(this.cfenceMap);for(;!(this.ofenceMml&&this.cfenceMml||t===this.fenced);)-1===e.indexOf(t.fencePointer)||this.ofenceMml||(this.ofenceMml=t.mathmlTree),-1===r.indexOf(t.fencePointer)||this.cfenceMml||(this.cfenceMml=t.mathmlTree),t=t.childNodes[0];this.ofenceMml||(this.ofenceMml=this.ofence.mathmlTree),this.cfenceMml||(this.cfenceMml=this.cfence.mathmlTree),this.ofenceMml&&(this.ofenceMml=c.ascendNewNode(this.ofenceMml)),this.cfenceMml&&(this.cfenceMml=c.ascendNewNode(this.cfenceMml))}rewrite_(){let t=this.semantic,e=null;const r=this.introduceNewLayer_();for((0,u.setAttributes)(r,this.fenced.parent);!this.fencedElement(t);){const o=t.mathmlTree,i=this.specialCase_(t,o);if(i)t=i;else{(0,u.setAttributes)(o,t);const e=[];for(let r,n=1;r=t.childNodes[n];n++)e.push(c.walkTree(r));t=t.childNodes[0]}const s=n.createElement("dummy"),a=o.childNodes[0];n.replaceNode(o,s),n.replaceNode(r,o),n.replaceNode(o.childNodes[0],r),n.replaceNode(s,a),e||(e=o)}return c.walkTree(this.ofence),c.walkTree(this.cfence),this.cleanupParents_(),e||r}specialCase_(t,e){const r=n.tagName(e);let o,i=null;if("MSUBSUP"===r?(i=t.childNodes[0],o=s.CaseDoubleScript):"MMULTISCRIPTS"===r&&("superscript"===t.type||"subscript"===t.type?o=a.CaseMultiscripts:"tensor"===t.type&&(o=l.CaseTensor),i=o&&t.childNodes[0]&&"subsup"===t.childNodes[0].role?t.childNodes[0]:t),!i)return null;const c=i.childNodes[0],u=p.makeEmptyNode_(c.id);return i.childNodes[0]=u,e=new o(t).getMathml(),i.childNodes[0]=c,this.parentCleanup.push(e),i.childNodes[0]}introduceNewLayer_(){const t=this.fullFence(this.ofenceMml),e=this.fullFence(this.cfenceMml);let r=n.createElement("mrow");if(n.replaceNode(this.fencedMml,r),this.fencedMmlNodes.forEach((t=>r.appendChild(t))),r.insertBefore(t,this.fencedMml),r.appendChild(e),!r.parentNode){const t=n.createElement("mrow");for(;r.childNodes.length>0;)t.appendChild(r.childNodes[0]);r.appendChild(t),r=t}return r}fullFence(t){const e=this.fencedMml.parentNode;let r=t;for(;r.parentNode&&r.parentNode!==e;)r=r.parentNode;return r}cleanupParents_(){this.parentCleanup.forEach((function(t){const e=t.childNodes[1].getAttribute(u.Attribute.PARENT);t.childNodes[0].setAttribute(u.Attribute.PARENT,e)}))}}e.CaseEmbellished=p},6265:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseLimit=void 0;const n=r(5740),o=r(9268),i=r(5452),s=r(2298);class a extends o.AbstractEnrichCase{constructor(t){super(t),this.mml=t.mathmlTree}static test(t){if(!t.mathmlTree||!t.childNodes.length)return!1;const e=n.tagName(t.mathmlTree),r=t.type;return("limupper"===r||"limlower"===r)&&("MSUBSUP"===e||"MUNDEROVER"===e)||"limboth"===r&&("MSUB"===e||"MUNDER"===e||"MSUP"===e||"MOVER"===e)}static walkTree_(t){t&&i.walkTree(t)}getMathml(){const t=this.semantic.childNodes;return"limboth"!==this.semantic.type&&this.mml.childNodes.length>=3&&(this.mml=i.introduceNewLayer([this.mml],this.semantic)),(0,s.setAttributes)(this.mml,this.semantic),t[0].mathmlTree||(t[0].mathmlTree=this.semantic.mathmlTree),t.forEach(a.walkTree_),this.mml}}e.CaseLimit=a},6514:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseLine=void 0;const n=r(9268),o=r(5452),i=r(2298);class s extends n.AbstractEnrichCase{constructor(t){super(t),this.mml=t.mathmlTree}static test(t){return!!t.mathmlTree&&"line"===t.type}getMathml(){return this.semantic.contentNodes.length&&o.walkTree(this.semantic.contentNodes[0]),this.semantic.childNodes.length&&o.walkTree(this.semantic.childNodes[0]),(0,i.setAttributes)(this.mml,this.semantic),this.mml}}e.CaseLine=s},6839:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseMultiindex=void 0;const n=r(5740),o=r(9268),i=r(5452),s=r(2298);class a extends o.AbstractEnrichCase{constructor(t){super(t),this.mml=t.mathmlTree}static multiscriptIndex(t){return"punctuated"===t.type&&"dummy"===t.contentNodes[0].role?i.collapsePunctuated(t):(i.walkTree(t),t.id)}static createNone_(t){const e=n.createElement("none");return t&&(0,s.setAttributes)(e,t),e.setAttribute(s.Attribute.ADDED,"true"),e}completeMultiscript(t,e){const r=n.toArray(this.mml.childNodes).slice(1);let o=0;const l=t=>{for(let e,n=0;e=t[n];n++){const t=r[o];if(t&&e===parseInt(i.getInnerNode(t).getAttribute(s.Attribute.ID)))i.getInnerNode(t).setAttribute(s.Attribute.PARENT,this.semantic.id.toString()),o++;else{const r=this.semantic.querySelectorAll((t=>t.id===e));this.mml.insertBefore(a.createNone_(r[0]),t||null)}}};l(t),r[o]&&"MPRESCRIPTS"!==n.tagName(r[o])?this.mml.insertBefore(r[o],n.createElement("mprescripts")):o++,l(e)}}e.CaseMultiindex=a},7014:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseMultiscripts=void 0;const n=r(5740),o=r(5656),i=r(6839),s=r(5452),a=r(2298);class l extends i.CaseMultiindex{static test(t){if(!t.mathmlTree)return!1;return"MMULTISCRIPTS"===n.tagName(t.mathmlTree)&&("superscript"===t.type||"subscript"===t.type)}constructor(t){super(t)}getMathml(){let t,e,r;if((0,a.setAttributes)(this.mml,this.semantic),this.semantic.childNodes[0]&&"subsup"===this.semantic.childNodes[0].role){const n=this.semantic.childNodes[0];t=n.childNodes[0],e=i.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[1]),r=i.CaseMultiindex.multiscriptIndex(n.childNodes[1]);const l=[this.semantic.id,[n.id,t.id,r],e];s.addCollapsedAttribute(this.mml,l),this.mml.setAttribute(a.Attribute.TYPE,n.role),this.completeMultiscript(o.SemanticSkeleton.interleaveIds(r,e),[])}else{t=this.semantic.childNodes[0],e=i.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[1]);const r=[this.semantic.id,t.id,e];s.addCollapsedAttribute(this.mml,r)}const n=o.SemanticSkeleton.collapsedLeafs(r||[],e),l=s.walkTree(t);return s.getInnerNode(l).setAttribute(a.Attribute.PARENT,this.semantic.id.toString()),n.unshift(t.id),this.mml.setAttribute(a.Attribute.CHILDREN,n.join(",")),this.mml}}e.CaseMultiscripts=l},3416:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseProof=void 0;const n=r(9268),o=r(5452),i=r(2298);class s extends n.AbstractEnrichCase{constructor(t){super(t),this.mml=t.mathmlTree}static test(t){return!!t.mathmlTree&&("inference"===t.type||"premises"===t.type)}getMathml(){return this.semantic.childNodes.length?(this.semantic.contentNodes.forEach((function(t){o.walkTree(t),(0,i.setAttributes)(t.mathmlTree,t)})),this.semantic.childNodes.forEach((function(t){o.walkTree(t)})),(0,i.setAttributes)(this.mml,this.semantic),this.mml.getAttribute("data-semantic-id")===this.mml.getAttribute("data-semantic-parent")&&this.mml.removeAttribute("data-semantic-parent"),this.mml):this.mml}}e.CaseProof=s},5699:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseTable=void 0;const n=r(5740),o=r(9268),i=r(5452),s=r(2298);class a extends o.AbstractEnrichCase{constructor(t){super(t),this.inner=[],this.mml=t.mathmlTree}static test(t){return"matrix"===t.type||"vector"===t.type||"cases"===t.type}getMathml(){const t=i.cloneContentNode(this.semantic.contentNodes[0]),e=this.semantic.contentNodes[1]?i.cloneContentNode(this.semantic.contentNodes[1]):null;if(this.inner=this.semantic.childNodes.map(i.walkTree),this.mml)if("MFENCED"===n.tagName(this.mml)){const r=this.mml.childNodes;this.mml.insertBefore(t,r[0]||null),e&&this.mml.appendChild(e),this.mml=i.rewriteMfenced(this.mml)}else{const r=[t,this.mml];e&&r.push(e),this.mml=i.introduceNewLayer(r,this.semantic)}else this.mml=i.introduceNewLayer([t].concat(this.inner,[e]),this.semantic);return(0,s.setAttributes)(this.mml,this.semantic),this.mml}}e.CaseTable=a},6887:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseTensor=void 0;const n=r(5656),o=r(6839),i=r(5452),s=r(2298);class a extends o.CaseMultiindex{static test(t){return!!t.mathmlTree&&"tensor"===t.type}constructor(t){super(t)}getMathml(){i.walkTree(this.semantic.childNodes[0]);const t=o.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[1]),e=o.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[2]),r=o.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[3]),a=o.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[4]);(0,s.setAttributes)(this.mml,this.semantic);const l=[this.semantic.id,this.semantic.childNodes[0].id,t,e,r,a];i.addCollapsedAttribute(this.mml,l);const c=n.SemanticSkeleton.collapsedLeafs(t,e,r,a);return c.unshift(this.semantic.childNodes[0].id),this.mml.setAttribute(s.Attribute.CHILDREN,c.join(",")),this.completeMultiscript(n.SemanticSkeleton.interleaveIds(r,a),n.SemanticSkeleton.interleaveIds(t,e)),this.mml}}e.CaseTensor=a},9236:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseText=void 0;const n=r(9268),o=r(5452),i=r(2298);class s extends n.AbstractEnrichCase{constructor(t){super(t),this.mml=t.mathmlTree}static test(t){return"punctuated"===t.type&&("text"===t.role||t.contentNodes.every((t=>"dummy"===t.role)))}getMathml(){const t=[],e=o.collapsePunctuated(this.semantic,t);return this.mml=o.introduceNewLayer(t,this.semantic),(0,i.setAttributes)(this.mml,this.semantic),this.mml.removeAttribute(i.Attribute.CONTENT),o.addCollapsedAttribute(this.mml,e),this.mml}}e.CaseText=s},5714:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.prepareMmlString=e.testTranslation__=e.semanticMathml=e.semanticMathmlSync=e.semanticMathmlNode=void 0;const n=r(2057),o=r(5740),i=r(5897),s=r(1414),a=r(5452),l=r(2298);function c(t){const e=o.cloneNode(t),r=s.getTree(e);return a.enrich(e,r)}function u(t){return c(o.parseInput(t))}function p(t){return t.match(/^<math/)||(t="<math>"+t),t.match(/\/math>$/)||(t+="</math>"),t}r(1513),e.semanticMathmlNode=c,e.semanticMathmlSync=u,e.semanticMathml=function(t,e){i.EnginePromise.getall().then((()=>{const r=o.parseInput(t);e(c(r))}))},e.testTranslation__=function(t){n.Debugger.getInstance().init();const e=u(p(t)).toString();return(0,l.removeAttributePrefix)(e),n.Debugger.getInstance().exit(),e},e.prepareMmlString=p},2298:function(t,e){var r;function n(t){return t.map((function(t){return t.id})).join(",")}function o(t,e){const n=[];"mglyph"===e.role&&n.push("image"),e.attributes.href&&n.push("link"),n.length&&t.setAttribute(r.POSTFIX,n.join(" "))}Object.defineProperty(e,"__esModule",{value:!0}),e.addPrefix=e.removeAttributePrefix=e.setPostfix=e.setAttributes=e.makeIdList=e.EnrichAttributes=e.Attribute=e.Prefix=void 0,e.Prefix="data-semantic-",function(t){t.ADDED="data-semantic-added",t.ALTERNATIVE="data-semantic-alternative",t.CHILDREN="data-semantic-children",t.COLLAPSED="data-semantic-collapsed",t.CONTENT="data-semantic-content",t.EMBELLISHED="data-semantic-embellished",t.FENCEPOINTER="data-semantic-fencepointer",t.FONT="data-semantic-font",t.ID="data-semantic-id",t.ANNOTATION="data-semantic-annotation",t.OPERATOR="data-semantic-operator",t.OWNS="data-semantic-owns",t.PARENT="data-semantic-parent",t.POSTFIX="data-semantic-postfix",t.PREFIX="data-semantic-prefix",t.ROLE="data-semantic-role",t.SPEECH="data-semantic-speech",t.STRUCTURE="data-semantic-structure",t.TYPE="data-semantic-type"}(r=e.Attribute||(e.Attribute={})),e.EnrichAttributes=[r.ADDED,r.ALTERNATIVE,r.CHILDREN,r.COLLAPSED,r.CONTENT,r.EMBELLISHED,r.FENCEPOINTER,r.FONT,r.ID,r.ANNOTATION,r.OPERATOR,r.OWNS,r.PARENT,r.POSTFIX,r.PREFIX,r.ROLE,r.SPEECH,r.STRUCTURE,r.TYPE],e.makeIdList=n,e.setAttributes=function(t,i){t.setAttribute(r.TYPE,i.type);const s=i.allAttributes();for(let r,n=0;r=s[n];n++)t.setAttribute(e.Prefix+r[0].toLowerCase(),r[1]);i.childNodes.length&&t.setAttribute(r.CHILDREN,n(i.childNodes)),i.contentNodes.length&&t.setAttribute(r.CONTENT,n(i.contentNodes)),i.parent&&t.setAttribute(r.PARENT,i.parent.id.toString()),o(t,i)},e.setPostfix=o,e.removeAttributePrefix=function(t){return t.toString().replace(new RegExp(e.Prefix,"g"),"")},e.addPrefix=function(t){return e.Prefix+t}},3532:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.factory=e.getCase=void 0,e.getCase=function(t){for(let r,n=0;r=e.factory[n];n++)if(r.test(t))return r.constr(t);return null},e.factory=[]},1513:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});const n=r(6061),o=r(5765),i=r(7251),s=r(6265),a=r(6514),l=r(7014),c=r(3416),u=r(5699),p=r(6887),h=r(9236);r(3532).factory.push({test:s.CaseLimit.test,constr:t=>new s.CaseLimit(t)},{test:i.CaseEmbellished.test,constr:t=>new i.CaseEmbellished(t)},{test:o.CaseDoubleScript.test,constr:t=>new o.CaseDoubleScript(t)},{test:p.CaseTensor.test,constr:t=>new p.CaseTensor(t)},{test:l.CaseMultiscripts.test,constr:t=>new l.CaseMultiscripts(t)},{test:a.CaseLine.test,constr:t=>new a.CaseLine(t)},{test:n.CaseBinomial.test,constr:t=>new n.CaseBinomial(t)},{test:c.CaseProof.test,constr:t=>new c.CaseProof(t)},{test:u.CaseTable.test,constr:t=>new u.CaseTable(t)},{test:h.CaseText.test,constr:t=>new h.CaseText(t)})},5452:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.printNodeList__=e.collapsePunctuated=e.formattedOutput_=e.formattedOutput=e.getInnerNode=e.setOperatorAttribute_=e.createInvisibleOperator_=e.rewriteMfenced=e.cloneContentNode=e.addCollapsedAttribute=e.parentNode_=e.isIgnorable_=e.unitChild_=e.descendNode_=e.ascendNewNode=e.validLca_=e.pathToRoot_=e.attachedElement_=e.prunePath_=e.mathmlLca_=e.lcaType=e.functionApplication_=e.isDescendant_=e.insertNewChild_=e.mergeChildren_=e.collectChildNodes_=e.collateChildNodes_=e.childrenSubset_=e.moveSemanticAttributes_=e.introduceLayerAboveLca=e.introduceNewLayer=e.walkTree=e.enrich=e.SETTINGS=void 0;const n=r(2057),o=r(5740),i=r(5897),s=r(3588),a=r(7516),l=r(5656),c=r(4795),u=r(2298),p=r(3532);function h(t){const e=(0,p.getCase)(t);let r;if(e)return r=e.getMathml(),N(r);if(1===t.mathml.length)return n.Debugger.getInstance().output("Walktree Case 0"),r=t.mathml[0],u.setAttributes(r,t),t.childNodes.length&&(n.Debugger.getInstance().output("Walktree Case 0.1"),t.childNodes.forEach((function(t){"empty"===t.type&&r.appendChild(h(t))}))),N(r);const o=t.contentNodes.map(R);B(t,o);const i=t.childNodes.map(h),s=l.SemanticSkeleton.combineContentChildren(t,o,i);if(r=t.mathmlTree,null===r)n.Debugger.getInstance().output("Walktree Case 1"),r=f(s,t);else{const t=A(s);n.Debugger.getInstance().output("Walktree Case 2"),t?(n.Debugger.getInstance().output("Walktree Case 2.1"),r=t.parentNode):(n.Debugger.getInstance().output("Walktree Case 2.2"),r=D(r))}return r=k(r),v(r,s,t),u.setAttributes(r,t),N(r)}function f(t,e){const r=x(t);let i=r.node;const s=r.type;if(s!==O.VALID||!c.hasEmptyTag(i))if(n.Debugger.getInstance().output("Walktree Case 1.1"),i=o.createElement("mrow"),s===O.PRUNED)n.Debugger.getInstance().output("Walktree Case 1.1.0"),i=d(i,r.node,t);else if(t[0]){n.Debugger.getInstance().output("Walktree Case 1.1.1");const e=A(t),r=y(e.parentNode,t);o.replaceNode(e,i),r.forEach((function(t){i.appendChild(t)}))}return e.mathmlTree||(e.mathmlTree=i),i}function d(t,e,r){let i=w(e);if(c.hasMathTag(i)){n.Debugger.getInstance().output("Walktree Case 1.1.0.0"),m(i,t),o.toArray(i.childNodes).forEach((function(e){t.appendChild(e)}));const e=t;t=i,i=e}const s=r.indexOf(e);return r[s]=i,o.replaceNode(i,t),t.appendChild(i),r.forEach((function(e){t.appendChild(e)})),t}function m(t,e){for(const r of u.EnrichAttributes)t.hasAttribute(r)&&(e.setAttribute(r,t.getAttribute(r)),t.removeAttribute(r))}function y(t,e){const r=o.toArray(t.childNodes);let n=1/0,i=-1/0;return e.forEach((function(t){const e=r.indexOf(t);-1!==e&&(n=Math.min(n,e),i=Math.max(i,e))})),r.slice(n,i+1)}function g(t,e,r){const n=[];let i=o.toArray(t.childNodes),s=!1;for(;i.length;){const t=i.shift();if(t.hasAttribute(u.Attribute.TYPE)){n.push(t);continue}const e=b(t);0!==e.length&&(1!==e.length?(s?t.setAttribute("AuxiliaryImplicit",!0):s=!0,i=e.concat(i)):n.push(t))}const a=[],l=r.childNodes.map((function(t){return t.mathmlTree}));for(;l.length;){const t=l.pop();if(t){if(-1!==n.indexOf(t))break;-1!==e.indexOf(t)&&a.unshift(t)}}return n.concat(a)}function b(t){const e=[];let r=o.toArray(t.childNodes);for(;r.length;){const t=r.shift();t.nodeType===o.NodeType.ELEMENT_NODE&&(t.hasAttribute(u.Attribute.TYPE)?e.push(t):r=o.toArray(t.childNodes).concat(r))}return e}function v(t,e,r){const n="implicit"===r.role&&a.flags.combine_juxtaposition?g(t,e,r):o.toArray(t.childNodes);if(!n.length)return void e.forEach((function(e){t.appendChild(e)}));let i=0;for(;e.length;){const r=e[0];n[i]===r||M(n[i],r)?(e.shift(),i++):n[i]&&-1===e.indexOf(n[i])?i++:(S(r,t)||_(t,n[i],r),e.shift())}}function _(t,e,r){if(!e)return void t.insertBefore(r,null);let n=e,o=P(n);for(;o&&o.firstChild===n&&!n.hasAttribute("AuxiliaryImplicit")&&o!==t;)n=o,o=P(n);o&&(o.insertBefore(r,n),n.removeAttribute("AuxiliaryImplicit"))}function S(t,e){if(!t)return!1;do{if((t=t.parentNode)===e)return!0}while(t);return!1}function M(t,e){const r=s.functionApplication();if(t&&e&&t.textContent&&e.textContent&&t.textContent===r&&e.textContent===r&&"true"===e.getAttribute(u.Attribute.ADDED)){for(let r,n=0;r=t.attributes[n];n++)e.hasAttribute(r.nodeName)||e.setAttribute(r.nodeName,r.nodeValue);return o.replaceNode(t,e),!0}return!1}var O;function x(t){const e=A(t);if(!e)return{type:O.INVALID,node:null};const r=A(t.slice().reverse());if(e===r)return{type:O.VALID,node:e};const n=C(e),o=E(n,t),i=C(r,(function(t){return-1!==o.indexOf(t)})),s=i[0],a=o.indexOf(s);return-1===a?{type:O.INVALID,node:null}:{type:o.length!==n.length?O.PRUNED:T(o[a+1],i[1])?O.VALID:O.INVALID,node:s}}function E(t,e){let r=0;for(;t[r]&&-1===e.indexOf(t[r]);)r++;return t.slice(0,r+1)}function A(t){let e=0,r=null;for(;!r&&e<t.length;)t[e].parentNode&&(r=t[e]),e++;return r}function C(t,e){const r=e||(t=>!1),n=[t];for(;!r(t)&&!c.hasMathTag(t)&&t.parentNode;)t=P(t),n.unshift(t);return n}function T(t,e){return!(!t||!e||t.previousSibling||e.nextSibling)}function N(t){for(;!c.hasMathTag(t)&&L(t);)t=P(t);return t}function w(t){const e=o.toArray(t.childNodes);if(!e)return t;const r=e.filter((function(t){return t.nodeType===o.NodeType.ELEMENT_NODE&&!c.hasIgnoreTag(t)}));return 1===r.length&&c.hasEmptyTag(r[0])&&!r[0].hasAttribute(u.Attribute.TYPE)?w(r[0]):t}function L(t){const e=P(t);return!(!e||!c.hasEmptyTag(e))&&o.toArray(e.childNodes).every((function(e){return e===t||I(e)}))}function I(t){if(t.nodeType!==o.NodeType.ELEMENT_NODE)return!0;if(!t||c.hasIgnoreTag(t))return!0;const e=o.toArray(t.childNodes);return!(!c.hasEmptyTag(t)&&e.length||c.hasDisplayTag(t)||t.hasAttribute(u.Attribute.TYPE)||c.isOrphanedGlyph(t))&&o.toArray(t.childNodes).every(I)}function P(t){return t.parentNode}function R(t){if(t.mathml.length)return h(t);const r=e.SETTINGS.implicit?j(t):o.createElement("mrow");return t.mathml=[r],r}function k(t){if("MFENCED"!==o.tagName(t))return t;const e=o.createElement("mrow");for(let r,n=0;r=t.attributes[n];n++)-1===["open","close","separators"].indexOf(r.name)&&e.setAttribute(r.name,r.value);return o.toArray(t.childNodes).forEach((function(t){e.appendChild(t)})),o.replaceNode(t,e),e}function j(t){const e=o.createElement("mo"),r=o.createTextNode(t.textContent);return e.appendChild(r),u.setAttributes(e,t),e.setAttribute(u.Attribute.ADDED,"true"),e}function B(t,e){const r=t.type+(t.textContent?","+t.textContent:"");e.forEach((function(t){D(t).setAttribute(u.Attribute.OPERATOR,r)}))}function D(t){const e=o.toArray(t.childNodes);if(!e)return t;const r=e.filter((function(t){return!I(t)})),n=[];for(let t,e=0;t=r[e];e++)if(c.hasEmptyTag(t)){const e=D(t);e&&e!==t&&n.push(e)}else n.push(t);return 1===n.length?n[0]:t}function F(t,e,r,n){const o=n||!1;H(t,"Original MathML",o),H(r,"Semantic Tree",o),H(e,"Semantically enriched MathML",o)}function H(t,e,r){const n=o.formatXml(t.toString());r?console.info(e+":\n```html\n"+u.removeAttributePrefix(n)+"\n```\n"):console.info(n)}e.SETTINGS={collapsed:!0,implicit:!0},e.enrich=function(t,e){const r=o.cloneNode(t);return h(e.root),i.default.getInstance().structure&&t.setAttribute(u.Attribute.STRUCTURE,l.SemanticSkeleton.fromStructure(t,e).toString()),n.Debugger.getInstance().generateOutput((function(){return F(r,t,e,!0),[]})),t},e.walkTree=h,e.introduceNewLayer=f,e.introduceLayerAboveLca=d,e.moveSemanticAttributes_=m,e.childrenSubset_=y,e.collateChildNodes_=g,e.collectChildNodes_=b,e.mergeChildren_=v,e.insertNewChild_=_,e.isDescendant_=S,e.functionApplication_=M,function(t){t.VALID="valid",t.INVALID="invalid",t.PRUNED="pruned"}(O=e.lcaType||(e.lcaType={})),e.mathmlLca_=x,e.prunePath_=E,e.attachedElement_=A,e.pathToRoot_=C,e.validLca_=T,e.ascendNewNode=N,e.descendNode_=w,e.unitChild_=L,e.isIgnorable_=I,e.parentNode_=P,e.addCollapsedAttribute=function(t,e){const r=new l.SemanticSkeleton(e);t.setAttribute(u.Attribute.COLLAPSED,r.toString())},e.cloneContentNode=R,e.rewriteMfenced=k,e.createInvisibleOperator_=j,e.setOperatorAttribute_=B,e.getInnerNode=D,e.formattedOutput=F,e.formattedOutput_=H,e.collapsePunctuated=function(t,e){const r=!!e,n=e||[],o=t.parent,i=t.contentNodes.map((function(t){return t.id}));i.unshift("c");const s=[t.id,i];for(let e,i=0;e=t.childNodes[i];i++){const t=h(e);n.push(t);const i=D(t);o&&!r&&i.setAttribute(u.Attribute.PARENT,o.id.toString()),s.push(e.id)}return s},e.printNodeList__=function(t,e){console.info(t),o.toArray(e).forEach((function(t){console.info(t.toString())})),console.info("<<<<<<<<<<<<<<<<<")}},5105:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractHighlighter=void 0;const n=r(5274),o=r(2298);class i{constructor(){this.color=null,this.mactionName="",this.currentHighlights=[]}highlight(t){this.currentHighlights.push(t.map((t=>{const e=this.highlightNode(t);return this.setHighlighted(t),e})))}highlightAll(t){const e=this.getMactionNodes(t);for(let t,r=0;t=e[r];r++)this.highlight([t])}unhighlight(){const t=this.currentHighlights.pop();t&&t.forEach((t=>{this.isHighlighted(t.node)&&(this.unhighlightNode(t),this.unsetHighlighted(t.node))}))}unhighlightAll(){for(;this.currentHighlights.length>0;)this.unhighlight()}setColor(t){this.color=t}colorString(){return this.color.rgba()}addEvents(t,e){const r=this.getMactionNodes(t);for(let t,n=0;t=r[n];n++)for(const r in e)t.addEventListener(r,e[r])}getMactionNodes(t){return Array.from(t.getElementsByClassName(this.mactionName))}isMactionNode(t){const e=t.className||t.getAttribute("class");return!!e&&!!e.match(new RegExp(this.mactionName))}isHighlighted(t){return t.hasAttribute(i.ATTR)}setHighlighted(t){t.setAttribute(i.ATTR,"true")}unsetHighlighted(t){t.removeAttribute(i.ATTR)}colorizeAll(t){n.evalXPath(`.//*[@${o.Attribute.ID}]`,t).forEach((t=>this.colorize(t)))}uncolorizeAll(t){n.evalXPath(`.//*[@${o.Attribute.ID}]`,t).forEach((t=>this.uncolorize(t)))}colorize(t){const e=(0,o.addPrefix)("foreground");t.hasAttribute(e)&&(t.setAttribute(e+"-old",t.style.color),t.style.color=t.getAttribute(e))}uncolorize(t){const e=(0,o.addPrefix)("foreground")+"-old";t.hasAttribute(e)&&(t.style.color=t.getAttribute(e))}}e.AbstractHighlighter=i,i.ATTR="sre-highlight"},6937:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ChtmlHighlighter=void 0;const n=r(933);class o extends n.CssHighlighter{constructor(){super()}isMactionNode(t){return t.tagName.toUpperCase()===this.mactionName.toUpperCase()}getMactionNodes(t){return Array.from(t.getElementsByTagName(this.mactionName))}}e.ChtmlHighlighter=o},8396:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ContrastPicker=e.ColorPicker=void 0;const r={red:{red:255,green:0,blue:0},green:{red:0,green:255,blue:0},blue:{red:0,green:0,blue:255},yellow:{red:255,green:255,blue:0},cyan:{red:0,green:255,blue:255},magenta:{red:255,green:0,blue:255},white:{red:255,green:255,blue:255},black:{red:0,green:0,blue:0}};function n(t,e){const n=t||{color:e};let o=Object.prototype.hasOwnProperty.call(n,"color")?r[n.color]:n;return o||(o=r[e]),o.alpha=Object.prototype.hasOwnProperty.call(n,"alpha")?n.alpha:1,function(t){const e=t=>(t=Math.max(t,0),t=Math.min(255,t),Math.round(t));return t.red=e(t.red),t.green=e(t.green),t.blue=e(t.blue),t.alpha=Math.max(t.alpha,0),t.alpha=Math.min(1,t.alpha),t}(o)}class o{constructor(t,e){this.foreground=n(e,o.DEFAULT_FOREGROUND_),this.background=n(t,o.DEFAULT_BACKGROUND_)}static toHex(t){const e=t.toString(16);return 1===e.length?"0"+e:e}rgba(){const t=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"};return{background:t(this.background),foreground:t(this.foreground)}}rgb(){const t=function(t){return"rgb("+t.red+","+t.green+","+t.blue+")"};return{background:t(this.background),alphaback:this.background.alpha.toString(),foreground:t(this.foreground),alphafore:this.foreground.alpha.toString()}}hex(){const t=function(t){return"#"+o.toHex(t.red)+o.toHex(t.green)+o.toHex(t.blue)};return{background:t(this.background),alphaback:this.background.alpha.toString(),foreground:t(this.foreground),alphafore:this.foreground.alpha.toString()}}}e.ColorPicker=o,o.DEFAULT_BACKGROUND_="blue",o.DEFAULT_FOREGROUND_="black";e.ContrastPicker=class{constructor(){this.hue=10,this.sat=100,this.light=50,this.incr=50}generate(){return e=function(t,e,r){e=e>1?e/100:e,r=r>1?r/100:r;const n=(1-Math.abs(2*r-1))*e,o=n*(1-Math.abs(t/60%2-1)),i=r-n/2;let s=0,a=0,l=0;return 0<=t&&t<60?[s,a,l]=[n,o,0]:60<=t&&t<120?[s,a,l]=[o,n,0]:120<=t&&t<180?[s,a,l]=[0,n,o]:180<=t&&t<240?[s,a,l]=[0,o,n]:240<=t&&t<300?[s,a,l]=[o,0,n]:300<=t&&t<360&&([s,a,l]=[n,0,o]),{red:s+i,green:a+i,blue:l+i}}(this.hue,this.sat,this.light),"rgb("+(t={red:Math.round(255*e.red),green:Math.round(255*e.green),blue:Math.round(255*e.blue)}).red+","+t.green+","+t.blue+")";var t,e}increment(){this.hue=(this.hue+this.incr)%360}}},933:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CssHighlighter=void 0;const n=r(5105);class o extends n.AbstractHighlighter{constructor(){super(),this.mactionName="mjx-maction"}highlightNode(t){const e={node:t,background:t.style.backgroundColor,foreground:t.style.color},r=this.colorString();return t.style.backgroundColor=r.background,t.style.color=r.foreground,e}unhighlightNode(t){t.node.style.backgroundColor=t.background,t.node.style.color=t.foreground}}e.CssHighlighter=o},3090:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.highlighterMapping_=e.addEvents=e.highlighter=void 0;const n=r(6937),o=r(8396),i=r(933),s=r(2598),a=r(4500),l=r(7071),c=r(4346),u=r(2222);e.highlighter=function(t,r,n){const i=new o.ColorPicker(t,r),s="NativeMML"===n.renderer&&"Safari"===n.browser?"MML-CSS":"SVG"===n.renderer&&"v3"===n.browser?"SVG-V3":n.renderer,a=new(e.highlighterMapping_[s]||e.highlighterMapping_.NativeMML);return a.setColor(i),a},e.addEvents=function(t,r,n){const o=e.highlighterMapping_[n.renderer];o&&(new o).addEvents(t,r)},e.highlighterMapping_={SVG:c.SvgHighlighter,"SVG-V3":u.SvgV3Highlighter,NativeMML:l.MmlHighlighter,"HTML-CSS":s.HtmlHighlighter,"MML-CSS":a.MmlCssHighlighter,CommonHTML:i.CssHighlighter,CHTML:n.ChtmlHighlighter}},2598:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlHighlighter=void 0;const n=r(5740),o=r(5105);class i extends o.AbstractHighlighter{constructor(){super(),this.mactionName="maction"}highlightNode(t){const e={node:t,foreground:t.style.color,position:t.style.position},r=this.color.rgb();t.style.color=r.foreground,t.style.position="relative";const o=t.bbox;if(o&&o.w){const i=.05,s=0,a=n.createElement("span"),l=parseFloat(t.style.paddingLeft||"0");a.style.backgroundColor=r.background,a.style.opacity=r.alphaback.toString(),a.style.display="inline-block",a.style.height=o.h+o.d+2*i+"em",a.style.verticalAlign=-o.d+"em",a.style.marginTop=a.style.marginBottom=-i+"em",a.style.width=o.w+2*s+"em",a.style.marginLeft=l-s+"em",a.style.marginRight=-o.w-s-l+"em",t.parentNode.insertBefore(a,t),e.box=a}return e}unhighlightNode(t){const e=t.node;e.style.color=t.foreground,e.style.position=t.position,t.box&&t.box.parentNode.removeChild(t.box)}}e.HtmlHighlighter=i},4500:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.MmlCssHighlighter=void 0;const n=r(933);class o extends n.CssHighlighter{constructor(){super(),this.mactionName="maction"}getMactionNodes(t){return Array.from(t.getElementsByTagName(this.mactionName))}isMactionNode(t){return t.tagName===this.mactionName}}e.MmlCssHighlighter=o},7071:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.MmlHighlighter=void 0;const n=r(5105);class o extends n.AbstractHighlighter{constructor(){super(),this.mactionName="maction"}highlightNode(t){let e=t.getAttribute("style");return e+=";background-color: "+this.colorString().background,e+=";color: "+this.colorString().foreground,t.setAttribute("style",e),{node:t}}unhighlightNode(t){let e=t.node.getAttribute("style");e=e.replace(";background-color: "+this.colorString().background,""),e=e.replace(";color: "+this.colorString().foreground,""),t.node.setAttribute("style",e)}colorString(){return this.color.rgba()}getMactionNodes(t){return Array.from(t.getElementsByTagName(this.mactionName))}isMactionNode(t){return t.tagName===this.mactionName}}e.MmlHighlighter=o},4346:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SvgHighlighter=void 0;const n=r(5740),o=r(5105);class i extends o.AbstractHighlighter{constructor(){super(),this.mactionName="mjx-svg-maction"}highlightNode(t){let e;if(this.isHighlighted(t))return e={node:t.previousSibling||t,background:t.style.backgroundColor,foreground:t.style.color},e;if("svg"===t.tagName){const e={node:t,background:t.style.backgroundColor,foreground:t.style.color};return t.style.backgroundColor=this.colorString().background,t.style.color=this.colorString().foreground,e}const r=n.createElementNS("http://www.w3.org/2000/svg","rect");let i;if("use"===t.nodeName){const e=n.createElementNS("http://www.w3.org/2000/svg","g");t.parentNode.insertBefore(e,t),e.appendChild(t),i=e.getBBox(),e.parentNode.replaceChild(t,e)}else i=t.getBBox();r.setAttribute("x",(i.x-40).toString()),r.setAttribute("y",(i.y-40).toString()),r.setAttribute("width",(i.width+80).toString()),r.setAttribute("height",(i.height+80).toString());const s=t.getAttribute("transform");return s&&r.setAttribute("transform",s),r.setAttribute("fill",this.colorString().background),r.setAttribute(o.AbstractHighlighter.ATTR,"true"),t.parentNode.insertBefore(r,t),e={node:r,foreground:t.getAttribute("fill")},t.setAttribute("fill",this.colorString().foreground),e}setHighlighted(t){"svg"===t.tagName&&super.setHighlighted(t)}unhighlightNode(t){if("background"in t)return t.node.style.backgroundColor=t.background,void(t.node.style.color=t.foreground);t.foreground?t.node.nextSibling.setAttribute("fill",t.foreground):t.node.nextSibling.removeAttribute("fill"),t.node.parentNode.removeChild(t.node)}isMactionNode(t){let e=t.className||t.getAttribute("class");return e=void 0!==e.baseVal?e.baseVal:e,!!e&&!!e.match(new RegExp(this.mactionName))}}e.SvgHighlighter=i},2222:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SvgV3Highlighter=void 0;const n=r(5740),o=r(5274),i=r(5105),s=r(8396),a=r(4346);class l extends a.SvgHighlighter{constructor(){super(),this.mactionName="maction"}highlightNode(t){let e;if(this.isHighlighted(t))return e={node:t,background:this.colorString().background,foreground:this.colorString().foreground},e;if("svg"===t.tagName||"MJX-CONTAINER"===t.tagName)return e={node:t,background:t.style.backgroundColor,foreground:t.style.color},t.style.backgroundColor=this.colorString().background,t.style.color=this.colorString().foreground,e;const r=n.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("sre-highlighter-added","true");const o=t.getBBox();r.setAttribute("x",(o.x-40).toString()),r.setAttribute("y",(o.y-40).toString()),r.setAttribute("width",(o.width+80).toString()),r.setAttribute("height",(o.height+80).toString());const a=t.getAttribute("transform");if(a&&r.setAttribute("transform",a),r.setAttribute("fill",this.colorString().background),t.setAttribute(i.AbstractHighlighter.ATTR,"true"),t.parentNode.insertBefore(r,t),e={node:t,foreground:t.getAttribute("fill")},"rect"===t.nodeName){const e=new s.ColorPicker({alpha:0,color:"black"});t.setAttribute("fill",e.rgba().foreground)}else t.setAttribute("fill",this.colorString().foreground);return e}unhighlightNode(t){const e=t.node.previousSibling;if(e&&e.hasAttribute("sre-highlighter-added"))return t.foreground?t.node.setAttribute("fill",t.foreground):t.node.removeAttribute("fill"),void t.node.parentNode.removeChild(e);t.node.style.backgroundColor=t.background,t.node.style.color=t.foreground}isMactionNode(t){return t.getAttribute("data-mml-node")===this.mactionName}getMactionNodes(t){return Array.from(o.evalXPath(`.//*[@data-mml-node="${this.mactionName}"]`,t))}}e.SvgV3Highlighter=l},7222:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.StaticTrieNode=e.AbstractTrieNode=void 0;const n=r(2057),o=r(4391);class i{constructor(t,e){this.constraint=t,this.test=e,this.children_={},this.kind=o.TrieNodeKind.ROOT}getConstraint(){return this.constraint}getKind(){return this.kind}applyTest(t){return this.test(t)}addChild(t){const e=t.getConstraint(),r=this.children_[e];return this.children_[e]=t,r}getChild(t){return this.children_[t]}getChildren(){const t=[];for(const e in this.children_)t.push(this.children_[e]);return t}findChildren(t){const e=[];for(const r in this.children_){const n=this.children_[r];n.applyTest(t)&&e.push(n)}return e}removeChild(t){delete this.children_[t]}toString(){return this.constraint}}e.AbstractTrieNode=i;e.StaticTrieNode=class extends i{constructor(t,e){super(t,e),this.rule_=null,this.kind=o.TrieNodeKind.STATIC}getRule(){return this.rule_}setRule(t){this.rule_&&n.Debugger.getInstance().output("Replacing rule "+this.rule_+" with "+t),this.rule_=t}toString(){return this.getRule()?this.constraint+"\n==> "+this.getRule().action:this.constraint}}},4508:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Trie=void 0;const n=r(4391),o=r(9701);class i{constructor(){this.root=(0,o.getNode)(n.TrieNodeKind.ROOT,"",null)}static collectRules_(t){const e=[];let r=[t];for(;r.length;){const t=r.shift();if(t.getKind()===n.TrieNodeKind.QUERY||t.getKind()===n.TrieNodeKind.BOOLEAN){const r=t.getRule();r&&e.unshift(r)}r=r.concat(t.getChildren())}return e}static printWithDepth_(t,e,r){r+=new Array(e+2).join(e.toString())+": "+t.toString()+"\n";const n=t.getChildren();for(let t,o=0;t=n[o];o++)r=i.printWithDepth_(t,e+1,r);return r}static order_(t){const e=t.getChildren();if(!e.length)return 0;const r=Math.max.apply(null,e.map(i.order_));return Math.max(e.length,r)}addRule(t){let e=this.root;const r=t.context,o=t.dynamicCstr.getValues();for(let t=0,i=o.length;t<i;t++)e=this.addNode_(e,o[t],n.TrieNodeKind.DYNAMIC,r);e=this.addNode_(e,t.precondition.query,n.TrieNodeKind.QUERY,r);const i=t.precondition.constraints;for(let t=0,o=i.length;t<o;t++)e=this.addNode_(e,i[t],n.TrieNodeKind.BOOLEAN,r);e.setRule(t)}lookupRules(t,e){let r=[this.root];const o=[];for(;e.length;){const t=e.shift(),o=[];for(;r.length;){r.shift().getChildren().forEach((e=>{e.getKind()===n.TrieNodeKind.DYNAMIC&&-1===t.indexOf(e.getConstraint())||o.push(e)}))}r=o.slice()}for(;r.length;){const e=r.shift();if(e.getRule){const t=e.getRule();t&&o.push(t)}const n=e.findChildren(t);r=r.concat(n)}return o}hasSubtrie(t){let e=this.root;for(let r=0,n=t.length;r<n;r++){const n=t[r];if(e=e.getChild(n),!e)return!1}return!0}toString(){return i.printWithDepth_(this.root,0,"")}collectRules(){return i.collectRules_(this.root)}order(){return i.order_(this.root)}enumerate(t){return this.enumerate_(this.root,t)}byConstraint(t){let e=this.root;for(;t.length&&e;){const r=t.shift();e=e.getChild(r)}return e||null}enumerate_(t,e){e=e||{};const r=t.getChildren();for(let t,o=0;t=r[o];o++)t.kind===n.TrieNodeKind.DYNAMIC&&(e[t.getConstraint()]=this.enumerate_(t,e[t.getConstraint()]));return e}addNode_(t,e,r,n){let i=t.getChild(e);return i||(i=(0,o.getNode)(r,e,n),t.addChild(i)),i}}e.Trie=i},4391:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrieNodeKind=void 0,function(t){t.ROOT="root",t.DYNAMIC="dynamic",t.QUERY="query",t.BOOLEAN="boolean",t.STATIC="static"}(e.TrieNodeKind||(e.TrieNodeKind={}))},9701:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanTrieNode=e.QueryTrieNode=e.constraintTest_=e.DynamicTrieNode=e.RootTrieNode=e.getNode=void 0;const n=r(5740),o=r(5274),i=r(2105),s=r(2780),a=r(7222),l=r(7222),c=r(4391);e.getNode=function(t,e,r){switch(t){case c.TrieNodeKind.ROOT:return new u;case c.TrieNodeKind.DYNAMIC:return new p(e);case c.TrieNodeKind.QUERY:return new d(e,r);case c.TrieNodeKind.BOOLEAN:return new m(e,r);default:return null}};class u extends a.AbstractTrieNode{constructor(){super("",(()=>!0)),this.kind=c.TrieNodeKind.ROOT}}e.RootTrieNode=u;class p extends a.AbstractTrieNode{constructor(t){super(t,(e=>e===t)),this.kind=c.TrieNodeKind.DYNAMIC}}e.DynamicTrieNode=p;const h={"=":(t,e)=>t===e,"!=":(t,e)=>t!==e,"<":(t,e)=>t<e,">":(t,e)=>t>e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e};function f(t){if(t.match(/^self::\*$/))return t=>!0;if(t.match(/^self::\w+$/)){const e=t.slice(6).toUpperCase();return t=>t.tagName&&n.tagName(t)===e}if(t.match(/^self::\w+:\w+$/)){const e=t.split(":"),r=o.resolveNameSpace(e[2]);if(!r)return null;const n=e[3].toUpperCase();return t=>t.localName&&t.localName.toUpperCase()===n&&t.namespaceURI===r}if(t.match(/^@\w+$/)){const e=t.slice(1);return t=>t.hasAttribute&&t.hasAttribute(e)}if(t.match(/^@\w+="[\w\d ]+"$/)){const e=t.split("="),r=e[0].slice(1),n=e[1].slice(1,-1);return t=>t.hasAttribute&&t.hasAttribute(r)&&t.getAttribute(r)===n}if(t.match(/^@\w+!="[\w\d ]+"$/)){const e=t.split("!="),r=e[0].slice(1),n=e[1].slice(1,-1);return t=>!t.hasAttribute||!t.hasAttribute(r)||t.getAttribute(r)!==n}if(t.match(/^contains\(\s*@grammar\s*,\s*"[\w\d ]+"\s*\)$/)){const e=t.split('"')[1];return t=>!!i.Grammar.getInstance().getParameter(e)}if(t.match(/^not\(\s*contains\(\s*@grammar\s*,\s*"[\w\d ]+"\s*\)\s*\)$/)){const e=t.split('"')[1];return t=>!i.Grammar.getInstance().getParameter(e)}if(t.match(/^name\(\.\.\/\.\.\)="\w+"$/)){const e=t.split('"')[1].toUpperCase();return t=>{var r,o;return(null===(o=null===(r=t.parentNode)||void 0===r?void 0:r.parentNode)||void 0===o?void 0:o.tagName)&&n.tagName(t.parentNode.parentNode)===e}}if(t.match(/^count\(preceding-sibling::\*\)=\d+$/)){const e=t.split("="),r=parseInt(e[1],10);return t=>{var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.childNodes[r])===t}}if(t.match(/^.+\[@category!?=".+"\]$/)){let[,e,r,n]=t.match(/^(.+)\[@category(!?=)"(.+)"\]$/);const i=n.match(/^unit:(.+)$/);let a="";return i&&(n=i[1],a=":unit"),t=>{const i=o.evalXPath(e,t)[0];if(i){const t=s.lookupCategory(i.textContent+a);return"="===r?t===n:t!==n}return!1}}if(t.match(/^string-length\(.+\)\W+\d+/)){const[,e,r,n]=t.match(/^string-length\((.+)\)(\W+)(\d+)/),i=h[r]||h["="],s=parseInt(n,10);return t=>{const r=o.evalXPath(e,t)[0];return!!r&&i(Array.from(r.textContent).length,s)}}return null}e.constraintTest_=f;class d extends l.StaticTrieNode{constructor(t,e){super(t,f(t)),this.context=e,this.kind=c.TrieNodeKind.QUERY}applyTest(t){return this.test?this.test(t):this.context.applyQuery(t,this.constraint)===t}}e.QueryTrieNode=d;class m extends l.StaticTrieNode{constructor(t,e){super(t,f(t)),this.context=e,this.kind=c.TrieNodeKind.BOOLEAN}applyTest(t){return this.test?this.test(t):this.context.applyConstraint(t,this.constraint)}}e.BooleanTrieNode=m},7491:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.completeLocale=e.getLocale=e.setLocale=e.locales=void 0;const n=r(5897),o=r(1377),i=r(2105),s=r(4249),a=r(8657),l=r(173),c=r(9393),u=r(7978),p=r(5540),h=r(5218),f=r(3887),d=r(8384),m=r(7206),y=r(7734),g=r(7264),b=r(4356);function v(){const t=o.Variables.ensureLocale(n.default.getInstance().locale,n.default.getInstance().defaultLocale);return n.default.getInstance().locale=t,e.locales[t]()}e.locales={ca:s.ca,da:a.da,de:l.de,en:c.en,es:u.es,fr:p.fr,hi:h.hi,it:f.it,nb:d.nb,nn:y.nn,sv:g.sv,nemeth:m.nemeth},e.setLocale=function(){const t=v();if(function(t){const e=n.default.getInstance().subiso;-1===t.SUBISO.all.indexOf(e)&&(n.default.getInstance().subiso=t.SUBISO.default);t.SUBISO.current=n.default.getInstance().subiso}(t),t){for(const e of Object.getOwnPropertyNames(t))b.LOCALE[e]=t[e];for(const[e,r]of Object.entries(t.CORRECTIONS))i.Grammar.getInstance().setCorrection(e,r)}},e.getLocale=v,e.completeLocale=function(t){const r=e.locales[t.locale];if(!r)return void console.error("Locale "+t.locale+" does not exist!");const n=t.kind.toUpperCase(),o=t.messages;if(!o)return;const i=r();for(const[t,e]of Object.entries(o))i[n][t]=e}},4356:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.createLocale=e.LOCALE=void 0;const n=r(7549);function o(){return{FUNCTIONS:(0,n.FUNCTIONS)(),MESSAGES:(0,n.MESSAGES)(),ALPHABETS:(0,n.ALPHABETS)(),NUMBERS:(0,n.NUMBERS)(),COMBINERS:{},CORRECTIONS:{},SUBISO:(0,n.SUBISO)()}}e.LOCALE=o(),e.createLocale=o},2536:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.localeFontCombiner=e.extractString=e.localEnclose=e.localRole=e.localFont=e.combinePostfixIndex=e.nestingToString=void 0;const n=r(4356),o=r(4977);function i(t,e){return void 0===t?e:"string"==typeof t?t:t[0]}e.nestingToString=function(t){switch(t){case 1:return n.LOCALE.MESSAGES.MS.ONCE||"";case 2:return n.LOCALE.MESSAGES.MS.TWICE;default:return t.toString()}},e.combinePostfixIndex=function(t,e){return t===n.LOCALE.MESSAGES.MS.ROOTINDEX||t===n.LOCALE.MESSAGES.MS.INDEX?t:t+" "+e},e.localFont=function(t){return i(n.LOCALE.MESSAGES.font[t],t)},e.localRole=function(t){return i(n.LOCALE.MESSAGES.role[t],t)},e.localEnclose=function(t){return i(n.LOCALE.MESSAGES.enclose[t],t)},e.extractString=i,e.localeFontCombiner=function(t){return"string"==typeof t?{font:t,combiner:n.LOCALE.ALPHABETS.combiner}:{font:t[0],combiner:n.LOCALE.COMBINERS[t[1]]||o.Combiners[t[1]]||n.LOCALE.ALPHABETS.combiner}}},4249:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ca=void 0;const n=r(4356),o=r(2536),i=r(614),s=r(4977),a=function(t,e,r){return t="sans serif "+(r?r+" "+t:t),e?t+" "+e:t};let l=null;e.ca=function(){return l||(l=function(){const t=(0,n.createLocale)();return t.NUMBERS=i.default,t.COMBINERS.sansserif=a,t.FUNCTIONS.fracNestDepth=t=>!1,t.FUNCTIONS.combineRootIndex=o.combinePostfixIndex,t.FUNCTIONS.combineNestedRadical=(t,e,r)=>t+r,t.FUNCTIONS.fontRegexp=t=>RegExp("^"+t+" "),t.FUNCTIONS.plural=t=>/.*os$/.test(t)?t+"sos":/.*s$/.test(t)?t+"os":/.*ga$/.test(t)?t.slice(0,-2)+"gues":/.*\xe7a$/.test(t)?t.slice(0,-2)+"ces":/.*ca$/.test(t)?t.slice(0,-2)+"ques":/.*ja$/.test(t)?t.slice(0,-2)+"ges":/.*qua$/.test(t)?t.slice(0,-3)+"q\xfces":/.*a$/.test(t)?t.slice(0,-1)+"es":/.*(e|i)$/.test(t)?t+"ns":/.*\xed$/.test(t)?t.slice(0,-1)+"ins":t+"s",t.FUNCTIONS.si=(t,e)=>(e.match(/^metre/)&&(t=t.replace(/a$/,"\xe0").replace(/o$/,"\xf2").replace(/i$/,"\xed")),t+e),t.ALPHABETS.combiner=s.Combiners.prefixCombiner,t}()),l}},8657:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.da=void 0;const n=r(4356),o=r(2536),i=r(3866),s=r(4977);let a=null;e.da=function(){return a||(a=function(){const t=(0,n.createLocale)();return t.NUMBERS=i.default,t.FUNCTIONS.radicalNestDepth=o.nestingToString,t.FUNCTIONS.fontRegexp=e=>e===t.ALPHABETS.capPrefix.default?RegExp("^"+e+" "):RegExp(" "+e+"$"),t.ALPHABETS.combiner=s.Combiners.postfixCombiner,t.ALPHABETS.digitTrans.default=i.default.numberToWords,t}()),a}},173:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.de=void 0;const n=r(2105),o=r(2536),i=r(4356),s=r(1435),a=function(t,e,r){return"s"===r&&(e=e.split(" ").map((function(t){return t.replace(/s$/,"")})).join(" "),r=""),t=r?r+" "+t:t,e?e+" "+t:t},l=function(t,e,r){return t=r&&"s"!==r?r+" "+t:t,e?t+" "+e:t};let c=null;e.de=function(){return c||(c=function(){const t=(0,i.createLocale)();return t.NUMBERS=s.default,t.COMBINERS.germanPostfix=l,t.ALPHABETS.combiner=a,t.FUNCTIONS.radicalNestDepth=e=>e>1?t.NUMBERS.numberToWords(e)+"fach":"",t.FUNCTIONS.combineRootIndex=(t,e)=>{const r=e?e+"wurzel":"";return t.replace("Wurzel",r)},t.FUNCTIONS.combineNestedRadical=(t,e,r)=>{const n=(e?e+" ":"")+(t=r.match(/exponent$/)?t+"r":t);return r.match(/ /)?r.replace(/ /," "+n+" "):n+" "+r},t.FUNCTIONS.fontRegexp=function(t){return t=t.split(" ").map((function(t){return t.replace(/s$/,"(|s)")})).join(" "),new RegExp("((^"+t+" )|( "+t+"$))")},t.CORRECTIONS.correctOne=t=>t.replace(/^eins$/,"ein"),t.CORRECTIONS.localFontNumber=t=>(0,o.localFont)(t).split(" ").map((function(t){return t.replace(/s$/,"")})).join(" "),t.CORRECTIONS.lowercase=t=>t.toLowerCase(),t.CORRECTIONS.article=t=>{const e=n.Grammar.getInstance().getParameter("case"),r=n.Grammar.getInstance().getParameter("plural");return"dative"===e?{der:"dem",die:r?"den":"der",das:"dem"}[t]:t},t.CORRECTIONS.masculine=t=>"dative"===n.Grammar.getInstance().getParameter("case")?t+"n":t,t}()),c}},9393:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.en=void 0;const n=r(2105),o=r(4356),i=r(2536),s=r(310),a=r(4977);let l=null;e.en=function(){return l||(l=function(){const t=(0,o.createLocale)();return t.NUMBERS=s.default,t.FUNCTIONS.radicalNestDepth=i.nestingToString,t.FUNCTIONS.plural=t=>/.*s$/.test(t)?t:t+"s",t.ALPHABETS.combiner=a.Combiners.prefixCombiner,t.ALPHABETS.digitTrans.default=s.default.numberToWords,t.CORRECTIONS.article=t=>n.Grammar.getInstance().getParameter("noArticle")?"":t,t}()),l}},7978:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.es=void 0;const n=r(4356),o=r(2536),i=r(4634),s=r(4977),a=function(t,e,r){return t="sans serif "+(r?r+" "+t:t),e?t+" "+e:t};let l=null;e.es=function(){return l||(l=function(){const t=(0,n.createLocale)();return t.NUMBERS=i.default,t.COMBINERS.sansserif=a,t.FUNCTIONS.fracNestDepth=t=>!1,t.FUNCTIONS.combineRootIndex=o.combinePostfixIndex,t.FUNCTIONS.combineNestedRadical=(t,e,r)=>t+r,t.FUNCTIONS.fontRegexp=t=>RegExp("^"+t+" "),t.FUNCTIONS.plural=t=>/.*(a|e|i|o|u)$/.test(t)?t+"s":/.*z$/.test(t)?t.slice(0,-1)+"ces":/.*c$/.test(t)?t.slice(0,-1)+"ques":/.*g$/.test(t)?t+"ues":/.*\u00f3n$/.test(t)?t.slice(0,-2)+"ones":t+"es",t.FUNCTIONS.si=(t,e)=>(e.match(/^metro/)&&(t=t.replace(/a$/,"\xe1").replace(/o$/,"\xf3").replace(/i$/,"\xed")),t+e),t.ALPHABETS.combiner=s.Combiners.prefixCombiner,t}()),l}},5540:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.fr=void 0;const n=r(2105),o=r(4356),i=r(2536),s=r(2350),a=r(4977);let l=null;e.fr=function(){return l||(l=function(){const t=(0,o.createLocale)();return t.NUMBERS=s.default,t.FUNCTIONS.radicalNestDepth=i.nestingToString,t.FUNCTIONS.combineRootIndex=i.combinePostfixIndex,t.FUNCTIONS.combineNestedFraction=(t,e,r)=>r.replace(/ $/g,"")+e+t,t.FUNCTIONS.combineNestedRadical=(t,e,r)=>r+" "+t,t.FUNCTIONS.fontRegexp=t=>RegExp(" (en |)"+t+"$"),t.FUNCTIONS.plural=t=>/.*s$/.test(t)?t:t+"s",t.CORRECTIONS.article=t=>n.Grammar.getInstance().getParameter("noArticle")?"":t,t.ALPHABETS.combiner=a.Combiners.romanceCombiner,t.SUBISO={default:"fr",current:"fr",all:["fr","be","ch"]},t}()),l}},5218:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.hi=void 0;const n=r(4356),o=r(4438),i=r(4977),s=r(2536);let a=null;e.hi=function(){return a||(a=function(){const t=(0,n.createLocale)();return t.NUMBERS=o.default,t.ALPHABETS.combiner=i.Combiners.prefixCombiner,t.FUNCTIONS.radicalNestDepth=s.nestingToString,t}()),a}},3887:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.it=void 0;const n=r(2536),o=r(4356),i=r(8825),s=r(4977),a=function(t,e,r){return t.match(/^[a-zA-Z]$/)&&(e=e.replace("cerchiato","cerchiata")),t=r?t+" "+r:t,e?t+" "+e:t};let l=null;e.it=function(){return l||(l=function(){const t=(0,o.createLocale)();return t.NUMBERS=i.default,t.COMBINERS.italianPostfix=a,t.FUNCTIONS.radicalNestDepth=n.nestingToString,t.FUNCTIONS.combineRootIndex=n.combinePostfixIndex,t.FUNCTIONS.combineNestedFraction=(t,e,r)=>r.replace(/ $/g,"")+e+t,t.FUNCTIONS.combineNestedRadical=(t,e,r)=>r+" "+t,t.FUNCTIONS.fontRegexp=t=>RegExp(" (en |)"+t+"$"),t.ALPHABETS.combiner=s.Combiners.romanceCombiner,t}()),l}},8384:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.nb=void 0;const n=r(4356),o=r(2536),i=r(8274),s=r(4977);let a=null;e.nb=function(){return a||(a=function(){const t=(0,n.createLocale)();return t.NUMBERS=i.default,t.ALPHABETS.combiner=s.Combiners.prefixCombiner,t.ALPHABETS.digitTrans.default=i.default.numberToWords,t.FUNCTIONS.radicalNestDepth=o.nestingToString,t}()),a}},7206:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.nemeth=void 0;const n=r(4356),o=r(3720),i=r(4977),s=function(t){return t.match(RegExp("^"+h.ALPHABETS.languagePrefix.english))?t.slice(1):t},a=function(t,e,r){return t=s(t),e?t+e:t},l=function(t,e,r){return e+s(t)},c=function(t,e,r){return e+(r||"")+(t=s(t))+"\u283b"},u=function(t,e,r){return e+(r||"")+(t=s(t))+"\u283b\u283b"},p=function(t,e,r){return e+(t=s(t))+"\u283e"};let h=null;e.nemeth=function(){return h||(h=function(){const t=(0,n.createLocale)();return t.NUMBERS=o.default,t.COMBINERS={postfixCombiner:a,germanCombiner:l,embellishCombiner:c,doubleEmbellishCombiner:u,parensCombiner:p},t.FUNCTIONS.fracNestDepth=t=>!1,t.FUNCTIONS.fontRegexp=t=>RegExp("^"+t),t.FUNCTIONS.si=i.identityTransformer,t.ALPHABETS.combiner=(t,e,r)=>e?e+r+t:s(t),t.ALPHABETS.digitTrans={default:o.default.numberToWords},t}()),h}},7734:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.nn=void 0;const n=r(4356),o=r(2536),i=r(8274),s=r(4977);let a=null;e.nn=function(){return a||(a=function(){const t=(0,n.createLocale)();return t.NUMBERS=i.default,t.ALPHABETS.combiner=s.Combiners.prefixCombiner,t.ALPHABETS.digitTrans.default=i.default.numberToWords,t.FUNCTIONS.radicalNestDepth=o.nestingToString,t.SUBISO={default:"",current:"",all:["","alt"]},t}()),a}},7264:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.sv=void 0;const n=r(4356),o=r(2536),i=r(3898),s=r(4977);let a=null;e.sv=function(){return a||(a=function(){const t=(0,n.createLocale)();return t.NUMBERS=i.default,t.FUNCTIONS.radicalNestDepth=o.nestingToString,t.FUNCTIONS.fontRegexp=function(t){return new RegExp("((^"+t+" )|( "+t+"$))")},t.ALPHABETS.combiner=s.Combiners.prefixCombiner,t.ALPHABETS.digitTrans.default=i.default.numberToWords,t.CORRECTIONS.correctOne=t=>t.replace(/^ett$/,"en"),t}()),a}},7549:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SUBISO=e.FUNCTIONS=e.ALPHABETS=e.NUMBERS=e.MESSAGES=void 0;const n=r(4977);e.MESSAGES=function(){return{MS:{},MSroots:{},font:{},embellish:{},role:{},enclose:{},navigate:{},regexp:{},unitTimes:""}},e.NUMBERS=function(){return{zero:"zero",ones:[],tens:[],large:[],special:{},wordOrdinal:n.identityTransformer,numericOrdinal:n.identityTransformer,numberToWords:n.identityTransformer,numberToOrdinal:n.pluralCase,vulgarSep:" ",numSep:" "}},e.ALPHABETS=function(){return{latinSmall:[],latinCap:[],greekSmall:[],greekCap:[],capPrefix:{default:""},smallPrefix:{default:""},digitPrefix:{default:""},languagePrefix:{},digitTrans:{default:n.identityTransformer,mathspeak:n.identityTransformer,clearspeak:n.identityTransformer},letterTrans:{default:n.identityTransformer},combiner:(t,e,r)=>t}},e.FUNCTIONS=function(){return{fracNestDepth:t=>n.vulgarFractionSmall(t,10,100),radicalNestDepth:t=>"",combineRootIndex:function(t,e){return t},combineNestedFraction:n.Combiners.identityCombiner,combineNestedRadical:n.Combiners.identityCombiner,fontRegexp:function(t){return new RegExp("^"+t.split(/ |-/).join("( |-)")+"( |-)")},si:n.siCombiner,plural:n.identityTransformer}},e.SUBISO=function(){return{default:"",current:"",all:[]}}},614:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});const n=r(2105);function o(t){const e=t%1e3,r=Math.floor(e/100),n=r?1===r?"cent":a.ones[r]+"-cents":"",o=function(t){const e=t%100;if(e<20)return a.ones[e];const r=Math.floor(e/10),n=a.tens[r],o=a.ones[e%10];return n&&o?n+(2===r?"-i-":"-")+o:n||o}(e%100);return n&&o?n+a.numSep+o:n||o}function i(t){if(0===t)return a.zero;if(t>=Math.pow(10,36))return t.toString();let e=0,r="";for(;t>0;){const n=t%(e>1?1e6:1e3);if(n){let t=a.large[e];if(e)if(1===e)r=(1===n?"":o(n)+a.numSep)+t+(r?a.numSep+r:"");else{const e=i(n);t=1===n?t:t.replace(/\u00f3$/,"ons"),r=e+a.numSep+t+(r?a.numSep+r:"")}else r=o(n)}t=Math.floor(t/(e>1?1e6:1e3)),e++}return r}function s(t){const e=n.Grammar.getInstance().getParameter("gender");return t.toString()+("f"===e?"a":"n")}const a=(0,r(7549).NUMBERS)();a.numericOrdinal=s,a.numberToWords=i,a.numberToOrdinal=function(t,e){if(t>1999)return s(t);if(t<=10)return a.special.onesOrdinals[t-1];const r=i(t);return r.match(/mil$/)?r.replace(/mil$/,"mil\xb7l\xe8sima"):r.match(/u$/)?r.replace(/u$/,"vena"):r.match(/a$/)?r.replace(/a$/,"ena"):r+(r.match(/e$/)?"na":"ena")},e.default=a},3866:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});function n(t,e=!1){return t===a.ones[1]?e?"et":"en":t}function o(t,e=!1){let r=t%1e3,o="",i=a.ones[Math.floor(r/100)];if(o+=i?n(i,!0)+" hundrede":"",r%=100,r)if(o+=o?" og ":"",i=e?a.special.smallOrdinals[r]:a.ones[r],i)o+=i;else{const t=e?a.special.tensOrdinals[Math.floor(r/10)]:a.tens[Math.floor(r/10)];i=a.ones[r%10],o+=i?n(i)+"og"+t:t}return o}function i(t,e=!1){if(0===t)return a.zero;if(t>=Math.pow(10,36))return t.toString();let r=0,i="";for(;t>0;){const s=t%1e3;if(s){const t=o(s,e&&!r);if(r){const e=a.large[r],o=s>1?"er":"";i=n(t,r<=1)+" "+e+o+(i?" og ":"")+i}else i=n(t)+i}t=Math.floor(t/1e3),r++}return i}function s(t){if(t%100)return i(t,!0);const e=i(t);return e.match(/e$/)?e:e+"e"}const a=(0,r(7549).NUMBERS)();a.wordOrdinal=s,a.numericOrdinal=function(t){return t.toString()+"."},a.numberToWords=i,a.numberToOrdinal=function(t,e){return 1===t?e?"hel":"hele":2===t?e?"halv":"halve":s(t)+(e?"dele":"del")},e.default=a},1435:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});function n(t,e=!1){return t===a.ones[1]?e?"eine":"ein":t}function o(t){let e=t%1e3,r="",o=a.ones[Math.floor(e/100)];if(r+=o?n(o)+"hundert":"",e%=100,e)if(r+=r?a.numSep:"",o=a.ones[e],o)r+=o;else{const t=a.tens[Math.floor(e/10)];o=a.ones[e%10],r+=o?n(o)+"und"+t:t}return r}function i(t){if(0===t)return a.zero;if(t>=Math.pow(10,36))return t.toString();let e=0,r="";for(;t>0;){const i=t%1e3;if(i){const s=o(t%1e3);if(e){const t=a.large[e],o=e>1&&i>1?t.match(/e$/)?"n":"en":"";r=n(s,e>1)+t+o+r}else r=n(s,e>1)+r}t=Math.floor(t/1e3),e++}return r.replace(/ein$/,"eins")}function s(t){if(1===t)return"erste";if(3===t)return"dritte";if(7===t)return"siebte";if(8===t)return"achte";return i(t)+(t<19?"te":"ste")}const a=(0,r(7549).NUMBERS)();a.wordOrdinal=s,a.numericOrdinal=function(t){return t.toString()+"."},a.numberToWords=i,a.numberToOrdinal=function(t,e){return 1===t?"eintel":2===t?e?"halbe":"halb":s(t)+"l"},e.default=a},310:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});function n(t){let e=t%1e3,r="";return r+=s.ones[Math.floor(e/100)]?s.ones[Math.floor(e/100)]+s.numSep+"hundred":"",e%=100,e&&(r+=r?s.numSep:"",r+=s.ones[e]||s.tens[Math.floor(e/10)]+(e%10?s.numSep+s.ones[e%10]:"")),r}function o(t){if(0===t)return s.zero;if(t>=Math.pow(10,36))return t.toString();let e=0,r="";for(;t>0;){t%1e3&&(r=n(t%1e3)+(e?"-"+s.large[e]+"-":"")+r),t=Math.floor(t/1e3),e++}return r.replace(/-$/,"")}function i(t){let e=o(t);return e.match(/one$/)?e=e.slice(0,-3)+"first":e.match(/two$/)?e=e.slice(0,-3)+"second":e.match(/three$/)?e=e.slice(0,-5)+"third":e.match(/five$/)?e=e.slice(0,-4)+"fifth":e.match(/eight$/)?e=e.slice(0,-5)+"eighth":e.match(/nine$/)?e=e.slice(0,-4)+"ninth":e.match(/twelve$/)?e=e.slice(0,-6)+"twelfth":e.match(/ty$/)?e=e.slice(0,-2)+"tieth":e+="th",e}const s=(0,r(7549).NUMBERS)();s.wordOrdinal=i,s.numericOrdinal=function(t){const e=t%100,r=t.toString();if(e>10&&e<20)return r+"th";switch(t%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd";default:return r+"th"}},s.numberToWords=o,s.numberToOrdinal=function(t,e){if(1===t)return e?"oneths":"oneth";if(2===t)return e?"halves":"half";const r=i(t);return e?r+"s":r},e.default=s},4634:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});const n=r(2105);function o(t){const e=t%1e3,r=Math.floor(e/100),n=i.special.hundreds[r],o=function(t){const e=t%100;if(e<30)return i.ones[e];const r=i.tens[Math.floor(e/10)],n=i.ones[e%10];return r&&n?r+" y "+n:r||n}(e%100);return 1===r?o?n+"to "+o:n:n&&o?n+" "+o:n||o}const i=(0,r(7549).NUMBERS)();i.numericOrdinal=function(t){const e=n.Grammar.getInstance().getParameter("gender");return t.toString()+("f"===e?"a":"o")},i.numberToWords=function(t){if(0===t)return i.zero;if(t>=Math.pow(10,36))return t.toString();let e=0,r="";for(;t>0;){const n=t%1e3;if(n){let t=i.large[e];const s=o(n);e?1===n?(t=t.match("/^mil( |$)/")?t:"un "+t,r=t+(r?" "+r:"")):(t=t.replace(/\u00f3n$/,"ones"),r=o(n)+" "+t+(r?" "+r:"")):r=s}t=Math.floor(t/1e3),e++}return r},i.numberToOrdinal=function(t,e){if(t>1999)return t.toString()+"a";if(t<=12)return i.special.onesOrdinals[t-1];const r=[];if(t>=1e3&&(t-=1e3,r.push("mil\xe9sima")),!t)return r.join(" ");let n=0;return n=Math.floor(t/100),n>0&&(r.push(i.special.hundredsOrdinals[n-1]),t%=100),t<=12?r.push(i.special.onesOrdinals[t-1]):(n=Math.floor(t/10),n>0&&(r.push(i.special.tensOrdinals[n-1]),t%=10),t>0&&r.push(i.special.onesOrdinals[t-1])),r.join(" ")},e.default=i},2350:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});const n=r(5897),o=r(2105),i=r(7549);function s(t){let e=t%1e3,r="";if(r+=u.ones[Math.floor(e/100)]?u.ones[Math.floor(e/100)]+"-cent":"",e%=100,e){r+=r?"-":"";let t=u.ones[e];if(t)r+=t;else{const n=u.tens[Math.floor(e/10)];n.match(/-dix$/)?(t=u.ones[e%10+10],r+=n.replace(/-dix$/,"")+"-"+t):r+=n+(e%10?"-"+u.ones[e%10]:"")}}const n=r.match(/s-\w+$/);return n?r.replace(/s-\w+$/,n[0].slice(1)):r.replace(/-un$/,"-et-un")}function a(t){if(0===t)return u.zero;if(t>=Math.pow(10,36))return t.toString();u.special["tens-"+n.default.getInstance().subiso]&&(u.tens=u.special["tens-"+n.default.getInstance().subiso]);let e=0,r="";for(;t>0;){const n=t%1e3;if(n){let t=u.large[e];const o=s(n);if(t&&t.match(/^mille /)){const n=t.replace(/^mille /,"");r=r.match(RegExp(n))?o+(e?"-mille-":"")+r:r.match(RegExp(n.replace(/s$/,"")))?o+(e?"-mille-":"")+r.replace(n.replace(/s$/,""),n):o+(e?"-"+t+"-":"")+r}else t=1===n&&t?t.replace(/s$/,""):t,r=o+(e?"-"+t+"-":"")+r}t=Math.floor(t/1e3),e++}return r.replace(/-$/,"")}const l={1:"uni\xe8me",2:"demi",3:"tiers",4:"quart"};function c(t){if(1===t)return"premi\xe8re";let e=a(t);return e.match(/^neuf$/)?e=e.slice(0,-1)+"v":e.match(/cinq$/)?e+="u":e.match(/trois$/)?e+="":(e.match(/e$/)||e.match(/s$/))&&(e=e.slice(0,-1)),e+="i\xe8me",e}const u=(0,i.NUMBERS)();u.wordOrdinal=c,u.numericOrdinal=function(t){const e=o.Grammar.getInstance().getParameter("gender");return 1===t?t.toString()+("m"===e?"er":"re"):t.toString()+"e"},u.numberToWords=a,u.numberToOrdinal=function(t,e){const r=l[t]||c(t);return 3===t?r:e?r+"s":r},e.default=u},4438:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});const n=r(2105);function o(t){if(0===t)return s.zero;if(t>=Math.pow(10,32))return t.toString();let e=0,r="";const n=function(t){let e=t%1e3,r="";return r+=s.ones[Math.floor(e/100)]?s.ones[Math.floor(e/100)]+s.numSep+s.special.hundred:"",e%=100,e&&(r+=r?s.numSep:"",r+=s.ones[e]),r}(t%1e3);if(!(t=Math.floor(t/1e3)))return n;for(;t>0;){const n=t%100;n&&(r=s.ones[n]+s.numSep+s.large[e]+(r?s.numSep+r:"")),t=Math.floor(t/100),e++}return n?r+s.numSep+n:r}function i(t){const e=n.Grammar.getInstance().getParameter("gender");if(t<=0)return t.toString();if(t<10)return"f"===e?s.special.ordinalsFeminine[t]:s.special.ordinalsMasculine[t];return o(t)+("f"===e?"\u0935\u0940\u0902":"\u0935\u093e\u0901")}const s=(0,r(7549).NUMBERS)();s.wordOrdinal=i,s.numericOrdinal=function(t){const e=n.Grammar.getInstance().getParameter("gender");return t>0&&t<10?"f"===e?s.special.simpleSmallOrdinalsFeminine[t]:s.special.simpleSmallOrdinalsMasculine[t]:t.toString().split("").map((function(t){const e=parseInt(t,10);return isNaN(e)?"":s.special.simpleNumbers[e]})).join("")+("f"===e?"\u0935\u0940\u0902":"\u0935\u093e\u0901")},s.numberToWords=o,s.numberToOrdinal=function(t,e){return t<=10?s.special.smallDenominators[t]:i(t)+" \u0905\u0902\u0936"},e.default=s},8825:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});const n=r(2105);function o(t){let e=t%1e3,r="";if(r+=a.ones[Math.floor(e/100)]?a.ones[Math.floor(e/100)]+a.numSep+"cento":"",e%=100,e){r+=r?a.numSep:"";const t=a.ones[e];if(t)r+=t;else{let t=a.tens[Math.floor(e/10)];const n=e%10;1!==n&&8!==n||(t=t.slice(0,-1)),r+=t,r+=n?a.numSep+a.ones[e%10]:""}}return r}function i(t){if(0===t)return a.zero;if(t>=Math.pow(10,36))return t.toString();if(1===t&&n.Grammar.getInstance().getParameter("fraction"))return"un";let e=0,r="";for(;t>0;){t%1e3&&(r=o(t%1e3)+(e?"-"+a.large[e]+"-":"")+r),t=Math.floor(t/1e3),e++}return r.replace(/-$/,"")}function s(t){const e="m"===n.Grammar.getInstance().getParameter("gender")?"o":"a";let r=a.special.onesOrdinals[t];return r?r.slice(0,-1)+e:(r=i(t),r.slice(0,-1)+"esim"+e)}const a=(0,r(7549).NUMBERS)();a.wordOrdinal=s,a.numericOrdinal=function(t){const e=n.Grammar.getInstance().getParameter("gender");return t.toString()+("m"===e?"o":"a")},a.numberToWords=i,a.numberToOrdinal=function(t,e){if(2===t)return e?"mezzi":"mezzo";const r=s(t);if(!e)return r;const n=r.match(/o$/)?"i":"e";return r.slice(0,-1)+n},e.default=a},3720:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});function n(t){return t.toString().split("").map((function(t){return o.ones[parseInt(t,10)]})).join("")}const o=(0,r(7549).NUMBERS)();o.numberToWords=n,o.numberToOrdinal=n,e.default=o},8274:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});const n=r(5897);function o(t,e=!1){let r=t%1e3,n="";const o=Math.floor(r/100),s=a.ones[o];if(n+=s?(1===o?"":s)+"hundre":"",r%=100,r){if(n+=n?"og":"",e){const t=a.special.smallOrdinals[r];if(t)return n+t;if(r%10)return n+a.tens[Math.floor(r/10)]+a.special.smallOrdinals[r%10]}n+=a.ones[r]||a.tens[Math.floor(r/10)]+(r%10?a.ones[r%10]:"")}return e?i(n):n}function i(t){const e=a.special.endOrdinal[0];return"a"===e&&t.match(/en$/)?t.slice(0,-2)+a.special.endOrdinal:t.match(/(d|n)$/)||t.match(/hundre$/)?t+"de":t.match(/i$/)?t+a.special.endOrdinal:"a"===e&&t.match(/e$/)?t.slice(0,-1)+a.special.endOrdinal:(t.match(/e$/),t+"nde")}function s(t){return u(t,!0)}const a=(0,r(7549).NUMBERS)();function l(t,e=!1){return t===a.ones[1]?"ein"===t?"eitt ":e?"et":"ett":t}function c(t,e=!1){let r=t%1e3,n="",o=a.ones[Math.floor(r/100)];if(n+=o?l(o)+"hundre":"",r%=100,r){if(n+=n?"og":"",e){const t=a.special.smallOrdinals[r];if(t)return n+t}if(o=a.ones[r],o)n+=o;else{const t=a.tens[Math.floor(r/10)];o=a.ones[r%10],n+=o?o+"og"+t:t}}return e?i(n):n}function u(t,e=!1){const r="alt"===n.default.getInstance().subiso?function(t,e=!1){if(0===t)return e?a.special.smallOrdinals[0]:a.zero;if(t>=Math.pow(10,36))return t.toString();let r=0,n="";for(;t>0;){const o=t%1e3;if(o){const i=c(t%1e3,!r&&e);!r&&e&&(e=!e),n=(1===r?l(i,!0):i)+(r>1?a.numSep:"")+(r?a.large[r]+(r>1&&o>1?"er":""):"")+(r>1&&n?a.numSep:"")+n}t=Math.floor(t/1e3),r++}return e?n+(n.match(/tusen$/)?"de":"te"):n}(t,e):function(t,e=!1){if(0===t)return e?a.special.smallOrdinals[0]:a.zero;if(t>=Math.pow(10,36))return t.toString();let r=0,n="";for(;t>0;){const i=t%1e3;if(i){const s=o(t%1e3,!r&&e);!r&&e&&(e=!e),n=s+(r?" "+a.large[r]+(r>1&&i>1?"er":"")+(n?" ":""):"")+n}t=Math.floor(t/1e3),r++}return e?n+(n.match(/tusen$/)?"de":"te"):n}(t,e);return r}a.wordOrdinal=s,a.numericOrdinal=function(t){return t.toString()+"."},a.numberToWords=u,a.numberToOrdinal=function(t,e){return s(t)},e.default=a},3898:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});function n(t){let e=t%1e3,r="";const n=Math.floor(e/100);return r+=s.ones[n]?(1===n?"":s.ones[n]+s.numSep)+"hundra":"",e%=100,e&&(r+=r?s.numSep:"",r+=s.ones[e]||s.tens[Math.floor(e/10)]+(e%10?s.numSep+s.ones[e%10]:"")),r}function o(t,e=!1){if(0===t)return s.zero;if(t>=Math.pow(10,36))return t.toString();let r=0,o="";for(;t>0;){const i=t%1e3;if(i){const a=s.large[r],l=i>1&&r>1&&!e?"er":"";o=(1===r&&1===i?"":(r>1&&1===i?"en":n(t%1e3))+(r>1?" ":""))+(r?a+l+(r>1?" ":""):"")+o}t=Math.floor(t/1e3),r++}return o.replace(/ $/,"")}function i(t){let e=o(t,!0);return e.match(/^noll$/)?e="nollte":e.match(/ett$/)?e=e.replace(/ett$/,"f\xf6rsta"):e.match(/tv\xe5$/)?e=e.replace(/tv\xe5$/,"andra"):e.match(/tre$/)?e=e.replace(/tre$/,"tredje"):e.match(/fyra$/)?e=e.replace(/fyra$/,"fj\xe4rde"):e.match(/fem$/)?e=e.replace(/fem$/,"femte"):e.match(/sex$/)?e=e.replace(/sex$/,"sj\xe4tte"):e.match(/sju$/)?e=e.replace(/sju$/,"sjunde"):e.match(/\xe5tta$/)?e=e.replace(/\xe5tta$/,"\xe5ttonde"):e.match(/nio$/)?e=e.replace(/nio$/,"nionde"):e.match(/tio$/)?e=e.replace(/tio$/,"tionde"):e.match(/elva$/)?e=e.replace(/elva$/,"elfte"):e.match(/tolv$/)?e=e.replace(/tolv$/,"tolfte"):e.match(/tusen$/)?e=e.replace(/tusen$/,"tusonde"):e.match(/jard$/)||e.match(/jon$/)?e+="te":e+="de",e}const s=(0,r(7549).NUMBERS)();s.wordOrdinal=i,s.numericOrdinal=function(t){const e=t.toString();return e.match(/11$|12$/)?e+":e":e+(e.match(/1$|2$/)?":a":":e")},s.numberToWords=o,s.numberToOrdinal=function(t,e){if(1===t)return"hel";if(2===t)return e?"halva":"halv";let r=i(t);return r=r.match(/de$/)?r.replace(/de$/,""):r,r+(e?"delar":"del")},e.default=s},4977:function(t,e){function r(t,e=""){if(!t.childNodes||!t.childNodes[0]||!t.childNodes[0].childNodes||t.childNodes[0].childNodes.length<2||"number"!==t.childNodes[0].childNodes[0].tagName||"integer"!==t.childNodes[0].childNodes[0].getAttribute("role")||"number"!==t.childNodes[0].childNodes[1].tagName||"integer"!==t.childNodes[0].childNodes[1].getAttribute("role"))return{convertible:!1,content:t.textContent};const r=t.childNodes[0].childNodes[1].textContent,n=t.childNodes[0].childNodes[0].textContent,o=Number(r),i=Number(n);return isNaN(o)||isNaN(i)?{convertible:!1,content:`${n} ${e} ${r}`}:{convertible:!0,enumerator:i,denominator:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.vulgarFractionSmall=e.convertVulgarFraction=e.Combiners=e.siCombiner=e.identityTransformer=e.pluralCase=void 0,e.pluralCase=function(t,e){return t.toString()},e.identityTransformer=function(t){return t.toString()},e.siCombiner=function(t,e){return t+e.toLowerCase()},e.Combiners={},e.Combiners.identityCombiner=function(t,e,r){return t+e+r},e.Combiners.prefixCombiner=function(t,e,r){return t=r?r+" "+t:t,e?e+" "+t:t},e.Combiners.postfixCombiner=function(t,e,r){return t=r?r+" "+t:t,e?t+" "+e:t},e.Combiners.romanceCombiner=function(t,e,r){return t=r?t+" "+r:t,e?t+" "+e:t},e.convertVulgarFraction=r,e.vulgarFractionSmall=function(t,e,n){const o=r(t);if(o.convertible){const t=o.enumerator,r=o.denominator;return t>0&&t<e&&r>0&&r<n}return!1}},4504:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Condition=e.BaseRuleStore=void 0;const n=r(7052),o=r(1676),i=r(4650),s=r(4106);class a{constructor(){this.context=new s.SpeechRuleContext,this.parseOrder=o.DynamicCstr.DEFAULT_ORDER,this.parser=new o.DynamicCstrParser(this.parseOrder),this.locale=o.DynamicCstr.DEFAULT_VALUES[o.Axis.LOCALE],this.modality=o.DynamicCstr.DEFAULT_VALUES[o.Axis.MODALITY],this.domain="",this.initialized=!1,this.inherits=null,this.kind="standard",this.customTranscriptions={},this.preconditions=new Map,this.speechRules_=[],this.rank=0,this.parseMethods={Rule:this.defineRule,Generator:this.generateRules,Action:this.defineAction,Precondition:this.definePrecondition,Ignore:this.ignoreRules}}static compareStaticConstraints_(t,e){if(t.length!==e.length)return!1;for(let r,n=0;r=t[n];n++)if(-1===e.indexOf(r))return!1;return!0}static comparePreconditions_(t,e){const r=t.precondition,n=e.precondition;return r.query===n.query&&a.compareStaticConstraints_(r.constraints,n.constraints)}defineRule(t,e,r,n,...o){const s=this.parseAction(r),a=this.parsePrecondition(n,o),l=this.parseCstr(e);if(!(s&&a&&l))return console.error(`Rule Error: ${n}, (${e}): ${r}`),null;const c=new i.SpeechRule(t,l,a,s);return c.precondition.rank=this.rank++,this.addRule(c),c}addRule(t){t.context=this.context,this.speechRules_.unshift(t)}deleteRule(t){const e=this.speechRules_.indexOf(t);-1!==e&&this.speechRules_.splice(e,1)}findRule(t){for(let e,r=0;e=this.speechRules_[r];r++)if(t(e))return e;return null}findAllRules(t){return this.speechRules_.filter(t)}evaluateDefault(t){const e=t.textContent.slice(0);return e.match(/^\s+$/)?this.evaluateWhitespace(e):this.evaluateString(e)}evaluateWhitespace(t){return[]}evaluateCustom(t){const e=this.customTranscriptions[t];return void 0!==e?n.AuditoryDescription.create({text:e},{adjust:!0,translate:!1}):null}evaluateCharacter(t){return this.evaluateCustom(t)||n.AuditoryDescription.create({text:t},{adjust:!0,translate:!0})}removeDuplicates(t){for(let e,r=this.speechRules_.length-1;e=this.speechRules_[r];r--)e!==t&&t.dynamicCstr.equal(e.dynamicCstr)&&a.comparePreconditions_(e,t)&&this.speechRules_.splice(r,1)}getSpeechRules(){return this.speechRules_}setSpeechRules(t){this.speechRules_=t}getPreconditions(){return this.preconditions}parseCstr(t){try{return this.parser.parse(this.locale+"."+this.modality+(this.domain?"."+this.domain:"")+"."+t)}catch(e){if("RuleError"===e.name)return console.error("Rule Error ",`Illegal Dynamic Constraint: ${t}.`,e.message),null;throw e}}parsePrecondition(t,e){try{const r=this.parsePrecondition_(t);t=r[0];let n=r.slice(1);for(const t of e)n=n.concat(this.parsePrecondition_(t));return new i.Precondition(t,...n)}catch(r){if("RuleError"===r.name)return console.error("Rule Error ",`Illegal preconditions: ${t}, ${e}.`,r.message),null;throw r}}parseAction(t){try{return i.Action.fromString(t)}catch(e){if("RuleError"===e.name)return console.error("Rule Error ",`Illegal action: ${t}.`,e.message),null;throw e}}parse(t){this.modality=t.modality||this.modality,this.locale=t.locale||this.locale,this.domain=t.domain||this.domain,this.context.parse(t.functions||[]),"actions"!==t.kind&&(this.kind=t.kind||this.kind,this.inheritRules()),this.parseRules(t.rules||[])}parseRules(t){for(let e,r=0;e=t[r];r++){const t=e[0],r=this.parseMethods[t];t&&r&&r.apply(this,e.slice(1))}}generateRules(t){const e=this.context.customGenerators.lookup(t);e&&e(this)}defineAction(t,e){let r;try{r=i.Action.fromString(e)}catch(t){if("RuleError"===t.name)return void console.error("Action Error ",e,t.message);throw t}const n=this.getFullPreconditions(t);if(!n)return void console.error(`Action Error: No precondition for action ${t}`);this.ignoreRules(t);const o=new RegExp("^\\w+\\.\\w+\\."+(this.domain?"\\w+\\.":""));n.conditions.forEach((([e,n])=>{const s=this.parseCstr(e.toString().replace(o,""));this.addRule(new i.SpeechRule(t,s,n,r))}))}getFullPreconditions(t){const e=this.preconditions.get(t);return e||!this.inherits?e:this.inherits.getFullPreconditions(t)}definePrecondition(t,e,r,...n){const o=this.parsePrecondition(r,n),i=this.parseCstr(e);o&&i?(o.rank=this.rank++,this.preconditions.set(t,new l(i,o))):console.error(`Precondition Error: ${r}, (${e})`)}inheritRules(){if(!this.inherits||!this.inherits.getSpeechRules().length)return;const t=new RegExp("^\\w+\\.\\w+\\."+(this.domain?"\\w+\\.":""));this.inherits.getSpeechRules().forEach((e=>{const r=this.parseCstr(e.dynamicCstr.toString().replace(t,""));this.addRule(new i.SpeechRule(e.name,r,e.precondition,e.action))}))}ignoreRules(t,...e){let r=this.findAllRules((e=>e.name===t));if(!e.length)return void r.forEach(this.deleteRule.bind(this));let n=[];for(const t of e){const e=this.parseCstr(t);for(const t of r)e.equal(t.dynamicCstr)?this.deleteRule(t):n.push(t);r=n,n=[]}}parsePrecondition_(t){const e=this.context.customGenerators.lookup(t);return e?e():[t]}}e.BaseRuleStore=a;class l{constructor(t,e){this.base=t,this._conditions=[],this.constraints=[],this.allCstr={},this.constraints.push(t),this.addCondition(t,e)}get conditions(){return this._conditions}addConstraint(t){if(this.constraints.filter((e=>e.equal(t))).length)return;this.constraints.push(t);const e=[];for(const[r,n]of this.conditions)this.base.equal(r)&&e.push([t,n]);this._conditions=this._conditions.concat(e)}addBaseCondition(t){this.addCondition(this.base,t)}addFullCondition(t){this.constraints.forEach((e=>this.addCondition(e,t)))}addCondition(t,e){const r=t.toString()+" "+e.toString();this.allCstr.condStr||(this.allCstr[r]=!0,this._conditions.push([t,e]))}}e.Condition=l},2469:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.BrailleStore=void 0;const n=r(7630),o=r(9935);class i extends o.MathStore{constructor(){super(...arguments),this.modality="braille",this.customTranscriptions={"\u22ca":"\u2808\u2821\u2833"}}evaluateString(t){const e=[],r=Array.from(t);for(let t=0;t<r.length;t++)e.push(this.evaluateCharacter(r[t]));return e}annotations(){for(let t,e=0;t=this.annotators[e];e++)(0,n.activate)(this.locale,t)}}e.BrailleStore=i},1676:function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultComparator=e.DynamicCstrParser=e.DynamicCstr=e.DynamicProperties=e.Axis=void 0,function(t){t.DOMAIN="domain",t.STYLE="style",t.LOCALE="locale",t.TOPIC="topic",t.MODALITY="modality"}(r=e.Axis||(e.Axis={}));class n{constructor(t,e=Object.keys(t)){this.properties=t,this.order=e}static createProp(...t){const e=o.DEFAULT_ORDER,r={};for(let n=0,o=t.length,i=e.length;n<o&&n<i;n++)r[e[n]]=t[n];return new n(r)}getProperties(){return this.properties}getOrder(){return this.order}getAxes(){return this.order}getProperty(t){return this.properties[t]}updateProperties(t){this.properties=t}allProperties(){const t=[];return this.order.forEach((e=>t.push(this.getProperty(e).slice()))),t}toString(){const t=[];return this.order.forEach((e=>t.push(e+": "+this.getProperty(e).toString()))),t.join("\n")}}e.DynamicProperties=n;class o extends n{constructor(t,e){const r={};for(const[e,n]of Object.entries(t))r[e]=[n];super(r,e),this.components=t}static createCstr(...t){const e=o.DEFAULT_ORDER,r={};for(let n=0,o=t.length,i=e.length;n<o&&n<i;n++)r[e[n]]=t[n];return new o(r)}static defaultCstr(){return o.createCstr.apply(null,o.DEFAULT_ORDER.map((function(t){return o.DEFAULT_VALUES[t]})))}static validOrder(t){const e=o.DEFAULT_ORDER.slice();return t.every((t=>{const r=e.indexOf(t);return-1!==r&&e.splice(r,1)}))}getComponents(){return this.components}getValue(t){return this.components[t]}getValues(){return this.order.map((t=>this.getValue(t)))}allProperties(){const t=super.allProperties();for(let e,r,n=0;e=t[n],r=this.order[n];n++){const t=this.getValue(r);-1===e.indexOf(t)&&e.unshift(t)}return t}toString(){return this.getValues().join(".")}equal(t){const e=t.getAxes();if(this.order.length!==e.length)return!1;for(let r,n=0;r=e[n];n++){const e=this.getValue(r);if(!e||t.getValue(r)!==e)return!1}return!0}}e.DynamicCstr=o,o.DEFAULT_ORDER=[r.LOCALE,r.MODALITY,r.DOMAIN,r.STYLE,r.TOPIC],o.BASE_LOCALE="base",o.DEFAULT_VALUE="default",o.DEFAULT_VALUES={[r.LOCALE]:"en",[r.DOMAIN]:o.DEFAULT_VALUE,[r.STYLE]:o.DEFAULT_VALUE,[r.TOPIC]:o.DEFAULT_VALUE,[r.MODALITY]:"speech"};e.DynamicCstrParser=class{constructor(t){this.order=t}parse(t){const e=t.split("."),r={};if(e.length>this.order.length)throw new Error("Invalid dynamic constraint: "+r);let n=0;for(let t,o=0;t=this.order[o],e.length;o++,n++){const n=e.shift();r[t]=n}return new o(r,this.order.slice(0,n))}};e.DefaultComparator=class{constructor(t,e=new n(t.getProperties(),t.getOrder())){this.reference=t,this.fallback=e,this.order=this.reference.getOrder()}getReference(){return this.reference}setReference(t,e){this.reference=t,this.fallback=e||new n(t.getProperties(),t.getOrder()),this.order=this.reference.getOrder()}match(t){const e=t.getAxes();return e.length===this.reference.getAxes().length&&e.every((e=>{const r=t.getValue(e);return r===this.reference.getValue(e)||-1!==this.fallback.getProperty(e).indexOf(r)}))}compare(t,e){let r=!1;for(let n,o=0;n=this.order[o];o++){const o=t.getValue(n),i=e.getValue(n);if(!r){const t=this.reference.getValue(n);if(t===o&&t!==i)return-1;if(t===i&&t!==o)return 1;if(t===o&&t===i)continue;t!==o&&t!==i&&(r=!0)}const s=this.fallback.getProperty(n),a=s.indexOf(o),l=s.indexOf(i);if(a<l)return-1;if(l<a)return 1}return 0}toString(){return this.reference.toString()+"\n"+this.fallback.toString()}}},2105:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.numbersToAlpha=e.Grammar=e.ATTRIBUTE=void 0;const n=r(5740),o=r(5897),i=r(2536),s=r(4356);e.ATTRIBUTE="grammar";class a{constructor(){this.currentFlags={},this.parameters_={},this.corrections_={},this.preprocessors_={},this.stateStack_=[]}static getInstance(){return a.instance=a.instance||new a,a.instance}static parseInput(t){const e={},r=t.split(":");for(let t=0,n=r.length;t<n;t++){const n=r[t].split("="),o=n[0].trim();n[1]?e[o]=n[1].trim():o.match(/^!/)?e[o.slice(1)]=!1:e[o]=!0}return e}static parseState(t){const e={},r=t.split(" ");for(let t=0,n=r.length;t<n;t++){const n=r[t].split(":"),o=n[0],i=n[1];e[o]=i||!0}return e}static translateString_(t){if(t.match(/:unit$/))return a.translateUnit_(t);const e=o.default.getInstance();let r=e.evaluator(t,e.dynamicCstr);return r=null===r?t:r,a.getInstance().getParameter("plural")&&(r=s.LOCALE.FUNCTIONS.plural(r)),r}static translateUnit_(t){t=a.prepareUnit_(t);const e=o.default.getInstance(),r=a.getInstance().getParameter("plural"),n=e.strict,i=`${e.locale}.${e.modality}.default`;let l,c;return e.strict=!0,r&&(l=e.defaultParser.parse(i+".plural"),c=e.evaluator(t,l)),c?(e.strict=n,c):(l=e.defaultParser.parse(i+".default"),c=e.evaluator(t,l),e.strict=n,c?(r&&(c=s.LOCALE.FUNCTIONS.plural(c)),c):a.cleanUnit_(t))}static prepareUnit_(t){const e=t.match(/:unit$/);return e?t.slice(0,e.index).replace(/\s+/g," ")+t.slice(e.index):t}static cleanUnit_(t){return t.match(/:unit$/)?t.replace(/:unit$/,""):t}clear(){this.parameters_={},this.stateStack_=[]}setParameter(t,e){const r=this.parameters_[t];return e?this.parameters_[t]=e:delete this.parameters_[t],r}getParameter(t){return this.parameters_[t]}setCorrection(t,e){this.corrections_[t]=e}setPreprocessor(t,e){this.preprocessors_[t]=e}getCorrection(t){return this.corrections_[t]}getState(){const t=[];for(const e in this.parameters_){const r=this.parameters_[e];t.push("string"==typeof r?e+":"+r:e)}return t.join(" ")}pushState(t){for(const e in t)t[e]=this.setParameter(e,t[e]);this.stateStack_.push(t)}popState(){const t=this.stateStack_.pop();for(const e in t)this.setParameter(e,t[e])}setAttribute(t){if(t&&t.nodeType===n.NodeType.ELEMENT_NODE){const r=this.getState();r&&t.setAttribute(e.ATTRIBUTE,r)}}preprocess(t){return this.runProcessors_(t,this.preprocessors_)}correct(t){return this.runProcessors_(t,this.corrections_)}apply(t,e){return this.currentFlags=e||{},t=this.currentFlags.adjust||this.currentFlags.preprocess?a.getInstance().preprocess(t):t,(this.parameters_.translate||this.currentFlags.translate)&&(t=a.translateString_(t)),t=this.currentFlags.adjust||this.currentFlags.correct?a.getInstance().correct(t):t,this.currentFlags={},t}runProcessors_(t,e){for(const r in this.parameters_){const n=e[r];if(!n)continue;const o=this.parameters_[r];t=!0===o?n(t):n(t,o)}return t}}function l(t,e){if(!e||!t)return t;const r=s.LOCALE.FUNCTIONS.fontRegexp(i.localFont(e));return t.replace(r,"")}function c(t){return t.match(/\d+/)?s.LOCALE.NUMBERS.numberToWords(parseInt(t,10)):t}e.Grammar=a,e.numbersToAlpha=c,a.getInstance().setCorrection("localFont",i.localFont),a.getInstance().setCorrection("localRole",i.localRole),a.getInstance().setCorrection("localEnclose",i.localEnclose),a.getInstance().setCorrection("ignoreFont",l),a.getInstance().setPreprocessor("annotation",(function(t,e){return t+":"+e})),a.getInstance().setPreprocessor("noTranslateText",(function(t){return t.match(new RegExp("^["+s.LOCALE.MESSAGES.regexp.TEXT+"]+$"))&&(a.getInstance().currentFlags.translate=!1),t})),a.getInstance().setCorrection("ignoreCaps",(function(t){let e=s.LOCALE.ALPHABETS.capPrefix[o.default.getInstance().domain];return void 0===e&&(e=s.LOCALE.ALPHABETS.capPrefix.default),l(t,e)})),a.getInstance().setPreprocessor("numbers2alpha",c)},2780:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.enumerate=e.lookupString=e.lookupCategory=e.lookupRule=e.addSiUnitRules=e.addUnitRules=e.addFunctionRules=e.addSymbolRules=e.defineRule=e.defineRules=e.setSiPrefixes=void 0;const n=r(2057),o=r(5897),i=r(7491),s=r(4658),a=r(1676);let l=a.DynamicCstr.DEFAULT_VALUES[a.Axis.LOCALE],c=a.DynamicCstr.DEFAULT_VALUES[a.Axis.MODALITY],u={};e.setSiPrefixes=function(t){u=t};const p={};function h(t,e,r,n){const o=_(e);S(o,r),o.defineRulesFromMappings(t,l,c,e,n)}function f(t){if(v(t))return;const e=t.names,r=t.mappings,n=t.category;for(let t,o=0;t=e[o];o++)h(t,t,n,r)}function d(t){for(const e of Object.keys(u)){const r=Object.assign({},t);r.mappings={};const n=u[e];r.key=e+r.key,r.names=r.names.map((function(t){return e+t}));for(const e of Object.keys(t.mappings)){r.mappings[e]={};for(const o of Object.keys(t.mappings[e]))r.mappings[e][o]=i.locales[l]().FUNCTIONS.si(n,t.mappings[e][o])}b(r)}b(t)}function m(t,e){const r=p[t];return r?r.lookupRule(null,e):null}function y(t,e){const r=m(t,e);return r?r.action:null}function g(t,e){return e=e||{},t.length?(e[t[0]]=g(t.slice(1),e[t[0]]),e):e}function b(t){const e=t.names;e&&(t.names=e.map((function(t){return t+":unit"}))),f(t)}function v(t){return!(!t.locale&&!t.modality)&&(l=t.locale||l,c=t.modality||c,!0)}function _(t){let e=p[t];return e?(n.Debugger.getInstance().output("Store exists! "+t),e):(e=new s.MathSimpleStore,p[t]=e,e)}function S(t,e){e&&(t.category=e)}e.defineRules=h,e.defineRule=function(t,e,r,n,o,i){const s=_(o);S(s,n),s.defineRuleFromStrings(t,l,c,e,r,o,i)},e.addSymbolRules=function(t){if(v(t))return;const e=s.MathSimpleStore.parseUnicode(t.key);h(t.key,e,t.category,t.mappings)},e.addFunctionRules=f,e.addUnitRules=function(t){v(t)||(t.si?d(t):b(t))},e.addSiUnitRules=d,e.lookupRule=m,e.lookupCategory=function(t){const e=p[t];return e?e.category:""},e.lookupString=y,o.default.getInstance().evaluator=y,e.enumerate=function(t={}){for(const e of Object.values(p))for(const[,r]of e.rules.entries())for(const{cstr:e}of r)t=g(e.getValues(),t);return t}},4658:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.MathSimpleStore=void 0;const n=r(5897),o=r(1676);class i{constructor(){this.category="",this.rules=new Map}static parseUnicode(t){const e=parseInt(t,16);return String.fromCodePoint(e)}static testDynamicConstraints_(t,e){return n.default.getInstance().strict?e.cstr.equal(t):n.default.getInstance().comparator.match(e.cstr)}defineRulesFromMappings(t,e,r,n,o){for(const i in o)for(const s in o[i]){const a=o[i][s];this.defineRuleFromStrings(t,e,r,i,s,n,a)}}getRules(t){let e=this.rules.get(t);return e||(e=[],this.rules.set(t,e)),e}defineRuleFromStrings(t,e,r,o,i,s,a){let l=this.getRules(e);const c=n.default.getInstance().parsers[o]||n.default.getInstance().defaultParser,u=n.default.getInstance().comparators[o],p=`${e}.${r}.${o}.${i}`,h=c.parse(p),f=u?u():n.default.getInstance().comparator,d=f.getReference();f.setReference(h);const m={cstr:h,action:a};l=l.filter((t=>!h.equal(t.cstr))),l.push(m),this.rules.set(e,l),f.setReference(d)}lookupRule(t,e){let r=this.getRules(e.getValue(o.Axis.LOCALE));return r=r.filter((function(t){return i.testDynamicConstraints_(e,t)})),1===r.length?r[0]:r.length?r.sort(((t,e)=>n.default.getInstance().comparator.compare(t.cstr,e.cstr)))[0]:null}}e.MathSimpleStore=i},9935:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.MathStore=void 0;const n=r(707),o=r(4356),i=r(7630),s=r(4504),a=r(4650);class l extends s.BaseRuleStore{constructor(){super(),this.annotators=[],this.parseMethods.Alias=this.defineAlias,this.parseMethods.SpecializedRule=this.defineSpecializedRule,this.parseMethods.Specialized=this.defineSpecialized}initialize(){this.initialized||(this.annotations(),this.initialized=!0)}annotations(){for(let t,e=0;t=this.annotators[e];e++)(0,i.activate)(this.domain,t)}defineAlias(t,e,...r){const n=this.parsePrecondition(e,r);if(!n)return void console.error(`Precondition Error: ${e} ${r}`);const o=this.preconditions.get(t);o?o.addFullCondition(n):console.error(`Alias Error: No precondition by the name of ${t}`)}defineRulesAlias(t,e,...r){const n=this.findAllRules((function(e){return e.name===t}));if(0===n.length)throw new a.OutputError("Rule with name "+t+" does not exist.");const o=[];n.forEach((t=>{(t=>{const e=t.dynamicCstr.toString(),r=t.action.toString();for(let t,n=0;t=o[n];n++)if(t.action===r&&t.cstr===e)return!1;return o.push({cstr:e,action:r}),!0})(t)&&this.addAlias_(t,e,r)}))}defineSpecializedRule(t,e,r,n){const o=this.parseCstr(e),i=this.findRule((e=>e.name===t&&o.equal(e.dynamicCstr))),s=this.parseCstr(r);if(!i&&n)throw new a.OutputError("Rule named "+t+" with style "+e+" does not exist.");const l=n?a.Action.fromString(n):i.action,c=new a.SpeechRule(i.name,s,i.precondition,l);this.addRule(c)}defineSpecialized(t,e,r){const n=this.parseCstr(r);if(!n)return void console.error(`Dynamic Constraint Error: ${r}`);const o=this.preconditions.get(t);o?o.addConstraint(n):console.error(`Alias Error: No precondition by the name of ${t}`)}evaluateString(t){const e=[];if(t.match(/^\s+$/))return e;let r=this.matchNumber_(t);if(r&&r.length===t.length)return e.push(this.evaluateCharacter(r.number)),e;const i=n.removeEmpty(t.replace(/\s/g," ").split(" "));for(let t,n=0;t=i[n];n++)if(1===t.length)e.push(this.evaluateCharacter(t));else if(t.match(new RegExp("^["+o.LOCALE.MESSAGES.regexp.TEXT+"]+$")))e.push(this.evaluateCharacter(t));else{let n=t;for(;n;){r=this.matchNumber_(n);const t=n.match(new RegExp("^["+o.LOCALE.MESSAGES.regexp.TEXT+"]+"));if(r)e.push(this.evaluateCharacter(r.number)),n=n.substring(r.length);else if(t)e.push(this.evaluateCharacter(t[0])),n=n.substring(t[0].length);else{const t=Array.from(n),r=t[0];e.push(this.evaluateCharacter(r)),n=t.slice(1).join("")}}}return e}parse(t){super.parse(t),this.annotators=t.annotators||[]}addAlias_(t,e,r){const n=this.parsePrecondition(e,r),o=new a.SpeechRule(t.name,t.dynamicCstr,n,t.action);o.name=t.name,this.addRule(o)}matchNumber_(t){const e=t.match(new RegExp("^"+o.LOCALE.MESSAGES.regexp.NUMBER)),r=t.match(new RegExp("^"+l.regexp.NUMBER));if(!e&&!r)return null;const n=r&&r[0]===t;if(e&&e[0]===t||!n)return e?{number:e[0],length:e[0].length}:null;return{number:r[0].replace(new RegExp(l.regexp.DIGIT_GROUP,"g"),"X").replace(new RegExp(l.regexp.DECIMAL_MARK,"g"),o.LOCALE.MESSAGES.regexp.DECIMAL_MARK).replace(/X/g,o.LOCALE.MESSAGES.regexp.DIGIT_GROUP.replace(/\\/g,"")),length:r[0].length}}}e.MathStore=l,l.regexp={NUMBER:"((\\d{1,3})(?=(,| ))((,| )\\d{3})*(\\.\\d+)?)|^\\d*\\.\\d+|^\\d+",DECIMAL_MARK:"\\.",DIGIT_GROUP:","}},4650:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputError=e.Precondition=e.Action=e.Component=e.ActionType=e.SpeechRule=void 0;const n=r(5897),o=r(2105);var i;function s(t){switch(t){case"[n]":return i.NODE;case"[m]":return i.MULTI;case"[t]":return i.TEXT;case"[p]":return i.PERSONALITY;default:throw"Parse error: "+t}}e.SpeechRule=class{constructor(t,e,r,n){this.name=t,this.dynamicCstr=e,this.precondition=r,this.action=n,this.context=null}toString(){return this.name+" | "+this.dynamicCstr.toString()+" | "+this.precondition.toString()+" ==> "+this.action.toString()}},function(t){t.NODE="NODE",t.MULTI="MULTI",t.TEXT="TEXT",t.PERSONALITY="PERSONALITY"}(i=e.ActionType||(e.ActionType={}));class a{constructor({type:t,content:e,attributes:r,grammar:n}){this.type=t,this.content=e,this.attributes=r,this.grammar=n}static grammarFromString(t){return o.Grammar.parseInput(t)}static fromString(t){const e={type:s(t.substring(0,3))};let r=t.slice(3).trim();if(!r)throw new u("Missing content.");switch(e.type){case i.TEXT:if('"'===r[0]){const t=p(r,"\\(")[0].trim();if('"'!==t.slice(-1))throw new u("Invalid string syntax.");e.content=t,r=r.slice(t.length).trim(),-1===r.indexOf("(")&&(r="");break}case i.NODE:case i.MULTI:{const t=r.indexOf(" (");if(-1===t){e.content=r.trim(),r="";break}e.content=r.substring(0,t).trim(),r=r.slice(t).trim()}}if(r){const t=a.attributesFromString(r);t.grammar&&(e.grammar=t.grammar,delete t.grammar),Object.keys(t).length&&(e.attributes=t)}return new a(e)}static attributesFromString(t){if("("!==t[0]||")"!==t.slice(-1))throw new u("Invalid attribute expression: "+t);const e={},r=p(t.slice(1,-1),",");for(let t=0,n=r.length;t<n;t++){const n=r[t],i=n.indexOf(":");if(-1===i)e[n.trim()]="true";else{const t=n.substring(0,i).trim(),r=n.slice(i+1).trim();e[t]=t===o.ATTRIBUTE?a.grammarFromString(r):r}}return e}toString(){let t="";t+=function(t){switch(t){case i.NODE:return"[n]";case i.MULTI:return"[m]";case i.TEXT:return"[t]";case i.PERSONALITY:return"[p]";default:throw"Unknown type error: "+t}}(this.type),t+=this.content?" "+this.content:"";const e=this.attributesToString();return t+=e?" "+e:"",t}grammarToString(){return this.getGrammar().join(":")}getGrammar(){const t=[];for(const e in this.grammar)!0===this.grammar[e]?t.push(e):!1===this.grammar[e]?t.push("!"+e):t.push(e+"="+this.grammar[e]);return t}attributesToString(){const t=this.getAttributes(),e=this.grammarToString();return e&&t.push("grammar:"+e),t.length>0?"("+t.join(", ")+")":""}getAttributes(){const t=[];for(const e in this.attributes){const r=this.attributes[e];"true"===r?t.push(e):t.push(e+":"+r)}return t}}e.Component=a;class l{constructor(t){this.components=t}static fromString(t){const e=p(t,";").filter((function(t){return t.match(/\S/)})).map((function(t){return t.trim()})),r=[];for(let t=0,n=e.length;t<n;t++){const n=a.fromString(e[t]);n&&r.push(n)}return new l(r)}toString(){return this.components.map((function(t){return t.toString()})).join("; ")}}e.Action=l;class c{constructor(t,...e){this.query=t,this.constraints=e;const[r,n]=this.presetPriority();this.priority=r?n:this.calculatePriority()}static constraintValue(t,e){for(let r,n=0;r=e[n];n++)if(t.match(r))return++n;return 0}toString(){const t=this.constraints.join(", ");return`${this.query}, ${t} (${this.priority}, ${this.rank})`}calculatePriority(){const t=c.constraintValue(this.query,c.queryPriorities);if(!t)return 0;const e=this.query.match(/^self::.+\[(.+)\]/)[1];return 100*t+10*c.constraintValue(e,c.attributePriorities)}presetPriority(){if(!this.constraints.length)return[!1,0];const t=this.constraints[this.constraints.length-1].match(/^priority=(.*$)/);if(!t)return[!1,0];this.constraints.pop();const e=parseFloat(t[1]);return[!0,isNaN(e)?0:e]}}e.Precondition=c,c.queryPriorities=[/^self::\*\[.+\]$/,/^self::[\w-]+\[.+\]$/],c.attributePriorities=[/^@[\w-]+$/,/^@[\w-]+!=".+"$/,/^not\(contains\(@[\w-]+,\s*".+"\)\)$/,/^contains\(@[\w-]+,".+"\)$/,/^@[\w-]+=".+"$/];class u extends n.SREError{constructor(t){super(t),this.name="RuleError"}}function p(t,e){const r=[];let n="";for(;""!==t;){const o=t.search(e);if(-1===o){if((t.match(/"/g)||[]).length%2!=0)throw new u("Invalid string in expression: "+t);r.push(n+t),n="",t=""}else if((t.substring(0,o).match(/"/g)||[]).length%2==0)r.push(n+t.substring(0,o)),n="",t=t.substring(o+1);else{const e=t.substring(o).search('"');if(-1===e)throw new u("Invalid string in expression: "+t);n+=t.substring(0,o+e+1),t=t.substring(o+e+1)}}return n&&r.push(n),r}e.OutputError=u},4106:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechRuleContext=void 0;const n=r(5274),o=r(5662);e.SpeechRuleContext=class{constructor(){this.customQueries=new o.CustomQueries,this.customStrings=new o.CustomStrings,this.contextFunctions=new o.ContextFunctions,this.customGenerators=new o.CustomGenerators}applyCustomQuery(t,e){const r=this.customQueries.lookup(e);return r?r(t):null}applySelector(t,e){return this.applyCustomQuery(t,e)||n.evalXPath(e,t)}applyQuery(t,e){const r=this.applySelector(t,e);return r.length>0?r[0]:null}applyConstraint(t,e){return!!this.applyQuery(t,e)||n.evaluateBoolean(e,t)}constructString(t,e){if(!e)return"";if('"'===e.charAt(0))return e.slice(1,-1);const r=this.customStrings.lookup(e);return r?r(t):n.evaluateString(e,t)}parse(t){const e=Array.isArray(t)?t:Object.entries(t);for(let t,r=0;t=e[r];r++){switch(t[0].slice(0,3)){case"CQF":this.customQueries.add(t[0],t[1]);break;case"CSF":this.customStrings.add(t[0],t[1]);break;case"CTF":this.contextFunctions.add(t[0],t[1]);break;case"CGF":this.customGenerators.add(t[0],t[1]);break;default:console.error("FunctionError: Invalid function name "+t[0])}}}}},2362:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.storeFactory=e.SpeechRuleEngine=void 0;const n=r(7052),o=r(2057),i=r(5740),s=r(5897),a=r(4440),l=r(5274),c=r(7283),u=r(7599),p=r(2469),h=r(1676),f=r(2105),d=r(9935),m=r(4650),y=r(4508);class g{constructor(){this.trie=null,this.evaluators_={},this.trie=new y.Trie}static getInstance(){return g.instance=g.instance||new g,g.instance}static debugSpeechRule(t,e){const r=t.precondition,n=t.context.applyQuery(e,r.query);o.Debugger.getInstance().output(r.query,n?n.toString():n),r.constraints.forEach((r=>o.Debugger.getInstance().output(r,t.context.applyConstraint(e,r))))}static debugNamedSpeechRule(t,e){const r=g.getInstance().trie.collectRules().filter((e=>e.name==t));for(let n,i=0;n=r[i];i++)o.Debugger.getInstance().output("Rule",t,"DynamicCstr:",n.dynamicCstr.toString(),"number",i),g.debugSpeechRule(n,e)}evaluateNode(t){(0,l.updateEvaluator)(t);const e=(new Date).getTime();let r=[];try{r=this.evaluateNode_(t)}catch(t){console.error("Something went wrong computing speech."),o.Debugger.getInstance().output(t)}const n=(new Date).getTime();return o.Debugger.getInstance().output("Time:",n-e),r}toString(){return this.trie.collectRules().map((t=>t.toString())).join("\n")}runInSetting(t,e){const r=s.default.getInstance(),n={};for(const e in t)n[e]=r[e],r[e]=t[e];r.setDynamicCstr();const o=e();for(const t in n)r[t]=n[t];return r.setDynamicCstr(),o}addStore(t){const e=v(t);"abstract"!==e.kind&&e.getSpeechRules().forEach((t=>this.trie.addRule(t))),this.addEvaluator(e)}processGrammar(t,e,r){const n={};for(const o in r){const i=r[o];n[o]="string"==typeof i?t.constructString(e,i):i}f.Grammar.getInstance().pushState(n)}addEvaluator(t){const e=t.evaluateDefault.bind(t),r=this.evaluators_[t.locale];if(r)return void(r[t.modality]=e);const n={};n[t.modality]=e,this.evaluators_[t.locale]=n}getEvaluator(t,e){const r=this.evaluators_[t]||this.evaluators_[h.DynamicCstr.DEFAULT_VALUES[h.Axis.LOCALE]];return r[e]||r[h.DynamicCstr.DEFAULT_VALUES[h.Axis.MODALITY]]}enumerate(t){return this.trie.enumerate(t)}evaluateNode_(t){return t?(this.updateConstraint_(),this.evaluateTree_(t)):[]}evaluateTree_(t){const e=s.default.getInstance();let r;o.Debugger.getInstance().output(e.mode!==a.Mode.HTTP?t.toString():t),f.Grammar.getInstance().setAttribute(t);const i=this.lookupRule(t,e.dynamicCstr);if(!i)return e.strict?[]:(r=this.getEvaluator(e.locale,e.modality)(t),t.attributes&&this.addPersonality_(r,{},!1,t),r);o.Debugger.getInstance().generateOutput((()=>["Apply Rule:",i.name,i.dynamicCstr.toString(),(e.mode,a.Mode.HTTP,t).toString()]));const c=i.context,u=i.action.components;r=[];for(let e,o=0;e=u[o];o++){let o=[];const i=e.content||"",a=e.attributes||{};let u=!1;e.grammar&&this.processGrammar(c,t,e.grammar);let p=null;if(a.engine){p=s.default.getInstance().dynamicCstr.getComponents();const t=f.Grammar.parseInput(a.engine);s.default.getInstance().setDynamicCstr(t)}switch(e.type){case m.ActionType.NODE:{const e=c.applyQuery(t,i);e&&(o=this.evaluateTree_(e))}break;case m.ActionType.MULTI:{u=!0;const e=c.applySelector(t,i);e.length>0&&(o=this.evaluateNodeList_(c,e,a.sepFunc,c.constructString(t,a.separator),a.ctxtFunc,c.constructString(t,a.context)))}break;case m.ActionType.TEXT:{const e=a.span,r={};if(e){const n=(0,l.evalXPath)(e,t);n.length&&(r.extid=n[0].getAttribute("extid"))}const s=c.constructString(t,i);(s||""===s)&&(o=Array.isArray(s)?s.map((function(t){return n.AuditoryDescription.create({text:t.speech,attributes:t.attributes},{adjust:!0})})):[n.AuditoryDescription.create({text:s,attributes:r},{adjust:!0})])}break;case m.ActionType.PERSONALITY:default:o=[n.AuditoryDescription.create({text:i})]}o[0]&&!u&&(a.context&&(o[0].context=c.constructString(t,a.context)+(o[0].context||"")),a.annotation&&(o[0].annotation=a.annotation)),this.addLayout(o,a,u),e.grammar&&f.Grammar.getInstance().popState(),r=r.concat(this.addPersonality_(o,a,u,t)),p&&s.default.getInstance().setDynamicCstr(p)}return r}evaluateNodeList_(t,e,r,o,i,s){if(!e.length)return[];const a=o||"",l=s||"",c=t.contextFunctions.lookup(i),u=c?c(e,l):function(){return l},p=t.contextFunctions.lookup(r),h=p?p(e,a):function(){return[n.AuditoryDescription.create({text:a},{translate:!0})]};let f=[];for(let t,r=0;t=e[r];r++){const n=this.evaluateTree_(t);if(n.length>0&&(n[0].context=u()+(n[0].context||""),f=f.concat(n),r<e.length-1)){const t=h();f=f.concat(t)}}return f}addLayout(t,e,r){const o=e.layout;o&&(o.match(/^begin/)?t.unshift(new n.AuditoryDescription({text:"",layout:o})):o.match(/^end/)?t.push(new n.AuditoryDescription({text:"",layout:o})):(t.unshift(new n.AuditoryDescription({text:"",layout:`begin${o}`})),t.push(new n.AuditoryDescription({text:"",layout:`end${o}`}))))}addPersonality_(t,e,r,o){const i={};let s=null;for(const t of a.personalityPropList){const r=e[t];if(void 0===r)continue;const n=parseFloat(r),o=isNaN(n)?'"'===r.charAt(0)?r.slice(1,-1):r:n;t===a.personalityProps.PAUSE?s=o:i[t]=o}for(let e,r=0;e=t[r];r++)this.addRelativePersonality_(e,i),this.addExternalAttributes_(e,o);if(r&&t.length&&delete t[t.length-1].personality[a.personalityProps.JOIN],s&&t.length){const e=t[t.length-1];e.text||Object.keys(e.personality).length?t.push(n.AuditoryDescription.create({text:"",personality:{pause:s}})):e.personality[a.personalityProps.PAUSE]=s}return t}addExternalAttributes_(t,e){if(e.hasAttributes()){const r=e.attributes;for(let e=r.length-1;e>=0;e--){const n=r[e].name;!t.attributes[n]&&n.match(/^ext/)&&(t.attributes[n]=r[e].value)}}}addRelativePersonality_(t,e){if(!t.personality)return t.personality=e,t;const r=t.personality;for(const t in e)r[t]&&"number"==typeof r[t]&&"number"==typeof e[t]?r[t]=r[t]+e[t]:r[t]||(r[t]=e[t]);return t}updateConstraint_(){const t=s.default.getInstance().dynamicCstr,e=s.default.getInstance().strict,r=this.trie,n={};let o=t.getValue(h.Axis.LOCALE),i=t.getValue(h.Axis.MODALITY),a=t.getValue(h.Axis.DOMAIN);r.hasSubtrie([o,i,a])||(a=h.DynamicCstr.DEFAULT_VALUES[h.Axis.DOMAIN],r.hasSubtrie([o,i,a])||(i=h.DynamicCstr.DEFAULT_VALUES[h.Axis.MODALITY],r.hasSubtrie([o,i,a])||(o=h.DynamicCstr.DEFAULT_VALUES[h.Axis.LOCALE]))),n[h.Axis.LOCALE]=[o],n[h.Axis.MODALITY]=["summary"!==i?i:h.DynamicCstr.DEFAULT_VALUES[h.Axis.MODALITY]],n[h.Axis.DOMAIN]=["speech"!==i?h.DynamicCstr.DEFAULT_VALUES[h.Axis.DOMAIN]:a];const l=t.getOrder();for(let r,o=0;r=l[o];o++)if(!n[r]){const o=t.getValue(r),i=this.makeSet_(o,t.preference),s=h.DynamicCstr.DEFAULT_VALUES[r];e||o===s||i.push(s),n[r]=i}t.updateProperties(n)}makeSet_(t,e){return e&&Object.keys(e).length?t.split(":"):[t]}lookupRule(t,e){if(!t||t.nodeType!==i.NodeType.ELEMENT_NODE&&t.nodeType!==i.NodeType.TEXT_NODE)return null;const r=this.lookupRules(t,e);return r.length>0?this.pickMostConstraint_(e,r):null}lookupRules(t,e){return this.trie.lookupRules(t,e.allProperties())}pickMostConstraint_(t,e){const r=s.default.getInstance().comparator;return e.sort((function(t,e){return r.compare(t.dynamicCstr,e.dynamicCstr)||e.precondition.priority-t.precondition.priority||e.precondition.constraints.length-t.precondition.constraints.length||e.precondition.rank-t.precondition.rank})),o.Debugger.getInstance().generateOutput((()=>e.map((t=>t.name+"("+t.dynamicCstr.toString()+")"))).bind(this)),e[0]}}e.SpeechRuleEngine=g;const b=new Map;function v(t){const e=`${t.locale}.${t.modality}.${t.domain}`;if("actions"===t.kind){const r=b.get(e);return r.parse(t),r}u.init(),t&&!t.functions&&(t.functions=c.getStore(t.locale,t.modality,t.domain));const r="braille"===t.modality?new p.BrailleStore:new d.MathStore;return b.set(e,r),t.inherits&&(r.inherits=b.get(`${t.inherits}.${t.modality}.${t.domain}`)),r.parse(t),r.initialize(),r}e.storeFactory=v,s.default.nodeEvaluator=g.getInstance().evaluateNode.bind(g.getInstance())},5662:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.CustomGenerators=e.ContextFunctions=e.CustomStrings=e.CustomQueries=void 0;class r{constructor(t,e){this.prefix=t,this.store=e}add(t,e){this.checkCustomFunctionSyntax_(t)&&(this.store[t]=e)}addStore(t){const e=Object.keys(t.store);for(let r,n=0;r=e[n];n++)this.add(r,t.store[r])}lookup(t){return this.store[t]}checkCustomFunctionSyntax_(t){const e=new RegExp("^"+this.prefix);return!!t.match(e)||(console.error("FunctionError: Invalid function name. Expected prefix "+this.prefix),!1)}}e.CustomQueries=class extends r{constructor(){super("CQF",{})}};e.CustomStrings=class extends r{constructor(){super("CSF",{})}};e.ContextFunctions=class extends r{constructor(){super("CTF",{})}};e.CustomGenerators=class extends r{constructor(){super("CGF",{})}}},365:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.contentIterator=e.pauseSeparator=e.nodeCounter=void 0;const n=r(7052),o=r(5274),i=r(5897);e.nodeCounter=function(t,e){const r=t.length;let n=0,o=e;return e||(o=""),function(){return n<r&&(n+=1),o+" "+n}},e.pauseSeparator=function(t,e){const r=parseFloat(e),o=isNaN(r)?e:r;return function(){return[n.AuditoryDescription.create({text:"",personality:{pause:o}})]}},e.contentIterator=function(t,e){let r;return r=t.length>0?o.evalXPath("../../content/*",t[0]):[],function(){const t=r.shift(),o=e?[n.AuditoryDescription.create({text:e},{translate:!0})]:[];if(!t)return o;const s=i.default.evaluateNode(t);return o.concat(s)}}},1414:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.getTreeFromString=e.getTree=e.xmlTree=void 0;const n=r(5740),o=r(7075);function i(t){return new o.SemanticTree(t)}e.xmlTree=function(t){return i(t).xml()},e.getTree=i,e.getTreeFromString=function(t){return i(n.parseInput(t))}},7630:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.annotate=e.activate=e.register=e.visitors=e.annotators=void 0;const n=r(9265);e.annotators=new Map,e.visitors=new Map,e.register=function(t){const r=t.domain+":"+t.name;t instanceof n.SemanticAnnotator?e.annotators.set(r,t):e.visitors.set(r,t)},e.activate=function(t,r){const n=t+":"+r,o=e.annotators.get(n)||e.visitors.get(n);o&&(o.active=!0)},e.annotate=function(t){for(const r of e.annotators.values())r.active&&r.annotate(t);for(const r of e.visitors.values())r.active&&r.visit(t,Object.assign({},r.def))}},9265:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticVisitor=e.SemanticAnnotator=void 0;e.SemanticAnnotator=class{constructor(t,e,r){this.domain=t,this.name=e,this.func=r,this.active=!1}annotate(t){t.childNodes.forEach(this.annotate.bind(this)),t.addAnnotation(this.domain,this.func(t))}};e.SemanticVisitor=class{constructor(t,e,r,n={}){this.domain=t,this.name=e,this.func=r,this.def=n,this.active=!1}visit(t,e){let r=this.func(t,e);t.addAnnotation(this.domain,r[0]);for(let e,n=0;e=t.childNodes[n];n++)r=this.visit(e,r[1]);return r}}},3588:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.lookupSecondary=e.isEmbellishedType=e.isMatchingFence=e.functionApplication=e.invisibleComma=e.invisiblePlus=e.invisibleTimes=e.lookupMeaning=e.lookupRole=e.lookupType=e.equal=e.allLettersRegExp=void 0;const r=String.fromCodePoint(8291),n=["\uff0c","\ufe50",",",r],o=["\xaf","\u2012","\u2013","\u2014","\u2015","\ufe58","-","\u207b","\u208b","\u2212","\u2796","\ufe63","\uff0d","\u2010","\u2011","\u203e","_"],i=["~","\u0303","\u223c","\u02dc","\u223d","\u02f7","\u0334","\u0330"],s={"(":")","[":"]","{":"}","\u2045":"\u2046","\u2329":"\u232a","\u2768":"\u2769","\u276a":"\u276b","\u276c":"\u276d","\u276e":"\u276f","\u2770":"\u2771","\u2772":"\u2773","\u2774":"\u2775","\u27c5":"\u27c6","\u27e6":"\u27e7","\u27e8":"\u27e9","\u27ea":"\u27eb","\u27ec":"\u27ed","\u27ee":"\u27ef","\u2983":"\u2984","\u2985":"\u2986","\u2987":"\u2988","\u2989":"\u298a","\u298b":"\u298c","\u298d":"\u298e","\u298f":"\u2990","\u2991":"\u2992","\u2993":"\u2994","\u2995":"\u2996","\u2997":"\u2998","\u29d8":"\u29d9","\u29da":"\u29db","\u29fc":"\u29fd","\u2e22":"\u2e23","\u2e24":"\u2e25","\u2e26":"\u2e27","\u2e28":"\u2e29","\u3008":"\u3009","\u300a":"\u300b","\u300c":"\u300d","\u300e":"\u300f","\u3010":"\u3011","\u3014":"\u3015","\u3016":"\u3017","\u3018":"\u3019","\u301a":"\u301b","\u301d":"\u301e","\ufd3e":"\ufd3f","\ufe17":"\ufe18","\ufe59":"\ufe5a","\ufe5b":"\ufe5c","\ufe5d":"\ufe5e","\uff08":"\uff09","\uff3b":"\uff3d","\uff5b":"\uff5d","\uff5f":"\uff60","\uff62":"\uff63","\u2308":"\u2309","\u230a":"\u230b","\u230c":"\u230d","\u230e":"\u230f","\u231c":"\u231d","\u231e":"\u231f","\u239b":"\u239e","\u239c":"\u239f","\u239d":"\u23a0","\u23a1":"\u23a4","\u23a2":"\u23a5","\u23a3":"\u23a6","\u23a7":"\u23ab","\u23a8":"\u23ac","\u23a9":"\u23ad","\u23b0":"\u23b1","\u23b8":"\u23b9"},a={"\u23b4":"\u23b5","\u23dc":"\u23dd","\u23de":"\u23df","\u23e0":"\u23e1","\ufe35":"\ufe36","\ufe37":"\ufe38","\ufe39":"\ufe3a","\ufe3b":"\ufe3c","\ufe3d":"\ufe3e","\ufe3f":"\ufe40","\ufe41":"\ufe42","\ufe43":"\ufe44","\ufe47":"\ufe48"},l=Object.keys(s),c=Object.values(s);c.push("\u301f");const u=Object.keys(a),p=Object.values(a),h=["|","\xa6","\u2223","\u23d0","\u23b8","\u23b9","\u2758","\uff5c","\uffe4","\ufe31","\ufe32"],f=["\u2016","\u2225","\u2980","\u2af4"],d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],m=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","\u0131","\u0237"],y=["\uff21","\uff22","\uff23","\uff24","\uff25","\uff26","\uff27","\uff28","\uff29","\uff2a","\uff2b","\uff2c","\uff2d","\uff2e","\uff2f","\uff30","\uff31","\uff32","\uff33","\uff34","\uff35","\uff36","\uff37","\uff38","\uff39","\uff3a"],g=["\uff41","\uff42","\uff43","\uff44","\uff45","\uff46","\uff47","\uff48","\uff49","\uff4a","\uff4b","\uff4c","\uff4d","\uff4e","\uff4f","\uff50","\uff51","\uff52","\uff53","\uff54","\uff55","\uff56","\uff57","\uff58","\uff59","\uff5a"],b=["\ud835\udc00","\ud835\udc01","\ud835\udc02","\ud835\udc03","\ud835\udc04","\ud835\udc05","\ud835\udc06","\ud835\udc07","\ud835\udc08","\ud835\udc09","\ud835\udc0a","\ud835\udc0b","\ud835\udc0c","\ud835\udc0d","\ud835\udc0e","\ud835\udc0f","\ud835\udc10","\ud835\udc11","\ud835\udc12","\ud835\udc13","\ud835\udc14","\ud835\udc15","\ud835\udc16","\ud835\udc17","\ud835\udc18","\ud835\udc19"],v=["\ud835\udc1a","\ud835\udc1b","\ud835\udc1c","\ud835\udc1d","\ud835\udc1e","\ud835\udc1f","\ud835\udc20","\ud835\udc21","\ud835\udc22","\ud835\udc23","\ud835\udc24","\ud835\udc25","\ud835\udc26","\ud835\udc27","\ud835\udc28","\ud835\udc29","\ud835\udc2a","\ud835\udc2b","\ud835\udc2c","\ud835\udc2d","\ud835\udc2e","\ud835\udc2f","\ud835\udc30","\ud835\udc31","\ud835\udc32","\ud835\udc33"],_=["\ud835\udc34","\ud835\udc35","\ud835\udc36","\ud835\udc37","\ud835\udc38","\ud835\udc39","\ud835\udc3a","\ud835\udc3b","\ud835\udc3c","\ud835\udc3d","\ud835\udc3e","\ud835\udc3f","\ud835\udc40","\ud835\udc41","\ud835\udc42","\ud835\udc43","\ud835\udc44","\ud835\udc45","\ud835\udc46","\ud835\udc47","\ud835\udc48","\ud835\udc49","\ud835\udc4a","\ud835\udc4b","\ud835\udc4c","\ud835\udc4d"],S=["\ud835\udc4e","\ud835\udc4f","\ud835\udc50","\ud835\udc51","\ud835\udc52","\ud835\udc53","\ud835\udc54","\u210e","\ud835\udc56","\ud835\udc57","\ud835\udc58","\ud835\udc59","\ud835\udc5a","\ud835\udc5b","\ud835\udc5c","\ud835\udc5d","\ud835\udc5e","\ud835\udc5f","\ud835\udc60","\ud835\udc61","\ud835\udc62","\ud835\udc63","\ud835\udc64","\ud835\udc65","\ud835\udc66","\ud835\udc67","\ud835\udea4","\ud835\udea5"],M=["\ud835\udc68","\ud835\udc69","\ud835\udc6a","\ud835\udc6b","\ud835\udc6c","\ud835\udc6d","\ud835\udc6e","\ud835\udc6f","\ud835\udc70","\ud835\udc71","\ud835\udc72","\ud835\udc73","\ud835\udc74","\ud835\udc75","\ud835\udc76","\ud835\udc77","\ud835\udc78","\ud835\udc79","\ud835\udc7a","\ud835\udc7b","\ud835\udc7c","\ud835\udc7d","\ud835\udc7e","\ud835\udc7f","\ud835\udc80","\ud835\udc81"],O=["\ud835\udc82","\ud835\udc83","\ud835\udc84","\ud835\udc85","\ud835\udc86","\ud835\udc87","\ud835\udc88","\ud835\udc89","\ud835\udc8a","\ud835\udc8b","\ud835\udc8c","\ud835\udc8d","\ud835\udc8e","\ud835\udc8f","\ud835\udc90","\ud835\udc91","\ud835\udc92","\ud835\udc93","\ud835\udc94","\ud835\udc95","\ud835\udc96","\ud835\udc97","\ud835\udc98","\ud835\udc99","\ud835\udc9a","\ud835\udc9b"],x=["\ud835\udc9c","\u212c","\ud835\udc9e","\ud835\udc9f","\u2130","\u2131","\ud835\udca2","\u210b","\u2110","\ud835\udca5","\ud835\udca6","\u2112","\u2133","\ud835\udca9","\ud835\udcaa","\ud835\udcab","\ud835\udcac","\u211b","\ud835\udcae","\ud835\udcaf","\ud835\udcb0","\ud835\udcb1","\ud835\udcb2","\ud835\udcb3","\ud835\udcb4","\ud835\udcb5","\u2118"],E=["\ud835\udcb6","\ud835\udcb7","\ud835\udcb8","\ud835\udcb9","\u212f","\ud835\udcbb","\u210a","\ud835\udcbd","\ud835\udcbe","\ud835\udcbf","\ud835\udcc0","\ud835\udcc1","\ud835\udcc2","\ud835\udcc3","\u2134","\ud835\udcc5","\ud835\udcc6","\ud835\udcc7","\ud835\udcc8","\ud835\udcc9","\ud835\udcca","\ud835\udccb","\ud835\udccc","\ud835\udccd","\ud835\udcce","\ud835\udccf","\u2113"],A=["\ud835\udcd0","\ud835\udcd1","\ud835\udcd2","\ud835\udcd3","\ud835\udcd4","\ud835\udcd5","\ud835\udcd6","\ud835\udcd7","\ud835\udcd8","\ud835\udcd9","\ud835\udcda","\ud835\udcdb","\ud835\udcdc","\ud835\udcdd","\ud835\udcde","\ud835\udcdf","\ud835\udce0","\ud835\udce1","\ud835\udce2","\ud835\udce3","\ud835\udce4","\ud835\udce5","\ud835\udce6","\ud835\udce7","\ud835\udce8","\ud835\udce9"],C=["\ud835\udcea","\ud835\udceb","\ud835\udcec","\ud835\udced","\ud835\udcee","\ud835\udcef","\ud835\udcf0","\ud835\udcf1","\ud835\udcf2","\ud835\udcf3","\ud835\udcf4","\ud835\udcf5","\ud835\udcf6","\ud835\udcf7","\ud835\udcf8","\ud835\udcf9","\ud835\udcfa","\ud835\udcfb","\ud835\udcfc","\ud835\udcfd","\ud835\udcfe","\ud835\udcff","\ud835\udd00","\ud835\udd01","\ud835\udd02","\ud835\udd03"],T=["\ud835\udd04","\ud835\udd05","\u212d","\ud835\udd07","\ud835\udd08","\ud835\udd09","\ud835\udd0a","\u210c","\u2111","\ud835\udd0d","\ud835\udd0e","\ud835\udd0f","\ud835\udd10","\ud835\udd11","\ud835\udd12","\ud835\udd13","\ud835\udd14","\u211c","\ud835\udd16","\ud835\udd17","\ud835\udd18","\ud835\udd19","\ud835\udd1a","\ud835\udd1b","\ud835\udd1c","\u2128"],N=["\ud835\udd1e","\ud835\udd1f","\ud835\udd20","\ud835\udd21","\ud835\udd22","\ud835\udd23","\ud835\udd24","\ud835\udd25","\ud835\udd26","\ud835\udd27","\ud835\udd28","\ud835\udd29","\ud835\udd2a","\ud835\udd2b","\ud835\udd2c","\ud835\udd2d","\ud835\udd2e","\ud835\udd2f","\ud835\udd30","\ud835\udd31","\ud835\udd32","\ud835\udd33","\ud835\udd34","\ud835\udd35","\ud835\udd36","\ud835\udd37"],w=["\ud835\udd38","\ud835\udd39","\u2102","\ud835\udd3b","\ud835\udd3c","\ud835\udd3d","\ud835\udd3e","\u210d","\ud835\udd40","\ud835\udd41","\ud835\udd42","\ud835\udd43","\ud835\udd44","\u2115","\ud835\udd46","\u2119","\u211a","\u211d","\ud835\udd4a","\ud835\udd4b","\ud835\udd4c","\ud835\udd4d","\ud835\udd4e","\ud835\udd4f","\ud835\udd50","\u2124"],L=["\ud835\udd52","\ud835\udd53","\ud835\udd54","\ud835\udd55","\ud835\udd56","\ud835\udd57","\ud835\udd58","\ud835\udd59","\ud835\udd5a","\ud835\udd5b","\ud835\udd5c","\ud835\udd5d","\ud835\udd5e","\ud835\udd5f","\ud835\udd60","\ud835\udd61","\ud835\udd62","\ud835\udd63","\ud835\udd64","\ud835\udd65","\ud835\udd66","\ud835\udd67","\ud835\udd68","\ud835\udd69","\ud835\udd6a","\ud835\udd6b"],I=["\ud835\udd6c","\ud835\udd6d","\ud835\udd6e","\ud835\udd6f","\ud835\udd70","\ud835\udd71","\ud835\udd72","\ud835\udd73","\ud835\udd74","\ud835\udd75","\ud835\udd76","\ud835\udd77","\ud835\udd78","\ud835\udd79","\ud835\udd7a","\ud835\udd7b","\ud835\udd7c","\ud835\udd7d","\ud835\udd7e","\ud835\udd7f","\ud835\udd80","\ud835\udd81","\ud835\udd82","\ud835\udd83","\ud835\udd84","\ud835\udd85"],P=["\ud835\udd86","\ud835\udd87","\ud835\udd88","\ud835\udd89","\ud835\udd8a","\ud835\udd8b","\ud835\udd8c","\ud835\udd8d","\ud835\udd8e","\ud835\udd8f","\ud835\udd90","\ud835\udd91","\ud835\udd92","\ud835\udd93","\ud835\udd94","\ud835\udd95","\ud835\udd96","\ud835\udd97","\ud835\udd98","\ud835\udd99","\ud835\udd9a","\ud835\udd9b","\ud835\udd9c","\ud835\udd9d","\ud835\udd9e","\ud835\udd9f"],R=["\ud835\udda0","\ud835\udda1","\ud835\udda2","\ud835\udda3","\ud835\udda4","\ud835\udda5","\ud835\udda6","\ud835\udda7","\ud835\udda8","\ud835\udda9","\ud835\uddaa","\ud835\uddab","\ud835\uddac","\ud835\uddad","\ud835\uddae","\ud835\uddaf","\ud835\uddb0","\ud835\uddb1","\ud835\uddb2","\ud835\uddb3","\ud835\uddb4","\ud835\uddb5","\ud835\uddb6","\ud835\uddb7","\ud835\uddb8","\ud835\uddb9"],k=["\ud835\uddba","\ud835\uddbb","\ud835\uddbc","\ud835\uddbd","\ud835\uddbe","\ud835\uddbf","\ud835\uddc0","\ud835\uddc1","\ud835\uddc2","\ud835\uddc3","\ud835\uddc4","\ud835\uddc5","\ud835\uddc6","\ud835\uddc7","\ud835\uddc8","\ud835\uddc9","\ud835\uddca","\ud835\uddcb","\ud835\uddcc","\ud835\uddcd","\ud835\uddce","\ud835\uddcf","\ud835\uddd0","\ud835\uddd1","\ud835\uddd2","\ud835\uddd3"],j=["\ud835\uddd4","\ud835\uddd5","\ud835\uddd6","\ud835\uddd7","\ud835\uddd8","\ud835\uddd9","\ud835\uddda","\ud835\udddb","\ud835\udddc","\ud835\udddd","\ud835\uddde","\ud835\udddf","\ud835\udde0","\ud835\udde1","\ud835\udde2","\ud835\udde3","\ud835\udde4","\ud835\udde5","\ud835\udde6","\ud835\udde7","\ud835\udde8","\ud835\udde9","\ud835\uddea","\ud835\uddeb","\ud835\uddec","\ud835\udded"],B=["\ud835\uddee","\ud835\uddef","\ud835\uddf0","\ud835\uddf1","\ud835\uddf2","\ud835\uddf3","\ud835\uddf4","\ud835\uddf5","\ud835\uddf6","\ud835\uddf7","\ud835\uddf8","\ud835\uddf9","\ud835\uddfa","\ud835\uddfb","\ud835\uddfc","\ud835\uddfd","\ud835\uddfe","\ud835\uddff","\ud835\ude00","\ud835\ude01","\ud835\ude02","\ud835\ude03","\ud835\ude04","\ud835\ude05","\ud835\ude06","\ud835\ude07"],D=["\ud835\ude08","\ud835\ude09","\ud835\ude0a","\ud835\ude0b","\ud835\ude0c","\ud835\ude0d","\ud835\ude0e","\ud835\ude0f","\ud835\ude10","\ud835\ude11","\ud835\ude12","\ud835\ude13","\ud835\ude14","\ud835\ude15","\ud835\ude16","\ud835\ude17","\ud835\ude18","\ud835\ude19","\ud835\ude1a","\ud835\ude1b","\ud835\ude1c","\ud835\ude1d","\ud835\ude1e","\ud835\ude1f","\ud835\ude20","\ud835\ude21"],F=["\ud835\ude22","\ud835\ude23","\ud835\ude24","\ud835\ude25","\ud835\ude26","\ud835\ude27","\ud835\ude28","\ud835\ude29","\ud835\ude2a","\ud835\ude2b","\ud835\ude2c","\ud835\ude2d","\ud835\ude2e","\ud835\ude2f","\ud835\ude30","\ud835\ude31","\ud835\ude32","\ud835\ude33","\ud835\ude34","\ud835\ude35","\ud835\ude36","\ud835\ude37","\ud835\ude38","\ud835\ude39","\ud835\ude3a","\ud835\ude3b"],H=["\ud835\ude3c","\ud835\ude3d","\ud835\ude3e","\ud835\ude3f","\ud835\ude40","\ud835\ude41","\ud835\ude42","\ud835\ude43","\ud835\ude44","\ud835\ude45","\ud835\ude46","\ud835\ude47","\ud835\ude48","\ud835\ude49","\ud835\ude4a","\ud835\ude4b","\ud835\ude4c","\ud835\ude4d","\ud835\ude4e","\ud835\ude4f","\ud835\ude50","\ud835\ude51","\ud835\ude52","\ud835\ude53","\ud835\ude54","\ud835\ude55"],U=["\ud835\ude56","\ud835\ude57","\ud835\ude58","\ud835\ude59","\ud835\ude5a","\ud835\ude5b","\ud835\ude5c","\ud835\ude5d","\ud835\ude5e","\ud835\ude5f","\ud835\ude60","\ud835\ude61","\ud835\ude62","\ud835\ude63","\ud835\ude64","\ud835\ude65","\ud835\ude66","\ud835\ude67","\ud835\ude68","\ud835\ude69","\ud835\ude6a","\ud835\ude6b","\ud835\ude6c","\ud835\ude6d","\ud835\ude6e","\ud835\ude6f"],X=["\ud835\ude70","\ud835\ude71","\ud835\ude72","\ud835\ude73","\ud835\ude74","\ud835\ude75","\ud835\ude76","\ud835\ude77","\ud835\ude78","\ud835\ude79","\ud835\ude7a","\ud835\ude7b","\ud835\ude7c","\ud835\ude7d","\ud835\ude7e","\ud835\ude7f","\ud835\ude80","\ud835\ude81","\ud835\ude82","\ud835\ude83","\ud835\ude84","\ud835\ude85","\ud835\ude86","\ud835\ude87","\ud835\ude88","\ud835\ude89"],V=["\ud835\ude8a","\ud835\ude8b","\ud835\ude8c","\ud835\ude8d","\ud835\ude8e","\ud835\ude8f","\ud835\ude90","\ud835\ude91","\ud835\ude92","\ud835\ude93","\ud835\ude94","\ud835\ude95","\ud835\ude96","\ud835\ude97","\ud835\ude98","\ud835\ude99","\ud835\ude9a","\ud835\ude9b","\ud835\ude9c","\ud835\ude9d","\ud835\ude9e","\ud835\ude9f","\ud835\udea0","\ud835\udea1","\ud835\udea2","\ud835\udea3"],q=["\u2145","\u2146","\u2147","\u2148","\u2149"],W=["\u0391","\u0392","\u0393","\u0394","\u0395","\u0396","\u0397","\u0398","\u0399","\u039a","\u039b","\u039c","\u039d","\u039e","\u039f","\u03a0","\u03a1","\u03a3","\u03a4","\u03a5","\u03a6","\u03a7","\u03a8","\u03a9"],G=["\u03b1","\u03b2","\u03b3","\u03b4","\u03b5","\u03b6","\u03b7","\u03b8","\u03b9","\u03ba","\u03bb","\u03bc","\u03bd","\u03be","\u03bf","\u03c0","\u03c1","\u03c2","\u03c3","\u03c4","\u03c5","\u03c6","\u03c7","\u03c8","\u03c9"],z=["\ud835\udea8","\ud835\udea9","\ud835\udeaa","\ud835\udeab","\ud835\udeac","\ud835\udead","\ud835\udeae","\ud835\udeaf","\ud835\udeb0","\ud835\udeb1","\ud835\udeb2","\ud835\udeb3","\ud835\udeb4","\ud835\udeb5","\ud835\udeb6","\ud835\udeb7","\ud835\udeb8","\ud835\udeba","\ud835\udebb","\ud835\udebc","\ud835\udebd","\ud835\udebe","\ud835\udebf","\ud835\udec0"],J=["\ud835\udec2","\ud835\udec3","\ud835\udec4","\ud835\udec5","\ud835\udec6","\ud835\udec7","\ud835\udec8","\ud835\udec9","\ud835\udeca","\ud835\udecb","\ud835\udecc","\ud835\udecd","\ud835\udece","\ud835\udecf","\ud835\uded0","\ud835\uded1","\ud835\uded2","\ud835\uded3","\ud835\uded4","\ud835\uded5","\ud835\uded6","\ud835\uded7","\ud835\uded8","\ud835\uded9","\ud835\udeda"],K=["\ud835\udee2","\ud835\udee3","\ud835\udee4","\ud835\udee5","\ud835\udee6","\ud835\udee7","\ud835\udee8","\ud835\udee9","\ud835\udeea","\ud835\udeeb","\ud835\udeec","\ud835\udeed","\ud835\udeee","\ud835\udeef","\ud835\udef0","\ud835\udef1","\ud835\udef2","\ud835\udef4","\ud835\udef5","\ud835\udef6","\ud835\udef7","\ud835\udef8","\ud835\udef9","\ud835\udefa"],$=["\ud835\udefc","\ud835\udefd","\ud835\udefe","\ud835\udeff","\ud835\udf00","\ud835\udf01","\ud835\udf02","\ud835\udf03","\ud835\udf04","\ud835\udf05","\ud835\udf06","\ud835\udf07","\ud835\udf08","\ud835\udf09","\ud835\udf0a","\ud835\udf0b","\ud835\udf0c","\ud835\udf0d","\ud835\udf0e","\ud835\udf0f","\ud835\udf10","\ud835\udf11","\ud835\udf12","\ud835\udf13","\ud835\udf14"],Y=["\ud835\udf1c","\ud835\udf1d","\ud835\udf1e","\ud835\udf1f","\ud835\udf20","\ud835\udf21","\ud835\udf22","\ud835\udf23","\ud835\udf24","\ud835\udf25","\ud835\udf26","\ud835\udf27","\ud835\udf28","\ud835\udf29","\ud835\udf2a","\ud835\udf2b","\ud835\udf2c","\ud835\udf2e","\ud835\udf2f","\ud835\udf30","\ud835\udf31","\ud835\udf32","\ud835\udf33","\ud835\udf34"],Z=["\ud835\udf36","\ud835\udf37","\ud835\udf38","\ud835\udf39","\ud835\udf3a","\ud835\udf3b","\ud835\udf3c","\ud835\udf3d","\ud835\udf3e","\ud835\udf3f","\ud835\udf40","\ud835\udf41","\ud835\udf42","\ud835\udf43","\ud835\udf44","\ud835\udf45","\ud835\udf46","\ud835\udf47","\ud835\udf48","\ud835\udf49","\ud835\udf4a","\ud835\udf4b","\ud835\udf4c","\ud835\udf4d","\ud835\udf4e"],Q=["\ud835\udf56","\ud835\udf57","\ud835\udf58","\ud835\udf59","\ud835\udf5a","\ud835\udf5b","\ud835\udf5c","\ud835\udf5d","\ud835\udf5e","\ud835\udf5f","\ud835\udf60","\ud835\udf61","\ud835\udf62","\ud835\udf63","\ud835\udf64","\ud835\udf65","\ud835\udf66","\ud835\udf68","\ud835\udf69","\ud835\udf6a","\ud835\udf6b","\ud835\udf6c","\ud835\udf6d","\ud835\udf6e"],tt=["\ud835\udf70","\ud835\udf71","\ud835\udf72","\ud835\udf73","\ud835\udf74","\ud835\udf75","\ud835\udf76","\ud835\udf77","\ud835\udf78","\ud835\udf79","\ud835\udf7a","\ud835\udf7b","\ud835\udf7c","\ud835\udf7d","\ud835\udf7e","\ud835\udf7f","\ud835\udf80","\ud835\udf81","\ud835\udf82","\ud835\udf83","\ud835\udf84","\ud835\udf85","\ud835\udf86","\ud835\udf87","\ud835\udf88"],et=["\ud835\udf90","\ud835\udf91","\ud835\udf92","\ud835\udf93","\ud835\udf94","\ud835\udf95","\ud835\udf96","\ud835\udf97","\ud835\udf98","\ud835\udf99","\ud835\udf9a","\ud835\udf9b","\ud835\udf9c","\ud835\udf9d","\ud835\udf9e","\ud835\udf9f","\ud835\udfa0","\ud835\udfa2","\ud835\udfa3","\ud835\udfa4","\ud835\udfa5","\ud835\udfa6","\ud835\udfa7","\ud835\udfa8"],rt=["\ud835\udfaa","\ud835\udfab","\ud835\udfac","\ud835\udfad","\ud835\udfae","\ud835\udfaf","\ud835\udfb0","\ud835\udfb1","\ud835\udfb2","\ud835\udfb3","\ud835\udfb4","\ud835\udfb5","\ud835\udfb6","\ud835\udfb7","\ud835\udfb8","\ud835\udfb9","\ud835\udfba","\ud835\udfbb","\ud835\udfbc","\ud835\udfbd","\ud835\udfbe","\ud835\udfbf","\ud835\udfc0","\ud835\udfc1","\ud835\udfc2"],nt=["\u213c","\u213d","\u213e","\u213f"],ot=["\u03d0","\u03d1","\u03d5","\u03d6","\u03d7","\u03f0","\u03f1","\u03f5","\u03f6","\u03f4"],it=["\ud835\udedc","\ud835\udedd","\ud835\udede","\ud835\udedf","\ud835\udee0","\ud835\udee1"],st=["\ud835\udf16","\ud835\udf17","\ud835\udf18","\ud835\udf19","\ud835\udf1a","\ud835\udf1b"],at=["\ud835\udf8a","\ud835\udf8b","\ud835\udf8c","\ud835\udf8d","\ud835\udf8e","\ud835\udf8f"],lt=["\u2135","\u2136","\u2137","\u2138"],ct=d.concat(m,y,g,b,v,_,M,O,S,x,E,A,C,T,N,w,L,I,P,R,k,j,B,D,F,H,U,X,V,q,W,G,z,J,K,$,Y,Z,Q,tt,nt,ot,et,rt,it,st,at,lt);e.allLettersRegExp=new RegExp(ct.join("|"));const ut=["+","\xb1","\u2213","\u2214","\u2227","\u2228","\u2229","\u222a","\u228c","\u228d","\u228e","\u2293","\u2294","\u229d","\u229e","\u22a4","\u22a5","\u22ba","\u22bb","\u22bc","\u22c4","\u22ce","\u22cf","\u22d2","\u22d3","\u2a5e","\u2295","\u22d4"],pt=String.fromCodePoint(8292);ut.push(pt);const ht=["\u2020","\u2021","\u2210","\u2217","\u2218","\u2219","\u2240","\u229a","\u229b","\u22a0","\u22a1","\u22c5","\u22c6","\u22c7","\u22c8","\u22c9","\u22ca","\u22cb","\u22cc","\u25cb","\xb7","*","\u2297","\u2299"],ft=String.fromCodePoint(8290);ht.push(ft);const dt=String.fromCodePoint(8289),mt=["\xbc","\xbd","\xbe","\u2150","\u2151","\u2152","\u2153","\u2154","\u2155","\u2156","\u2157","\u2158","\u2159","\u215a","\u215b","\u215c","\u215d","\u215e","\u215f","\u2189"],yt=["\xb2","\xb3","\xb9","\u2070","\u2074","\u2075","\u2076","\u2077","\u2078","\u2079"].concat(["\u2080","\u2081","\u2082","\u2083","\u2084","\u2085","\u2086","\u2087","\u2088","\u2089"],["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u246f","\u2470","\u2471","\u2472","\u2473","\u24ea","\u24eb","\u24ec","\u24ed","\u24ee","\u24ef","\u24f0","\u24f1","\u24f2","\u24f3","\u24f4","\u24f5","\u24f6","\u24f7","\u24f8","\u24f9","\u24fa","\u24fb","\u24fc","\u24fd","\u24fe","\u24ff","\u2776","\u2777","\u2778","\u2779","\u277a","\u277b","\u277c","\u277d","\u277e","\u277f","\u2780","\u2781","\u2782","\u2783","\u2784","\u2785","\u2786","\u2787","\u2788","\u2789","\u278a","\u278b","\u278c","\u278d","\u278e","\u278f","\u2790","\u2791","\u2792","\u2793","\u3248","\u3249","\u324a","\u324b","\u324c","\u324d","\u324e","\u324f","\u3251","\u3252","\u3253","\u3254","\u3255","\u3256","\u3257","\u3258","\u3259","\u325a","\u325b","\u325c","\u325d","\u325e","\u325f","\u32b1","\u32b2","\u32b3","\u32b4","\u32b5","\u32b6","\u32b7","\u32b8","\u32b9","\u32ba","\u32bb","\u32bc","\u32bd","\u32be","\u32bf"],["\u2474","\u2475","\u2476","\u2477","\u2478","\u2479","\u247a","\u247b","\u247c","\u247d","\u247e","\u247f","\u2480","\u2481","\u2482","\u2483","\u2484","\u2485","\u2486","\u2487"],["\u2488","\u2489","\u248a","\u248b","\u248c","\u248d","\u248e","\u248f","\u2490","\u2491","\u2492","\u2493","\u2494","\u2495","\u2496","\u2497","\u2498","\u2499","\u249a","\u249b","\ud83c\udd00","\ud83c\udd01","\ud83c\udd02","\ud83c\udd03","\ud83c\udd04","\ud83c\udd05","\ud83c\udd06","\ud83c\udd07","\ud83c\udd08","\ud83c\udd09","\ud83c\udd0a"]),gt=["cos","cot","csc","sec","sin","tan","arccos","arccot","arccsc","arcsec","arcsin","arctan","arc cos","arc cot","arc csc","arc sec","arc sin","arc tan"].concat(["cosh","coth","csch","sech","sinh","tanh","arcosh","arcoth","arcsch","arsech","arsinh","artanh","arccosh","arccoth","arccsch","arcsech","arcsinh","arctanh"],["deg","det","dim","hom","ker","Tr","tr"],["log","ln","lg","exp","expt","gcd","gcd","arg","im","re","Pr"]),bt=[{set:["!",'"',"#","%","&",";","?","@","\\","\xa1","\xa7","\xb6","\xbf","\u2017","\u2020","\u2021","\u2022","\u2023","\u2024","\u2025","\u2027","\u2030","\u2031","\u2038","\u203b","\u203c","\u203d","\u203e","\u2041","\u2042","\u2043","\u2047","\u2048","\u2049","\u204b","\u204c","\u204d","\u204e","\u204f","\u2050","\u2051","\u2053","\u2055","\u2056","\u2058","\u2059","\u205a","\u205b","\u205c","\u205d","\u205e","\ufe10","\ufe14","\ufe15","\ufe16","\ufe30","\ufe45","\ufe46","\ufe49","\ufe4a","\ufe4b","\ufe4c","\ufe54","\ufe56","\ufe57","\ufe5f","\ufe60","\ufe61","\ufe68","\ufe6a","\ufe6b","\uff01","\uff02","\uff03","\uff05","\uff06","\uff07","\uff0a","\uff0f","\uff1b","\uff1f","\uff20","\uff3c"],type:"punctuation",role:"unknown"},{set:["\ufe13",":","\uff1a","\ufe55"],type:"punctuation",role:"colon"},{set:n,type:"punctuation",role:"comma"},{set:["\u2026","\u22ee","\u22ef","\u22f0","\u22f1","\ufe19"],type:"punctuation",role:"ellipsis"},{set:[".","\ufe52","\uff0e"],type:"punctuation",role:"fullstop"},{set:o,type:"operator",role:"dash"},{set:i,type:"operator",role:"tilde"},{set:["'","\u2032","\u2033","\u2034","\u2035","\u2036","\u2037","\u2057","\u02b9","\u02ba"],type:"punctuation",role:"prime"},{set:["\xb0"],type:"punctuation",role:"degree"},{set:l,type:"fence",role:"open"},{set:c,type:"fence",role:"close"},{set:u,type:"fence",role:"top"},{set:p,type:"fence",role:"bottom"},{set:h,type:"fence",role:"neutral"},{set:f,type:"fence",role:"metric"},{set:m,type:"identifier",role:"latinletter",font:"normal"},{set:d,type:"identifier",role:"latinletter",font:"normal"},{set:g,type:"identifier",role:"latinletter",font:"normal"},{set:y,type:"identifier",role:"latinletter",font:"normal"},{set:v,type:"identifier",role:"latinletter",font:"bold"},{set:b,type:"identifier",role:"latinletter",font:"bold"},{set:S,type:"identifier",role:"latinletter",font:"italic"},{set:_,type:"identifier",role:"latinletter",font:"italic"},{set:O,type:"identifier",role:"latinletter",font:"bold-italic"},{set:M,type:"identifier",role:"latinletter",font:"bold-italic"},{set:E,type:"identifier",role:"latinletter",font:"script"},{set:x,type:"identifier",role:"latinletter",font:"script"},{set:C,type:"identifier",role:"latinletter",font:"bold-script"},{set:A,type:"identifier",role:"latinletter",font:"bold-script"},{set:N,type:"identifier",role:"latinletter",font:"fraktur"},{set:T,type:"identifier",role:"latinletter",font:"fraktur"},{set:L,type:"identifier",role:"latinletter",font:"double-struck"},{set:w,type:"identifier",role:"latinletter",font:"double-struck"},{set:P,type:"identifier",role:"latinletter",font:"bold-fraktur"},{set:I,type:"identifier",role:"latinletter",font:"bold-fraktur"},{set:k,type:"identifier",role:"latinletter",font:"sans-serif"},{set:R,type:"identifier",role:"latinletter",font:"sans-serif"},{set:B,type:"identifier",role:"latinletter",font:"sans-serif-bold"},{set:j,type:"identifier",role:"latinletter",font:"sans-serif-bold"},{set:F,type:"identifier",role:"latinletter",font:"sans-serif-italic"},{set:D,type:"identifier",role:"latinletter",font:"sans-serif-italic"},{set:U,type:"identifier",role:"latinletter",font:"sans-serif-bold-italic"},{set:H,type:"identifier",role:"latinletter",font:"sans-serif-bold-italic"},{set:V,type:"identifier",role:"latinletter",font:"monospace"},{set:X,type:"identifier",role:"latinletter",font:"monospace"},{set:q,type:"identifier",role:"latinletter",font:"double-struck-italic"},{set:G,type:"identifier",role:"greekletter",font:"normal"},{set:W,type:"identifier",role:"greekletter",font:"normal"},{set:J,type:"identifier",role:"greekletter",font:"bold"},{set:z,type:"identifier",role:"greekletter",font:"bold"},{set:$,type:"identifier",role:"greekletter",font:"italic"},{set:K,type:"identifier",role:"greekletter",font:"italic"},{set:Z,type:"identifier",role:"greekletter",font:"bold-italic"},{set:Y,type:"identifier",role:"greekletter",font:"bold-italic"},{set:tt,type:"identifier",role:"greekletter",font:"sans-serif-bold"},{set:Q,type:"identifier",role:"greekletter",font:"sans-serif-bold"},{set:et,type:"identifier",role:"greekletter",font:"sans-serif-bold-italic"},{set:rt,type:"identifier",role:"greekletter",font:"sans-serif-bold-italic"},{set:nt,type:"identifier",role:"greekletter",font:"double-struck"},{set:ot,type:"identifier",role:"greekletter",font:"normal"},{set:it,type:"identifier",role:"greekletter",font:"bold"},{set:st,type:"identifier",role:"greekletter",font:"italic"},{set:at,type:"identifier",role:"greekletter",font:"sans-serif-bold"},{set:lt,type:"identifier",role:"otherletter",font:"normal"},{set:["0","1","2","3","4","5","6","7","8","9"],type:"number",role:"integer",font:"normal"},{set:["\uff10","\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19"],type:"number",role:"integer",font:"normal"},{set:["\ud835\udfce","\ud835\udfcf","\ud835\udfd0","\ud835\udfd1","\ud835\udfd2","\ud835\udfd3","\ud835\udfd4","\ud835\udfd5","\ud835\udfd6","\ud835\udfd7"],type:"number",role:"integer",font:"bold"},{set:["\ud835\udfd8","\ud835\udfd9","\ud835\udfda","\ud835\udfdb","\ud835\udfdc","\ud835\udfdd","\ud835\udfde","\ud835\udfdf","\ud835\udfe0","\ud835\udfe1"],type:"number",role:"integer",font:"double-struck"},{set:["\ud835\udfe2","\ud835\udfe3","\ud835\udfe4","\ud835\udfe5","\ud835\udfe6","\ud835\udfe7","\ud835\udfe8","\ud835\udfe9","\ud835\udfea","\ud835\udfeb"],type:"number",role:"integer",font:"sans-serif"},{set:["\ud835\udfec","\ud835\udfed","\ud835\udfee","\ud835\udfef","\ud835\udff0","\ud835\udff1","\ud835\udff2","\ud835\udff3","\ud835\udff4","\ud835\udff5"],type:"number",role:"integer",font:"sans-serif-bold"},{set:["\ud835\udff6","\ud835\udff7","\ud835\udff8","\ud835\udff9","\ud835\udffa","\ud835\udffb","\ud835\udffc","\ud835\udffd","\ud835\udffe","\ud835\udfff"],type:"number",role:"integer",font:"monospace"},{set:mt,type:"number",role:"float"},{set:yt,type:"number",role:"othernumber"},{set:ut,type:"operator",role:"addition"},{set:ht,type:"operator",role:"multiplication"},{set:["\xaf","-","\u2052","\u207b","\u208b","\u2212","\u2216","\u2238","\u2242","\u2296","\u229f","\u2796","\u2a29","\u2a2a","\u2a2b","\u2a2c","\u2a3a","\u2a41","\ufe63","\uff0d","\u2010","\u2011"],type:"operator",role:"subtraction"},{set:["/","\xf7","\u2044","\u2215","\u2298","\u27cc","\u29bc","\u2a38"],type:"operator",role:"division"},{set:["\u2200","\u2203","\u2206","\u2207","\u2202","\u2201","\u2204"],type:"operator",role:"prefix operator"},{set:["\ud835\udec1","\ud835\udedb","\ud835\udfca","\ud835\udfcb"],type:"operator",role:"prefix operator",font:"bold"},{set:["\ud835\udefb","\ud835\udf15"],type:"operator",role:"prefix operator",font:"italic"},{set:["\ud835\udf6f","\ud835\udf89"],type:"operator",role:"prefix operator",font:"sans-serif-bold"},{set:["=","~","\u207c","\u208c","\u223c","\u223d","\u2243","\u2245","\u2248","\u224a","\u224b","\u224c","\u224d","\u224e","\u2251","\u2252","\u2253","\u2254","\u2255","\u2256","\u2257","\u2258","\u2259","\u225a","\u225b","\u225c","\u225d","\u225e","\u225f","\u2261","\u2263","\u29e4","\u2a66","\u2a6e","\u2a6f","\u2a70","\u2a71","\u2a72","\u2a73","\u2a74","\u2a75","\u2a76","\u2a77","\u2a78","\u22d5","\u2a6d","\u2a6a","\u2a6b","\u2a6c","\ufe66","\uff1d","\u2a6c","\u229c","\u2237"],type:"relation",role:"equality"},{set:["<",">","\u2241","\u2242","\u2244","\u2246","\u2247","\u2249","\u224f","\u2250","\u2260","\u2262","\u2264","\u2265","\u2266","\u2267","\u2268","\u2269","\u226a","\u226b","\u226c","\u226d","\u226e","\u226f","\u2270","\u2271","\u2272","\u2273","\u2274","\u2275","\u2276","\u2277","\u2278","\u2279","\u227a","\u227b","\u227c","\u227d","\u227e","\u227f","\u2280","\u2281","\u22d6","\u22d7","\u22d8","\u22d9","\u22da","\u22db","\u22dc","\u22dd","\u22de","\u22df","\u22e0","\u22e1","\u22e6","\u22e7","\u22e8","\u22e9","\u2a79","\u2a7a","\u2a7b","\u2a7c","\u2a7d","\u2a7e","\u2a7f","\u2a80","\u2a81","\u2a82","\u2a83","\u2a84","\u2a85","\u2a86","\u2a87","\u2a88","\u2a89","\u2a8a","\u2a8b","\u2a8c","\u2a8d","\u2a8e","\u2a8f","\u2a90","\u2a91","\u2a92","\u2a93","\u2a94","\u2a95","\u2a96","\u2a97","\u2a98","\u2a99","\u2a9a","\u2a9b","\u2a9c","\u2a9d","\u2a9e","\u2a9f","\u2aa0","\u2aa1","\u2aa2","\u2aa3","\u2aa4","\u2aa5","\u2aa6","\u2aa7","\u2aa8","\u2aa9","\u2aaa","\u2aab","\u2aac","\u2aad","\u2aae","\u2aaf","\u2ab0","\u2ab1","\u2ab2","\u2ab3","\u2ab4","\u2ab5","\u2ab6","\u2ab7","\u2ab8","\u2ab9","\u2aba","\u2abb","\u2abc","\u2af7","\u2af8","\u2af9","\u2afa","\u29c0","\u29c1","\ufe64","\ufe65","\uff1c","\uff1e"],type:"relation",role:"inequality"},{set:["\u22e2","\u22e3","\u22e4","\u22e5","\u2282","\u2283","\u2284","\u2285","\u2286","\u2287","\u2288","\u2289","\u228a","\u228b","\u228f","\u2290","\u2291","\u2292","\u2abd","\u2abe","\u2abf","\u2ac0","\u2ac1","\u2ac2","\u2ac3","\u2ac4","\u2ac5","\u2ac6","\u2ac7","\u2ac8","\u2ac9","\u2aca","\u2acb","\u2acc","\u2acd","\u2ace","\u2acf","\u2ad0","\u2ad1","\u2ad2","\u2ad3","\u2ad4","\u2ad5","\u2ad6","\u2ad7","\u2ad8","\u22d0","\u22d1","\u22ea","\u22eb","\u22ec","\u22ed","\u22b2","\u22b3","\u22b4","\u22b5"],type:"relation",role:"set"},{set:["\u22a2","\u22a3","\u22a6","\u22a7","\u22a8","\u22a9","\u22aa","\u22ab","\u22ac","\u22ad","\u22ae","\u22af","\u2ade","\u2adf","\u2ae0","\u2ae1","\u2ae2","\u2ae3","\u2ae4","\u2ae5","\u2ae6","\u2ae7","\u2ae8","\u2ae9","\u2aea","\u2aeb","\u2aec","\u2aed"],type:"relation",role:"unknown"},{set:["\u2190","\u2191","\u2192","\u2193","\u2194","\u2195","\u2196","\u2197","\u2198","\u2199","\u219a","\u219b","\u219c","\u219d","\u219e","\u219f","\u21a0","\u21a1","\u21a2","\u21a3","\u21a4","\u21a5","\u21a6","\u21a7","\u21a8","\u21a9","\u21aa","\u21ab","\u21ac","\u21ad","\u21ae","\u21af","\u21b0","\u21b1","\u21b2","\u21b3","\u21b4","\u21b5","\u21b6","\u21b7","\u21b8","\u21b9","\u21ba","\u21bb","\u21c4","\u21c5","\u21c6","\u21c7","\u21c8","\u21c9","\u21ca","\u21cd","\u21ce","\u21cf","\u21d0","\u21d1","\u21d2","\u21d3","\u21d4","\u21d5","\u21d6","\u21d7","\u21d8","\u21d9","\u21da","\u21db","\u21dc","\u21dd","\u21de","\u21df","\u21e0","\u21e1","\u21e2","\u21e3","\u21e4","\u21e5","\u21e6","\u21e7","\u21e8","\u21e9","\u21ea","\u21eb","\u21ec","\u21ed","\u21ee","\u21ef","\u21f0","\u21f1","\u21f2","\u21f3","\u21f4","\u21f5","\u21f6","\u21f7","\u21f8","\u21f9","\u21fa","\u21fb","\u21fc","\u21fd","\u21fe","\u21ff","\u2301","\u2303","\u2304","\u2324","\u238b","\u2794","\u2798","\u2799","\u279a","\u279b","\u279c","\u279d","\u279e","\u279f","\u27a0","\u27a1","\u27a2","\u27a3","\u27a4","\u27a5","\u27a6","\u27a7","\u27a8","\u27a9","\u27aa","\u27ab","\u27ac","\u27ad","\u27ae","\u27af","\u27b1","\u27b2","\u27b3","\u27b4","\u27b5","\u27b6","\u27b7","\u27b8","\u27b9","\u27ba","\u27bb","\u27bc","\u27bd","\u27be","\u27f0","\u27f1","\u27f2","\u27f3","\u27f4","\u27f5","\u27f6","\u27f7","\u27f8","\u27f9","\u27fa","\u27fb","\u27fc","\u27fd","\u27fe","\u27ff","\u2900","\u2901","\u2902","\u2903","\u2904","\u2905","\u2906","\u2907","\u2908","\u2909","\u290a","\u290b","\u290c","\u290d","\u290e","\u290f","\u2910","\u2911","\u2912","\u2913","\u2914","\u2915","\u2916","\u2917","\u2918","\u2919","\u291a","\u291b","\u291c","\u291d","\u291e","\u291f","\u2920","\u2921","\u2922","\u2923","\u2924","\u2925","\u2926","\u2927","\u2928","\u2929","\u292a","\u292d","\u292e","\u292f","\u2930","\u2931","\u2932","\u2933","\u2934","\u2935","\u2936","\u2937","\u2938","\u2939","\u293a","\u293b","\u293c","\u293d","\u293e","\u293f","\u2940","\u2941","\u2942","\u2943","\u2944","\u2945","\u2946","\u2947","\u2948","\u2949","\u2970","\u2971","\u2972","\u2973","\u2974","\u2975","\u2976","\u2977","\u2978","\u2979","\u297a","\u297b","\u29b3","\u29b4","\u29bd","\u29ea","\u29ec","\u29ed","\u2a17","\u2b00","\u2b01","\u2b02","\u2b03","\u2b04","\u2b05","\u2b06","\u2b07","\u2b08","\u2b09","\u2b0a","\u2b0b","\u2b0c","\u2b0d","\u2b0e","\u2b0f","\u2b10","\u2b11","\u2b30","\u2b31","\u2b32","\u2b33","\u2b34","\u2b35","\u2b36","\u2b37","\u2b38","\u2b39","\u2b3a","\u2b3b","\u2b3c","\u2b3d","\u2b3e","\u2b3f","\u2b40","\u2b41","\u2b42","\u2b43","\u2b44","\u2b45","\u2b46","\u2b47","\u2b48","\u2b49","\u2b4a","\u2b4b","\u2b4c","\uffe9","\uffea","\uffeb","\uffec","\u21bc","\u21bd","\u21be","\u21bf","\u21c0","\u21c1","\u21c2","\u21c3","\u21cb","\u21cc","\u294a","\u294b","\u294c","\u294d","\u294e","\u294f","\u2950","\u2951","\u2952","\u2953","\u2954","\u2955","\u2956","\u2957","\u2958","\u2959","\u295a","\u295b","\u295c","\u295d","\u295e","\u295f","\u2960","\u2961","\u2962","\u2963","\u2964","\u2965","\u2966","\u2967","\u2968","\u2969","\u296a","\u296b","\u296c","\u296d","\u296e","\u296f","\u297c","\u297d","\u297e","\u297f"],type:"relation",role:"arrow"},{set:["\u2208","\u220a","\u22f2","\u22f3","\u22f4","\u22f5","\u22f6","\u22f7","\u22f8","\u22f9","\u22ff"],type:"operator",role:"element"},{set:["\u2209"],type:"operator",role:"nonelement"},{set:["\u220b","\u220d","\u22fa","\u22fb","\u22fc","\u22fd","\u22fe"],type:"operator",role:"reelement"},{set:["\u220c"],type:"operator",role:"renonelement"},{set:["\u2140","\u220f","\u2210","\u2211","\u22c0","\u22c1","\u22c2","\u22c3","\u2a00","\u2a01","\u2a02","\u2a03","\u2a04","\u2a05","\u2a06","\u2a07","\u2a08","\u2a09","\u2a0a","\u2a0b","\u2afc","\u2aff"],type:"largeop",role:"sum"},{set:["\u222b","\u222c","\u222d","\u222e","\u222f","\u2230","\u2231","\u2232","\u2233","\u2a0c","\u2a0d","\u2a0e","\u2a0f","\u2a10","\u2a11","\u2a12","\u2a13","\u2a14","\u2a15","\u2a16","\u2a17","\u2a18","\u2a19","\u2a1a","\u2a1b","\u2a1c"],type:"largeop",role:"integral"},{set:["\u221f","\u2220","\u2221","\u2222","\u22be","\u22bf","\u25b3","\u25b7","\u25bd","\u25c1"],type:"operator",role:"geometry"},{set:["inf","lim","liminf","limsup","max","min","sup","injlim","projlim","inj lim","proj lim"],type:"function",role:"limit function"},{set:gt,type:"function",role:"prefix function"},{set:["mod","rem"],type:"operator",role:"prefix function"}],vt=function(){const t={};for(let e,r=0;e=bt[r];r++)e.set.forEach((function(r){t[r]={role:e.role||"unknown",type:e.type||"unknown",font:e.font||"unknown"}}));return t}();e.equal=function(t,e){return t.type===e.type&&t.role===e.role&&t.font===e.font},e.lookupType=function(t){var e;return(null===(e=vt[t])||void 0===e?void 0:e.type)||"unknown"},e.lookupRole=function(t){var e;return(null===(e=vt[t])||void 0===e?void 0:e.role)||"unknown"},e.lookupMeaning=function(t){return vt[t]||{role:"unknown",type:"unknown",font:"unknown"}},e.invisibleTimes=function(){return ft},e.invisiblePlus=function(){return pt},e.invisibleComma=function(){return r},e.functionApplication=function(){return dt},e.isMatchingFence=function(t,e){return-1!==h.indexOf(t)||-1!==f.indexOf(t)?t===e:s[t]===e||a[t]===e},e.isEmbellishedType=function(t){return"operator"===t||"relation"===t||"fence"===t||"punctuation"===t};const _t=new Map;function St(t,e){return`${t} ${e}`}function Mt(t,e,r=""){for(const n of e)_t.set(St(t,n),r||t)}Mt("d",["d","\u2146","\uff44","\ud835\udc1d","\ud835\udc51","\ud835\udcb9","\ud835\udced","\ud835\udd21","\ud835\udd55","\ud835\udd89","\ud835\uddbd","\ud835\uddf1","\ud835\ude25","\ud835\ude8d"]),Mt("bar",o),Mt("tilde",i),e.lookupSecondary=function(t,e){return _t.get(St(t,e))}},8158:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticMeaningCollator=e.SemanticNodeCollator=e.SemanticDefault=void 0;const n=r(3588),o=r(3882);class i{constructor(){this.map={}}static key(t,e){return e?t+":"+e:t}add(t,e){this.map[i.key(t,e.font)]=e}addNode(t){this.add(t.textContent,t.meaning())}retrieve(t,e){return this.map[i.key(t,e)]}retrieveNode(t){return this.retrieve(t.textContent,t.font)}size(){return Object.keys(this.map).length}}e.SemanticDefault=i;class s{constructor(){this.map={}}add(t,e){const r=this.map[t];r?r.push(e):this.map[t]=[e]}retrieve(t,e){return this.map[i.key(t,e)]}retrieveNode(t){return this.retrieve(t.textContent,t.font)}copy(){const t=this.copyCollator();for(const e in this.map)t.map[e]=this.map[e];return t}minimize(){for(const t in this.map)1===this.map[t].length&&delete this.map[t]}minimalCollator(){const t=this.copy();for(const e in t.map)1===t.map[e].length&&delete t.map[e];return t}isMultiValued(){for(const t in this.map)if(this.map[t].length>1)return!0;return!1}isEmpty(){return!Object.keys(this.map).length}}class a extends s{copyCollator(){return new a}add(t,e){const r=i.key(t,e.font);super.add(r,e)}addNode(t){this.add(t.textContent,t)}toString(){const t=[];for(const e in this.map){const r=Array(e.length+3).join(" "),n=this.map[e],o=[];for(let t,e=0;t=n[e];e++)o.push(t.toString());t.push(e+": "+o.join("\n"+r))}return t.join("\n")}collateMeaning(){const t=new l;for(const e in this.map)t.map[e]=this.map[e].map((function(t){return t.meaning()}));return t}}e.SemanticNodeCollator=a;class l extends s{copyCollator(){return new l}add(t,e){const r=this.retrieve(t,e.font);if(!r||!r.find((function(t){return n.equal(t,e)}))){const r=i.key(t,e.font);super.add(r,e)}}addNode(t){this.add(t.textContent,t.meaning())}toString(){const t=[];for(const e in this.map){const r=Array(e.length+3).join(" "),n=this.map[e],o=[];for(let t,e=0;t=n[e];e++)o.push("{type: "+t.type+", role: "+t.role+", font: "+t.font+"}");t.push(e+": "+o.join("\n"+r))}return t.join("\n")}reduce(){for(const t in this.map)1!==this.map[t].length&&(this.map[t]=(0,o.reduce)(this.map[t]))}default(){const t=new i;for(const e in this.map)1===this.map[e].length&&(t.map[e]=this.map[e][0]);return t}newDefault(){const t=this.default();this.reduce();const e=this.default();return t.size()!==e.size()?e:null}}e.SemanticMeaningCollator=l},9911:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticMultiHeuristic=e.SemanticTreeHeuristic=e.SemanticAbstractHeuristic=void 0;class r{constructor(t,e,r=(t=>!1)){this.name=t,this.apply=e,this.applicable=r}}e.SemanticAbstractHeuristic=r;e.SemanticTreeHeuristic=class extends r{};e.SemanticMultiHeuristic=class extends r{}},7516:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.lookup=e.run=e.add=e.blacklist=e.flags=e.updateFactory=e.factory=void 0,e.factory=null,e.updateFactory=function(t){e.factory=t};const r=new Map;function n(t){return r.get(t)}e.flags={combine_juxtaposition:!0,convert_juxtaposition:!0,multioperator:!0},e.blacklist={},e.add=function(t){const n=t.name;r.set(n,t),e.flags[n]||(e.flags[n]=!1)},e.run=function(t,r,o){const i=n(t);return i&&!e.blacklist[t]&&(e.flags[t]||i.applicable(r))?i.apply(r):o?o(r):r},e.lookup=n},94:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});const n=r(2057),o=r(5897),i=r(3588),s=r(7516),a=r(9911),l=r(5609),c=r(3308),u=r(4795);function p(t,e,r){let n=null;if(!t.length)return n;const o=r[r.length-1],i=o&&o.length,s=e&&e.length,a=c.default.getInstance();if(i&&s){if("infixop"===e[0].type&&"implicit"===e[0].role)return n=t.pop(),o.push(a.postfixNode_(o.pop(),t)),n;n=t.shift();const r=a.prefixNode_(e.shift(),t);return e.unshift(r),n}return i?(o.push(a.postfixNode_(o.pop(),t)),n):(s&&e.unshift(a.prefixNode_(e.shift(),t)),n)}function h(t,e,r){if(!e.length)return t;const o=t.pop(),i=e.shift(),a=r.shift();if(l.isImplicitOp(i)){n.Debugger.getInstance().output("Juxta Heuristic Case 2");const s=(o?[o,i]:[i]).concat(a);return h(t.concat(s),e,r)}if(!o)return n.Debugger.getInstance().output("Juxta Heuristic Case 3"),h([i].concat(a),e,r);const c=a.shift();if(!c){n.Debugger.getInstance().output("Juxta Heuristic Case 9");const a=s.factory.makeBranchNode("infixop",[o,e.shift()],[i],i.textContent);return a.role="implicit",s.run("combine_juxtaposition",a),e.unshift(a),h(t,e,r)}if(l.isOperator(o)||l.isOperator(c))return n.Debugger.getInstance().output("Juxta Heuristic Case 4"),h(t.concat([o,i,c]).concat(a),e,r);let u=null;return l.isImplicitOp(o)&&l.isImplicitOp(c)?(n.Debugger.getInstance().output("Juxta Heuristic Case 5"),o.contentNodes.push(i),o.contentNodes=o.contentNodes.concat(c.contentNodes),o.childNodes.push(c),o.childNodes=o.childNodes.concat(c.childNodes),c.childNodes.forEach((t=>t.parent=o)),i.parent=o,o.addMathmlNodes(i.mathml),o.addMathmlNodes(c.mathml),u=o):l.isImplicitOp(o)?(n.Debugger.getInstance().output("Juxta Heuristic Case 6"),o.contentNodes.push(i),o.childNodes.push(c),c.parent=o,i.parent=o,o.addMathmlNodes(i.mathml),o.addMathmlNodes(c.mathml),u=o):l.isImplicitOp(c)?(n.Debugger.getInstance().output("Juxta Heuristic Case 7"),c.contentNodes.unshift(i),c.childNodes.unshift(o),o.parent=c,i.parent=c,c.addMathmlNodes(i.mathml),c.addMathmlNodes(o.mathml),u=c):(n.Debugger.getInstance().output("Juxta Heuristic Case 8"),u=s.factory.makeBranchNode("infixop",[o,c],[i],i.textContent),u.role="implicit"),t.push(u),h(t.concat(a),e,r)}s.add(new a.SemanticTreeHeuristic("combine_juxtaposition",(function(t){for(let e,r=t.childNodes.length-1;e=t.childNodes[r];r--)l.isImplicitOp(e)&&!e.nobreaking&&(t.childNodes.splice(r,1,...e.childNodes),t.contentNodes.splice(r,0,...e.contentNodes),e.childNodes.concat(e.contentNodes).forEach((function(e){e.parent=t})),t.addMathmlNodes(e.mathml));return t}))),s.add(new a.SemanticTreeHeuristic("propagateSimpleFunction",(t=>("infixop"!==t.type&&"fraction"!==t.type||!t.childNodes.every(l.isSimpleFunction)||(t.role="composed function"),t)),(t=>"clearspeak"===o.default.getInstance().domain))),s.add(new a.SemanticTreeHeuristic("simpleNamedFunction",(t=>("unit"!==t.role&&-1!==["f","g","h","F","G","H"].indexOf(t.textContent)&&(t.role="simple function"),t)),(t=>"clearspeak"===o.default.getInstance().domain))),s.add(new a.SemanticTreeHeuristic("propagateComposedFunction",(t=>("fenced"===t.type&&"composed function"===t.childNodes[0].role&&(t.role="composed function"),t)),(t=>"clearspeak"===o.default.getInstance().domain))),s.add(new a.SemanticTreeHeuristic("multioperator",(t=>{if("unknown"!==t.role||t.textContent.length<=1)return;const e=[...t.textContent].map(i.lookupMeaning).reduce((function(t,e){return t&&e.role&&"unknown"!==e.role&&e.role!==t?"unknown"===t?e.role:null:t}),"unknown");e&&(t.role=e)}))),s.add(new a.SemanticMultiHeuristic("convert_juxtaposition",(t=>{let e=u.partitionNodes(t,(function(t){return t.textContent===i.invisibleTimes()&&"operator"===t.type}));e=e.rel.length?function(t){const e=[],r=[];let n=t.comp.shift(),o=null,i=[];for(;t.comp.length;)if(i=[],n.length)o&&e.push(o),r.push(n),o=t.rel.shift(),n=t.comp.shift();else{for(o&&i.push(o);!n.length&&t.comp.length;)n=t.comp.shift(),i.push(t.rel.shift());o=p(i,n,r)}i.length||n.length?(e.push(o),r.push(n)):(i.push(o),p(i,n,r));return{rel:e,comp:r}}(e):e,t=e.comp[0];for(let r,n,o=1;r=e.comp[o],n=e.rel[o-1];o++)t.push(n),t=t.concat(r);return e=u.partitionNodes(t,(function(t){return t.textContent===i.invisibleTimes()&&("operator"===t.type||"infixop"===t.type)})),e.rel.length?h(e.comp.shift(),e.rel,e.comp):t}))),s.add(new a.SemanticTreeHeuristic("simple2prefix",(t=>(t.textContent.length>1&&!t.textContent[0].match(/[A-Z]/)&&(t.role="prefix function"),t)),(t=>"braille"===o.default.getInstance().modality&&"identifier"===t.type))),s.add(new a.SemanticTreeHeuristic("detect_cycle",(t=>{t.type="matrix",t.role="cycle";const e=t.childNodes[0];return e.type="row",e.role="cycle",e.textContent="",e.contentNodes=[],t}),(t=>"fenced"===t.type&&"infixop"===t.childNodes[0].type&&"implicit"===t.childNodes[0].role&&t.childNodes[0].childNodes.every((function(t){return"number"===t.type}))&&t.childNodes[0].contentNodes.every((function(t){return"space"===t.role})))))},7228:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticMathml=void 0;const n=r(5740),o=r(5250),i=r(5609),s=r(3308),a=r(4795);class l extends o.SemanticAbstractParser{constructor(){super("MathML"),this.parseMap_={SEMANTICS:this.semantics_.bind(this),MATH:this.rows_.bind(this),MROW:this.rows_.bind(this),MPADDED:this.rows_.bind(this),MSTYLE:this.rows_.bind(this),MFRAC:this.fraction_.bind(this),MSUB:this.limits_.bind(this),MSUP:this.limits_.bind(this),MSUBSUP:this.limits_.bind(this),MOVER:this.limits_.bind(this),MUNDER:this.limits_.bind(this),MUNDEROVER:this.limits_.bind(this),MROOT:this.root_.bind(this),MSQRT:this.sqrt_.bind(this),MTABLE:this.table_.bind(this),MLABELEDTR:this.tableLabeledRow_.bind(this),MTR:this.tableRow_.bind(this),MTD:this.tableCell_.bind(this),MS:this.text_.bind(this),MTEXT:this.text_.bind(this),MSPACE:this.space_.bind(this),"ANNOTATION-XML":this.text_.bind(this),MI:this.identifier_.bind(this),MN:this.number_.bind(this),MO:this.operator_.bind(this),MFENCED:this.fenced_.bind(this),MENCLOSE:this.enclosed_.bind(this),MMULTISCRIPTS:this.multiscripts_.bind(this),ANNOTATION:this.empty_.bind(this),NONE:this.empty_.bind(this),MACTION:this.action_.bind(this)};const t={type:"identifier",role:"numbersetletter",font:"double-struck"};["C","H","N","P","Q","R","Z","\u2102","\u210d","\u2115","\u2119","\u211a","\u211d","\u2124"].forEach((e=>this.getFactory().defaultMap.add(e,t)).bind(this))}static getAttribute_(t,e,r){if(!t.hasAttribute(e))return r;const n=t.getAttribute(e);return n.match(/^\s*$/)?null:n}parse(t){s.default.getInstance().setNodeFactory(this.getFactory());const e=n.toArray(t.childNodes),r=n.tagName(t),o=this.parseMap_[r],i=(o||this.dummy_.bind(this))(t,e);return a.addAttributes(i,t),-1!==["MATH","MROW","MPADDED","MSTYLE","SEMANTICS"].indexOf(r)||(i.mathml.unshift(t),i.mathmlTree=t),i}semantics_(t,e){return e.length?this.parse(e[0]):this.getFactory().makeEmptyNode()}rows_(t,e){const r=t.getAttribute("semantics");if(r&&r.match("bspr_"))return s.default.proof(t,r,this.parseList.bind(this));let n;return 1===(e=a.purgeNodes(e)).length?(n=this.parse(e[0]),"empty"!==n.type||n.mathmlTree||(n.mathmlTree=t)):n=s.default.getInstance().row(this.parseList(e)),n.mathml.unshift(t),n}fraction_(t,e){if(!e.length)return this.getFactory().makeEmptyNode();const r=this.parse(e[0]),n=e[1]?this.parse(e[1]):this.getFactory().makeEmptyNode();return s.default.getInstance().fractionLikeNode(r,n,t.getAttribute("linethickness"),"true"===t.getAttribute("bevelled"))}limits_(t,e){return s.default.getInstance().limitNode(n.tagName(t),this.parseList(e))}root_(t,e){return e[1]?this.getFactory().makeBranchNode("root",[this.parse(e[1]),this.parse(e[0])],[]):this.sqrt_(t,e)}sqrt_(t,e){const r=this.parseList(a.purgeNodes(e));return this.getFactory().makeBranchNode("sqrt",[s.default.getInstance().row(r)],[])}table_(t,e){const r=t.getAttribute("semantics");if(r&&r.match("bspr_"))return s.default.proof(t,r,this.parseList.bind(this));const n=this.getFactory().makeBranchNode("table",this.parseList(e),[]);return n.mathmlTree=t,s.default.tableToMultiline(n),n}tableRow_(t,e){const r=this.getFactory().makeBranchNode("row",this.parseList(e),[]);return r.role="table",r}tableLabeledRow_(t,e){if(!e.length)return this.tableRow_(t,e);const r=this.parse(e[0]);r.role="label";const n=this.getFactory().makeBranchNode("row",this.parseList(e.slice(1)),[r]);return n.role="table",n}tableCell_(t,e){const r=this.parseList(a.purgeNodes(e));let n;n=r.length?1===r.length&&i.isType(r[0],"empty")?r:[s.default.getInstance().row(r)]:[];const o=this.getFactory().makeBranchNode("cell",n,[]);return o.role="table",o}space_(t,e){const r=t.getAttribute("width"),o=r&&r.match(/[a-z]*$/);if(!o)return this.empty_(t,e);const i=o[0],a=parseFloat(r.slice(0,o.index)),l={cm:.4,pc:.5,em:.5,ex:1,in:.15,pt:5,mm:5}[i];if(!l||isNaN(a)||a<l)return this.empty_(t,e);const c=this.getFactory().makeUnprocessed(t);return s.default.getInstance().text(c,n.tagName(t))}text_(t,e){const r=this.leaf_(t,e);return t.textContent?(r.updateContent(t.textContent,!0),s.default.getInstance().text(r,n.tagName(t))):r}identifier_(t,e){const r=this.leaf_(t,e);return s.default.getInstance().identifierNode(r,s.default.getInstance().font(t.getAttribute("mathvariant")),t.getAttribute("class"))}number_(t,e){const r=this.leaf_(t,e);return s.default.number(r),r}operator_(t,e){const r=this.leaf_(t,e);return s.default.getInstance().operatorNode(r),r}fenced_(t,e){const r=this.parseList(a.purgeNodes(e)),n=l.getAttribute_(t,"separators",","),o=l.getAttribute_(t,"open","("),i=l.getAttribute_(t,"close",")"),c=s.default.getInstance().mfenced(o,i,n,r);return s.default.getInstance().tablesInRow([c])[0]}enclosed_(t,e){const r=this.parseList(a.purgeNodes(e)),n=this.getFactory().makeBranchNode("enclose",[s.default.getInstance().row(r)],[]);return n.role=t.getAttribute("notation")||"unknown",n}multiscripts_(t,e){if(!e.length)return this.getFactory().makeEmptyNode();const r=this.parse(e.shift());if(!e.length)return r;const o=[],i=[],l=[],c=[];let u=!1,p=0;for(let t,r=0;t=e[r];r++)"MPRESCRIPTS"!==n.tagName(t)?(u?1&p?o.push(t):i.push(t):1&p?l.push(t):c.push(t),p++):(u=!0,p=0);return a.purgeNodes(o).length||a.purgeNodes(i).length?s.default.getInstance().tensor(r,this.parseList(i),this.parseList(o),this.parseList(c),this.parseList(l)):s.default.getInstance().pseudoTensor(r,this.parseList(c),this.parseList(l))}empty_(t,e){return this.getFactory().makeEmptyNode()}action_(t,e){return e.length>1?this.parse(e[1]):this.getFactory().makeUnprocessed(t)}dummy_(t,e){const r=this.getFactory().makeUnprocessed(t);return r.role=t.tagName,r.textContent=t.textContent,r}leaf_(t,e){if(1===e.length&&e[0].nodeType!==n.NodeType.TEXT_NODE){const r=this.getFactory().makeUnprocessed(t);return r.role=e[0].tagName,a.addAttributes(r,e[0]),r}return this.getFactory().makeLeafNode(t.textContent,s.default.getInstance().font(t.getAttribute("mathvariant")))}}e.SemanticMathml=l},5952:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticNode=void 0;const n=r(5740),o=r(3588),i=r(4795);class s{constructor(t){this.id=t,this.mathml=[],this.parent=null,this.type="unknown",this.role="unknown",this.font="unknown",this.embellished=null,this.fencePointer="",this.childNodes=[],this.textContent="",this.mathmlTree=null,this.contentNodes=[],this.annotation={},this.attributes={},this.nobreaking=!1}static fromXml(t){const e=parseInt(t.getAttribute("id"),10),r=new s(e);return r.type=t.tagName,s.setAttribute(r,t,"role"),s.setAttribute(r,t,"font"),s.setAttribute(r,t,"embellished"),s.setAttribute(r,t,"fencepointer","fencePointer"),t.getAttribute("annotation")&&r.parseAnnotation(t.getAttribute("annotation")),i.addAttributes(r,t),s.processChildren(r,t),r}static setAttribute(t,e,r,n){n=n||r;const o=e.getAttribute(r);o&&(t[n]=o)}static processChildren(t,e){for(const r of n.toArray(e.childNodes)){if(r.nodeType===n.NodeType.TEXT_NODE){t.textContent=r.textContent;continue}const e=n.toArray(r.childNodes).map(s.fromXml);e.forEach((e=>e.parent=t)),"CONTENT"===n.tagName(r)?t.contentNodes=e:t.childNodes=e}}querySelectorAll(t){let e=[];for(let r,n=0;r=this.childNodes[n];n++)e=e.concat(r.querySelectorAll(t));for(let r,n=0;r=this.contentNodes[n];n++)e=e.concat(r.querySelectorAll(t));return t(this)&&e.unshift(this),e}xml(t,e){const r=function(r,n){const o=n.map((function(r){return r.xml(t,e)})),i=t.createElementNS("",r);for(let t,e=0;t=o[e];e++)i.appendChild(t);return i},n=t.createElementNS("",this.type);return e||this.xmlAttributes(n),n.textContent=this.textContent,this.contentNodes.length>0&&n.appendChild(r("content",this.contentNodes)),this.childNodes.length>0&&n.appendChild(r("children",this.childNodes)),n}toString(t=!1){const e=n.parseInput("<snode/>");return n.serializeXml(this.xml(e,t))}allAttributes(){const t=[];return t.push(["role",this.role]),"unknown"!==this.font&&t.push(["font",this.font]),Object.keys(this.annotation).length&&t.push(["annotation",this.xmlAnnotation()]),this.embellished&&t.push(["embellished",this.embellished]),this.fencePointer&&t.push(["fencepointer",this.fencePointer]),t.push(["id",this.id.toString()]),t}xmlAnnotation(){const t=[];for(const e in this.annotation)this.annotation[e].forEach((function(r){t.push(e+":"+r)}));return t.join(";")}toJson(){const t={};t.type=this.type;const e=this.allAttributes();for(let r,n=0;r=e[n];n++)t[r[0]]=r[1].toString();return this.textContent&&(t.$t=this.textContent),this.childNodes.length&&(t.children=this.childNodes.map((function(t){return t.toJson()}))),this.contentNodes.length&&(t.content=this.contentNodes.map((function(t){return t.toJson()}))),t}updateContent(t,e){const r=e?t.replace(/^[ \f\n\r\t\v\u200b]*/,"").replace(/[ \f\n\r\t\v\u200b]*$/,""):t.trim();if(t=t&&!r?t:r,this.textContent===t)return;const n=(0,o.lookupMeaning)(t);this.textContent=t,this.role=n.role,this.type=n.type,this.font=n.font}addMathmlNodes(t){for(let e,r=0;e=t[r];r++)-1===this.mathml.indexOf(e)&&this.mathml.push(e)}appendChild(t){this.childNodes.push(t),this.addMathmlNodes(t.mathml),t.parent=this}replaceChild(t,e){const r=this.childNodes.indexOf(t);if(-1===r)return;t.parent=null,e.parent=this,this.childNodes[r]=e;const n=t.mathml.filter((function(t){return-1===e.mathml.indexOf(t)})),o=e.mathml.filter((function(e){return-1===t.mathml.indexOf(e)}));this.removeMathmlNodes(n),this.addMathmlNodes(o)}appendContentNode(t){t&&(this.contentNodes.push(t),this.addMathmlNodes(t.mathml),t.parent=this)}removeContentNode(t){if(t){const e=this.contentNodes.indexOf(t);-1!==e&&this.contentNodes.slice(e,1)}}equals(t){if(!t)return!1;if(this.type!==t.type||this.role!==t.role||this.textContent!==t.textContent||this.childNodes.length!==t.childNodes.length||this.contentNodes.length!==t.contentNodes.length)return!1;for(let e,r,n=0;e=this.childNodes[n],r=t.childNodes[n];n++)if(!e.equals(r))return!1;for(let e,r,n=0;e=this.contentNodes[n],r=t.contentNodes[n];n++)if(!e.equals(r))return!1;return!0}displayTree(){console.info(this.displayTree_(0))}addAnnotation(t,e){e&&this.addAnnotation_(t,e)}getAnnotation(t){const e=this.annotation[t];return e||[]}hasAnnotation(t,e){const r=this.annotation[t];return!!r&&-1!==r.indexOf(e)}parseAnnotation(t){const e=t.split(";");for(let t=0,r=e.length;t<r;t++){const r=e[t].split(":");this.addAnnotation(r[0],r[1])}}meaning(){return{type:this.type,role:this.role,font:this.font}}xmlAttributes(t){const e=this.allAttributes();for(let r,n=0;r=e[n];n++)t.setAttribute(r[0],r[1]);this.addExternalAttributes(t)}addExternalAttributes(t){for(const e in this.attributes)t.setAttribute(e,this.attributes[e])}removeMathmlNodes(t){const e=this.mathml;for(let r,n=0;r=t[n];n++){const t=e.indexOf(r);-1!==t&&e.splice(t,1)}this.mathml=e}displayTree_(t){t++;const e=Array(t).join("  ");let r="";r+="\n"+e+this.toString(),r+="\n"+e+"MathmlTree:",r+="\n"+e+this.mathmlTreeString(),r+="\n"+e+"MathML:";for(let t,n=0;t=this.mathml[n];n++)r+="\n"+e+t.toString();return r+="\n"+e+"Begin Content",this.contentNodes.forEach((function(e){r+=e.displayTree_(t)})),r+="\n"+e+"End Content",r+="\n"+e+"Begin Children",this.childNodes.forEach((function(e){r+=e.displayTree_(t)})),r+="\n"+e+"End Children",r}mathmlTreeString(){return this.mathmlTree?this.mathmlTree.toString():"EMPTY"}addAnnotation_(t,e){const r=this.annotation[t];r?r.push(e):this.annotation[t]=[e]}}e.SemanticNode=s},6537:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticNodeFactory=void 0;const n=r(8158),o=r(8158),i=r(5952);e.SemanticNodeFactory=class{constructor(){this.leafMap=new o.SemanticNodeCollator,this.defaultMap=new n.SemanticDefault,this.idCounter_=-1}makeNode(t){return this.createNode_(t)}makeUnprocessed(t){const e=this.createNode_();return e.mathml=[t],e.mathmlTree=t,e}makeEmptyNode(){const t=this.createNode_();return t.type="empty",t}makeContentNode(t){const e=this.createNode_();return e.updateContent(t),e}makeMultipleContentNodes(t,e){const r=[];for(let n=0;n<t;n++)r.push(this.makeContentNode(e));return r}makeLeafNode(t,e){if(!t)return this.makeEmptyNode();const r=this.makeContentNode(t);r.font=e||r.font;const n=this.defaultMap.retrieveNode(r);return n&&(r.type=n.type,r.role=n.role,r.font=n.font),this.leafMap.addNode(r),r}makeBranchNode(t,e,r,n){const o=this.createNode_();return n&&o.updateContent(n),o.type=t,o.childNodes=e,o.contentNodes=r,e.concat(r).forEach((function(t){t.parent=o,o.addMathmlNodes(t.mathml)})),o}createNode_(t){return void 0!==t?this.idCounter_=Math.max(this.idCounter_,t):t=++this.idCounter_,new i.SemanticNode(t)}}},3882:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticComparator=e.reduce=e.sort=e.apply=e.add=void 0;const r=[];function n(t){r.push(t)}function o(t,e){for(let n,o=0;n=r[o];o++){const r=n.compare(t,e);if(0!==r)return r}return 0}function i(t){t.sort(o)}e.add=n,e.apply=o,e.sort=i,e.reduce=function(t){if(t.length<=1)return t;const e=t.slice();i(e);const r=[];let n;do{n=e.pop(),r.push(n)}while(n&&e.length&&0===o(e[e.length-1],n));return r};class s{constructor(t,e=null){this.comparator=t,this.type=e,n(this)}compare(t,e){return this.type&&this.type===t.type&&this.type===e.type?this.comparator(t,e):0}}e.SemanticComparator=s,new s((function(t,e){return"simple function"===t.role?1:"simple function"===e.role?-1:0}),"identifier")},5250:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticAbstractParser=void 0;const n=r(6537);e.SemanticAbstractParser=class{constructor(t){this.type=t,this.factory_=new n.SemanticNodeFactory}getFactory(){return this.factory_}setFactory(t){this.factory_=t}getType(){return this.type}parseList(t){const e=[];for(let r,n=0;r=t[n];n++)e.push(this.parse(r));return e}}},5609:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.isMembership=e.elligibleRightNeutral=e.elligibleLeftNeutral=e.compareNeutralFences=e.isNeutralFence=e.isImplicitOp=e.isImplicit=e.isPureUnit=e.isUnitCounter=e.isNumber=e.isSingletonSetContent=e.scriptedElement_=e.illegalSingleton_=e.isSetNode=e.isRightBrace=e.isLeftBrace=e.isSimpleFunction=e.singlePunctAtPosition=e.isSimpleFunctionHead=e.isLimitBase=e.isBinomial=e.lineIsLabelled=e.tableIsMultiline=e.tableIsCases=e.isFencedElement=e.tableIsMatrixOrVector=e.isTableOrMultiline=e.isElligibleEmbellishedFence=e.isFence=e.isPunctuation=e.isRelation=e.isOperator=e.isEmbellished=e.isGeneralFunctionBoundary=e.isIntegralDxBoundarySingle=e.isIntegralDxBoundary=e.isBigOpBoundary=e.isPrefixFunctionBoundary=e.isSimpleFunctionScope=e.isAccent=e.isRole=e.embellishedType=e.isType=void 0;const n=r(3588),o=r(4795);function i(t,e){return t.type===e}function s(t,e){return t.embellished===e}function a(t,e){return t.role===e}function l(t){return u(t)||p(t)}function c(t){return i(t,"operator")||s(t,"operator")}function u(t){return i(t,"relation")||s(t,"relation")}function p(t){return i(t,"punctuation")||s(t,"punctuation")}function h(t){return i(t,"fence")||s(t,"fence")}function f(t){return!t.embellished||!function(t){return i(t,"tensor")&&(!i(t.childNodes[1],"empty")||!i(t.childNodes[2],"empty"))&&(!i(t.childNodes[3],"empty")||!i(t.childNodes[4],"empty"))}(t)&&((!a(t,"close")||!i(t,"tensor"))&&((!a(t,"open")||!i(t,"subscript")&&!i(t,"superscript"))&&f(t.childNodes[0])))}function d(t){return!!t&&(i(t,"table")||i(t,"multiline"))}function m(t){return!!t&&i(t,"fenced")&&(a(t,"leftright")||v(t))&&1===t.childNodes.length}function y(t){return!!t&&-1!==["{","\ufe5b","\uff5b"].indexOf(t.textContent)}function g(t){return!!t&&-1!==["}","\ufe5c","\uff5d"].indexOf(t.textContent)}function b(t){return"number"===t.type&&("integer"===t.role||"float"===t.role)}function v(t){return"neutral"===t.role||"metric"===t.role}e.isType=i,e.embellishedType=s,e.isRole=a,e.isAccent=function(t){const e=new RegExp("\u221e|\u1ab2");return i(t,"fence")||i(t,"punctuation")||i(t,"operator")&&!t.textContent.match(e)||i(t,"relation")||i(t,"identifier")&&a(t,"unknown")&&!t.textContent.match(n.allLettersRegExp)&&!t.textContent.match(e)},e.isSimpleFunctionScope=function(t){const e=t.childNodes;if(0===e.length)return!0;if(e.length>1)return!1;const r=e[0];if("infixop"===r.type){if("implicit"!==r.role)return!1;if(r.childNodes.some((t=>i(t,"infixop"))))return!1}return!0},e.isPrefixFunctionBoundary=function(t){return c(t)&&!a(t,"division")||i(t,"appl")||l(t)},e.isBigOpBoundary=function(t){return c(t)||l(t)},e.isIntegralDxBoundary=function(t,e){return!!e&&i(e,"identifier")&&n.lookupSecondary("d",t.textContent)},e.isIntegralDxBoundarySingle=function(t){if(i(t,"identifier")){const e=t.textContent[0];return e&&t.textContent[1]&&n.lookupSecondary("d",e)}return!1},e.isGeneralFunctionBoundary=l,e.isEmbellished=function(t){return t.embellished?t.embellished:n.isEmbellishedType(t.type)?t.type:null},e.isOperator=c,e.isRelation=u,e.isPunctuation=p,e.isFence=h,e.isElligibleEmbellishedFence=function(t){return!(!t||!h(t))&&(!t.embellished||f(t))},e.isTableOrMultiline=d,e.tableIsMatrixOrVector=function(t){return!!t&&m(t)&&d(t.childNodes[0])},e.isFencedElement=m,e.tableIsCases=function(t,e){return e.length>0&&a(e[e.length-1],"openfence")},e.tableIsMultiline=function(t){return t.childNodes.every((function(t){return t.childNodes.length<=1}))},e.lineIsLabelled=function(t){return i(t,"line")&&t.contentNodes.length&&a(t.contentNodes[0],"label")},e.isBinomial=function(t){return 2===t.childNodes.length},e.isLimitBase=function t(e){return i(e,"largeop")||i(e,"limboth")||i(e,"limlower")||i(e,"limupper")||i(e,"function")&&a(e,"limit function")||(i(e,"overscore")||i(e,"underscore"))&&t(e.childNodes[0])},e.isSimpleFunctionHead=function(t){return"identifier"===t.type||"latinletter"===t.role||"greekletter"===t.role||"otherletter"===t.role},e.singlePunctAtPosition=function(t,e,r){return 1===e.length&&("punctuation"===t[r].type||"punctuation"===t[r].embellished)&&t[r]===e[0]},e.isSimpleFunction=function(t){return i(t,"identifier")&&a(t,"simple function")},e.isLeftBrace=y,e.isRightBrace=g,e.isSetNode=function(t){return y(t.contentNodes[0])&&g(t.contentNodes[1])},e.illegalSingleton_=["punctuation","punctuated","relseq","multirel","table","multiline","cases","inference"],e.scriptedElement_=["limupper","limlower","limboth","subscript","superscript","underscore","overscore","tensor"],e.isSingletonSetContent=function t(r){const n=r.type;return-1===e.illegalSingleton_.indexOf(n)&&("infixop"!==n||"implicit"===r.role)&&("fenced"===n?"leftright"!==r.role||t(r.childNodes[0]):-1===e.scriptedElement_.indexOf(n)||t(r.childNodes[0]))},e.isNumber=b,e.isUnitCounter=function(t){return b(t)||"vulgar"===t.role||"mixed"===t.role},e.isPureUnit=function(t){const e=t.childNodes;return"unit"===t.role&&(!e.length||"unit"===e[0].role)},e.isImplicit=function(t){return"implicit"===t.role||"unit"===t.role&&!!t.contentNodes.length&&t.contentNodes[0].textContent===n.invisibleTimes()},e.isImplicitOp=function(t){return"infixop"===t.type&&"implicit"===t.role},e.isNeutralFence=v,e.compareNeutralFences=function(t,e){return v(t)&&v(e)&&(0,o.getEmbellishedInner)(t).textContent===(0,o.getEmbellishedInner)(e).textContent},e.elligibleLeftNeutral=function(t){return!!v(t)&&(!t.embellished||"superscript"!==t.type&&"subscript"!==t.type&&("tensor"!==t.type||"empty"===t.childNodes[3].type&&"empty"===t.childNodes[4].type))},e.elligibleRightNeutral=function(t){return!!v(t)&&(!t.embellished||("tensor"!==t.type||"empty"===t.childNodes[1].type&&"empty"===t.childNodes[2].type))},e.isMembership=function(t){return["element","nonelement","reelement","renonelement"].includes(t.role)}},3308:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});const n=r(5740),o=r(3588),i=r(7516),s=r(6537),a=r(5609),l=r(4795);class c{constructor(){this.funcAppls={},this.factory_=new s.SemanticNodeFactory,i.updateFactory(this.factory_)}static getInstance(){return c.instance=c.instance||new c,c.instance}static tableToMultiline(t){if(a.tableIsMultiline(t)){t.type="multiline";for(let e,r=0;e=t.childNodes[r];r++)c.rowToLine_(e,"multiline");1===t.childNodes.length&&!a.lineIsLabelled(t.childNodes[0])&&a.isFencedElement(t.childNodes[0].childNodes[0])&&c.tableToMatrixOrVector_(c.rewriteFencedLine_(t)),c.binomialForm_(t),c.classifyMultiline(t)}else c.classifyTable(t)}static number(t){"unknown"!==t.type&&"identifier"!==t.type||(t.type="number"),c.numberRole_(t),c.exprFont_(t)}static classifyMultiline(t){let e=0;const r=t.childNodes.length;let n;for(;e<r&&(!(n=t.childNodes[e])||!n.childNodes.length);)e++;if(e>=r)return;const o=n.childNodes[0].role;"unknown"!==o&&t.childNodes.every((function(t){const e=t.childNodes[0];return!e||e.role===o&&(a.isType(e,"relation")||a.isType(e,"relseq"))}))&&(t.role=o)}static classifyTable(t){const e=c.computeColumns_(t);c.classifyByColumns_(t,e,"equality")||c.classifyByColumns_(t,e,"inequality",["equality"])||c.classifyByColumns_(t,e,"arrow")||c.detectCaleyTable(t)}static detectCaleyTable(t){if(!t.mathmlTree)return!1;const e=t.mathmlTree,r=e.getAttribute("columnlines"),n=e.getAttribute("rowlines");return!(!r||!n)&&(!(!c.cayleySpacing(r)||!c.cayleySpacing(n))&&(t.role="cayley",!0))}static cayleySpacing(t){const e=t.split(" ");return("solid"===e[0]||"dashed"===e[0])&&e.slice(1).every((t=>"none"===t))}static proof(t,e,r){const n=c.separateSemantics(e);return c.getInstance().proof(t,n,r)}static findSemantics(t,e,r){const n=null==r?null:r,o=c.getSemantics(t);return!!o&&(!!o[e]&&(null==n||o[e]===n))}static getSemantics(t){const e=t.getAttribute("semantics");return e?c.separateSemantics(e):null}static removePrefix(t){const[,...e]=t.split("_");return e.join("_")}static separateSemantics(t){const e={};return t.split(";").forEach((function(t){const[r,n]=t.split(":");e[c.removePrefix(r)]=n})),e}static matchSpaces_(t,e){for(let r,n=0;r=e[n];n++){const e=t[n].mathmlTree,o=t[n+1].mathmlTree;if(!e||!o)continue;const i=e.nextSibling;if(!i||i===o)continue;const s=c.getSpacer_(i);s&&(r.mathml.push(s),r.mathmlTree=s,r.role="space")}}static getSpacer_(t){if("MSPACE"===n.tagName(t))return t;for(;l.hasEmptyTag(t)&&1===t.childNodes.length;)if(t=t.childNodes[0],"MSPACE"===n.tagName(t))return t;return null}static fenceToPunct_(t){const e=c.FENCE_TO_PUNCT_[t.role];if(e){for(;t.embellished;)t.embellished="punctuation",a.isRole(t,"subsup")||a.isRole(t,"underover")||(t.role=e),t=t.childNodes[0];t.type="punctuation",t.role=e}}static classifyFunction_(t,e){if("appl"===t.type||"bigop"===t.type||"integral"===t.type)return"";if(e[0]&&e[0].textContent===o.functionApplication()){c.getInstance().funcAppls[t.id]=e.shift();let r="simple function";return i.run("simple2prefix",t),"prefix function"!==t.role&&"limit function"!==t.role||(r=t.role),c.propagateFunctionRole_(t,r),"prefix"}const r=c.CLASSIFY_FUNCTION_[t.role];return r||(a.isSimpleFunctionHead(t)?"simple":"")}static propagateFunctionRole_(t,e){if(t){if("infixop"===t.type)return;a.isRole(t,"subsup")||a.isRole(t,"underover")||(t.role=e),c.propagateFunctionRole_(t.childNodes[0],e)}}static getFunctionOp_(t,e){if(e(t))return t;for(let r,n=0;r=t.childNodes[n];n++){const t=c.getFunctionOp_(r,e);if(t)return t}return null}static tableToMatrixOrVector_(t){const e=t.childNodes[0];a.isType(e,"multiline")?c.tableToVector_(t):c.tableToMatrix_(t),t.contentNodes.forEach(e.appendContentNode.bind(e));for(let t,r=0;t=e.childNodes[r];r++)c.assignRoleToRow_(t,c.getComponentRoles_(e));return e.parent=null,e}static tableToVector_(t){const e=t.childNodes[0];e.type="vector",1!==e.childNodes.length?c.binomialForm_(e):c.tableToSquare_(t)}static binomialForm_(t){a.isBinomial(t)&&(t.role="binomial",t.childNodes[0].role="binomial",t.childNodes[1].role="binomial")}static tableToMatrix_(t){const e=t.childNodes[0];e.type="matrix",e.childNodes&&e.childNodes.length>0&&e.childNodes[0].childNodes&&e.childNodes.length===e.childNodes[0].childNodes.length?c.tableToSquare_(t):e.childNodes&&1===e.childNodes.length&&(e.role="rowvector")}static tableToSquare_(t){const e=t.childNodes[0];a.isNeutralFence(t)?e.role="determinant":e.role="squarematrix"}static getComponentRoles_(t){const e=t.role;return e&&"unknown"!==e?e:t.type.toLowerCase()||"unknown"}static tableToCases_(t,e){for(let e,r=0;e=t.childNodes[r];r++)c.assignRoleToRow_(e,"cases");return t.type="cases",t.appendContentNode(e),a.tableIsMultiline(t)&&c.binomialForm_(t),t}static rewriteFencedLine_(t){const e=t.childNodes[0],r=t.childNodes[0].childNodes[0],n=t.childNodes[0].childNodes[0].childNodes[0];return r.parent=t.parent,t.parent=r,n.parent=e,r.childNodes=[t],e.childNodes=[n],r}static rowToLine_(t,e){const r=e||"unknown";a.isType(t,"row")&&(t.type="line",t.role=r,1===t.childNodes.length&&a.isType(t.childNodes[0],"cell")&&(t.childNodes=t.childNodes[0].childNodes,t.childNodes.forEach((function(e){e.parent=t}))))}static assignRoleToRow_(t,e){a.isType(t,"line")?t.role=e:a.isType(t,"row")&&(t.role=e,t.childNodes.forEach((function(t){a.isType(t,"cell")&&(t.role=e)})))}static nextSeparatorFunction_(t){let e;if(t){if(t.match(/^\s+$/))return null;e=t.replace(/\s/g,"").split("").filter((function(t){return t}))}else e=[","];return function(){return e.length>1?e.shift():e[0]}}static numberRole_(t){if("unknown"!==t.role)return;const e=[...t.textContent].filter((t=>t.match(/[^\s]/))),r=e.map(o.lookupMeaning);if(r.every((function(t){return"number"===t.type&&"integer"===t.role||"punctuation"===t.type&&"comma"===t.role})))return t.role="integer",void("0"===e[0]&&t.addAnnotation("general","basenumber"));r.every((function(t){return"number"===t.type&&"integer"===t.role||"punctuation"===t.type}))?t.role="float":t.role="othernumber"}static exprFont_(t){if("unknown"!==t.font)return;const e=[...t.textContent].map(o.lookupMeaning).reduce((function(t,e){return t&&e.font&&"unknown"!==e.font&&e.font!==t?"unknown"===t?e.font:null:t}),"unknown");e&&(t.font=e)}static purgeFences_(t){const e=t.rel,r=t.comp,n=[],o=[];for(;e.length>0;){const t=e.shift();let i=r.shift();a.isElligibleEmbellishedFence(t)?(n.push(t),o.push(i)):(c.fenceToPunct_(t),i.push(t),i=i.concat(r.shift()),r.unshift(i))}return o.push(r.shift()),{rel:n,comp:o}}static rewriteFencedNode_(t){const e=t.contentNodes[0],r=t.contentNodes[1];let n=c.rewriteFence_(t,e);return t.contentNodes[0]=n.fence,n=c.rewriteFence_(n.node,r),t.contentNodes[1]=n.fence,t.contentNodes[0].parent=t,t.contentNodes[1].parent=t,n.node.parent=null,n.node}static rewriteFence_(t,e){if(!e.embellished)return{node:t,fence:e};const r=e.childNodes[0],n=c.rewriteFence_(t,r);return a.isType(e,"superscript")||a.isType(e,"subscript")||a.isType(e,"tensor")?(a.isRole(e,"subsup")||(e.role=t.role),r!==n.node&&(e.replaceChild(r,n.node),r.parent=t),c.propagateFencePointer_(e,r),{node:e,fence:n.fence}):(e.replaceChild(r,n.fence),e.mathmlTree&&-1===e.mathml.indexOf(e.mathmlTree)&&e.mathml.push(e.mathmlTree),{node:n.node,fence:e})}static propagateFencePointer_(t,e){t.fencePointer=e.fencePointer||e.id.toString(),t.embellished=null}static classifyByColumns_(t,e,r,n){return!!(3===e.length&&c.testColumns_(e,1,(t=>c.isPureRelation_(t,r)))||2===e.length&&(c.testColumns_(e,1,(t=>c.isEndRelation_(t,r)||c.isPureRelation_(t,r)))||c.testColumns_(e,0,(t=>c.isEndRelation_(t,r,!0)||c.isPureRelation_(t,r)))))&&(t.role=r,!0)}static isEndRelation_(t,e,r){const n=r?t.childNodes.length-1:0;return a.isType(t,"relseq")&&a.isRole(t,e)&&a.isType(t.childNodes[n],"empty")}static isPureRelation_(t,e){return a.isType(t,"relation")&&a.isRole(t,e)}static computeColumns_(t){const e=[];for(let r,n=0;r=t.childNodes[n];n++)for(let t,n=0;t=r.childNodes[n];n++){e[n]?e[n].push(t):e[n]=[t]}return e}static testColumns_(t,e,r){const n=t[e];return!!n&&(n.some((function(t){return t.childNodes.length&&r(t.childNodes[0])}))&&n.every((function(t){return!t.childNodes.length||r(t.childNodes[0])})))}setNodeFactory(t){c.getInstance().factory_=t,i.updateFactory(c.getInstance().factory_)}getNodeFactory(){return c.getInstance().factory_}identifierNode(t,e,r){if("MathML-Unit"===r)t.type="identifier",t.role="unit";else if(!e&&1===t.textContent.length&&("integer"===t.role||"latinletter"===t.role||"greekletter"===t.role)&&"normal"===t.font)return t.font="italic",i.run("simpleNamedFunction",t);return"unknown"===t.type&&(t.type="identifier"),c.exprFont_(t),i.run("simpleNamedFunction",t)}implicitNode(t){if(t=c.getInstance().getMixedNumbers_(t),1===(t=c.getInstance().combineUnits_(t)).length)return t[0];const e=c.getInstance().implicitNode_(t);return i.run("combine_juxtaposition",e)}text(t,e){return c.exprFont_(t),t.type="text","MS"===e?(t.role="string",t):"MSPACE"===e||t.textContent.match(/^\s*$/)?(t.role="space",t):t}row(t){return 0===(t=t.filter((function(t){return!a.isType(t,"empty")}))).length?c.getInstance().factory_.makeEmptyNode():(t=c.getInstance().getFencesInRow_(t),t=c.getInstance().tablesInRow(t),t=c.getInstance().getPunctuationInRow_(t),t=c.getInstance().getTextInRow_(t),t=c.getInstance().getFunctionsInRow_(t),c.getInstance().relationsInRow_(t))}limitNode(t,e){if(!e.length)return c.getInstance().factory_.makeEmptyNode();let r,n=e[0],o="unknown";if(!e[1])return n;if(a.isLimitBase(n)){r=c.MML_TO_LIMIT_[t];const i=r.length;if(o=r.type,e=e.slice(0,r.length+1),1===i&&a.isAccent(e[1])||2===i&&a.isAccent(e[1])&&a.isAccent(e[2]))return r=c.MML_TO_BOUNDS_[t],c.getInstance().accentNode_(n,e,r.type,r.length,r.accent);if(2===i){if(a.isAccent(e[1]))return n=c.getInstance().accentNode_(n,[n,e[1]],{MSUBSUP:"subscript",MUNDEROVER:"underscore"}[t],1,!0),e[2]?c.getInstance().makeLimitNode_(n,[n,e[2]],null,"limupper"):n;if(e[2]&&a.isAccent(e[2]))return n=c.getInstance().accentNode_(n,[n,e[2]],{MSUBSUP:"superscript",MUNDEROVER:"overscore"}[t],1,!0),c.getInstance().makeLimitNode_(n,[n,e[1]],null,"limlower");e[i]||(o="limlower")}return c.getInstance().makeLimitNode_(n,e,null,o)}return r=c.MML_TO_BOUNDS_[t],c.getInstance().accentNode_(n,e,r.type,r.length,r.accent)}tablesInRow(t){let e=l.partitionNodes(t,a.tableIsMatrixOrVector),r=[];for(let t,n=0;t=e.rel[n];n++)r=r.concat(e.comp.shift()),r.push(c.tableToMatrixOrVector_(t));r=r.concat(e.comp.shift()),e=l.partitionNodes(r,a.isTableOrMultiline),r=[];for(let t,n=0;t=e.rel[n];n++){const n=e.comp.shift();a.tableIsCases(t,n)&&c.tableToCases_(t,n.pop()),r=r.concat(n),r.push(t)}return r.concat(e.comp.shift())}mfenced(t,e,r,n){if(r&&n.length>0){const t=c.nextSeparatorFunction_(r),e=[n.shift()];n.forEach((r=>{e.push(c.getInstance().factory_.makeContentNode(t())),e.push(r)})),n=e}return t&&e?c.getInstance().horizontalFencedNode_(c.getInstance().factory_.makeContentNode(t),c.getInstance().factory_.makeContentNode(e),n):(t&&n.unshift(c.getInstance().factory_.makeContentNode(t)),e&&n.push(c.getInstance().factory_.makeContentNode(e)),c.getInstance().row(n))}fractionLikeNode(t,e,r,n){let o;if(!n&&l.isZeroLength(r)){const r=c.getInstance().factory_.makeBranchNode("line",[t],[]),n=c.getInstance().factory_.makeBranchNode("line",[e],[]);return o=c.getInstance().factory_.makeBranchNode("multiline",[r,n],[]),c.binomialForm_(o),c.classifyMultiline(o),o}return o=c.getInstance().fractionNode_(t,e),n&&o.addAnnotation("general","bevelled"),o}tensor(t,e,r,n,o){const i=c.getInstance().factory_.makeBranchNode("tensor",[t,c.getInstance().scriptNode_(e,"leftsub"),c.getInstance().scriptNode_(r,"leftsuper"),c.getInstance().scriptNode_(n,"rightsub"),c.getInstance().scriptNode_(o,"rightsuper")],[]);return i.role=t.role,i.embellished=a.isEmbellished(t),i}pseudoTensor(t,e,r){const n=t=>!a.isType(t,"empty"),o=e.filter(n).length,i=r.filter(n).length;if(!o&&!i)return t;const s=o?i?"MSUBSUP":"MSUB":"MSUP",l=[t];return o&&l.push(c.getInstance().scriptNode_(e,"rightsub",!0)),i&&l.push(c.getInstance().scriptNode_(r,"rightsuper",!0)),c.getInstance().limitNode(s,l)}font(t){const e=c.MATHJAX_FONTS[t];return e||t}proof(t,e,r){if(e.inference||e.axiom||console.log("Noise"),e.axiom){const e=c.getInstance().cleanInference(t.childNodes),n=e.length?c.getInstance().factory_.makeBranchNode("inference",r(e),[]):c.getInstance().factory_.makeEmptyNode();return n.role="axiom",n.mathmlTree=t,n}const n=c.getInstance().inference(t,e,r);return e.proof&&(n.role="proof",n.childNodes[0].role="final"),n}inference(t,e,r){if(e.inferenceRule){const e=c.getInstance().getFormulas(t,[],r);return c.getInstance().factory_.makeBranchNode("inference",[e.conclusion,e.premises],[])}const o=e.labelledRule,i=n.toArray(t.childNodes),s=[];"left"!==o&&"both"!==o||s.push(c.getInstance().getLabel(t,i,r,"left")),"right"!==o&&"both"!==o||s.push(c.getInstance().getLabel(t,i,r,"right"));const a=c.getInstance().getFormulas(t,i,r),l=c.getInstance().factory_.makeBranchNode("inference",[a.conclusion,a.premises],s);return l.mathmlTree=t,l}getLabel(t,e,r,o){const i=c.getInstance().findNestedRow(e,"prooflabel",o),s=c.getInstance().factory_.makeBranchNode("rulelabel",r(n.toArray(i.childNodes)),[]);return s.role=o,s.mathmlTree=i,s}getFormulas(t,e,r){const o=e.length?c.getInstance().findNestedRow(e,"inferenceRule"):t,i="up"===c.getSemantics(o).inferenceRule,s=i?o.childNodes[1]:o.childNodes[0],a=i?o.childNodes[0]:o.childNodes[1],l=s.childNodes[0].childNodes[0],u=n.toArray(l.childNodes[0].childNodes),p=[];let h=1;for(const t of u)h%2&&p.push(t.childNodes[0]),h++;const f=r(p),d=r(n.toArray(a.childNodes[0].childNodes))[0],m=c.getInstance().factory_.makeBranchNode("premises",f,[]);m.mathmlTree=l;const y=c.getInstance().factory_.makeBranchNode("conclusion",[d],[]);return y.mathmlTree=a.childNodes[0].childNodes[0],{conclusion:y,premises:m}}findNestedRow(t,e,r){return c.getInstance().findNestedRow_(t,e,0,r)}cleanInference(t){return n.toArray(t).filter((function(t){return"MSPACE"!==n.tagName(t)}))}operatorNode(t){return"unknown"===t.type&&(t.type="operator"),i.run("multioperator",t)}implicitNode_(t){const e=c.getInstance().factory_.makeMultipleContentNodes(t.length-1,o.invisibleTimes());c.matchSpaces_(t,e);const r=c.getInstance().infixNode_(t,e[0]);return r.role="implicit",e.forEach((function(t){t.parent=r})),r.contentNodes=e,r}infixNode_(t,e){const r=c.getInstance().factory_.makeBranchNode("infixop",t,[e],l.getEmbellishedInner(e).textContent);return r.role=e.role,i.run("propagateSimpleFunction",r)}explicitMixed_(t){const e=l.partitionNodes(t,(function(t){return t.textContent===o.invisiblePlus()}));if(!e.rel.length)return t;let r=[];for(let t,n=0;t=e.rel[n];n++){const o=e.comp[n],i=e.comp[n+1],s=o.length-1;if(o[s]&&i[0]&&a.isType(o[s],"number")&&!a.isRole(o[s],"mixed")&&a.isType(i[0],"fraction")){const t=c.getInstance().factory_.makeBranchNode("number",[o[s],i[0]],[]);t.role="mixed",r=r.concat(o.slice(0,s)),r.push(t),i.shift()}else r=r.concat(o),r.push(t)}return r.concat(e.comp[e.comp.length-1])}concatNode_(t,e,r){if(0===e.length)return t;const n=e.map((function(t){return l.getEmbellishedInner(t).textContent})).join(" "),o=c.getInstance().factory_.makeBranchNode(r,[t],e,n);return e.length>1&&(o.role="multiop"),o}prefixNode_(t,e){const r=l.partitionNodes(e,(t=>a.isRole(t,"subtraction")));let n=c.getInstance().concatNode_(t,r.comp.pop(),"prefixop");for(1===n.contentNodes.length&&"addition"===n.contentNodes[0].role&&"+"===n.contentNodes[0].textContent&&(n.role="positive");r.rel.length>0;)n=c.getInstance().concatNode_(n,[r.rel.pop()],"prefixop"),n.role="negative",n=c.getInstance().concatNode_(n,r.comp.pop(),"prefixop");return n}postfixNode_(t,e){return e.length?c.getInstance().concatNode_(t,e,"postfixop"):t}combineUnits_(t){const e=l.partitionNodes(t,(function(t){return!a.isRole(t,"unit")}));if(t.length===e.rel.length)return e.rel;const r=[];let n,o;do{const t=e.comp.shift();n=e.rel.shift();let i=null;o=r.pop(),o&&(t.length&&a.isUnitCounter(o)?t.unshift(o):r.push(o)),1===t.length&&(i=t.pop()),t.length>1&&(i=c.getInstance().implicitNode_(t),i.role="unit"),i&&r.push(i),n&&r.push(n)}while(n);return r}getMixedNumbers_(t){const e=l.partitionNodes(t,(function(t){return a.isType(t,"fraction")&&a.isRole(t,"vulgar")}));if(!e.rel.length)return t;let r=[];for(let t,n=0;t=e.rel[n];n++){const o=e.comp[n],i=o.length-1;if(o[i]&&a.isType(o[i],"number")&&(a.isRole(o[i],"integer")||a.isRole(o[i],"float"))){const e=c.getInstance().factory_.makeBranchNode("number",[o[i],t],[]);e.role="mixed",r=r.concat(o.slice(0,i)),r.push(e)}else r=r.concat(o),r.push(t)}return r.concat(e.comp[e.comp.length-1])}getTextInRow_(t){if(t.length<=1)return t;const e=l.partitionNodes(t,(t=>a.isType(t,"text")));if(0===e.rel.length)return t;const r=[];let n=e.comp[0];n.length>0&&r.push(c.getInstance().row(n));for(let t,o=0;t=e.rel[o];o++)r.push(t),n=e.comp[o+1],n.length>0&&r.push(c.getInstance().row(n));return[c.getInstance().dummyNode_(r)]}relationsInRow_(t){const e=l.partitionNodes(t,a.isRelation),r=e.rel[0];if(!r)return c.getInstance().operationsInRow_(t);if(1===t.length)return t[0];const n=e.comp.map(c.getInstance().operationsInRow_);let o;return e.rel.some((function(t){return!t.equals(r)}))?(o=c.getInstance().factory_.makeBranchNode("multirel",n,e.rel),e.rel.every((function(t){return t.role===r.role}))&&(o.role=r.role),o):(o=c.getInstance().factory_.makeBranchNode("relseq",n,e.rel,l.getEmbellishedInner(r).textContent),o.role=r.role,o)}operationsInRow_(t){if(0===t.length)return c.getInstance().factory_.makeEmptyNode();if(1===(t=c.getInstance().explicitMixed_(t)).length)return t[0];const e=[];for(;t.length>0&&a.isOperator(t[0]);)e.push(t.shift());if(0===t.length)return c.getInstance().prefixNode_(e.pop(),e);if(1===t.length)return c.getInstance().prefixNode_(t[0],e);t=i.run("convert_juxtaposition",t);const r=l.sliceNodes(t,a.isOperator),n=c.getInstance().prefixNode_(c.getInstance().implicitNode(r.head),e);return r.div?c.getInstance().operationsTree_(r.tail,n,r.div):n}operationsTree_(t,e,r,n){const o=n||[];if(0===t.length){if(o.unshift(r),"infixop"===e.type){const t=c.getInstance().postfixNode_(e.childNodes.pop(),o);return e.appendChild(t),e}return c.getInstance().postfixNode_(e,o)}const i=l.sliceNodes(t,a.isOperator);if(0===i.head.length)return o.push(i.div),c.getInstance().operationsTree_(i.tail,e,r,o);const s=c.getInstance().prefixNode_(c.getInstance().implicitNode(i.head),o),u=c.getInstance().appendOperand_(e,r,s);return i.div?c.getInstance().operationsTree_(i.tail,u,i.div,[]):u}appendOperand_(t,e,r){if("infixop"!==t.type)return c.getInstance().infixNode_([t,r],e);const n=c.getInstance().appendDivisionOp_(t,e,r);return n||(c.getInstance().appendExistingOperator_(t,e,r)?t:"multiplication"===e.role?c.getInstance().appendMultiplicativeOp_(t,e,r):c.getInstance().appendAdditiveOp_(t,e,r))}appendDivisionOp_(t,e,r){return"division"===e.role?a.isImplicit(t)?c.getInstance().infixNode_([t,r],e):c.getInstance().appendLastOperand_(t,e,r):"division"===t.role?c.getInstance().infixNode_([t,r],e):null}appendLastOperand_(t,e,r){let n=t,o=t.childNodes[t.childNodes.length-1];for(;o&&"infixop"===o.type&&!a.isImplicit(o);)n=o,o=n.childNodes[t.childNodes.length-1];const i=c.getInstance().infixNode_([n.childNodes.pop(),r],e);return n.appendChild(i),t}appendMultiplicativeOp_(t,e,r){if(a.isImplicit(t))return c.getInstance().infixNode_([t,r],e);let n=t,o=t.childNodes[t.childNodes.length-1];for(;o&&"infixop"===o.type&&!a.isImplicit(o);)n=o,o=n.childNodes[t.childNodes.length-1];const i=c.getInstance().infixNode_([n.childNodes.pop(),r],e);return n.appendChild(i),t}appendAdditiveOp_(t,e,r){return c.getInstance().infixNode_([t,r],e)}appendExistingOperator_(t,e,r){return!(!t||"infixop"!==t.type||a.isImplicit(t))&&(t.contentNodes[0].equals(e)?(t.appendContentNode(e),t.appendChild(r),!0):c.getInstance().appendExistingOperator_(t.childNodes[t.childNodes.length-1],e,r))}getFencesInRow_(t){let e=l.partitionNodes(t,a.isFence);e=c.purgeFences_(e);const r=e.comp.shift();return c.getInstance().fences_(e.rel,e.comp,[],[r])}fences_(t,e,r,n){if(0===t.length&&0===r.length)return n[0];const o=t=>a.isRole(t,"open");if(0===t.length){const t=n.shift();for(;r.length>0;){if(o(r[0])){const e=r.shift();c.fenceToPunct_(e),t.push(e)}else{const e=l.sliceNodes(r,o),i=e.head.length-1,s=c.getInstance().neutralFences_(e.head,n.slice(0,i));n=n.slice(i),t.push(...s),e.div&&e.tail.unshift(e.div),r=e.tail}t.push(...n.shift())}return t}const i=r[r.length-1],s=t[0].role;if("open"===s||a.isNeutralFence(t[0])&&(!i||!a.compareNeutralFences(t[0],i))){r.push(t.shift());const o=e.shift();return o&&n.push(o),c.getInstance().fences_(t,e,r,n)}if(i&&"close"===s&&"open"===i.role){const o=c.getInstance().horizontalFencedNode_(r.pop(),t.shift(),n.pop());return n.push(n.pop().concat([o],e.shift())),c.getInstance().fences_(t,e,r,n)}if(i&&a.compareNeutralFences(t[0],i)){if(!a.elligibleLeftNeutral(i)||!a.elligibleRightNeutral(t[0])){r.push(t.shift());const o=e.shift();return o&&n.push(o),c.getInstance().fences_(t,e,r,n)}const o=c.getInstance().horizontalFencedNode_(r.pop(),t.shift(),n.pop());return n.push(n.pop().concat([o],e.shift())),c.getInstance().fences_(t,e,r,n)}if(i&&"close"===s&&a.isNeutralFence(i)&&r.some(o)){const i=l.sliceNodes(r,o,!0),s=n.pop(),a=n.length-i.tail.length+1,u=c.getInstance().neutralFences_(i.tail,n.slice(a));n=n.slice(0,a);const p=c.getInstance().horizontalFencedNode_(i.div,t.shift(),n.pop().concat(u,s));return n.push(n.pop().concat([p],e.shift())),c.getInstance().fences_(t,e,i.head,n)}const u=t.shift();return c.fenceToPunct_(u),n.push(n.pop().concat([u],e.shift())),c.getInstance().fences_(t,e,r,n)}neutralFences_(t,e){if(0===t.length)return t;if(1===t.length)return c.fenceToPunct_(t[0]),t;const r=t.shift();if(!a.elligibleLeftNeutral(r)){c.fenceToPunct_(r);const n=e.shift();return n.unshift(r),n.concat(c.getInstance().neutralFences_(t,e))}const n=l.sliceNodes(t,(function(t){return a.compareNeutralFences(t,r)}));if(!n.div){c.fenceToPunct_(r);const n=e.shift();return n.unshift(r),n.concat(c.getInstance().neutralFences_(t,e))}if(!a.elligibleRightNeutral(n.div))return c.fenceToPunct_(n.div),t.unshift(r),c.getInstance().neutralFences_(t,e);const o=c.getInstance().combineFencedContent_(r,n.div,n.head,e);if(n.tail.length>0){const t=o.shift(),e=c.getInstance().neutralFences_(n.tail,o);return t.concat(e)}return o[0]}combineFencedContent_(t,e,r,n){if(0===r.length){const r=c.getInstance().horizontalFencedNode_(t,e,n.shift());return n.length>0?n[0].unshift(r):n=[[r]],n}const o=n.shift(),i=r.length-1,s=n.slice(0,i),a=(n=n.slice(i)).shift(),l=c.getInstance().neutralFences_(r,s);o.push(...l),o.push(...a);const u=c.getInstance().horizontalFencedNode_(t,e,o);return n.length>0?n[0].unshift(u):n=[[u]],n}horizontalFencedNode_(t,e,r){const n=c.getInstance().row(r);let o=c.getInstance().factory_.makeBranchNode("fenced",[n],[t,e]);return"open"===t.role?(c.getInstance().classifyHorizontalFence_(o),o=i.run("propagateComposedFunction",o)):o.role=t.role,o=i.run("detect_cycle",o),c.rewriteFencedNode_(o)}classifyHorizontalFence_(t){t.role="leftright";const e=t.childNodes;if(!a.isSetNode(t)||e.length>1)return;if(0===e.length||"empty"===e[0].type)return void(t.role="set empty");const r=e[0].type;if(1===e.length&&a.isSingletonSetContent(e[0]))return void(t.role="set singleton");const n=e[0].role;if("punctuated"===r&&"sequence"===n){if("comma"!==e[0].contentNodes[0].role)return 1!==e[0].contentNodes.length||"vbar"!==e[0].contentNodes[0].role&&"colon"!==e[0].contentNodes[0].role?void 0:(t.role="set extended",void c.getInstance().setExtension_(t));t.role="set collection"}}setExtension_(t){const e=t.childNodes[0].childNodes[0];e&&"infixop"===e.type&&1===e.contentNodes.length&&a.isMembership(e.contentNodes[0])&&(e.addAnnotation("set","intensional"),e.contentNodes[0].addAnnotation("set","intensional"))}getPunctuationInRow_(t){if(t.length<=1)return t;const e=t=>{const e=t.type;return"punctuation"===e||"text"===e||"operator"===e||"relation"===e},r=l.partitionNodes(t,(function(r){if(!a.isPunctuation(r))return!1;if(a.isPunctuation(r)&&!a.isRole(r,"ellipsis"))return!0;const n=t.indexOf(r);if(0===n)return!t[1]||!e(t[1]);const o=t[n-1];if(n===t.length-1)return!e(o);const i=t[n+1];return!e(o)||!e(i)}));if(0===r.rel.length)return t;const n=[];let o=r.comp.shift();o.length>0&&n.push(c.getInstance().row(o));let i=0;for(;r.comp.length>0;)n.push(r.rel[i++]),o=r.comp.shift(),o.length>0&&n.push(c.getInstance().row(o));return[c.getInstance().punctuatedNode_(n,r.rel)]}punctuatedNode_(t,e){const r=c.getInstance().factory_.makeBranchNode("punctuated",t,e);if(e.length===t.length){const t=e[0].role;if("unknown"!==t&&e.every((function(e){return e.role===t})))return r.role=t,r}return a.singlePunctAtPosition(t,e,0)?r.role="startpunct":a.singlePunctAtPosition(t,e,t.length-1)?r.role="endpunct":e.every((t=>a.isRole(t,"dummy")))?r.role="text":e.every((t=>a.isRole(t,"space")))?r.role="space":r.role="sequence",r}dummyNode_(t){const e=c.getInstance().factory_.makeMultipleContentNodes(t.length-1,o.invisibleComma());return e.forEach((function(t){t.role="dummy"})),c.getInstance().punctuatedNode_(t,e)}accentRole_(t,e){if(!a.isAccent(t))return!1;const r=t.textContent,n=o.lookupSecondary("bar",r)||o.lookupSecondary("tilde",r)||t.role;return t.role="underscore"===e?"underaccent":"overaccent",t.addAnnotation("accent",n),!0}accentNode_(t,e,r,n,o){const i=(e=e.slice(0,n+1))[1],s=e[2];let a;if(!o&&s&&(a=c.getInstance().factory_.makeBranchNode("subscript",[t,i],[]),a.role="subsup",e=[a,s],r="superscript"),o){const n=c.getInstance().accentRole_(i,r);if(s){c.getInstance().accentRole_(s,"overscore")&&!n?(a=c.getInstance().factory_.makeBranchNode("overscore",[t,s],[]),e=[a,i],r="underscore"):(a=c.getInstance().factory_.makeBranchNode("underscore",[t,i],[]),e=[a,s],r="overscore"),a.role="underover"}}return c.getInstance().makeLimitNode_(t,e,a,r)}makeLimitNode_(t,e,r,n){if("limupper"===n&&"limlower"===t.type)return t.childNodes.push(e[1]),e[1].parent=t,t.type="limboth",t;if("limlower"===n&&"limupper"===t.type)return t.childNodes.splice(1,-1,e[1]),e[1].parent=t,t.type="limboth",t;const o=c.getInstance().factory_.makeBranchNode(n,e,[]),i=a.isEmbellished(t);return r&&(r.embellished=i),o.embellished=i,o.role=t.role,o}getFunctionsInRow_(t,e){const r=e||[];if(0===t.length)return r;const n=t.shift(),o=c.classifyFunction_(n,t);if(!o)return r.push(n),c.getInstance().getFunctionsInRow_(t,r);const i=c.getInstance().getFunctionsInRow_(t,[]),s=c.getInstance().getFunctionArgs_(n,i,o);return r.concat(s)}getFunctionArgs_(t,e,r){let n,o,i;switch(r){case"integral":{const r=c.getInstance().getIntegralArgs_(e);if(!r.intvar&&!r.integrand.length)return r.rest.unshift(t),r.rest;const n=c.getInstance().row(r.integrand);return i=c.getInstance().integralNode_(t,n,r.intvar),r.rest.unshift(i),r.rest}case"prefix":if(e[0]&&"fenced"===e[0].type){const r=e.shift();return a.isNeutralFence(r)||(r.role="leftright"),i=c.getInstance().functionNode_(t,r),e.unshift(i),e}if(n=l.sliceNodes(e,a.isPrefixFunctionBoundary),n.head.length)o=c.getInstance().row(n.head),n.div&&n.tail.unshift(n.div);else{if(!n.div||!a.isType(n.div,"appl"))return e.unshift(t),e;o=n.div}return i=c.getInstance().functionNode_(t,o),n.tail.unshift(i),n.tail;case"bigop":return n=l.sliceNodes(e,a.isBigOpBoundary),n.head.length?(o=c.getInstance().row(n.head),i=c.getInstance().bigOpNode_(t,o),n.div&&n.tail.unshift(n.div),n.tail.unshift(i),n.tail):(e.unshift(t),e);default:{if(0===e.length)return[t];const r=e[0];return"fenced"===r.type&&!a.isNeutralFence(r)&&a.isSimpleFunctionScope(r)?(r.role="leftright",c.propagateFunctionRole_(t,"simple function"),i=c.getInstance().functionNode_(t,e.shift()),e.unshift(i),e):(e.unshift(t),e)}}}getIntegralArgs_(t,e=[]){if(0===t.length)return{integrand:e,intvar:null,rest:t};const r=t[0];if(a.isGeneralFunctionBoundary(r))return{integrand:e,intvar:null,rest:t};if(a.isIntegralDxBoundarySingle(r))return r.role="integral",{integrand:e,intvar:r,rest:t.slice(1)};if(t[1]&&a.isIntegralDxBoundary(r,t[1])){const n=c.getInstance().prefixNode_(t[1],[r]);return n.role="integral",{integrand:e,intvar:n,rest:t.slice(2)}}return e.push(t.shift()),c.getInstance().getIntegralArgs_(t,e)}functionNode_(t,e){const r=c.getInstance().factory_.makeContentNode(o.functionApplication()),n=c.getInstance().funcAppls[t.id];n&&(r.mathmlTree=n.mathmlTree,r.mathml=n.mathml,r.annotation=n.annotation,r.attributes=n.attributes,delete c.getInstance().funcAppls[t.id]),r.type="punctuation",r.role="application";const i=c.getFunctionOp_(t,(function(t){return a.isType(t,"function")||a.isType(t,"identifier")&&a.isRole(t,"simple function")}));return c.getInstance().functionalNode_("appl",[t,e],i,[r])}bigOpNode_(t,e){const r=c.getFunctionOp_(t,(t=>a.isType(t,"largeop")));return c.getInstance().functionalNode_("bigop",[t,e],r,[])}integralNode_(t,e,r){e=e||c.getInstance().factory_.makeEmptyNode(),r=r||c.getInstance().factory_.makeEmptyNode();const n=c.getFunctionOp_(t,(t=>a.isType(t,"largeop")));return c.getInstance().functionalNode_("integral",[t,e,r],n,[])}functionalNode_(t,e,r,n){const o=e[0];let i;r&&(i=r.parent,n.push(r));const s=c.getInstance().factory_.makeBranchNode(t,e,n);return s.role=o.role,i&&(r.parent=i),s}fractionNode_(t,e){const r=c.getInstance().factory_.makeBranchNode("fraction",[t,e],[]);return r.role=r.childNodes.every((function(t){return a.isType(t,"number")&&a.isRole(t,"integer")}))?"vulgar":r.childNodes.every(a.isPureUnit)?"unit":"division",i.run("propagateSimpleFunction",r)}scriptNode_(t,e,r){let n;switch(t.length){case 0:n=c.getInstance().factory_.makeEmptyNode();break;case 1:if(n=t[0],r)return n;break;default:n=c.getInstance().dummyNode_(t)}return n.role=e,n}findNestedRow_(t,e,r,o){if(r>3)return null;for(let i,s=0;i=t[s];s++){const t=n.tagName(i);if("MSPACE"!==t){if("MROW"===t)return c.getInstance().findNestedRow_(n.toArray(i.childNodes),e,r+1,o);if(c.findSemantics(i,e,o))return i}}return null}}e.default=c,c.FENCE_TO_PUNCT_={metric:"metric",neutral:"vbar",open:"openfence",close:"closefence"},c.MML_TO_LIMIT_={MSUB:{type:"limlower",length:1},MUNDER:{type:"limlower",length:1},MSUP:{type:"limupper",length:1},MOVER:{type:"limupper",length:1},MSUBSUP:{type:"limboth",length:2},MUNDEROVER:{type:"limboth",length:2}},c.MML_TO_BOUNDS_={MSUB:{type:"subscript",length:1,accent:!1},MSUP:{type:"superscript",length:1,accent:!1},MSUBSUP:{type:"subscript",length:2,accent:!1},MUNDER:{type:"underscore",length:1,accent:!0},MOVER:{type:"overscore",length:1,accent:!0},MUNDEROVER:{type:"underscore",length:2,accent:!0}},c.CLASSIFY_FUNCTION_={integral:"integral",sum:"bigop","prefix function":"prefix","limit function":"prefix","simple function":"prefix","composed function":"prefix"},c.MATHJAX_FONTS={"-tex-caligraphic":"caligraphic","-tex-caligraphic-bold":"caligraphic-bold","-tex-calligraphic":"caligraphic","-tex-calligraphic-bold":"caligraphic-bold","-tex-oldstyle":"oldstyle","-tex-oldstyle-bold":"oldstyle-bold","-tex-mathit":"italic"}},5656:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticSkeleton=void 0;const n=r(707),o=r(5274),i=r(2298);class s{constructor(t){this.parents=null,this.levelsMap=null,t=0===t?t:t||[],this.array=t}static fromTree(t){return s.fromNode(t.root)}static fromNode(t){return new s(s.fromNode_(t))}static fromString(t){return new s(s.fromString_(t))}static simpleCollapseStructure(t){return"number"==typeof t}static contentCollapseStructure(t){return!!t&&!s.simpleCollapseStructure(t)&&"c"===t[0]}static interleaveIds(t,e){return n.interleaveLists(s.collapsedLeafs(t),s.collapsedLeafs(e))}static collapsedLeafs(...t){return t.reduce(((t,e)=>{return t.concat((r=e,s.simpleCollapseStructure(r)?[r]:(r=r,s.contentCollapseStructure(r[1])?r.slice(2):r.slice(1))));var r}),[])}static fromStructure(t,e){return new s(s.tree_(t,e.root))}static combineContentChildren(t,e,r){switch(t.type){case"relseq":case"infixop":case"multirel":return n.interleaveLists(r,e);case"prefixop":return e.concat(r);case"postfixop":return r.concat(e);case"fenced":return r.unshift(e[0]),r.push(e[1]),r;case"appl":return[r[0],e[0],r[1]];case"root":return[r[1],r[0]];case"row":case"line":return e.length&&r.unshift(e[0]),r;default:return r}}static makeSexp_(t){return s.simpleCollapseStructure(t)?t.toString():s.contentCollapseStructure(t)?"(c "+t.slice(1).map(s.makeSexp_).join(" ")+")":"("+t.map(s.makeSexp_).join(" ")+")"}static fromString_(t){let e=t.replace(/\(/g,"[");return e=e.replace(/\)/g,"]"),e=e.replace(/ /g,","),e=e.replace(/c/g,'"c"'),JSON.parse(e)}static fromNode_(t){if(!t)return[];const e=t.contentNodes;let r;e.length&&(r=e.map(s.fromNode_),r.unshift("c"));const n=t.childNodes;if(!n.length)return e.length?[t.id,r]:t.id;const o=n.map(s.fromNode_);return e.length&&o.unshift(r),o.unshift(t.id),o}static tree_(t,e){if(!e)return[];if(!e.childNodes.length)return e.id;const r=e.id,n=[r],a=o.evalXPath(`.//self::*[@${i.Attribute.ID}=${r}]`,t)[0],l=s.combineContentChildren(e,e.contentNodes.map((function(t){return t})),e.childNodes.map((function(t){return t})));a&&s.addOwns_(a,l);for(let e,r=0;e=l[r];r++)n.push(s.tree_(t,e));return n}static addOwns_(t,e){const r=t.getAttribute(i.Attribute.COLLAPSED),n=r?s.realLeafs_(s.fromString(r).array):e.map((t=>t.id));t.setAttribute(i.Attribute.OWNS,n.join(" "))}static realLeafs_(t){if(s.simpleCollapseStructure(t))return[t];if(s.contentCollapseStructure(t))return[];t=t;let e=[];for(let r=1;r<t.length;r++)e=e.concat(s.realLeafs_(t[r]));return e}populate(){this.parents&&this.levelsMap||(this.parents={},this.levelsMap={},this.populate_(this.array,this.array,[]))}toString(){return s.makeSexp_(this.array)}populate_(t,e,r){if(s.simpleCollapseStructure(t))return t=t,this.levelsMap[t]=e,void(this.parents[t]=t===r[0]?r.slice(1):r);const n=s.contentCollapseStructure(t)?t.slice(1):t,o=[n[0]].concat(r);for(let e=0,r=n.length;e<r;e++){const r=n[e];this.populate_(r,t,o)}}isRoot(t){return t===this.levelsMap[t][0]}directChildren(t){if(!this.isRoot(t))return[];return this.levelsMap[t].slice(1).map((t=>s.simpleCollapseStructure(t)?t:s.contentCollapseStructure(t)?t[1]:t[0]))}subtreeNodes(t){if(!this.isRoot(t))return[];const e=(t,r)=>{s.simpleCollapseStructure(t)?r.push(t):(t=t,s.contentCollapseStructure(t)&&(t=t.slice(1)),t.forEach((t=>e(t,r))))},r=this.levelsMap[t],n=[];return e(r.slice(1),n),n}}e.SemanticSkeleton=s},7075:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTree=void 0;const n=r(5740),o=r(7630),i=r(9265),s=r(7228),a=r(5952),l=r(5609);r(94);class c{constructor(t){this.mathml=t,this.parser=new s.SemanticMathml,this.root=this.parser.parse(t),this.collator=this.parser.getFactory().leafMap.collateMeaning();const e=this.collator.newDefault();e&&(this.parser=new s.SemanticMathml,this.parser.getFactory().defaultMap=e,this.root=this.parser.parse(t)),u.visit(this.root,{}),(0,o.annotate)(this.root)}static empty(){const t=n.parseInput("<math/>"),e=new c(t);return e.mathml=t,e}static fromNode(t,e){const r=c.empty();return r.root=t,e&&(r.mathml=e),r}static fromRoot(t,e){let r=t;for(;r.parent;)r=r.parent;const n=c.fromNode(r);return e&&(n.mathml=e),n}static fromXml(t){const e=c.empty();return t.childNodes[0]&&(e.root=a.SemanticNode.fromXml(t.childNodes[0])),e}xml(t){const e=n.parseInput("<stree></stree>"),r=this.root.xml(e.ownerDocument,t);return e.appendChild(r),e}toString(t){return n.serializeXml(this.xml(t))}formatXml(t){const e=this.toString(t);return n.formatXml(e)}displayTree(){this.root.displayTree()}replaceNode(t,e){const r=t.parent;r?r.replaceChild(t,e):this.root=e}toJson(){const t={};return t.stree=this.root.toJson(),t}}e.SemanticTree=c;const u=new i.SemanticVisitor("general","unit",((t,e)=>{if("infixop"===t.type&&("multiplication"===t.role||"implicit"===t.role)){const e=t.childNodes;e.length&&(l.isPureUnit(e[0])||l.isUnitCounter(e[0]))&&t.childNodes.slice(1).every(l.isPureUnit)&&(t.role="unit")}return!1}))},4795:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.partitionNodes=e.sliceNodes=e.getEmbellishedInner=e.addAttributes=e.isZeroLength=e.purgeNodes=e.isOrphanedGlyph=e.hasDisplayTag=e.hasEmptyTag=e.hasIgnoreTag=e.hasLeafTag=e.hasMathTag=e.directSpeechKeys=e.DISPLAYTAGS=e.EMPTYTAGS=e.IGNORETAGS=e.LEAFTAGS=void 0;const n=r(5740);function o(t){return!!t&&-1!==e.LEAFTAGS.indexOf(n.tagName(t))}function i(t,e,r){r&&t.reverse();const n=[];for(let o,i=0;o=t[i];i++){if(e(o))return r?{head:t.slice(i+1).reverse(),div:o,tail:n.reverse()}:{head:n,div:o,tail:t.slice(i+1)};n.push(o)}return r?{head:[],div:null,tail:n.reverse()}:{head:n,div:null,tail:[]}}e.LEAFTAGS=["MO","MI","MN","MTEXT","MS","MSPACE"],e.IGNORETAGS=["MERROR","MPHANTOM","MALIGNGROUP","MALIGNMARK","MPRESCRIPTS","ANNOTATION","ANNOTATION-XML"],e.EMPTYTAGS=["MATH","MROW","MPADDED","MACTION","NONE","MSTYLE","SEMANTICS"],e.DISPLAYTAGS=["MROOT","MSQRT"],e.directSpeechKeys=["aria-label","exact-speech","alt"],e.hasMathTag=function(t){return!!t&&"MATH"===n.tagName(t)},e.hasLeafTag=o,e.hasIgnoreTag=function(t){return!!t&&-1!==e.IGNORETAGS.indexOf(n.tagName(t))},e.hasEmptyTag=function(t){return!!t&&-1!==e.EMPTYTAGS.indexOf(n.tagName(t))},e.hasDisplayTag=function(t){return!!t&&-1!==e.DISPLAYTAGS.indexOf(n.tagName(t))},e.isOrphanedGlyph=function(t){return!!t&&"MGLYPH"===n.tagName(t)&&!o(t.parentNode)},e.purgeNodes=function(t){const r=[];for(let o,i=0;o=t[i];i++){if(o.nodeType!==n.NodeType.ELEMENT_NODE)continue;const t=n.tagName(o);-1===e.IGNORETAGS.indexOf(t)&&(-1!==e.EMPTYTAGS.indexOf(t)&&0===o.childNodes.length||r.push(o))}return r},e.isZeroLength=function(t){if(!t)return!1;if(-1!==["negativeveryverythinmathspace","negativeverythinmathspace","negativethinmathspace","negativemediummathspace","negativethickmathspace","negativeverythickmathspace","negativeveryverythickmathspace"].indexOf(t))return!0;const e=t.match(/[0-9.]+/);return!!e&&0===parseFloat(e[0])},e.addAttributes=function(t,r){if(r.hasAttributes()){const n=r.attributes;for(let r=n.length-1;r>=0;r--){const o=n[r].name;o.match(/^ext/)&&(t.attributes[o]=n[r].value,t.nobreaking=!0),-1!==e.directSpeechKeys.indexOf(o)&&(t.attributes["ext-speech"]=n[r].value,t.nobreaking=!0),o.match(/texclass$/)&&(t.attributes.texclass=n[r].value),"href"===o&&(t.attributes.href=n[r].value,t.nobreaking=!0)}}},e.getEmbellishedInner=function t(e){return e&&e.embellished&&e.childNodes.length>0?t(e.childNodes[0]):e},e.sliceNodes=i,e.partitionNodes=function(t,e){let r=t;const n=[],o=[];let s=null;do{s=i(r,e),o.push(s.head),n.push(s.div),r=s.tail}while(s.div);return n.pop(),{rel:n,comp:o}}},6278:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractSpeechGenerator=void 0;const n=r(6828),o=r(2298),i=r(1214),s=r(9543);e.AbstractSpeechGenerator=class{constructor(){this.modality=o.addPrefix("speech"),this.rebuilt_=null,this.options_={}}getRebuilt(){return this.rebuilt_}setRebuilt(t){this.rebuilt_=t}setOptions(t){this.options_=t||{},this.modality=o.addPrefix(this.options_.modality||"speech")}getOptions(){return this.options_}start(){}end(){}generateSpeech(t,e){return this.rebuilt_||(this.rebuilt_=new i.RebuildStree(e)),(0,n.setup)(this.options_),s.computeMarkup(this.getRebuilt().xml)}}},1452:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AdhocSpeechGenerator=void 0;const n=r(6278);class o extends n.AbstractSpeechGenerator{getSpeech(t,e){const r=this.generateSpeech(t,e);return t.setAttribute(this.modality,r),r}}e.AdhocSpeechGenerator=o},5152:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorGenerator=void 0;const n=r(2298),o=r(8396),i=r(1214),s=r(1204),a=r(6278);class l extends a.AbstractSpeechGenerator{constructor(){super(...arguments),this.modality=(0,n.addPrefix)("foreground"),this.contrast=new o.ContrastPicker}static visitStree_(t,e,r){if(t.childNodes.length){if(t.contentNodes.length&&("punctuated"===t.type&&t.contentNodes.forEach((t=>r[t.id]=!0)),"implicit"!==t.role&&e.push(t.contentNodes.map((t=>t.id)))),t.childNodes.length){if("implicit"===t.role){const n=[];let o=[];for(const e of t.childNodes){const t=[];l.visitStree_(e,t,r),t.length<=2&&n.push(t.shift()),o=o.concat(t)}return e.push(n),void o.forEach((t=>e.push(t)))}t.childNodes.forEach((t=>l.visitStree_(t,e,r)))}}else r[t.id]||e.push(t.id)}getSpeech(t,e){return s.getAttribute(t,this.modality)}generateSpeech(t,e){return this.getRebuilt()||this.setRebuilt(new i.RebuildStree(t)),this.colorLeaves_(t),s.getAttribute(t,this.modality)}colorLeaves_(t){const e=[];l.visitStree_(this.getRebuilt().streeRoot,e,{});for(const r of e){const e=this.contrast.generate();let n=!1;n=Array.isArray(r)?r.map((r=>this.colorLeave_(t,r,e))).reduce(((t,e)=>t||e),!1):this.colorLeave_(t,r.toString(),e),n&&this.contrast.increment()}}colorLeave_(t,e,r){const n=s.getBySemanticId(t,e);return!!n&&(n.setAttribute(this.modality,r),!0)}}e.ColorGenerator=l},6604:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.DirectSpeechGenerator=void 0;const n=r(1204),o=r(6278);class i extends o.AbstractSpeechGenerator{getSpeech(t,e){return n.getAttribute(t,this.modality)}}e.DirectSpeechGenerator=i},3123:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.DummySpeechGenerator=void 0;const n=r(6278);class o extends n.AbstractSpeechGenerator{getSpeech(t,e){return""}}e.DummySpeechGenerator=o},5858:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.NodeSpeechGenerator=void 0;const n=r(1204),o=r(4598);class i extends o.TreeSpeechGenerator{getSpeech(t,e){return super.getSpeech(t,e),n.getAttribute(t,this.modality)}}e.NodeSpeechGenerator=i},9552:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.generatorMapping_=e.generator=void 0;const n=r(1452),o=r(5152),i=r(6604),s=r(3123),a=r(5858),l=r(597),c=r(4598);e.generator=function(t){return(e.generatorMapping_[t]||e.generatorMapping_.Direct)()},e.generatorMapping_={Adhoc:()=>new n.AdhocSpeechGenerator,Color:()=>new o.ColorGenerator,Direct:()=>new i.DirectSpeechGenerator,Dummy:()=>new s.DummySpeechGenerator,Node:()=>new a.NodeSpeechGenerator,Summary:()=>new l.SummarySpeechGenerator,Tree:()=>new c.TreeSpeechGenerator}},9543:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.computeSummary_=e.retrieveSummary=e.connectAllMactions=e.connectMactions=e.nodeAtPosition_=e.computePrefix_=e.retrievePrefix=e.addPrefix=e.addModality=e.addSpeech=e.recomputeMarkup=e.computeMarkup=e.recomputeSpeech=e.computeSpeech=void 0;const n=r(8290),o=r(5740),i=r(5274),s=r(2298),a=r(2362),l=r(7075),c=r(1204);function u(t){return a.SpeechRuleEngine.getInstance().evaluateNode(t)}function p(t){return u(l.SemanticTree.fromNode(t).xml())}function h(t){const e=p(t);return n.markup(e)}function f(t){const e=d(t);return n.markup(e)}function d(t){const e=l.SemanticTree.fromRoot(t),r=i.evalXPath('.//*[@id="'+t.id+'"]',e.xml());let n=r[0];return r.length>1&&(n=m(t,r)||n),n?a.SpeechRuleEngine.getInstance().runInSetting({modality:"prefix",domain:"default",style:"default",strict:!0,speech:!0},(function(){return a.SpeechRuleEngine.getInstance().evaluateNode(n)})):[]}function m(t,e){const r=e[0];if(!t.parent)return r;const n=[];for(;t;)n.push(t.id),t=t.parent;const o=function(t,e){for(;e.length&&e.shift().toString()===t.getAttribute("id")&&t.parentNode&&t.parentNode.parentNode;)t=t.parentNode.parentNode;return!e.length};for(let t,r=0;t=e[r];r++)if(o(t,n.slice()))return t;return r}function y(t){return t?a.SpeechRuleEngine.getInstance().runInSetting({modality:"summary",strict:!1,speech:!0},(function(){return a.SpeechRuleEngine.getInstance().evaluateNode(t)})):[]}e.computeSpeech=u,e.recomputeSpeech=p,e.computeMarkup=function(t){const e=u(t);return n.markup(e)},e.recomputeMarkup=h,e.addSpeech=function(t,e,r){const i=o.querySelectorAllByAttrValue(r,"id",e.id.toString())[0],a=i?n.markup(u(i)):h(e);t.setAttribute(s.Attribute.SPEECH,a)},e.addModality=function(t,e,r){const n=h(e);t.setAttribute(r,n)},e.addPrefix=function(t,e){const r=f(e);r&&t.setAttribute(s.Attribute.PREFIX,r)},e.retrievePrefix=f,e.computePrefix_=d,e.nodeAtPosition_=m,e.connectMactions=function(t,e,r){const n=o.querySelectorAll(e,"maction");for(let e,i=0;e=n[i];i++){const n=e.getAttribute("id"),i=o.querySelectorAllByAttrValue(t,"id",n)[0];if(!i)continue;const a=e.childNodes[1],l=a.getAttribute(s.Attribute.ID);let u=c.getBySemanticId(t,l);if(u&&"dummy"!==u.getAttribute(s.Attribute.TYPE))continue;if(u=i.childNodes[0],u.getAttribute("sre-highlighter-added"))continue;const p=a.getAttribute(s.Attribute.PARENT);p&&u.setAttribute(s.Attribute.PARENT,p),u.setAttribute(s.Attribute.TYPE,"dummy"),u.setAttribute(s.Attribute.ID,l);o.querySelectorAllByAttrValue(r,"id",l)[0].setAttribute("alternative",l)}},e.connectAllMactions=function(t,e){const r=o.querySelectorAll(t,"maction");for(let t,n=0;t=r[n];n++){const r=t.childNodes[1].getAttribute(s.Attribute.ID);o.querySelectorAllByAttrValue(e,"id",r)[0].setAttribute("alternative",r)}},e.retrieveSummary=function(t){const e=y(t);return n.markup(e)},e.computeSummary_=y},597:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SummarySpeechGenerator=void 0;const n=r(6278),o=r(9543);class i extends n.AbstractSpeechGenerator{getSpeech(t,e){return o.connectAllMactions(e,this.getRebuilt().xml),this.generateSpeech(t,e)}}e.SummarySpeechGenerator=i},4598:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.TreeSpeechGenerator=void 0;const n=r(2298),o=r(1204),i=r(6278),s=r(9543);class a extends i.AbstractSpeechGenerator{getSpeech(t,e){const r=this.generateSpeech(t,e),i=this.getRebuilt().nodeDict;for(const r in i){const a=i[r],l=o.getBySemanticId(e,r),c=o.getBySemanticId(t,r);l&&c&&(this.modality&&this.modality!==n.Attribute.SPEECH?s.addModality(c,a,this.modality):s.addSpeech(c,a,this.getRebuilt().xml),this.modality===n.Attribute.SPEECH&&s.addPrefix(c,a))}return r}}e.TreeSpeechGenerator=a},313:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.INTERVALS=e.makeLetter=e.numberRules=e.alphabetRules=e.getFont=e.makeInterval=e.generate=e.makeDomains_=e.Domains_=e.Base=e.Embellish=e.Font=void 0;const n=r(5897),o=r(7491),i=r(4356),s=r(2536),a=r(2780);var l,c,u;function p(){const t=i.LOCALE.ALPHABETS,r=(t,e)=>{const r={};return Object.keys(t).forEach((t=>r[t]=!0)),Object.keys(e).forEach((t=>r[t]=!0)),Object.keys(r)};e.Domains_.small=r(t.smallPrefix,t.letterTrans),e.Domains_.capital=r(t.capPrefix,t.letterTrans),e.Domains_.digit=r(t.digitPrefix,t.digitTrans)}function h(t){const e=t.toString(16).toUpperCase();return e.length>3?e:("000"+e).slice(-4)}function f([t,e],r){const n=parseInt(t,16),o=parseInt(e,16),i=[];for(let t=n;t<=o;t++){let e=h(t);!1!==r[e]&&(e=r[e]||e,i.push(e))}return i}function d(t){const e="normal"===t||"fullwidth"===t?"":i.LOCALE.MESSAGES.font[t]||i.LOCALE.MESSAGES.embellish[t]||"";return(0,s.localeFontCombiner)(e)}function m(t,r,n,o,s,a){const l=d(o);for(let o,c,u,p=0;o=t[p],c=r[p],u=n[p];p++){const t=a?i.LOCALE.ALPHABETS.capPrefix:i.LOCALE.ALPHABETS.smallPrefix,r=a?e.Domains_.capital:e.Domains_.small;g(l.combiner,o,c,u,l.font,t,s,i.LOCALE.ALPHABETS.letterTrans,r)}}function y(t,r,n,o,s){const a=d(n);for(let n,l,c=0;n=t[c],l=r[c];c++){const t=i.LOCALE.ALPHABETS.digitPrefix,r=c+s;g(a.combiner,n,l,r,a.font,t,o,i.LOCALE.ALPHABETS.digitTrans,e.Domains_.digit)}}function g(t,e,r,n,o,i,s,l,c){for(let u,p=0;u=c[p];p++){const c=u in l?l[u]:l.default,p=u in i?i[u]:i.default;a.defineRule(e.toString(),u,"default",s,r,t(c(n),o,p))}}!function(t){t.BOLD="bold",t.BOLDFRAKTUR="bold-fraktur",t.BOLDITALIC="bold-italic",t.BOLDSCRIPT="bold-script",t.DOUBLESTRUCK="double-struck",t.FULLWIDTH="fullwidth",t.FRAKTUR="fraktur",t.ITALIC="italic",t.MONOSPACE="monospace",t.NORMAL="normal",t.SCRIPT="script",t.SANSSERIF="sans-serif",t.SANSSERIFITALIC="sans-serif-italic",t.SANSSERIFBOLD="sans-serif-bold",t.SANSSERIFBOLDITALIC="sans-serif-bold-italic"}(l=e.Font||(e.Font={})),function(t){t.SUPER="super",t.SUB="sub",t.CIRCLED="circled",t.PARENTHESIZED="parenthesized",t.PERIOD="period",t.NEGATIVECIRCLED="negative-circled",t.DOUBLECIRCLED="double-circled",t.CIRCLEDSANSSERIF="circled-sans-serif",t.NEGATIVECIRCLEDSANSSERIF="negative-circled-sans-serif",t.COMMA="comma",t.SQUARED="squared",t.NEGATIVESQUARED="negative-squared"}(c=e.Embellish||(e.Embellish={})),function(t){t.LATINCAP="latinCap",t.LATINSMALL="latinSmall",t.GREEKCAP="greekCap",t.GREEKSMALL="greekSmall",t.DIGIT="digit"}(u=e.Base||(e.Base={})),e.Domains_={small:["default"],capital:["default"],digit:["default"]},e.makeDomains_=p,e.generate=function(t){const r=n.default.getInstance().locale;n.default.getInstance().locale=t,o.setLocale(),a.addSymbolRules({locale:t}),p();const s=e.INTERVALS;for(let t,e=0;t=s[e];e++){const e=f(t.interval,t.subst),r=e.map((function(t){return String.fromCodePoint(parseInt(t,16))}));if("offset"in t)y(e,r,t.font,t.category,t.offset||0);else{m(e,r,i.LOCALE.ALPHABETS[t.base],t.font,t.category,!!t.capital)}}n.default.getInstance().locale=r,o.setLocale()},e.makeInterval=f,e.getFont=d,e.alphabetRules=m,e.numberRules=y,e.makeLetter=g,e.INTERVALS=[{interval:["1D400","1D419"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.BOLD},{interval:["1D41A","1D433"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.BOLD},{interval:["1D56C","1D585"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.BOLDFRAKTUR},{interval:["1D586","1D59F"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.BOLDFRAKTUR},{interval:["1D468","1D481"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.BOLDITALIC},{interval:["1D482","1D49B"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.BOLDITALIC},{interval:["1D4D0","1D4E9"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.BOLDSCRIPT},{interval:["1D4EA","1D503"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.BOLDSCRIPT},{interval:["1D538","1D551"],base:u.LATINCAP,subst:{"1D53A":"2102","1D53F":"210D","1D545":"2115","1D547":"2119","1D548":"211A","1D549":"211D","1D551":"2124"},capital:!0,category:"Lu",font:l.DOUBLESTRUCK},{interval:["1D552","1D56B"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.DOUBLESTRUCK},{interval:["1D504","1D51D"],base:u.LATINCAP,subst:{"1D506":"212D","1D50B":"210C","1D50C":"2111","1D515":"211C","1D51D":"2128"},capital:!0,category:"Lu",font:l.FRAKTUR},{interval:["1D51E","1D537"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.FRAKTUR},{interval:["FF21","FF3A"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.FULLWIDTH},{interval:["FF41","FF5A"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.FULLWIDTH},{interval:["1D434","1D44D"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.ITALIC},{interval:["1D44E","1D467"],base:u.LATINSMALL,subst:{"1D455":"210E"},capital:!1,category:"Ll",font:l.ITALIC},{interval:["1D670","1D689"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.MONOSPACE},{interval:["1D68A","1D6A3"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.MONOSPACE},{interval:["0041","005A"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.NORMAL},{interval:["0061","007A"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.NORMAL},{interval:["1D49C","1D4B5"],base:u.LATINCAP,subst:{"1D49D":"212C","1D4A0":"2130","1D4A1":"2131","1D4A3":"210B","1D4A4":"2110","1D4A7":"2112","1D4A8":"2133","1D4AD":"211B"},capital:!0,category:"Lu",font:l.SCRIPT},{interval:["1D4B6","1D4CF"],base:u.LATINSMALL,subst:{"1D4BA":"212F","1D4BC":"210A","1D4C4":"2134"},capital:!1,category:"Ll",font:l.SCRIPT},{interval:["1D5A0","1D5B9"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.SANSSERIF},{interval:["1D5BA","1D5D3"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.SANSSERIF},{interval:["1D608","1D621"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.SANSSERIFITALIC},{interval:["1D622","1D63B"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.SANSSERIFITALIC},{interval:["1D5D4","1D5ED"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.SANSSERIFBOLD},{interval:["1D5EE","1D607"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.SANSSERIFBOLD},{interval:["1D63C","1D655"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:l.SANSSERIFBOLDITALIC},{interval:["1D656","1D66F"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:l.SANSSERIFBOLDITALIC},{interval:["0391","03A9"],base:u.GREEKCAP,subst:{"03A2":"03F4"},capital:!0,category:"Lu",font:l.NORMAL},{interval:["03B0","03D0"],base:u.GREEKSMALL,subst:{"03B0":"2207","03CA":"2202","03CB":"03F5","03CC":"03D1","03CD":"03F0","03CE":"03D5","03CF":"03F1","03D0":"03D6"},capital:!1,category:"Ll",font:l.NORMAL},{interval:["1D6A8","1D6C0"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:l.BOLD},{interval:["1D6C1","1D6E1"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:l.BOLD},{interval:["1D6E2","1D6FA"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:l.ITALIC},{interval:["1D6FB","1D71B"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:l.ITALIC},{interval:["1D71C","1D734"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:l.BOLDITALIC},{interval:["1D735","1D755"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:l.BOLDITALIC},{interval:["1D756","1D76E"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:l.SANSSERIFBOLD},{interval:["1D76F","1D78F"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:l.SANSSERIFBOLD},{interval:["1D790","1D7A8"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:l.SANSSERIFBOLDITALIC},{interval:["1D7A9","1D7C9"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:l.SANSSERIFBOLDITALIC},{interval:["0030","0039"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:l.NORMAL},{interval:["2070","2079"],base:u.DIGIT,subst:{2071:"00B9",2072:"00B2",2073:"00B3"},offset:0,category:"No",font:c.SUPER},{interval:["2080","2089"],base:u.DIGIT,subst:{},offset:0,category:"No",font:c.SUB},{interval:["245F","2473"],base:u.DIGIT,subst:{"245F":"24EA"},offset:0,category:"No",font:c.CIRCLED},{interval:["3251","325F"],base:u.DIGIT,subst:{},offset:21,category:"No",font:c.CIRCLED},{interval:["32B1","32BF"],base:u.DIGIT,subst:{},offset:36,category:"No",font:c.CIRCLED},{interval:["2474","2487"],base:u.DIGIT,subst:{},offset:1,category:"No",font:c.PARENTHESIZED},{interval:["2487","249B"],base:u.DIGIT,subst:{2487:"1F100"},offset:0,category:"No",font:c.PERIOD},{interval:["2775","277F"],base:u.DIGIT,subst:{2775:"24FF"},offset:0,category:"No",font:c.NEGATIVECIRCLED},{interval:["24EB","24F4"],base:u.DIGIT,subst:{},offset:11,category:"No",font:c.NEGATIVECIRCLED},{interval:["24F5","24FE"],base:u.DIGIT,subst:{},offset:1,category:"No",font:c.DOUBLECIRCLED},{interval:["277F","2789"],base:u.DIGIT,subst:{"277F":"1F10B"},offset:0,category:"No",font:c.CIRCLEDSANSSERIF},{interval:["2789","2793"],base:u.DIGIT,subst:{2789:"1F10C"},offset:0,category:"No",font:c.NEGATIVECIRCLEDSANSSERIF},{interval:["FF10","FF19"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:l.FULLWIDTH},{interval:["1D7CE","1D7D7"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:l.BOLD},{interval:["1D7D8","1D7E1"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:l.DOUBLESTRUCK},{interval:["1D7E2","1D7EB"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:l.SANSSERIF},{interval:["1D7EC","1D7F5"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:l.SANSSERIFBOLD},{interval:["1D7F6","1D7FF"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:l.MONOSPACE},{interval:["1F101","1F10A"],base:u.DIGIT,subst:{},offset:0,category:"No",font:c.COMMA},{interval:["24B6","24CF"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:c.CIRCLED},{interval:["24D0","24E9"],base:u.LATINSMALL,subst:{},capital:!1,category:"So",font:c.CIRCLED},{interval:["1F110","1F129"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:c.PARENTHESIZED},{interval:["249C","24B5"],base:u.LATINSMALL,subst:{},capital:!1,category:"So",font:c.PARENTHESIZED},{interval:["1F130","1F149"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:c.SQUARED},{interval:["1F170","1F189"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:c.NEGATIVESQUARED},{interval:["1F150","1F169"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:c.NEGATIVECIRCLED}]},8504:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=e.Comparator=e.ClearspeakPreferences=void 0;const n=r(5897),o=r(4440),i=r(1676),s=r(1676),a=r(2780),l=r(2362);class c extends i.DynamicCstr{constructor(t,e){super(t),this.preference=e}static comparator(){return new p(n.default.getInstance().dynamicCstr,s.DynamicProperties.createProp([i.DynamicCstr.DEFAULT_VALUES[s.Axis.LOCALE]],[i.DynamicCstr.DEFAULT_VALUES[s.Axis.MODALITY]],[i.DynamicCstr.DEFAULT_VALUES[s.Axis.DOMAIN]],[i.DynamicCstr.DEFAULT_VALUES[s.Axis.STYLE]]))}static fromPreference(t){const e=t.split(":"),r={},n=u.getProperties(),o=Object.keys(n);for(let t,i=0;t=e[i];i++){const e=t.split("_");if(-1===o.indexOf(e[0]))continue;const i=e[1];i&&i!==c.AUTO&&-1!==n[e[0]].indexOf(i)&&(r[e[0]]=e[1])}return r}static toPreference(t){const e=Object.keys(t),r=[];for(let n=0;n<e.length;n++)r.push(e[n]+"_"+t[e[n]]);return r.length?r.join(":"):i.DynamicCstr.DEFAULT_VALUE}static getLocalePreferences(t){const e=t||a.enumerate(l.SpeechRuleEngine.getInstance().enumerate());return c.getLocalePreferences_(e)}static smartPreferences(t,e){const r=c.getLocalePreferences()[e];if(!r)return[];const n=t.explorers.speech,i=c.relevantPreferences(n.walker.getFocus().getSemanticPrimary()),s=o.DOMAIN_TO_STYLES.clearspeak;return[{type:"radio",content:"No Preferences",id:"clearspeak-default",variable:"speechRules"},{type:"radio",content:"Current Preferences",id:"clearspeak-"+s,variable:"speechRules"},{type:"rule"},{type:"label",content:"Preferences for "+i},{type:"rule"}].concat(r[i].map((function(t){const e=t.split("_");return{type:"radio",content:e[1],id:"clearspeak-"+c.addPreference(s,e[0],e[1]),variable:"speechRules"}})))}static relevantPreferences(t){const e=d[t.type];return e&&(e[t.role]||e[""])||"ImpliedTimes"}static findPreference(t,e){if("default"===t)return c.AUTO;return c.fromPreference(t)[e]||c.AUTO}static addPreference(t,e,r){if("default"===t)return e+"_"+r;const n=c.fromPreference(t);return n[e]=r,c.toPreference(n)}static getLocalePreferences_(t){const e={};for(const r in t){if(!t[r].speech||!t[r].speech.clearspeak)continue;const n=Object.keys(t[r].speech.clearspeak),o=e[r]={};for(const t in u.getProperties()){const e=u.getProperties()[t],r=[t+"_Auto"];if(e)for(const o of e)-1!==n.indexOf(t+"_"+o)&&r.push(t+"_"+o);o[t]=r}}return e}equal(t){if(!super.equal(t))return!1;const e=Object.keys(this.preference),r=t.preference;if(e.length!==Object.keys(r).length)return!1;for(let t,n=0;t=e[n];n++)if(this.preference[t]!==r[t])return!1;return!0}}e.ClearspeakPreferences=c,c.AUTO="Auto";const u=new s.DynamicProperties({AbsoluteValue:["Auto","AbsEnd","Cardinality","Determinant"],Bar:["Auto","Conjugate"],Caps:["Auto","SayCaps"],CombinationPermutation:["Auto","ChoosePermute"],Currency:["Auto","Position","Prefix"],Ellipses:["Auto","AndSoOn"],Enclosed:["Auto","EndEnclose"],Exponent:["Auto","AfterPower","Ordinal","OrdinalPower","Exponent"],Fraction:["Auto","EndFrac","FracOver","General","GeneralEndFrac","Ordinal","Over","OverEndFrac","Per"],Functions:["Auto","None","Reciprocal"],ImpliedTimes:["Auto","MoreImpliedTimes","None"],Log:["Auto","LnAsNaturalLog"],Matrix:["Auto","Combinatoric","EndMatrix","EndVector","SilentColNum","SpeakColNum","Vector"],MultiLineLabel:["Auto","Case","Constraint","Equation","Line","None","Row","Step"],MultiLineOverview:["Auto","None"],MultiLinePausesBetweenColumns:["Auto","Long","Short"],MultsymbolDot:["Auto","Dot"],MultsymbolX:["Auto","By","Cross"],Paren:["Auto","CoordPoint","Interval","Silent","Speak","SpeakNestingLevel"],Prime:["Auto","Angle","Length"],Roots:["Auto","PosNegSqRoot","PosNegSqRootEnd","RootEnd"],SetMemberSymbol:["Auto","Belongs","Element","Member","In"],Sets:["Auto","SilentBracket","woAll"],TriangleSymbol:["Auto","Delta"],Trig:["Auto","ArcTrig","TrigInverse","Reciprocal"],VerticalLine:["Auto","Divides","Given","SuchThat"]});class p extends s.DefaultComparator{constructor(t,e){super(t,e),this.preference=t instanceof c?t.preference:{}}match(t){if(!(t instanceof c))return super.match(t);if("default"===t.getComponents()[s.Axis.STYLE])return!0;const e=Object.keys(t.preference);for(let r,n=0;r=e[n];n++)if(this.preference[r]!==t.preference[r])return!1;return!0}compare(t,e){const r=super.compare(t,e);if(0!==r)return r;const n=t instanceof c,o=e instanceof c;if(!n&&o)return 1;if(n&&!o)return-1;if(!n&&!o)return 0;const i=Object.keys(t.preference).length,s=Object.keys(e.preference).length;return i>s?-1:i<s?1:0}}e.Comparator=p;class h extends s.DynamicCstrParser{constructor(){super([s.Axis.LOCALE,s.Axis.MODALITY,s.Axis.DOMAIN,s.Axis.STYLE])}parse(t){const e=super.parse(t);let r=e.getValue(s.Axis.STYLE);const n=e.getValue(s.Axis.LOCALE),o=e.getValue(s.Axis.MODALITY);let a={};return r!==i.DynamicCstr.DEFAULT_VALUE&&(a=this.fromPreference(r),r=this.toPreference(a)),new c({locale:n,modality:o,domain:"clearspeak",style:r},a)}fromPreference(t){return c.fromPreference(t)}toPreference(t){return c.toPreference(t)}}e.Parser=h;const f=[["AbsoluteValue","fenced","neutral","metric"],["Bar","overscore","overaccent"],["Caps","identifier","latinletter"],["CombinationPermutation","appl","unknown"],["Ellipses","punctuation","ellipsis"],["Exponent","superscript",""],["Fraction","fraction",""],["Functions","appl","simple function"],["ImpliedTimes","operator","implicit"],["Log","appl","prefix function"],["Matrix","matrix",""],["Matrix","vector",""],["MultiLineLabel","multiline","label"],["MultiLineOverview","multiline","table"],["MultiLinePausesBetweenColumns","multiline","table"],["MultiLineLabel","table","label"],["MultiLineOverview","table","table"],["MultiLinePausesBetweenColumns","table","table"],["MultiLineLabel","cases","label"],["MultiLineOverview","cases","table"],["MultiLinePausesBetweenColumns","cases","table"],["MultsymbolDot","operator","multiplication"],["MultsymbolX","operator","multiplication"],["Paren","fenced","leftright"],["Prime","superscript","prime"],["Roots","root",""],["Roots","sqrt",""],["SetMemberSymbol","relation","element"],["Sets","fenced","set extended"],["TriangleSymbol","identifier","greekletter"],["Trig","appl","prefix function"],["VerticalLine","punctuated","vbar"]],d=function(){const t={};for(let e,r=0;e=f[r];r++){const r=e[0];let n=t[e[1]];n||(n={},t[e[1]]=n),n[e[2]]=r}return t}();n.default.getInstance().comparators.clearspeak=c.comparator,n.default.getInstance().parsers.clearspeak=new h},5425:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ClearspeakRules=void 0;const n=r(1676),o=r(365),i=r(9912),s=r(1378),a=r(8437),l=r(7283);e.ClearspeakRules=function(){l.addStore(n.DynamicCstr.BASE_LOCALE+".speech.clearspeak","",{CTFpauseSeparator:o.pauseSeparator,CTFnodeCounter:i.nodeCounter,CTFcontentIterator:o.contentIterator,CSFvulgarFraction:a.vulgarFraction,CQFvulgarFractionSmall:i.isSmallVulgarFraction,CQFcellsSimple:i.allCellsSimple,CSFordinalExponent:i.ordinalExponent,CSFwordOrdinal:i.wordOrdinal,CQFmatchingFences:i.matchingFences,CSFnestingDepth:i.nestingDepth,CQFfencedArguments:i.fencedArguments,CQFsimpleArguments:i.simpleArguments,CQFspaceoutNumber:s.spaceoutNumber})}},9912:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.wordOrdinal=e.layoutFactor_=e.fencedFactor_=e.simpleFactor_=e.simpleArguments=e.fencedArguments=e.insertNesting=e.matchingFences=e.nestingDepth=e.NESTING_DEPTH=e.ordinalExponent=e.allTextLastContent_=e.isUnitExpression=e.isSmallVulgarFraction=e.allCellsSimple=e.allIndices_=e.isInteger_=e.simpleCell_=e.simpleNode=e.hasPreference=e.isSimpleFraction_=e.isSimpleNumber_=e.isNumber_=e.isLetter_=e.isSimple_=e.isSimpleLetters_=e.isSimpleDegree_=e.isSimpleNegative_=e.isSimpleFunction_=e.isSimpleExpression=e.nodeCounter=void 0;const n=r(5740),o=r(5897),i=r(5274),s=r(4356),a=r(4977),l=r(2105),c=r(365),u=r(7630),p=r(9265),h=r(3588);function f(t){return S(t)||g(t)||y(t)||m(t)||d(t)}function d(t){return"appl"===t.type&&("prefix function"===t.childNodes[0].role||"simple function"===t.childNodes[0].role)&&(b(t.childNodes[1])||"fenced"===t.childNodes[1].type&&b(t.childNodes[1].childNodes[0]))}function m(t){return"prefixop"===t.type&&"negative"===t.role&&b(t.childNodes[0])&&"prefixop"!==t.childNodes[0].type&&"appl"!==t.childNodes[0].type&&"punctuated"!==t.childNodes[0].type}function y(t){return"punctuated"===t.type&&"endpunct"===t.role&&2===t.childNodes.length&&"degree"===t.childNodes[1].role&&(v(t.childNodes[0])||_(t.childNodes[0])||"prefixop"===t.childNodes[0].type&&"negative"===t.childNodes[0].role&&(v(t.childNodes[0].childNodes[0])||_(t.childNodes[0].childNodes[0])))}function g(t){return v(t)||"infixop"===t.type&&"implicit"===t.role&&(2===t.childNodes.length&&(v(t.childNodes[0])||S(t.childNodes[0]))&&v(t.childNodes[1])||3===t.childNodes.length&&S(t.childNodes[0])&&v(t.childNodes[1])&&v(t.childNodes[2]))}function b(t){return t.hasAnnotation("clearspeak","simple")}function v(t){return"identifier"===t.type&&("latinletter"===t.role||"greekletter"===t.role||"otherletter"===t.role||"simple function"===t.role)}function _(t){return"number"===t.type&&("integer"===t.role||"float"===t.role)}function S(t){return _(t)||M(t)}function M(t){if(O("Fraction_Over")||O("Fraction_FracOver"))return!1;if("fraction"!==t.type||"vulgar"!==t.role)return!1;if(O("Fraction_Ordinal"))return!0;const e=parseInt(t.childNodes[0].textContent,10),r=parseInt(t.childNodes[1].textContent,10);return e>0&&e<20&&r>0&&r<11}function O(t){return o.default.getInstance().style===t}function x(t){if(!t.hasAttribute("annotation"))return!1;const e=t.getAttribute("annotation");return!!/clearspeak:simple$|clearspeak:simple;/.exec(e)}function E(t){if(x(t))return!0;if("subscript"!==t.tagName)return!1;const e=t.childNodes[0].childNodes,r=e[1];return"identifier"===e[0].tagName&&(A(r)||"infixop"===r.tagName&&r.hasAttribute("role")&&"implicit"===r.getAttribute("role")&&C(r))}function A(t){return"number"===t.tagName&&t.hasAttribute("role")&&"integer"===t.getAttribute("role")}function C(t){return i.evalXPath("children/*",t).every((t=>A(t)||"identifier"===t.tagName))}function T(t){return"text"===t.type||"punctuated"===t.type&&"text"===t.role&&_(t.childNodes[0])&&N(t.childNodes.slice(1))||"identifier"===t.type&&"unit"===t.role||"infixop"===t.type&&("implicit"===t.role||"unit"===t.role)}function N(t){for(let e=0;e<t.length-1;e++)if("text"!==t[e].type||""!==t[e].textContent)return!1;return"text"===t[t.length-1].type}function w(t,e){if(!e||!t)return t;const r=t.match(/^(open|close) /);return r?r[0]+e+" "+t.substring(r[0].length):e+" "+t}function L(t){return!!t&&("number"===t.tagName||"identifier"===t.tagName||"function"===t.tagName||"appl"===t.tagName||"fraction"===t.tagName)}function I(t){return t&&("fenced"===t.tagName||t.hasAttribute("role")&&"leftright"===t.getAttribute("role")||P(t))}function P(t){return!!t&&("matrix"===t.tagName||"vector"===t.tagName)}e.nodeCounter=function(t,e){const r=e.split("-"),n=c.nodeCounter(t,r[0]||""),o=r[1]||"",i=r[2]||"";let s=!0;return function(){const t=n();return s?(s=!1,i+t+o):t+o}},e.isSimpleExpression=f,e.isSimpleFunction_=d,e.isSimpleNegative_=m,e.isSimpleDegree_=y,e.isSimpleLetters_=g,e.isSimple_=b,e.isLetter_=v,e.isNumber_=_,e.isSimpleNumber_=S,e.isSimpleFraction_=M,e.hasPreference=O,(0,u.register)(new p.SemanticAnnotator("clearspeak","simple",(function(t){return f(t)?"simple":""}))),e.simpleNode=x,e.simpleCell_=E,e.isInteger_=A,e.allIndices_=C,e.allCellsSimple=function(t){const e="matrix"===t.tagName?"children/row/children/cell/children/*":"children/line/children/*";return i.evalXPath(e,t).every(E)?[t]:[]},e.isSmallVulgarFraction=function(t){return(0,a.vulgarFractionSmall)(t,20,11)?[t]:[]},e.isUnitExpression=T,e.allTextLastContent_=N,(0,u.register)(new p.SemanticAnnotator("clearspeak","unit",(function(t){return T(t)?"unit":""}))),e.ordinalExponent=function(t){const e=parseInt(t.textContent,10);return isNaN(e)?t.textContent:e>10?s.LOCALE.NUMBERS.numericOrdinal(e):s.LOCALE.NUMBERS.wordOrdinal(e)},e.NESTING_DEPTH=null,e.nestingDepth=function(t){let r=0;const n=t.textContent,o="open"===t.getAttribute("role")?0:1;let i=t.parentNode;for(;i;)"fenced"===i.tagName&&i.childNodes[0].childNodes[o].textContent===n&&r++,i=i.parentNode;return e.NESTING_DEPTH=r>1?s.LOCALE.NUMBERS.wordOrdinal(r):"",e.NESTING_DEPTH},e.matchingFences=function(t){const e=t.previousSibling;let r,n;return e?(r=e,n=t):(r=t,n=t.nextSibling),n&&(0,h.isMatchingFence)(r.textContent,n.textContent)?[t]:[]},e.insertNesting=w,l.Grammar.getInstance().setCorrection("insertNesting",w),e.fencedArguments=function(t){const e=n.toArray(t.parentNode.childNodes),r=i.evalXPath("../../children/*",t),o=e.indexOf(t);return I(r[o])||I(r[o+1])?[t]:[]},e.simpleArguments=function(t){const e=n.toArray(t.parentNode.childNodes),r=i.evalXPath("../../children/*",t),o=e.indexOf(t);return L(r[o])&&r[o+1]&&(L(r[o+1])||"root"===r[o+1].tagName||"sqrt"===r[o+1].tagName||"superscript"===r[o+1].tagName&&r[o+1].childNodes[0].childNodes[0]&&("number"===r[o+1].childNodes[0].childNodes[0].tagName||"identifier"===r[o+1].childNodes[0].childNodes[0].tagName)&&("2"===r[o+1].childNodes[0].childNodes[1].textContent||"3"===r[o+1].childNodes[0].childNodes[1].textContent))?[t]:[]},e.simpleFactor_=L,e.fencedFactor_=I,e.layoutFactor_=P,e.wordOrdinal=function(t){return s.LOCALE.NUMBERS.wordOrdinal(parseInt(t.textContent,10))}},6141:function(t,e,r){var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{l(n.next(t))}catch(t){i(t)}}function a(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.loadAjax=e.loadFileSync=e.loadFile=e.parseMaps=e.retrieveFiles=e.standardLoader=e.loadLocale=e.store=void 0;const o=r(2139),i=r(5897),s=r(4440),a=r(7248),l=r(2315),c=r(1676),u=r(2780),p=r(2362),h=r(7491),f=r(313);e.store=u;const d={functions:u.addFunctionRules,symbols:u.addSymbolRules,units:u.addUnitRules,si:u.setSiPrefixes};let m=!1;function y(t=i.default.getInstance().locale){i.EnginePromise.loaded[t]||(i.EnginePromise.loaded[t]=[!1,!1],function(t){if(i.default.getInstance().isIE&&i.default.getInstance().mode===s.Mode.HTTP)return void S(t);b(t)}(t))}function g(){switch(i.default.getInstance().mode){case s.Mode.ASYNC:return M;case s.Mode.HTTP:return x;case s.Mode.SYNC:default:return O}}function b(t){const e=i.default.getInstance().customLoader?i.default.getInstance().customLoader:g(),r=new Promise((r=>{e(t).then((e=>{v(e),i.EnginePromise.loaded[t]=[!0,!0],r(t)}),(e=>{i.EnginePromise.loaded[t]=[!0,!1],console.error(`Unable to load locale: ${t}`),i.default.getInstance().locale=i.default.getInstance().defaultLocale,r(t)}))}));i.EnginePromise.promises[t]=r}function v(t){_(JSON.parse(t))}function _(t,e){let r=!0;for(let n,o=0;n=Object.keys(t)[o];o++){const o=n.split("/");e&&e!==o[0]||("rules"===o[1]?p.SpeechRuleEngine.getInstance().addStore(t[n]):"messages"===o[1]?(0,h.completeLocale)(t[n]):(r&&(f.generate(o[0]),r=!1),t[n].forEach(d[o[1]])))}}function S(t,e){let r=e||1;o.mapsForIE?_(o.mapsForIE,t):r<=5&&setTimeout((()=>S(t,r++)).bind(this),300)}function M(t){const e=a.localePath(t);return new Promise(((t,r)=>{l.default.fs.readFile(e,"utf8",((e,n)=>{if(e)return r(e);t(n)}))}))}function O(t){const e=a.localePath(t);return new Promise(((t,r)=>{let n="{}";try{n=l.default.fs.readFileSync(e,"utf8")}catch(t){return r(t)}t(n)}))}function x(t){const e=a.localePath(t),r=new XMLHttpRequest;return new Promise(((t,n)=>{r.onreadystatechange=function(){if(4===r.readyState){const e=r.status;0===e||e>=200&&e<400?t(r.responseText):n(e)}},r.open("GET",e,!0),r.send()}))}e.loadLocale=function(t=i.default.getInstance().locale){return n(this,void 0,void 0,(function*(){return m||(y(c.DynamicCstr.BASE_LOCALE),m=!0),i.EnginePromise.promises[c.DynamicCstr.BASE_LOCALE].then((()=>n(this,void 0,void 0,(function*(){const e=i.default.getInstance().defaultLocale;return e?(y(e),i.EnginePromise.promises[e].then((()=>n(this,void 0,void 0,(function*(){return y(t),i.EnginePromise.promises[t]}))))):(y(t),i.EnginePromise.promises[t])}))))}))},e.standardLoader=g,e.retrieveFiles=b,e.parseMaps=v,e.loadFile=M,e.loadFileSync=O,e.loadAjax=x},7088:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.leftSubscriptBrief=e.leftSuperscriptBrief=e.leftSubscriptVerbose=e.leftSuperscriptVerbose=e.baselineBrief=e.baselineVerbose=void 0;const n=r(1378);e.baselineVerbose=function(t){return n.baselineVerbose(t).replace(/-$/,"")},e.baselineBrief=function(t){return n.baselineBrief(t).replace(/-$/,"")},e.leftSuperscriptVerbose=function(t){return n.superscriptVerbose(t).replace(/^exposant/,"exposant gauche")},e.leftSubscriptVerbose=function(t){return n.subscriptVerbose(t).replace(/^indice/,"indice gauche")},e.leftSuperscriptBrief=function(t){return n.superscriptBrief(t).replace(/^sup/,"sup gauche")},e.leftSubscriptBrief=function(t){return n.subscriptBrief(t).replace(/^sub/,"sub gauche")}},9577:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.MathspeakRules=void 0;const n=r(1676),o=r(365),i=r(7088),s=r(1378),a=r(8437),l=r(7283),c=r(7598);e.MathspeakRules=function(){l.addStore(n.DynamicCstr.BASE_LOCALE+".speech.mathspeak","",{CQFspaceoutNumber:s.spaceoutNumber,CQFspaceoutIdentifier:s.spaceoutIdentifier,CSFspaceoutText:s.spaceoutText,CSFopenFracVerbose:s.openingFractionVerbose,CSFcloseFracVerbose:s.closingFractionVerbose,CSFoverFracVerbose:s.overFractionVerbose,CSFopenFracBrief:s.openingFractionBrief,CSFcloseFracBrief:s.closingFractionBrief,CSFopenFracSbrief:s.openingFractionSbrief,CSFcloseFracSbrief:s.closingFractionSbrief,CSFoverFracSbrief:s.overFractionSbrief,CSFvulgarFraction:a.vulgarFraction,CQFvulgarFractionSmall:s.isSmallVulgarFraction,CSFopenRadicalVerbose:s.openingRadicalVerbose,CSFcloseRadicalVerbose:s.closingRadicalVerbose,CSFindexRadicalVerbose:s.indexRadicalVerbose,CSFopenRadicalBrief:s.openingRadicalBrief,CSFcloseRadicalBrief:s.closingRadicalBrief,CSFindexRadicalBrief:s.indexRadicalBrief,CSFopenRadicalSbrief:s.openingRadicalSbrief,CSFindexRadicalSbrief:s.indexRadicalSbrief,CQFisSmallRoot:s.smallRoot,CSFsuperscriptVerbose:s.superscriptVerbose,CSFsuperscriptBrief:s.superscriptBrief,CSFsubscriptVerbose:s.subscriptVerbose,CSFsubscriptBrief:s.subscriptBrief,CSFbaselineVerbose:s.baselineVerbose,CSFbaselineBrief:s.baselineBrief,CSFleftsuperscriptVerbose:s.superscriptVerbose,CSFleftsubscriptVerbose:s.subscriptVerbose,CSFrightsuperscriptVerbose:s.superscriptVerbose,CSFrightsubscriptVerbose:s.subscriptVerbose,CSFleftsuperscriptBrief:s.superscriptBrief,CSFleftsubscriptBrief:s.subscriptBrief,CSFrightsuperscriptBrief:s.superscriptBrief,CSFrightsubscriptBrief:s.subscriptBrief,CSFunderscript:s.nestedUnderscript,CSFoverscript:s.nestedOverscript,CSFendscripts:s.endscripts,CTFordinalCounter:a.ordinalCounter,CTFwordCounter:a.wordCounter,CTFcontentIterator:o.contentIterator,CQFdetIsSimple:s.determinantIsSimple,CSFRemoveParens:s.removeParens,CQFresetNesting:s.resetNestingDepth,CGFbaselineConstraint:s.generateBaselineConstraint,CGFtensorRules:s.generateTensorRules}),l.addStore("es.speech.mathspeak",n.DynamicCstr.BASE_LOCALE+".speech.mathspeak",{CTFunitMultipliers:c.unitMultipliers,CQFoneLeft:c.oneLeft}),l.addStore("fr.speech.mathspeak",n.DynamicCstr.BASE_LOCALE+".speech.mathspeak",{CSFbaselineVerbose:i.baselineVerbose,CSFbaselineBrief:i.baselineBrief,CSFleftsuperscriptVerbose:i.leftSuperscriptVerbose,CSFleftsubscriptVerbose:i.leftSubscriptVerbose,CSFleftsuperscriptBrief:i.leftSuperscriptBrief,CSFleftsubscriptBrief:i.leftSubscriptBrief})}},1378:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.smallRoot=e.generateTensorRules=e.removeParens=e.generateBaselineConstraint=e.determinantIsSimple=e.nestedOverscript=e.endscripts=e.overscoreNestingDepth=e.nestedUnderscript=e.underscoreNestingDepth=e.indexRadicalSbrief=e.openingRadicalSbrief=e.indexRadicalBrief=e.closingRadicalBrief=e.openingRadicalBrief=e.indexRadicalVerbose=e.closingRadicalVerbose=e.openingRadicalVerbose=e.getRootIndex=e.nestedRadical=e.radicalNestingDepth=e.baselineBrief=e.baselineVerbose=e.superscriptBrief=e.superscriptVerbose=e.subscriptBrief=e.subscriptVerbose=e.nestedSubSuper=e.isSmallVulgarFraction=e.overFractionSbrief=e.closingFractionSbrief=e.openingFractionSbrief=e.closingFractionBrief=e.openingFractionBrief=e.overFractionVerbose=e.closingFractionVerbose=e.openingFractionVerbose=e.nestedFraction=e.fractionNestingDepth=e.computeNestingDepth_=e.containsAttr=e.getNestingDepth=e.resetNestingDepth=e.nestingBarriers=e.spaceoutIdentifier=e.spaceoutNumber=e.spaceoutNodes=e.spaceoutText=void 0;const n=r(707),o=r(5740),i=r(5274),s=r(4356),a=r(3308);let l={};function c(t,e){const r=Array.from(t.textContent),n=[],o=a.default.getInstance(),i=t.ownerDocument;for(let t,s=0;t=r[s];s++){const r=o.getNodeFactory().makeLeafNode(t,"unknown"),s=o.identifierNode(r,"unknown","");e(s),n.push(s.xml(i))}return n}function u(t,r,i,s,a,c){s=s||e.nestingBarriers,a=a||{},c=c||function(t){return!1};const u=o.serializeXml(r);if(l[t]||(l[t]={}),l[t][u])return l[t][u];if(c(r)||i.indexOf(r.tagName)<0)return 0;const p=h(r,i,n.setdifference(s,i),a,c,0);return l[t][u]=p,p}function p(t,e){if(!t.attributes)return!1;const r=o.toArray(t.attributes);for(let t,n=0;t=r[n];n++)if(e[t.nodeName]===t.nodeValue)return!0;return!1}function h(t,e,r,n,i,s){if(i(t)||r.indexOf(t.tagName)>-1||p(t,n))return s;if(e.indexOf(t.tagName)>-1&&s++,!t.childNodes||0===t.childNodes.length)return s;const a=o.toArray(t.childNodes);return Math.max.apply(null,a.map((function(t){return h(t,e,r,n,i,s)})))}function f(t){return u("fraction",t,["fraction"],e.nestingBarriers,{},s.LOCALE.FUNCTIONS.fracNestDepth)}function d(t,e,r){const n=f(t),o=Array(n).fill(e);return r&&o.push(r),o.join(s.LOCALE.MESSAGES.regexp.JOINER_FRAC)}function m(t,e,r){for(;t.parentNode;){const n=t.parentNode,o=n.parentNode;if(!o)break;const i=t.getAttribute&&t.getAttribute("role");("subscript"===o.tagName&&t===n.childNodes[1]||"tensor"===o.tagName&&i&&("leftsub"===i||"rightsub"===i))&&(e=r.sub+s.LOCALE.MESSAGES.regexp.JOINER_SUBSUPER+e),("superscript"===o.tagName&&t===n.childNodes[1]||"tensor"===o.tagName&&i&&("leftsuper"===i||"rightsuper"===i))&&(e=r.sup+s.LOCALE.MESSAGES.regexp.JOINER_SUBSUPER+e),t=o}return e.trim()}function y(t){return u("radical",t,["sqrt","root"],e.nestingBarriers,{})}function g(t,e,r){const n=y(t),o=b(t);return r=o?s.LOCALE.FUNCTIONS.combineRootIndex(r,o):r,1===n?r:s.LOCALE.FUNCTIONS.combineNestedRadical(e,s.LOCALE.FUNCTIONS.radicalNestDepth(n-1),r)}function b(t){const e="sqrt"===t.tagName?"2":i.evalXPath("children/*[1]",t)[0].textContent.trim();return s.LOCALE.MESSAGES.MSroots[e]||""}function v(t){return u("underscore",t,["underscore"],e.nestingBarriers,{},(function(t){return t.tagName&&"underscore"===t.tagName&&"underaccent"===t.childNodes[0].childNodes[1].getAttribute("role")}))}function _(t){return u("overscore",t,["overscore"],e.nestingBarriers,{},(function(t){return t.tagName&&"overscore"===t.tagName&&"overaccent"===t.childNodes[0].childNodes[1].getAttribute("role")}))}e.spaceoutText=function(t){return Array.from(t.textContent).join(" ")},e.spaceoutNodes=c,e.spaceoutNumber=function(t){return c(t,(function(t){t.textContent.match(/\W/)||(t.type="number")}))},e.spaceoutIdentifier=function(t){return c(t,(function(t){t.font="unknown",t.type="identifier"}))},e.nestingBarriers=["cases","cell","integral","line","matrix","multiline","overscore","root","row","sqrt","subscript","superscript","table","underscore","vector"],e.resetNestingDepth=function(t){return l={},[t]},e.getNestingDepth=u,e.containsAttr=p,e.computeNestingDepth_=h,e.fractionNestingDepth=f,e.nestedFraction=d,e.openingFractionVerbose=function(t){return d(t,s.LOCALE.MESSAGES.MS.START,s.LOCALE.MESSAGES.MS.FRAC_V)},e.closingFractionVerbose=function(t){return d(t,s.LOCALE.MESSAGES.MS.END,s.LOCALE.MESSAGES.MS.FRAC_V)},e.overFractionVerbose=function(t){return d(t,s.LOCALE.MESSAGES.MS.FRAC_OVER)},e.openingFractionBrief=function(t){return d(t,s.LOCALE.MESSAGES.MS.START,s.LOCALE.MESSAGES.MS.FRAC_B)},e.closingFractionBrief=function(t){return d(t,s.LOCALE.MESSAGES.MS.END,s.LOCALE.MESSAGES.MS.FRAC_B)},e.openingFractionSbrief=function(t){const e=f(t);return 1===e?s.LOCALE.MESSAGES.MS.FRAC_S:s.LOCALE.FUNCTIONS.combineNestedFraction(s.LOCALE.MESSAGES.MS.NEST_FRAC,s.LOCALE.FUNCTIONS.radicalNestDepth(e-1),s.LOCALE.MESSAGES.MS.FRAC_S)},e.closingFractionSbrief=function(t){const e=f(t);return 1===e?s.LOCALE.MESSAGES.MS.ENDFRAC:s.LOCALE.FUNCTIONS.combineNestedFraction(s.LOCALE.MESSAGES.MS.NEST_FRAC,s.LOCALE.FUNCTIONS.radicalNestDepth(e-1),s.LOCALE.MESSAGES.MS.ENDFRAC)},e.overFractionSbrief=function(t){const e=f(t);return 1===e?s.LOCALE.MESSAGES.MS.FRAC_OVER:s.LOCALE.FUNCTIONS.combineNestedFraction(s.LOCALE.MESSAGES.MS.NEST_FRAC,s.LOCALE.FUNCTIONS.radicalNestDepth(e-1),s.LOCALE.MESSAGES.MS.FRAC_OVER)},e.isSmallVulgarFraction=function(t){return s.LOCALE.FUNCTIONS.fracNestDepth(t)?[t]:[]},e.nestedSubSuper=m,e.subscriptVerbose=function(t){return m(t,s.LOCALE.MESSAGES.MS.SUBSCRIPT,{sup:s.LOCALE.MESSAGES.MS.SUPER,sub:s.LOCALE.MESSAGES.MS.SUB})},e.subscriptBrief=function(t){return m(t,s.LOCALE.MESSAGES.MS.SUB,{sup:s.LOCALE.MESSAGES.MS.SUP,sub:s.LOCALE.MESSAGES.MS.SUB})},e.superscriptVerbose=function(t){return m(t,s.LOCALE.MESSAGES.MS.SUPERSCRIPT,{sup:s.LOCALE.MESSAGES.MS.SUPER,sub:s.LOCALE.MESSAGES.MS.SUB})},e.superscriptBrief=function(t){return m(t,s.LOCALE.MESSAGES.MS.SUP,{sup:s.LOCALE.MESSAGES.MS.SUP,sub:s.LOCALE.MESSAGES.MS.SUB})},e.baselineVerbose=function(t){const e=m(t,"",{sup:s.LOCALE.MESSAGES.MS.SUPER,sub:s.LOCALE.MESSAGES.MS.SUB});return e?e.replace(new RegExp(s.LOCALE.MESSAGES.MS.SUB+"$"),s.LOCALE.MESSAGES.MS.SUBSCRIPT).replace(new RegExp(s.LOCALE.MESSAGES.MS.SUPER+"$"),s.LOCALE.MESSAGES.MS.SUPERSCRIPT):s.LOCALE.MESSAGES.MS.BASELINE},e.baselineBrief=function(t){return m(t,"",{sup:s.LOCALE.MESSAGES.MS.SUP,sub:s.LOCALE.MESSAGES.MS.SUB})||s.LOCALE.MESSAGES.MS.BASE},e.radicalNestingDepth=y,e.nestedRadical=g,e.getRootIndex=b,e.openingRadicalVerbose=function(t){return g(t,s.LOCALE.MESSAGES.MS.NESTED,s.LOCALE.MESSAGES.MS.STARTROOT)},e.closingRadicalVerbose=function(t){return g(t,s.LOCALE.MESSAGES.MS.NESTED,s.LOCALE.MESSAGES.MS.ENDROOT)},e.indexRadicalVerbose=function(t){return g(t,s.LOCALE.MESSAGES.MS.NESTED,s.LOCALE.MESSAGES.MS.ROOTINDEX)},e.openingRadicalBrief=function(t){return g(t,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.STARTROOT)},e.closingRadicalBrief=function(t){return g(t,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.ENDROOT)},e.indexRadicalBrief=function(t){return g(t,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.ROOTINDEX)},e.openingRadicalSbrief=function(t){return g(t,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.ROOT)},e.indexRadicalSbrief=function(t){return g(t,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.INDEX)},e.underscoreNestingDepth=v,e.nestedUnderscript=function(t){const e=v(t);return Array(e).join(s.LOCALE.MESSAGES.MS.UNDER)+s.LOCALE.MESSAGES.MS.UNDERSCRIPT},e.overscoreNestingDepth=_,e.endscripts=function(t){return s.LOCALE.MESSAGES.MS.ENDSCRIPTS},e.nestedOverscript=function(t){const e=_(t);return Array(e).join(s.LOCALE.MESSAGES.MS.OVER)+s.LOCALE.MESSAGES.MS.OVERSCRIPT},e.determinantIsSimple=function(t){if("matrix"!==t.tagName||"determinant"!==t.getAttribute("role"))return[];const e=i.evalXPath("children/row/children/cell/children/*",t);for(let t,r=0;t=e[r];r++)if("number"!==t.tagName){if("identifier"===t.tagName){const e=t.getAttribute("role");if("latinletter"===e||"greekletter"===e||"otherletter"===e)continue}return[]}return[t]},e.generateBaselineConstraint=function(){const t=t=>t.map((t=>"ancestor::"+t)),e=t=>"not("+t+")",r=e(t(["subscript","superscript","tensor"]).join(" or ")),n=t(["relseq","multrel"]),o=t(["fraction","punctuation","fenced","sqrt","root"]);let i=[];for(let t,e=0;t=o[e];e++)i=i.concat(n.map((function(e){return t+"/"+e})));return[["ancestor::*/following-sibling::*",r,e(i.join(" | "))].join(" and ")]},e.removeParens=function(t){if(!t.childNodes.length||!t.childNodes[0].childNodes.length||!t.childNodes[0].childNodes[0].childNodes.length)return"";const e=t.childNodes[0].childNodes[0].childNodes[0].textContent;return e.match(/^\(.+\)$/)?e.slice(1,-1):e};const S=new Map([[3,"CSFleftsuperscript"],[4,"CSFleftsubscript"],[2,"CSFbaseline"],[1,"CSFrightsubscript"],[0,"CSFrightsuperscript"]]),M=new Map([[4,2],[3,3],[2,1],[1,4],[0,5]]);function O(t){const e=[];let r="",n="",o=parseInt(t,2);for(let t=0;t<5;t++){const i="children/*["+M.get(t)+"]";if(1&o){const e=S.get(t%5);r="[t] "+e+"Verbose; [n] "+i+";"+r,n="[t] "+e+"Brief; [n] "+i+";"+n}else e.unshift("name("+i+')="empty"');o>>=1}return[e,r,n]}e.generateTensorRules=function(t,e=!0){const r=["11111","11110","11101","11100","10111","10110","10101","10100","01111","01110","01101","01100"];for(let n,o=0;n=r[o];o++){let r="tensor"+n,[o,i,s]=O(n);t.defineRule(r,"default",i,"self::tensor",...o),e&&(t.defineRule(r,"brief",s,"self::tensor",...o),t.defineRule(r,"sbrief",s,"self::tensor",...o));const a=S.get(2);i+="; [t]"+a+"Verbose",s+="; [t]"+a+"Brief",r+="-baseline";const l="((.//*[not(*)])[last()]/@id)!=(((.//ancestor::fraction|ancestor::root|ancestor::sqrt|ancestor::cell|ancestor::line|ancestor::stree)[1]//*[not(*)])[last()]/@id)";t.defineRule(r,"default",i,"self::tensor",l,...o),e&&(t.defineRule(r,"brief",s,"self::tensor",l,...o),t.defineRule(r,"sbrief",s,"self::tensor",l,...o))}},e.smallRoot=function(t){let e=Object.keys(s.LOCALE.MESSAGES.MSroots).length;if(!e)return[];if(e++,!t.childNodes||0===t.childNodes.length||!t.childNodes[0].childNodes)return[];const r=t.childNodes[0].childNodes[0].textContent;if(!/^\d+$/.test(r))return[];const n=parseInt(r,10);return n>1&&n<=e?[t]:[]}},6922:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.implicitIterator=e.relationIterator=e.propagateNumber=e.checkParent_=e.NUMBER_INHIBITORS_=e.NUMBER_PROPAGATORS_=e.enlargeFence=e.indexRadical=e.closingRadical=e.openingRadical=e.radicalNestingDepth=e.nestedRadical=e.overBevelledFraction=e.overFraction=e.closingFraction=e.openingFraction=void 0;const n=r(7052),o=r(5740),i=r(5274),s=r(2105),a=r(5897),l=r(7630),c=r(9265),u=r(4356),p=r(1378);function h(t,e){const r=f(t);return 1===r?e:new Array(r).join(u.LOCALE.MESSAGES.MS.NESTED)+e}function f(t,e){const r=e||0;return t.parentNode?f(t.parentNode,"root"===t.tagName||"sqrt"===t.tagName?r+1:r):r}function d(t){const e="\u2820";if(1===t.length)return e+t;const r=t.split("");return r.every((function(t){return"\u2833"===t}))?e+r.join(e):t.slice(0,-1)+e+t.slice(-1)}function m(t,r){const n=t.parent;if(!n)return!1;const o=n.type;return-1!==e.NUMBER_PROPAGATORS_.indexOf(o)||"prefixop"===o&&"negative"===n.role&&!r.script||"prefixop"===o&&"geometry"===n.role||!("punctuated"!==o||r.enclosed&&"text"!==n.role)}function y(t,r){return t.childNodes.length?(-1!==e.NUMBER_INHIBITORS_.indexOf(t.type)&&(r.script=!0),"fenced"===t.type?(r.number=!1,r.enclosed=!0,["",r]):(m(t,r)&&(r.number=!0,r.enclosed=!1),["",r])):(m(t,r)&&(r.number=!0,r.script=!1,r.enclosed=!1),[r.number?"number":"",{number:!1,enclosed:r.enclosed,script:r.script}])}e.openingFraction=function(t){const e=p.fractionNestingDepth(t);return new Array(e).join(u.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+u.LOCALE.MESSAGES.MS.FRACTION_START},e.closingFraction=function(t){const e=p.fractionNestingDepth(t);return new Array(e).join(u.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+u.LOCALE.MESSAGES.MS.FRACTION_END},e.overFraction=function(t){const e=p.fractionNestingDepth(t);return new Array(e).join(u.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+u.LOCALE.MESSAGES.MS.FRACTION_OVER},e.overBevelledFraction=function(t){const e=p.fractionNestingDepth(t);return new Array(e).join(u.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+"\u2838"+u.LOCALE.MESSAGES.MS.FRACTION_OVER},e.nestedRadical=h,e.radicalNestingDepth=f,e.openingRadical=function(t){return h(t,u.LOCALE.MESSAGES.MS.STARTROOT)},e.closingRadical=function(t){return h(t,u.LOCALE.MESSAGES.MS.ENDROOT)},e.indexRadical=function(t){return h(t,u.LOCALE.MESSAGES.MS.ROOTINDEX)},e.enlargeFence=d,s.Grammar.getInstance().setCorrection("enlargeFence",d),e.NUMBER_PROPAGATORS_=["multirel","relseq","appl","row","line"],e.NUMBER_INHIBITORS_=["subscript","superscript","overscore","underscore"],e.checkParent_=m,e.propagateNumber=y,(0,l.register)(new c.SemanticVisitor("nemeth","number",y,{number:!0})),e.relationIterator=function(t,e){const r=t.slice(0);let s,l=!0;return s=t.length>0?i.evalXPath("../../content/*",t[0]):[],function(){const t=s.shift(),i=r.shift(),c=r[0],h=e?[n.AuditoryDescription.create({text:e},{translate:!0})]:[];if(!t)return h;const f=i?p.nestedSubSuper(i,"",{sup:u.LOCALE.MESSAGES.MS.SUPER,sub:u.LOCALE.MESSAGES.MS.SUB}):"",d=i&&"EMPTY"!==o.tagName(i)||l&&t.parentNode.parentNode&&t.parentNode.parentNode.previousSibling?[n.AuditoryDescription.create({text:"\u2800"+f},{})]:[],m=c&&"EMPTY"!==o.tagName(c)||!s.length&&t.parentNode.parentNode&&t.parentNode.parentNode.nextSibling?[n.AuditoryDescription.create({text:"\u2800"},{})]:[],y=a.default.evaluateNode(t);return l=!1,h.concat(d,y,m)}},e.implicitIterator=function(t,e){const r=t.slice(0);let s;return s=t.length>0?i.evalXPath("../../content/*",t[0]):[],function(){const t=r.shift(),i=r[0],a=s.shift(),l=e?[n.AuditoryDescription.create({text:e},{translate:!0})]:[];if(!a)return l;const c=t&&"NUMBER"===o.tagName(t),u=i&&"NUMBER"===o.tagName(i);return l.concat(c&&u&&"space"===a.getAttribute("role")?[n.AuditoryDescription.create({text:"\u2800"},{})]:[])}}},8437:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ordinalPosition=e.vulgarFraction=e.wordCounter=e.ordinalCounter=void 0;const n=r(9536),o=r(5740),i=r(4356),s=r(4977);e.ordinalCounter=function(t,e){let r=0;return function(){return i.LOCALE.NUMBERS.numericOrdinal(++r)+" "+e}},e.wordCounter=function(t,e){let r=0;return function(){return i.LOCALE.NUMBERS.numberToOrdinal(++r,!1)+" "+e}},e.vulgarFraction=function(t){const e=(0,s.convertVulgarFraction)(t,i.LOCALE.MESSAGES.MS.FRAC_OVER);return e.convertible&&e.enumerator&&e.denominator?[new n.Span(i.LOCALE.NUMBERS.numberToWords(e.enumerator),{extid:t.childNodes[0].childNodes[0].getAttribute("extid"),separator:""}),new n.Span(i.LOCALE.NUMBERS.vulgarSep,{separator:""}),new n.Span(i.LOCALE.NUMBERS.numberToOrdinal(e.denominator,1!==e.enumerator),{extid:t.childNodes[0].childNodes[1].getAttribute("extid")})]:[new n.Span(e.content||"",{extid:t.getAttribute("extid")})]},e.ordinalPosition=function(t){const e=o.toArray(t.parentNode.childNodes);return i.LOCALE.NUMBERS.numericOrdinal(e.indexOf(t)+1).toString()}},9284:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.BrailleRules=e.OtherRules=e.PrefixRules=void 0;const n=r(1676),o=r(365),i=r(1378),s=r(6922),a=r(8437),l=r(7283);e.PrefixRules=function(){l.addStore("en.prefix.default","",{CSFordinalPosition:a.ordinalPosition})},e.OtherRules=function(){l.addStore("en.speech.chromevox","",{CTFnodeCounter:o.nodeCounter,CTFcontentIterator:o.contentIterator}),l.addStore("en.speech.emacspeak","en.speech.chromevox",{CQFvulgarFractionSmall:i.isSmallVulgarFraction,CSFvulgarFraction:a.vulgarFraction})},e.BrailleRules=function(){l.addStore("nemeth.braille.default",n.DynamicCstr.BASE_LOCALE+".speech.mathspeak",{CSFopenFraction:s.openingFraction,CSFcloseFraction:s.closingFraction,CSFoverFraction:s.overFraction,CSFoverBevFraction:s.overBevelledFraction,CSFopenRadical:s.openingRadical,CSFcloseRadical:s.closingRadical,CSFindexRadical:s.indexRadical,CSFsubscript:i.subscriptVerbose,CSFsuperscript:i.superscriptVerbose,CSFbaseline:i.baselineVerbose,CGFtensorRules:t=>i.generateTensorRules(t,!1),CTFrelationIterator:s.relationIterator,CTFimplicitIterator:s.implicitIterator})}},7599:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.init=e.INIT_=void 0;const n=r(5425),o=r(9577),i=r(9284);e.INIT_=!1,e.init=function(){e.INIT_||((0,o.MathspeakRules)(),(0,n.ClearspeakRules)(),(0,i.PrefixRules)(),(0,i.OtherRules)(),(0,i.BrailleRules)(),e.INIT_=!0)}},7283:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.getStore=e.addStore=e.funcStore=void 0;const n=r(1676);e.funcStore=new Map,e.addStore=function(t,r,n){const o={};if(r){const t=e.funcStore.get(r)||{};Object.assign(o,t)}e.funcStore.set(t,Object.assign(o,n))},e.getStore=function(t,r,o){return e.funcStore.get([t,r,o].join("."))||e.funcStore.get([n.DynamicCstr.DEFAULT_VALUES[n.Axis.LOCALE],r,o].join("."))||e.funcStore.get([n.DynamicCstr.BASE_LOCALE,r,o].join("."))||{}}},7598:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.oneLeft=e.leftMostUnit=e.rightMostUnit=e.unitMultipliers=void 0;const n=r(7052),o=r(5274),i=r(4356);e.unitMultipliers=function(t,e){const r=t;let o=0;return function(){const t=n.AuditoryDescription.create({text:a(r[o])&&l(r[o+1])?i.LOCALE.MESSAGES.unitTimes:""},{});return o++,[t]}};const s=["superscript","subscript","overscore","underscore"];function a(t){for(;t;){if("unit"===t.getAttribute("role"))return!0;const e=t.tagName,r=o.evalXPath("children/*",t);t=-1!==s.indexOf(e)?r[0]:r[r.length-1]}return!1}function l(t){for(;t;){if("unit"===t.getAttribute("role"))return!0;t=o.evalXPath("children/*",t)[0]}return!1}e.rightMostUnit=a,e.leftMostUnit=l,e.oneLeft=function(t){for(;t;){if("number"===t.tagName&&"1"===t.textContent)return[t];if("infixop"!==t.tagName||"multiplication"!==t.getAttribute("role")&&"implicit"!==t.getAttribute("role"))return[];t=o.evalXPath("children/*",t)[0]}return[]}},3284:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractWalker=void 0;const n=r(7052),o=r(8290),i=r(5740),s=r(4440),a=r(6828),l=r(8496),c=r(2298),u=r(4356),p=r(2105),h=r(5656),f=r(9552),d=r(9543),m=r(8504),y=r(7730),g=r(1214),b=r(179),v=r(1204),_=r(5274);class S{constructor(t,e,r,n){this.node=t,this.generator=e,this.highlighter=r,this.modifier=!1,this.keyMapping=new Map([[l.KeyCode.UP,this.up.bind(this)],[l.KeyCode.DOWN,this.down.bind(this)],[l.KeyCode.RIGHT,this.right.bind(this)],[l.KeyCode.LEFT,this.left.bind(this)],[l.KeyCode.TAB,this.repeat.bind(this)],[l.KeyCode.DASH,this.expand.bind(this)],[l.KeyCode.SPACE,this.depth.bind(this)],[l.KeyCode.HOME,this.home.bind(this)],[l.KeyCode.X,this.summary.bind(this)],[l.KeyCode.Z,this.detail.bind(this)],[l.KeyCode.V,this.virtualize.bind(this)],[l.KeyCode.P,this.previous.bind(this)],[l.KeyCode.U,this.undo.bind(this)],[l.KeyCode.LESS,this.previousRules.bind(this)],[l.KeyCode.GREATER,this.nextRules.bind(this)]]),this.cursors=[],this.xml_=null,this.rebuilt_=null,this.focus_=null,this.active_=!1,this.node.id?this.id=this.node.id:this.node.hasAttribute(S.SRE_ID_ATTR)?this.id=this.node.getAttribute(S.SRE_ID_ATTR):(this.node.setAttribute(S.SRE_ID_ATTR,S.ID_COUNTER.toString()),this.id=S.ID_COUNTER++),this.rootNode=v.getSemanticRoot(t),this.rootId=this.rootNode.getAttribute(c.Attribute.ID),this.xmlString_=n,this.moved=b.WalkerMoves.ENTER}getXml(){return this.xml_||(this.xml_=i.parseInput(this.xmlString_)),this.xml_}getRebuilt(){return this.rebuilt_||this.rebuildStree(),this.rebuilt_}isActive(){return this.active_}activate(){this.isActive()||(this.generator.start(),this.toggleActive_())}deactivate(){this.isActive()&&(b.WalkerState.setState(this.id,this.primaryId()),this.generator.end(),this.toggleActive_())}getFocus(t=!1){return this.focus_||(this.focus_=this.singletonFocus(this.rootId)),t&&this.updateFocus(),this.focus_}setFocus(t){this.focus_=t}getDepth(){return this.levels.depth()-1}isSpeech(){return this.generator.modality===c.Attribute.SPEECH}focusDomNodes(){return this.getFocus().getDomNodes()}focusSemanticNodes(){return this.getFocus().getSemanticNodes()}speech(){const t=this.focusDomNodes();if(!t.length)return"";const e=this.specialMove();if(null!==e)return e;switch(this.moved){case b.WalkerMoves.DEPTH:return this.depth_();case b.WalkerMoves.SUMMARY:return this.summary_();case b.WalkerMoves.DETAIL:return this.detail_();default:{const e=[],r=this.focusSemanticNodes();for(let n=0,o=t.length;n<o;n++){const o=t[n],i=r[n];e.push(o?this.generator.getSpeech(o,this.getXml()):d.recomputeMarkup(i))}return this.mergePrefix_(e)}}}move(t){const e=this.keyMapping.get(t);if(!e)return null;const r=e();return!(!r||r===this.getFocus())&&(this.setFocus(r),this.moved===b.WalkerMoves.HOME&&(this.levels=this.initLevels()),!0)}up(){return this.moved=b.WalkerMoves.UP,this.getFocus()}down(){return this.moved=b.WalkerMoves.DOWN,this.getFocus()}left(){return this.moved=b.WalkerMoves.LEFT,this.getFocus()}right(){return this.moved=b.WalkerMoves.RIGHT,this.getFocus()}repeat(){return this.moved=b.WalkerMoves.REPEAT,this.getFocus().clone()}depth(){return this.moved=this.isSpeech()?b.WalkerMoves.DEPTH:b.WalkerMoves.REPEAT,this.getFocus().clone()}home(){this.moved=b.WalkerMoves.HOME;return this.singletonFocus(this.rootId)}getBySemanticId(t){return v.getBySemanticId(this.node,t)}primaryId(){return this.getFocus().getSemanticPrimary().id.toString()}expand(){const t=this.getFocus().getDomPrimary(),e=this.actionable_(t);return e?(this.moved=b.WalkerMoves.EXPAND,e.dispatchEvent(new Event("click")),this.getFocus().clone()):this.getFocus()}expandable(t){return!!this.actionable_(t)&&0===t.childNodes.length}collapsible(t){return!!this.actionable_(t)&&t.childNodes.length>0}restoreState(){if(!this.highlighter)return;const t=b.WalkerState.getState(this.id);if(!t)return;let e=this.getRebuilt().nodeDict[t];const r=[];for(;e;)r.push(e.id),e=e.parent;for(r.pop();r.length>0;){this.down();const t=r.pop(),e=this.findFocusOnLevel(t);if(!e)break;this.setFocus(e)}this.moved=b.WalkerMoves.ENTER}updateFocus(){this.setFocus(y.Focus.factory(this.getFocus().getSemanticPrimary().id.toString(),this.getFocus().getSemanticNodes().map((t=>t.id.toString())),this.getRebuilt(),this.node))}rebuildStree(){this.rebuilt_=new g.RebuildStree(this.getXml()),this.rootId=this.rebuilt_.stree.root.id.toString(),this.generator.setRebuilt(this.rebuilt_),this.skeleton=h.SemanticSkeleton.fromTree(this.rebuilt_.stree),this.skeleton.populate(),this.focus_=this.singletonFocus(this.rootId),this.levels=this.initLevels(),d.connectMactions(this.node,this.getXml(),this.rebuilt_.xml)}previousLevel(){const t=this.getFocus().getDomPrimary();return t?v.getAttribute(t,c.Attribute.PARENT):this.getFocus().getSemanticPrimary().parent.id.toString()}nextLevel(){const t=this.getFocus().getDomPrimary();let e,r;if(t){e=v.splitAttribute(v.getAttribute(t,c.Attribute.CHILDREN)),r=v.splitAttribute(v.getAttribute(t,c.Attribute.CONTENT));const n=v.getAttribute(t,c.Attribute.TYPE),o=v.getAttribute(t,c.Attribute.ROLE);return this.combineContentChildren(n,o,r,e)}const n=t=>t.id.toString(),o=this.getRebuilt().nodeDict[this.primaryId()];return e=o.childNodes.map(n),r=o.contentNodes.map(n),0===e.length?[]:this.combineContentChildren(o.type,o.role,r,e)}singletonFocus(t){this.getRebuilt();const e=this.retrieveVisuals(t);return this.focusFromId(t,e)}retrieveVisuals(t){if(!this.skeleton)return[t];const e=parseInt(t,10),r=this.skeleton.subtreeNodes(e);if(!r.length)return[t];r.unshift(e);const n={},o=[];_.updateEvaluator(this.getXml());for(const t of r)n[t]||(o.push(t.toString()),n[t]=!0,this.subtreeIds(t,n));return o}subtreeIds(t,e){const r=_.evalXPath(`//*[@data-semantic-id="${t}"]`,this.getXml());_.evalXPath("*//@data-semantic-id",r[0]).forEach((t=>e[parseInt(t.textContent,10)]=!0))}focusFromId(t,e){return y.Focus.factory(t,e,this.getRebuilt(),this.node)}summary(){return this.moved=this.isSpeech()?b.WalkerMoves.SUMMARY:b.WalkerMoves.REPEAT,this.getFocus().clone()}detail(){return this.moved=this.isSpeech()?b.WalkerMoves.DETAIL:b.WalkerMoves.REPEAT,this.getFocus().clone()}specialMove(){return null}virtualize(t){return this.cursors.push({focus:this.getFocus(),levels:this.levels,undo:t||!this.cursors.length}),this.levels=this.levels.clone(),this.getFocus().clone()}previous(){const t=this.cursors.pop();return t?(this.levels=t.levels,t.focus):this.getFocus()}undo(){let t;do{t=this.cursors.pop()}while(t&&!t.undo);return t?(this.levels=t.levels,t.focus):this.getFocus()}update(t){this.generator.setOptions(t),(0,a.setup)(t).then((()=>f.generator("Tree").getSpeech(this.node,this.getXml())))}nextRules(){const t=this.generator.getOptions();return"speech"!==t.modality?this.getFocus():(s.DOMAIN_TO_STYLES[t.domain]=t.style,t.domain="mathspeak"===t.domain?"clearspeak":"mathspeak",t.style=s.DOMAIN_TO_STYLES[t.domain],this.update(t),this.moved=b.WalkerMoves.REPEAT,this.getFocus().clone())}nextStyle(t,e){if("mathspeak"===t){const t=["default","brief","sbrief"],r=t.indexOf(e);return-1===r?e:r>=t.length-1?t[0]:t[r+1]}if("clearspeak"===t){const t=m.ClearspeakPreferences.getLocalePreferences().en;if(!t)return"default";const r=m.ClearspeakPreferences.relevantPreferences(this.getFocus().getSemanticPrimary()),n=m.ClearspeakPreferences.findPreference(e,r),o=t[r].map((function(t){return t.split("_")[1]})),i=o.indexOf(n);if(-1===i)return e;const s=i>=o.length-1?o[0]:o[i+1];return m.ClearspeakPreferences.addPreference(e,r,s)}return e}previousRules(){const t=this.generator.getOptions();return"speech"!==t.modality?this.getFocus():(t.style=this.nextStyle(t.domain,t.style),this.update(t),this.moved=b.WalkerMoves.REPEAT,this.getFocus().clone())}refocus(){let t,e=this.getFocus();for(;!e.getNodes().length;){t=this.levels.peek();const r=this.up();if(!r)break;this.setFocus(r),e=this.getFocus(!0)}this.levels.push(t),this.setFocus(e)}toggleActive_(){this.active_=!this.active_}mergePrefix_(t,e=[]){const r=this.isSpeech()?this.prefix_():"";r&&t.unshift(r);const n=this.isSpeech()?this.postfix_():"";return n&&t.push(n),o.finalize(o.merge(e.concat(t)))}prefix_(){const t=this.getFocus().getDomNodes(),e=this.getFocus().getSemanticNodes();return t[0]?v.getAttribute(t[0],c.Attribute.PREFIX):d.retrievePrefix(e[0])}postfix_(){const t=this.getFocus().getDomNodes();return t[0]?v.getAttribute(t[0],c.Attribute.POSTFIX):""}depth_(){const t=p.Grammar.getInstance().getParameter("depth");p.Grammar.getInstance().setParameter("depth",!0);const e=this.getFocus().getDomPrimary(),r=this.expandable(e)?u.LOCALE.MESSAGES.navigate.EXPANDABLE:this.collapsible(e)?u.LOCALE.MESSAGES.navigate.COLLAPSIBLE:"",i=u.LOCALE.MESSAGES.navigate.LEVEL+" "+this.getDepth(),s=this.getFocus().getSemanticNodes(),a=d.retrievePrefix(s[0]),l=[new n.AuditoryDescription({text:i,personality:{}}),new n.AuditoryDescription({text:a,personality:{}}),new n.AuditoryDescription({text:r,personality:{}})];return p.Grammar.getInstance().setParameter("depth",t),o.finalize(o.markup(l))}actionable_(t){const e=null==t?void 0:t.parentNode;return e&&this.highlighter.isMactionNode(e)?e:null}summary_(){const t=this.getFocus().getSemanticPrimary().id.toString(),e=this.getRebuilt().xml.getAttribute("id")===t?this.getRebuilt().xml:i.querySelectorAllByAttrValue(this.getRebuilt().xml,"id",t)[0],r=d.retrieveSummary(e);return this.mergePrefix_([r])}detail_(){const t=this.getFocus().getSemanticPrimary().id.toString(),e=this.getRebuilt().xml.getAttribute("id")===t?this.getRebuilt().xml:i.querySelectorAllByAttrValue(this.getRebuilt().xml,"id",t)[0],r=e.getAttribute("alternative");e.removeAttribute("alternative");const n=d.computeMarkup(e),o=this.mergePrefix_([n]);return e.setAttribute("alternative",r),o}}e.AbstractWalker=S,S.ID_COUNTER=0,S.SRE_ID_ATTR="sre-explorer-id"},162:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.DummyWalker=void 0;const n=r(3284);class o extends n.AbstractWalker{up(){return null}down(){return null}left(){return null}right(){return null}repeat(){return null}depth(){return null}home(){return null}getDepth(){return 0}initLevels(){return null}combineContentChildren(t,e,r,n){return[]}findFocusOnLevel(t){return null}}e.DummyWalker=o},7730:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Focus=void 0;const n=r(1204);class o{constructor(t,e){this.nodes=t,this.primary=e,this.domNodes=[],this.domPrimary_=null,this.allNodes=[]}static factory(t,e,r,i){const s=t=>n.getBySemanticId(i,t),a=r.nodeDict,l=s(t),c=e.map(s),u=e.map((function(t){return a[t]})),p=new o(u,a[t]);return p.domNodes=c,p.domPrimary_=l,p.allNodes=o.generateAllVisibleNodes_(e,c,a,i),p}static generateAllVisibleNodes_(t,e,r,i){const s=t=>n.getBySemanticId(i,t);let a=[];for(let n=0,l=t.length;n<l;n++){if(e[n]){a.push(e[n]);continue}const l=r[t[n]];if(!l)continue;const c=l.childNodes.map((function(t){return t.id.toString()})),u=c.map(s);a=a.concat(o.generateAllVisibleNodes_(c,u,r,i))}return a}getSemanticPrimary(){return this.primary}getSemanticNodes(){return this.nodes}getNodes(){return this.allNodes}getDomNodes(){return this.domNodes}getDomPrimary(){return this.domPrimary_}toString(){return"Primary:"+this.domPrimary_+" Nodes:"+this.domNodes}clone(){const t=new o(this.nodes,this.primary);return t.domNodes=this.domNodes,t.domPrimary_=this.domPrimary_,t.allNodes=this.allNodes,t}}e.Focus=o},9797:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Levels=void 0;class r{constructor(){this.level_=[]}push(t){this.level_.push(t)}pop(){return this.level_.pop()}peek(){return this.level_[this.level_.length-1]||null}indexOf(t){const e=this.peek();return e?e.indexOf(t):null}find(t){const e=this.peek();if(!e)return null;for(let r=0,n=e.length;r<n;r++)if(t(e[r]))return e[r];return null}get(t){const e=this.peek();return!e||t<0||t>=e.length?null:e[t]}depth(){return this.level_.length}clone(){const t=new r;return t.level_=this.level_.slice(0),t}toString(){let t="";for(let e,r=0;e=this.level_[r];r++)t+="\n"+e.map((function(t){return t.toString()}));return t}}e.Levels=r},1214:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.RebuildStree=void 0;const n=r(5740),o=r(2298),i=r(3588),s=r(6537),a=r(3308),l=r(5656),c=r(7075),u=r(4795),p=r(1204);class h{constructor(t){this.mathml=t,this.factory=new s.SemanticNodeFactory,this.nodeDict={},this.mmlRoot=p.getSemanticRoot(t),this.streeRoot=this.assembleTree(this.mmlRoot),this.stree=c.SemanticTree.fromNode(this.streeRoot,this.mathml),this.xml=this.stree.xml(),a.default.getInstance().setNodeFactory(this.factory)}static addAttributes(t,e,r){r&&1===e.childNodes.length&&e.childNodes[0].nodeType!==n.NodeType.TEXT_NODE&&u.addAttributes(t,e.childNodes[0]),u.addAttributes(t,e)}static textContent(t,e,r){if(!r&&e.textContent)return void(t.textContent=e.textContent);const n=p.splitAttribute(p.getAttribute(e,o.Attribute.OPERATOR));n.length>1&&(t.textContent=n[1])}static isPunctuated(t){return!l.SemanticSkeleton.simpleCollapseStructure(t)&&t[1]&&l.SemanticSkeleton.contentCollapseStructure(t[1])}getTree(){return this.stree}assembleTree(t){const e=this.makeNode(t),r=p.splitAttribute(p.getAttribute(t,o.Attribute.CHILDREN)),n=p.splitAttribute(p.getAttribute(t,o.Attribute.CONTENT));if(h.addAttributes(e,t,!(r.length||n.length)),0===n.length&&0===r.length)return h.textContent(e,t),e;if(n.length>0){const t=p.getBySemanticId(this.mathml,n[0]);t&&h.textContent(e,t,!0)}e.contentNodes=n.map((t=>this.setParent(t,e))),e.childNodes=r.map((t=>this.setParent(t,e)));const i=p.getAttribute(t,o.Attribute.COLLAPSED);return i?this.postProcess(e,i):e}makeNode(t){const e=p.getAttribute(t,o.Attribute.TYPE),r=p.getAttribute(t,o.Attribute.ROLE),n=p.getAttribute(t,o.Attribute.FONT),i=p.getAttribute(t,o.Attribute.ANNOTATION)||"",s=p.getAttribute(t,o.Attribute.ID),a=p.getAttribute(t,o.Attribute.EMBELLISHED),l=p.getAttribute(t,o.Attribute.FENCEPOINTER),c=this.createNode(parseInt(s,10));return c.type=e,c.role=r,c.font=n||"unknown",c.parseAnnotation(i),l&&(c.fencePointer=l),a&&(c.embellished=a),c}makePunctuation(t){const e=this.createNode(t);return e.updateContent((0,i.invisibleComma)()),e.role="dummy",e}makePunctuated(t,e,r){const n=this.createNode(e[0]);n.type="punctuated",n.embellished=t.embellished,n.fencePointer=t.fencePointer,n.role=r;const o=e.splice(1,1)[0].slice(1);n.contentNodes=o.map(this.makePunctuation.bind(this)),this.collapsedChildren_(e)}makeEmpty(t,e,r){const n=this.createNode(e);n.type="empty",n.embellished=t.embellished,n.fencePointer=t.fencePointer,n.role=r}makeIndex(t,e,r){if(h.isPunctuated(e))return this.makePunctuated(t,e,r),void(e=e[0]);l.SemanticSkeleton.simpleCollapseStructure(e)&&!this.nodeDict[e.toString()]&&this.makeEmpty(t,e,r)}postProcess(t,e){const r=l.SemanticSkeleton.fromString(e).array;if("subsup"===t.type){const e=this.createNode(r[1][0]);return e.type="subscript",e.role="subsup",t.type="superscript",e.embellished=t.embellished,e.fencePointer=t.fencePointer,this.makeIndex(t,r[1][2],"rightsub"),this.makeIndex(t,r[2],"rightsuper"),this.collapsedChildren_(r),t}if("subscript"===t.type)return this.makeIndex(t,r[2],"rightsub"),this.collapsedChildren_(r),t;if("superscript"===t.type)return this.makeIndex(t,r[2],"rightsuper"),this.collapsedChildren_(r),t;if("tensor"===t.type)return this.makeIndex(t,r[2],"leftsub"),this.makeIndex(t,r[3],"leftsuper"),this.makeIndex(t,r[4],"rightsub"),this.makeIndex(t,r[5],"rightsuper"),this.collapsedChildren_(r),t;if("punctuated"===t.type){if(h.isPunctuated(r)){const e=r.splice(1,1)[0].slice(1);t.contentNodes=e.map(this.makePunctuation.bind(this))}return t}if("underover"===t.type){const e=this.createNode(r[1][0]);return"overaccent"===t.childNodes[1].role?(e.type="overscore",t.type="underscore"):(e.type="underscore",t.type="overscore"),e.role="underover",e.embellished=t.embellished,e.fencePointer=t.fencePointer,this.collapsedChildren_(r),t}return t}createNode(t){const e=this.factory.makeNode(t);return this.nodeDict[t.toString()]=e,e}collapsedChildren_(t){const e=t=>{const r=this.nodeDict[t[0]];r.childNodes=[];for(let n=1,o=t.length;n<o;n++){const o=t[n];r.childNodes.push(l.SemanticSkeleton.simpleCollapseStructure(o)?this.nodeDict[o]:e(o))}return r};e(t)}setParent(t,e){const r=p.getBySemanticId(this.mathml,t),n=this.assembleTree(r);return n.parent=e,n}}e.RebuildStree=h},6295:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticWalker=void 0;const n=r(3284),o=r(9797);class i extends n.AbstractWalker{constructor(t,e,r,n){super(t,e,r,n),this.node=t,this.generator=e,this.highlighter=r,this.levels=null,this.restoreState()}initLevels(){const t=new o.Levels;return t.push([this.getFocus()]),t}up(){super.up();const t=this.previousLevel();if(!t)return null;this.levels.pop();return this.levels.find((function(e){return e.getSemanticNodes().some((function(e){return e.id.toString()===t}))}))}down(){super.down();const t=this.nextLevel();return 0===t.length?null:(this.levels.push(t),t[0])}combineContentChildren(t,e,r,n){switch(t){case"relseq":case"infixop":case"multirel":return this.makePairList(n,r);case"prefixop":return[this.focusFromId(n[0],r.concat(n))];case"postfixop":return[this.focusFromId(n[0],n.concat(r))];case"matrix":case"vector":case"fenced":return[this.focusFromId(n[0],[r[0],n[0],r[1]])];case"cases":return[this.focusFromId(n[0],[r[0],n[0]])];case"punctuated":return"text"===e?n.map(this.singletonFocus.bind(this)):n.length===r.length?r.map(this.singletonFocus.bind(this)):this.combinePunctuations(n,r,[],[]);case"appl":return[this.focusFromId(n[0],[n[0],r[0]]),this.singletonFocus(n[1])];case"root":return[this.singletonFocus(n[1]),this.singletonFocus(n[0])];default:return n.map(this.singletonFocus.bind(this))}}combinePunctuations(t,e,r,n){if(0===t.length)return n;const o=t.shift(),i=e.shift();return o===i?(r.push(i),this.combinePunctuations(t,e,r,n)):(e.unshift(i),r.push(o),t.length===e.length?(n.push(this.focusFromId(o,r.concat(e))),n):(n.push(this.focusFromId(o,r)),this.combinePunctuations(t,e,[],n)))}makePairList(t,e){if(0===t.length)return[];if(1===t.length)return[this.singletonFocus(t[0])];const r=[this.singletonFocus(t.shift())];for(let n=0,o=t.length;n<o;n++)r.push(this.focusFromId(t[n],[e[n],t[n]]));return r}left(){super.left();const t=this.levels.indexOf(this.getFocus());if(null===t)return null;const e=this.levels.get(t-1);return e||null}right(){super.right();const t=this.levels.indexOf(this.getFocus());if(null===t)return null;const e=this.levels.get(t+1);return e||null}findFocusOnLevel(t){return this.levels.find((e=>e.getSemanticPrimary().id===t))}}e.SemanticWalker=i},9806:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SyntaxWalker=void 0;const n=r(707),o=r(3284),i=r(9797);class s extends o.AbstractWalker{constructor(t,e,r,n){super(t,e,r,n),this.node=t,this.generator=e,this.highlighter=r,this.levels=null,this.restoreState()}initLevels(){const t=new i.Levels;return t.push([this.primaryId()]),t}up(){super.up();const t=this.previousLevel();return t?(this.levels.pop(),this.singletonFocus(t)):null}down(){super.down();const t=this.nextLevel();if(0===t.length)return null;const e=this.singletonFocus(t[0]);return e&&this.levels.push(t),e}combineContentChildren(t,e,r,o){switch(t){case"relseq":case"infixop":case"multirel":return(0,n.interleaveLists)(o,r);case"prefixop":return r.concat(o);case"postfixop":return o.concat(r);case"matrix":case"vector":case"fenced":return o.unshift(r[0]),o.push(r[1]),o;case"cases":return o.unshift(r[0]),o;case"punctuated":return"text"===e?(0,n.interleaveLists)(o,r):o;case"appl":return[o[0],r[0],o[1]];case"root":return[o[1],o[0]];default:return o}}left(){super.left();const t=this.levels.indexOf(this.primaryId());if(null===t)return null;const e=this.levels.get(t-1);return e?this.singletonFocus(e):null}right(){super.right();const t=this.levels.indexOf(this.primaryId());if(null===t)return null;const e=this.levels.get(t+1);return e?this.singletonFocus(e):null}findFocusOnLevel(t){return this.singletonFocus(t.toString())}focusDomNodes(){return[this.getFocus().getDomPrimary()]}focusSemanticNodes(){return[this.getFocus().getSemanticPrimary()]}}e.SyntaxWalker=s},1799:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.TableWalker=void 0;const n=r(5740),o=r(8496),i=r(9806),s=r(179);class a extends i.SyntaxWalker{constructor(t,e,r,n){super(t,e,r,n),this.node=t,this.generator=e,this.highlighter=r,this.firstJump=null,this.key_=null,this.row_=0,this.currentTable_=null,this.keyMapping.set(o.KeyCode.ZERO,this.jumpCell.bind(this)),this.keyMapping.set(o.KeyCode.ONE,this.jumpCell.bind(this)),this.keyMapping.set(o.KeyCode.TWO,this.jumpCell.bind(this)),this.keyMapping.set(o.KeyCode.THREE,this.jumpCell.bind(this)),this.keyMapping.set(o.KeyCode.FOUR,this.jumpCell.bind(this)),this.keyMapping.set(o.KeyCode.FIVE,this.jumpCell.bind(this)),this.keyMapping.set(o.KeyCode.SIX,this.jumpCell.bind(this)),this.keyMapping.set(o.KeyCode.SEVEN,this.jumpCell.bind(this)),this.keyMapping.set(o.KeyCode.EIGHT,this.jumpCell.bind(this)),this.keyMapping.set(o.KeyCode.NINE,this.jumpCell.bind(this))}move(t){this.key_=t;const e=super.move(t);return this.modifier=!1,e}up(){return this.moved=s.WalkerMoves.UP,this.eligibleCell_()?this.verticalMove_(!1):super.up()}down(){return this.moved=s.WalkerMoves.DOWN,this.eligibleCell_()?this.verticalMove_(!0):super.down()}jumpCell(){if(!this.isInTable_()||null===this.key_)return this.getFocus();if(this.moved===s.WalkerMoves.ROW){this.moved=s.WalkerMoves.CELL;const t=this.key_-o.KeyCode.ZERO;return this.isLegalJump_(this.row_,t)?this.jumpCell_(this.row_,t):this.getFocus()}const t=this.key_-o.KeyCode.ZERO;return t>this.currentTable_.childNodes.length?this.getFocus():(this.row_=t,this.moved=s.WalkerMoves.ROW,this.getFocus().clone())}undo(){const t=super.undo();return t===this.firstJump&&(this.firstJump=null),t}eligibleCell_(){const t=this.getFocus().getSemanticPrimary();return this.modifier&&"cell"===t.type&&-1!==a.ELIGIBLE_CELL_ROLES.indexOf(t.role)}verticalMove_(t){const e=this.previousLevel();if(!e)return null;const r=this.getFocus(),n=this.levels.indexOf(this.primaryId()),o=this.levels.pop(),i=this.levels.indexOf(e),s=this.levels.get(t?i+1:i-1);if(!s)return this.levels.push(o),null;this.setFocus(this.singletonFocus(s));const a=this.nextLevel();return a[n]?(this.levels.push(a),this.singletonFocus(a[n])):(this.setFocus(r),this.levels.push(o),null)}jumpCell_(t,e){this.firstJump?this.virtualize(!1):(this.firstJump=this.getFocus(),this.virtualize(!0));const r=this.currentTable_.id.toString();let n;do{n=this.levels.pop()}while(-1===n.indexOf(r));this.levels.push(n),this.setFocus(this.singletonFocus(r)),this.levels.push(this.nextLevel());const o=this.currentTable_.childNodes[t-1];return this.setFocus(this.singletonFocus(o.id.toString())),this.levels.push(this.nextLevel()),this.singletonFocus(o.childNodes[e-1].id.toString())}isLegalJump_(t,e){const r=n.querySelectorAllByAttrValue(this.getRebuilt().xml,"id",this.currentTable_.id.toString())[0];if(!r||r.hasAttribute("alternative"))return!1;const o=this.currentTable_.childNodes[t-1];if(!o)return!1;const i=n.querySelectorAllByAttrValue(r,"id",o.id.toString())[0];return!(!i||i.hasAttribute("alternative"))&&!(!o||!o.childNodes[e-1])}isInTable_(){let t=this.getFocus().getSemanticPrimary();for(;t;){if(-1!==a.ELIGIBLE_TABLE_TYPES.indexOf(t.type))return this.currentTable_=t,!0;t=t.parent}return!1}}e.TableWalker=a,a.ELIGIBLE_CELL_ROLES=["determinant","rowvector","binomial","squarematrix","multiline","matrix","vector","cases","table"],a.ELIGIBLE_TABLE_TYPES=["multiline","matrix","vector","cases","table"]},179:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.WalkerState=e.WalkerMoves=void 0,function(t){t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t.REPEAT="repeat",t.DEPTH="depth",t.ENTER="enter",t.EXPAND="expand",t.HOME="home",t.SUMMARY="summary",t.DETAIL="detail",t.ROW="row",t.CELL="cell"}(e.WalkerMoves||(e.WalkerMoves={}));class r{static resetState(t){delete r.STATE[t]}static setState(t,e){r.STATE[t]=e}static getState(t){return r.STATE[t]}}e.WalkerState=r,r.STATE={}},3362:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.walkerMapping_=e.walker=void 0;const n=r(162),o=r(6295),i=r(9806),s=r(1799);e.walker=function(t,r,n,o,i){return(e.walkerMapping_[t.toLowerCase()]||e.walkerMapping_.dummy)(r,n,o,i)},e.walkerMapping_={dummy:(t,e,r,o)=>new n.DummyWalker(t,e,r,o),semantic:(t,e,r,n)=>new o.SemanticWalker(t,e,r,n),syntax:(t,e,r,n)=>new i.SyntaxWalker(t,e,r,n),table:(t,e,r,n)=>new s.TableWalker(t,e,r,n)}},1204:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.getBySemanticId=e.getSemanticRoot=e.getAttribute=e.splitAttribute=void 0;const n=r(5740),o=r(2298);e.splitAttribute=function(t){return t?t.split(/,/):[]},e.getAttribute=function(t,e){return t.getAttribute(e)},e.getSemanticRoot=function(t){if(t.hasAttribute(o.Attribute.TYPE)&&!t.hasAttribute(o.Attribute.PARENT))return t;const e=n.querySelectorAllByAttr(t,o.Attribute.TYPE);for(let t,r=0;t=e[r];r++)if(!t.hasAttribute(o.Attribute.PARENT))return t;return t},e.getBySemanticId=function(t,e){return t.getAttribute(o.Attribute.ID)===e?t:n.querySelectorAllByAttrValue(t,o.Attribute.ID,e)[0]}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var __webpack_exports__={};!function(){var t=__webpack_require__(9515),e=__webpack_require__(3282),r=__webpack_require__(235),n=__webpack_require__(265),o=__webpack_require__(2388);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}MathJax.loader&&MathJax.loader.checkVersion("startup",e.VERSION,"startup"),(0,t.combineWithMathJax)({_:{components:{loader:r,package:n,startup:o}}});var s,a={"a11y/semantic-enrich":["input/mml","a11y/sre"],"a11y/complexity":["a11y/semantic-enrich"],"a11y/explorer":["a11y/semantic-enrich","ui/menu"],"[mml]/mml3":["input/mml"],"[tex]/all-packages":["input/tex-base"],"[tex]/action":["input/tex-base","[tex]/newcommand"],"[tex]/autoload":["input/tex-base","[tex]/require"],"[tex]/ams":["input/tex-base"],"[tex]/amscd":["input/tex-base"],"[tex]/bbox":["input/tex-base","[tex]/ams","[tex]/newcommand"],"[tex]/boldsymbol":["input/tex-base"],"[tex]/braket":["input/tex-base"],"[tex]/bussproofs":["input/tex-base"],"[tex]/cancel":["input/tex-base","[tex]/enclose"],"[tex]/centernot":["input/tex-base"],"[tex]/color":["input/tex-base"],"[tex]/colorv2":["input/tex-base"],"[tex]/colortbl":["input/tex-base","[tex]/color"],"[tex]/configmacros":["input/tex-base","[tex]/newcommand"],"[tex]/enclose":["input/tex-base"],"[tex]/extpfeil":["input/tex-base","[tex]/newcommand","[tex]/ams"],"[tex]/html":["input/tex-base"],"[tex]/mathtools":["input/tex-base","[tex]/newcommand","[tex]/ams"],"[tex]/mhchem":["input/tex-base","[tex]/ams"],"[tex]/newcommand":["input/tex-base"],"[tex]/noerrors":["input/tex-base"],"[tex]/noundefined":["input/tex-base"],"[tex]/physics":["input/tex-base"],"[tex]/require":["input/tex-base"],"[tex]/setoptions":["input/tex-base"],"[tex]/tagformat":["input/tex-base"],"[tex]/textcomp":["input/tex-base","[tex]/textmacros"],"[tex]/textmacros":["input/tex-base"],"[tex]/unicode":["input/tex-base"],"[tex]/verb":["input/tex-base"],"[tex]/cases":["[tex]/empheq"],"[tex]/empheq":["input/tex-base","[tex]/ams"]},l=Array.from(Object.keys(a)).filter((function(t){return"[tex]"===t.substr(0,5)&&"[tex]/autoload"!==t&&"[tex]/colorv2"!==t&&"[tex]/all-packages"!==t})),c={startup:["loader"],"input/tex":["input/tex-base","[tex]/ams","[tex]/newcommand","[tex]/noundefined","[tex]/require","[tex]/autoload","[tex]/configmacros"],"input/tex-full":["input/tex-base","[tex]/all-packages"].concat((s=l,function(t){if(Array.isArray(t))return i(t)}(s)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(s)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),"[tex]/all-packages":l};(0,t.combineDefaults)(MathJax.config.loader,"dependencies",a),(0,t.combineDefaults)(MathJax.config.loader,"paths",{tex:"[mathjax]/input/tex/extensions",mml:"[mathjax]/input/mml/extensions",sre:"[mathjax]/sre/mathmaps"}),(0,t.combineDefaults)(MathJax.config.loader,"provides",c),(0,t.combineDefaults)(MathJax.config.loader,"source",{"[tex]/amsCd":"[tex]/amscd","[tex]/colorV2":"[tex]/colorv2","[tex]/configMacros":"[tex]/configmacros","[tex]/tagFormat":"[tex]/tagformat"}),r.Loader.preLoad("loader","startup","core","input/tex","input/mml","output/chtml","output/chtml/fonts/tex.js","ui/menu","a11y/assistive-mml");var u=__webpack_require__(444),p=__webpack_require__(6191),h=__webpack_require__(5009),f=__webpack_require__(3494),d=__webpack_require__(3670),m=__webpack_require__(805),y=__webpack_require__(9206),g=__webpack_require__(5722),b=__webpack_require__(4474),v=__webpack_require__(9e3),_=__webpack_require__(91),S=__webpack_require__(6336),M=__webpack_require__(1759),O=__webpack_require__(3909),x=__webpack_require__(9007),E=__webpack_require__(3948),A=__webpack_require__(9145),C=__webpack_require__(142),T=__webpack_require__(7590),N=__webpack_require__(3233),w=__webpack_require__(1334),L=__webpack_require__(6661),I=__webpack_require__(1581),P=__webpack_require__(5410),R=__webpack_require__(6850),k=__webpack_require__(3985),j=__webpack_require__(450),B=__webpack_require__(6405),D=__webpack_require__(3050),F=__webpack_require__(2756),H=__webpack_require__(7238),U=__webpack_require__(5741),X=__webpack_require__(6145),V=__webpack_require__(9878),q=__webpack_require__(7265),W=__webpack_require__(6030),G=__webpack_require__(7131),z=__webpack_require__(1314),J=__webpack_require__(4461),K=__webpack_require__(1349),$=__webpack_require__(4359),Y=__webpack_require__(4770),Z=__webpack_require__(5022),Q=__webpack_require__(5184),tt=__webpack_require__(9102),et=__webpack_require__(6325),rt=__webpack_require__(4082),nt=__webpack_require__(9259),ot=__webpack_require__(2975),it=__webpack_require__(4574),st=__webpack_require__(4596),at=__webpack_require__(7860),lt=__webpack_require__(8823),ct=__webpack_require__(8912),ut=__webpack_require__(3811),pt=__webpack_require__(6272),ht=__webpack_require__(3683),ft=__webpack_require__(5138),dt=__webpack_require__(3726),mt=__webpack_require__(3363),yt=__webpack_require__(3335),gt=__webpack_require__(5713),bt=__webpack_require__(9923),vt=__webpack_require__(6469),_t=__webpack_require__(6751),St=__webpack_require__(5368),Mt=__webpack_require__(7525),Ot=__webpack_require__(103),xt=__webpack_require__(7233),Et=__webpack_require__(8666),At=__webpack_require__(4542),Ct=__webpack_require__(4139),Tt=__webpack_require__(8054),Nt=__webpack_require__(6010),wt=__webpack_require__(7875),Lt=__webpack_require__(505);MathJax.loader&&MathJax.loader.checkVersion("core",e.VERSION,"core"),(0,t.combineWithMathJax)({_:{adaptors:{HTMLAdaptor:u,browserAdaptor:p},components:{global:t},core:{DOMAdaptor:h,FindMath:f,Handler:d,HandlerList:m,InputJax:y,MathDocument:g,MathItem:b,MathList:v,MmlTree:{Attributes:_,MML:S,MathMLVisitor:M,MmlFactory:O,MmlNode:x,MmlNodes:{TeXAtom:E,maction:A,maligngroup:C,malignmark:T,math:N,mathchoice:w,menclose:L,merror:I,mfenced:P,mfrac:R,mglyph:k,mi:j,mmultiscripts:B,mn:D,mo:F,mpadded:H,mphantom:U,mroot:X,mrow:V,ms:q,mspace:W,msqrt:G,mstyle:z,msubsup:J,mtable:K,mtd:$,mtext:Y,mtr:Z,munderover:Q,semantics:tt},MmlVisitor:et,OperatorDictionary:rt,SerializedMmlVisitor:nt},OutputJax:ot,Tree:{Factory:it,Node:st,NodeFactory:at,Visitor:lt,Wrapper:ct,WrapperFactory:ut}},handlers:{html_ts:pt,html:{HTMLDocument:ht,HTMLDomStrings:ft,HTMLHandler:dt,HTMLMathItem:mt,HTMLMathList:yt}},mathjax:gt,util:{AsyncLoad:bt,BBox:vt,BitField:_t,Entities:St,FunctionList:Mt,LinkedList:Ot,Options:xt,PrioritizedList:Et,Retries:At,StyleList:Ct,Styles:Tt,lengths:Nt,numeric:wt,string:Lt}}}),MathJax.startup&&(MathJax.startup.registerConstructor("HTMLHandler",dt.HTMLHandler),MathJax.startup.registerConstructor("browserAdaptor",p.browserAdaptor),MathJax.startup.useHandler("HTMLHandler"),MathJax.startup.useAdaptor("browserAdaptor")),MathJax.loader&&(MathJax._.mathjax.mathjax.asyncLoad=function(t){return MathJax.loader.load(t)});var It=__webpack_require__(8462),Pt=__webpack_require__(9899),Rt=__webpack_require__(4676),kt=__webpack_require__(7073),jt=__webpack_require__(2947),Bt=__webpack_require__(8929),Dt=__webpack_require__(1256),Ft=__webpack_require__(5450),Ht=__webpack_require__(8562),Ut=__webpack_require__(1130),Xt=__webpack_require__(9497),Vt=__webpack_require__(8292),qt=__webpack_require__(5453),Wt=__webpack_require__(8803),Gt=__webpack_require__(9140),zt=__webpack_require__(6521),Jt=__webpack_require__(8317),Kt=__webpack_require__(3971),$t=__webpack_require__(8417),Yt=__webpack_require__(8021),Zt=__webpack_require__(2790),Qt=__webpack_require__(4387),te=__webpack_require__(1275),ee=__webpack_require__(2942),re=__webpack_require__(1181),ne=__webpack_require__(7693),oe=__webpack_require__(8458),ie=__webpack_require__(1496),se=__webpack_require__(6793),ae=__webpack_require__(1110),le=__webpack_require__(5579),ce=__webpack_require__(4898),ue=__webpack_require__(7741);MathJax.loader&&MathJax.loader.checkVersion("input/tex",e.VERSION,"input"),(0,t.combineWithMathJax)({_:{input:{tex_ts:It,tex:{Configuration:Pt,FilterUtil:Rt,FindTeX:kt,MapHandler:jt,NodeFactory:Bt,NodeUtil:Dt,ParseMethods:Ft,ParseOptions:Ht,ParseUtil:Ut,Stack:Xt,StackItem:Vt,StackItemFactory:qt,Symbol:Wt,SymbolMap:Gt,Tags:zt,TexConstants:Jt,TexError:Kt,TexParser:$t,ams:{AmsConfiguration:Yt,AmsItems:Zt,AmsMethods:Qt},autoload:{AutoloadConfiguration:te},base:{BaseConfiguration:ee,BaseItems:re,BaseMethods:ne},configmacros:{ConfigMacrosConfiguration:oe},newcommand:{NewcommandConfiguration:ie,NewcommandItems:se,NewcommandMethods:ae,NewcommandUtil:le},noundefined:{NoUndefinedConfiguration:ce},require:{RequireConfiguration:ue}}}}}),r.Loader.preLoad("input/tex-base","[tex]/ams","[tex]/newcommand","[tex]/noundefined","[tex]/require","[tex]/autoload","[tex]/configmacros"),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(MathJax.startup){e&&(MathJax.startup.registerConstructor("tex",MathJax._.input.tex_ts.TeX),MathJax.startup.useInput("tex")),MathJax.config.tex||(MathJax.config.tex={});var r=MathJax.config.tex.packages;MathJax.config.tex.packages=t,r&&(0,xt.insert)(MathJax.config.tex,{packages:r})}}(["base","ams","newcommand","noundefined","require","autoload","configmacros"]);var pe=__webpack_require__(2892),he=__webpack_require__(625),fe=__webpack_require__(2769);MathJax.loader&&MathJax.loader.checkVersion("input/mml",e.VERSION,"input"),(0,t.combineWithMathJax)({_:{input:{mathml_ts:pe,mathml:{FindMathML:he,MathMLCompile:fe}}}}),MathJax.startup&&(MathJax.startup.registerConstructor("mml",pe.MathML),MathJax.startup.useInput("mml")),MathJax.loader&&MathJax.loader.pathFilters.add((function(t){return t.name=t.name.replace(/\/util\/entities\/.*?\.js/,"/input/mml/entities.js"),!0}));var de=__webpack_require__(50),me=__webpack_require__(8042),ye=__webpack_require__(8270),ge=__webpack_require__(6797),be=__webpack_require__(5355),ve=__webpack_require__(9261),_e=__webpack_require__(9086),Se=__webpack_require__(95),Me=__webpack_require__(1148),Oe=__webpack_require__(8102),xe=__webpack_require__(804),Ee=__webpack_require__(8147),Ae=__webpack_require__(2275),Ce=__webpack_require__(9063),Te=__webpack_require__(6911),Ne=__webpack_require__(1653),we=__webpack_require__(6781),Le=__webpack_require__(6460),Ie=__webpack_require__(6287),Pe=__webpack_require__(5964),Re=__webpack_require__(8776),ke=__webpack_require__(4798),je=__webpack_require__(4597),Be=__webpack_require__(2970),De=__webpack_require__(5610),Fe=__webpack_require__(4300),He=__webpack_require__(8002),Ue=__webpack_require__(7056),Xe=__webpack_require__(1259),Ve=__webpack_require__(3571),qe=__webpack_require__(6590),We=__webpack_require__(8650),Ge=__webpack_require__(421),ze=__webpack_require__(5884),Je=__webpack_require__(5552),Ke=__webpack_require__(3055),$e=__webpack_require__(7519),Ye=__webpack_require__(4420),Ze=__webpack_require__(9800),Qe=__webpack_require__(1160),tr=__webpack_require__(1956),er=__webpack_require__(7490),rr=__webpack_require__(7313),nr=__webpack_require__(7555),or=__webpack_require__(2688),ir=__webpack_require__(5636),sr=__webpack_require__(5723),ar=__webpack_require__(8009),lr=__webpack_require__(5023),cr=__webpack_require__(7096),ur=__webpack_require__(6898),pr=__webpack_require__(6991),hr=__webpack_require__(8411),fr=__webpack_require__(4126),dr=__webpack_require__(258),mr=__webpack_require__(4093),yr=__webpack_require__(905),gr=__webpack_require__(6237),br=__webpack_require__(5164),vr=__webpack_require__(6319),_r=__webpack_require__(5766),Sr=__webpack_require__(1971),Mr=__webpack_require__(167),Or=__webpack_require__(5806);MathJax.loader&&MathJax.loader.checkVersion("output/chtml",e.VERSION,"output"),(0,t.combineWithMathJax)({_:{output:{chtml_ts:de,chtml:{FontData:me,Notation:ye,Usage:ge,Wrapper:be,WrapperFactory:ve,Wrappers_ts:_e,Wrappers:{TeXAtom:Se,TextNode:Me,maction:Oe,math:xe,menclose:Ee,mfenced:Ae,mfrac:Ce,mglyph:Te,mi:Ne,mmultiscripts:we,mn:Le,mo:Ie,mpadded:Pe,mroot:Re,mrow:ke,ms:je,mspace:Be,msqrt:De,msubsup:Fe,mtable:He,mtd:Ue,mtext:Xe,mtr:Ve,munderover:qe,scriptbase:We,semantics:Ge}},common:{FontData:ze,Notation:Je,OutputJax:Ke,Wrapper:$e,WrapperFactory:Ye,Wrappers:{TeXAtom:Ze,TextNode:Qe,maction:tr,math:er,menclose:rr,mfenced:nr,mfrac:or,mglyph:ir,mi:sr,mmultiscripts:ar,mn:lr,mo:cr,mpadded:ur,mroot:pr,mrow:hr,ms:fr,mspace:dr,msqrt:mr,msubsup:yr,mtable:gr,mtd:br,mtext:vr,mtr:_r,munderover:Sr,scriptbase:Mr,semantics:Or}}}}}),MathJax.loader&&(0,t.combineDefaults)(MathJax.config.loader,"output/chtml",{checkReady:function(){return MathJax.loader.load("output/chtml/fonts/tex")}}),MathJax.startup&&(MathJax.startup.registerConstructor("chtml",de.CHTML),MathJax.startup.useOutput("chtml"));var xr=__webpack_require__(2760),Er=__webpack_require__(4005),Ar=__webpack_require__(1015),Cr=__webpack_require__(6555),Tr=__webpack_require__(2183),Nr=__webpack_require__(3490),wr=__webpack_require__(9056),Lr=__webpack_require__(3019),Ir=__webpack_require__(2713),Pr=__webpack_require__(7517),Rr=__webpack_require__(4182),kr=__webpack_require__(2679),jr=__webpack_require__(5469),Br=__webpack_require__(775),Dr=__webpack_require__(9551),Fr=__webpack_require__(6530),Hr=__webpack_require__(4409),Ur=__webpack_require__(5292),Xr=__webpack_require__(3980),Vr=__webpack_require__(1103),qr=__webpack_require__(9124),Wr=__webpack_require__(6001),Gr=__webpack_require__(3696),zr=__webpack_require__(9587),Jr=__webpack_require__(8348),Kr=__webpack_require__(1376),$r=__webpack_require__(1439),Yr=__webpack_require__(331),Zr=__webpack_require__(4886),Qr=__webpack_require__(4471),tn=__webpack_require__(5181),en=__webpack_require__(3526),rn=__webpack_require__(5649),nn=__webpack_require__(7153),on=__webpack_require__(5745),sn=__webpack_require__(1411),an=__webpack_require__(6384),ln=__webpack_require__(6041),cn=__webpack_require__(8199),un=__webpack_require__(9848),pn=__webpack_require__(7906),hn=__webpack_require__(2644),fn=__webpack_require__(4926);if(MathJax.loader&&MathJax.loader.checkVersion("output/chtml/fonts/tex",e.VERSION,"chtml-font"),(0,t.combineWithMathJax)({_:{output:{chtml:{fonts:{tex_ts:xr,tex:{"bold-italic":Er,bold:Ar,"fraktur-bold":Cr,fraktur:Tr,italic:Nr,largeop:wr,monospace:Lr,normal:Ir,"sans-serif-bold-italic":Pr,"sans-serif-bold":Rr,"sans-serif-italic":kr,"sans-serif":jr,smallop:Br,"tex-calligraphic-bold":Dr,"tex-size3":Fr,"tex-size4":Hr,"tex-variant":Ur}}},common:{fonts:{tex:{"bold-italic":Xr,bold:Vr,delimiters:qr,"double-struck":Wr,"fraktur-bold":Gr,fraktur:zr,italic:Jr,largeop:Kr,monospace:$r,normal:Yr,"sans-serif-bold-italic":Zr,"sans-serif-bold":Qr,"sans-serif-italic":tn,"sans-serif":en,"script-bold":rn,script:nn,smallop:on,"tex-calligraphic-bold":sn,"tex-calligraphic":an,"tex-mathit":ln,"tex-oldstyle-bold":cn,"tex-oldstyle":un,"tex-size3":pn,"tex-size4":hn,"tex-variant":fn}}}}}}),MathJax.startup){(0,t.combineDefaults)(MathJax.config,"chtml",{fontURL:n.Package.resolvePath("output/chtml/fonts/woff-v2",!1)});var dn=(0,xt.selectOptionsFromKeys)(MathJax.config.chtml||{},xr.TeXFont.OPTIONS);(0,t.combineDefaults)(MathJax.config,"chtml",{font:new xr.TeXFont(dn)})}var mn=__webpack_require__(5865),yn=__webpack_require__(8310),gn=__webpack_require__(4001),bn=__webpack_require__(473),vn=__webpack_require__(4414);MathJax.loader&&MathJax.loader.checkVersion("ui/menu",e.VERSION,"ui"),(0,t.combineWithMathJax)({_:{ui:{menu:{MJContextMenu:mn,Menu:yn,MenuHandler:gn,MmlVisitor:bn,SelectableInfo:vn}}}}),MathJax.startup&&"undefined"!=typeof window&&MathJax.startup.extendHandler((function(t){return(0,gn.MenuHandler)(t)}),20);var _n=__webpack_require__(351);function Sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}MathJax.loader&&MathJax.loader.checkVersion("a11y/assistive-mml",e.VERSION,"a11y"),(0,t.combineWithMathJax)({_:{a11y:{"assistive-mml":_n}}}),MathJax.startup&&MathJax.startup.extendHandler((function(t){return(0,_n.AssistiveMmlHandler)(t)})),r.Loader.preLoad("loader"),r.Loader.load.apply(r.Loader,function(t){return function(t){if(Array.isArray(t))return Sn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Sn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.CONFIG.load)).then((function(){return r.CONFIG.ready()})).catch((function(t){return r.CONFIG.failed(t)}))}()})();
   </script>
   <script async="" city="madrid" defer="" origin-key="tjo_y04y4049fbVxciLFXd13WEQtbfYdraM4UNtu" track="true">
    !function(){var e;let t,n,o,r,a,i,s=0,d=0,c=0,w=0,l=0,g=0,u=0,m=0,v=0,f=0,p=0;async function h(e,t,n){let o=new Date(Date.now()+6e4*n).toUTCString();document.cookie=`${e}=${t};expires=${o};path=/;SameSite=Lax`}async function E(){try{let e=window.location.hostname;"127.0.0.1"==e&&(e="battlebot.transparentedge.io");let t="https://"+e+"/.well-known/tcdn/perfobject";performance.mark("start-response");let n=await fetch(t,{method:"GET",mode:"cors"});if(!n.ok)throw Error("Network response was not ok: "+n.statusText);performance.mark("start-download"),await n.blob(),performance.mark("end-download"),performance.measure("ttfb","start-response","start-download"),performance.measure("download-time","start-download","end-download");let o=performance.getEntriesByName("ttfb")[0].duration,r=performance.getEntriesByName("download-time")[0].duration,a=o+r,i={Site:e,uri:window.location.pathname,"User-Agent":navigator.userAgent,Language:navigator.language,Platform:navigator.platform,NetworkType:navigator.connection.effectiveType,TTFB:o.toFixed(2),Download_Time:r.toFixed(2),Total_Time:a.toFixed(2)};await h("TEDGEPT",JSON.stringify(i),60),b(i)}catch(e){console.error("There was a problem with the fetch operation:",e)}}async function b(e){try{let t=await fetch("https://battlebot.transparentedge.io/response_times",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Network response was not ok: "+t.statusText)}catch(e){console.error("There was a problem with the fetch operation:",e)}}async function _(){performance.mark("stop"),performance.measure("elapsed_time","start","stop");let e=function(){let e=document.createElement("canvas");return!!(e.getContext("webgl")||e.getContext("experimental-webgl"))}();e?(webgl_vendor=k().vendor,webgl_renderer=k().renderer):(webgl_vendor="Not Available",webgl_renderer="Not Available"),window.browser_info={Elapsed_Time:Math.floor(performance.getEntriesByName("elapsed_time")[0].duration),Site:window.location.hostname,uri:window.location.pathname,"User-Agent":navigator.userAgent,Platform:navigator.platform,Language:navigator.language,Cookies_Enabled:navigator.cookieEnabled,Screen_Resolution:screen.width+"x"+screen.height,"Screen Size":window.outerWidth+"x"+window.outerHeight,Color_Depth:screen.colorDepth,Browser:navigator.appName,Browser_Version:navigator.appVersion,Browser_Engine:navigator.product,Webdriver:navigator.webdriver,CDP:window.cdp,Device_memory:navigator.deviceMemory,Referer:document.referrer,Vendor:navigator.vendor,plugins:navigator.plugins.length,WebGL:e,WebGL_Vendor:webgl_vendor,WebGL_Renderer:webgl_renderer,UserBehaviour:{MouseEvents:w,TouchEvents:s,ClickEvents:d,SubmitEvents:l,ScrollEvents:c,LinkEvents:g,FocusEvents:m,BlurEvents:v,KeyDownEvents:u,InputEvents:f,RightClickEvents:p}},report_info={browser_info:window.browser_info};try{navigator.sendBeacon("https://battlebot.transparentedge.io/bm_info",JSON.stringify(report_info))}catch(e){console.error("There was a problem with the beacon API:",e)}}function k(){let e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(!t)return{};let n=t.getExtension("WEBGL_debug_renderer_info");return{vendor:t.getParameter(n.UNMASKED_VENDOR_WEBGL),renderer:t.getParameter(n.UNMASKED_RENDERER_WEBGL)}}performance.mark("start"),document.cookie.split(";").some(e=>e.trim().startsWith("TEDGEPT="))||E(),document.querySelectorAll("a").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.href;g++,window.location.href=t})}),window.addEventListener("click",function(){d++}),window.addEventListener("submit",function(){submitDetected=!0,l++}),window.addEventListener("scroll",function(){c++}),window.addEventListener("keydown",function(){keyDownDetected=!0,u++}),window.addEventListener("focus",function(){focusDetected=!0,m++}),window.addEventListener("blur",function(){blurDetected=!0,v++}),window.addEventListener("mousemove",function(){w++}),window.addEventListener("touchstart",function(){s++}),window.addEventListener("input",function(){inputDetected=!0,f++}),window.addEventListener("contextmenu",function(){rightClickDetected=!0,p++}),/Chrome/i.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),navigator.webdriver,0===window.outerWidth&&window.outerHeight,window.screen.width<=640&&window.screen.height,/Headless/i.test(navigator.userAgent),/PhantomJS/i.test(navigator.userAgent),/Electron/i.test(navigator.userAgent),/slimerjs/i.test(navigator.userAgent),e=!1,Object.defineProperty(Error(),"stack",{get(){e=!0}}),e?window.cdp=!0:window.cdp=!1,document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&_()})}();
   </script>
   <noscript>
   </noscript>
   <script charset="UTF-8">
    !function(){"use strict";var t,e,o,n={667:function(t,e){e.q=void 0,e.q="3.2.2"},78:function(t,e,o){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MhchemConfiguration=void 0;var a=o(251),r=o(871),i=n(o(402)),p=n(o(360)),c=o(939),u=o(652),s={};s.Macro=p.default.Macro,s.xArrow=c.AmsMethods.xArrow,s.Machine=function(t,e,o){var n,a=t.GetArgument(e);try{n=u.mhchemParser.toTex(a,o)}catch(t){throw new i.default(t[0],t[1])}t.string=n+t.string.substr(t.i),t.i=0},new r.CommandMap("mhchem",{ce:["Machine","ce"],pu:["Machine","pu"],longrightleftharpoons:["Macro","\\stackrel{\\textstyle{-}\\!\\!{\\rightharpoonup}}{\\smash{{\\leftharpoondown}\\!\\!{-}}}"],longRightleftharpoons:["Macro","\\stackrel{\\textstyle{-}\\!\\!{\\rightharpoonup}}{\\smash{\\leftharpoondown}}"],longLeftrightharpoons:["Macro","\\stackrel{\\textstyle\\vphantom{{-}}{\\rightharpoonup}}{\\smash{{\\leftharpoondown}\\!\\!{-}}}"],longleftrightarrows:["Macro","\\stackrel{\\longrightarrow}{\\smash{\\longleftarrow}\\Rule{0px}{.25em}{0px}}"],tripledash:["Macro","\\vphantom{-}\\raise2mu{\\kern2mu\\tiny\\text{-}\\kern1mu\\text{-}\\kern1mu\\text{-}\\kern2mu}"],xleftrightarrow:["xArrow",8596,6,6],xrightleftharpoons:["xArrow",8652,5,7],xRightleftharpoons:["xArrow",8652,5,7],xLeftrightharpoons:["xArrow",8652,5,7]},s),e.MhchemConfiguration=a.Configuration.create("mhchem",{handler:{macro:["mhchem"]}})},955:function(t,e){MathJax._.components.global.isObject,MathJax._.components.global.combineConfig,MathJax._.components.global.combineDefaults,e.r8=MathJax._.components.global.combineWithMathJax,MathJax._.components.global.MathJax},251:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Configuration=MathJax._.input.tex.Configuration.Configuration,e.ConfigurationHandler=MathJax._.input.tex.Configuration.ConfigurationHandler,e.ParserConfiguration=MathJax._.input.tex.Configuration.ParserConfiguration},871:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseResult=MathJax._.input.tex.SymbolMap.parseResult,e.AbstractSymbolMap=MathJax._.input.tex.SymbolMap.AbstractSymbolMap,e.RegExpMap=MathJax._.input.tex.SymbolMap.RegExpMap,e.AbstractParseMap=MathJax._.input.tex.SymbolMap.AbstractParseMap,e.CharacterMap=MathJax._.input.tex.SymbolMap.CharacterMap,e.DelimiterMap=MathJax._.input.tex.SymbolMap.DelimiterMap,e.MacroMap=MathJax._.input.tex.SymbolMap.MacroMap,e.CommandMap=MathJax._.input.tex.SymbolMap.CommandMap,e.EnvironmentMap=MathJax._.input.tex.SymbolMap.EnvironmentMap},402:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=MathJax._.input.tex.TexError.default},360:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=MathJax._.input.tex.base.BaseMethods.default},939:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AmsMethods=MathJax._.input.tex.ams.AmsMethods.AmsMethods,e.NEW_OPS=MathJax._.input.tex.ams.AmsMethods.NEW_OPS},652:function(t,e){
/*!
 *************************************************************************
 *
 *  mhchemParser.ts
 *  4.1.1
 *
 *  Parser for the \ce command and \pu command for MathJax and Co.
 *
 *  mhchem's \ce is a tool for writing beautiful chemical equations easily.
 *  mhchem's \pu is a tool for writing physical units easily.
 *
 *  ----------------------------------------------------------------------
 *
 *  Copyright (c) 2015-2021 Martin Hensel
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *
 *  ----------------------------------------------------------------------
 *
 *  https://github.com/mhchem/mhchemParser
 *
 */
Object.defineProperty(e,"__esModule",{value:!0}),e.mhchemParser=void 0;var o=function(){function t(){}return t.toTex=function(t,e){return r.go(a.go(t,e),"tex"!==e)},t}();function n(t){var e,o,n={};for(e in t)for(o in t[e]){var a=o.split("|");t[e][o].stateArray=a;for(var r=0;r<a.length;r++)n[a[r]]=[]}for(e in t)for(o in t[e])for(a=t[e][o].stateArray||[],r=0;r<a.length;r++){var i=t[e][o];i.action_=[].concat(i.action_);for(var p=0;p<i.action_.length;p++)"string"==typeof i.action_[p]&&(i.action_[p]={type_:i.action_[p]});for(var c=e.split("|"),u=0;u<c.length;u++)if("*"===a[r]){var s=void 0;for(s in n)n[s].push({pattern:c[u],task:i})}else n[a[r]].push({pattern:c[u],task:i})}return n}e.mhchemParser=o;var a={go:function(t,e){if(!t)return[];void 0===e&&(e="ce");var o,n="0",r={};r.parenthesisLevel=0,t=(t=(t=t.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var i=10,p=[];;){o!==t?(i=10,o=t):i--;var c=a.stateMachines[e],u=c.transitions[n]||c.transitions["*"];t:for(var s=0;s<u.length;s++){var _=a.patterns.match_(u[s].pattern,t);if(_){for(var d=u[s].task,m=0;m<d.action_.length;m++){var h=void 0;if(c.actions[d.action_[m].type_])h=c.actions[d.action_[m].type_](r,_.match_,d.action_[m].option);else{if(!a.actions[d.action_[m].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+d.action_[m].type_+")"];h=a.actions[d.action_[m].type_](r,_.match_,d.action_[m].option)}a.concatArray(p,h)}if(n=d.nextState||n,!(t.length>0))return p;if(d.revisit||(t=_.remainder),!d.toContinue)break t}}if(i<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,e){if(e)if(Array.isArray(e))for(var o=0;o<e.length;o++)t.push(e[o]);else t.push(e)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"(-)(9)^(-9)":/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/,"state of aggregation $":function(t){var e=a.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(e&&e.remainder.match(/^($|[\s,;\)\]\}])/))return e;var o=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return o?{match_:o[0],remainder:t.substr(o[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". __* ":/^([.\u22C5\u00B7\u2022]|[*])\s*/,"...":/^\.\.\.(?=$|[^.])/,"^{(...)}":function(t){return a.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return a.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return a.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return a.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return a.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return a.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return a.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return a.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}^":/^\{\}(?=\^)/,"{}":/^\{\}/,"{...}":function(t){return a.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return a.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return a.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$__$(...)$":function(t){return a.patterns.findObserveGroups(t,"${","","","}$")||a.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return a.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return a.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return a.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return a.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return a.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return a.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return a.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return a.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}":function(t){return a.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}":function(t){return a.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")||a.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return a.patterns.findObserveGroups(t,"\\ce{","","","}")},"\\pu{(...)}":function(t){return a.patterns.findObserveGroups(t,"\\pu{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var e;if(e=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:e[0],remainder:t.substr(e[0].length)};var o=a.patterns.findObserveGroups(t,"","$","$","");return o&&(e=o.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:e[0],remainder:t.substr(e[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var e=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,e,o,n,a,r,i,p,c,u){var s=function(t,e){if("string"==typeof e)return 0!==t.indexOf(e)?null:e;var o=t.match(e);return o?o[0]:null},_=s(t,e);if(null===_)return null;if(t=t.substr(_.length),null===(_=s(t,o)))return null;var d=function(t,e,o){for(var n=0;e<t.length;){var a=t.charAt(e),r=s(t.substr(e),o);if(null!==r&&0===n)return{endMatchBegin:e,endMatchEnd:e+r.length};if("{"===a)n++;else if("}"===a){if(0===n)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];n--}e++}return null}(t,_.length,n||a);if(null===d)return null;var m=t.substring(0,n?d.endMatchEnd:d.endMatchBegin);if(r||i){var h=this.findObserveGroups(t.substr(d.endMatchEnd),r,i,p,c);if(null===h)return null;var l=[m,h.match_];return{match_:u?l.join(""):l,remainder:h.remainder}}return{match_:m,remainder:t.substr(d.endMatchEnd)}},match_:function(t,e){var o=a.patterns.patterns[t];if(void 0===o)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if("function"==typeof o)return a.patterns.patterns[t](e);var n=e.match(o);return n?n.length>2?{match_:n.slice(1),remainder:e.substr(n[0].length)}:{match_:n[1]||n[0],remainder:e.substr(n[0].length)}:null}},actions:{"a=":function(t,e){t.a=(t.a||"")+e},"b=":function(t,e){t.b=(t.b||"")+e},"p=":function(t,e){t.p=(t.p||"")+e},"o=":function(t,e){t.o=(t.o||"")+e},"q=":function(t,e){t.q=(t.q||"")+e},"d=":function(t,e){t.d=(t.d||"")+e},"rm=":function(t,e){t.rm=(t.rm||"")+e},"text=":function(t,e){t.text_=(t.text_||"")+e},insert:function(t,e,o){return{type_:o}},"insert+p1":function(t,e,o){return{type_:o,p1:e}},"insert+p1+p2":function(t,e,o){return{type_:o,p1:e[0],p2:e[1]}},copy:function(t,e){return e},write:function(t,e,o){return o},rm:function(t,e){return{type_:"rm",p1:e}},text:function(t,e){return a.go(e,"text")},"tex-math":function(t,e){return a.go(e,"tex-math")},"tex-math tight":function(t,e){return a.go(e,"tex-math tight")},bond:function(t,e,o){return{type_:"bond",kind_:o||e}},"color0-output":function(t,e){return{type_:"color0",color:e}},ce:function(t,e){return a.go(e,"ce")},pu:function(t,e){return a.go(e,"pu")},"1/2":function(t,e){var o=[];e.match(/^[+\-]/)&&(o.push(e.substr(0,1)),e=e.substr(1));var n=e.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),o.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),o.push({type_:"tex-math",p1:n[3]})),o},"9,9":function(t,e){return a.go(e,"9,9")}},stateMachines:{tex:{transitions:n({empty:{0:{action_:"copy"}},"\\ce{(...)}":{0:{action_:[{type_:"write",option:"{"},"ce",{type_:"write",option:"}"}]}},"\\pu{(...)}":{0:{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},else:{0:{action_:"copy"}}}),actions:{}},ce:{transitions:n({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{action_:[]}},space:{a:{action_:[],nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". __* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{action_:[]}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}^":{"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"tinySkip"}],nextState:"1"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}],nextState:"3"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,e){var o;if((t.d||"").match(/^[1-9][0-9]*$/)){var n=t.d;t.d=void 0,(o=this.output(t)).push({type_:"tinySkip"}),t.b=n}else o=this.output(t);return a.actions["o="](t,e),o},"d= kv":function(t,e){t.d=e,t.dType="kv"},"charge or bond":function(t,e){if(t.beginsWithBond){var o=[];return a.concatArray(o,this.output(t)),a.concatArray(o,a.actions.bond(t,e,"-")),o}t.d=e},"- after o/d":function(t,e,o){var n=a.patterns.match_("orbital",t.o||""),r=a.patterns.match_("one lowercase greek letter $",t.o||""),i=a.patterns.match_("one lowercase latin letter $",t.o||""),p=a.patterns.match_("$one lowercase latin letter$ $",t.o||""),c="-"===e&&(n&&""===n.remainder||r||i||p);!c||t.a||t.b||t.p||t.d||t.q||n||!i||(t.o="$"+t.o+"$");var u=[];return c?(a.concatArray(u,this.output(t)),u.push({type_:"hyphen"})):(n=a.patterns.match_("digits",t.d||""),o&&n&&""===n.remainder?(a.concatArray(u,a.actions["d="](t,e)),a.concatArray(u,this.output(t))):(a.concatArray(u,this.output(t)),a.concatArray(u,a.actions.bond(t,e,"-")))),u},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,e){return{type_:"state of aggregation",p1:a.go(e,"o")}},comma:function(t,e){var o=e.replace(/\s*$/,"");return o!==e&&0===t.parenthesisLevel?{type_:"comma enumeration L",p1:o}:{type_:"comma enumeration M",p1:o}},output:function(t,e,o){var n;if(t.r){var r=void 0;r="M"===t.rdt?a.go(t.rd,"tex-math"):"T"===t.rdt?[{type_:"text",p1:t.rd||""}]:a.go(t.rd,"ce");var i=void 0;i="M"===t.rqt?a.go(t.rq,"tex-math"):"T"===t.rqt?[{type_:"text",p1:t.rq||""}]:a.go(t.rq,"ce"),n={type_:"arrow",r:t.r,rd:r,rq:i}}else n=[],(t.a||t.b||t.p||t.o||t.q||t.d||o)&&(t.sb&&n.push({type_:"entitySkip"}),t.o||t.q||t.d||t.b||t.p||2===o?t.o||t.q||t.d||!t.b&&!t.p?t.o&&"kv"===t.dType&&a.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&"kv"===t.dType&&!t.q&&(t.dType=void 0):(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):(t.o=t.a,t.a=void 0),n.push({type_:"chemfive",a:a.go(t.a,"a"),b:a.go(t.b,"bd"),p:a.go(t.p,"pq"),o:a.go(t.o,"o"),q:a.go(t.q,"pq"),d:a.go(t.d,"oxidation"===t.dType?"oxidation":"bd"),dType:t.dType}));for(var p in t)"parenthesisLevel"!==p&&"beginsWithBond"!==p&&delete t[p];return n},"oxidation-output":function(t,e){var o=["{"];return a.concatArray(o,a.go(e,"oxidation")),o.push("}"),o},"frac-output":function(t,e){return{type_:"frac-ce",p1:a.go(e[0],"ce"),p2:a.go(e[1],"ce")}},"overset-output":function(t,e){return{type_:"overset",p1:a.go(e[0],"ce"),p2:a.go(e[1],"ce")}},"underset-output":function(t,e){return{type_:"underset",p1:a.go(e[0],"ce"),p2:a.go(e[1],"ce")}},"underbrace-output":function(t,e){return{type_:"underbrace",p1:a.go(e[0],"ce"),p2:a.go(e[1],"ce")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:a.go(e[1],"ce")}},"r=":function(t,e){t.r=e},"rdt=":function(t,e){t.rdt=e},"rd=":function(t,e){t.rd=e},"rqt=":function(t,e){t.rqt=e},"rq=":function(t,e){t.rq=e},operator:function(t,e,o){return{type_:"operator",kind_:o||e}}}},a:{transitions:n({empty:{"*":{action_:[]}},"1/2$":{0:{action_:"1/2"}},else:{0:{action_:[],nextState:"1",revisit:!0}},"${(...)}$__$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:n({empty:{"*":{action_:[]}},"1/2$":{0:{action_:"1/2"}},else:{0:{action_:[],nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\pu{(...)}":{"*":{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:[{type_:"write",option:"{"},"text",{type_:"write",option:"}"}]}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:n({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var e={type_:"text",p1:t.text_};for(var o in t)delete t[o];return e}}}},pq:{transitions:n({empty:{"*":{action_:[]}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{action_:[],nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{action_:[],nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{action_:[],nextState:"!f",revisit:!0}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}":{"*":{action_:"color-output"}},"\\color{(...)}":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\pu{(...)}":{"*":{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,e){return{type_:"state of aggregation subscript",p1:a.go(e,"o")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:a.go(e[1],"pq")}}}},bd:{transitions:n({empty:{"*":{action_:[]}},x$:{0:{action_:[],nextState:"!f",revisit:!0}},formula$:{0:{action_:[],nextState:"f",revisit:!0}},else:{0:{action_:[],nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}":{"*":{action_:"color-output"}},"\\color{(...)}":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\pu{(...)}":{"*":{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,e){return{type_:"color",color1:e[0],color2:a.go(e[1],"bd")}}}},oxidation:{transitions:n({empty:{"*":{action_:[]}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(t,e){return{type_:"roman numeral",p1:e}}}},"tex-math":{transitions:n({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var o in t)delete t[o];return e}}}},"tex-math tight":{transitions:n({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,e){t.o=(t.o||"")+"{"+e+"}"},output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var o in t)delete t[o];return e}}}},"9,9":{transitions:n({empty:{"*":{action_:[]}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:n({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{action_:[]}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,e){var o=[];return"+-"===e[0]||"+/-"===e[0]?o.push("\\pm "):e[0]&&o.push(e[0]),e[1]&&(a.concatArray(o,a.go(e[1],"pu-9,9")),e[2]&&(e[2].match(/[,.]/)?a.concatArray(o,a.go(e[2],"pu-9,9")):o.push(e[2])),(e[3]||e[4])&&("e"===e[3]||"*"===e[4]?o.push({type_:"cdot"}):o.push({type_:"times"}))),e[5]&&o.push("10^{"+e[5]+"}"),o},"number^":function(t,e){var o=[];return"+-"===e[0]||"+/-"===e[0]?o.push("\\pm "):e[0]&&o.push(e[0]),a.concatArray(o,a.go(e[1],"pu-9,9")),o.push("^{"+e[2]+"}"),o},operator:function(t,e,o){return{type_:"operator",kind_:o||e}},space:function(){return{type_:"pu-space-1"}},output:function(t){var e,o=a.patterns.match_("{(...)}",t.d||"");o&&""===o.remainder&&(t.d=o.match_);var n=a.patterns.match_("{(...)}",t.q||"");if(n&&""===n.remainder&&(t.q=n.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var r={d:a.go(t.d,"pu"),q:a.go(t.q,"pu")};"//"===t.o?e={type_:"pu-frac",p1:r.d,p2:r.q}:(e=r.d,r.d.length>1||r.q.length>1?e.push({type_:" / "}):e.push({type_:"/"}),a.concatArray(e,r.q))}else e=a.go(t.d,"pu-2");for(var i in t)delete t[i];return e}}},"pu-2":{transitions:n({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,e){t.rm+="^{"+e+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var e=[];if(t.rm){var o=a.patterns.match_("{(...)}",t.rm||"");e=o&&""===o.remainder?a.go(o.match_,"pu"):{type_:"rm",p1:t.rm}}for(var n in t)delete t[n];return e}}},"pu-9,9":{transitions:n({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var o=t.text_.length%3;0===o&&(o=3);for(var n=t.text_.length-3;n>0;n-=3)e.push(t.text_.substr(n,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(0,o)),e.reverse()}else e.push(t.text_);for(var a in t)delete t[a];return e},"output-o":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var o=t.text_.length-3,n=void 0;for(n=0;n<o;n+=3)e.push(t.text_.substr(n,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(n))}else e.push(t.text_);for(var a in t)delete t[a];return e}}}}},r={go:function(t,e){if(!t)return"";for(var o="",n=!1,a=0;a<t.length;a++){var i=t[a];"string"==typeof i?o+=i:(o+=r._go2(i),"1st-level escape"===i.type_&&(n=!0))}return e&&!n&&o&&(o="{"+o+"}"),o},_goInner:function(t){return r.go(t,!1)},_go2:function(t){var e;switch(t.type_){case"chemfive":e="";var o={a:r._goInner(t.a),b:r._goInner(t.b),p:r._goInner(t.p),o:r._goInner(t.o),q:r._goInner(t.q),d:r._goInner(t.d)};o.a&&(o.a.match(/^[+\-]/)&&(o.a="{"+o.a+"}"),e+=o.a+"\\,"),(o.b||o.p)&&(e+="{\\vphantom{A}}",e+="^{\\hphantom{"+(o.b||"")+"}}_{\\hphantom{"+(o.p||"")+"}}",e+="\\mkern-1.5mu",e+="{\\vphantom{A}}",e+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(o.b||"")+"}}",e+="_{\\vphantom{2}\\llap{\\smash[t]{"+(o.p||"")+"}}}"),o.o&&(o.o.match(/^[+\-]/)&&(o.o="{"+o.o+"}"),e+=o.o),"kv"===t.dType?((o.d||o.q)&&(e+="{\\vphantom{A}}"),o.d&&(e+="^{"+o.d+"}"),o.q&&(e+="_{\\smash[t]{"+o.q+"}}")):"oxidation"===t.dType?(o.d&&(e+="{\\vphantom{A}}",e+="^{"+o.d+"}"),o.q&&(e+="{\\vphantom{A}}",e+="_{\\smash[t]{"+o.q+"}}")):(o.q&&(e+="{\\vphantom{A}}",e+="_{\\smash[t]{"+o.q+"}}"),o.d&&(e+="{\\vphantom{A}}",e+="^{"+o.d+"}"));break;case"rm":case"roman numeral":e="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),e="\\mathrm{"+t.p1+"}"):e="\\text{"+t.p1+"}";break;case"state of aggregation":e="\\mskip2mu "+r._goInner(t.p1);break;case"state of aggregation subscript":e="\\mskip1mu "+r._goInner(t.p1);break;case"bond":if(!(e=r._getBond(t.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var n="\\frac{"+t.p1+"}{"+t.p2+"}";e="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var a="\\frac{"+r._goInner(t.p1)+"}{"+r._goInner(t.p2)+"}";e="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"tex-math":case"1st-level escape":e=t.p1+" ";break;case"frac-ce":e="\\frac{"+r._goInner(t.p1)+"}{"+r._goInner(t.p2)+"}";break;case"overset":e="\\overset{"+r._goInner(t.p1)+"}{"+r._goInner(t.p2)+"}";break;case"underset":e="\\underset{"+r._goInner(t.p1)+"}{"+r._goInner(t.p2)+"}";break;case"underbrace":e="\\underbrace{"+r._goInner(t.p1)+"}_{"+r._goInner(t.p2)+"}";break;case"color":e="{\\color{"+t.color1+"}{"+r._goInner(t.color2)+"}}";break;case"color0":e="\\color{"+t.color+"}";break;case"arrow":var i={rd:r._goInner(t.rd),rq:r._goInner(t.rq)},p=r._getArrow(t.r);i.rd||i.rq?"<=>"===t.r||"<=>>"===t.r||"<<=>"===t.r||"<--\x3e"===t.r?(p="\\long"+p,i.rd&&(p="\\overset{"+i.rd+"}{"+p+"}"),i.rq&&(p="<--\x3e"===t.r?"\\underset{\\lower2mu{"+i.rq+"}}{"+p+"}":"\\underset{\\lower6mu{"+i.rq+"}}{"+p+"}"),p=" {}\\mathrel{"+p+"}{} "):(i.rq&&(p+="[{"+i.rq+"}]"),p=" {}\\mathrel{\\x"+(p+="{"+i.rd+"}")+"}{} "):p=" {}\\mathrel{\\long"+p+"}{} ",e=p;break;case"operator":e=r._getOperator(t.kind_);break;case"space":e=" ";break;case"tinySkip":e="\\mkern2mu";break;case"entitySkip":case"pu-space-1":e="~";break;case"pu-space-2":e="\\mkern3mu ";break;case"1000 separator":e="\\mkern2mu ";break;case"commaDecimal":e="{,}";break;case"comma enumeration L":e="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":e="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":e="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":e="\\text{-}";break;case"addition compound":e="\\,{\\cdot}\\,";break;case"electron dot":e="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":e="{\\times}";break;case"prime":e="\\prime ";break;case"cdot":e="\\cdot ";break;case"tight cdot":e="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":e="\\times ";break;case"circa":e="{\\sim}";break;case"^":e="uparrow";break;case"v":e="downarrow";break;case"ellipsis":e="\\ldots ";break;case"/":e="/";break;case" / ":e="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return e},_getArrow:function(t){switch(t){case"->":case"\u2192":case"\u27f6":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<--\x3e":return"leftrightarrows";case"<=>":case"\u21cc":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}}}},a={};function r(t){var e=a[t];if(void 0!==e)return e.exports;var o=a[t]={exports:{}};return n[t].call(o.exports,o,o.exports,r),o.exports}t=r(955),e=r(667),o=r(78),MathJax.loader&&MathJax.loader.checkVersion("[tex]/mhchem",e.q,"tex-extension"),(0,t.r8)({_:{input:{tex:{mhchem:{MhchemConfiguration:o}}}}})}();
   </script>
   <script charset="UTF-8">
    (function(){"use strict";var __webpack_modules__={706:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=new Map;t.default=n},8905:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sreReady=t.Sre=void 0;var l,u=o(n(9037)),d=o(n(907)),h=o(n(7317)),p=o(n(4998)),f=c(n(4886)),m=n(3955),g=o(n(9009)),S=n(4513),b=c(n(706));!function(e){e.locales=S.Variables.LOCALES,e.sreReady=u.engineReady,e.setupEngine=u.setupEngine,e.engineSetup=u.engineSetup,e.toEnriched=u.toEnriched,e.toSpeech=u.toSpeech,e.clearspeakPreferences=m.ClearspeakPreferences,e.getHighlighter=g.highlighter,e.getSpeechGenerator=h.generator,e.getWalker=d.walker,e.clearspeakStyle=function(){return p.DOMAIN_TO_STYLES.clearspeak},e.preloadLocales=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){return[2,(t=b.default.get(e))?new Promise((function(e,n){return e(JSON.stringify(t))})):u.localeLoader()(e)]}))}))}}(l=t.Sre||(t.Sre={})),t.sreReady=l.sreReady,f.default.getInstance().delay=!0,t.default=l},7306:function(e,t){t.q=void 0,t.q="3.2.2"},8723:function(e,t){MathJax._.components.global.isObject,MathJax._.components.global.combineConfig,MathJax._.components.global.combineDefaults,t.r8=MathJax._.components.global.combineWithMathJax,MathJax._.components.global.MathJax},1993:function(e,t){MathJax._.components.package.PackageError,t.GL=MathJax._.components.package.Package},7086:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractAudioRenderer=void 0;const r=n(4886);t.AbstractAudioRenderer=class{constructor(){this.separator_=" "}setSeparator(e){this.separator_=e}getSeparator(){return"braille"===r.default.getInstance().modality?"":this.separator_}error(e){return null}merge(e){let t="";const n=e.length-1;for(let r,i=0;r=e[i];i++)if(t+=r.speech,i<n){const e=r.attributes.separator;t+=void 0!==e?e:this.getSeparator()}return t}finalize(e){return e}pauseValue(e){let t;switch(e){case"long":t=750;break;case"medium":t=500;break;case"short":t=250;break;default:t=parseInt(e,10)}return Math.floor(t*r.default.getInstance().getRate()/100)}}},9202:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AcssRenderer=void 0;const r=n(4998),i=n(6988),o=n(2599),s=n(9610);class a extends s.MarkupRenderer{markup(e){this.setScaleFunction(-2,2,0,10,0);const t=o.personalityMarkup(e),n=[],r={open:[]};let i=null,s=!1;for(let e,a=0;e=t[a];a++){if(o.isMarkupElement(e)){o.mergeMarkup(r,e);continue}if(o.isPauseElement(e)){s&&(i=o.mergePause(i,e,Math.max));continue}const t='"'+this.merge(e.span)+'"';s=!0,i&&(n.push(this.pause(i)),i=null);const a=this.prosody_(r);n.push(a?"(text ("+a+") "+t+")":t)}return"(exp "+n.join(" ")+")"}error(e){return'(error "'+i.Move.get(e)+'")'}prosodyElement(e,t){switch(t=this.applyScaleFunction(t),e){case r.personalityProps.RATE:return"(richness . "+t+")";case r.personalityProps.PITCH:return"(average-pitch . "+t+")";case r.personalityProps.VOLUME:return"(stress . "+t+")"}return"(value . "+t+")"}pause(e){return"(pause . "+this.pauseValue(e[r.personalityProps.PAUSE])+")"}prosody_(e){const t=e.open,n=[];for(let r,i=0;r=t[i];i++)n.push(this.prosodyElement(r,e[r]));return n.join(" ")}}t.AcssRenderer=a},2599:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isSpanElement=t.isPauseElement=t.isMarkupElement=t.personalityMarkup=t.sortClose=t.mergeMarkup=t.mergePause=void 0;const r=n(1426),i=n(4998),o=n(1930);function s(e,t,n){return(n||function(n,r){return"number"==typeof n&&"number"==typeof r?n+r:"number"==typeof n?r:"number"==typeof r?n:[e,t].sort()[0]}).call(null,e,t)}t.mergePause=function(e,t,n){return e?{pause:s(e.pause,t.pause,n)}:t},t.mergeMarkup=function(e,t){delete e.open,t.close.forEach((t=>delete e[t])),t.open.forEach((n=>e[n]=t[n]));const n=Object.keys(e);e.open=n},t.sortClose=function(e,t){if(e.length<=1)return e;const n=[];for(let r,i=0;r=t[i],e.length;i++)r.close&&r.close.length&&r.close.forEach((function(t){const r=e.indexOf(t);-1!==r&&(n.unshift(t),e.splice(r,1))}));return n};let a={},c=[];function l(e,t){const n=e[e.length-1];if(n){if(p(t)&&p(n)){if(void 0===n.join)return void(n.span=n.span.concat(t.span));const e=n.span.pop(),r=t.span.shift();return n.span.push(e+n.join+r),n.span=n.span.concat(t.span),void(n.join=t.join)}h(t)&&h(n)?n.pause=s(n.pause,t.pause):e.push(t)}else e.push(t)}function u(e,t){e.rate&&(t.rate=e.rate),e.pitch&&(t.pitch=e.pitch),e.volume&&(t.volume=e.volume)}function d(e){return"object"==typeof e&&e.open}function h(e){return"object"==typeof e&&1===Object.keys(e).length&&Object.keys(e)[0]===i.personalityProps.PAUSE}function p(e){const t=Object.keys(e);return"object"==typeof e&&(1===t.length&&"span"===t[0]||2===t.length&&("span"===t[0]&&"join"===t[1]||"span"===t[1]&&"join"===t[0]))}function f(e,t,n,r,a,c=!1){if(c){const c=e[e.length-1];let l;if(c&&(l=c[i.personalityProps.JOIN]),c&&!t.speech&&a&&h(c)){const e=i.personalityProps.PAUSE;c[e]=s(c[e],a[e]),a=null}if(c&&t.speech&&0===Object.keys(n).length&&p(c)){if(void 0!==l){const e=c.span.pop();t=new o.Span(e.speech+l+t.speech,e.attributes)}c.span.push(t),t=new o.Span("",{}),c[i.personalityProps.JOIN]=r}}0!==Object.keys(n).length&&e.push(n),t.speech&&e.push({span:[t],join:r}),a&&e.push(a)}function m(e,t){if(!t)return e;const n={};for(const r of i.personalityPropList){const i=e[r],o=t[r];if(!i&&!o||i&&o&&i===o)continue;const s=i||0;d(n)||(n.open=[],n.close=[]),i||n.close.push(r),o||n.open.push(r),o&&i&&(n.close.push(r),n.open.push(r)),t[r]=s,n[r]=s,a[r]?a[r].push(s):a[r]=[s]}if(d(n)){let e=n.close.slice();for(;e.length>0;){let i=c.pop();const o=(0,r.setdifference)(i,e);if(e=(0,r.setdifference)(e,i),i=o,0!==e.length){if(0!==i.length){n.close=n.close.concat(i),n.open=n.open.concat(i);for(let e,r=0;e=i[r];r++)n[e]=t[e]}}else 0!==i.length&&c.push(i)}c.push(n.open)}return n}t.personalityMarkup=function(e){a={},c=[];let t=[];const n={};for(let r,o=0;r=e[o];o++){let e=null;const o=r.descriptionSpan(),s=r.personality,a=s[i.personalityProps.JOIN];delete s[i.personalityProps.JOIN],void 0!==s[i.personalityProps.PAUSE]&&(e={[i.personalityProps.PAUSE]:s[i.personalityProps.PAUSE]},delete s[i.personalityProps.PAUSE]);f(t,o,m(s,n),a,e,!0)}return t=t.concat(function(){const e=[];for(let t=c.length-1;t>=0;t--){const n=c[t];if(n.length){const t={open:[],close:[]};for(let e=0;e<n.length;e++){const r=n[e];t.close.push(r),t[r]=0}e.push(t)}}return e}()),t=function(e){const t={},n=[];for(let r,i=0;r=e[i];i++){if(!d(r)){l(n,r);continue}if(!r.close||1!==r.close.length||r.open.length){u(r,t),n.push(r);continue}let o=e[i+1];if(!o||p(o)){u(r,t),n.push(r);continue}const s=h(o)?o:null;s&&(o=e[i+2]),o&&d(o)&&o.open[0]===r.close[0]&&!o.close.length&&o[o.open[0]]===t[o.open[0]]?s?(l(n,s),i+=2):i+=1:(u(r,t),n.push(r))}return n}(t),t},t.isMarkupElement=d,t.isPauseElement=h,t.isSpanElement=p},4148:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AuditoryDescription=void 0;const r=n(1058),i=n(1930);class o{constructor({context:e,text:t,userValue:n,annotation:r,attributes:i,personality:o,layout:s}){this.context=e||"",this.text=t||"",this.userValue=n||"",this.annotation=r||"",this.attributes=i||{},this.personality=o||{},this.layout=s||""}static create(e,t={}){return e.text=r.Grammar.getInstance().apply(e.text,t),new o(e)}isEmpty(){return 0===this.context.length&&0===this.text.length&&0===this.userValue.length&&0===this.annotation.length}clone(){let e,t;if(this.personality){e={};for(const t in this.personality)e[t]=this.personality[t]}if(this.attributes){t={};for(const e in this.attributes)t[e]=this.attributes[e]}return new o({context:this.context,text:this.text,userValue:this.userValue,annotation:this.annotation,personality:e,attributes:t,layout:this.layout})}toString(){return'AuditoryDescription(context="'+this.context+'"  text="'+this.text+'"  userValue="'+this.userValue+'"  annotation="'+this.annotation+'")'}descriptionString(){return this.context&&this.text?this.context+" "+this.text:this.context||this.text}descriptionSpan(){return new i.Span(this.descriptionString(),this.attributes)}equals(e){return this.context===e.context&&this.text===e.text&&this.userValue===e.userValue&&this.annotation===e.annotation}}t.AuditoryDescription=o},4253:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isXml=t.registerRenderer=t.error=t.finalize=t.merge=t.markup=t.getSeparator=t.setSeparator=void 0;const r=n(4886),i=n(4998),o=n(9202),s=n(1292),a=n(1674),c=n(8078),l=n(1930),u=n(4115),d=n(6123),h=n(8244),p=n(4708),f=new u.SsmlRenderer,m=new Map([[i.Markup.NONE,new h.StringRenderer],[i.Markup.PUNCTUATION,new a.PunctuationRenderer],[i.Markup.LAYOUT,new s.LayoutRenderer],[i.Markup.ACSS,new o.AcssRenderer],[i.Markup.SABLE,new c.SableRenderer],[i.Markup.VOICEXML,f],[i.Markup.SSML,f],[i.Markup.SSML_STEP,new d.SsmlStepRenderer]]);t.setSeparator=function(e){const t=m.get(r.default.getInstance().markup);t&&t.setSeparator(e)},t.getSeparator=function(){const e=m.get(r.default.getInstance().markup);return e?e.getSeparator():""},t.markup=function(e){const t=m.get(r.default.getInstance().markup);return t?t.markup(e):""},t.merge=function(e){const t=e.map((e=>"string"==typeof e?new l.Span(e,{}):e)),n=m.get(r.default.getInstance().markup);return n?n.merge(t):e.join()},t.finalize=function(e){const t=m.get(r.default.getInstance().markup);return t?t.finalize(e):e},t.error=function(e){const t=m.get(r.default.getInstance().markup);return t?t.error(e):""},t.registerRenderer=function(e,t){m.set(e,t)},t.isXml=function(){return m.get(r.default.getInstance().markup)instanceof p.XmlRenderer}},1292:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutRenderer=void 0;const r=n(1984),i=n(6671),o=n(4998),s=n(2599),a=n(4708);class c extends a.XmlRenderer{finalize(e){return function(e){l="";const t=i.parseInput(`<all>${e}</all>`);return r.Debugger.getInstance().output(i.formatXml(t.toString())),l=p(t),l}(e)}pause(e){return""}prosodyElement(e,t){return e===o.personalityProps.LAYOUT?`<${t}>`:""}closeTag(e){return`</${e}>`}markup(e){const t=[];let n=[];for(const r of e){if(!r.layout){n.push(r);continue}t.push(this.processContent(n)),n=[];const e=r.layout;e.match(/^begin/)?t.push("<"+e.replace(/^begin/,"")+">"):e.match(/^end/)?t.push("</"+e.replace(/^end/,"")+">"):console.warn("Something went wrong with layout markup: "+e)}return t.push(this.processContent(n)),t.join("")}processContent(e){const t=[],n=s.personalityMarkup(e);for(let e,r=0;e=n[r];r++)e.span?t.push(this.merge(e.span)):s.isPauseElement(e);return t.join("")}}t.LayoutRenderer=c;let l="";const u={TABLE:function(e){let t=S(e);t.forEach((e=>{e.cells=e.cells.slice(1).slice(0,-1),e.width=e.width.slice(1).slice(0,-1)}));const[n,r]=b(t);return t=N(t,r),E(t,n)},CASES:function(e){let t=S(e);t.forEach((e=>{e.cells=e.cells.slice(0,-1),e.width=e.width.slice(0,-1)}));const[n,r]=b(t);return t=N(t,r),E(t,n)},CAYLEY:function(e){let t=S(e);t.forEach((e=>{e.cells=e.cells.slice(1).slice(0,-1),e.width=e.width.slice(1).slice(0,-1),e.sep=e.sep+e.sep}));const[n,r]=b(t),i={lfence:"",rfence:"",cells:r.map((e=>"\u2810"+new Array(e).join("\u2812"))),width:r,height:1,sep:t[0].sep};return t.splice(1,0,i),t=N(t,r),E(t,n)},MATRIX:function(e){let t=S(e);const[n,r]=b(t);return t=N(t,r),E(t,n)},CELL:p,FENCE:p,ROW:p,FRACTION:function(e){const[t,n,,r,i]=Array.from(e.childNodes),o=d(n),s=d(r),a=m(o),c=m(s);let l=Math.max(a,c);const u=t+new Array(l+1).join("\u2812")+i;return l=u.length,`${C(o,l)}\n${u}\n${C(s,l)}`},NUMERATOR:T,DENOMINATOR:T};function d(e){const t=i.tagName(e),n=u[t];return n?n(e):e.textContent}function h(e,t){if(!e||!t)return e+t;const n=f(e),r=f(t),i=n-r;e=i<0?g(e,r,m(e)):e,t=i>0?g(t,n,m(t)):t;const o=e.split(/\r\n|\r|\n/),s=t.split(/\r\n|\r|\n/),a=[];for(let e=0;e<o.length;e++)a.push(o[e]+s[e]);return a.join("\n")}function p(e){let t="";for(const n of Array.from(e.childNodes))t=n.nodeType!==i.NodeType.TEXT_NODE?h(t,d(n)):h(t,n.textContent);return t}function f(e){return e.split(/\r\n|\r|\n/).length}function m(e){return e.split(/\r\n|\r|\n/).reduce(((e,t)=>Math.max(t.length,e)),0)}function g(e,t,n){return e=function(e,t){const n=t-f(e);return e+(n>0?new Array(n+1).join("\n"):"")}(e,t),function(e,t){const n=e.split(/\r\n|\r|\n/),r=[];for(const e of n){const n=t-e.length;r.push(e+(n>0?new Array(n+1).join("\u2800"):""))}return r.join("\n")}(e,n)}function S(e){const t=Array.from(e.childNodes),n=[];for(const e of t)e.nodeType===i.NodeType.ELEMENT_NODE&&n.push(_(e));return n}function b(e){const t=e.reduce(((e,t)=>Math.max(t.height,e)),0),n=[];for(let t=0;t<e[0].width.length;t++)n.push(e.map((e=>e.width[t])).reduce(((e,t)=>Math.max(e,t)),0));return[t,n]}function N(e,t){const n=[];for(const r of e){if(0===r.height)continue;const e=[];for(let n=0;n<r.cells.length;n++)e.push(g(r.cells[n],r.height,t[n]));r.cells=e,n.push(r)}return n}function E(e,t){if(1===t)return e.map((e=>e.lfence+e.cells.join(e.sep)+e.rfence)).join("\n");const n=[];for(const t of e){const e=y(t.sep,t.height);let r=t.cells.shift();for(;t.cells.length;)r=h(r,e),r=h(r,t.cells.shift());r=h(y(t.lfence,t.height),r),r=h(r,y(t.rfence,t.height)),n.push(r),n.push(t.lfence+new Array(m(r)-3).join(t.sep)+t.rfence)}return n.slice(0,-1).join("\n")}function y(e,t){let n="";for(;t;)n+=e+"\n",t--;return n.slice(0,-1)}function A(e){return e.nodeType===i.NodeType.ELEMENT_NODE&&"FENCE"===i.tagName(e)?d(e):""}function _(e){const t=Array.from(e.childNodes),n=A(t[0]),r=A(t[t.length-1]);n&&t.shift(),r&&t.pop();let o="";const s=[];for(const e of t){if(e.nodeType===i.NodeType.TEXT_NODE){o=e.textContent;continue}const t=d(e);s.push(t)}return{lfence:n,rfence:r,sep:o,cells:s,height:s.reduce(((e,t)=>Math.max(f(t),e)),0),width:s.map(m)}}function C(e,t){const n=(t-m(e))/2,[r,i]=Math.floor(n)===n?[n,n]:[Math.floor(n),Math.ceil(n)],o=e.split(/\r\n|\r|\n/),s=[],[a,c]=[new Array(r+1).join("\u2800"),new Array(i+1).join("\u2800")];for(const e of o)s.push(a+e+c);return s.join("\n")}function T(e){const t=e.firstChild,n=p(e);if(t&&t.nodeType===i.NodeType.ELEMENT_NODE){if("ENGLISH"===i.tagName(t))return"\u2830"+n;if("NUMBER"===i.tagName(t))return"\u283c"+n}return n}},9610:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MarkupRenderer=void 0;const r=n(4998),i=n(7086);class o extends i.AbstractAudioRenderer{constructor(){super(...arguments),this.ignoreElements=[r.personalityProps.LAYOUT],this.scaleFunction=null}setScaleFunction(e,t,n,r,i=0){this.scaleFunction=o=>{const s=(o-e)/(t-e),a=n*(1-s)+r*s;return+(Math.round(a+"e+"+i)+"e-"+i)}}applyScaleFunction(e){return this.scaleFunction?this.scaleFunction(e):e}ignoreElement(e){return-1!==this.ignoreElements.indexOf(e)}}t.MarkupRenderer=o},1674:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PunctuationRenderer=void 0;const r=n(4998),i=n(7086),o=n(2599);class s extends i.AbstractAudioRenderer{markup(e){const t=o.personalityMarkup(e);let n="",i=null,s=!1;for(let e,a=0;e=t[a];a++)o.isMarkupElement(e)||(o.isPauseElement(e)?s&&(i=o.mergePause(i,e,Math.max)):(i&&(n+=this.pause(i[r.personalityProps.PAUSE]),i=null),n+=(s?this.getSeparator():"")+this.merge(e.span),s=!0));return n}pause(e){let t;return t="number"==typeof e?e<=250?"short":e<=500?"medium":"long":e,s.PAUSE_PUNCTUATION.get(t)||""}}t.PunctuationRenderer=s,s.PAUSE_PUNCTUATION=new Map([["short",","],["medium",";"],["long","."]])},8078:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SableRenderer=void 0;const r=n(4998),i=n(4708);class o extends i.XmlRenderer{finalize(e){return'<?xml version="1.0"?><!DOCTYPE SABLE PUBLIC "-//SABLE//DTD SABLE speech mark up//EN" "Sable.v0_2.dtd" []><SABLE>'+this.getSeparator()+e+this.getSeparator()+"</SABLE>"}pause(e){return'<BREAK MSEC="'+this.pauseValue(e[r.personalityProps.PAUSE])+'"/>'}prosodyElement(e,t){switch(t=this.applyScaleFunction(t),e){case r.personalityProps.PITCH:return'<PITCH RANGE="'+t+'%">';case r.personalityProps.RATE:return'<RATE SPEED="'+t+'%">';case r.personalityProps.VOLUME:return'<VOLUME LEVEL="'+t+'%">';default:return"<"+e.toUpperCase()+' VALUE="'+t+'">'}}closeTag(e){return"</"+e.toUpperCase()+">"}}t.SableRenderer=o},1930:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0;t.Span=class{constructor(e,t){this.speech=e,this.attributes=t}}},4115:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SsmlRenderer=void 0;const r=n(4886),i=n(4998),o=n(4708);class s extends o.XmlRenderer{finalize(e){return'<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis"><prosody rate="'+r.default.getInstance().getRate()+'%">'+this.getSeparator()+e+this.getSeparator()+"</prosody></speak>"}pause(e){return'<break time="'+this.pauseValue(e[i.personalityProps.PAUSE])+'ms"/>'}prosodyElement(e,t){const n=(t=Math.floor(this.applyScaleFunction(t)))<0?t.toString():"+"+t.toString();return"<prosody "+e.toLowerCase()+'="'+n+(e===i.personalityProps.VOLUME?">":'%">')}closeTag(e){return"</prosody>"}}t.SsmlRenderer=s},6123:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SsmlStepRenderer=void 0;const r=n(4115);class i extends r.SsmlRenderer{markup(e){return i.MARKS={},super.markup(e)}merge(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],o=r.attributes.extid;o&&!i.MARKS[o]&&(t.push('<mark name="'+o+'"/>'),i.MARKS[o]=!0),1===r.speech.length&&r.speech.match(/[a-zA-Z]/)?t.push('<say-as interpret-as="'+i.CHARACTER_ATTR+'">'+r.speech+"</say-as>"):t.push(r.speech)}return t.join(this.getSeparator())}}t.SsmlStepRenderer=i,i.CHARACTER_ATTR="character",i.MARKS={}},8244:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringRenderer=void 0;const r=n(7086),i=n(2599);class o extends r.AbstractAudioRenderer{markup(e){let t="";const n=(0,i.personalityMarkup)(e).filter((e=>e.span));if(!n.length)return t;const r=n.length-1;for(let e,i=0;e=n[i];i++){if(e.span&&(t+=this.merge(e.span)),i>=r)continue;const n=e.join;t+=void 0===n?this.getSeparator():n}return t}}t.StringRenderer=o},4708:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XmlRenderer=void 0;const r=n(4886),i=n(2599),o=n(9610);class s extends o.MarkupRenderer{markup(e){this.setScaleFunction(-2,2,-100,100,2);const t=i.personalityMarkup(e),n=[],o=[];for(let e,s=0;e=t[s];s++)if(e.span)n.push(this.merge(e.span));else if(i.isPauseElement(e))n.push(this.pause(e));else{if(e.close.length)for(let t=0;t<e.close.length;t++){const t=o.pop();if(-1===e.close.indexOf(t))throw new r.SREError("Unknown closing markup element: "+t);n.push(this.closeTag(t))}if(e.open.length){i.sortClose(e.open.slice(),t.slice(s+1)).forEach((t=>{n.push(this.prosodyElement(t,e[t])),o.push(t)}))}}return n.join(" ")}}t.XmlRenderer=s},1426:function(e,t){function n(e,t){return e?t?e.filter((e=>t.indexOf(e)<0)):e:[]}Object.defineProperty(t,"__esModule",{value:!0}),t.union=t.setdifference=t.interleaveLists=t.removeEmpty=void 0,t.removeEmpty=function(e){return e.filter((e=>e))},t.interleaveLists=function(e,t){const n=[];for(;e.length||t.length;)e.length&&n.push(e.shift()),t.length&&n.push(t.shift());return n},t.setdifference=n,t.union=function(e,t){return e&&t?e.concat(n(t,e)):e||t||[]}},9501:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.loadScript=t.loadMapsForIE_=t.installWGXpath_=t.loadWGXpath_=t.mapsForIE=t.detectEdge=t.detectIE=void 0;const r=n(4755),i=n(5024);function o(e){c(r.default.WGXpath),s(e)}function s(e,t){let n=t||1;"undefined"==typeof wgxpath&&n<10?setTimeout((function(){s(e,n++)}),200):n>=10||(r.default.wgxpath=wgxpath,e?r.default.wgxpath.install({document:document}):r.default.wgxpath.install(),i.xpath.evaluate=document.evaluate,i.xpath.result=XPathResult,i.xpath.createNSResolver=document.createNSResolver)}function a(){c(r.default.mathmapsIePath)}function c(e){const t=r.default.document.createElement("script");t.type="text/javascript",t.src=e,r.default.document.head?r.default.document.head.appendChild(t):r.default.document.body.appendChild(t)}t.detectIE=function(){return"undefined"!=typeof window&&"ActiveXObject"in window&&"clipboardData"in window&&(a(),o(),!0)},t.detectEdge=function(){var e;return"undefined"!=typeof window&&"MSGestureEvent"in window&&null===(null===(e=window.chrome)||void 0===e?void 0:e.loadTimes)&&(document.evaluate=null,o(!0),!0)},t.mapsForIE=null,t.loadWGXpath_=o,t.installWGXpath_=s,t.loadMapsForIE_=a,t.loadScript=c},1984:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0;const r=n(4755);class i{constructor(){this.isActive_=!1,this.outputFunction_=console.info,this.stream_=null}static getInstance(){return i.instance=i.instance||new i,i.instance}init(e){e&&this.startDebugFile_(e),this.isActive_=!0}output(...e){this.isActive_&&this.output_(e)}generateOutput(e){this.isActive_&&this.output_(e.apply(e,[]))}exit(e=(()=>{})){this.isActive_&&this.stream_&&this.stream_.end("","",e)}startDebugFile_(e){this.stream_=r.default.fs.createWriteStream(e),this.outputFunction_=function(...e){this.stream_.write(e.join(" ")),this.stream_.write("\n")}.bind(this),this.stream_.on("error",function(e){console.info("Invalid log file. Debug information sent to console."),this.outputFunction_=console.info}.bind(this)),this.stream_.on("finish",(function(){console.info("Finalizing debug file.")}))}output_(e){this.outputFunction_.apply(console.info===this.outputFunction_?console:this.outputFunction_,["Speech Rule Engine Debugger:"].concat(e))}}t.Debugger=i},6671:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeXml=t.cloneNode=t.tagName=t.querySelectorAll=t.querySelectorAllByAttrValue=t.querySelectorAllByAttr=t.formatXml=t.createTextNode=t.createElementNS=t.createElement=t.replaceNode=t.NodeType=t.parseInput=t.XML_ENTITIES=t.trimInput_=t.toArray=void 0;const r=n(4886),i=n(4998),o=n(4755),s=n(5024);function a(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function c(e){return(e=e.replace(/&nbsp;/g,"\xa0")).replace(/>[ \f\n\r\t\v\u200b]+</g,"><").trim()}function l(e,t){if(!t)return[!1,""];const n=e.match(/^<([^> ]+).*>/),r=t.match(/^<\/([^>]+)>(.*)/);return n&&r&&n[1]===r[1]?[!0,r[2]]:[!1,""]}t.toArray=a,t.trimInput_=c,t.XML_ENTITIES={"&lt;":!0,"&gt;":!0,"&amp;":!0,"&quot;":!0,"&apos;":!0},t.parseInput=function(e){const t=new o.default.xmldom.DOMParser,n=c(e),a=!!n.match(/&(?!lt|gt|amp|quot|apos)\w+;/g);if(!n)throw new Error("Empty input!");try{const e=t.parseFromString(n,a?"text/html":"text/xml");return r.default.getInstance().mode===i.Mode.HTTP?(s.xpath.currentDocument=e,a?e.body.childNodes[0]:e.documentElement):e.documentElement}catch(e){throw new r.SREError("Illegal input: "+e.message)}},function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",e[e.NOTATION_NODE=12]="NOTATION_NODE"}(t.NodeType||(t.NodeType={})),t.replaceNode=function(e,t){e.parentNode&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))},t.createElement=function(e){return o.default.document.createElement(e)},t.createElementNS=function(e,t){return o.default.document.createElementNS(e,t)},t.createTextNode=function(e){return o.default.document.createTextNode(e)},t.formatXml=function(e){let t="",n=/(>)(<)(\/*)/g,r=0,i=(e=e.replace(n,"$1\r\n$2$3")).split("\r\n");for(n=/(\.)*(<)(\/*)/g,i=i.map((e=>e.replace(n,"$1\r\n$2$3").split("\r\n"))).reduce(((e,t)=>e.concat(t)),[]);i.length;){let e=i.shift();if(!e)continue;let n=0;if(e.match(/^<\w[^>/]*>[^>]+$/)){const t=l(e,i[0]);t[0]?t[1]?(e+=i.shift().slice(0,-t[1].length),t[1].trim()&&i.unshift(t[1])):e+=i.shift():n=1}else if(e.match(/^<\/\w/))0!==r&&(r-=1);else if(e.match(/^<\w[^>]*[^/]>.*$/))n=1;else if(e.match(/^<\w[^>]*\/>.+$/)){const t=e.indexOf(">")+1;e.slice(t).trim()&&i.unshift(),e=e.slice(0,t)}else n=0;t+=new Array(r+1).join("  ")+e+"\r\n",r+=n}return t},t.querySelectorAllByAttr=function(e,t){return e.querySelectorAll?a(e.querySelectorAll(`[${t}]`)):s.evalXPath(`.//*[@${t}]`,e)},t.querySelectorAllByAttrValue=function(e,t,n){return e.querySelectorAll?a(e.querySelectorAll(`[${t}="${n}"]`)):s.evalXPath(`.//*[@${t}="${n}"]`,e)},t.querySelectorAll=function(e,t){return e.querySelectorAll?a(e.querySelectorAll(t)):s.evalXPath(`.//${t}`,e)},t.tagName=function(e){return e.tagName.toUpperCase()},t.cloneNode=function(e){return e.cloneNode(!0)},t.serializeXml=function(e){return(new o.default.xmldom.XMLSerializer).serializeToString(e)}},4886:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EnginePromise=t.SREError=void 0;const r=n(8310),i=n(4998),o=n(1984),s=n(4513);class a extends Error{constructor(e=""){super(),this.message=e,this.name="SRE Error"}}t.SREError=a;class c{constructor(){this.customLoader=null,this.parsers={},this.comparator=null,this.mode=i.Mode.SYNC,this.init=!0,this.delay=!1,this.comparators={},this.domain="mathspeak",this.style=r.DynamicCstr.DEFAULT_VALUES[r.Axis.STYLE],this._defaultLocale=r.DynamicCstr.DEFAULT_VALUES[r.Axis.LOCALE],this.locale=this.defaultLocale,this.subiso="",this.modality=r.DynamicCstr.DEFAULT_VALUES[r.Axis.MODALITY],this.speech=i.Speech.NONE,this.markup=i.Markup.NONE,this.walker="Table",this.structure=!1,this.ruleSets=[],this.strict=!1,this.isIE=!1,this.isEdge=!1,this.rate="100",this.pprint=!1,this.config=!1,this.rules="",this.prune="",this.evaluator=c.defaultEvaluator,this.defaultParser=new r.DynamicCstrParser(r.DynamicCstr.DEFAULT_ORDER),this.parser=this.defaultParser,this.dynamicCstr=r.DynamicCstr.defaultCstr()}set defaultLocale(e){this._defaultLocale=s.Variables.ensureLocale(e,this._defaultLocale)}get defaultLocale(){return this._defaultLocale}static getInstance(){return c.instance=c.instance||new c,c.instance}static defaultEvaluator(e,t){return e}static evaluateNode(e){return c.nodeEvaluator(e)}getRate(){const e=parseInt(this.rate,10);return isNaN(e)?100:e}setDynamicCstr(e){if(this.defaultLocale&&(r.DynamicCstr.DEFAULT_VALUES[r.Axis.LOCALE]=this.defaultLocale),e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const i=t[n];if(-1!==r.DynamicCstr.DEFAULT_ORDER.indexOf(i)){const t=e[i];this[i]=t}}}i.DOMAIN_TO_STYLES[this.domain]=this.style;const t=[this.locale,this.modality,this.domain,this.style].join("."),n=r.DynamicProperties.createProp([r.DynamicCstr.DEFAULT_VALUES[r.Axis.LOCALE]],[r.DynamicCstr.DEFAULT_VALUES[r.Axis.MODALITY]],[r.DynamicCstr.DEFAULT_VALUES[r.Axis.DOMAIN]],[r.DynamicCstr.DEFAULT_VALUES[r.Axis.STYLE]]),o=this.comparators[this.domain],s=this.parsers[this.domain];this.parser=s||this.defaultParser,this.dynamicCstr=this.parser.parse(t),this.dynamicCstr.updateProperties(n.getProperties()),this.comparator=o?o():new r.DefaultComparator(this.dynamicCstr)}configurate(e){this.mode!==i.Mode.HTTP||this.config||(!function(e){const t=document.documentElement.querySelectorAll('script[type="text/x-sre-config"]');for(let n=0,r=t.length;n<r;n++){let r;try{r=t[n].innerHTML;const i=JSON.parse(r);for(const t in i)e[t]=i[t]}catch(e){o.Debugger.getInstance().output("Illegal configuration ",r)}}}(e),this.config=!0),function(e){if("undefined"!=typeof SREfeature)for(const[t,n]of Object.entries(SREfeature))e[t]=n}(e)}setCustomLoader(e){e&&(this.customLoader=e)}}t.default=c,c.BINARY_FEATURES=["strict","structure","pprint"],c.STRING_FEATURES=["markup","style","domain","speech","walker","defaultLocale","locale","delay","modality","rate","rules","subiso","prune"],c.nodeEvaluator=function(e){return[]};class l{static get(e=c.getInstance().locale){return l.promises[e]||Promise.resolve("")}static getall(){return Promise.all(Object.values(l.promises))}}t.EnginePromise=l,l.loaded={},l.promises={}},4998:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DOMAIN_TO_STYLES=t.Markup=t.Speech=t.personalityPropList=t.personalityProps=t.Mode=void 0,function(e){e.SYNC="sync",e.ASYNC="async",e.HTTP="http"}(t.Mode||(t.Mode={})),function(e){e.PITCH="pitch",e.RATE="rate",e.VOLUME="volume",e.PAUSE="pause",e.JOIN="join",e.LAYOUT="layout"}(n=t.personalityProps||(t.personalityProps={})),t.personalityPropList=[n.PITCH,n.RATE,n.VOLUME,n.PAUSE,n.JOIN],function(e){e.NONE="none",e.SHALLOW="shallow",e.DEEP="deep"}(t.Speech||(t.Speech={})),function(e){e.NONE="none",e.LAYOUT="layout",e.PUNCTUATION="punctuation",e.SSML="ssml",e.SSML_STEP="ssml_step",e.ACSS="acss",e.SABLE="sable",e.VOICEXML="voicexml"}(t.Markup||(t.Markup={})),t.DOMAIN_TO_STYLES={mathspeak:"default",clearspeak:"default"}},985:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const i=n(2371),o=n(5659),s=n(9501),a=n(4886),c=n(7129),l=n(4755);t.setup=function(e){return r(this,void 0,void 0,(function*(){const t=a.default.getInstance();"default"!==e.domain||"speech"!==e.modality&&e.modality&&"speech"!==t.modality||(e.domain="mathspeak");const n=n=>{void 0!==e[n]&&(t[n]=e[n])};return n("mode"),t.configurate(e),a.default.BINARY_FEATURES.forEach((n=>{void 0!==e[n]&&(t[n]=!!e[n])})),a.default.STRING_FEATURES.forEach(n),e.json&&(l.default.jsonPath=c.makePath(e.json)),e.xpath&&(l.default.WGXpath=e.xpath),t.setCustomLoader(e.custom),function(e){e.isIE=s.detectIE(),e.isEdge=s.detectEdge()}(t),i.setLocale(),t.setDynamicCstr(),t.init?(a.EnginePromise.promises.init=new Promise(((e,t)=>{setTimeout((()=>{e("init")}),10)})),t.init=!1,a.EnginePromise.get()):t.delay?(t.delay=!1,a.EnginePromise.get()):o.loadLocale()}))}},6988:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Event=t.EventType=t.Move=t.KeyCode=void 0,function(e){e[e.ENTER=13]="ENTER",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.TAB=9]="TAB",e[e.LESS=188]="LESS",e[e.GREATER=190]="GREATER",e[e.DASH=189]="DASH",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z"}(t.KeyCode||(t.KeyCode={})),t.Move=new Map([[13,"ENTER"],[27,"ESC"],[32,"SPACE"],[33,"PAGE_UP"],[34,"PAGE_DOWN"],[35,"END"],[36,"HOME"],[37,"LEFT"],[38,"UP"],[39,"RIGHT"],[40,"DOWN"],[9,"TAB"],[188,"LESS"],[190,"GREATER"],[189,"DASH"],[48,"ZERO"],[49,"ONE"],[50,"TWO"],[51,"THREE"],[52,"FOUR"],[53,"FIVE"],[54,"SIX"],[55,"SEVEN"],[56,"EIGHT"],[57,"NINE"],[65,"A"],[66,"B"],[67,"C"],[68,"D"],[69,"E"],[70,"F"],[71,"G"],[72,"H"],[73,"I"],[74,"J"],[75,"K"],[76,"L"],[77,"M"],[78,"N"],[79,"O"],[80,"P"],[81,"Q"],[82,"R"],[83,"S"],[84,"T"],[85,"U"],[86,"V"],[87,"W"],[88,"X"],[89,"Y"],[90,"Z"]]),function(e){e.CLICK="click",e.DBLCLICK="dblclick",e.MOUSEDOWN="mousedown",e.MOUSEUP="mouseup",e.MOUSEOVER="mouseover",e.MOUSEOUT="mouseout",e.MOUSEMOVE="mousemove",e.SELECTSTART="selectstart",e.KEYPRESS="keypress",e.KEYDOWN="keydown",e.KEYUP="keyup",e.TOUCHSTART="touchstart",e.TOUCHMOVE="touchmove",e.TOUCHEND="touchend",e.TOUCHCANCEL="touchcancel"}(t.EventType||(t.EventType={}));t.Event=class{constructor(e,t,n){this.src=e,this.type=t,this.callback=n}add(){this.src.addEventListener(this.type,this.callback)}remove(){this.src.removeEventListener(this.type,this.callback)}}},7129:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.localePath=t.makePath=void 0;const r=n(4755);function i(e){return e.match("/$")?e:e+"/"}t.makePath=i,t.localePath=function(e,t="json"){return i(r.default.jsonPath)+e+(t.match(/^\./)?t:"."+t)}},3539:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyProcessor=t.Processor=void 0;const r=n(6988);class i{constructor(e,t){this.name=e,this.process=t.processor,this.postprocess=t.postprocessor||((e,t)=>e),this.processor=this.postprocess?function(e){return this.postprocess(this.process(e),e)}:this.process,this.print=t.print||i.stringify_,this.pprint=t.pprint||this.print}static stringify_(e){return e?e.toString():e}}t.Processor=i,i.LocalState={walker:null,speechGenerator:null,highlighter:null};class o extends i{constructor(e,t){super(e,t),this.key=t.key||o.getKey_}static getKey_(e){return"string"==typeof e?r.KeyCode[e.toUpperCase()]:e}}t.KeyProcessor=o},9615:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.keypress=t.output=t.print=t.process=t.set=void 0;const r=n(4253),i=n(7450),o=n(9009),s=n(4524),a=n(1939),c=n(7317),l=n(144),u=n(907),d=n(8835),h=n(6671),p=n(4886),f=n(4998),m=n(3539),g=n(5024),S=new Map;function b(e){S.set(e.name,e)}function N(e){const t=S.get(e);if(!t)throw new p.SREError("Unknown processor "+e);return t}function E(e,t){const n=N(e);try{return n.processor(t)}catch(e){throw new p.SREError("Processing error for expression "+t)}}function y(e,t){const n=N(e);return p.default.getInstance().pprint?n.pprint(t):n.print(t)}t.set=b,t.process=E,t.print=y,t.output=function(e,t){const n=N(e);try{const e=n.processor(t);return p.default.getInstance().pprint?n.pprint(e):n.print(e)}catch(e){throw new p.SREError("Processing error for expression "+t)}},t.keypress=function(e,t){const n=N(e),r=n instanceof m.KeyProcessor?n.key(t):t,i=n.processor(r);return p.default.getInstance().pprint?n.pprint(i):n.print(i)},b(new m.Processor("semantic",{processor:function(e){const t=h.parseInput(e);return a.xmlTree(t)},postprocessor:function(e,t){const n=p.default.getInstance().speech;if(n===f.Speech.NONE)return e;const i=h.cloneNode(e);let o=l.computeMarkup(i);if(n===f.Speech.SHALLOW)return e.setAttribute("speech",r.finalize(o)),e;const s=g.evalXPath(".//*[@id]",e),a=g.evalXPath(".//*[@id]",i);for(let e,t,n=0;e=s[n],t=a[n];n++)o=l.computeMarkup(t),e.setAttribute("speech",r.finalize(o));return e},pprint:function(e){return h.formatXml(e.toString())}})),b(new m.Processor("speech",{processor:function(e){const t=h.parseInput(e),n=a.xmlTree(t),i=l.computeSpeech(n);return r.finalize(r.markup(i))},pprint:function(e){const t=e.toString();return r.isXml()?h.formatXml(t):t}})),b(new m.Processor("json",{processor:function(e){const t=h.parseInput(e);return a.getTree(t).toJson()},postprocessor:function(e,t){const n=p.default.getInstance().speech;if(n===f.Speech.NONE)return e;const i=h.parseInput(t),o=a.xmlTree(i),s=l.computeMarkup(o);if(n===f.Speech.SHALLOW)return e.stree.speech=r.finalize(s),e;const c=e=>{const t=g.evalXPath(`.//*[@id=${e.id}]`,o)[0],n=l.computeMarkup(t);e.speech=r.finalize(n),e.children&&e.children.forEach(c)};return c(e.stree),e},print:function(e){return JSON.stringify(e)},pprint:function(e){return JSON.stringify(e,null,2)}})),b(new m.Processor("description",{processor:function(e){const t=h.parseInput(e),n=a.xmlTree(t);return l.computeSpeech(n)},print:function(e){return JSON.stringify(e)},pprint:function(e){return JSON.stringify(e,null,2)}})),b(new m.Processor("enriched",{processor:function(e){return i.semanticMathmlSync(e)},postprocessor:function(e,t){const n=d.getSemanticRoot(e);let r;switch(p.default.getInstance().speech){case f.Speech.NONE:break;case f.Speech.SHALLOW:r=c.generator("Adhoc"),r.getSpeech(n,e);break;case f.Speech.DEEP:r=c.generator("Tree"),r.getSpeech(e,e)}return e},pprint:function(e){return h.formatXml(e.toString())}})),b(new m.Processor("walker",{processor:function(e){const t=c.generator("Node");m.Processor.LocalState.speechGenerator=t,t.setOptions({modality:p.default.getInstance().modality,locale:p.default.getInstance().locale,domain:p.default.getInstance().domain,style:p.default.getInstance().style}),m.Processor.LocalState.highlighter=o.highlighter({color:"black"},{color:"white"},{renderer:"NativeMML"});const n=E("enriched",e),r=y("enriched",n);return m.Processor.LocalState.walker=u.walker(p.default.getInstance().walker,n,t,m.Processor.LocalState.highlighter,r),m.Processor.LocalState.walker},print:function(e){return m.Processor.LocalState.walker.speech()}})),b(new m.KeyProcessor("move",{processor:function(e){if(!m.Processor.LocalState.walker)return null;return!1===m.Processor.LocalState.walker.move(e)?r.error(e):m.Processor.LocalState.walker.speech()}})),b(new m.Processor("number",{processor:function(e){const t=parseInt(e,10);return isNaN(t)?"":s.LOCALE.NUMBERS.numberToWords(t)}})),b(new m.Processor("ordinal",{processor:function(e){const t=parseInt(e,10);return isNaN(t)?"":s.LOCALE.NUMBERS.wordOrdinal(t)}})),b(new m.Processor("numericOrdinal",{processor:function(e){const t=parseInt(e,10);return isNaN(t)?"":s.LOCALE.NUMBERS.numericOrdinal(t)}})),b(new m.Processor("vulgar",{processor:function(e){const[t,n]=e.split("/").map((e=>parseInt(e,10)));return isNaN(t)||isNaN(n)?"":E("speech",`<mfrac><mn>${t}</mn><mn>${n}</mn></mfrac>`)}}))},9037:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.localePath=t.exit=t.move=t.walk=t.processFile=t.file=t.vulgar=t.numericOrdinal=t.ordinal=t.number=t.toEnriched=t.toDescription=t.toJson=t.toSemantic=t.toSpeech=t.localeLoader=t.engineReady=t.engineSetup=t.setupEngine=t.version=void 0;const i=n(4886),o=n(985),s=n(4998),a=n(7129),c=n(9615),l=n(4755),u=n(4513),d=n(5659);function h(e){return r(this,void 0,void 0,(function*(){return(0,o.setup)(e)}))}function p(e,t){return c.process(e,t)}function f(e,t,n){switch(i.default.getInstance().mode){case s.Mode.ASYNC:return function(e,t,n){return r(this,void 0,void 0,(function*(){const r=yield l.default.fs.promises.readFile(t,{encoding:"utf8"}),o=c.output(e,r);if(n)try{l.default.fs.promises.writeFile(n,o)}catch(e){throw new i.SREError("Can not write to file: "+n)}return o}))}(e,t,n);case s.Mode.SYNC:return function(e,t,n){const r=function(e){let t;try{t=l.default.fs.readFileSync(e,{encoding:"utf8"})}catch(t){throw new i.SREError("Can not open file: "+e)}return t}(t),o=c.output(e,r);if(n)try{l.default.fs.writeFileSync(n,o)}catch(e){throw new i.SREError("Can not write to file: "+n)}return o}(e,t,n);default:throw new i.SREError(`Can process files in ${i.default.getInstance().mode} mode`)}}t.version=u.Variables.VERSION,t.setupEngine=h,t.engineSetup=function(){const e=["mode"].concat(i.default.STRING_FEATURES,i.default.BINARY_FEATURES),t=i.default.getInstance(),n={};return e.forEach((function(e){n[e]=t[e]})),n.json=l.default.jsonPath,n.xpath=l.default.WGXpath,n.rules=t.ruleSets.slice(),n},t.engineReady=function(){return r(this,void 0,void 0,(function*(){return h({}).then((()=>i.EnginePromise.getall()))}))},t.localeLoader=d.standardLoader,t.toSpeech=function(e){return p("speech",e)},t.toSemantic=function(e){return p("semantic",e)},t.toJson=function(e){return p("json",e)},t.toDescription=function(e){return p("description",e)},t.toEnriched=function(e){return p("enriched",e)},t.number=function(e){return p("number",e)},t.ordinal=function(e){return p("ordinal",e)},t.numericOrdinal=function(e){return p("numericOrdinal",e)},t.vulgar=function(e){return p("vulgar",e)},t.file={},t.file.toSpeech=function(e,t){return f("speech",e,t)},t.file.toSemantic=function(e,t){return f("semantic",e,t)},t.file.toJson=function(e,t){return f("json",e,t)},t.file.toDescription=function(e,t){return f("description",e,t)},t.file.toEnriched=function(e,t){return f("enriched",e,t)},t.processFile=f,t.walk=function(e){return c.output("walker",e)},t.move=function(e){return c.keypress("move",e)},t.exit=function(e){const t=e||0;i.EnginePromise.getall().then((()=>process.exit(t)))},t.localePath=a.localePath,l.default.documentSupported?h({mode:s.Mode.HTTP}).then((()=>h({}))):h({mode:s.Mode.SYNC}).then((()=>h({mode:s.Mode.ASYNC})))},4755:function(__unused_webpack_module,exports,__webpack_require__){var __dirname="/";Object.defineProperty(exports,"__esModule",{value:!0});const variables_1=__webpack_require__(4513);class SystemExternal{static extRequire(library){if("undefined"!=typeof process){const nodeRequire=eval("require");return nodeRequire(library)}return null}}exports.default=SystemExternal,SystemExternal.windowSupported=!("undefined"==typeof window),SystemExternal.documentSupported=SystemExternal.windowSupported&&!(void 0===window.document),SystemExternal.xmldom=SystemExternal.documentSupported?window:SystemExternal.extRequire("xmldom-sre"),SystemExternal.document=SystemExternal.documentSupported?window.document:(new SystemExternal.xmldom.DOMImplementation).createDocument("","",0),SystemExternal.xpath=SystemExternal.documentSupported?document:function(){const e={document:{},XPathResult:{}};return SystemExternal.extRequire("wicked-good-xpath").install(e),e.document.XPathResult=e.XPathResult,e.document}(),SystemExternal.mathmapsIePath="https://cdn.jsdelivr.net/npm/sre-mathmaps-ie@"+variables_1.Variables.VERSION+"mathmaps_ie.js",SystemExternal.commander=SystemExternal.documentSupported?null:SystemExternal.extRequire("commander"),SystemExternal.fs=SystemExternal.documentSupported?null:SystemExternal.extRequire("fs"),SystemExternal.url=variables_1.Variables.url,SystemExternal.jsonPath=(SystemExternal.documentSupported?SystemExternal.url:process.env.SRE_JSON_PATH||__webpack_require__.g.SRE_JSON_PATH||__dirname+"/mathmaps")+"/",SystemExternal.WGXpath=variables_1.Variables.WGXpath,SystemExternal.wgxpath=null},4513:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Variables=void 0;class n{static ensureLocale(e,t){return n.LOCALES.get(e)?e:(console.error(`Locale ${e} does not exist! Using ${n.LOCALES.get(t)} instead.`),t)}}t.Variables=n,n.VERSION="4.0.6",n.LOCALES=new Map([["ca","Catalan"],["da","Danish"],["de","German"],["en","English"],["es","Spanish"],["fr","French"],["hi","Hindi"],["it","Italian"],["nb","Bokm\xe5l"],["nn","Nynorsk"],["sv","Swedish"],["nemeth","Nemeth"]]),n.mathjaxVersion="3.2.1",n.url="https://cdn.jsdelivr.net/npm/speech-rule-engine@"+n.VERSION+"/lib/mathmaps",n.WGXpath="https://cdn.jsdelivr.net/npm/wicked-good-xpath@1.3.0/dist/wgxpath.install.js"},5024:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.updateEvaluator=t.evaluateString=t.evaluateBoolean=t.getLeafNodes=t.evalXPath=t.resolveNameSpace=t.xpath=void 0;const r=n(4886),i=n(4998),o=n(4755);function s(){return"undefined"!=typeof XPathResult}t.xpath={currentDocument:null,evaluate:s()?document.evaluate:o.default.xpath.evaluate,result:s()?XPathResult:o.default.xpath.XPathResult,createNSResolver:s()?document.createNSResolver:o.default.xpath.createNSResolver};const a={xhtml:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",mml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function c(e){return a[e]||null}t.resolveNameSpace=c;class l{constructor(){this.lookupNamespaceURI=c}}function u(e,n,o){return r.default.getInstance().mode!==i.Mode.HTTP||r.default.getInstance().isIE||r.default.getInstance().isEdge?t.xpath.evaluate(e,n,new l,o,null):t.xpath.currentDocument.evaluate(e,n,c,o,null)}function d(e,n){let r;try{r=u(e,n,t.xpath.result.ORDERED_NODE_ITERATOR_TYPE)}catch(e){return[]}const i=[];for(let e=r.iterateNext();e;e=r.iterateNext())i.push(e);return i}t.evalXPath=d,t.getLeafNodes=function(e){return d(".//*[count(*)=0]",e)},t.evaluateBoolean=function(e,n){let r;try{r=u(e,n,t.xpath.result.BOOLEAN_TYPE)}catch(e){return!1}return r.booleanValue},t.evaluateString=function(e,n){let r;try{r=u(e,n,t.xpath.result.STRING_TYPE)}catch(e){return""}return r.stringValue},t.updateEvaluator=function(e){if(r.default.getInstance().mode!==i.Mode.HTTP)return;let n=e;for(;n&&!n.evaluate;)n=n.parentNode;n&&n.evaluate?t.xpath.currentDocument=n:e.ownerDocument&&(t.xpath.currentDocument=e.ownerDocument)}},9341:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractEnrichCase=void 0;t.AbstractEnrichCase=class{constructor(e){this.semantic=e}}},4306:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseBinomial=void 0;const r=n(6671),i=n(9341),o=n(8672),s=n(8171);class a extends i.AbstractEnrichCase{constructor(e){super(e),this.mml=e.mathmlTree}static test(e){return!e.mathmlTree&&"line"===e.type&&"binomial"===e.role}getMathml(){if(!this.semantic.childNodes.length)return this.mml;const e=this.semantic.childNodes[0];if(this.mml=(0,o.walkTree)(e),this.mml.hasAttribute(s.Attribute.TYPE)){const e=r.createElement("mrow");e.setAttribute(s.Attribute.ADDED,"true"),r.replaceNode(this.mml,e),e.appendChild(this.mml),this.mml=e}return(0,s.setAttributes)(this.mml,this.semantic),this.mml}}t.CaseBinomial=a},8871:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseDoubleScript=void 0;const r=n(6671),i=n(9341),o=n(8672),s=n(8171);class a extends i.AbstractEnrichCase{constructor(e){super(e),this.mml=e.mathmlTree}static test(e){if(!e.mathmlTree||!e.childNodes.length)return!1;const t=r.tagName(e.mathmlTree),n=e.childNodes[0].role;return"MSUBSUP"===t&&"subsup"===n||"MUNDEROVER"===t&&"underover"===n}getMathml(){const e=this.semantic.childNodes[0],t=e.childNodes[0],n=this.semantic.childNodes[1],r=e.childNodes[1],i=o.walkTree(n),a=o.walkTree(t),c=o.walkTree(r);return(0,s.setAttributes)(this.mml,this.semantic),this.mml.setAttribute(s.Attribute.CHILDREN,(0,s.makeIdList)([t,r,n])),[a,c,i].forEach((e=>o.getInnerNode(e).setAttribute(s.Attribute.PARENT,this.mml.getAttribute(s.Attribute.ID)))),this.mml.setAttribute(s.Attribute.TYPE,e.role),o.addCollapsedAttribute(this.mml,[this.semantic.id,[e.id,t.id,r.id],n.id]),this.mml}}t.CaseDoubleScript=a},928:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseEmbellished=void 0;const r=n(6671),i=n(9444),o=n(9341),s=n(8871),a=n(4308),c=n(439),l=n(8672),u=n(8171);class d extends o.AbstractEnrichCase{constructor(e){super(e),this.fenced=null,this.fencedMml=null,this.fencedMmlNodes=[],this.ofence=null,this.ofenceMml=null,this.ofenceMap={},this.cfence=null,this.cfenceMml=null,this.cfenceMap={},this.parentCleanup=[]}static test(e){return!(!e.mathmlTree||!e.fencePointer||e.mathmlTree.getAttribute("data-semantic-type"))}static makeEmptyNode_(e){const t=r.createElement("mrow"),n=new i.SemanticNode(e);return n.type="empty",n.mathmlTree=t,n}static fencedMap_(e,t){t[e.id]=e.mathmlTree,e.embellished&&d.fencedMap_(e.childNodes[0],t)}getMathml(){this.getFenced_(),this.fencedMml=l.walkTree(this.fenced),this.getFencesMml_(),"empty"!==this.fenced.type||this.fencedMml.parentNode||(this.fencedMml.setAttribute(u.Attribute.ADDED,"true"),this.cfenceMml.parentNode.insertBefore(this.fencedMml,this.cfenceMml)),this.getFencedMml_();return this.rewrite_()}fencedElement(e){return"fenced"===e.type||"matrix"===e.type||"vector"===e.type}getFenced_(){let e=this.semantic;for(;!this.fencedElement(e);)e=e.childNodes[0];this.fenced=e.childNodes[0],this.ofence=e.contentNodes[0],this.cfence=e.contentNodes[1],d.fencedMap_(this.ofence,this.ofenceMap),d.fencedMap_(this.cfence,this.cfenceMap)}getFencedMml_(){let e=this.ofenceMml.nextSibling;for(e=e===this.fencedMml?e:this.fencedMml;e&&e!==this.cfenceMml;)this.fencedMmlNodes.push(e),e=e.nextSibling}getFencesMml_(){let e=this.semantic;const t=Object.keys(this.ofenceMap),n=Object.keys(this.cfenceMap);for(;!(this.ofenceMml&&this.cfenceMml||e===this.fenced);)-1===t.indexOf(e.fencePointer)||this.ofenceMml||(this.ofenceMml=e.mathmlTree),-1===n.indexOf(e.fencePointer)||this.cfenceMml||(this.cfenceMml=e.mathmlTree),e=e.childNodes[0];this.ofenceMml||(this.ofenceMml=this.ofence.mathmlTree),this.cfenceMml||(this.cfenceMml=this.cfence.mathmlTree),this.ofenceMml&&(this.ofenceMml=l.ascendNewNode(this.ofenceMml)),this.cfenceMml&&(this.cfenceMml=l.ascendNewNode(this.cfenceMml))}rewrite_(){let e=this.semantic,t=null;const n=this.introduceNewLayer_();for((0,u.setAttributes)(n,this.fenced.parent);!this.fencedElement(e);){const i=e.mathmlTree,o=this.specialCase_(e,i);if(o)e=o;else{(0,u.setAttributes)(i,e);const t=[];for(let n,r=1;n=e.childNodes[r];r++)t.push(l.walkTree(n));e=e.childNodes[0]}const s=r.createElement("dummy"),a=i.childNodes[0];r.replaceNode(i,s),r.replaceNode(n,i),r.replaceNode(i.childNodes[0],n),r.replaceNode(s,a),t||(t=i)}return l.walkTree(this.ofence),l.walkTree(this.cfence),this.cleanupParents_(),t||n}specialCase_(e,t){const n=r.tagName(t);let i,o=null;if("MSUBSUP"===n?(o=e.childNodes[0],i=s.CaseDoubleScript):"MMULTISCRIPTS"===n&&("superscript"===e.type||"subscript"===e.type?i=a.CaseMultiscripts:"tensor"===e.type&&(i=c.CaseTensor),o=i&&e.childNodes[0]&&"subsup"===e.childNodes[0].role?e.childNodes[0]:e),!o)return null;const l=o.childNodes[0],u=d.makeEmptyNode_(l.id);return o.childNodes[0]=u,t=new i(e).getMathml(),o.childNodes[0]=l,this.parentCleanup.push(t),o.childNodes[0]}introduceNewLayer_(){const e=this.fullFence(this.ofenceMml),t=this.fullFence(this.cfenceMml);let n=r.createElement("mrow");if(r.replaceNode(this.fencedMml,n),this.fencedMmlNodes.forEach((e=>n.appendChild(e))),n.insertBefore(e,this.fencedMml),n.appendChild(t),!n.parentNode){const e=r.createElement("mrow");for(;n.childNodes.length>0;)e.appendChild(n.childNodes[0]);n.appendChild(e),n=e}return n}fullFence(e){const t=this.fencedMml.parentNode;let n=e;for(;n.parentNode&&n.parentNode!==t;)n=n.parentNode;return n}cleanupParents_(){this.parentCleanup.forEach((function(e){const t=e.childNodes[1].getAttribute(u.Attribute.PARENT);e.childNodes[0].setAttribute(u.Attribute.PARENT,t)}))}}t.CaseEmbellished=d},9763:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseLimit=void 0;const r=n(6671),i=n(9341),o=n(8672),s=n(8171);class a extends i.AbstractEnrichCase{constructor(e){super(e),this.mml=e.mathmlTree}static test(e){if(!e.mathmlTree||!e.childNodes.length)return!1;const t=r.tagName(e.mathmlTree),n=e.type;return("limupper"===n||"limlower"===n)&&("MSUBSUP"===t||"MUNDEROVER"===t)||"limboth"===n&&("MSUB"===t||"MUNDER"===t||"MSUP"===t||"MOVER"===t)}static walkTree_(e){e&&o.walkTree(e)}getMathml(){const e=this.semantic.childNodes;return"limboth"!==this.semantic.type&&this.mml.childNodes.length>=3&&(this.mml=o.introduceNewLayer([this.mml],this.semantic)),(0,s.setAttributes)(this.mml,this.semantic),e[0].mathmlTree||(e[0].mathmlTree=this.semantic.mathmlTree),e.forEach(a.walkTree_),this.mml}}t.CaseLimit=a},7978:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseLine=void 0;const r=n(9341),i=n(8672),o=n(8171);class s extends r.AbstractEnrichCase{constructor(e){super(e),this.mml=e.mathmlTree}static test(e){return!!e.mathmlTree&&"line"===e.type}getMathml(){return this.semantic.contentNodes.length&&i.walkTree(this.semantic.contentNodes[0]),this.semantic.childNodes.length&&i.walkTree(this.semantic.childNodes[0]),(0,o.setAttributes)(this.mml,this.semantic),this.mml}}t.CaseLine=s},2124:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseMultiindex=void 0;const r=n(6671),i=n(9341),o=n(8672),s=n(8171);class a extends i.AbstractEnrichCase{constructor(e){super(e),this.mml=e.mathmlTree}static multiscriptIndex(e){return"punctuated"===e.type&&"dummy"===e.contentNodes[0].role?o.collapsePunctuated(e):(o.walkTree(e),e.id)}static createNone_(e){const t=r.createElement("none");return e&&(0,s.setAttributes)(t,e),t.setAttribute(s.Attribute.ADDED,"true"),t}completeMultiscript(e,t){const n=r.toArray(this.mml.childNodes).slice(1);let i=0;const c=e=>{for(let t,r=0;t=e[r];r++){const e=n[i];if(e&&t===parseInt(o.getInnerNode(e).getAttribute(s.Attribute.ID)))o.getInnerNode(e).setAttribute(s.Attribute.PARENT,this.semantic.id.toString()),i++;else{const n=this.semantic.querySelectorAll((e=>e.id===t));this.mml.insertBefore(a.createNone_(n[0]),e||null)}}};c(e),n[i]&&"MPRESCRIPTS"!==r.tagName(n[i])?this.mml.insertBefore(n[i],r.createElement("mprescripts")):i++,c(t)}}t.CaseMultiindex=a},4308:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseMultiscripts=void 0;const r=n(6671),i=n(7984),o=n(2124),s=n(8672),a=n(8171);class c extends o.CaseMultiindex{static test(e){if(!e.mathmlTree)return!1;return"MMULTISCRIPTS"===r.tagName(e.mathmlTree)&&("superscript"===e.type||"subscript"===e.type)}constructor(e){super(e)}getMathml(){let e,t,n;if((0,a.setAttributes)(this.mml,this.semantic),this.semantic.childNodes[0]&&"subsup"===this.semantic.childNodes[0].role){const r=this.semantic.childNodes[0];e=r.childNodes[0],t=o.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[1]),n=o.CaseMultiindex.multiscriptIndex(r.childNodes[1]);const c=[this.semantic.id,[r.id,e.id,n],t];s.addCollapsedAttribute(this.mml,c),this.mml.setAttribute(a.Attribute.TYPE,r.role),this.completeMultiscript(i.SemanticSkeleton.interleaveIds(n,t),[])}else{e=this.semantic.childNodes[0],t=o.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[1]);const n=[this.semantic.id,e.id,t];s.addCollapsedAttribute(this.mml,n)}const r=i.SemanticSkeleton.collapsedLeafs(n||[],t),c=s.walkTree(e);return s.getInnerNode(c).setAttribute(a.Attribute.PARENT,this.semantic.id.toString()),r.unshift(e.id),this.mml.setAttribute(a.Attribute.CHILDREN,r.join(",")),this.mml}}t.CaseMultiscripts=c},5326:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseProof=void 0;const r=n(9341),i=n(8672),o=n(8171);class s extends r.AbstractEnrichCase{constructor(e){super(e),this.mml=e.mathmlTree}static test(e){return!!e.mathmlTree&&("inference"===e.type||"premises"===e.type)}getMathml(){return this.semantic.childNodes.length?(this.semantic.contentNodes.forEach((function(e){i.walkTree(e),(0,o.setAttributes)(e.mathmlTree,e)})),this.semantic.childNodes.forEach((function(e){i.walkTree(e)})),(0,o.setAttributes)(this.mml,this.semantic),this.mml.getAttribute("data-semantic-id")===this.mml.getAttribute("data-semantic-parent")&&this.mml.removeAttribute("data-semantic-parent"),this.mml):this.mml}}t.CaseProof=s},6998:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseTable=void 0;const r=n(6671),i=n(9341),o=n(8672),s=n(8171);class a extends i.AbstractEnrichCase{constructor(e){super(e),this.inner=[],this.mml=e.mathmlTree}static test(e){return"matrix"===e.type||"vector"===e.type||"cases"===e.type}getMathml(){const e=o.cloneContentNode(this.semantic.contentNodes[0]),t=this.semantic.contentNodes[1]?o.cloneContentNode(this.semantic.contentNodes[1]):null;if(this.inner=this.semantic.childNodes.map(o.walkTree),this.mml)if("MFENCED"===r.tagName(this.mml)){const n=this.mml.childNodes;this.mml.insertBefore(e,n[0]||null),t&&this.mml.appendChild(t),this.mml=o.rewriteMfenced(this.mml)}else{const n=[e,this.mml];t&&n.push(t),this.mml=o.introduceNewLayer(n,this.semantic)}else this.mml=o.introduceNewLayer([e].concat(this.inner,[t]),this.semantic);return(0,s.setAttributes)(this.mml,this.semantic),this.mml}}t.CaseTable=a},439:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseTensor=void 0;const r=n(7984),i=n(2124),o=n(8672),s=n(8171);class a extends i.CaseMultiindex{static test(e){return!!e.mathmlTree&&"tensor"===e.type}constructor(e){super(e)}getMathml(){o.walkTree(this.semantic.childNodes[0]);const e=i.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[1]),t=i.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[2]),n=i.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[3]),a=i.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[4]);(0,s.setAttributes)(this.mml,this.semantic);const c=[this.semantic.id,this.semantic.childNodes[0].id,e,t,n,a];o.addCollapsedAttribute(this.mml,c);const l=r.SemanticSkeleton.collapsedLeafs(e,t,n,a);return l.unshift(this.semantic.childNodes[0].id),this.mml.setAttribute(s.Attribute.CHILDREN,l.join(",")),this.completeMultiscript(r.SemanticSkeleton.interleaveIds(n,a),r.SemanticSkeleton.interleaveIds(e,t)),this.mml}}t.CaseTensor=a},598:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseText=void 0;const r=n(9341),i=n(8672),o=n(8171);class s extends r.AbstractEnrichCase{constructor(e){super(e),this.mml=e.mathmlTree}static test(e){return"punctuated"===e.type&&("text"===e.role||e.contentNodes.every((e=>"dummy"===e.role)))}getMathml(){const e=[],t=i.collapsePunctuated(this.semantic,e);return this.mml=i.introduceNewLayer(e,this.semantic),(0,o.setAttributes)(this.mml,this.semantic),this.mml.removeAttribute(o.Attribute.CONTENT),i.addCollapsedAttribute(this.mml,t),this.mml}}t.CaseText=s},7450:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.prepareMmlString=t.testTranslation__=t.semanticMathml=t.semanticMathmlSync=t.semanticMathmlNode=void 0;const r=n(1984),i=n(6671),o=n(4886),s=n(1939),a=n(8672),c=n(8171);function l(e){const t=i.cloneNode(e),n=s.getTree(t);return a.enrich(t,n)}function u(e){return l(i.parseInput(e))}function d(e){return e.match(/^<math/)||(e="<math>"+e),e.match(/\/math>$/)||(e+="</math>"),e}n(7813),t.semanticMathmlNode=l,t.semanticMathmlSync=u,t.semanticMathml=function(e,t){o.EnginePromise.getall().then((()=>{const n=i.parseInput(e);t(l(n))}))},t.testTranslation__=function(e){r.Debugger.getInstance().init();const t=u(d(e)).toString();return(0,c.removeAttributePrefix)(t),r.Debugger.getInstance().exit(),t},t.prepareMmlString=d},8171:function(e,t){var n;function r(e){return e.map((function(e){return e.id})).join(",")}function i(e,t){const r=[];"mglyph"===t.role&&r.push("image"),t.attributes.href&&r.push("link"),r.length&&e.setAttribute(n.POSTFIX,r.join(" "))}Object.defineProperty(t,"__esModule",{value:!0}),t.addPrefix=t.removeAttributePrefix=t.setPostfix=t.setAttributes=t.makeIdList=t.EnrichAttributes=t.Attribute=t.Prefix=void 0,t.Prefix="data-semantic-",function(e){e.ADDED="data-semantic-added",e.ALTERNATIVE="data-semantic-alternative",e.CHILDREN="data-semantic-children",e.COLLAPSED="data-semantic-collapsed",e.CONTENT="data-semantic-content",e.EMBELLISHED="data-semantic-embellished",e.FENCEPOINTER="data-semantic-fencepointer",e.FONT="data-semantic-font",e.ID="data-semantic-id",e.ANNOTATION="data-semantic-annotation",e.OPERATOR="data-semantic-operator",e.OWNS="data-semantic-owns",e.PARENT="data-semantic-parent",e.POSTFIX="data-semantic-postfix",e.PREFIX="data-semantic-prefix",e.ROLE="data-semantic-role",e.SPEECH="data-semantic-speech",e.STRUCTURE="data-semantic-structure",e.TYPE="data-semantic-type"}(n=t.Attribute||(t.Attribute={})),t.EnrichAttributes=[n.ADDED,n.ALTERNATIVE,n.CHILDREN,n.COLLAPSED,n.CONTENT,n.EMBELLISHED,n.FENCEPOINTER,n.FONT,n.ID,n.ANNOTATION,n.OPERATOR,n.OWNS,n.PARENT,n.POSTFIX,n.PREFIX,n.ROLE,n.SPEECH,n.STRUCTURE,n.TYPE],t.makeIdList=r,t.setAttributes=function(e,o){e.setAttribute(n.TYPE,o.type);const s=o.allAttributes();for(let n,r=0;n=s[r];r++)e.setAttribute(t.Prefix+n[0].toLowerCase(),n[1]);o.childNodes.length&&e.setAttribute(n.CHILDREN,r(o.childNodes)),o.contentNodes.length&&e.setAttribute(n.CONTENT,r(o.contentNodes)),o.parent&&e.setAttribute(n.PARENT,o.parent.id.toString()),i(e,o)},t.setPostfix=i,t.removeAttributePrefix=function(e){return e.toString().replace(new RegExp(t.Prefix,"g"),"")},t.addPrefix=function(e){return t.Prefix+e}},9775:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.factory=t.getCase=void 0,t.getCase=function(e){for(let n,r=0;n=t.factory[r];r++)if(n.test(e))return n.constr(e);return null},t.factory=[]},7813:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(4306),i=n(8871),o=n(928),s=n(9763),a=n(7978),c=n(4308),l=n(5326),u=n(6998),d=n(439),h=n(598);n(9775).factory.push({test:s.CaseLimit.test,constr:e=>new s.CaseLimit(e)},{test:o.CaseEmbellished.test,constr:e=>new o.CaseEmbellished(e)},{test:i.CaseDoubleScript.test,constr:e=>new i.CaseDoubleScript(e)},{test:d.CaseTensor.test,constr:e=>new d.CaseTensor(e)},{test:c.CaseMultiscripts.test,constr:e=>new c.CaseMultiscripts(e)},{test:a.CaseLine.test,constr:e=>new a.CaseLine(e)},{test:r.CaseBinomial.test,constr:e=>new r.CaseBinomial(e)},{test:l.CaseProof.test,constr:e=>new l.CaseProof(e)},{test:u.CaseTable.test,constr:e=>new u.CaseTable(e)},{test:h.CaseText.test,constr:e=>new h.CaseText(e)})},8672:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.printNodeList__=t.collapsePunctuated=t.formattedOutput_=t.formattedOutput=t.getInnerNode=t.setOperatorAttribute_=t.createInvisibleOperator_=t.rewriteMfenced=t.cloneContentNode=t.addCollapsedAttribute=t.parentNode_=t.isIgnorable_=t.unitChild_=t.descendNode_=t.ascendNewNode=t.validLca_=t.pathToRoot_=t.attachedElement_=t.prunePath_=t.mathmlLca_=t.lcaType=t.functionApplication_=t.isDescendant_=t.insertNewChild_=t.mergeChildren_=t.collectChildNodes_=t.collateChildNodes_=t.childrenSubset_=t.moveSemanticAttributes_=t.introduceLayerAboveLca=t.introduceNewLayer=t.walkTree=t.enrich=t.SETTINGS=void 0;const r=n(1984),i=n(6671),o=n(4886),s=n(4020),a=n(2721),c=n(7984),l=n(8901),u=n(8171),d=n(9775);function h(e){const t=(0,d.getCase)(e);let n;if(t)return n=t.getMathml(),I(n);if(1===e.mathml.length)return r.Debugger.getInstance().output("Walktree Case 0"),n=e.mathml[0],u.setAttributes(n,e),e.childNodes.length&&(r.Debugger.getInstance().output("Walktree Case 0.1"),e.childNodes.forEach((function(e){"empty"===e.type&&n.appendChild(h(e))}))),I(n);const i=e.contentNodes.map(F);k(e,i);const o=e.childNodes.map(h),s=c.SemanticSkeleton.combineContentChildren(e,i,o);if(n=e.mathmlTree,null===n)r.Debugger.getInstance().output("Walktree Case 1"),n=p(s,e);else{const e=v(s);r.Debugger.getInstance().output("Walktree Case 2"),e?(r.Debugger.getInstance().output("Walktree Case 2.1"),n=e.parentNode):(r.Debugger.getInstance().output("Walktree Case 2.2"),n=U(n))}return n=D(n),N(n,s,e),u.setAttributes(n,e),I(n)}function p(e,t){const n=C(e);let o=n.node;const s=n.type;if(s!==_.VALID||!l.hasEmptyTag(o))if(r.Debugger.getInstance().output("Walktree Case 1.1"),o=i.createElement("mrow"),s===_.PRUNED)r.Debugger.getInstance().output("Walktree Case 1.1.0"),o=f(o,n.node,e);else if(e[0]){r.Debugger.getInstance().output("Walktree Case 1.1.1");const t=v(e),n=g(t.parentNode,e);i.replaceNode(t,o),n.forEach((function(e){o.appendChild(e)}))}return t.mathmlTree||(t.mathmlTree=o),o}function f(e,t,n){let o=L(t);if(l.hasMathTag(o)){r.Debugger.getInstance().output("Walktree Case 1.1.0.0"),m(o,e),i.toArray(o.childNodes).forEach((function(t){e.appendChild(t)}));const t=e;e=o,o=t}const s=n.indexOf(t);return n[s]=o,i.replaceNode(o,e),e.appendChild(o),n.forEach((function(t){e.appendChild(t)})),e}function m(e,t){for(const n of u.EnrichAttributes)e.hasAttribute(n)&&(t.setAttribute(n,e.getAttribute(n)),e.removeAttribute(n))}function g(e,t){const n=i.toArray(e.childNodes);let r=1/0,o=-1/0;return t.forEach((function(e){const t=n.indexOf(e);-1!==t&&(r=Math.min(r,t),o=Math.max(o,t))})),n.slice(r,o+1)}function S(e,t,n){const r=[];let o=i.toArray(e.childNodes),s=!1;for(;o.length;){const e=o.shift();if(e.hasAttribute(u.Attribute.TYPE)){r.push(e);continue}const t=b(e);0!==t.length&&(1!==t.length?(s?e.setAttribute("AuxiliaryImplicit",!0):s=!0,o=t.concat(o)):r.push(e))}const a=[],c=n.childNodes.map((function(e){return e.mathmlTree}));for(;c.length;){const e=c.pop();if(e){if(-1!==r.indexOf(e))break;-1!==t.indexOf(e)&&a.unshift(e)}}return r.concat(a)}function b(e){const t=[];let n=i.toArray(e.childNodes);for(;n.length;){const e=n.shift();e.nodeType===i.NodeType.ELEMENT_NODE&&(e.hasAttribute(u.Attribute.TYPE)?t.push(e):n=i.toArray(e.childNodes).concat(n))}return t}function N(e,t,n){const r="implicit"===n.role&&a.flags.combine_juxtaposition?S(e,t,n):i.toArray(e.childNodes);if(!r.length)return void t.forEach((function(t){e.appendChild(t)}));let o=0;for(;t.length;){const n=t[0];r[o]===n||A(r[o],n)?(t.shift(),o++):r[o]&&-1===t.indexOf(r[o])?o++:(y(n,e)||E(e,r[o],n),t.shift())}}function E(e,t,n){if(!t)return void e.insertBefore(n,null);let r=t,i=P(r);for(;i&&i.firstChild===r&&!r.hasAttribute("AuxiliaryImplicit")&&i!==e;)r=i,i=P(r);i&&(i.insertBefore(n,r),r.removeAttribute("AuxiliaryImplicit"))}function y(e,t){if(!e)return!1;do{if((e=e.parentNode)===t)return!0}while(e);return!1}function A(e,t){const n=s.functionApplication();if(e&&t&&e.textContent&&t.textContent&&e.textContent===n&&t.textContent===n&&"true"===t.getAttribute(u.Attribute.ADDED)){for(let n,r=0;n=e.attributes[r];r++)t.hasAttribute(n.nodeName)||t.setAttribute(n.nodeName,n.nodeValue);return i.replaceNode(e,t),!0}return!1}var _;function C(e){const t=v(e);if(!t)return{type:_.INVALID,node:null};const n=v(e.slice().reverse());if(t===n)return{type:_.VALID,node:t};const r=O(t),i=T(r,e),o=O(n,(function(e){return-1!==i.indexOf(e)})),s=o[0],a=i.indexOf(s);return-1===a?{type:_.INVALID,node:null}:{type:i.length!==r.length?_.PRUNED:M(i[a+1],o[1])?_.VALID:_.INVALID,node:s}}function T(e,t){let n=0;for(;e[n]&&-1===t.indexOf(e[n]);)n++;return e.slice(0,n+1)}function v(e){let t=0,n=null;for(;!n&&t<e.length;)e[t].parentNode&&(n=e[t]),t++;return n}function O(e,t){const n=t||(e=>!1),r=[e];for(;!n(e)&&!l.hasMathTag(e)&&e.parentNode;)e=P(e),r.unshift(e);return r}function M(e,t){return!(!e||!t||e.previousSibling||t.nextSibling)}function I(e){for(;!l.hasMathTag(e)&&R(e);)e=P(e);return e}function L(e){const t=i.toArray(e.childNodes);if(!t)return e;const n=t.filter((function(e){return e.nodeType===i.NodeType.ELEMENT_NODE&&!l.hasIgnoreTag(e)}));return 1===n.length&&l.hasEmptyTag(n[0])&&!n[0].hasAttribute(u.Attribute.TYPE)?L(n[0]):e}function R(e){const t=P(e);return!(!t||!l.hasEmptyTag(t))&&i.toArray(t.childNodes).every((function(t){return t===e||x(t)}))}function x(e){if(e.nodeType!==i.NodeType.ELEMENT_NODE)return!0;if(!e||l.hasIgnoreTag(e))return!0;const t=i.toArray(e.childNodes);return!(!l.hasEmptyTag(e)&&t.length||l.hasDisplayTag(e)||e.hasAttribute(u.Attribute.TYPE)||l.isOrphanedGlyph(e))&&i.toArray(e.childNodes).every(x)}function P(e){return e.parentNode}function F(e){if(e.mathml.length)return h(e);const n=t.SETTINGS.implicit?w(e):i.createElement("mrow");return e.mathml=[n],n}function D(e){if("MFENCED"!==i.tagName(e))return e;const t=i.createElement("mrow");for(let n,r=0;n=e.attributes[r];r++)-1===["open","close","separators"].indexOf(n.name)&&t.setAttribute(n.name,n.value);return i.toArray(e.childNodes).forEach((function(e){t.appendChild(e)})),i.replaceNode(e,t),t}function w(e){const t=i.createElement("mo"),n=i.createTextNode(e.textContent);return t.appendChild(n),u.setAttributes(t,e),t.setAttribute(u.Attribute.ADDED,"true"),t}function k(e,t){const n=e.type+(e.textContent?","+e.textContent:"");t.forEach((function(e){U(e).setAttribute(u.Attribute.OPERATOR,n)}))}function U(e){const t=i.toArray(e.childNodes);if(!t)return e;const n=t.filter((function(e){return!x(e)})),r=[];for(let e,t=0;e=n[t];t++)if(l.hasEmptyTag(e)){const t=U(e);t&&t!==e&&r.push(t)}else r.push(e);return 1===r.length?r[0]:e}function B(e,t,n,r){const i=r||!1;j(e,"Original MathML",i),j(n,"Semantic Tree",i),j(t,"Semantically enriched MathML",i)}function j(e,t,n){const r=i.formatXml(e.toString());n?console.info(t+":\n```html\n"+u.removeAttributePrefix(r)+"\n```\n"):console.info(r)}t.SETTINGS={collapsed:!0,implicit:!0},t.enrich=function(e,t){const n=i.cloneNode(e);return h(t.root),o.default.getInstance().structure&&e.setAttribute(u.Attribute.STRUCTURE,c.SemanticSkeleton.fromStructure(e,t).toString()),r.Debugger.getInstance().generateOutput((function(){return B(n,e,t,!0),[]})),e},t.walkTree=h,t.introduceNewLayer=p,t.introduceLayerAboveLca=f,t.moveSemanticAttributes_=m,t.childrenSubset_=g,t.collateChildNodes_=S,t.collectChildNodes_=b,t.mergeChildren_=N,t.insertNewChild_=E,t.isDescendant_=y,t.functionApplication_=A,function(e){e.VALID="valid",e.INVALID="invalid",e.PRUNED="pruned"}(_=t.lcaType||(t.lcaType={})),t.mathmlLca_=C,t.prunePath_=T,t.attachedElement_=v,t.pathToRoot_=O,t.validLca_=M,t.ascendNewNode=I,t.descendNode_=L,t.unitChild_=R,t.isIgnorable_=x,t.parentNode_=P,t.addCollapsedAttribute=function(e,t){const n=new c.SemanticSkeleton(t);e.setAttribute(u.Attribute.COLLAPSED,n.toString())},t.cloneContentNode=F,t.rewriteMfenced=D,t.createInvisibleOperator_=w,t.setOperatorAttribute_=k,t.getInnerNode=U,t.formattedOutput=B,t.formattedOutput_=j,t.collapsePunctuated=function(e,t){const n=!!t,r=t||[],i=e.parent,o=e.contentNodes.map((function(e){return e.id}));o.unshift("c");const s=[e.id,o];for(let t,o=0;t=e.childNodes[o];o++){const e=h(t);r.push(e);const o=U(e);i&&!n&&o.setAttribute(u.Attribute.PARENT,i.id.toString()),s.push(t.id)}return s},t.printNodeList__=function(e,t){console.info(e),i.toArray(t).forEach((function(e){console.info(e.toString())})),console.info("<<<<<<<<<<<<<<<<<")}},7228:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractHighlighter=void 0;const r=n(5024),i=n(8171);class o{constructor(){this.color=null,this.mactionName="",this.currentHighlights=[]}highlight(e){this.currentHighlights.push(e.map((e=>{const t=this.highlightNode(e);return this.setHighlighted(e),t})))}highlightAll(e){const t=this.getMactionNodes(e);for(let e,n=0;e=t[n];n++)this.highlight([e])}unhighlight(){const e=this.currentHighlights.pop();e&&e.forEach((e=>{this.isHighlighted(e.node)&&(this.unhighlightNode(e),this.unsetHighlighted(e.node))}))}unhighlightAll(){for(;this.currentHighlights.length>0;)this.unhighlight()}setColor(e){this.color=e}colorString(){return this.color.rgba()}addEvents(e,t){const n=this.getMactionNodes(e);for(let e,r=0;e=n[r];r++)for(const n in t)e.addEventListener(n,t[n])}getMactionNodes(e){return Array.from(e.getElementsByClassName(this.mactionName))}isMactionNode(e){const t=e.className||e.getAttribute("class");return!!t&&!!t.match(new RegExp(this.mactionName))}isHighlighted(e){return e.hasAttribute(o.ATTR)}setHighlighted(e){e.setAttribute(o.ATTR,"true")}unsetHighlighted(e){e.removeAttribute(o.ATTR)}colorizeAll(e){r.evalXPath(`.//*[@${i.Attribute.ID}]`,e).forEach((e=>this.colorize(e)))}uncolorizeAll(e){r.evalXPath(`.//*[@${i.Attribute.ID}]`,e).forEach((e=>this.uncolorize(e)))}colorize(e){const t=(0,i.addPrefix)("foreground");e.hasAttribute(t)&&(e.setAttribute(t+"-old",e.style.color),e.style.color=e.getAttribute(t))}uncolorize(e){const t=(0,i.addPrefix)("foreground")+"-old";e.hasAttribute(t)&&(e.style.color=e.getAttribute(t))}}t.AbstractHighlighter=o,o.ATTR="sre-highlight"},7567:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ChtmlHighlighter=void 0;const r=n(9400);class i extends r.CssHighlighter{constructor(){super()}isMactionNode(e){return e.tagName.toUpperCase()===this.mactionName.toUpperCase()}getMactionNodes(e){return Array.from(e.getElementsByTagName(this.mactionName))}}t.ChtmlHighlighter=i},1123:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContrastPicker=t.ColorPicker=void 0;const n={red:{red:255,green:0,blue:0},green:{red:0,green:255,blue:0},blue:{red:0,green:0,blue:255},yellow:{red:255,green:255,blue:0},cyan:{red:0,green:255,blue:255},magenta:{red:255,green:0,blue:255},white:{red:255,green:255,blue:255},black:{red:0,green:0,blue:0}};function r(e,t){const r=e||{color:t};let i=Object.prototype.hasOwnProperty.call(r,"color")?n[r.color]:r;return i||(i=n[t]),i.alpha=Object.prototype.hasOwnProperty.call(r,"alpha")?r.alpha:1,function(e){const t=e=>(e=Math.max(e,0),e=Math.min(255,e),Math.round(e));return e.red=t(e.red),e.green=t(e.green),e.blue=t(e.blue),e.alpha=Math.max(e.alpha,0),e.alpha=Math.min(1,e.alpha),e}(i)}class i{constructor(e,t){this.foreground=r(t,i.DEFAULT_FOREGROUND_),this.background=r(e,i.DEFAULT_BACKGROUND_)}static toHex(e){const t=e.toString(16);return 1===t.length?"0"+t:t}rgba(){const e=function(e){return"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")"};return{background:e(this.background),foreground:e(this.foreground)}}rgb(){const e=function(e){return"rgb("+e.red+","+e.green+","+e.blue+")"};return{background:e(this.background),alphaback:this.background.alpha.toString(),foreground:e(this.foreground),alphafore:this.foreground.alpha.toString()}}hex(){const e=function(e){return"#"+i.toHex(e.red)+i.toHex(e.green)+i.toHex(e.blue)};return{background:e(this.background),alphaback:this.background.alpha.toString(),foreground:e(this.foreground),alphafore:this.foreground.alpha.toString()}}}t.ColorPicker=i,i.DEFAULT_BACKGROUND_="blue",i.DEFAULT_FOREGROUND_="black";t.ContrastPicker=class{constructor(){this.hue=10,this.sat=100,this.light=50,this.incr=50}generate(){return t=function(e,t,n){t=t>1?t/100:t,n=n>1?n/100:n;const r=(1-Math.abs(2*n-1))*t,i=r*(1-Math.abs(e/60%2-1)),o=n-r/2;let s=0,a=0,c=0;return 0<=e&&e<60?[s,a,c]=[r,i,0]:60<=e&&e<120?[s,a,c]=[i,r,0]:120<=e&&e<180?[s,a,c]=[0,r,i]:180<=e&&e<240?[s,a,c]=[0,i,r]:240<=e&&e<300?[s,a,c]=[i,0,r]:300<=e&&e<360&&([s,a,c]=[r,0,i]),{red:s+o,green:a+o,blue:c+o}}(this.hue,this.sat,this.light),"rgb("+(e={red:Math.round(255*t.red),green:Math.round(255*t.green),blue:Math.round(255*t.blue)}).red+","+e.green+","+e.blue+")";var e,t}increment(){this.hue=(this.hue+this.incr)%360}}},9400:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CssHighlighter=void 0;const r=n(7228);class i extends r.AbstractHighlighter{constructor(){super(),this.mactionName="mjx-maction"}highlightNode(e){const t={node:e,background:e.style.backgroundColor,foreground:e.style.color},n=this.colorString();return e.style.backgroundColor=n.background,e.style.color=n.foreground,t}unhighlightNode(e){e.node.style.backgroundColor=e.background,e.node.style.color=e.foreground}}t.CssHighlighter=i},9009:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.highlighterMapping_=t.addEvents=t.highlighter=void 0;const r=n(7567),i=n(1123),o=n(9400),s=n(7872),a=n(3711),c=n(4662),l=n(3507),u=n(280);t.highlighter=function(e,n,r){const o=new i.ColorPicker(e,n),s="NativeMML"===r.renderer&&"Safari"===r.browser?"MML-CSS":"SVG"===r.renderer&&"v3"===r.browser?"SVG-V3":r.renderer,a=new(t.highlighterMapping_[s]||t.highlighterMapping_.NativeMML);return a.setColor(o),a},t.addEvents=function(e,n,r){const i=t.highlighterMapping_[r.renderer];i&&(new i).addEvents(e,n)},t.highlighterMapping_={SVG:l.SvgHighlighter,"SVG-V3":u.SvgV3Highlighter,NativeMML:c.MmlHighlighter,"HTML-CSS":s.HtmlHighlighter,"MML-CSS":a.MmlCssHighlighter,CommonHTML:o.CssHighlighter,CHTML:r.ChtmlHighlighter}},7872:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlHighlighter=void 0;const r=n(6671),i=n(7228);class o extends i.AbstractHighlighter{constructor(){super(),this.mactionName="maction"}highlightNode(e){const t={node:e,foreground:e.style.color,position:e.style.position},n=this.color.rgb();e.style.color=n.foreground,e.style.position="relative";const i=e.bbox;if(i&&i.w){const o=.05,s=0,a=r.createElement("span"),c=parseFloat(e.style.paddingLeft||"0");a.style.backgroundColor=n.background,a.style.opacity=n.alphaback.toString(),a.style.display="inline-block",a.style.height=i.h+i.d+2*o+"em",a.style.verticalAlign=-i.d+"em",a.style.marginTop=a.style.marginBottom=-o+"em",a.style.width=i.w+2*s+"em",a.style.marginLeft=c-s+"em",a.style.marginRight=-i.w-s-c+"em",e.parentNode.insertBefore(a,e),t.box=a}return t}unhighlightNode(e){const t=e.node;t.style.color=e.foreground,t.style.position=e.position,e.box&&e.box.parentNode.removeChild(e.box)}}t.HtmlHighlighter=o},3711:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MmlCssHighlighter=void 0;const r=n(9400);class i extends r.CssHighlighter{constructor(){super(),this.mactionName="maction"}getMactionNodes(e){return Array.from(e.getElementsByTagName(this.mactionName))}isMactionNode(e){return e.tagName===this.mactionName}}t.MmlCssHighlighter=i},4662:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MmlHighlighter=void 0;const r=n(7228);class i extends r.AbstractHighlighter{constructor(){super(),this.mactionName="maction"}highlightNode(e){let t=e.getAttribute("style");return t+=";background-color: "+this.colorString().background,t+=";color: "+this.colorString().foreground,e.setAttribute("style",t),{node:e}}unhighlightNode(e){let t=e.node.getAttribute("style");t=t.replace(";background-color: "+this.colorString().background,""),t=t.replace(";color: "+this.colorString().foreground,""),e.node.setAttribute("style",t)}colorString(){return this.color.rgba()}getMactionNodes(e){return Array.from(e.getElementsByTagName(this.mactionName))}isMactionNode(e){return e.tagName===this.mactionName}}t.MmlHighlighter=i},3507:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SvgHighlighter=void 0;const r=n(6671),i=n(7228);class o extends i.AbstractHighlighter{constructor(){super(),this.mactionName="mjx-svg-maction"}highlightNode(e){let t;if(this.isHighlighted(e))return t={node:e.previousSibling||e,background:e.style.backgroundColor,foreground:e.style.color},t;if("svg"===e.tagName){const t={node:e,background:e.style.backgroundColor,foreground:e.style.color};return e.style.backgroundColor=this.colorString().background,e.style.color=this.colorString().foreground,t}const n=r.createElementNS("http://www.w3.org/2000/svg","rect");let o;if("use"===e.nodeName){const t=r.createElementNS("http://www.w3.org/2000/svg","g");e.parentNode.insertBefore(t,e),t.appendChild(e),o=t.getBBox(),t.parentNode.replaceChild(e,t)}else o=e.getBBox();n.setAttribute("x",(o.x-40).toString()),n.setAttribute("y",(o.y-40).toString()),n.setAttribute("width",(o.width+80).toString()),n.setAttribute("height",(o.height+80).toString());const s=e.getAttribute("transform");return s&&n.setAttribute("transform",s),n.setAttribute("fill",this.colorString().background),n.setAttribute(i.AbstractHighlighter.ATTR,"true"),e.parentNode.insertBefore(n,e),t={node:n,foreground:e.getAttribute("fill")},e.setAttribute("fill",this.colorString().foreground),t}setHighlighted(e){"svg"===e.tagName&&super.setHighlighted(e)}unhighlightNode(e){if("background"in e)return e.node.style.backgroundColor=e.background,void(e.node.style.color=e.foreground);e.foreground?e.node.nextSibling.setAttribute("fill",e.foreground):e.node.nextSibling.removeAttribute("fill"),e.node.parentNode.removeChild(e.node)}isMactionNode(e){let t=e.className||e.getAttribute("class");return t=void 0!==t.baseVal?t.baseVal:t,!!t&&!!t.match(new RegExp(this.mactionName))}}t.SvgHighlighter=o},280:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SvgV3Highlighter=void 0;const r=n(6671),i=n(5024),o=n(7228),s=n(1123),a=n(3507);class c extends a.SvgHighlighter{constructor(){super(),this.mactionName="maction"}highlightNode(e){let t;if(this.isHighlighted(e))return t={node:e,background:this.colorString().background,foreground:this.colorString().foreground},t;if("svg"===e.tagName||"MJX-CONTAINER"===e.tagName)return t={node:e,background:e.style.backgroundColor,foreground:e.style.color},e.style.backgroundColor=this.colorString().background,e.style.color=this.colorString().foreground,t;const n=r.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("sre-highlighter-added","true");const i=e.getBBox();n.setAttribute("x",(i.x-40).toString()),n.setAttribute("y",(i.y-40).toString()),n.setAttribute("width",(i.width+80).toString()),n.setAttribute("height",(i.height+80).toString());const a=e.getAttribute("transform");if(a&&n.setAttribute("transform",a),n.setAttribute("fill",this.colorString().background),e.setAttribute(o.AbstractHighlighter.ATTR,"true"),e.parentNode.insertBefore(n,e),t={node:e,foreground:e.getAttribute("fill")},"rect"===e.nodeName){const t=new s.ColorPicker({alpha:0,color:"black"});e.setAttribute("fill",t.rgba().foreground)}else e.setAttribute("fill",this.colorString().foreground);return t}unhighlightNode(e){const t=e.node.previousSibling;if(t&&t.hasAttribute("sre-highlighter-added"))return e.foreground?e.node.setAttribute("fill",e.foreground):e.node.removeAttribute("fill"),void e.node.parentNode.removeChild(t);e.node.style.backgroundColor=e.background,e.node.style.color=e.foreground}isMactionNode(e){return e.getAttribute("data-mml-node")===this.mactionName}getMactionNodes(e){return Array.from(i.evalXPath(`.//*[@data-mml-node="${this.mactionName}"]`,e))}}t.SvgV3Highlighter=c},1473:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StaticTrieNode=t.AbstractTrieNode=void 0;const r=n(1984),i=n(9259);class o{constructor(e,t){this.constraint=e,this.test=t,this.children_={},this.kind=i.TrieNodeKind.ROOT}getConstraint(){return this.constraint}getKind(){return this.kind}applyTest(e){return this.test(e)}addChild(e){const t=e.getConstraint(),n=this.children_[t];return this.children_[t]=e,n}getChild(e){return this.children_[e]}getChildren(){const e=[];for(const t in this.children_)e.push(this.children_[t]);return e}findChildren(e){const t=[];for(const n in this.children_){const r=this.children_[n];r.applyTest(e)&&t.push(r)}return t}removeChild(e){delete this.children_[e]}toString(){return this.constraint}}t.AbstractTrieNode=o;t.StaticTrieNode=class extends o{constructor(e,t){super(e,t),this.rule_=null,this.kind=i.TrieNodeKind.STATIC}getRule(){return this.rule_}setRule(e){this.rule_&&r.Debugger.getInstance().output("Replacing rule "+this.rule_+" with "+e),this.rule_=e}toString(){return this.getRule()?this.constraint+"\n==> "+this.getRule().action:this.constraint}}},2803:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Trie=void 0;const r=n(9259),i=n(9146);class o{constructor(){this.root=(0,i.getNode)(r.TrieNodeKind.ROOT,"",null)}static collectRules_(e){const t=[];let n=[e];for(;n.length;){const e=n.shift();if(e.getKind()===r.TrieNodeKind.QUERY||e.getKind()===r.TrieNodeKind.BOOLEAN){const n=e.getRule();n&&t.unshift(n)}n=n.concat(e.getChildren())}return t}static printWithDepth_(e,t,n){n+=new Array(t+2).join(t.toString())+": "+e.toString()+"\n";const r=e.getChildren();for(let e,i=0;e=r[i];i++)n=o.printWithDepth_(e,t+1,n);return n}static order_(e){const t=e.getChildren();if(!t.length)return 0;const n=Math.max.apply(null,t.map(o.order_));return Math.max(t.length,n)}addRule(e){let t=this.root;const n=e.context,i=e.dynamicCstr.getValues();for(let e=0,o=i.length;e<o;e++)t=this.addNode_(t,i[e],r.TrieNodeKind.DYNAMIC,n);t=this.addNode_(t,e.precondition.query,r.TrieNodeKind.QUERY,n);const o=e.precondition.constraints;for(let e=0,i=o.length;e<i;e++)t=this.addNode_(t,o[e],r.TrieNodeKind.BOOLEAN,n);t.setRule(e)}lookupRules(e,t){let n=[this.root];const i=[];for(;t.length;){const e=t.shift(),i=[];for(;n.length;){n.shift().getChildren().forEach((t=>{t.getKind()===r.TrieNodeKind.DYNAMIC&&-1===e.indexOf(t.getConstraint())||i.push(t)}))}n=i.slice()}for(;n.length;){const t=n.shift();if(t.getRule){const e=t.getRule();e&&i.push(e)}const r=t.findChildren(e);n=n.concat(r)}return i}hasSubtrie(e){let t=this.root;for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t=t.getChild(r),!t)return!1}return!0}toString(){return o.printWithDepth_(this.root,0,"")}collectRules(){return o.collectRules_(this.root)}order(){return o.order_(this.root)}enumerate(e){return this.enumerate_(this.root,e)}byConstraint(e){let t=this.root;for(;e.length&&t;){const n=e.shift();t=t.getChild(n)}return t||null}enumerate_(e,t){t=t||{};const n=e.getChildren();for(let e,i=0;e=n[i];i++)e.kind===r.TrieNodeKind.DYNAMIC&&(t[e.getConstraint()]=this.enumerate_(e,t[e.getConstraint()]));return t}addNode_(e,t,n,r){let o=e.getChild(t);return o||(o=(0,i.getNode)(n,t,r),e.addChild(o)),o}}t.Trie=o},9259:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TrieNodeKind=void 0,function(e){e.ROOT="root",e.DYNAMIC="dynamic",e.QUERY="query",e.BOOLEAN="boolean",e.STATIC="static"}(t.TrieNodeKind||(t.TrieNodeKind={}))},9146:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanTrieNode=t.QueryTrieNode=t.constraintTest_=t.DynamicTrieNode=t.RootTrieNode=t.getNode=void 0;const r=n(6671),i=n(5024),o=n(1058),s=n(4161),a=n(1473),c=n(1473),l=n(9259);t.getNode=function(e,t,n){switch(e){case l.TrieNodeKind.ROOT:return new u;case l.TrieNodeKind.DYNAMIC:return new d(t);case l.TrieNodeKind.QUERY:return new f(t,n);case l.TrieNodeKind.BOOLEAN:return new m(t,n);default:return null}};class u extends a.AbstractTrieNode{constructor(){super("",(()=>!0)),this.kind=l.TrieNodeKind.ROOT}}t.RootTrieNode=u;class d extends a.AbstractTrieNode{constructor(e){super(e,(t=>t===e)),this.kind=l.TrieNodeKind.DYNAMIC}}t.DynamicTrieNode=d;const h={"=":(e,t)=>e===t,"!=":(e,t)=>e!==t,"<":(e,t)=>e<t,">":(e,t)=>e>t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t};function p(e){if(e.match(/^self::\*$/))return e=>!0;if(e.match(/^self::\w+$/)){const t=e.slice(6).toUpperCase();return e=>e.tagName&&r.tagName(e)===t}if(e.match(/^self::\w+:\w+$/)){const t=e.split(":"),n=i.resolveNameSpace(t[2]);if(!n)return null;const r=t[3].toUpperCase();return e=>e.localName&&e.localName.toUpperCase()===r&&e.namespaceURI===n}if(e.match(/^@\w+$/)){const t=e.slice(1);return e=>e.hasAttribute&&e.hasAttribute(t)}if(e.match(/^@\w+="[\w\d ]+"$/)){const t=e.split("="),n=t[0].slice(1),r=t[1].slice(1,-1);return e=>e.hasAttribute&&e.hasAttribute(n)&&e.getAttribute(n)===r}if(e.match(/^@\w+!="[\w\d ]+"$/)){const t=e.split("!="),n=t[0].slice(1),r=t[1].slice(1,-1);return e=>!e.hasAttribute||!e.hasAttribute(n)||e.getAttribute(n)!==r}if(e.match(/^contains\(\s*@grammar\s*,\s*"[\w\d ]+"\s*\)$/)){const t=e.split('"')[1];return e=>!!o.Grammar.getInstance().getParameter(t)}if(e.match(/^not\(\s*contains\(\s*@grammar\s*,\s*"[\w\d ]+"\s*\)\s*\)$/)){const t=e.split('"')[1];return e=>!o.Grammar.getInstance().getParameter(t)}if(e.match(/^name\(\.\.\/\.\.\)="\w+"$/)){const t=e.split('"')[1].toUpperCase();return e=>{var n,i;return(null===(i=null===(n=e.parentNode)||void 0===n?void 0:n.parentNode)||void 0===i?void 0:i.tagName)&&r.tagName(e.parentNode.parentNode)===t}}if(e.match(/^count\(preceding-sibling::\*\)=\d+$/)){const t=e.split("="),n=parseInt(t[1],10);return e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.childNodes[n])===e}}if(e.match(/^.+\[@category!?=".+"\]$/)){let[,t,n,r]=e.match(/^(.+)\[@category(!?=)"(.+)"\]$/);const o=r.match(/^unit:(.+)$/);let a="";return o&&(r=o[1],a=":unit"),e=>{const o=i.evalXPath(t,e)[0];if(o){const e=s.lookupCategory(o.textContent+a);return"="===n?e===r:e!==r}return!1}}if(e.match(/^string-length\(.+\)\W+\d+/)){const[,t,n,r]=e.match(/^string-length\((.+)\)(\W+)(\d+)/),o=h[n]||h["="],s=parseInt(r,10);return e=>{const n=i.evalXPath(t,e)[0];return!!n&&o(Array.from(n.textContent).length,s)}}return null}t.constraintTest_=p;class f extends c.StaticTrieNode{constructor(e,t){super(e,p(e)),this.context=t,this.kind=l.TrieNodeKind.QUERY}applyTest(e){return this.test?this.test(e):this.context.applyQuery(e,this.constraint)===e}}t.QueryTrieNode=f;class m extends c.StaticTrieNode{constructor(e,t){super(e,p(e)),this.context=t,this.kind=l.TrieNodeKind.BOOLEAN}applyTest(e){return this.test?this.test(e):this.context.applyConstraint(e,this.constraint)}}t.BooleanTrieNode=m},2371:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.completeLocale=t.getLocale=t.setLocale=t.locales=void 0;const r=n(4886),i=n(4513),o=n(1058),s=n(8597),a=n(9883),c=n(2523),l=n(3938),u=n(9139),d=n(1547),h=n(346),p=n(13),f=n(6238),m=n(2913),g=n(3305),S=n(9770),b=n(4524);function N(){const e=i.Variables.ensureLocale(r.default.getInstance().locale,r.default.getInstance().defaultLocale);return r.default.getInstance().locale=e,t.locales[e]()}t.locales={ca:s.ca,da:a.da,de:c.de,en:l.en,es:u.es,fr:d.fr,hi:h.hi,it:p.it,nb:f.nb,nn:g.nn,sv:S.sv,nemeth:m.nemeth},t.setLocale=function(){const e=N();if(function(e){const t=r.default.getInstance().subiso;-1===e.SUBISO.all.indexOf(t)&&(r.default.getInstance().subiso=e.SUBISO.default);e.SUBISO.current=r.default.getInstance().subiso}(e),e){for(const t of Object.getOwnPropertyNames(e))b.LOCALE[t]=e[t];for(const[t,n]of Object.entries(e.CORRECTIONS))o.Grammar.getInstance().setCorrection(t,n)}},t.getLocale=N,t.completeLocale=function(e){const n=t.locales[e.locale];if(!n)return void console.error("Locale "+e.locale+" does not exist!");const r=e.kind.toUpperCase(),i=e.messages;if(!i)return;const o=n();for(const[e,t]of Object.entries(i))o[r][e]=t}},4524:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createLocale=t.LOCALE=void 0;const r=n(4277);function i(){return{FUNCTIONS:(0,r.FUNCTIONS)(),MESSAGES:(0,r.MESSAGES)(),ALPHABETS:(0,r.ALPHABETS)(),NUMBERS:(0,r.NUMBERS)(),COMBINERS:{},CORRECTIONS:{},SUBISO:(0,r.SUBISO)()}}t.LOCALE=i(),t.createLocale=i},3319:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.localeFontCombiner=t.extractString=t.localEnclose=t.localRole=t.localFont=t.combinePostfixIndex=t.nestingToString=void 0;const r=n(4524),i=n(9385);function o(e,t){return void 0===e?t:"string"==typeof e?e:e[0]}t.nestingToString=function(e){switch(e){case 1:return r.LOCALE.MESSAGES.MS.ONCE||"";case 2:return r.LOCALE.MESSAGES.MS.TWICE;default:return e.toString()}},t.combinePostfixIndex=function(e,t){return e===r.LOCALE.MESSAGES.MS.ROOTINDEX||e===r.LOCALE.MESSAGES.MS.INDEX?e:e+" "+t},t.localFont=function(e){return o(r.LOCALE.MESSAGES.font[e],e)},t.localRole=function(e){return o(r.LOCALE.MESSAGES.role[e],e)},t.localEnclose=function(e){return o(r.LOCALE.MESSAGES.enclose[e],e)},t.extractString=o,t.localeFontCombiner=function(e){return"string"==typeof e?{font:e,combiner:r.LOCALE.ALPHABETS.combiner}:{font:e[0],combiner:r.LOCALE.COMBINERS[e[1]]||i.Combiners[e[1]]||r.LOCALE.ALPHABETS.combiner}}},8597:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ca=void 0;const r=n(4524),i=n(3319),o=n(165),s=n(9385),a=function(e,t,n){return e="sans serif "+(n?n+" "+e:e),t?e+" "+t:e};let c=null;t.ca=function(){return c||(c=function(){const e=(0,r.createLocale)();return e.NUMBERS=o.default,e.COMBINERS.sansserif=a,e.FUNCTIONS.fracNestDepth=e=>!1,e.FUNCTIONS.combineRootIndex=i.combinePostfixIndex,e.FUNCTIONS.combineNestedRadical=(e,t,n)=>e+n,e.FUNCTIONS.fontRegexp=e=>RegExp("^"+e+" "),e.FUNCTIONS.plural=e=>/.*os$/.test(e)?e+"sos":/.*s$/.test(e)?e+"os":/.*ga$/.test(e)?e.slice(0,-2)+"gues":/.*\xe7a$/.test(e)?e.slice(0,-2)+"ces":/.*ca$/.test(e)?e.slice(0,-2)+"ques":/.*ja$/.test(e)?e.slice(0,-2)+"ges":/.*qua$/.test(e)?e.slice(0,-3)+"q\xfces":/.*a$/.test(e)?e.slice(0,-1)+"es":/.*(e|i)$/.test(e)?e+"ns":/.*\xed$/.test(e)?e.slice(0,-1)+"ins":e+"s",e.FUNCTIONS.si=(e,t)=>(t.match(/^metre/)&&(e=e.replace(/a$/,"\xe0").replace(/o$/,"\xf2").replace(/i$/,"\xed")),e+t),e.ALPHABETS.combiner=s.Combiners.prefixCombiner,e}()),c}},9883:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.da=void 0;const r=n(4524),i=n(3319),o=n(5571),s=n(9385);let a=null;t.da=function(){return a||(a=function(){const e=(0,r.createLocale)();return e.NUMBERS=o.default,e.FUNCTIONS.radicalNestDepth=i.nestingToString,e.FUNCTIONS.fontRegexp=t=>t===e.ALPHABETS.capPrefix.default?RegExp("^"+t+" "):RegExp(" "+t+"$"),e.ALPHABETS.combiner=s.Combiners.postfixCombiner,e.ALPHABETS.digitTrans.default=o.default.numberToWords,e}()),a}},2523:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.de=void 0;const r=n(1058),i=n(3319),o=n(4524),s=n(757),a=function(e,t,n){return"s"===n&&(t=t.split(" ").map((function(e){return e.replace(/s$/,"")})).join(" "),n=""),e=n?n+" "+e:e,t?t+" "+e:e},c=function(e,t,n){return e=n&&"s"!==n?n+" "+e:e,t?e+" "+t:e};let l=null;t.de=function(){return l||(l=function(){const e=(0,o.createLocale)();return e.NUMBERS=s.default,e.COMBINERS.germanPostfix=c,e.ALPHABETS.combiner=a,e.FUNCTIONS.radicalNestDepth=t=>t>1?e.NUMBERS.numberToWords(t)+"fach":"",e.FUNCTIONS.combineRootIndex=(e,t)=>{const n=t?t+"wurzel":"";return e.replace("Wurzel",n)},e.FUNCTIONS.combineNestedRadical=(e,t,n)=>{const r=(t?t+" ":"")+(e=n.match(/exponent$/)?e+"r":e);return n.match(/ /)?n.replace(/ /," "+r+" "):r+" "+n},e.FUNCTIONS.fontRegexp=function(e){return e=e.split(" ").map((function(e){return e.replace(/s$/,"(|s)")})).join(" "),new RegExp("((^"+e+" )|( "+e+"$))")},e.CORRECTIONS.correctOne=e=>e.replace(/^eins$/,"ein"),e.CORRECTIONS.localFontNumber=e=>(0,i.localFont)(e).split(" ").map((function(e){return e.replace(/s$/,"")})).join(" "),e.CORRECTIONS.lowercase=e=>e.toLowerCase(),e.CORRECTIONS.article=e=>{const t=r.Grammar.getInstance().getParameter("case"),n=r.Grammar.getInstance().getParameter("plural");return"dative"===t?{der:"dem",die:n?"den":"der",das:"dem"}[e]:e},e.CORRECTIONS.masculine=e=>"dative"===r.Grammar.getInstance().getParameter("case")?e+"n":e,e}()),l}},3938:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.en=void 0;const r=n(1058),i=n(4524),o=n(3319),s=n(166),a=n(9385);let c=null;t.en=function(){return c||(c=function(){const e=(0,i.createLocale)();return e.NUMBERS=s.default,e.FUNCTIONS.radicalNestDepth=o.nestingToString,e.FUNCTIONS.plural=e=>/.*s$/.test(e)?e:e+"s",e.ALPHABETS.combiner=a.Combiners.prefixCombiner,e.ALPHABETS.digitTrans.default=s.default.numberToWords,e.CORRECTIONS.article=e=>r.Grammar.getInstance().getParameter("noArticle")?"":e,e}()),c}},9139:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.es=void 0;const r=n(4524),i=n(3319),o=n(6154),s=n(9385),a=function(e,t,n){return e="sans serif "+(n?n+" "+e:e),t?e+" "+t:e};let c=null;t.es=function(){return c||(c=function(){const e=(0,r.createLocale)();return e.NUMBERS=o.default,e.COMBINERS.sansserif=a,e.FUNCTIONS.fracNestDepth=e=>!1,e.FUNCTIONS.combineRootIndex=i.combinePostfixIndex,e.FUNCTIONS.combineNestedRadical=(e,t,n)=>e+n,e.FUNCTIONS.fontRegexp=e=>RegExp("^"+e+" "),e.FUNCTIONS.plural=e=>/.*(a|e|i|o|u)$/.test(e)?e+"s":/.*z$/.test(e)?e.slice(0,-1)+"ces":/.*c$/.test(e)?e.slice(0,-1)+"ques":/.*g$/.test(e)?e+"ues":/.*\u00f3n$/.test(e)?e.slice(0,-2)+"ones":e+"es",e.FUNCTIONS.si=(e,t)=>(t.match(/^metro/)&&(e=e.replace(/a$/,"\xe1").replace(/o$/,"\xf3").replace(/i$/,"\xed")),e+t),e.ALPHABETS.combiner=s.Combiners.prefixCombiner,e}()),c}},1547:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.fr=void 0;const r=n(1058),i=n(4524),o=n(3319),s=n(4394),a=n(9385);let c=null;t.fr=function(){return c||(c=function(){const e=(0,i.createLocale)();return e.NUMBERS=s.default,e.FUNCTIONS.radicalNestDepth=o.nestingToString,e.FUNCTIONS.combineRootIndex=o.combinePostfixIndex,e.FUNCTIONS.combineNestedFraction=(e,t,n)=>n.replace(/ $/g,"")+t+e,e.FUNCTIONS.combineNestedRadical=(e,t,n)=>n+" "+e,e.FUNCTIONS.fontRegexp=e=>RegExp(" (en |)"+e+"$"),e.FUNCTIONS.plural=e=>/.*s$/.test(e)?e:e+"s",e.CORRECTIONS.article=e=>r.Grammar.getInstance().getParameter("noArticle")?"":e,e.ALPHABETS.combiner=a.Combiners.romanceCombiner,e.SUBISO={default:"fr",current:"fr",all:["fr","be","ch"]},e}()),c}},346:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.hi=void 0;const r=n(4524),i=n(1779),o=n(9385),s=n(3319);let a=null;t.hi=function(){return a||(a=function(){const e=(0,r.createLocale)();return e.NUMBERS=i.default,e.ALPHABETS.combiner=o.Combiners.prefixCombiner,e.FUNCTIONS.radicalNestDepth=s.nestingToString,e}()),a}},13:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.it=void 0;const r=n(3319),i=n(4524),o=n(5952),s=n(9385),a=function(e,t,n){return e.match(/^[a-zA-Z]$/)&&(t=t.replace("cerchiato","cerchiata")),e=n?e+" "+n:e,t?e+" "+t:e};let c=null;t.it=function(){return c||(c=function(){const e=(0,i.createLocale)();return e.NUMBERS=o.default,e.COMBINERS.italianPostfix=a,e.FUNCTIONS.radicalNestDepth=r.nestingToString,e.FUNCTIONS.combineRootIndex=r.combinePostfixIndex,e.FUNCTIONS.combineNestedFraction=(e,t,n)=>n.replace(/ $/g,"")+t+e,e.FUNCTIONS.combineNestedRadical=(e,t,n)=>n+" "+e,e.FUNCTIONS.fontRegexp=e=>RegExp(" (en |)"+e+"$"),e.ALPHABETS.combiner=s.Combiners.romanceCombiner,e}()),c}},6238:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.nb=void 0;const r=n(4524),i=n(3319),o=n(984),s=n(9385);let a=null;t.nb=function(){return a||(a=function(){const e=(0,r.createLocale)();return e.NUMBERS=o.default,e.ALPHABETS.combiner=s.Combiners.prefixCombiner,e.ALPHABETS.digitTrans.default=o.default.numberToWords,e.FUNCTIONS.radicalNestDepth=i.nestingToString,e}()),a}},2913:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.nemeth=void 0;const r=n(4524),i=n(3669),o=n(9385),s=function(e){return e.match(RegExp("^"+h.ALPHABETS.languagePrefix.english))?e.slice(1):e},a=function(e,t,n){return e=s(e),t?e+t:e},c=function(e,t,n){return t+s(e)},l=function(e,t,n){return t+(n||"")+(e=s(e))+"\u283b"},u=function(e,t,n){return t+(n||"")+(e=s(e))+"\u283b\u283b"},d=function(e,t,n){return t+(e=s(e))+"\u283e"};let h=null;t.nemeth=function(){return h||(h=function(){const e=(0,r.createLocale)();return e.NUMBERS=i.default,e.COMBINERS={postfixCombiner:a,germanCombiner:c,embellishCombiner:l,doubleEmbellishCombiner:u,parensCombiner:d},e.FUNCTIONS.fracNestDepth=e=>!1,e.FUNCTIONS.fontRegexp=e=>RegExp("^"+e),e.FUNCTIONS.si=o.identityTransformer,e.ALPHABETS.combiner=(e,t,n)=>t?t+n+e:s(e),e.ALPHABETS.digitTrans={default:i.default.numberToWords},e}()),h}},3305:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.nn=void 0;const r=n(4524),i=n(3319),o=n(984),s=n(9385);let a=null;t.nn=function(){return a||(a=function(){const e=(0,r.createLocale)();return e.NUMBERS=o.default,e.ALPHABETS.combiner=s.Combiners.prefixCombiner,e.ALPHABETS.digitTrans.default=o.default.numberToWords,e.FUNCTIONS.radicalNestDepth=i.nestingToString,e.SUBISO={default:"",current:"",all:["","alt"]},e}()),a}},9770:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sv=void 0;const r=n(4524),i=n(3319),o=n(6416),s=n(9385);let a=null;t.sv=function(){return a||(a=function(){const e=(0,r.createLocale)();return e.NUMBERS=o.default,e.FUNCTIONS.radicalNestDepth=i.nestingToString,e.FUNCTIONS.fontRegexp=function(e){return new RegExp("((^"+e+" )|( "+e+"$))")},e.ALPHABETS.combiner=s.Combiners.prefixCombiner,e.ALPHABETS.digitTrans.default=o.default.numberToWords,e.CORRECTIONS.correctOne=e=>e.replace(/^ett$/,"en"),e}()),a}},4277:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SUBISO=t.FUNCTIONS=t.ALPHABETS=t.NUMBERS=t.MESSAGES=void 0;const r=n(9385);t.MESSAGES=function(){return{MS:{},MSroots:{},font:{},embellish:{},role:{},enclose:{},navigate:{},regexp:{},unitTimes:""}},t.NUMBERS=function(){return{zero:"zero",ones:[],tens:[],large:[],special:{},wordOrdinal:r.identityTransformer,numericOrdinal:r.identityTransformer,numberToWords:r.identityTransformer,numberToOrdinal:r.pluralCase,vulgarSep:" ",numSep:" "}},t.ALPHABETS=function(){return{latinSmall:[],latinCap:[],greekSmall:[],greekCap:[],capPrefix:{default:""},smallPrefix:{default:""},digitPrefix:{default:""},languagePrefix:{},digitTrans:{default:r.identityTransformer,mathspeak:r.identityTransformer,clearspeak:r.identityTransformer},letterTrans:{default:r.identityTransformer},combiner:(e,t,n)=>e}},t.FUNCTIONS=function(){return{fracNestDepth:e=>r.vulgarFractionSmall(e,10,100),radicalNestDepth:e=>"",combineRootIndex:function(e,t){return e},combineNestedFraction:r.Combiners.identityCombiner,combineNestedRadical:r.Combiners.identityCombiner,fontRegexp:function(e){return new RegExp("^"+e.split(/ |-/).join("( |-)")+"( |-)")},si:r.siCombiner,plural:r.identityTransformer}},t.SUBISO=function(){return{default:"",current:"",all:[]}}},165:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(1058);function i(e){const t=e%1e3,n=Math.floor(t/100),r=n?1===n?"cent":a.ones[n]+"-cents":"",i=function(e){const t=e%100;if(t<20)return a.ones[t];const n=Math.floor(t/10),r=a.tens[n],i=a.ones[t%10];return r&&i?r+(2===n?"-i-":"-")+i:r||i}(t%100);return r&&i?r+a.numSep+i:r||i}function o(e){if(0===e)return a.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;e>0;){const r=e%(t>1?1e6:1e3);if(r){let e=a.large[t];if(t)if(1===t)n=(1===r?"":i(r)+a.numSep)+e+(n?a.numSep+n:"");else{const t=o(r);e=1===r?e:e.replace(/\u00f3$/,"ons"),n=t+a.numSep+e+(n?a.numSep+n:"")}else n=i(r)}e=Math.floor(e/(t>1?1e6:1e3)),t++}return n}function s(e){const t=r.Grammar.getInstance().getParameter("gender");return e.toString()+("f"===t?"a":"n")}const a=(0,n(4277).NUMBERS)();a.numericOrdinal=s,a.numberToWords=o,a.numberToOrdinal=function(e,t){if(e>1999)return s(e);if(e<=10)return a.special.onesOrdinals[e-1];const n=o(e);return n.match(/mil$/)?n.replace(/mil$/,"mil\xb7l\xe8sima"):n.match(/u$/)?n.replace(/u$/,"vena"):n.match(/a$/)?n.replace(/a$/,"ena"):n+(n.match(/e$/)?"na":"ena")},t.default=a},5571:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function r(e,t=!1){return e===a.ones[1]?t?"et":"en":e}function i(e,t=!1){let n=e%1e3,i="",o=a.ones[Math.floor(n/100)];if(i+=o?r(o,!0)+" hundrede":"",n%=100,n)if(i+=i?" og ":"",o=t?a.special.smallOrdinals[n]:a.ones[n],o)i+=o;else{const e=t?a.special.tensOrdinals[Math.floor(n/10)]:a.tens[Math.floor(n/10)];o=a.ones[n%10],i+=o?r(o)+"og"+e:e}return i}function o(e,t=!1){if(0===e)return a.zero;if(e>=Math.pow(10,36))return e.toString();let n=0,o="";for(;e>0;){const s=e%1e3;if(s){const e=i(s,t&&!n);if(n){const t=a.large[n],i=s>1?"er":"";o=r(e,n<=1)+" "+t+i+(o?" og ":"")+o}else o=r(e)+o}e=Math.floor(e/1e3),n++}return o}function s(e){if(e%100)return o(e,!0);const t=o(e);return t.match(/e$/)?t:t+"e"}const a=(0,n(4277).NUMBERS)();a.wordOrdinal=s,a.numericOrdinal=function(e){return e.toString()+"."},a.numberToWords=o,a.numberToOrdinal=function(e,t){return 1===e?t?"hel":"hele":2===e?t?"halv":"halve":s(e)+(t?"dele":"del")},t.default=a},757:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function r(e,t=!1){return e===a.ones[1]?t?"eine":"ein":e}function i(e){let t=e%1e3,n="",i=a.ones[Math.floor(t/100)];if(n+=i?r(i)+"hundert":"",t%=100,t)if(n+=n?a.numSep:"",i=a.ones[t],i)n+=i;else{const e=a.tens[Math.floor(t/10)];i=a.ones[t%10],n+=i?r(i)+"und"+e:e}return n}function o(e){if(0===e)return a.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;e>0;){const o=e%1e3;if(o){const s=i(e%1e3);if(t){const e=a.large[t],i=t>1&&o>1?e.match(/e$/)?"n":"en":"";n=r(s,t>1)+e+i+n}else n=r(s,t>1)+n}e=Math.floor(e/1e3),t++}return n.replace(/ein$/,"eins")}function s(e){if(1===e)return"erste";if(3===e)return"dritte";if(7===e)return"siebte";if(8===e)return"achte";return o(e)+(e<19?"te":"ste")}const a=(0,n(4277).NUMBERS)();a.wordOrdinal=s,a.numericOrdinal=function(e){return e.toString()+"."},a.numberToWords=o,a.numberToOrdinal=function(e,t){return 1===e?"eintel":2===e?t?"halbe":"halb":s(e)+"l"},t.default=a},166:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function r(e){let t=e%1e3,n="";return n+=s.ones[Math.floor(t/100)]?s.ones[Math.floor(t/100)]+s.numSep+"hundred":"",t%=100,t&&(n+=n?s.numSep:"",n+=s.ones[t]||s.tens[Math.floor(t/10)]+(t%10?s.numSep+s.ones[t%10]:"")),n}function i(e){if(0===e)return s.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;e>0;){e%1e3&&(n=r(e%1e3)+(t?"-"+s.large[t]+"-":"")+n),e=Math.floor(e/1e3),t++}return n.replace(/-$/,"")}function o(e){let t=i(e);return t.match(/one$/)?t=t.slice(0,-3)+"first":t.match(/two$/)?t=t.slice(0,-3)+"second":t.match(/three$/)?t=t.slice(0,-5)+"third":t.match(/five$/)?t=t.slice(0,-4)+"fifth":t.match(/eight$/)?t=t.slice(0,-5)+"eighth":t.match(/nine$/)?t=t.slice(0,-4)+"ninth":t.match(/twelve$/)?t=t.slice(0,-6)+"twelfth":t.match(/ty$/)?t=t.slice(0,-2)+"tieth":t+="th",t}const s=(0,n(4277).NUMBERS)();s.wordOrdinal=o,s.numericOrdinal=function(e){const t=e%100,n=e.toString();if(t>10&&t<20)return n+"th";switch(e%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd";default:return n+"th"}},s.numberToWords=i,s.numberToOrdinal=function(e,t){if(1===e)return t?"oneths":"oneth";if(2===e)return t?"halves":"half";const n=o(e);return t?n+"s":n},t.default=s},6154:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(1058);function i(e){const t=e%1e3,n=Math.floor(t/100),r=o.special.hundreds[n],i=function(e){const t=e%100;if(t<30)return o.ones[t];const n=o.tens[Math.floor(t/10)],r=o.ones[t%10];return n&&r?n+" y "+r:n||r}(t%100);return 1===n?i?r+"to "+i:r:r&&i?r+" "+i:r||i}const o=(0,n(4277).NUMBERS)();o.numericOrdinal=function(e){const t=r.Grammar.getInstance().getParameter("gender");return e.toString()+("f"===t?"a":"o")},o.numberToWords=function(e){if(0===e)return o.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;e>0;){const r=e%1e3;if(r){let e=o.large[t];const s=i(r);t?1===r?(e=e.match("/^mil( |$)/")?e:"un "+e,n=e+(n?" "+n:"")):(e=e.replace(/\u00f3n$/,"ones"),n=i(r)+" "+e+(n?" "+n:"")):n=s}e=Math.floor(e/1e3),t++}return n},o.numberToOrdinal=function(e,t){if(e>1999)return e.toString()+"a";if(e<=12)return o.special.onesOrdinals[e-1];const n=[];if(e>=1e3&&(e-=1e3,n.push("mil\xe9sima")),!e)return n.join(" ");let r=0;return r=Math.floor(e/100),r>0&&(n.push(o.special.hundredsOrdinals[r-1]),e%=100),e<=12?n.push(o.special.onesOrdinals[e-1]):(r=Math.floor(e/10),r>0&&(n.push(o.special.tensOrdinals[r-1]),e%=10),e>0&&n.push(o.special.onesOrdinals[e-1])),n.join(" ")},t.default=o},4394:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(4886),i=n(1058),o=n(4277);function s(e){let t=e%1e3,n="";if(n+=u.ones[Math.floor(t/100)]?u.ones[Math.floor(t/100)]+"-cent":"",t%=100,t){n+=n?"-":"";let e=u.ones[t];if(e)n+=e;else{const r=u.tens[Math.floor(t/10)];r.match(/-dix$/)?(e=u.ones[t%10+10],n+=r.replace(/-dix$/,"")+"-"+e):n+=r+(t%10?"-"+u.ones[t%10]:"")}}const r=n.match(/s-\w+$/);return r?n.replace(/s-\w+$/,r[0].slice(1)):n.replace(/-un$/,"-et-un")}function a(e){if(0===e)return u.zero;if(e>=Math.pow(10,36))return e.toString();u.special["tens-"+r.default.getInstance().subiso]&&(u.tens=u.special["tens-"+r.default.getInstance().subiso]);let t=0,n="";for(;e>0;){const r=e%1e3;if(r){let e=u.large[t];const i=s(r);if(e&&e.match(/^mille /)){const r=e.replace(/^mille /,"");n=n.match(RegExp(r))?i+(t?"-mille-":"")+n:n.match(RegExp(r.replace(/s$/,"")))?i+(t?"-mille-":"")+n.replace(r.replace(/s$/,""),r):i+(t?"-"+e+"-":"")+n}else e=1===r&&e?e.replace(/s$/,""):e,n=i+(t?"-"+e+"-":"")+n}e=Math.floor(e/1e3),t++}return n.replace(/-$/,"")}const c={1:"uni\xe8me",2:"demi",3:"tiers",4:"quart"};function l(e){if(1===e)return"premi\xe8re";let t=a(e);return t.match(/^neuf$/)?t=t.slice(0,-1)+"v":t.match(/cinq$/)?t+="u":t.match(/trois$/)?t+="":(t.match(/e$/)||t.match(/s$/))&&(t=t.slice(0,-1)),t+="i\xe8me",t}const u=(0,o.NUMBERS)();u.wordOrdinal=l,u.numericOrdinal=function(e){const t=i.Grammar.getInstance().getParameter("gender");return 1===e?e.toString()+("m"===t?"er":"re"):e.toString()+"e"},u.numberToWords=a,u.numberToOrdinal=function(e,t){const n=c[e]||l(e);return 3===e?n:t?n+"s":n},t.default=u},1779:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(1058);function i(e){if(0===e)return s.zero;if(e>=Math.pow(10,32))return e.toString();let t=0,n="";const r=function(e){let t=e%1e3,n="";return n+=s.ones[Math.floor(t/100)]?s.ones[Math.floor(t/100)]+s.numSep+s.special.hundred:"",t%=100,t&&(n+=n?s.numSep:"",n+=s.ones[t]),n}(e%1e3);if(!(e=Math.floor(e/1e3)))return r;for(;e>0;){const r=e%100;r&&(n=s.ones[r]+s.numSep+s.large[t]+(n?s.numSep+n:"")),e=Math.floor(e/100),t++}return r?n+s.numSep+r:n}function o(e){const t=r.Grammar.getInstance().getParameter("gender");if(e<=0)return e.toString();if(e<10)return"f"===t?s.special.ordinalsFeminine[e]:s.special.ordinalsMasculine[e];return i(e)+("f"===t?"\u0935\u0940\u0902":"\u0935\u093e\u0901")}const s=(0,n(4277).NUMBERS)();s.wordOrdinal=o,s.numericOrdinal=function(e){const t=r.Grammar.getInstance().getParameter("gender");return e>0&&e<10?"f"===t?s.special.simpleSmallOrdinalsFeminine[e]:s.special.simpleSmallOrdinalsMasculine[e]:e.toString().split("").map((function(e){const t=parseInt(e,10);return isNaN(t)?"":s.special.simpleNumbers[t]})).join("")+("f"===t?"\u0935\u0940\u0902":"\u0935\u093e\u0901")},s.numberToWords=i,s.numberToOrdinal=function(e,t){return e<=10?s.special.smallDenominators[e]:o(e)+" \u0905\u0902\u0936"},t.default=s},5952:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(1058);function i(e){let t=e%1e3,n="";if(n+=a.ones[Math.floor(t/100)]?a.ones[Math.floor(t/100)]+a.numSep+"cento":"",t%=100,t){n+=n?a.numSep:"";const e=a.ones[t];if(e)n+=e;else{let e=a.tens[Math.floor(t/10)];const r=t%10;1!==r&&8!==r||(e=e.slice(0,-1)),n+=e,n+=r?a.numSep+a.ones[t%10]:""}}return n}function o(e){if(0===e)return a.zero;if(e>=Math.pow(10,36))return e.toString();if(1===e&&r.Grammar.getInstance().getParameter("fraction"))return"un";let t=0,n="";for(;e>0;){e%1e3&&(n=i(e%1e3)+(t?"-"+a.large[t]+"-":"")+n),e=Math.floor(e/1e3),t++}return n.replace(/-$/,"")}function s(e){const t="m"===r.Grammar.getInstance().getParameter("gender")?"o":"a";let n=a.special.onesOrdinals[e];return n?n.slice(0,-1)+t:(n=o(e),n.slice(0,-1)+"esim"+t)}const a=(0,n(4277).NUMBERS)();a.wordOrdinal=s,a.numericOrdinal=function(e){const t=r.Grammar.getInstance().getParameter("gender");return e.toString()+("m"===t?"o":"a")},a.numberToWords=o,a.numberToOrdinal=function(e,t){if(2===e)return t?"mezzi":"mezzo";const n=s(e);if(!t)return n;const r=n.match(/o$/)?"i":"e";return n.slice(0,-1)+r},t.default=a},3669:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function r(e){return e.toString().split("").map((function(e){return i.ones[parseInt(e,10)]})).join("")}const i=(0,n(4277).NUMBERS)();i.numberToWords=r,i.numberToOrdinal=r,t.default=i},984:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(4886);function i(e,t=!1){let n=e%1e3,r="";const i=Math.floor(n/100),s=a.ones[i];if(r+=s?(1===i?"":s)+"hundre":"",n%=100,n){if(r+=r?"og":"",t){const e=a.special.smallOrdinals[n];if(e)return r+e;if(n%10)return r+a.tens[Math.floor(n/10)]+a.special.smallOrdinals[n%10]}r+=a.ones[n]||a.tens[Math.floor(n/10)]+(n%10?a.ones[n%10]:"")}return t?o(r):r}function o(e){const t=a.special.endOrdinal[0];return"a"===t&&e.match(/en$/)?e.slice(0,-2)+a.special.endOrdinal:e.match(/(d|n)$/)||e.match(/hundre$/)?e+"de":e.match(/i$/)?e+a.special.endOrdinal:"a"===t&&e.match(/e$/)?e.slice(0,-1)+a.special.endOrdinal:(e.match(/e$/),e+"nde")}function s(e){return u(e,!0)}const a=(0,n(4277).NUMBERS)();function c(e,t=!1){return e===a.ones[1]?"ein"===e?"eitt ":t?"et":"ett":e}function l(e,t=!1){let n=e%1e3,r="",i=a.ones[Math.floor(n/100)];if(r+=i?c(i)+"hundre":"",n%=100,n){if(r+=r?"og":"",t){const e=a.special.smallOrdinals[n];if(e)return r+e}if(i=a.ones[n],i)r+=i;else{const e=a.tens[Math.floor(n/10)];i=a.ones[n%10],r+=i?i+"og"+e:e}}return t?o(r):r}function u(e,t=!1){const n="alt"===r.default.getInstance().subiso?function(e,t=!1){if(0===e)return t?a.special.smallOrdinals[0]:a.zero;if(e>=Math.pow(10,36))return e.toString();let n=0,r="";for(;e>0;){const i=e%1e3;if(i){const o=l(e%1e3,!n&&t);!n&&t&&(t=!t),r=(1===n?c(o,!0):o)+(n>1?a.numSep:"")+(n?a.large[n]+(n>1&&i>1?"er":""):"")+(n>1&&r?a.numSep:"")+r}e=Math.floor(e/1e3),n++}return t?r+(r.match(/tusen$/)?"de":"te"):r}(e,t):function(e,t=!1){if(0===e)return t?a.special.smallOrdinals[0]:a.zero;if(e>=Math.pow(10,36))return e.toString();let n=0,r="";for(;e>0;){const o=e%1e3;if(o){const s=i(e%1e3,!n&&t);!n&&t&&(t=!t),r=s+(n?" "+a.large[n]+(n>1&&o>1?"er":"")+(r?" ":""):"")+r}e=Math.floor(e/1e3),n++}return t?r+(r.match(/tusen$/)?"de":"te"):r}(e,t);return n}a.wordOrdinal=s,a.numericOrdinal=function(e){return e.toString()+"."},a.numberToWords=u,a.numberToOrdinal=function(e,t){return s(e)},t.default=a},6416:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function r(e){let t=e%1e3,n="";const r=Math.floor(t/100);return n+=s.ones[r]?(1===r?"":s.ones[r]+s.numSep)+"hundra":"",t%=100,t&&(n+=n?s.numSep:"",n+=s.ones[t]||s.tens[Math.floor(t/10)]+(t%10?s.numSep+s.ones[t%10]:"")),n}function i(e,t=!1){if(0===e)return s.zero;if(e>=Math.pow(10,36))return e.toString();let n=0,i="";for(;e>0;){const o=e%1e3;if(o){const a=s.large[n],c=o>1&&n>1&&!t?"er":"";i=(1===n&&1===o?"":(n>1&&1===o?"en":r(e%1e3))+(n>1?" ":""))+(n?a+c+(n>1?" ":""):"")+i}e=Math.floor(e/1e3),n++}return i.replace(/ $/,"")}function o(e){let t=i(e,!0);return t.match(/^noll$/)?t="nollte":t.match(/ett$/)?t=t.replace(/ett$/,"f\xf6rsta"):t.match(/tv\xe5$/)?t=t.replace(/tv\xe5$/,"andra"):t.match(/tre$/)?t=t.replace(/tre$/,"tredje"):t.match(/fyra$/)?t=t.replace(/fyra$/,"fj\xe4rde"):t.match(/fem$/)?t=t.replace(/fem$/,"femte"):t.match(/sex$/)?t=t.replace(/sex$/,"sj\xe4tte"):t.match(/sju$/)?t=t.replace(/sju$/,"sjunde"):t.match(/\xe5tta$/)?t=t.replace(/\xe5tta$/,"\xe5ttonde"):t.match(/nio$/)?t=t.replace(/nio$/,"nionde"):t.match(/tio$/)?t=t.replace(/tio$/,"tionde"):t.match(/elva$/)?t=t.replace(/elva$/,"elfte"):t.match(/tolv$/)?t=t.replace(/tolv$/,"tolfte"):t.match(/tusen$/)?t=t.replace(/tusen$/,"tusonde"):t.match(/jard$/)||t.match(/jon$/)?t+="te":t+="de",t}const s=(0,n(4277).NUMBERS)();s.wordOrdinal=o,s.numericOrdinal=function(e){const t=e.toString();return t.match(/11$|12$/)?t+":e":t+(t.match(/1$|2$/)?":a":":e")},s.numberToWords=i,s.numberToOrdinal=function(e,t){if(1===e)return"hel";if(2===e)return t?"halva":"halv";let n=o(e);return n=n.match(/de$/)?n.replace(/de$/,""):n,n+(t?"delar":"del")},t.default=s},9385:function(e,t){function n(e,t=""){if(!e.childNodes||!e.childNodes[0]||!e.childNodes[0].childNodes||e.childNodes[0].childNodes.length<2||"number"!==e.childNodes[0].childNodes[0].tagName||"integer"!==e.childNodes[0].childNodes[0].getAttribute("role")||"number"!==e.childNodes[0].childNodes[1].tagName||"integer"!==e.childNodes[0].childNodes[1].getAttribute("role"))return{convertible:!1,content:e.textContent};const n=e.childNodes[0].childNodes[1].textContent,r=e.childNodes[0].childNodes[0].textContent,i=Number(n),o=Number(r);return isNaN(i)||isNaN(o)?{convertible:!1,content:`${r} ${t} ${n}`}:{convertible:!0,enumerator:o,denominator:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.vulgarFractionSmall=t.convertVulgarFraction=t.Combiners=t.siCombiner=t.identityTransformer=t.pluralCase=void 0,t.pluralCase=function(e,t){return e.toString()},t.identityTransformer=function(e){return e.toString()},t.siCombiner=function(e,t){return e+t.toLowerCase()},t.Combiners={},t.Combiners.identityCombiner=function(e,t,n){return e+t+n},t.Combiners.prefixCombiner=function(e,t,n){return e=n?n+" "+e:e,t?t+" "+e:e},t.Combiners.postfixCombiner=function(e,t,n){return e=n?n+" "+e:e,t?e+" "+t:e},t.Combiners.romanceCombiner=function(e,t,n){return e=n?e+" "+n:e,t?e+" "+t:e},t.convertVulgarFraction=n,t.vulgarFractionSmall=function(e,t,r){const i=n(e);if(i.convertible){const e=i.enumerator,n=i.denominator;return e>0&&e<t&&n>0&&n<r}return!1}},1970:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Condition=t.BaseRuleStore=void 0;const r=n(4148),i=n(8310),o=n(7039),s=n(443);class a{constructor(){this.context=new s.SpeechRuleContext,this.parseOrder=i.DynamicCstr.DEFAULT_ORDER,this.parser=new i.DynamicCstrParser(this.parseOrder),this.locale=i.DynamicCstr.DEFAULT_VALUES[i.Axis.LOCALE],this.modality=i.DynamicCstr.DEFAULT_VALUES[i.Axis.MODALITY],this.domain="",this.initialized=!1,this.inherits=null,this.kind="standard",this.customTranscriptions={},this.preconditions=new Map,this.speechRules_=[],this.rank=0,this.parseMethods={Rule:this.defineRule,Generator:this.generateRules,Action:this.defineAction,Precondition:this.definePrecondition,Ignore:this.ignoreRules}}static compareStaticConstraints_(e,t){if(e.length!==t.length)return!1;for(let n,r=0;n=e[r];r++)if(-1===t.indexOf(n))return!1;return!0}static comparePreconditions_(e,t){const n=e.precondition,r=t.precondition;return n.query===r.query&&a.compareStaticConstraints_(n.constraints,r.constraints)}defineRule(e,t,n,r,...i){const s=this.parseAction(n),a=this.parsePrecondition(r,i),c=this.parseCstr(t);if(!(s&&a&&c))return console.error(`Rule Error: ${r}, (${t}): ${n}`),null;const l=new o.SpeechRule(e,c,a,s);return l.precondition.rank=this.rank++,this.addRule(l),l}addRule(e){e.context=this.context,this.speechRules_.unshift(e)}deleteRule(e){const t=this.speechRules_.indexOf(e);-1!==t&&this.speechRules_.splice(t,1)}findRule(e){for(let t,n=0;t=this.speechRules_[n];n++)if(e(t))return t;return null}findAllRules(e){return this.speechRules_.filter(e)}evaluateDefault(e){const t=e.textContent.slice(0);return t.match(/^\s+$/)?this.evaluateWhitespace(t):this.evaluateString(t)}evaluateWhitespace(e){return[]}evaluateCustom(e){const t=this.customTranscriptions[e];return void 0!==t?r.AuditoryDescription.create({text:t},{adjust:!0,translate:!1}):null}evaluateCharacter(e){return this.evaluateCustom(e)||r.AuditoryDescription.create({text:e},{adjust:!0,translate:!0})}removeDuplicates(e){for(let t,n=this.speechRules_.length-1;t=this.speechRules_[n];n--)t!==e&&e.dynamicCstr.equal(t.dynamicCstr)&&a.comparePreconditions_(t,e)&&this.speechRules_.splice(n,1)}getSpeechRules(){return this.speechRules_}setSpeechRules(e){this.speechRules_=e}getPreconditions(){return this.preconditions}parseCstr(e){try{return this.parser.parse(this.locale+"."+this.modality+(this.domain?"."+this.domain:"")+"."+e)}catch(t){if("RuleError"===t.name)return console.error("Rule Error ",`Illegal Dynamic Constraint: ${e}.`,t.message),null;throw t}}parsePrecondition(e,t){try{const n=this.parsePrecondition_(e);e=n[0];let r=n.slice(1);for(const e of t)r=r.concat(this.parsePrecondition_(e));return new o.Precondition(e,...r)}catch(n){if("RuleError"===n.name)return console.error("Rule Error ",`Illegal preconditions: ${e}, ${t}.`,n.message),null;throw n}}parseAction(e){try{return o.Action.fromString(e)}catch(t){if("RuleError"===t.name)return console.error("Rule Error ",`Illegal action: ${e}.`,t.message),null;throw t}}parse(e){this.modality=e.modality||this.modality,this.locale=e.locale||this.locale,this.domain=e.domain||this.domain,this.context.parse(e.functions||[]),"actions"!==e.kind&&(this.kind=e.kind||this.kind,this.inheritRules()),this.parseRules(e.rules||[])}parseRules(e){for(let t,n=0;t=e[n];n++){const e=t[0],n=this.parseMethods[e];e&&n&&n.apply(this,t.slice(1))}}generateRules(e){const t=this.context.customGenerators.lookup(e);t&&t(this)}defineAction(e,t){let n;try{n=o.Action.fromString(t)}catch(e){if("RuleError"===e.name)return void console.error("Action Error ",t,e.message);throw e}const r=this.getFullPreconditions(e);if(!r)return void console.error(`Action Error: No precondition for action ${e}`);this.ignoreRules(e);const i=new RegExp("^\\w+\\.\\w+\\."+(this.domain?"\\w+\\.":""));r.conditions.forEach((([t,r])=>{const s=this.parseCstr(t.toString().replace(i,""));this.addRule(new o.SpeechRule(e,s,r,n))}))}getFullPreconditions(e){const t=this.preconditions.get(e);return t||!this.inherits?t:this.inherits.getFullPreconditions(e)}definePrecondition(e,t,n,...r){const i=this.parsePrecondition(n,r),o=this.parseCstr(t);i&&o?(i.rank=this.rank++,this.preconditions.set(e,new c(o,i))):console.error(`Precondition Error: ${n}, (${t})`)}inheritRules(){if(!this.inherits||!this.inherits.getSpeechRules().length)return;const e=new RegExp("^\\w+\\.\\w+\\."+(this.domain?"\\w+\\.":""));this.inherits.getSpeechRules().forEach((t=>{const n=this.parseCstr(t.dynamicCstr.toString().replace(e,""));this.addRule(new o.SpeechRule(t.name,n,t.precondition,t.action))}))}ignoreRules(e,...t){let n=this.findAllRules((t=>t.name===e));if(!t.length)return void n.forEach(this.deleteRule.bind(this));let r=[];for(const e of t){const t=this.parseCstr(e);for(const e of n)t.equal(e.dynamicCstr)?this.deleteRule(e):r.push(e);n=r,r=[]}}parsePrecondition_(e){const t=this.context.customGenerators.lookup(e);return t?t():[e]}}t.BaseRuleStore=a;class c{constructor(e,t){this.base=e,this._conditions=[],this.constraints=[],this.allCstr={},this.constraints.push(e),this.addCondition(e,t)}get conditions(){return this._conditions}addConstraint(e){if(this.constraints.filter((t=>t.equal(e))).length)return;this.constraints.push(e);const t=[];for(const[n,r]of this.conditions)this.base.equal(n)&&t.push([e,r]);this._conditions=this._conditions.concat(t)}addBaseCondition(e){this.addCondition(this.base,e)}addFullCondition(e){this.constraints.forEach((t=>this.addCondition(t,e)))}addCondition(e,t){const n=e.toString()+" "+t.toString();this.allCstr.condStr||(this.allCstr[n]=!0,this._conditions.push([e,t]))}}t.Condition=c},1462:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BrailleStore=void 0;const r=n(4036),i=n(7478);class o extends i.MathStore{constructor(){super(...arguments),this.modality="braille",this.customTranscriptions={"\u22ca":"\u2808\u2821\u2833"}}evaluateString(e){const t=[],n=Array.from(e);for(let e=0;e<n.length;e++)t.push(this.evaluateCharacter(n[e]));return t}annotations(){for(let e,t=0;e=this.annotators[t];t++)(0,r.activate)(this.locale,e)}}t.BrailleStore=o},8310:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultComparator=t.DynamicCstrParser=t.DynamicCstr=t.DynamicProperties=t.Axis=void 0,function(e){e.DOMAIN="domain",e.STYLE="style",e.LOCALE="locale",e.TOPIC="topic",e.MODALITY="modality"}(n=t.Axis||(t.Axis={}));class r{constructor(e,t=Object.keys(e)){this.properties=e,this.order=t}static createProp(...e){const t=i.DEFAULT_ORDER,n={};for(let r=0,i=e.length,o=t.length;r<i&&r<o;r++)n[t[r]]=e[r];return new r(n)}getProperties(){return this.properties}getOrder(){return this.order}getAxes(){return this.order}getProperty(e){return this.properties[e]}updateProperties(e){this.properties=e}allProperties(){const e=[];return this.order.forEach((t=>e.push(this.getProperty(t).slice()))),e}toString(){const e=[];return this.order.forEach((t=>e.push(t+": "+this.getProperty(t).toString()))),e.join("\n")}}t.DynamicProperties=r;class i extends r{constructor(e,t){const n={};for(const[t,r]of Object.entries(e))n[t]=[r];super(n,t),this.components=e}static createCstr(...e){const t=i.DEFAULT_ORDER,n={};for(let r=0,i=e.length,o=t.length;r<i&&r<o;r++)n[t[r]]=e[r];return new i(n)}static defaultCstr(){return i.createCstr.apply(null,i.DEFAULT_ORDER.map((function(e){return i.DEFAULT_VALUES[e]})))}static validOrder(e){const t=i.DEFAULT_ORDER.slice();return e.every((e=>{const n=t.indexOf(e);return-1!==n&&t.splice(n,1)}))}getComponents(){return this.components}getValue(e){return this.components[e]}getValues(){return this.order.map((e=>this.getValue(e)))}allProperties(){const e=super.allProperties();for(let t,n,r=0;t=e[r],n=this.order[r];r++){const e=this.getValue(n);-1===t.indexOf(e)&&t.unshift(e)}return e}toString(){return this.getValues().join(".")}equal(e){const t=e.getAxes();if(this.order.length!==t.length)return!1;for(let n,r=0;n=t[r];r++){const t=this.getValue(n);if(!t||e.getValue(n)!==t)return!1}return!0}}t.DynamicCstr=i,i.DEFAULT_ORDER=[n.LOCALE,n.MODALITY,n.DOMAIN,n.STYLE,n.TOPIC],i.BASE_LOCALE="base",i.DEFAULT_VALUE="default",i.DEFAULT_VALUES={[n.LOCALE]:"en",[n.DOMAIN]:i.DEFAULT_VALUE,[n.STYLE]:i.DEFAULT_VALUE,[n.TOPIC]:i.DEFAULT_VALUE,[n.MODALITY]:"speech"};t.DynamicCstrParser=class{constructor(e){this.order=e}parse(e){const t=e.split("."),n={};if(t.length>this.order.length)throw new Error("Invalid dynamic constraint: "+n);let r=0;for(let e,i=0;e=this.order[i],t.length;i++,r++){const r=t.shift();n[e]=r}return new i(n,this.order.slice(0,r))}};t.DefaultComparator=class{constructor(e,t=new r(e.getProperties(),e.getOrder())){this.reference=e,this.fallback=t,this.order=this.reference.getOrder()}getReference(){return this.reference}setReference(e,t){this.reference=e,this.fallback=t||new r(e.getProperties(),e.getOrder()),this.order=this.reference.getOrder()}match(e){const t=e.getAxes();return t.length===this.reference.getAxes().length&&t.every((t=>{const n=e.getValue(t);return n===this.reference.getValue(t)||-1!==this.fallback.getProperty(t).indexOf(n)}))}compare(e,t){let n=!1;for(let r,i=0;r=this.order[i];i++){const i=e.getValue(r),o=t.getValue(r);if(!n){const e=this.reference.getValue(r);if(e===i&&e!==o)return-1;if(e===o&&e!==i)return 1;if(e===i&&e===o)continue;e!==i&&e!==o&&(n=!0)}const s=this.fallback.getProperty(r),a=s.indexOf(i),c=s.indexOf(o);if(a<c)return-1;if(c<a)return 1}return 0}toString(){return this.reference.toString()+"\n"+this.fallback.toString()}}},1058:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.numbersToAlpha=t.Grammar=t.ATTRIBUTE=void 0;const r=n(6671),i=n(4886),o=n(3319),s=n(4524);t.ATTRIBUTE="grammar";class a{constructor(){this.currentFlags={},this.parameters_={},this.corrections_={},this.preprocessors_={},this.stateStack_=[]}static getInstance(){return a.instance=a.instance||new a,a.instance}static parseInput(e){const t={},n=e.split(":");for(let e=0,r=n.length;e<r;e++){const r=n[e].split("="),i=r[0].trim();r[1]?t[i]=r[1].trim():i.match(/^!/)?t[i.slice(1)]=!1:t[i]=!0}return t}static parseState(e){const t={},n=e.split(" ");for(let e=0,r=n.length;e<r;e++){const r=n[e].split(":"),i=r[0],o=r[1];t[i]=o||!0}return t}static translateString_(e){if(e.match(/:unit$/))return a.translateUnit_(e);const t=i.default.getInstance();let n=t.evaluator(e,t.dynamicCstr);return n=null===n?e:n,a.getInstance().getParameter("plural")&&(n=s.LOCALE.FUNCTIONS.plural(n)),n}static translateUnit_(e){e=a.prepareUnit_(e);const t=i.default.getInstance(),n=a.getInstance().getParameter("plural"),r=t.strict,o=`${t.locale}.${t.modality}.default`;let c,l;return t.strict=!0,n&&(c=t.defaultParser.parse(o+".plural"),l=t.evaluator(e,c)),l?(t.strict=r,l):(c=t.defaultParser.parse(o+".default"),l=t.evaluator(e,c),t.strict=r,l?(n&&(l=s.LOCALE.FUNCTIONS.plural(l)),l):a.cleanUnit_(e))}static prepareUnit_(e){const t=e.match(/:unit$/);return t?e.slice(0,t.index).replace(/\s+/g," ")+e.slice(t.index):e}static cleanUnit_(e){return e.match(/:unit$/)?e.replace(/:unit$/,""):e}clear(){this.parameters_={},this.stateStack_=[]}setParameter(e,t){const n=this.parameters_[e];return t?this.parameters_[e]=t:delete this.parameters_[e],n}getParameter(e){return this.parameters_[e]}setCorrection(e,t){this.corrections_[e]=t}setPreprocessor(e,t){this.preprocessors_[e]=t}getCorrection(e){return this.corrections_[e]}getState(){const e=[];for(const t in this.parameters_){const n=this.parameters_[t];e.push("string"==typeof n?t+":"+n:t)}return e.join(" ")}pushState(e){for(const t in e)e[t]=this.setParameter(t,e[t]);this.stateStack_.push(e)}popState(){const e=this.stateStack_.pop();for(const t in e)this.setParameter(t,e[t])}setAttribute(e){if(e&&e.nodeType===r.NodeType.ELEMENT_NODE){const n=this.getState();n&&e.setAttribute(t.ATTRIBUTE,n)}}preprocess(e){return this.runProcessors_(e,this.preprocessors_)}correct(e){return this.runProcessors_(e,this.corrections_)}apply(e,t){return this.currentFlags=t||{},e=this.currentFlags.adjust||this.currentFlags.preprocess?a.getInstance().preprocess(e):e,(this.parameters_.translate||this.currentFlags.translate)&&(e=a.translateString_(e)),e=this.currentFlags.adjust||this.currentFlags.correct?a.getInstance().correct(e):e,this.currentFlags={},e}runProcessors_(e,t){for(const n in this.parameters_){const r=t[n];if(!r)continue;const i=this.parameters_[n];e=!0===i?r(e):r(e,i)}return e}}function c(e,t){if(!t||!e)return e;const n=s.LOCALE.FUNCTIONS.fontRegexp(o.localFont(t));return e.replace(n,"")}function l(e){return e.match(/\d+/)?s.LOCALE.NUMBERS.numberToWords(parseInt(e,10)):e}t.Grammar=a,t.numbersToAlpha=l,a.getInstance().setCorrection("localFont",o.localFont),a.getInstance().setCorrection("localRole",o.localRole),a.getInstance().setCorrection("localEnclose",o.localEnclose),a.getInstance().setCorrection("ignoreFont",c),a.getInstance().setPreprocessor("annotation",(function(e,t){return e+":"+t})),a.getInstance().setPreprocessor("noTranslateText",(function(e){return e.match(new RegExp("^["+s.LOCALE.MESSAGES.regexp.TEXT+"]+$"))&&(a.getInstance().currentFlags.translate=!1),e})),a.getInstance().setCorrection("ignoreCaps",(function(e){let t=s.LOCALE.ALPHABETS.capPrefix[i.default.getInstance().domain];return void 0===t&&(t=s.LOCALE.ALPHABETS.capPrefix.default),c(e,t)})),a.getInstance().setPreprocessor("numbers2alpha",l)},4161:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.enumerate=t.lookupString=t.lookupCategory=t.lookupRule=t.addSiUnitRules=t.addUnitRules=t.addFunctionRules=t.addSymbolRules=t.defineRule=t.defineRules=t.setSiPrefixes=void 0;const r=n(1984),i=n(4886),o=n(2371),s=n(4974),a=n(8310);let c=a.DynamicCstr.DEFAULT_VALUES[a.Axis.LOCALE],l=a.DynamicCstr.DEFAULT_VALUES[a.Axis.MODALITY],u={};t.setSiPrefixes=function(e){u=e};const d={};function h(e,t,n,r){const i=E(t);y(i,n),i.defineRulesFromMappings(e,c,l,t,r)}function p(e){if(N(e))return;const t=e.names,n=e.mappings,r=e.category;for(let e,i=0;e=t[i];i++)h(e,e,r,n)}function f(e){for(const t of Object.keys(u)){const n=Object.assign({},e);n.mappings={};const r=u[t];n.key=t+n.key,n.names=n.names.map((function(e){return t+e}));for(const t of Object.keys(e.mappings)){n.mappings[t]={};for(const i of Object.keys(e.mappings[t]))n.mappings[t][i]=o.locales[c]().FUNCTIONS.si(r,e.mappings[t][i])}b(n)}b(e)}function m(e,t){const n=d[e];return n?n.lookupRule(null,t):null}function g(e,t){const n=m(e,t);return n?n.action:null}function S(e,t){return t=t||{},e.length?(t[e[0]]=S(e.slice(1),t[e[0]]),t):t}function b(e){const t=e.names;t&&(e.names=t.map((function(e){return e+":unit"}))),p(e)}function N(e){return!(!e.locale&&!e.modality)&&(c=e.locale||c,l=e.modality||l,!0)}function E(e){let t=d[e];return t?(r.Debugger.getInstance().output("Store exists! "+e),t):(t=new s.MathSimpleStore,d[e]=t,t)}function y(e,t){t&&(e.category=t)}t.defineRules=h,t.defineRule=function(e,t,n,r,i,o){const s=E(i);y(s,r),s.defineRuleFromStrings(e,c,l,t,n,i,o)},t.addSymbolRules=function(e){if(N(e))return;const t=s.MathSimpleStore.parseUnicode(e.key);h(e.key,t,e.category,e.mappings)},t.addFunctionRules=p,t.addUnitRules=function(e){N(e)||(e.si?f(e):b(e))},t.addSiUnitRules=f,t.lookupRule=m,t.lookupCategory=function(e){const t=d[e];return t?t.category:""},t.lookupString=g,i.default.getInstance().evaluator=g,t.enumerate=function(e={}){for(const t of Object.values(d))for(const[,n]of t.rules.entries())for(const{cstr:t}of n)e=S(t.getValues(),e);return e}},4974:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MathSimpleStore=void 0;const r=n(4886),i=n(8310);class o{constructor(){this.category="",this.rules=new Map}static parseUnicode(e){const t=parseInt(e,16);return String.fromCodePoint(t)}static testDynamicConstraints_(e,t){return r.default.getInstance().strict?t.cstr.equal(e):r.default.getInstance().comparator.match(t.cstr)}defineRulesFromMappings(e,t,n,r,i){for(const o in i)for(const s in i[o]){const a=i[o][s];this.defineRuleFromStrings(e,t,n,o,s,r,a)}}getRules(e){let t=this.rules.get(e);return t||(t=[],this.rules.set(e,t)),t}defineRuleFromStrings(e,t,n,i,o,s,a){let c=this.getRules(t);const l=r.default.getInstance().parsers[i]||r.default.getInstance().defaultParser,u=r.default.getInstance().comparators[i],d=`${t}.${n}.${i}.${o}`,h=l.parse(d),p=u?u():r.default.getInstance().comparator,f=p.getReference();p.setReference(h);const m={cstr:h,action:a};c=c.filter((e=>!h.equal(e.cstr))),c.push(m),this.rules.set(t,c),p.setReference(f)}lookupRule(e,t){let n=this.getRules(t.getValue(i.Axis.LOCALE));return n=n.filter((function(e){return o.testDynamicConstraints_(t,e)})),1===n.length?n[0]:n.length?n.sort(((e,t)=>r.default.getInstance().comparator.compare(e.cstr,t.cstr)))[0]:null}}t.MathSimpleStore=o},7478:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MathStore=void 0;const r=n(1426),i=n(4524),o=n(4036),s=n(1970),a=n(7039);class c extends s.BaseRuleStore{constructor(){super(),this.annotators=[],this.parseMethods.Alias=this.defineAlias,this.parseMethods.SpecializedRule=this.defineSpecializedRule,this.parseMethods.Specialized=this.defineSpecialized}initialize(){this.initialized||(this.annotations(),this.initialized=!0)}annotations(){for(let e,t=0;e=this.annotators[t];t++)(0,o.activate)(this.domain,e)}defineAlias(e,t,...n){const r=this.parsePrecondition(t,n);if(!r)return void console.error(`Precondition Error: ${t} ${n}`);const i=this.preconditions.get(e);i?i.addFullCondition(r):console.error(`Alias Error: No precondition by the name of ${e}`)}defineRulesAlias(e,t,...n){const r=this.findAllRules((function(t){return t.name===e}));if(0===r.length)throw new a.OutputError("Rule with name "+e+" does not exist.");const i=[];r.forEach((e=>{(e=>{const t=e.dynamicCstr.toString(),n=e.action.toString();for(let e,r=0;e=i[r];r++)if(e.action===n&&e.cstr===t)return!1;return i.push({cstr:t,action:n}),!0})(e)&&this.addAlias_(e,t,n)}))}defineSpecializedRule(e,t,n,r){const i=this.parseCstr(t),o=this.findRule((t=>t.name===e&&i.equal(t.dynamicCstr))),s=this.parseCstr(n);if(!o&&r)throw new a.OutputError("Rule named "+e+" with style "+t+" does not exist.");const c=r?a.Action.fromString(r):o.action,l=new a.SpeechRule(o.name,s,o.precondition,c);this.addRule(l)}defineSpecialized(e,t,n){const r=this.parseCstr(n);if(!r)return void console.error(`Dynamic Constraint Error: ${n}`);const i=this.preconditions.get(e);i?i.addConstraint(r):console.error(`Alias Error: No precondition by the name of ${e}`)}evaluateString(e){const t=[];if(e.match(/^\s+$/))return t;let n=this.matchNumber_(e);if(n&&n.length===e.length)return t.push(this.evaluateCharacter(n.number)),t;const o=r.removeEmpty(e.replace(/\s/g," ").split(" "));for(let e,r=0;e=o[r];r++)if(1===e.length)t.push(this.evaluateCharacter(e));else if(e.match(new RegExp("^["+i.LOCALE.MESSAGES.regexp.TEXT+"]+$")))t.push(this.evaluateCharacter(e));else{let r=e;for(;r;){n=this.matchNumber_(r);const e=r.match(new RegExp("^["+i.LOCALE.MESSAGES.regexp.TEXT+"]+"));if(n)t.push(this.evaluateCharacter(n.number)),r=r.substring(n.length);else if(e)t.push(this.evaluateCharacter(e[0])),r=r.substring(e[0].length);else{const e=Array.from(r),n=e[0];t.push(this.evaluateCharacter(n)),r=e.slice(1).join("")}}}return t}parse(e){super.parse(e),this.annotators=e.annotators||[]}addAlias_(e,t,n){const r=this.parsePrecondition(t,n),i=new a.SpeechRule(e.name,e.dynamicCstr,r,e.action);i.name=e.name,this.addRule(i)}matchNumber_(e){const t=e.match(new RegExp("^"+i.LOCALE.MESSAGES.regexp.NUMBER)),n=e.match(new RegExp("^"+c.regexp.NUMBER));if(!t&&!n)return null;const r=n&&n[0]===e;if(t&&t[0]===e||!r)return t?{number:t[0],length:t[0].length}:null;return{number:n[0].replace(new RegExp(c.regexp.DIGIT_GROUP,"g"),"X").replace(new RegExp(c.regexp.DECIMAL_MARK,"g"),i.LOCALE.MESSAGES.regexp.DECIMAL_MARK).replace(/X/g,i.LOCALE.MESSAGES.regexp.DIGIT_GROUP.replace(/\\/g,"")),length:n[0].length}}}t.MathStore=c,c.regexp={NUMBER:"((\\d{1,3})(?=(,| ))((,| )\\d{3})*(\\.\\d+)?)|^\\d*\\.\\d+|^\\d+",DECIMAL_MARK:"\\.",DIGIT_GROUP:","}},7039:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputError=t.Precondition=t.Action=t.Component=t.ActionType=t.SpeechRule=void 0;const r=n(4886),i=n(1058);var o;function s(e){switch(e){case"[n]":return o.NODE;case"[m]":return o.MULTI;case"[t]":return o.TEXT;case"[p]":return o.PERSONALITY;default:throw"Parse error: "+e}}t.SpeechRule=class{constructor(e,t,n,r){this.name=e,this.dynamicCstr=t,this.precondition=n,this.action=r,this.context=null}toString(){return this.name+" | "+this.dynamicCstr.toString()+" | "+this.precondition.toString()+" ==> "+this.action.toString()}},function(e){e.NODE="NODE",e.MULTI="MULTI",e.TEXT="TEXT",e.PERSONALITY="PERSONALITY"}(o=t.ActionType||(t.ActionType={}));class a{constructor({type:e,content:t,attributes:n,grammar:r}){this.type=e,this.content=t,this.attributes=n,this.grammar=r}static grammarFromString(e){return i.Grammar.parseInput(e)}static fromString(e){const t={type:s(e.substring(0,3))};let n=e.slice(3).trim();if(!n)throw new u("Missing content.");switch(t.type){case o.TEXT:if('"'===n[0]){const e=d(n,"\\(")[0].trim();if('"'!==e.slice(-1))throw new u("Invalid string syntax.");t.content=e,n=n.slice(e.length).trim(),-1===n.indexOf("(")&&(n="");break}case o.NODE:case o.MULTI:{const e=n.indexOf(" (");if(-1===e){t.content=n.trim(),n="";break}t.content=n.substring(0,e).trim(),n=n.slice(e).trim()}}if(n){const e=a.attributesFromString(n);e.grammar&&(t.grammar=e.grammar,delete e.grammar),Object.keys(e).length&&(t.attributes=e)}return new a(t)}static attributesFromString(e){if("("!==e[0]||")"!==e.slice(-1))throw new u("Invalid attribute expression: "+e);const t={},n=d(e.slice(1,-1),",");for(let e=0,r=n.length;e<r;e++){const r=n[e],o=r.indexOf(":");if(-1===o)t[r.trim()]="true";else{const e=r.substring(0,o).trim(),n=r.slice(o+1).trim();t[e]=e===i.ATTRIBUTE?a.grammarFromString(n):n}}return t}toString(){let e="";e+=function(e){switch(e){case o.NODE:return"[n]";case o.MULTI:return"[m]";case o.TEXT:return"[t]";case o.PERSONALITY:return"[p]";default:throw"Unknown type error: "+e}}(this.type),e+=this.content?" "+this.content:"";const t=this.attributesToString();return e+=t?" "+t:"",e}grammarToString(){return this.getGrammar().join(":")}getGrammar(){const e=[];for(const t in this.grammar)!0===this.grammar[t]?e.push(t):!1===this.grammar[t]?e.push("!"+t):e.push(t+"="+this.grammar[t]);return e}attributesToString(){const e=this.getAttributes(),t=this.grammarToString();return t&&e.push("grammar:"+t),e.length>0?"("+e.join(", ")+")":""}getAttributes(){const e=[];for(const t in this.attributes){const n=this.attributes[t];"true"===n?e.push(t):e.push(t+":"+n)}return e}}t.Component=a;class c{constructor(e){this.components=e}static fromString(e){const t=d(e,";").filter((function(e){return e.match(/\S/)})).map((function(e){return e.trim()})),n=[];for(let e=0,r=t.length;e<r;e++){const r=a.fromString(t[e]);r&&n.push(r)}return new c(n)}toString(){return this.components.map((function(e){return e.toString()})).join("; ")}}t.Action=c;class l{constructor(e,...t){this.query=e,this.constraints=t;const[n,r]=this.presetPriority();this.priority=n?r:this.calculatePriority()}static constraintValue(e,t){for(let n,r=0;n=t[r];r++)if(e.match(n))return++r;return 0}toString(){const e=this.constraints.join(", ");return`${this.query}, ${e} (${this.priority}, ${this.rank})`}calculatePriority(){const e=l.constraintValue(this.query,l.queryPriorities);if(!e)return 0;const t=this.query.match(/^self::.+\[(.+)\]/)[1];return 100*e+10*l.constraintValue(t,l.attributePriorities)}presetPriority(){if(!this.constraints.length)return[!1,0];const e=this.constraints[this.constraints.length-1].match(/^priority=(.*$)/);if(!e)return[!1,0];this.constraints.pop();const t=parseFloat(e[1]);return[!0,isNaN(t)?0:t]}}t.Precondition=l,l.queryPriorities=[/^self::\*\[.+\]$/,/^self::[\w-]+\[.+\]$/],l.attributePriorities=[/^@[\w-]+$/,/^@[\w-]+!=".+"$/,/^not\(contains\(@[\w-]+,\s*".+"\)\)$/,/^contains\(@[\w-]+,".+"\)$/,/^@[\w-]+=".+"$/];class u extends r.SREError{constructor(e){super(e),this.name="RuleError"}}function d(e,t){const n=[];let r="";for(;""!==e;){const i=e.search(t);if(-1===i){if((e.match(/"/g)||[]).length%2!=0)throw new u("Invalid string in expression: "+e);n.push(r+e),r="",e=""}else if((e.substring(0,i).match(/"/g)||[]).length%2==0)n.push(r+e.substring(0,i)),r="",e=e.substring(i+1);else{const t=e.substring(i).search('"');if(-1===t)throw new u("Invalid string in expression: "+e);r+=e.substring(0,i+t+1),e=e.substring(i+t+1)}}return r&&n.push(r),n}t.OutputError=u},443:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRuleContext=void 0;const r=n(5024),i=n(3686);t.SpeechRuleContext=class{constructor(){this.customQueries=new i.CustomQueries,this.customStrings=new i.CustomStrings,this.contextFunctions=new i.ContextFunctions,this.customGenerators=new i.CustomGenerators}applyCustomQuery(e,t){const n=this.customQueries.lookup(t);return n?n(e):null}applySelector(e,t){return this.applyCustomQuery(e,t)||r.evalXPath(t,e)}applyQuery(e,t){const n=this.applySelector(e,t);return n.length>0?n[0]:null}applyConstraint(e,t){return!!this.applyQuery(e,t)||r.evaluateBoolean(t,e)}constructString(e,t){if(!t)return"";if('"'===t.charAt(0))return t.slice(1,-1);const n=this.customStrings.lookup(t);return n?n(e):r.evaluateString(t,e)}parse(e){const t=Array.isArray(e)?e:Object.entries(e);for(let e,n=0;e=t[n];n++){switch(e[0].slice(0,3)){case"CQF":this.customQueries.add(e[0],e[1]);break;case"CSF":this.customStrings.add(e[0],e[1]);break;case"CTF":this.contextFunctions.add(e[0],e[1]);break;case"CGF":this.customGenerators.add(e[0],e[1]);break;default:console.error("FunctionError: Invalid function name "+e[0])}}}}},6060:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.storeFactory=t.SpeechRuleEngine=void 0;const r=n(4148),i=n(1984),o=n(6671),s=n(4886),a=n(4998),c=n(5024),l=n(7278),u=n(9805),d=n(1462),h=n(8310),p=n(1058),f=n(7478),m=n(7039),g=n(2803);class S{constructor(){this.trie=null,this.evaluators_={},this.trie=new g.Trie}static getInstance(){return S.instance=S.instance||new S,S.instance}static debugSpeechRule(e,t){const n=e.precondition,r=e.context.applyQuery(t,n.query);i.Debugger.getInstance().output(n.query,r?r.toString():r),n.constraints.forEach((n=>i.Debugger.getInstance().output(n,e.context.applyConstraint(t,n))))}static debugNamedSpeechRule(e,t){const n=S.getInstance().trie.collectRules().filter((t=>t.name==e));for(let r,o=0;r=n[o];o++)i.Debugger.getInstance().output("Rule",e,"DynamicCstr:",r.dynamicCstr.toString(),"number",o),S.debugSpeechRule(r,t)}evaluateNode(e){(0,c.updateEvaluator)(e);const t=(new Date).getTime();let n=[];try{n=this.evaluateNode_(e)}catch(e){console.error("Something went wrong computing speech."),i.Debugger.getInstance().output(e)}const r=(new Date).getTime();return i.Debugger.getInstance().output("Time:",r-t),n}toString(){return this.trie.collectRules().map((e=>e.toString())).join("\n")}runInSetting(e,t){const n=s.default.getInstance(),r={};for(const t in e)r[t]=n[t],n[t]=e[t];n.setDynamicCstr();const i=t();for(const e in r)n[e]=r[e];return n.setDynamicCstr(),i}addStore(e){const t=N(e);"abstract"!==t.kind&&t.getSpeechRules().forEach((e=>this.trie.addRule(e))),this.addEvaluator(t)}processGrammar(e,t,n){const r={};for(const i in n){const o=n[i];r[i]="string"==typeof o?e.constructString(t,o):o}p.Grammar.getInstance().pushState(r)}addEvaluator(e){const t=e.evaluateDefault.bind(e),n=this.evaluators_[e.locale];if(n)return void(n[e.modality]=t);const r={};r[e.modality]=t,this.evaluators_[e.locale]=r}getEvaluator(e,t){const n=this.evaluators_[e]||this.evaluators_[h.DynamicCstr.DEFAULT_VALUES[h.Axis.LOCALE]];return n[t]||n[h.DynamicCstr.DEFAULT_VALUES[h.Axis.MODALITY]]}enumerate(e){return this.trie.enumerate(e)}evaluateNode_(e){return e?(this.updateConstraint_(),this.evaluateTree_(e)):[]}evaluateTree_(e){const t=s.default.getInstance();let n;i.Debugger.getInstance().output(t.mode!==a.Mode.HTTP?e.toString():e),p.Grammar.getInstance().setAttribute(e);const o=this.lookupRule(e,t.dynamicCstr);if(!o)return t.strict?[]:(n=this.getEvaluator(t.locale,t.modality)(e),e.attributes&&this.addPersonality_(n,{},!1,e),n);i.Debugger.getInstance().generateOutput((()=>["Apply Rule:",o.name,o.dynamicCstr.toString(),(t.mode,a.Mode.HTTP,e).toString()]));const l=o.context,u=o.action.components;n=[];for(let t,i=0;t=u[i];i++){let i=[];const o=t.content||"",a=t.attributes||{};let u=!1;t.grammar&&this.processGrammar(l,e,t.grammar);let d=null;if(a.engine){d=s.default.getInstance().dynamicCstr.getComponents();const e=p.Grammar.parseInput(a.engine);s.default.getInstance().setDynamicCstr(e)}switch(t.type){case m.ActionType.NODE:{const t=l.applyQuery(e,o);t&&(i=this.evaluateTree_(t))}break;case m.ActionType.MULTI:{u=!0;const t=l.applySelector(e,o);t.length>0&&(i=this.evaluateNodeList_(l,t,a.sepFunc,l.constructString(e,a.separator),a.ctxtFunc,l.constructString(e,a.context)))}break;case m.ActionType.TEXT:{const t=a.span,n={};if(t){const r=(0,c.evalXPath)(t,e);r.length&&(n.extid=r[0].getAttribute("extid"))}const s=l.constructString(e,o);(s||""===s)&&(i=Array.isArray(s)?s.map((function(e){return r.AuditoryDescription.create({text:e.speech,attributes:e.attributes},{adjust:!0})})):[r.AuditoryDescription.create({text:s,attributes:n},{adjust:!0})])}break;case m.ActionType.PERSONALITY:default:i=[r.AuditoryDescription.create({text:o})]}i[0]&&!u&&(a.context&&(i[0].context=l.constructString(e,a.context)+(i[0].context||"")),a.annotation&&(i[0].annotation=a.annotation)),this.addLayout(i,a,u),t.grammar&&p.Grammar.getInstance().popState(),n=n.concat(this.addPersonality_(i,a,u,e)),d&&s.default.getInstance().setDynamicCstr(d)}return n}evaluateNodeList_(e,t,n,i,o,s){if(!t.length)return[];const a=i||"",c=s||"",l=e.contextFunctions.lookup(o),u=l?l(t,c):function(){return c},d=e.contextFunctions.lookup(n),h=d?d(t,a):function(){return[r.AuditoryDescription.create({text:a},{translate:!0})]};let p=[];for(let e,n=0;e=t[n];n++){const r=this.evaluateTree_(e);if(r.length>0&&(r[0].context=u()+(r[0].context||""),p=p.concat(r),n<t.length-1)){const e=h();p=p.concat(e)}}return p}addLayout(e,t,n){const i=t.layout;i&&(i.match(/^begin/)?e.unshift(new r.AuditoryDescription({text:"",layout:i})):i.match(/^end/)?e.push(new r.AuditoryDescription({text:"",layout:i})):(e.unshift(new r.AuditoryDescription({text:"",layout:`begin${i}`})),e.push(new r.AuditoryDescription({text:"",layout:`end${i}`}))))}addPersonality_(e,t,n,i){const o={};let s=null;for(const e of a.personalityPropList){const n=t[e];if(void 0===n)continue;const r=parseFloat(n),i=isNaN(r)?'"'===n.charAt(0)?n.slice(1,-1):n:r;e===a.personalityProps.PAUSE?s=i:o[e]=i}for(let t,n=0;t=e[n];n++)this.addRelativePersonality_(t,o),this.addExternalAttributes_(t,i);if(n&&e.length&&delete e[e.length-1].personality[a.personalityProps.JOIN],s&&e.length){const t=e[e.length-1];t.text||Object.keys(t.personality).length?e.push(r.AuditoryDescription.create({text:"",personality:{pause:s}})):t.personality[a.personalityProps.PAUSE]=s}return e}addExternalAttributes_(e,t){if(t.hasAttributes()){const n=t.attributes;for(let t=n.length-1;t>=0;t--){const r=n[t].name;!e.attributes[r]&&r.match(/^ext/)&&(e.attributes[r]=n[t].value)}}}addRelativePersonality_(e,t){if(!e.personality)return e.personality=t,e;const n=e.personality;for(const e in t)n[e]&&"number"==typeof n[e]&&"number"==typeof t[e]?n[e]=n[e]+t[e]:n[e]||(n[e]=t[e]);return e}updateConstraint_(){const e=s.default.getInstance().dynamicCstr,t=s.default.getInstance().strict,n=this.trie,r={};let i=e.getValue(h.Axis.LOCALE),o=e.getValue(h.Axis.MODALITY),a=e.getValue(h.Axis.DOMAIN);n.hasSubtrie([i,o,a])||(a=h.DynamicCstr.DEFAULT_VALUES[h.Axis.DOMAIN],n.hasSubtrie([i,o,a])||(o=h.DynamicCstr.DEFAULT_VALUES[h.Axis.MODALITY],n.hasSubtrie([i,o,a])||(i=h.DynamicCstr.DEFAULT_VALUES[h.Axis.LOCALE]))),r[h.Axis.LOCALE]=[i],r[h.Axis.MODALITY]=["summary"!==o?o:h.DynamicCstr.DEFAULT_VALUES[h.Axis.MODALITY]],r[h.Axis.DOMAIN]=["speech"!==o?h.DynamicCstr.DEFAULT_VALUES[h.Axis.DOMAIN]:a];const c=e.getOrder();for(let n,i=0;n=c[i];i++)if(!r[n]){const i=e.getValue(n),o=this.makeSet_(i,e.preference),s=h.DynamicCstr.DEFAULT_VALUES[n];t||i===s||o.push(s),r[n]=o}e.updateProperties(r)}makeSet_(e,t){return t&&Object.keys(t).length?e.split(":"):[e]}lookupRule(e,t){if(!e||e.nodeType!==o.NodeType.ELEMENT_NODE&&e.nodeType!==o.NodeType.TEXT_NODE)return null;const n=this.lookupRules(e,t);return n.length>0?this.pickMostConstraint_(t,n):null}lookupRules(e,t){return this.trie.lookupRules(e,t.allProperties())}pickMostConstraint_(e,t){const n=s.default.getInstance().comparator;return t.sort((function(e,t){return n.compare(e.dynamicCstr,t.dynamicCstr)||t.precondition.priority-e.precondition.priority||t.precondition.constraints.length-e.precondition.constraints.length||t.precondition.rank-e.precondition.rank})),i.Debugger.getInstance().generateOutput((()=>t.map((e=>e.name+"("+e.dynamicCstr.toString()+")"))).bind(this)),t[0]}}t.SpeechRuleEngine=S;const b=new Map;function N(e){const t=`${e.locale}.${e.modality}.${e.domain}`;if("actions"===e.kind){const n=b.get(t);return n.parse(e),n}u.init(),e&&!e.functions&&(e.functions=l.getStore(e.locale,e.modality,e.domain));const n="braille"===e.modality?new d.BrailleStore:new f.MathStore;return b.set(t,n),e.inherits&&(n.inherits=b.get(`${e.inherits}.${e.modality}.${e.domain}`)),n.parse(e),n.initialize(),n}t.storeFactory=N,s.default.nodeEvaluator=S.getInstance().evaluateNode.bind(S.getInstance())},3686:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomGenerators=t.ContextFunctions=t.CustomStrings=t.CustomQueries=void 0;class n{constructor(e,t){this.prefix=e,this.store=t}add(e,t){this.checkCustomFunctionSyntax_(e)&&(this.store[e]=t)}addStore(e){const t=Object.keys(e.store);for(let n,r=0;n=t[r];r++)this.add(n,e.store[n])}lookup(e){return this.store[e]}checkCustomFunctionSyntax_(e){const t=new RegExp("^"+this.prefix);return!!e.match(t)||(console.error("FunctionError: Invalid function name. Expected prefix "+this.prefix),!1)}}t.CustomQueries=class extends n{constructor(){super("CQF",{})}};t.CustomStrings=class extends n{constructor(){super("CSF",{})}};t.ContextFunctions=class extends n{constructor(){super("CTF",{})}};t.CustomGenerators=class extends n{constructor(){super("CGF",{})}}},931:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.contentIterator=t.pauseSeparator=t.nodeCounter=void 0;const r=n(4148),i=n(5024),o=n(4886);t.nodeCounter=function(e,t){const n=e.length;let r=0,i=t;return t||(i=""),function(){return r<n&&(r+=1),i+" "+r}},t.pauseSeparator=function(e,t){const n=parseFloat(t),i=isNaN(n)?t:n;return function(){return[r.AuditoryDescription.create({text:"",personality:{pause:i}})]}},t.contentIterator=function(e,t){let n;return n=e.length>0?i.evalXPath("../../content/*",e[0]):[],function(){const e=n.shift(),i=t?[r.AuditoryDescription.create({text:t},{translate:!0})]:[];if(!e)return i;const s=o.default.evaluateNode(e);return i.concat(s)}}},1939:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeFromString=t.getTree=t.xmlTree=void 0;const r=n(6671),i=n(1784);function o(e){return new i.SemanticTree(e)}t.xmlTree=function(e){return o(e).xml()},t.getTree=o,t.getTreeFromString=function(e){return o(r.parseInput(e))}},4036:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.annotate=t.activate=t.register=t.visitors=t.annotators=void 0;const r=n(241);t.annotators=new Map,t.visitors=new Map,t.register=function(e){const n=e.domain+":"+e.name;e instanceof r.SemanticAnnotator?t.annotators.set(n,e):t.visitors.set(n,e)},t.activate=function(e,n){const r=e+":"+n,i=t.annotators.get(r)||t.visitors.get(r);i&&(i.active=!0)},t.annotate=function(e){for(const n of t.annotators.values())n.active&&n.annotate(e);for(const n of t.visitors.values())n.active&&n.visit(e,Object.assign({},n.def))}},241:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticVisitor=t.SemanticAnnotator=void 0;t.SemanticAnnotator=class{constructor(e,t,n){this.domain=e,this.name=t,this.func=n,this.active=!1}annotate(e){e.childNodes.forEach(this.annotate.bind(this)),e.addAnnotation(this.domain,this.func(e))}};t.SemanticVisitor=class{constructor(e,t,n,r={}){this.domain=e,this.name=t,this.func=n,this.def=r,this.active=!1}visit(e,t){let n=this.func(e,t);e.addAnnotation(this.domain,n[0]);for(let t,r=0;t=e.childNodes[r];r++)n=this.visit(t,n[1]);return n}}},4020:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.lookupSecondary=t.isEmbellishedType=t.isMatchingFence=t.functionApplication=t.invisibleComma=t.invisiblePlus=t.invisibleTimes=t.lookupMeaning=t.lookupRole=t.lookupType=t.equal=t.allLettersRegExp=void 0;const n=String.fromCodePoint(8291),r=["\uff0c","\ufe50",",",n],i=["\xaf","\u2012","\u2013","\u2014","\u2015","\ufe58","-","\u207b","\u208b","\u2212","\u2796","\ufe63","\uff0d","\u2010","\u2011","\u203e","_"],o=["~","\u0303","\u223c","\u02dc","\u223d","\u02f7","\u0334","\u0330"],s={"(":")","[":"]","{":"}","\u2045":"\u2046","\u2329":"\u232a","\u2768":"\u2769","\u276a":"\u276b","\u276c":"\u276d","\u276e":"\u276f","\u2770":"\u2771","\u2772":"\u2773","\u2774":"\u2775","\u27c5":"\u27c6","\u27e6":"\u27e7","\u27e8":"\u27e9","\u27ea":"\u27eb","\u27ec":"\u27ed","\u27ee":"\u27ef","\u2983":"\u2984","\u2985":"\u2986","\u2987":"\u2988","\u2989":"\u298a","\u298b":"\u298c","\u298d":"\u298e","\u298f":"\u2990","\u2991":"\u2992","\u2993":"\u2994","\u2995":"\u2996","\u2997":"\u2998","\u29d8":"\u29d9","\u29da":"\u29db","\u29fc":"\u29fd","\u2e22":"\u2e23","\u2e24":"\u2e25","\u2e26":"\u2e27","\u2e28":"\u2e29","\u3008":"\u3009","\u300a":"\u300b","\u300c":"\u300d","\u300e":"\u300f","\u3010":"\u3011","\u3014":"\u3015","\u3016":"\u3017","\u3018":"\u3019","\u301a":"\u301b","\u301d":"\u301e","\ufd3e":"\ufd3f","\ufe17":"\ufe18","\ufe59":"\ufe5a","\ufe5b":"\ufe5c","\ufe5d":"\ufe5e","\uff08":"\uff09","\uff3b":"\uff3d","\uff5b":"\uff5d","\uff5f":"\uff60","\uff62":"\uff63","\u2308":"\u2309","\u230a":"\u230b","\u230c":"\u230d","\u230e":"\u230f","\u231c":"\u231d","\u231e":"\u231f","\u239b":"\u239e","\u239c":"\u239f","\u239d":"\u23a0","\u23a1":"\u23a4","\u23a2":"\u23a5","\u23a3":"\u23a6","\u23a7":"\u23ab","\u23a8":"\u23ac","\u23a9":"\u23ad","\u23b0":"\u23b1","\u23b8":"\u23b9"},a={"\u23b4":"\u23b5","\u23dc":"\u23dd","\u23de":"\u23df","\u23e0":"\u23e1","\ufe35":"\ufe36","\ufe37":"\ufe38","\ufe39":"\ufe3a","\ufe3b":"\ufe3c","\ufe3d":"\ufe3e","\ufe3f":"\ufe40","\ufe41":"\ufe42","\ufe43":"\ufe44","\ufe47":"\ufe48"},c=Object.keys(s),l=Object.values(s);l.push("\u301f");const u=Object.keys(a),d=Object.values(a),h=["|","\xa6","\u2223","\u23d0","\u23b8","\u23b9","\u2758","\uff5c","\uffe4","\ufe31","\ufe32"],p=["\u2016","\u2225","\u2980","\u2af4"],f=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],m=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","\u0131","\u0237"],g=["\uff21","\uff22","\uff23","\uff24","\uff25","\uff26","\uff27","\uff28","\uff29","\uff2a","\uff2b","\uff2c","\uff2d","\uff2e","\uff2f","\uff30","\uff31","\uff32","\uff33","\uff34","\uff35","\uff36","\uff37","\uff38","\uff39","\uff3a"],S=["\uff41","\uff42","\uff43","\uff44","\uff45","\uff46","\uff47","\uff48","\uff49","\uff4a","\uff4b","\uff4c","\uff4d","\uff4e","\uff4f","\uff50","\uff51","\uff52","\uff53","\uff54","\uff55","\uff56","\uff57","\uff58","\uff59","\uff5a"],b=["\ud835\udc00","\ud835\udc01","\ud835\udc02","\ud835\udc03","\ud835\udc04","\ud835\udc05","\ud835\udc06","\ud835\udc07","\ud835\udc08","\ud835\udc09","\ud835\udc0a","\ud835\udc0b","\ud835\udc0c","\ud835\udc0d","\ud835\udc0e","\ud835\udc0f","\ud835\udc10","\ud835\udc11","\ud835\udc12","\ud835\udc13","\ud835\udc14","\ud835\udc15","\ud835\udc16","\ud835\udc17","\ud835\udc18","\ud835\udc19"],N=["\ud835\udc1a","\ud835\udc1b","\ud835\udc1c","\ud835\udc1d","\ud835\udc1e","\ud835\udc1f","\ud835\udc20","\ud835\udc21","\ud835\udc22","\ud835\udc23","\ud835\udc24","\ud835\udc25","\ud835\udc26","\ud835\udc27","\ud835\udc28","\ud835\udc29","\ud835\udc2a","\ud835\udc2b","\ud835\udc2c","\ud835\udc2d","\ud835\udc2e","\ud835\udc2f","\ud835\udc30","\ud835\udc31","\ud835\udc32","\ud835\udc33"],E=["\ud835\udc34","\ud835\udc35","\ud835\udc36","\ud835\udc37","\ud835\udc38","\ud835\udc39","\ud835\udc3a","\ud835\udc3b","\ud835\udc3c","\ud835\udc3d","\ud835\udc3e","\ud835\udc3f","\ud835\udc40","\ud835\udc41","\ud835\udc42","\ud835\udc43","\ud835\udc44","\ud835\udc45","\ud835\udc46","\ud835\udc47","\ud835\udc48","\ud835\udc49","\ud835\udc4a","\ud835\udc4b","\ud835\udc4c","\ud835\udc4d"],y=["\ud835\udc4e","\ud835\udc4f","\ud835\udc50","\ud835\udc51","\ud835\udc52","\ud835\udc53","\ud835\udc54","\u210e","\ud835\udc56","\ud835\udc57","\ud835\udc58","\ud835\udc59","\ud835\udc5a","\ud835\udc5b","\ud835\udc5c","\ud835\udc5d","\ud835\udc5e","\ud835\udc5f","\ud835\udc60","\ud835\udc61","\ud835\udc62","\ud835\udc63","\ud835\udc64","\ud835\udc65","\ud835\udc66","\ud835\udc67","\ud835\udea4","\ud835\udea5"],A=["\ud835\udc68","\ud835\udc69","\ud835\udc6a","\ud835\udc6b","\ud835\udc6c","\ud835\udc6d","\ud835\udc6e","\ud835\udc6f","\ud835\udc70","\ud835\udc71","\ud835\udc72","\ud835\udc73","\ud835\udc74","\ud835\udc75","\ud835\udc76","\ud835\udc77","\ud835\udc78","\ud835\udc79","\ud835\udc7a","\ud835\udc7b","\ud835\udc7c","\ud835\udc7d","\ud835\udc7e","\ud835\udc7f","\ud835\udc80","\ud835\udc81"],_=["\ud835\udc82","\ud835\udc83","\ud835\udc84","\ud835\udc85","\ud835\udc86","\ud835\udc87","\ud835\udc88","\ud835\udc89","\ud835\udc8a","\ud835\udc8b","\ud835\udc8c","\ud835\udc8d","\ud835\udc8e","\ud835\udc8f","\ud835\udc90","\ud835\udc91","\ud835\udc92","\ud835\udc93","\ud835\udc94","\ud835\udc95","\ud835\udc96","\ud835\udc97","\ud835\udc98","\ud835\udc99","\ud835\udc9a","\ud835\udc9b"],C=["\ud835\udc9c","\u212c","\ud835\udc9e","\ud835\udc9f","\u2130","\u2131","\ud835\udca2","\u210b","\u2110","\ud835\udca5","\ud835\udca6","\u2112","\u2133","\ud835\udca9","\ud835\udcaa","\ud835\udcab","\ud835\udcac","\u211b","\ud835\udcae","\ud835\udcaf","\ud835\udcb0","\ud835\udcb1","\ud835\udcb2","\ud835\udcb3","\ud835\udcb4","\ud835\udcb5","\u2118"],T=["\ud835\udcb6","\ud835\udcb7","\ud835\udcb8","\ud835\udcb9","\u212f","\ud835\udcbb","\u210a","\ud835\udcbd","\ud835\udcbe","\ud835\udcbf","\ud835\udcc0","\ud835\udcc1","\ud835\udcc2","\ud835\udcc3","\u2134","\ud835\udcc5","\ud835\udcc6","\ud835\udcc7","\ud835\udcc8","\ud835\udcc9","\ud835\udcca","\ud835\udccb","\ud835\udccc","\ud835\udccd","\ud835\udcce","\ud835\udccf","\u2113"],v=["\ud835\udcd0","\ud835\udcd1","\ud835\udcd2","\ud835\udcd3","\ud835\udcd4","\ud835\udcd5","\ud835\udcd6","\ud835\udcd7","\ud835\udcd8","\ud835\udcd9","\ud835\udcda","\ud835\udcdb","\ud835\udcdc","\ud835\udcdd","\ud835\udcde","\ud835\udcdf","\ud835\udce0","\ud835\udce1","\ud835\udce2","\ud835\udce3","\ud835\udce4","\ud835\udce5","\ud835\udce6","\ud835\udce7","\ud835\udce8","\ud835\udce9"],O=["\ud835\udcea","\ud835\udceb","\ud835\udcec","\ud835\udced","\ud835\udcee","\ud835\udcef","\ud835\udcf0","\ud835\udcf1","\ud835\udcf2","\ud835\udcf3","\ud835\udcf4","\ud835\udcf5","\ud835\udcf6","\ud835\udcf7","\ud835\udcf8","\ud835\udcf9","\ud835\udcfa","\ud835\udcfb","\ud835\udcfc","\ud835\udcfd","\ud835\udcfe","\ud835\udcff","\ud835\udd00","\ud835\udd01","\ud835\udd02","\ud835\udd03"],M=["\ud835\udd04","\ud835\udd05","\u212d","\ud835\udd07","\ud835\udd08","\ud835\udd09","\ud835\udd0a","\u210c","\u2111","\ud835\udd0d","\ud835\udd0e","\ud835\udd0f","\ud835\udd10","\ud835\udd11","\ud835\udd12","\ud835\udd13","\ud835\udd14","\u211c","\ud835\udd16","\ud835\udd17","\ud835\udd18","\ud835\udd19","\ud835\udd1a","\ud835\udd1b","\ud835\udd1c","\u2128"],I=["\ud835\udd1e","\ud835\udd1f","\ud835\udd20","\ud835\udd21","\ud835\udd22","\ud835\udd23","\ud835\udd24","\ud835\udd25","\ud835\udd26","\ud835\udd27","\ud835\udd28","\ud835\udd29","\ud835\udd2a","\ud835\udd2b","\ud835\udd2c","\ud835\udd2d","\ud835\udd2e","\ud835\udd2f","\ud835\udd30","\ud835\udd31","\ud835\udd32","\ud835\udd33","\ud835\udd34","\ud835\udd35","\ud835\udd36","\ud835\udd37"],L=["\ud835\udd38","\ud835\udd39","\u2102","\ud835\udd3b","\ud835\udd3c","\ud835\udd3d","\ud835\udd3e","\u210d","\ud835\udd40","\ud835\udd41","\ud835\udd42","\ud835\udd43","\ud835\udd44","\u2115","\ud835\udd46","\u2119","\u211a","\u211d","\ud835\udd4a","\ud835\udd4b","\ud835\udd4c","\ud835\udd4d","\ud835\udd4e","\ud835\udd4f","\ud835\udd50","\u2124"],R=["\ud835\udd52","\ud835\udd53","\ud835\udd54","\ud835\udd55","\ud835\udd56","\ud835\udd57","\ud835\udd58","\ud835\udd59","\ud835\udd5a","\ud835\udd5b","\ud835\udd5c","\ud835\udd5d","\ud835\udd5e","\ud835\udd5f","\ud835\udd60","\ud835\udd61","\ud835\udd62","\ud835\udd63","\ud835\udd64","\ud835\udd65","\ud835\udd66","\ud835\udd67","\ud835\udd68","\ud835\udd69","\ud835\udd6a","\ud835\udd6b"],x=["\ud835\udd6c","\ud835\udd6d","\ud835\udd6e","\ud835\udd6f","\ud835\udd70","\ud835\udd71","\ud835\udd72","\ud835\udd73","\ud835\udd74","\ud835\udd75","\ud835\udd76","\ud835\udd77","\ud835\udd78","\ud835\udd79","\ud835\udd7a","\ud835\udd7b","\ud835\udd7c","\ud835\udd7d","\ud835\udd7e","\ud835\udd7f","\ud835\udd80","\ud835\udd81","\ud835\udd82","\ud835\udd83","\ud835\udd84","\ud835\udd85"],P=["\ud835\udd86","\ud835\udd87","\ud835\udd88","\ud835\udd89","\ud835\udd8a","\ud835\udd8b","\ud835\udd8c","\ud835\udd8d","\ud835\udd8e","\ud835\udd8f","\ud835\udd90","\ud835\udd91","\ud835\udd92","\ud835\udd93","\ud835\udd94","\ud835\udd95","\ud835\udd96","\ud835\udd97","\ud835\udd98","\ud835\udd99","\ud835\udd9a","\ud835\udd9b","\ud835\udd9c","\ud835\udd9d","\ud835\udd9e","\ud835\udd9f"],F=["\ud835\udda0","\ud835\udda1","\ud835\udda2","\ud835\udda3","\ud835\udda4","\ud835\udda5","\ud835\udda6","\ud835\udda7","\ud835\udda8","\ud835\udda9","\ud835\uddaa","\ud835\uddab","\ud835\uddac","\ud835\uddad","\ud835\uddae","\ud835\uddaf","\ud835\uddb0","\ud835\uddb1","\ud835\uddb2","\ud835\uddb3","\ud835\uddb4","\ud835\uddb5","\ud835\uddb6","\ud835\uddb7","\ud835\uddb8","\ud835\uddb9"],D=["\ud835\uddba","\ud835\uddbb","\ud835\uddbc","\ud835\uddbd","\ud835\uddbe","\ud835\uddbf","\ud835\uddc0","\ud835\uddc1","\ud835\uddc2","\ud835\uddc3","\ud835\uddc4","\ud835\uddc5","\ud835\uddc6","\ud835\uddc7","\ud835\uddc8","\ud835\uddc9","\ud835\uddca","\ud835\uddcb","\ud835\uddcc","\ud835\uddcd","\ud835\uddce","\ud835\uddcf","\ud835\uddd0","\ud835\uddd1","\ud835\uddd2","\ud835\uddd3"],w=["\ud835\uddd4","\ud835\uddd5","\ud835\uddd6","\ud835\uddd7","\ud835\uddd8","\ud835\uddd9","\ud835\uddda","\ud835\udddb","\ud835\udddc","\ud835\udddd","\ud835\uddde","\ud835\udddf","\ud835\udde0","\ud835\udde1","\ud835\udde2","\ud835\udde3","\ud835\udde4","\ud835\udde5","\ud835\udde6","\ud835\udde7","\ud835\udde8","\ud835\udde9","\ud835\uddea","\ud835\uddeb","\ud835\uddec","\ud835\udded"],k=["\ud835\uddee","\ud835\uddef","\ud835\uddf0","\ud835\uddf1","\ud835\uddf2","\ud835\uddf3","\ud835\uddf4","\ud835\uddf5","\ud835\uddf6","\ud835\uddf7","\ud835\uddf8","\ud835\uddf9","\ud835\uddfa","\ud835\uddfb","\ud835\uddfc","\ud835\uddfd","\ud835\uddfe","\ud835\uddff","\ud835\ude00","\ud835\ude01","\ud835\ude02","\ud835\ude03","\ud835\ude04","\ud835\ude05","\ud835\ude06","\ud835\ude07"],U=["\ud835\ude08","\ud835\ude09","\ud835\ude0a","\ud835\ude0b","\ud835\ude0c","\ud835\ude0d","\ud835\ude0e","\ud835\ude0f","\ud835\ude10","\ud835\ude11","\ud835\ude12","\ud835\ude13","\ud835\ude14","\ud835\ude15","\ud835\ude16","\ud835\ude17","\ud835\ude18","\ud835\ude19","\ud835\ude1a","\ud835\ude1b","\ud835\ude1c","\ud835\ude1d","\ud835\ude1e","\ud835\ude1f","\ud835\ude20","\ud835\ude21"],B=["\ud835\ude22","\ud835\ude23","\ud835\ude24","\ud835\ude25","\ud835\ude26","\ud835\ude27","\ud835\ude28","\ud835\ude29","\ud835\ude2a","\ud835\ude2b","\ud835\ude2c","\ud835\ude2d","\ud835\ude2e","\ud835\ude2f","\ud835\ude30","\ud835\ude31","\ud835\ude32","\ud835\ude33","\ud835\ude34","\ud835\ude35","\ud835\ude36","\ud835\ude37","\ud835\ude38","\ud835\ude39","\ud835\ude3a","\ud835\ude3b"],j=["\ud835\ude3c","\ud835\ude3d","\ud835\ude3e","\ud835\ude3f","\ud835\ude40","\ud835\ude41","\ud835\ude42","\ud835\ude43","\ud835\ude44","\ud835\ude45","\ud835\ude46","\ud835\ude47","\ud835\ude48","\ud835\ude49","\ud835\ude4a","\ud835\ude4b","\ud835\ude4c","\ud835\ude4d","\ud835\ude4e","\ud835\ude4f","\ud835\ude50","\ud835\ude51","\ud835\ude52","\ud835\ude53","\ud835\ude54","\ud835\ude55"],G=["\ud835\ude56","\ud835\ude57","\ud835\ude58","\ud835\ude59","\ud835\ude5a","\ud835\ude5b","\ud835\ude5c","\ud835\ude5d","\ud835\ude5e","\ud835\ude5f","\ud835\ude60","\ud835\ude61","\ud835\ude62","\ud835\ude63","\ud835\ude64","\ud835\ude65","\ud835\ude66","\ud835\ude67","\ud835\ude68","\ud835\ude69","\ud835\ude6a","\ud835\ude6b","\ud835\ude6c","\ud835\ude6d","\ud835\ude6e","\ud835\ude6f"],V=["\ud835\ude70","\ud835\ude71","\ud835\ude72","\ud835\ude73","\ud835\ude74","\ud835\ude75","\ud835\ude76","\ud835\ude77","\ud835\ude78","\ud835\ude79","\ud835\ude7a","\ud835\ude7b","\ud835\ude7c","\ud835\ude7d","\ud835\ude7e","\ud835\ude7f","\ud835\ude80","\ud835\ude81","\ud835\ude82","\ud835\ude83","\ud835\ude84","\ud835\ude85","\ud835\ude86","\ud835\ude87","\ud835\ude88","\ud835\ude89"],$=["\ud835\ude8a","\ud835\ude8b","\ud835\ude8c","\ud835\ude8d","\ud835\ude8e","\ud835\ude8f","\ud835\ude90","\ud835\ude91","\ud835\ude92","\ud835\ude93","\ud835\ude94","\ud835\ude95","\ud835\ude96","\ud835\ude97","\ud835\ude98","\ud835\ude99","\ud835\ude9a","\ud835\ude9b","\ud835\ude9c","\ud835\ude9d","\ud835\ude9e","\ud835\ude9f","\ud835\udea0","\ud835\udea1","\ud835\udea2","\ud835\udea3"],H=["\u2145","\u2146","\u2147","\u2148","\u2149"],W=["\u0391","\u0392","\u0393","\u0394","\u0395","\u0396","\u0397","\u0398","\u0399","\u039a","\u039b","\u039c","\u039d","\u039e","\u039f","\u03a0","\u03a1","\u03a3","\u03a4","\u03a5","\u03a6","\u03a7","\u03a8","\u03a9"],X=["\u03b1","\u03b2","\u03b3","\u03b4","\u03b5","\u03b6","\u03b7","\u03b8","\u03b9","\u03ba","\u03bb","\u03bc","\u03bd","\u03be","\u03bf","\u03c0","\u03c1","\u03c2","\u03c3","\u03c4","\u03c5","\u03c6","\u03c7","\u03c8","\u03c9"],q=["\ud835\udea8","\ud835\udea9","\ud835\udeaa","\ud835\udeab","\ud835\udeac","\ud835\udead","\ud835\udeae","\ud835\udeaf","\ud835\udeb0","\ud835\udeb1","\ud835\udeb2","\ud835\udeb3","\ud835\udeb4","\ud835\udeb5","\ud835\udeb6","\ud835\udeb7","\ud835\udeb8","\ud835\udeba","\ud835\udebb","\ud835\udebc","\ud835\udebd","\ud835\udebe","\ud835\udebf","\ud835\udec0"],Y=["\ud835\udec2","\ud835\udec3","\ud835\udec4","\ud835\udec5","\ud835\udec6","\ud835\udec7","\ud835\udec8","\ud835\udec9","\ud835\udeca","\ud835\udecb","\ud835\udecc","\ud835\udecd","\ud835\udece","\ud835\udecf","\ud835\uded0","\ud835\uded1","\ud835\uded2","\ud835\uded3","\ud835\uded4","\ud835\uded5","\ud835\uded6","\ud835\uded7","\ud835\uded8","\ud835\uded9","\ud835\udeda"],K=["\ud835\udee2","\ud835\udee3","\ud835\udee4","\ud835\udee5","\ud835\udee6","\ud835\udee7","\ud835\udee8","\ud835\udee9","\ud835\udeea","\ud835\udeeb","\ud835\udeec","\ud835\udeed","\ud835\udeee","\ud835\udeef","\ud835\udef0","\ud835\udef1","\ud835\udef2","\ud835\udef4","\ud835\udef5","\ud835\udef6","\ud835\udef7","\ud835\udef8","\ud835\udef9","\ud835\udefa"],z=["\ud835\udefc","\ud835\udefd","\ud835\udefe","\ud835\udeff","\ud835\udf00","\ud835\udf01","\ud835\udf02","\ud835\udf03","\ud835\udf04","\ud835\udf05","\ud835\udf06","\ud835\udf07","\ud835\udf08","\ud835\udf09","\ud835\udf0a","\ud835\udf0b","\ud835\udf0c","\ud835\udf0d","\ud835\udf0e","\ud835\udf0f","\ud835\udf10","\ud835\udf11","\ud835\udf12","\ud835\udf13","\ud835\udf14"],J=["\ud835\udf1c","\ud835\udf1d","\ud835\udf1e","\ud835\udf1f","\ud835\udf20","\ud835\udf21","\ud835\udf22","\ud835\udf23","\ud835\udf24","\ud835\udf25","\ud835\udf26","\ud835\udf27","\ud835\udf28","\ud835\udf29","\ud835\udf2a","\ud835\udf2b","\ud835\udf2c","\ud835\udf2e","\ud835\udf2f","\ud835\udf30","\ud835\udf31","\ud835\udf32","\ud835\udf33","\ud835\udf34"],Q=["\ud835\udf36","\ud835\udf37","\ud835\udf38","\ud835\udf39","\ud835\udf3a","\ud835\udf3b","\ud835\udf3c","\ud835\udf3d","\ud835\udf3e","\ud835\udf3f","\ud835\udf40","\ud835\udf41","\ud835\udf42","\ud835\udf43","\ud835\udf44","\ud835\udf45","\ud835\udf46","\ud835\udf47","\ud835\udf48","\ud835\udf49","\ud835\udf4a","\ud835\udf4b","\ud835\udf4c","\ud835\udf4d","\ud835\udf4e"],Z=["\ud835\udf56","\ud835\udf57","\ud835\udf58","\ud835\udf59","\ud835\udf5a","\ud835\udf5b","\ud835\udf5c","\ud835\udf5d","\ud835\udf5e","\ud835\udf5f","\ud835\udf60","\ud835\udf61","\ud835\udf62","\ud835\udf63","\ud835\udf64","\ud835\udf65","\ud835\udf66","\ud835\udf68","\ud835\udf69","\ud835\udf6a","\ud835\udf6b","\ud835\udf6c","\ud835\udf6d","\ud835\udf6e"],ee=["\ud835\udf70","\ud835\udf71","\ud835\udf72","\ud835\udf73","\ud835\udf74","\ud835\udf75","\ud835\udf76","\ud835\udf77","\ud835\udf78","\ud835\udf79","\ud835\udf7a","\ud835\udf7b","\ud835\udf7c","\ud835\udf7d","\ud835\udf7e","\ud835\udf7f","\ud835\udf80","\ud835\udf81","\ud835\udf82","\ud835\udf83","\ud835\udf84","\ud835\udf85","\ud835\udf86","\ud835\udf87","\ud835\udf88"],te=["\ud835\udf90","\ud835\udf91","\ud835\udf92","\ud835\udf93","\ud835\udf94","\ud835\udf95","\ud835\udf96","\ud835\udf97","\ud835\udf98","\ud835\udf99","\ud835\udf9a","\ud835\udf9b","\ud835\udf9c","\ud835\udf9d","\ud835\udf9e","\ud835\udf9f","\ud835\udfa0","\ud835\udfa2","\ud835\udfa3","\ud835\udfa4","\ud835\udfa5","\ud835\udfa6","\ud835\udfa7","\ud835\udfa8"],ne=["\ud835\udfaa","\ud835\udfab","\ud835\udfac","\ud835\udfad","\ud835\udfae","\ud835\udfaf","\ud835\udfb0","\ud835\udfb1","\ud835\udfb2","\ud835\udfb3","\ud835\udfb4","\ud835\udfb5","\ud835\udfb6","\ud835\udfb7","\ud835\udfb8","\ud835\udfb9","\ud835\udfba","\ud835\udfbb","\ud835\udfbc","\ud835\udfbd","\ud835\udfbe","\ud835\udfbf","\ud835\udfc0","\ud835\udfc1","\ud835\udfc2"],re=["\u213c","\u213d","\u213e","\u213f"],ie=["\u03d0","\u03d1","\u03d5","\u03d6","\u03d7","\u03f0","\u03f1","\u03f5","\u03f6","\u03f4"],oe=["\ud835\udedc","\ud835\udedd","\ud835\udede","\ud835\udedf","\ud835\udee0","\ud835\udee1"],se=["\ud835\udf16","\ud835\udf17","\ud835\udf18","\ud835\udf19","\ud835\udf1a","\ud835\udf1b"],ae=["\ud835\udf8a","\ud835\udf8b","\ud835\udf8c","\ud835\udf8d","\ud835\udf8e","\ud835\udf8f"],ce=["\u2135","\u2136","\u2137","\u2138"],le=f.concat(m,g,S,b,N,E,A,_,y,C,T,v,O,M,I,L,R,x,P,F,D,w,k,U,B,j,G,V,$,H,W,X,q,Y,K,z,J,Q,Z,ee,re,ie,te,ne,oe,se,ae,ce);t.allLettersRegExp=new RegExp(le.join("|"));const ue=["+","\xb1","\u2213","\u2214","\u2227","\u2228","\u2229","\u222a","\u228c","\u228d","\u228e","\u2293","\u2294","\u229d","\u229e","\u22a4","\u22a5","\u22ba","\u22bb","\u22bc","\u22c4","\u22ce","\u22cf","\u22d2","\u22d3","\u2a5e","\u2295","\u22d4"],de=String.fromCodePoint(8292);ue.push(de);const he=["\u2020","\u2021","\u2210","\u2217","\u2218","\u2219","\u2240","\u229a","\u229b","\u22a0","\u22a1","\u22c5","\u22c6","\u22c7","\u22c8","\u22c9","\u22ca","\u22cb","\u22cc","\u25cb","\xb7","*","\u2297","\u2299"],pe=String.fromCodePoint(8290);he.push(pe);const fe=String.fromCodePoint(8289),me=["\xbc","\xbd","\xbe","\u2150","\u2151","\u2152","\u2153","\u2154","\u2155","\u2156","\u2157","\u2158","\u2159","\u215a","\u215b","\u215c","\u215d","\u215e","\u215f","\u2189"],ge=["\xb2","\xb3","\xb9","\u2070","\u2074","\u2075","\u2076","\u2077","\u2078","\u2079"].concat(["\u2080","\u2081","\u2082","\u2083","\u2084","\u2085","\u2086","\u2087","\u2088","\u2089"],["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u246f","\u2470","\u2471","\u2472","\u2473","\u24ea","\u24eb","\u24ec","\u24ed","\u24ee","\u24ef","\u24f0","\u24f1","\u24f2","\u24f3","\u24f4","\u24f5","\u24f6","\u24f7","\u24f8","\u24f9","\u24fa","\u24fb","\u24fc","\u24fd","\u24fe","\u24ff","\u2776","\u2777","\u2778","\u2779","\u277a","\u277b","\u277c","\u277d","\u277e","\u277f","\u2780","\u2781","\u2782","\u2783","\u2784","\u2785","\u2786","\u2787","\u2788","\u2789","\u278a","\u278b","\u278c","\u278d","\u278e","\u278f","\u2790","\u2791","\u2792","\u2793","\u3248","\u3249","\u324a","\u324b","\u324c","\u324d","\u324e","\u324f","\u3251","\u3252","\u3253","\u3254","\u3255","\u3256","\u3257","\u3258","\u3259","\u325a","\u325b","\u325c","\u325d","\u325e","\u325f","\u32b1","\u32b2","\u32b3","\u32b4","\u32b5","\u32b6","\u32b7","\u32b8","\u32b9","\u32ba","\u32bb","\u32bc","\u32bd","\u32be","\u32bf"],["\u2474","\u2475","\u2476","\u2477","\u2478","\u2479","\u247a","\u247b","\u247c","\u247d","\u247e","\u247f","\u2480","\u2481","\u2482","\u2483","\u2484","\u2485","\u2486","\u2487"],["\u2488","\u2489","\u248a","\u248b","\u248c","\u248d","\u248e","\u248f","\u2490","\u2491","\u2492","\u2493","\u2494","\u2495","\u2496","\u2497","\u2498","\u2499","\u249a","\u249b","\ud83c\udd00","\ud83c\udd01","\ud83c\udd02","\ud83c\udd03","\ud83c\udd04","\ud83c\udd05","\ud83c\udd06","\ud83c\udd07","\ud83c\udd08","\ud83c\udd09","\ud83c\udd0a"]),Se=["cos","cot","csc","sec","sin","tan","arccos","arccot","arccsc","arcsec","arcsin","arctan","arc cos","arc cot","arc csc","arc sec","arc sin","arc tan"].concat(["cosh","coth","csch","sech","sinh","tanh","arcosh","arcoth","arcsch","arsech","arsinh","artanh","arccosh","arccoth","arccsch","arcsech","arcsinh","arctanh"],["deg","det","dim","hom","ker","Tr","tr"],["log","ln","lg","exp","expt","gcd","gcd","arg","im","re","Pr"]),be=[{set:["!",'"',"#","%","&",";","?","@","\\","\xa1","\xa7","\xb6","\xbf","\u2017","\u2020","\u2021","\u2022","\u2023","\u2024","\u2025","\u2027","\u2030","\u2031","\u2038","\u203b","\u203c","\u203d","\u203e","\u2041","\u2042","\u2043","\u2047","\u2048","\u2049","\u204b","\u204c","\u204d","\u204e","\u204f","\u2050","\u2051","\u2053","\u2055","\u2056","\u2058","\u2059","\u205a","\u205b","\u205c","\u205d","\u205e","\ufe10","\ufe14","\ufe15","\ufe16","\ufe30","\ufe45","\ufe46","\ufe49","\ufe4a","\ufe4b","\ufe4c","\ufe54","\ufe56","\ufe57","\ufe5f","\ufe60","\ufe61","\ufe68","\ufe6a","\ufe6b","\uff01","\uff02","\uff03","\uff05","\uff06","\uff07","\uff0a","\uff0f","\uff1b","\uff1f","\uff20","\uff3c"],type:"punctuation",role:"unknown"},{set:["\ufe13",":","\uff1a","\ufe55"],type:"punctuation",role:"colon"},{set:r,type:"punctuation",role:"comma"},{set:["\u2026","\u22ee","\u22ef","\u22f0","\u22f1","\ufe19"],type:"punctuation",role:"ellipsis"},{set:[".","\ufe52","\uff0e"],type:"punctuation",role:"fullstop"},{set:i,type:"operator",role:"dash"},{set:o,type:"operator",role:"tilde"},{set:["'","\u2032","\u2033","\u2034","\u2035","\u2036","\u2037","\u2057","\u02b9","\u02ba"],type:"punctuation",role:"prime"},{set:["\xb0"],type:"punctuation",role:"degree"},{set:c,type:"fence",role:"open"},{set:l,type:"fence",role:"close"},{set:u,type:"fence",role:"top"},{set:d,type:"fence",role:"bottom"},{set:h,type:"fence",role:"neutral"},{set:p,type:"fence",role:"metric"},{set:m,type:"identifier",role:"latinletter",font:"normal"},{set:f,type:"identifier",role:"latinletter",font:"normal"},{set:S,type:"identifier",role:"latinletter",font:"normal"},{set:g,type:"identifier",role:"latinletter",font:"normal"},{set:N,type:"identifier",role:"latinletter",font:"bold"},{set:b,type:"identifier",role:"latinletter",font:"bold"},{set:y,type:"identifier",role:"latinletter",font:"italic"},{set:E,type:"identifier",role:"latinletter",font:"italic"},{set:_,type:"identifier",role:"latinletter",font:"bold-italic"},{set:A,type:"identifier",role:"latinletter",font:"bold-italic"},{set:T,type:"identifier",role:"latinletter",font:"script"},{set:C,type:"identifier",role:"latinletter",font:"script"},{set:O,type:"identifier",role:"latinletter",font:"bold-script"},{set:v,type:"identifier",role:"latinletter",font:"bold-script"},{set:I,type:"identifier",role:"latinletter",font:"fraktur"},{set:M,type:"identifier",role:"latinletter",font:"fraktur"},{set:R,type:"identifier",role:"latinletter",font:"double-struck"},{set:L,type:"identifier",role:"latinletter",font:"double-struck"},{set:P,type:"identifier",role:"latinletter",font:"bold-fraktur"},{set:x,type:"identifier",role:"latinletter",font:"bold-fraktur"},{set:D,type:"identifier",role:"latinletter",font:"sans-serif"},{set:F,type:"identifier",role:"latinletter",font:"sans-serif"},{set:k,type:"identifier",role:"latinletter",font:"sans-serif-bold"},{set:w,type:"identifier",role:"latinletter",font:"sans-serif-bold"},{set:B,type:"identifier",role:"latinletter",font:"sans-serif-italic"},{set:U,type:"identifier",role:"latinletter",font:"sans-serif-italic"},{set:G,type:"identifier",role:"latinletter",font:"sans-serif-bold-italic"},{set:j,type:"identifier",role:"latinletter",font:"sans-serif-bold-italic"},{set:$,type:"identifier",role:"latinletter",font:"monospace"},{set:V,type:"identifier",role:"latinletter",font:"monospace"},{set:H,type:"identifier",role:"latinletter",font:"double-struck-italic"},{set:X,type:"identifier",role:"greekletter",font:"normal"},{set:W,type:"identifier",role:"greekletter",font:"normal"},{set:Y,type:"identifier",role:"greekletter",font:"bold"},{set:q,type:"identifier",role:"greekletter",font:"bold"},{set:z,type:"identifier",role:"greekletter",font:"italic"},{set:K,type:"identifier",role:"greekletter",font:"italic"},{set:Q,type:"identifier",role:"greekletter",font:"bold-italic"},{set:J,type:"identifier",role:"greekletter",font:"bold-italic"},{set:ee,type:"identifier",role:"greekletter",font:"sans-serif-bold"},{set:Z,type:"identifier",role:"greekletter",font:"sans-serif-bold"},{set:te,type:"identifier",role:"greekletter",font:"sans-serif-bold-italic"},{set:ne,type:"identifier",role:"greekletter",font:"sans-serif-bold-italic"},{set:re,type:"identifier",role:"greekletter",font:"double-struck"},{set:ie,type:"identifier",role:"greekletter",font:"normal"},{set:oe,type:"identifier",role:"greekletter",font:"bold"},{set:se,type:"identifier",role:"greekletter",font:"italic"},{set:ae,type:"identifier",role:"greekletter",font:"sans-serif-bold"},{set:ce,type:"identifier",role:"otherletter",font:"normal"},{set:["0","1","2","3","4","5","6","7","8","9"],type:"number",role:"integer",font:"normal"},{set:["\uff10","\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19"],type:"number",role:"integer",font:"normal"},{set:["\ud835\udfce","\ud835\udfcf","\ud835\udfd0","\ud835\udfd1","\ud835\udfd2","\ud835\udfd3","\ud835\udfd4","\ud835\udfd5","\ud835\udfd6","\ud835\udfd7"],type:"number",role:"integer",font:"bold"},{set:["\ud835\udfd8","\ud835\udfd9","\ud835\udfda","\ud835\udfdb","\ud835\udfdc","\ud835\udfdd","\ud835\udfde","\ud835\udfdf","\ud835\udfe0","\ud835\udfe1"],type:"number",role:"integer",font:"double-struck"},{set:["\ud835\udfe2","\ud835\udfe3","\ud835\udfe4","\ud835\udfe5","\ud835\udfe6","\ud835\udfe7","\ud835\udfe8","\ud835\udfe9","\ud835\udfea","\ud835\udfeb"],type:"number",role:"integer",font:"sans-serif"},{set:["\ud835\udfec","\ud835\udfed","\ud835\udfee","\ud835\udfef","\ud835\udff0","\ud835\udff1","\ud835\udff2","\ud835\udff3","\ud835\udff4","\ud835\udff5"],type:"number",role:"integer",font:"sans-serif-bold"},{set:["\ud835\udff6","\ud835\udff7","\ud835\udff8","\ud835\udff9","\ud835\udffa","\ud835\udffb","\ud835\udffc","\ud835\udffd","\ud835\udffe","\ud835\udfff"],type:"number",role:"integer",font:"monospace"},{set:me,type:"number",role:"float"},{set:ge,type:"number",role:"othernumber"},{set:ue,type:"operator",role:"addition"},{set:he,type:"operator",role:"multiplication"},{set:["\xaf","-","\u2052","\u207b","\u208b","\u2212","\u2216","\u2238","\u2242","\u2296","\u229f","\u2796","\u2a29","\u2a2a","\u2a2b","\u2a2c","\u2a3a","\u2a41","\ufe63","\uff0d","\u2010","\u2011"],type:"operator",role:"subtraction"},{set:["/","\xf7","\u2044","\u2215","\u2298","\u27cc","\u29bc","\u2a38"],type:"operator",role:"division"},{set:["\u2200","\u2203","\u2206","\u2207","\u2202","\u2201","\u2204"],type:"operator",role:"prefix operator"},{set:["\ud835\udec1","\ud835\udedb","\ud835\udfca","\ud835\udfcb"],type:"operator",role:"prefix operator",font:"bold"},{set:["\ud835\udefb","\ud835\udf15"],type:"operator",role:"prefix operator",font:"italic"},{set:["\ud835\udf6f","\ud835\udf89"],type:"operator",role:"prefix operator",font:"sans-serif-bold"},{set:["=","~","\u207c","\u208c","\u223c","\u223d","\u2243","\u2245","\u2248","\u224a","\u224b","\u224c","\u224d","\u224e","\u2251","\u2252","\u2253","\u2254","\u2255","\u2256","\u2257","\u2258","\u2259","\u225a","\u225b","\u225c","\u225d","\u225e","\u225f","\u2261","\u2263","\u29e4","\u2a66","\u2a6e","\u2a6f","\u2a70","\u2a71","\u2a72","\u2a73","\u2a74","\u2a75","\u2a76","\u2a77","\u2a78","\u22d5","\u2a6d","\u2a6a","\u2a6b","\u2a6c","\ufe66","\uff1d","\u2a6c","\u229c","\u2237"],type:"relation",role:"equality"},{set:["<",">","\u2241","\u2242","\u2244","\u2246","\u2247","\u2249","\u224f","\u2250","\u2260","\u2262","\u2264","\u2265","\u2266","\u2267","\u2268","\u2269","\u226a","\u226b","\u226c","\u226d","\u226e","\u226f","\u2270","\u2271","\u2272","\u2273","\u2274","\u2275","\u2276","\u2277","\u2278","\u2279","\u227a","\u227b","\u227c","\u227d","\u227e","\u227f","\u2280","\u2281","\u22d6","\u22d7","\u22d8","\u22d9","\u22da","\u22db","\u22dc","\u22dd","\u22de","\u22df","\u22e0","\u22e1","\u22e6","\u22e7","\u22e8","\u22e9","\u2a79","\u2a7a","\u2a7b","\u2a7c","\u2a7d","\u2a7e","\u2a7f","\u2a80","\u2a81","\u2a82","\u2a83","\u2a84","\u2a85","\u2a86","\u2a87","\u2a88","\u2a89","\u2a8a","\u2a8b","\u2a8c","\u2a8d","\u2a8e","\u2a8f","\u2a90","\u2a91","\u2a92","\u2a93","\u2a94","\u2a95","\u2a96","\u2a97","\u2a98","\u2a99","\u2a9a","\u2a9b","\u2a9c","\u2a9d","\u2a9e","\u2a9f","\u2aa0","\u2aa1","\u2aa2","\u2aa3","\u2aa4","\u2aa5","\u2aa6","\u2aa7","\u2aa8","\u2aa9","\u2aaa","\u2aab","\u2aac","\u2aad","\u2aae","\u2aaf","\u2ab0","\u2ab1","\u2ab2","\u2ab3","\u2ab4","\u2ab5","\u2ab6","\u2ab7","\u2ab8","\u2ab9","\u2aba","\u2abb","\u2abc","\u2af7","\u2af8","\u2af9","\u2afa","\u29c0","\u29c1","\ufe64","\ufe65","\uff1c","\uff1e"],type:"relation",role:"inequality"},{set:["\u22e2","\u22e3","\u22e4","\u22e5","\u2282","\u2283","\u2284","\u2285","\u2286","\u2287","\u2288","\u2289","\u228a","\u228b","\u228f","\u2290","\u2291","\u2292","\u2abd","\u2abe","\u2abf","\u2ac0","\u2ac1","\u2ac2","\u2ac3","\u2ac4","\u2ac5","\u2ac6","\u2ac7","\u2ac8","\u2ac9","\u2aca","\u2acb","\u2acc","\u2acd","\u2ace","\u2acf","\u2ad0","\u2ad1","\u2ad2","\u2ad3","\u2ad4","\u2ad5","\u2ad6","\u2ad7","\u2ad8","\u22d0","\u22d1","\u22ea","\u22eb","\u22ec","\u22ed","\u22b2","\u22b3","\u22b4","\u22b5"],type:"relation",role:"set"},{set:["\u22a2","\u22a3","\u22a6","\u22a7","\u22a8","\u22a9","\u22aa","\u22ab","\u22ac","\u22ad","\u22ae","\u22af","\u2ade","\u2adf","\u2ae0","\u2ae1","\u2ae2","\u2ae3","\u2ae4","\u2ae5","\u2ae6","\u2ae7","\u2ae8","\u2ae9","\u2aea","\u2aeb","\u2aec","\u2aed"],type:"relation",role:"unknown"},{set:["\u2190","\u2191","\u2192","\u2193","\u2194","\u2195","\u2196","\u2197","\u2198","\u2199","\u219a","\u219b","\u219c","\u219d","\u219e","\u219f","\u21a0","\u21a1","\u21a2","\u21a3","\u21a4","\u21a5","\u21a6","\u21a7","\u21a8","\u21a9","\u21aa","\u21ab","\u21ac","\u21ad","\u21ae","\u21af","\u21b0","\u21b1","\u21b2","\u21b3","\u21b4","\u21b5","\u21b6","\u21b7","\u21b8","\u21b9","\u21ba","\u21bb","\u21c4","\u21c5","\u21c6","\u21c7","\u21c8","\u21c9","\u21ca","\u21cd","\u21ce","\u21cf","\u21d0","\u21d1","\u21d2","\u21d3","\u21d4","\u21d5","\u21d6","\u21d7","\u21d8","\u21d9","\u21da","\u21db","\u21dc","\u21dd","\u21de","\u21df","\u21e0","\u21e1","\u21e2","\u21e3","\u21e4","\u21e5","\u21e6","\u21e7","\u21e8","\u21e9","\u21ea","\u21eb","\u21ec","\u21ed","\u21ee","\u21ef","\u21f0","\u21f1","\u21f2","\u21f3","\u21f4","\u21f5","\u21f6","\u21f7","\u21f8","\u21f9","\u21fa","\u21fb","\u21fc","\u21fd","\u21fe","\u21ff","\u2301","\u2303","\u2304","\u2324","\u238b","\u2794","\u2798","\u2799","\u279a","\u279b","\u279c","\u279d","\u279e","\u279f","\u27a0","\u27a1","\u27a2","\u27a3","\u27a4","\u27a5","\u27a6","\u27a7","\u27a8","\u27a9","\u27aa","\u27ab","\u27ac","\u27ad","\u27ae","\u27af","\u27b1","\u27b2","\u27b3","\u27b4","\u27b5","\u27b6","\u27b7","\u27b8","\u27b9","\u27ba","\u27bb","\u27bc","\u27bd","\u27be","\u27f0","\u27f1","\u27f2","\u27f3","\u27f4","\u27f5","\u27f6","\u27f7","\u27f8","\u27f9","\u27fa","\u27fb","\u27fc","\u27fd","\u27fe","\u27ff","\u2900","\u2901","\u2902","\u2903","\u2904","\u2905","\u2906","\u2907","\u2908","\u2909","\u290a","\u290b","\u290c","\u290d","\u290e","\u290f","\u2910","\u2911","\u2912","\u2913","\u2914","\u2915","\u2916","\u2917","\u2918","\u2919","\u291a","\u291b","\u291c","\u291d","\u291e","\u291f","\u2920","\u2921","\u2922","\u2923","\u2924","\u2925","\u2926","\u2927","\u2928","\u2929","\u292a","\u292d","\u292e","\u292f","\u2930","\u2931","\u2932","\u2933","\u2934","\u2935","\u2936","\u2937","\u2938","\u2939","\u293a","\u293b","\u293c","\u293d","\u293e","\u293f","\u2940","\u2941","\u2942","\u2943","\u2944","\u2945","\u2946","\u2947","\u2948","\u2949","\u2970","\u2971","\u2972","\u2973","\u2974","\u2975","\u2976","\u2977","\u2978","\u2979","\u297a","\u297b","\u29b3","\u29b4","\u29bd","\u29ea","\u29ec","\u29ed","\u2a17","\u2b00","\u2b01","\u2b02","\u2b03","\u2b04","\u2b05","\u2b06","\u2b07","\u2b08","\u2b09","\u2b0a","\u2b0b","\u2b0c","\u2b0d","\u2b0e","\u2b0f","\u2b10","\u2b11","\u2b30","\u2b31","\u2b32","\u2b33","\u2b34","\u2b35","\u2b36","\u2b37","\u2b38","\u2b39","\u2b3a","\u2b3b","\u2b3c","\u2b3d","\u2b3e","\u2b3f","\u2b40","\u2b41","\u2b42","\u2b43","\u2b44","\u2b45","\u2b46","\u2b47","\u2b48","\u2b49","\u2b4a","\u2b4b","\u2b4c","\uffe9","\uffea","\uffeb","\uffec","\u21bc","\u21bd","\u21be","\u21bf","\u21c0","\u21c1","\u21c2","\u21c3","\u21cb","\u21cc","\u294a","\u294b","\u294c","\u294d","\u294e","\u294f","\u2950","\u2951","\u2952","\u2953","\u2954","\u2955","\u2956","\u2957","\u2958","\u2959","\u295a","\u295b","\u295c","\u295d","\u295e","\u295f","\u2960","\u2961","\u2962","\u2963","\u2964","\u2965","\u2966","\u2967","\u2968","\u2969","\u296a","\u296b","\u296c","\u296d","\u296e","\u296f","\u297c","\u297d","\u297e","\u297f"],type:"relation",role:"arrow"},{set:["\u2208","\u220a","\u22f2","\u22f3","\u22f4","\u22f5","\u22f6","\u22f7","\u22f8","\u22f9","\u22ff"],type:"operator",role:"element"},{set:["\u2209"],type:"operator",role:"nonelement"},{set:["\u220b","\u220d","\u22fa","\u22fb","\u22fc","\u22fd","\u22fe"],type:"operator",role:"reelement"},{set:["\u220c"],type:"operator",role:"renonelement"},{set:["\u2140","\u220f","\u2210","\u2211","\u22c0","\u22c1","\u22c2","\u22c3","\u2a00","\u2a01","\u2a02","\u2a03","\u2a04","\u2a05","\u2a06","\u2a07","\u2a08","\u2a09","\u2a0a","\u2a0b","\u2afc","\u2aff"],type:"largeop",role:"sum"},{set:["\u222b","\u222c","\u222d","\u222e","\u222f","\u2230","\u2231","\u2232","\u2233","\u2a0c","\u2a0d","\u2a0e","\u2a0f","\u2a10","\u2a11","\u2a12","\u2a13","\u2a14","\u2a15","\u2a16","\u2a17","\u2a18","\u2a19","\u2a1a","\u2a1b","\u2a1c"],type:"largeop",role:"integral"},{set:["\u221f","\u2220","\u2221","\u2222","\u22be","\u22bf","\u25b3","\u25b7","\u25bd","\u25c1"],type:"operator",role:"geometry"},{set:["inf","lim","liminf","limsup","max","min","sup","injlim","projlim","inj lim","proj lim"],type:"function",role:"limit function"},{set:Se,type:"function",role:"prefix function"},{set:["mod","rem"],type:"operator",role:"prefix function"}],Ne=function(){const e={};for(let t,n=0;t=be[n];n++)t.set.forEach((function(n){e[n]={role:t.role||"unknown",type:t.type||"unknown",font:t.font||"unknown"}}));return e}();t.equal=function(e,t){return e.type===t.type&&e.role===t.role&&e.font===t.font},t.lookupType=function(e){var t;return(null===(t=Ne[e])||void 0===t?void 0:t.type)||"unknown"},t.lookupRole=function(e){var t;return(null===(t=Ne[e])||void 0===t?void 0:t.role)||"unknown"},t.lookupMeaning=function(e){return Ne[e]||{role:"unknown",type:"unknown",font:"unknown"}},t.invisibleTimes=function(){return pe},t.invisiblePlus=function(){return de},t.invisibleComma=function(){return n},t.functionApplication=function(){return fe},t.isMatchingFence=function(e,t){return-1!==h.indexOf(e)||-1!==p.indexOf(e)?e===t:s[e]===t||a[e]===t},t.isEmbellishedType=function(e){return"operator"===e||"relation"===e||"fence"===e||"punctuation"===e};const Ee=new Map;function ye(e,t){return`${e} ${t}`}function Ae(e,t,n=""){for(const r of t)Ee.set(ye(e,r),n||e)}Ae("d",["d","\u2146","\uff44","\ud835\udc1d","\ud835\udc51","\ud835\udcb9","\ud835\udced","\ud835\udd21","\ud835\udd55","\ud835\udd89","\ud835\uddbd","\ud835\uddf1","\ud835\ude25","\ud835\ude8d"]),Ae("bar",i),Ae("tilde",o),t.lookupSecondary=function(e,t){return Ee.get(ye(e,t))}},7405:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticMeaningCollator=t.SemanticNodeCollator=t.SemanticDefault=void 0;const r=n(4020),i=n(178);class o{constructor(){this.map={}}static key(e,t){return t?e+":"+t:e}add(e,t){this.map[o.key(e,t.font)]=t}addNode(e){this.add(e.textContent,e.meaning())}retrieve(e,t){return this.map[o.key(e,t)]}retrieveNode(e){return this.retrieve(e.textContent,e.font)}size(){return Object.keys(this.map).length}}t.SemanticDefault=o;class s{constructor(){this.map={}}add(e,t){const n=this.map[e];n?n.push(t):this.map[e]=[t]}retrieve(e,t){return this.map[o.key(e,t)]}retrieveNode(e){return this.retrieve(e.textContent,e.font)}copy(){const e=this.copyCollator();for(const t in this.map)e.map[t]=this.map[t];return e}minimize(){for(const e in this.map)1===this.map[e].length&&delete this.map[e]}minimalCollator(){const e=this.copy();for(const t in e.map)1===e.map[t].length&&delete e.map[t];return e}isMultiValued(){for(const e in this.map)if(this.map[e].length>1)return!0;return!1}isEmpty(){return!Object.keys(this.map).length}}class a extends s{copyCollator(){return new a}add(e,t){const n=o.key(e,t.font);super.add(n,t)}addNode(e){this.add(e.textContent,e)}toString(){const e=[];for(const t in this.map){const n=Array(t.length+3).join(" "),r=this.map[t],i=[];for(let e,t=0;e=r[t];t++)i.push(e.toString());e.push(t+": "+i.join("\n"+n))}return e.join("\n")}collateMeaning(){const e=new c;for(const t in this.map)e.map[t]=this.map[t].map((function(e){return e.meaning()}));return e}}t.SemanticNodeCollator=a;class c extends s{copyCollator(){return new c}add(e,t){const n=this.retrieve(e,t.font);if(!n||!n.find((function(e){return r.equal(e,t)}))){const n=o.key(e,t.font);super.add(n,t)}}addNode(e){this.add(e.textContent,e.meaning())}toString(){const e=[];for(const t in this.map){const n=Array(t.length+3).join(" "),r=this.map[t],i=[];for(let e,t=0;e=r[t];t++)i.push("{type: "+e.type+", role: "+e.role+", font: "+e.font+"}");e.push(t+": "+i.join("\n"+n))}return e.join("\n")}reduce(){for(const e in this.map)1!==this.map[e].length&&(this.map[e]=(0,i.reduce)(this.map[e]))}default(){const e=new o;for(const t in this.map)1===this.map[t].length&&(e.map[t]=this.map[t][0]);return e}newDefault(){const e=this.default();this.reduce();const t=this.default();return e.size()!==t.size()?t:null}}t.SemanticMeaningCollator=c},5958:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticMultiHeuristic=t.SemanticTreeHeuristic=t.SemanticAbstractHeuristic=void 0;class n{constructor(e,t,n=(e=>!1)){this.name=e,this.apply=t,this.applicable=n}}t.SemanticAbstractHeuristic=n;t.SemanticTreeHeuristic=class extends n{};t.SemanticMultiHeuristic=class extends n{}},2721:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.lookup=t.run=t.add=t.blacklist=t.flags=t.updateFactory=t.factory=void 0,t.factory=null,t.updateFactory=function(e){t.factory=e};const n=new Map;function r(e){return n.get(e)}t.flags={combine_juxtaposition:!0,convert_juxtaposition:!0,multioperator:!0},t.blacklist={},t.add=function(e){const r=e.name;n.set(r,e),t.flags[r]||(t.flags[r]=!1)},t.run=function(e,n,i){const o=r(e);return o&&!t.blacklist[e]&&(t.flags[e]||o.applicable(n))?o.apply(n):i?i(n):n},t.lookup=r},7103:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(1984),i=n(4886),o=n(4020),s=n(2721),a=n(5958),c=n(6161),l=n(7793),u=n(8901);function d(e,t,n){let r=null;if(!e.length)return r;const i=n[n.length-1],o=i&&i.length,s=t&&t.length,a=l.default.getInstance();if(o&&s){if("infixop"===t[0].type&&"implicit"===t[0].role)return r=e.pop(),i.push(a.postfixNode_(i.pop(),e)),r;r=e.shift();const n=a.prefixNode_(t.shift(),e);return t.unshift(n),r}return o?(i.push(a.postfixNode_(i.pop(),e)),r):(s&&t.unshift(a.prefixNode_(t.shift(),e)),r)}function h(e,t,n){if(!t.length)return e;const i=e.pop(),o=t.shift(),a=n.shift();if(c.isImplicitOp(o)){r.Debugger.getInstance().output("Juxta Heuristic Case 2");const s=(i?[i,o]:[o]).concat(a);return h(e.concat(s),t,n)}if(!i)return r.Debugger.getInstance().output("Juxta Heuristic Case 3"),h([o].concat(a),t,n);const l=a.shift();if(!l){r.Debugger.getInstance().output("Juxta Heuristic Case 9");const a=s.factory.makeBranchNode("infixop",[i,t.shift()],[o],o.textContent);return a.role="implicit",s.run("combine_juxtaposition",a),t.unshift(a),h(e,t,n)}if(c.isOperator(i)||c.isOperator(l))return r.Debugger.getInstance().output("Juxta Heuristic Case 4"),h(e.concat([i,o,l]).concat(a),t,n);let u=null;return c.isImplicitOp(i)&&c.isImplicitOp(l)?(r.Debugger.getInstance().output("Juxta Heuristic Case 5"),i.contentNodes.push(o),i.contentNodes=i.contentNodes.concat(l.contentNodes),i.childNodes.push(l),i.childNodes=i.childNodes.concat(l.childNodes),l.childNodes.forEach((e=>e.parent=i)),o.parent=i,i.addMathmlNodes(o.mathml),i.addMathmlNodes(l.mathml),u=i):c.isImplicitOp(i)?(r.Debugger.getInstance().output("Juxta Heuristic Case 6"),i.contentNodes.push(o),i.childNodes.push(l),l.parent=i,o.parent=i,i.addMathmlNodes(o.mathml),i.addMathmlNodes(l.mathml),u=i):c.isImplicitOp(l)?(r.Debugger.getInstance().output("Juxta Heuristic Case 7"),l.contentNodes.unshift(o),l.childNodes.unshift(i),i.parent=l,o.parent=l,l.addMathmlNodes(o.mathml),l.addMathmlNodes(i.mathml),u=l):(r.Debugger.getInstance().output("Juxta Heuristic Case 8"),u=s.factory.makeBranchNode("infixop",[i,l],[o],o.textContent),u.role="implicit"),e.push(u),h(e.concat(a),t,n)}s.add(new a.SemanticTreeHeuristic("combine_juxtaposition",(function(e){for(let t,n=e.childNodes.length-1;t=e.childNodes[n];n--)c.isImplicitOp(t)&&!t.nobreaking&&(e.childNodes.splice(n,1,...t.childNodes),e.contentNodes.splice(n,0,...t.contentNodes),t.childNodes.concat(t.contentNodes).forEach((function(t){t.parent=e})),e.addMathmlNodes(t.mathml));return e}))),s.add(new a.SemanticTreeHeuristic("propagateSimpleFunction",(e=>("infixop"!==e.type&&"fraction"!==e.type||!e.childNodes.every(c.isSimpleFunction)||(e.role="composed function"),e)),(e=>"clearspeak"===i.default.getInstance().domain))),s.add(new a.SemanticTreeHeuristic("simpleNamedFunction",(e=>("unit"!==e.role&&-1!==["f","g","h","F","G","H"].indexOf(e.textContent)&&(e.role="simple function"),e)),(e=>"clearspeak"===i.default.getInstance().domain))),s.add(new a.SemanticTreeHeuristic("propagateComposedFunction",(e=>("fenced"===e.type&&"composed function"===e.childNodes[0].role&&(e.role="composed function"),e)),(e=>"clearspeak"===i.default.getInstance().domain))),s.add(new a.SemanticTreeHeuristic("multioperator",(e=>{if("unknown"!==e.role||e.textContent.length<=1)return;const t=[...e.textContent].map(o.lookupMeaning).reduce((function(e,t){return e&&t.role&&"unknown"!==t.role&&t.role!==e?"unknown"===e?t.role:null:e}),"unknown");t&&(e.role=t)}))),s.add(new a.SemanticMultiHeuristic("convert_juxtaposition",(e=>{let t=u.partitionNodes(e,(function(e){return e.textContent===o.invisibleTimes()&&"operator"===e.type}));t=t.rel.length?function(e){const t=[],n=[];let r=e.comp.shift(),i=null,o=[];for(;e.comp.length;)if(o=[],r.length)i&&t.push(i),n.push(r),i=e.rel.shift(),r=e.comp.shift();else{for(i&&o.push(i);!r.length&&e.comp.length;)r=e.comp.shift(),o.push(e.rel.shift());i=d(o,r,n)}o.length||r.length?(t.push(i),n.push(r)):(o.push(i),d(o,r,n));return{rel:t,comp:n}}(t):t,e=t.comp[0];for(let n,r,i=1;n=t.comp[i],r=t.rel[i-1];i++)e.push(r),e=e.concat(n);return t=u.partitionNodes(e,(function(e){return e.textContent===o.invisibleTimes()&&("operator"===e.type||"infixop"===e.type)})),t.rel.length?h(t.comp.shift(),t.rel,t.comp):e}))),s.add(new a.SemanticTreeHeuristic("simple2prefix",(e=>(e.textContent.length>1&&!e.textContent[0].match(/[A-Z]/)&&(e.role="prefix function"),e)),(e=>"braille"===i.default.getInstance().modality&&"identifier"===e.type))),s.add(new a.SemanticTreeHeuristic("detect_cycle",(e=>{e.type="matrix",e.role="cycle";const t=e.childNodes[0];return t.type="row",t.role="cycle",t.textContent="",t.contentNodes=[],e}),(e=>"fenced"===e.type&&"infixop"===e.childNodes[0].type&&"implicit"===e.childNodes[0].role&&e.childNodes[0].childNodes.every((function(e){return"number"===e.type}))&&e.childNodes[0].contentNodes.every((function(e){return"space"===e.role})))))},8122:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticMathml=void 0;const r=n(6671),i=n(6098),o=n(6161),s=n(7793),a=n(8901);class c extends i.SemanticAbstractParser{constructor(){super("MathML"),this.parseMap_={SEMANTICS:this.semantics_.bind(this),MATH:this.rows_.bind(this),MROW:this.rows_.bind(this),MPADDED:this.rows_.bind(this),MSTYLE:this.rows_.bind(this),MFRAC:this.fraction_.bind(this),MSUB:this.limits_.bind(this),MSUP:this.limits_.bind(this),MSUBSUP:this.limits_.bind(this),MOVER:this.limits_.bind(this),MUNDER:this.limits_.bind(this),MUNDEROVER:this.limits_.bind(this),MROOT:this.root_.bind(this),MSQRT:this.sqrt_.bind(this),MTABLE:this.table_.bind(this),MLABELEDTR:this.tableLabeledRow_.bind(this),MTR:this.tableRow_.bind(this),MTD:this.tableCell_.bind(this),MS:this.text_.bind(this),MTEXT:this.text_.bind(this),MSPACE:this.space_.bind(this),"ANNOTATION-XML":this.text_.bind(this),MI:this.identifier_.bind(this),MN:this.number_.bind(this),MO:this.operator_.bind(this),MFENCED:this.fenced_.bind(this),MENCLOSE:this.enclosed_.bind(this),MMULTISCRIPTS:this.multiscripts_.bind(this),ANNOTATION:this.empty_.bind(this),NONE:this.empty_.bind(this),MACTION:this.action_.bind(this)};const e={type:"identifier",role:"numbersetletter",font:"double-struck"};["C","H","N","P","Q","R","Z","\u2102","\u210d","\u2115","\u2119","\u211a","\u211d","\u2124"].forEach((t=>this.getFactory().defaultMap.add(t,e)).bind(this))}static getAttribute_(e,t,n){if(!e.hasAttribute(t))return n;const r=e.getAttribute(t);return r.match(/^\s*$/)?null:r}parse(e){s.default.getInstance().setNodeFactory(this.getFactory());const t=r.toArray(e.childNodes),n=r.tagName(e),i=this.parseMap_[n],o=(i||this.dummy_.bind(this))(e,t);return a.addAttributes(o,e),-1!==["MATH","MROW","MPADDED","MSTYLE","SEMANTICS"].indexOf(n)||(o.mathml.unshift(e),o.mathmlTree=e),o}semantics_(e,t){return t.length?this.parse(t[0]):this.getFactory().makeEmptyNode()}rows_(e,t){const n=e.getAttribute("semantics");if(n&&n.match("bspr_"))return s.default.proof(e,n,this.parseList.bind(this));let r;return 1===(t=a.purgeNodes(t)).length?(r=this.parse(t[0]),"empty"!==r.type||r.mathmlTree||(r.mathmlTree=e)):r=s.default.getInstance().row(this.parseList(t)),r.mathml.unshift(e),r}fraction_(e,t){if(!t.length)return this.getFactory().makeEmptyNode();const n=this.parse(t[0]),r=t[1]?this.parse(t[1]):this.getFactory().makeEmptyNode();return s.default.getInstance().fractionLikeNode(n,r,e.getAttribute("linethickness"),"true"===e.getAttribute("bevelled"))}limits_(e,t){return s.default.getInstance().limitNode(r.tagName(e),this.parseList(t))}root_(e,t){return t[1]?this.getFactory().makeBranchNode("root",[this.parse(t[1]),this.parse(t[0])],[]):this.sqrt_(e,t)}sqrt_(e,t){const n=this.parseList(a.purgeNodes(t));return this.getFactory().makeBranchNode("sqrt",[s.default.getInstance().row(n)],[])}table_(e,t){const n=e.getAttribute("semantics");if(n&&n.match("bspr_"))return s.default.proof(e,n,this.parseList.bind(this));const r=this.getFactory().makeBranchNode("table",this.parseList(t),[]);return r.mathmlTree=e,s.default.tableToMultiline(r),r}tableRow_(e,t){const n=this.getFactory().makeBranchNode("row",this.parseList(t),[]);return n.role="table",n}tableLabeledRow_(e,t){if(!t.length)return this.tableRow_(e,t);const n=this.parse(t[0]);n.role="label";const r=this.getFactory().makeBranchNode("row",this.parseList(t.slice(1)),[n]);return r.role="table",r}tableCell_(e,t){const n=this.parseList(a.purgeNodes(t));let r;r=n.length?1===n.length&&o.isType(n[0],"empty")?n:[s.default.getInstance().row(n)]:[];const i=this.getFactory().makeBranchNode("cell",r,[]);return i.role="table",i}space_(e,t){const n=e.getAttribute("width"),i=n&&n.match(/[a-z]*$/);if(!i)return this.empty_(e,t);const o=i[0],a=parseFloat(n.slice(0,i.index)),c={cm:.4,pc:.5,em:.5,ex:1,in:.15,pt:5,mm:5}[o];if(!c||isNaN(a)||a<c)return this.empty_(e,t);const l=this.getFactory().makeUnprocessed(e);return s.default.getInstance().text(l,r.tagName(e))}text_(e,t){const n=this.leaf_(e,t);return e.textContent?(n.updateContent(e.textContent,!0),s.default.getInstance().text(n,r.tagName(e))):n}identifier_(e,t){const n=this.leaf_(e,t);return s.default.getInstance().identifierNode(n,s.default.getInstance().font(e.getAttribute("mathvariant")),e.getAttribute("class"))}number_(e,t){const n=this.leaf_(e,t);return s.default.number(n),n}operator_(e,t){const n=this.leaf_(e,t);return s.default.getInstance().operatorNode(n),n}fenced_(e,t){const n=this.parseList(a.purgeNodes(t)),r=c.getAttribute_(e,"separators",","),i=c.getAttribute_(e,"open","("),o=c.getAttribute_(e,"close",")"),l=s.default.getInstance().mfenced(i,o,r,n);return s.default.getInstance().tablesInRow([l])[0]}enclosed_(e,t){const n=this.parseList(a.purgeNodes(t)),r=this.getFactory().makeBranchNode("enclose",[s.default.getInstance().row(n)],[]);return r.role=e.getAttribute("notation")||"unknown",r}multiscripts_(e,t){if(!t.length)return this.getFactory().makeEmptyNode();const n=this.parse(t.shift());if(!t.length)return n;const i=[],o=[],c=[],l=[];let u=!1,d=0;for(let e,n=0;e=t[n];n++)"MPRESCRIPTS"!==r.tagName(e)?(u?1&d?i.push(e):o.push(e):1&d?c.push(e):l.push(e),d++):(u=!0,d=0);return a.purgeNodes(i).length||a.purgeNodes(o).length?s.default.getInstance().tensor(n,this.parseList(o),this.parseList(i),this.parseList(l),this.parseList(c)):s.default.getInstance().pseudoTensor(n,this.parseList(l),this.parseList(c))}empty_(e,t){return this.getFactory().makeEmptyNode()}action_(e,t){return t.length>1?this.parse(t[1]):this.getFactory().makeUnprocessed(e)}dummy_(e,t){const n=this.getFactory().makeUnprocessed(e);return n.role=e.tagName,n.textContent=e.textContent,n}leaf_(e,t){if(1===t.length&&t[0].nodeType!==r.NodeType.TEXT_NODE){const n=this.getFactory().makeUnprocessed(e);return n.role=t[0].tagName,a.addAttributes(n,t[0]),n}return this.getFactory().makeLeafNode(e.textContent,s.default.getInstance().font(e.getAttribute("mathvariant")))}}t.SemanticMathml=c},9444:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticNode=void 0;const r=n(6671),i=n(4020),o=n(8901);class s{constructor(e){this.id=e,this.mathml=[],this.parent=null,this.type="unknown",this.role="unknown",this.font="unknown",this.embellished=null,this.fencePointer="",this.childNodes=[],this.textContent="",this.mathmlTree=null,this.contentNodes=[],this.annotation={},this.attributes={},this.nobreaking=!1}static fromXml(e){const t=parseInt(e.getAttribute("id"),10),n=new s(t);return n.type=e.tagName,s.setAttribute(n,e,"role"),s.setAttribute(n,e,"font"),s.setAttribute(n,e,"embellished"),s.setAttribute(n,e,"fencepointer","fencePointer"),e.getAttribute("annotation")&&n.parseAnnotation(e.getAttribute("annotation")),o.addAttributes(n,e),s.processChildren(n,e),n}static setAttribute(e,t,n,r){r=r||n;const i=t.getAttribute(n);i&&(e[r]=i)}static processChildren(e,t){for(const n of r.toArray(t.childNodes)){if(n.nodeType===r.NodeType.TEXT_NODE){e.textContent=n.textContent;continue}const t=r.toArray(n.childNodes).map(s.fromXml);t.forEach((t=>t.parent=e)),"CONTENT"===r.tagName(n)?e.contentNodes=t:e.childNodes=t}}querySelectorAll(e){let t=[];for(let n,r=0;n=this.childNodes[r];r++)t=t.concat(n.querySelectorAll(e));for(let n,r=0;n=this.contentNodes[r];r++)t=t.concat(n.querySelectorAll(e));return e(this)&&t.unshift(this),t}xml(e,t){const n=function(n,r){const i=r.map((function(n){return n.xml(e,t)})),o=e.createElementNS("",n);for(let e,t=0;e=i[t];t++)o.appendChild(e);return o},r=e.createElementNS("",this.type);return t||this.xmlAttributes(r),r.textContent=this.textContent,this.contentNodes.length>0&&r.appendChild(n("content",this.contentNodes)),this.childNodes.length>0&&r.appendChild(n("children",this.childNodes)),r}toString(e=!1){const t=r.parseInput("<snode/>");return r.serializeXml(this.xml(t,e))}allAttributes(){const e=[];return e.push(["role",this.role]),"unknown"!==this.font&&e.push(["font",this.font]),Object.keys(this.annotation).length&&e.push(["annotation",this.xmlAnnotation()]),this.embellished&&e.push(["embellished",this.embellished]),this.fencePointer&&e.push(["fencepointer",this.fencePointer]),e.push(["id",this.id.toString()]),e}xmlAnnotation(){const e=[];for(const t in this.annotation)this.annotation[t].forEach((function(n){e.push(t+":"+n)}));return e.join(";")}toJson(){const e={};e.type=this.type;const t=this.allAttributes();for(let n,r=0;n=t[r];r++)e[n[0]]=n[1].toString();return this.textContent&&(e.$t=this.textContent),this.childNodes.length&&(e.children=this.childNodes.map((function(e){return e.toJson()}))),this.contentNodes.length&&(e.content=this.contentNodes.map((function(e){return e.toJson()}))),e}updateContent(e,t){const n=t?e.replace(/^[ \f\n\r\t\v\u200b]*/,"").replace(/[ \f\n\r\t\v\u200b]*$/,""):e.trim();if(e=e&&!n?e:n,this.textContent===e)return;const r=(0,i.lookupMeaning)(e);this.textContent=e,this.role=r.role,this.type=r.type,this.font=r.font}addMathmlNodes(e){for(let t,n=0;t=e[n];n++)-1===this.mathml.indexOf(t)&&this.mathml.push(t)}appendChild(e){this.childNodes.push(e),this.addMathmlNodes(e.mathml),e.parent=this}replaceChild(e,t){const n=this.childNodes.indexOf(e);if(-1===n)return;e.parent=null,t.parent=this,this.childNodes[n]=t;const r=e.mathml.filter((function(e){return-1===t.mathml.indexOf(e)})),i=t.mathml.filter((function(t){return-1===e.mathml.indexOf(t)}));this.removeMathmlNodes(r),this.addMathmlNodes(i)}appendContentNode(e){e&&(this.contentNodes.push(e),this.addMathmlNodes(e.mathml),e.parent=this)}removeContentNode(e){if(e){const t=this.contentNodes.indexOf(e);-1!==t&&this.contentNodes.slice(t,1)}}equals(e){if(!e)return!1;if(this.type!==e.type||this.role!==e.role||this.textContent!==e.textContent||this.childNodes.length!==e.childNodes.length||this.contentNodes.length!==e.contentNodes.length)return!1;for(let t,n,r=0;t=this.childNodes[r],n=e.childNodes[r];r++)if(!t.equals(n))return!1;for(let t,n,r=0;t=this.contentNodes[r],n=e.contentNodes[r];r++)if(!t.equals(n))return!1;return!0}displayTree(){console.info(this.displayTree_(0))}addAnnotation(e,t){t&&this.addAnnotation_(e,t)}getAnnotation(e){const t=this.annotation[e];return t||[]}hasAnnotation(e,t){const n=this.annotation[e];return!!n&&-1!==n.indexOf(t)}parseAnnotation(e){const t=e.split(";");for(let e=0,n=t.length;e<n;e++){const n=t[e].split(":");this.addAnnotation(n[0],n[1])}}meaning(){return{type:this.type,role:this.role,font:this.font}}xmlAttributes(e){const t=this.allAttributes();for(let n,r=0;n=t[r];r++)e.setAttribute(n[0],n[1]);this.addExternalAttributes(e)}addExternalAttributes(e){for(const t in this.attributes)e.setAttribute(t,this.attributes[t])}removeMathmlNodes(e){const t=this.mathml;for(let n,r=0;n=e[r];r++){const e=t.indexOf(n);-1!==e&&t.splice(e,1)}this.mathml=t}displayTree_(e){e++;const t=Array(e).join("  ");let n="";n+="\n"+t+this.toString(),n+="\n"+t+"MathmlTree:",n+="\n"+t+this.mathmlTreeString(),n+="\n"+t+"MathML:";for(let e,r=0;e=this.mathml[r];r++)n+="\n"+t+e.toString();return n+="\n"+t+"Begin Content",this.contentNodes.forEach((function(t){n+=t.displayTree_(e)})),n+="\n"+t+"End Content",n+="\n"+t+"Begin Children",this.childNodes.forEach((function(t){n+=t.displayTree_(e)})),n+="\n"+t+"End Children",n}mathmlTreeString(){return this.mathmlTree?this.mathmlTree.toString():"EMPTY"}addAnnotation_(e,t){const n=this.annotation[e];n?n.push(t):this.annotation[e]=[t]}}t.SemanticNode=s},4790:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticNodeFactory=void 0;const r=n(7405),i=n(7405),o=n(9444);t.SemanticNodeFactory=class{constructor(){this.leafMap=new i.SemanticNodeCollator,this.defaultMap=new r.SemanticDefault,this.idCounter_=-1}makeNode(e){return this.createNode_(e)}makeUnprocessed(e){const t=this.createNode_();return t.mathml=[e],t.mathmlTree=e,t}makeEmptyNode(){const e=this.createNode_();return e.type="empty",e}makeContentNode(e){const t=this.createNode_();return t.updateContent(e),t}makeMultipleContentNodes(e,t){const n=[];for(let r=0;r<e;r++)n.push(this.makeContentNode(t));return n}makeLeafNode(e,t){if(!e)return this.makeEmptyNode();const n=this.makeContentNode(e);n.font=t||n.font;const r=this.defaultMap.retrieveNode(n);return r&&(n.type=r.type,n.role=r.role,n.font=r.font),this.leafMap.addNode(n),n}makeBranchNode(e,t,n,r){const i=this.createNode_();return r&&i.updateContent(r),i.type=e,i.childNodes=t,i.contentNodes=n,t.concat(n).forEach((function(e){e.parent=i,i.addMathmlNodes(e.mathml)})),i}createNode_(e){return void 0!==e?this.idCounter_=Math.max(this.idCounter_,e):e=++this.idCounter_,new o.SemanticNode(e)}}},178:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticComparator=t.reduce=t.sort=t.apply=t.add=void 0;const n=[];function r(e){n.push(e)}function i(e,t){for(let r,i=0;r=n[i];i++){const n=r.compare(e,t);if(0!==n)return n}return 0}function o(e){e.sort(i)}t.add=r,t.apply=i,t.sort=o,t.reduce=function(e){if(e.length<=1)return e;const t=e.slice();o(t);const n=[];let r;do{r=t.pop(),n.push(r)}while(r&&t.length&&0===i(t[t.length-1],r));return n};class s{constructor(e,t=null){this.comparator=e,this.type=t,r(this)}compare(e,t){return this.type&&this.type===e.type&&this.type===t.type?this.comparator(e,t):0}}t.SemanticComparator=s,new s((function(e,t){return"simple function"===e.role?1:"simple function"===t.role?-1:0}),"identifier")},6098:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticAbstractParser=void 0;const r=n(4790);t.SemanticAbstractParser=class{constructor(e){this.type=e,this.factory_=new r.SemanticNodeFactory}getFactory(){return this.factory_}setFactory(e){this.factory_=e}getType(){return this.type}parseList(e){const t=[];for(let n,r=0;n=e[r];r++)t.push(this.parse(n));return t}}},6161:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isMembership=t.elligibleRightNeutral=t.elligibleLeftNeutral=t.compareNeutralFences=t.isNeutralFence=t.isImplicitOp=t.isImplicit=t.isPureUnit=t.isUnitCounter=t.isNumber=t.isSingletonSetContent=t.scriptedElement_=t.illegalSingleton_=t.isSetNode=t.isRightBrace=t.isLeftBrace=t.isSimpleFunction=t.singlePunctAtPosition=t.isSimpleFunctionHead=t.isLimitBase=t.isBinomial=t.lineIsLabelled=t.tableIsMultiline=t.tableIsCases=t.isFencedElement=t.tableIsMatrixOrVector=t.isTableOrMultiline=t.isElligibleEmbellishedFence=t.isFence=t.isPunctuation=t.isRelation=t.isOperator=t.isEmbellished=t.isGeneralFunctionBoundary=t.isIntegralDxBoundarySingle=t.isIntegralDxBoundary=t.isBigOpBoundary=t.isPrefixFunctionBoundary=t.isSimpleFunctionScope=t.isAccent=t.isRole=t.embellishedType=t.isType=void 0;const r=n(4020),i=n(8901);function o(e,t){return e.type===t}function s(e,t){return e.embellished===t}function a(e,t){return e.role===t}function c(e){return u(e)||d(e)}function l(e){return o(e,"operator")||s(e,"operator")}function u(e){return o(e,"relation")||s(e,"relation")}function d(e){return o(e,"punctuation")||s(e,"punctuation")}function h(e){return o(e,"fence")||s(e,"fence")}function p(e){return!e.embellished||!function(e){return o(e,"tensor")&&(!o(e.childNodes[1],"empty")||!o(e.childNodes[2],"empty"))&&(!o(e.childNodes[3],"empty")||!o(e.childNodes[4],"empty"))}(e)&&((!a(e,"close")||!o(e,"tensor"))&&((!a(e,"open")||!o(e,"subscript")&&!o(e,"superscript"))&&p(e.childNodes[0])))}function f(e){return!!e&&(o(e,"table")||o(e,"multiline"))}function m(e){return!!e&&o(e,"fenced")&&(a(e,"leftright")||N(e))&&1===e.childNodes.length}function g(e){return!!e&&-1!==["{","\ufe5b","\uff5b"].indexOf(e.textContent)}function S(e){return!!e&&-1!==["}","\ufe5c","\uff5d"].indexOf(e.textContent)}function b(e){return"number"===e.type&&("integer"===e.role||"float"===e.role)}function N(e){return"neutral"===e.role||"metric"===e.role}t.isType=o,t.embellishedType=s,t.isRole=a,t.isAccent=function(e){const t=new RegExp("\u221e|\u1ab2");return o(e,"fence")||o(e,"punctuation")||o(e,"operator")&&!e.textContent.match(t)||o(e,"relation")||o(e,"identifier")&&a(e,"unknown")&&!e.textContent.match(r.allLettersRegExp)&&!e.textContent.match(t)},t.isSimpleFunctionScope=function(e){const t=e.childNodes;if(0===t.length)return!0;if(t.length>1)return!1;const n=t[0];if("infixop"===n.type){if("implicit"!==n.role)return!1;if(n.childNodes.some((e=>o(e,"infixop"))))return!1}return!0},t.isPrefixFunctionBoundary=function(e){return l(e)&&!a(e,"division")||o(e,"appl")||c(e)},t.isBigOpBoundary=function(e){return l(e)||c(e)},t.isIntegralDxBoundary=function(e,t){return!!t&&o(t,"identifier")&&r.lookupSecondary("d",e.textContent)},t.isIntegralDxBoundarySingle=function(e){if(o(e,"identifier")){const t=e.textContent[0];return t&&e.textContent[1]&&r.lookupSecondary("d",t)}return!1},t.isGeneralFunctionBoundary=c,t.isEmbellished=function(e){return e.embellished?e.embellished:r.isEmbellishedType(e.type)?e.type:null},t.isOperator=l,t.isRelation=u,t.isPunctuation=d,t.isFence=h,t.isElligibleEmbellishedFence=function(e){return!(!e||!h(e))&&(!e.embellished||p(e))},t.isTableOrMultiline=f,t.tableIsMatrixOrVector=function(e){return!!e&&m(e)&&f(e.childNodes[0])},t.isFencedElement=m,t.tableIsCases=function(e,t){return t.length>0&&a(t[t.length-1],"openfence")},t.tableIsMultiline=function(e){return e.childNodes.every((function(e){return e.childNodes.length<=1}))},t.lineIsLabelled=function(e){return o(e,"line")&&e.contentNodes.length&&a(e.contentNodes[0],"label")},t.isBinomial=function(e){return 2===e.childNodes.length},t.isLimitBase=function e(t){return o(t,"largeop")||o(t,"limboth")||o(t,"limlower")||o(t,"limupper")||o(t,"function")&&a(t,"limit function")||(o(t,"overscore")||o(t,"underscore"))&&e(t.childNodes[0])},t.isSimpleFunctionHead=function(e){return"identifier"===e.type||"latinletter"===e.role||"greekletter"===e.role||"otherletter"===e.role},t.singlePunctAtPosition=function(e,t,n){return 1===t.length&&("punctuation"===e[n].type||"punctuation"===e[n].embellished)&&e[n]===t[0]},t.isSimpleFunction=function(e){return o(e,"identifier")&&a(e,"simple function")},t.isLeftBrace=g,t.isRightBrace=S,t.isSetNode=function(e){return g(e.contentNodes[0])&&S(e.contentNodes[1])},t.illegalSingleton_=["punctuation","punctuated","relseq","multirel","table","multiline","cases","inference"],t.scriptedElement_=["limupper","limlower","limboth","subscript","superscript","underscore","overscore","tensor"],t.isSingletonSetContent=function e(n){const r=n.type;return-1===t.illegalSingleton_.indexOf(r)&&("infixop"!==r||"implicit"===n.role)&&("fenced"===r?"leftright"!==n.role||e(n.childNodes[0]):-1===t.scriptedElement_.indexOf(r)||e(n.childNodes[0]))},t.isNumber=b,t.isUnitCounter=function(e){return b(e)||"vulgar"===e.role||"mixed"===e.role},t.isPureUnit=function(e){const t=e.childNodes;return"unit"===e.role&&(!t.length||"unit"===t[0].role)},t.isImplicit=function(e){return"implicit"===e.role||"unit"===e.role&&!!e.contentNodes.length&&e.contentNodes[0].textContent===r.invisibleTimes()},t.isImplicitOp=function(e){return"infixop"===e.type&&"implicit"===e.role},t.isNeutralFence=N,t.compareNeutralFences=function(e,t){return N(e)&&N(t)&&(0,i.getEmbellishedInner)(e).textContent===(0,i.getEmbellishedInner)(t).textContent},t.elligibleLeftNeutral=function(e){return!!N(e)&&(!e.embellished||"superscript"!==e.type&&"subscript"!==e.type&&("tensor"!==e.type||"empty"===e.childNodes[3].type&&"empty"===e.childNodes[4].type))},t.elligibleRightNeutral=function(e){return!!N(e)&&(!e.embellished||("tensor"!==e.type||"empty"===e.childNodes[1].type&&"empty"===e.childNodes[2].type))},t.isMembership=function(e){return["element","nonelement","reelement","renonelement"].includes(e.role)}},7793:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(6671),i=n(4020),o=n(2721),s=n(4790),a=n(6161),c=n(8901);class l{constructor(){this.funcAppls={},this.factory_=new s.SemanticNodeFactory,o.updateFactory(this.factory_)}static getInstance(){return l.instance=l.instance||new l,l.instance}static tableToMultiline(e){if(a.tableIsMultiline(e)){e.type="multiline";for(let t,n=0;t=e.childNodes[n];n++)l.rowToLine_(t,"multiline");1===e.childNodes.length&&!a.lineIsLabelled(e.childNodes[0])&&a.isFencedElement(e.childNodes[0].childNodes[0])&&l.tableToMatrixOrVector_(l.rewriteFencedLine_(e)),l.binomialForm_(e),l.classifyMultiline(e)}else l.classifyTable(e)}static number(e){"unknown"!==e.type&&"identifier"!==e.type||(e.type="number"),l.numberRole_(e),l.exprFont_(e)}static classifyMultiline(e){let t=0;const n=e.childNodes.length;let r;for(;t<n&&(!(r=e.childNodes[t])||!r.childNodes.length);)t++;if(t>=n)return;const i=r.childNodes[0].role;"unknown"!==i&&e.childNodes.every((function(e){const t=e.childNodes[0];return!t||t.role===i&&(a.isType(t,"relation")||a.isType(t,"relseq"))}))&&(e.role=i)}static classifyTable(e){const t=l.computeColumns_(e);l.classifyByColumns_(e,t,"equality")||l.classifyByColumns_(e,t,"inequality",["equality"])||l.classifyByColumns_(e,t,"arrow")||l.detectCaleyTable(e)}static detectCaleyTable(e){if(!e.mathmlTree)return!1;const t=e.mathmlTree,n=t.getAttribute("columnlines"),r=t.getAttribute("rowlines");return!(!n||!r)&&(!(!l.cayleySpacing(n)||!l.cayleySpacing(r))&&(e.role="cayley",!0))}static cayleySpacing(e){const t=e.split(" ");return("solid"===t[0]||"dashed"===t[0])&&t.slice(1).every((e=>"none"===e))}static proof(e,t,n){const r=l.separateSemantics(t);return l.getInstance().proof(e,r,n)}static findSemantics(e,t,n){const r=null==n?null:n,i=l.getSemantics(e);return!!i&&(!!i[t]&&(null==r||i[t]===r))}static getSemantics(e){const t=e.getAttribute("semantics");return t?l.separateSemantics(t):null}static removePrefix(e){const[,...t]=e.split("_");return t.join("_")}static separateSemantics(e){const t={};return e.split(";").forEach((function(e){const[n,r]=e.split(":");t[l.removePrefix(n)]=r})),t}static matchSpaces_(e,t){for(let n,r=0;n=t[r];r++){const t=e[r].mathmlTree,i=e[r+1].mathmlTree;if(!t||!i)continue;const o=t.nextSibling;if(!o||o===i)continue;const s=l.getSpacer_(o);s&&(n.mathml.push(s),n.mathmlTree=s,n.role="space")}}static getSpacer_(e){if("MSPACE"===r.tagName(e))return e;for(;c.hasEmptyTag(e)&&1===e.childNodes.length;)if(e=e.childNodes[0],"MSPACE"===r.tagName(e))return e;return null}static fenceToPunct_(e){const t=l.FENCE_TO_PUNCT_[e.role];if(t){for(;e.embellished;)e.embellished="punctuation",a.isRole(e,"subsup")||a.isRole(e,"underover")||(e.role=t),e=e.childNodes[0];e.type="punctuation",e.role=t}}static classifyFunction_(e,t){if("appl"===e.type||"bigop"===e.type||"integral"===e.type)return"";if(t[0]&&t[0].textContent===i.functionApplication()){l.getInstance().funcAppls[e.id]=t.shift();let n="simple function";return o.run("simple2prefix",e),"prefix function"!==e.role&&"limit function"!==e.role||(n=e.role),l.propagateFunctionRole_(e,n),"prefix"}const n=l.CLASSIFY_FUNCTION_[e.role];return n||(a.isSimpleFunctionHead(e)?"simple":"")}static propagateFunctionRole_(e,t){if(e){if("infixop"===e.type)return;a.isRole(e,"subsup")||a.isRole(e,"underover")||(e.role=t),l.propagateFunctionRole_(e.childNodes[0],t)}}static getFunctionOp_(e,t){if(t(e))return e;for(let n,r=0;n=e.childNodes[r];r++){const e=l.getFunctionOp_(n,t);if(e)return e}return null}static tableToMatrixOrVector_(e){const t=e.childNodes[0];a.isType(t,"multiline")?l.tableToVector_(e):l.tableToMatrix_(e),e.contentNodes.forEach(t.appendContentNode.bind(t));for(let e,n=0;e=t.childNodes[n];n++)l.assignRoleToRow_(e,l.getComponentRoles_(t));return t.parent=null,t}static tableToVector_(e){const t=e.childNodes[0];t.type="vector",1!==t.childNodes.length?l.binomialForm_(t):l.tableToSquare_(e)}static binomialForm_(e){a.isBinomial(e)&&(e.role="binomial",e.childNodes[0].role="binomial",e.childNodes[1].role="binomial")}static tableToMatrix_(e){const t=e.childNodes[0];t.type="matrix",t.childNodes&&t.childNodes.length>0&&t.childNodes[0].childNodes&&t.childNodes.length===t.childNodes[0].childNodes.length?l.tableToSquare_(e):t.childNodes&&1===t.childNodes.length&&(t.role="rowvector")}static tableToSquare_(e){const t=e.childNodes[0];a.isNeutralFence(e)?t.role="determinant":t.role="squarematrix"}static getComponentRoles_(e){const t=e.role;return t&&"unknown"!==t?t:e.type.toLowerCase()||"unknown"}static tableToCases_(e,t){for(let t,n=0;t=e.childNodes[n];n++)l.assignRoleToRow_(t,"cases");return e.type="cases",e.appendContentNode(t),a.tableIsMultiline(e)&&l.binomialForm_(e),e}static rewriteFencedLine_(e){const t=e.childNodes[0],n=e.childNodes[0].childNodes[0],r=e.childNodes[0].childNodes[0].childNodes[0];return n.parent=e.parent,e.parent=n,r.parent=t,n.childNodes=[e],t.childNodes=[r],n}static rowToLine_(e,t){const n=t||"unknown";a.isType(e,"row")&&(e.type="line",e.role=n,1===e.childNodes.length&&a.isType(e.childNodes[0],"cell")&&(e.childNodes=e.childNodes[0].childNodes,e.childNodes.forEach((function(t){t.parent=e}))))}static assignRoleToRow_(e,t){a.isType(e,"line")?e.role=t:a.isType(e,"row")&&(e.role=t,e.childNodes.forEach((function(e){a.isType(e,"cell")&&(e.role=t)})))}static nextSeparatorFunction_(e){let t;if(e){if(e.match(/^\s+$/))return null;t=e.replace(/\s/g,"").split("").filter((function(e){return e}))}else t=[","];return function(){return t.length>1?t.shift():t[0]}}static numberRole_(e){if("unknown"!==e.role)return;const t=[...e.textContent].filter((e=>e.match(/[^\s]/))),n=t.map(i.lookupMeaning);if(n.every((function(e){return"number"===e.type&&"integer"===e.role||"punctuation"===e.type&&"comma"===e.role})))return e.role="integer",void("0"===t[0]&&e.addAnnotation("general","basenumber"));n.every((function(e){return"number"===e.type&&"integer"===e.role||"punctuation"===e.type}))?e.role="float":e.role="othernumber"}static exprFont_(e){if("unknown"!==e.font)return;const t=[...e.textContent].map(i.lookupMeaning).reduce((function(e,t){return e&&t.font&&"unknown"!==t.font&&t.font!==e?"unknown"===e?t.font:null:e}),"unknown");t&&(e.font=t)}static purgeFences_(e){const t=e.rel,n=e.comp,r=[],i=[];for(;t.length>0;){const e=t.shift();let o=n.shift();a.isElligibleEmbellishedFence(e)?(r.push(e),i.push(o)):(l.fenceToPunct_(e),o.push(e),o=o.concat(n.shift()),n.unshift(o))}return i.push(n.shift()),{rel:r,comp:i}}static rewriteFencedNode_(e){const t=e.contentNodes[0],n=e.contentNodes[1];let r=l.rewriteFence_(e,t);return e.contentNodes[0]=r.fence,r=l.rewriteFence_(r.node,n),e.contentNodes[1]=r.fence,e.contentNodes[0].parent=e,e.contentNodes[1].parent=e,r.node.parent=null,r.node}static rewriteFence_(e,t){if(!t.embellished)return{node:e,fence:t};const n=t.childNodes[0],r=l.rewriteFence_(e,n);return a.isType(t,"superscript")||a.isType(t,"subscript")||a.isType(t,"tensor")?(a.isRole(t,"subsup")||(t.role=e.role),n!==r.node&&(t.replaceChild(n,r.node),n.parent=e),l.propagateFencePointer_(t,n),{node:t,fence:r.fence}):(t.replaceChild(n,r.fence),t.mathmlTree&&-1===t.mathml.indexOf(t.mathmlTree)&&t.mathml.push(t.mathmlTree),{node:r.node,fence:t})}static propagateFencePointer_(e,t){e.fencePointer=t.fencePointer||t.id.toString(),e.embellished=null}static classifyByColumns_(e,t,n,r){return!!(3===t.length&&l.testColumns_(t,1,(e=>l.isPureRelation_(e,n)))||2===t.length&&(l.testColumns_(t,1,(e=>l.isEndRelation_(e,n)||l.isPureRelation_(e,n)))||l.testColumns_(t,0,(e=>l.isEndRelation_(e,n,!0)||l.isPureRelation_(e,n)))))&&(e.role=n,!0)}static isEndRelation_(e,t,n){const r=n?e.childNodes.length-1:0;return a.isType(e,"relseq")&&a.isRole(e,t)&&a.isType(e.childNodes[r],"empty")}static isPureRelation_(e,t){return a.isType(e,"relation")&&a.isRole(e,t)}static computeColumns_(e){const t=[];for(let n,r=0;n=e.childNodes[r];r++)for(let e,r=0;e=n.childNodes[r];r++){t[r]?t[r].push(e):t[r]=[e]}return t}static testColumns_(e,t,n){const r=e[t];return!!r&&(r.some((function(e){return e.childNodes.length&&n(e.childNodes[0])}))&&r.every((function(e){return!e.childNodes.length||n(e.childNodes[0])})))}setNodeFactory(e){l.getInstance().factory_=e,o.updateFactory(l.getInstance().factory_)}getNodeFactory(){return l.getInstance().factory_}identifierNode(e,t,n){if("MathML-Unit"===n)e.type="identifier",e.role="unit";else if(!t&&1===e.textContent.length&&("integer"===e.role||"latinletter"===e.role||"greekletter"===e.role)&&"normal"===e.font)return e.font="italic",o.run("simpleNamedFunction",e);return"unknown"===e.type&&(e.type="identifier"),l.exprFont_(e),o.run("simpleNamedFunction",e)}implicitNode(e){if(e=l.getInstance().getMixedNumbers_(e),1===(e=l.getInstance().combineUnits_(e)).length)return e[0];const t=l.getInstance().implicitNode_(e);return o.run("combine_juxtaposition",t)}text(e,t){return l.exprFont_(e),e.type="text","MS"===t?(e.role="string",e):"MSPACE"===t||e.textContent.match(/^\s*$/)?(e.role="space",e):e}row(e){return 0===(e=e.filter((function(e){return!a.isType(e,"empty")}))).length?l.getInstance().factory_.makeEmptyNode():(e=l.getInstance().getFencesInRow_(e),e=l.getInstance().tablesInRow(e),e=l.getInstance().getPunctuationInRow_(e),e=l.getInstance().getTextInRow_(e),e=l.getInstance().getFunctionsInRow_(e),l.getInstance().relationsInRow_(e))}limitNode(e,t){if(!t.length)return l.getInstance().factory_.makeEmptyNode();let n,r=t[0],i="unknown";if(!t[1])return r;if(a.isLimitBase(r)){n=l.MML_TO_LIMIT_[e];const o=n.length;if(i=n.type,t=t.slice(0,n.length+1),1===o&&a.isAccent(t[1])||2===o&&a.isAccent(t[1])&&a.isAccent(t[2]))return n=l.MML_TO_BOUNDS_[e],l.getInstance().accentNode_(r,t,n.type,n.length,n.accent);if(2===o){if(a.isAccent(t[1]))return r=l.getInstance().accentNode_(r,[r,t[1]],{MSUBSUP:"subscript",MUNDEROVER:"underscore"}[e],1,!0),t[2]?l.getInstance().makeLimitNode_(r,[r,t[2]],null,"limupper"):r;if(t[2]&&a.isAccent(t[2]))return r=l.getInstance().accentNode_(r,[r,t[2]],{MSUBSUP:"superscript",MUNDEROVER:"overscore"}[e],1,!0),l.getInstance().makeLimitNode_(r,[r,t[1]],null,"limlower");t[o]||(i="limlower")}return l.getInstance().makeLimitNode_(r,t,null,i)}return n=l.MML_TO_BOUNDS_[e],l.getInstance().accentNode_(r,t,n.type,n.length,n.accent)}tablesInRow(e){let t=c.partitionNodes(e,a.tableIsMatrixOrVector),n=[];for(let e,r=0;e=t.rel[r];r++)n=n.concat(t.comp.shift()),n.push(l.tableToMatrixOrVector_(e));n=n.concat(t.comp.shift()),t=c.partitionNodes(n,a.isTableOrMultiline),n=[];for(let e,r=0;e=t.rel[r];r++){const r=t.comp.shift();a.tableIsCases(e,r)&&l.tableToCases_(e,r.pop()),n=n.concat(r),n.push(e)}return n.concat(t.comp.shift())}mfenced(e,t,n,r){if(n&&r.length>0){const e=l.nextSeparatorFunction_(n),t=[r.shift()];r.forEach((n=>{t.push(l.getInstance().factory_.makeContentNode(e())),t.push(n)})),r=t}return e&&t?l.getInstance().horizontalFencedNode_(l.getInstance().factory_.makeContentNode(e),l.getInstance().factory_.makeContentNode(t),r):(e&&r.unshift(l.getInstance().factory_.makeContentNode(e)),t&&r.push(l.getInstance().factory_.makeContentNode(t)),l.getInstance().row(r))}fractionLikeNode(e,t,n,r){let i;if(!r&&c.isZeroLength(n)){const n=l.getInstance().factory_.makeBranchNode("line",[e],[]),r=l.getInstance().factory_.makeBranchNode("line",[t],[]);return i=l.getInstance().factory_.makeBranchNode("multiline",[n,r],[]),l.binomialForm_(i),l.classifyMultiline(i),i}return i=l.getInstance().fractionNode_(e,t),r&&i.addAnnotation("general","bevelled"),i}tensor(e,t,n,r,i){const o=l.getInstance().factory_.makeBranchNode("tensor",[e,l.getInstance().scriptNode_(t,"leftsub"),l.getInstance().scriptNode_(n,"leftsuper"),l.getInstance().scriptNode_(r,"rightsub"),l.getInstance().scriptNode_(i,"rightsuper")],[]);return o.role=e.role,o.embellished=a.isEmbellished(e),o}pseudoTensor(e,t,n){const r=e=>!a.isType(e,"empty"),i=t.filter(r).length,o=n.filter(r).length;if(!i&&!o)return e;const s=i?o?"MSUBSUP":"MSUB":"MSUP",c=[e];return i&&c.push(l.getInstance().scriptNode_(t,"rightsub",!0)),o&&c.push(l.getInstance().scriptNode_(n,"rightsuper",!0)),l.getInstance().limitNode(s,c)}font(e){const t=l.MATHJAX_FONTS[e];return t||e}proof(e,t,n){if(t.inference||t.axiom||console.log("Noise"),t.axiom){const t=l.getInstance().cleanInference(e.childNodes),r=t.length?l.getInstance().factory_.makeBranchNode("inference",n(t),[]):l.getInstance().factory_.makeEmptyNode();return r.role="axiom",r.mathmlTree=e,r}const r=l.getInstance().inference(e,t,n);return t.proof&&(r.role="proof",r.childNodes[0].role="final"),r}inference(e,t,n){if(t.inferenceRule){const t=l.getInstance().getFormulas(e,[],n);return l.getInstance().factory_.makeBranchNode("inference",[t.conclusion,t.premises],[])}const i=t.labelledRule,o=r.toArray(e.childNodes),s=[];"left"!==i&&"both"!==i||s.push(l.getInstance().getLabel(e,o,n,"left")),"right"!==i&&"both"!==i||s.push(l.getInstance().getLabel(e,o,n,"right"));const a=l.getInstance().getFormulas(e,o,n),c=l.getInstance().factory_.makeBranchNode("inference",[a.conclusion,a.premises],s);return c.mathmlTree=e,c}getLabel(e,t,n,i){const o=l.getInstance().findNestedRow(t,"prooflabel",i),s=l.getInstance().factory_.makeBranchNode("rulelabel",n(r.toArray(o.childNodes)),[]);return s.role=i,s.mathmlTree=o,s}getFormulas(e,t,n){const i=t.length?l.getInstance().findNestedRow(t,"inferenceRule"):e,o="up"===l.getSemantics(i).inferenceRule,s=o?i.childNodes[1]:i.childNodes[0],a=o?i.childNodes[0]:i.childNodes[1],c=s.childNodes[0].childNodes[0],u=r.toArray(c.childNodes[0].childNodes),d=[];let h=1;for(const e of u)h%2&&d.push(e.childNodes[0]),h++;const p=n(d),f=n(r.toArray(a.childNodes[0].childNodes))[0],m=l.getInstance().factory_.makeBranchNode("premises",p,[]);m.mathmlTree=c;const g=l.getInstance().factory_.makeBranchNode("conclusion",[f],[]);return g.mathmlTree=a.childNodes[0].childNodes[0],{conclusion:g,premises:m}}findNestedRow(e,t,n){return l.getInstance().findNestedRow_(e,t,0,n)}cleanInference(e){return r.toArray(e).filter((function(e){return"MSPACE"!==r.tagName(e)}))}operatorNode(e){return"unknown"===e.type&&(e.type="operator"),o.run("multioperator",e)}implicitNode_(e){const t=l.getInstance().factory_.makeMultipleContentNodes(e.length-1,i.invisibleTimes());l.matchSpaces_(e,t);const n=l.getInstance().infixNode_(e,t[0]);return n.role="implicit",t.forEach((function(e){e.parent=n})),n.contentNodes=t,n}infixNode_(e,t){const n=l.getInstance().factory_.makeBranchNode("infixop",e,[t],c.getEmbellishedInner(t).textContent);return n.role=t.role,o.run("propagateSimpleFunction",n)}explicitMixed_(e){const t=c.partitionNodes(e,(function(e){return e.textContent===i.invisiblePlus()}));if(!t.rel.length)return e;let n=[];for(let e,r=0;e=t.rel[r];r++){const i=t.comp[r],o=t.comp[r+1],s=i.length-1;if(i[s]&&o[0]&&a.isType(i[s],"number")&&!a.isRole(i[s],"mixed")&&a.isType(o[0],"fraction")){const e=l.getInstance().factory_.makeBranchNode("number",[i[s],o[0]],[]);e.role="mixed",n=n.concat(i.slice(0,s)),n.push(e),o.shift()}else n=n.concat(i),n.push(e)}return n.concat(t.comp[t.comp.length-1])}concatNode_(e,t,n){if(0===t.length)return e;const r=t.map((function(e){return c.getEmbellishedInner(e).textContent})).join(" "),i=l.getInstance().factory_.makeBranchNode(n,[e],t,r);return t.length>1&&(i.role="multiop"),i}prefixNode_(e,t){const n=c.partitionNodes(t,(e=>a.isRole(e,"subtraction")));let r=l.getInstance().concatNode_(e,n.comp.pop(),"prefixop");for(1===r.contentNodes.length&&"addition"===r.contentNodes[0].role&&"+"===r.contentNodes[0].textContent&&(r.role="positive");n.rel.length>0;)r=l.getInstance().concatNode_(r,[n.rel.pop()],"prefixop"),r.role="negative",r=l.getInstance().concatNode_(r,n.comp.pop(),"prefixop");return r}postfixNode_(e,t){return t.length?l.getInstance().concatNode_(e,t,"postfixop"):e}combineUnits_(e){const t=c.partitionNodes(e,(function(e){return!a.isRole(e,"unit")}));if(e.length===t.rel.length)return t.rel;const n=[];let r,i;do{const e=t.comp.shift();r=t.rel.shift();let o=null;i=n.pop(),i&&(e.length&&a.isUnitCounter(i)?e.unshift(i):n.push(i)),1===e.length&&(o=e.pop()),e.length>1&&(o=l.getInstance().implicitNode_(e),o.role="unit"),o&&n.push(o),r&&n.push(r)}while(r);return n}getMixedNumbers_(e){const t=c.partitionNodes(e,(function(e){return a.isType(e,"fraction")&&a.isRole(e,"vulgar")}));if(!t.rel.length)return e;let n=[];for(let e,r=0;e=t.rel[r];r++){const i=t.comp[r],o=i.length-1;if(i[o]&&a.isType(i[o],"number")&&(a.isRole(i[o],"integer")||a.isRole(i[o],"float"))){const t=l.getInstance().factory_.makeBranchNode("number",[i[o],e],[]);t.role="mixed",n=n.concat(i.slice(0,o)),n.push(t)}else n=n.concat(i),n.push(e)}return n.concat(t.comp[t.comp.length-1])}getTextInRow_(e){if(e.length<=1)return e;const t=c.partitionNodes(e,(e=>a.isType(e,"text")));if(0===t.rel.length)return e;const n=[];let r=t.comp[0];r.length>0&&n.push(l.getInstance().row(r));for(let e,i=0;e=t.rel[i];i++)n.push(e),r=t.comp[i+1],r.length>0&&n.push(l.getInstance().row(r));return[l.getInstance().dummyNode_(n)]}relationsInRow_(e){const t=c.partitionNodes(e,a.isRelation),n=t.rel[0];if(!n)return l.getInstance().operationsInRow_(e);if(1===e.length)return e[0];const r=t.comp.map(l.getInstance().operationsInRow_);let i;return t.rel.some((function(e){return!e.equals(n)}))?(i=l.getInstance().factory_.makeBranchNode("multirel",r,t.rel),t.rel.every((function(e){return e.role===n.role}))&&(i.role=n.role),i):(i=l.getInstance().factory_.makeBranchNode("relseq",r,t.rel,c.getEmbellishedInner(n).textContent),i.role=n.role,i)}operationsInRow_(e){if(0===e.length)return l.getInstance().factory_.makeEmptyNode();if(1===(e=l.getInstance().explicitMixed_(e)).length)return e[0];const t=[];for(;e.length>0&&a.isOperator(e[0]);)t.push(e.shift());if(0===e.length)return l.getInstance().prefixNode_(t.pop(),t);if(1===e.length)return l.getInstance().prefixNode_(e[0],t);e=o.run("convert_juxtaposition",e);const n=c.sliceNodes(e,a.isOperator),r=l.getInstance().prefixNode_(l.getInstance().implicitNode(n.head),t);return n.div?l.getInstance().operationsTree_(n.tail,r,n.div):r}operationsTree_(e,t,n,r){const i=r||[];if(0===e.length){if(i.unshift(n),"infixop"===t.type){const e=l.getInstance().postfixNode_(t.childNodes.pop(),i);return t.appendChild(e),t}return l.getInstance().postfixNode_(t,i)}const o=c.sliceNodes(e,a.isOperator);if(0===o.head.length)return i.push(o.div),l.getInstance().operationsTree_(o.tail,t,n,i);const s=l.getInstance().prefixNode_(l.getInstance().implicitNode(o.head),i),u=l.getInstance().appendOperand_(t,n,s);return o.div?l.getInstance().operationsTree_(o.tail,u,o.div,[]):u}appendOperand_(e,t,n){if("infixop"!==e.type)return l.getInstance().infixNode_([e,n],t);const r=l.getInstance().appendDivisionOp_(e,t,n);return r||(l.getInstance().appendExistingOperator_(e,t,n)?e:"multiplication"===t.role?l.getInstance().appendMultiplicativeOp_(e,t,n):l.getInstance().appendAdditiveOp_(e,t,n))}appendDivisionOp_(e,t,n){return"division"===t.role?a.isImplicit(e)?l.getInstance().infixNode_([e,n],t):l.getInstance().appendLastOperand_(e,t,n):"division"===e.role?l.getInstance().infixNode_([e,n],t):null}appendLastOperand_(e,t,n){let r=e,i=e.childNodes[e.childNodes.length-1];for(;i&&"infixop"===i.type&&!a.isImplicit(i);)r=i,i=r.childNodes[e.childNodes.length-1];const o=l.getInstance().infixNode_([r.childNodes.pop(),n],t);return r.appendChild(o),e}appendMultiplicativeOp_(e,t,n){if(a.isImplicit(e))return l.getInstance().infixNode_([e,n],t);let r=e,i=e.childNodes[e.childNodes.length-1];for(;i&&"infixop"===i.type&&!a.isImplicit(i);)r=i,i=r.childNodes[e.childNodes.length-1];const o=l.getInstance().infixNode_([r.childNodes.pop(),n],t);return r.appendChild(o),e}appendAdditiveOp_(e,t,n){return l.getInstance().infixNode_([e,n],t)}appendExistingOperator_(e,t,n){return!(!e||"infixop"!==e.type||a.isImplicit(e))&&(e.contentNodes[0].equals(t)?(e.appendContentNode(t),e.appendChild(n),!0):l.getInstance().appendExistingOperator_(e.childNodes[e.childNodes.length-1],t,n))}getFencesInRow_(e){let t=c.partitionNodes(e,a.isFence);t=l.purgeFences_(t);const n=t.comp.shift();return l.getInstance().fences_(t.rel,t.comp,[],[n])}fences_(e,t,n,r){if(0===e.length&&0===n.length)return r[0];const i=e=>a.isRole(e,"open");if(0===e.length){const e=r.shift();for(;n.length>0;){if(i(n[0])){const t=n.shift();l.fenceToPunct_(t),e.push(t)}else{const t=c.sliceNodes(n,i),o=t.head.length-1,s=l.getInstance().neutralFences_(t.head,r.slice(0,o));r=r.slice(o),e.push(...s),t.div&&t.tail.unshift(t.div),n=t.tail}e.push(...r.shift())}return e}const o=n[n.length-1],s=e[0].role;if("open"===s||a.isNeutralFence(e[0])&&(!o||!a.compareNeutralFences(e[0],o))){n.push(e.shift());const i=t.shift();return i&&r.push(i),l.getInstance().fences_(e,t,n,r)}if(o&&"close"===s&&"open"===o.role){const i=l.getInstance().horizontalFencedNode_(n.pop(),e.shift(),r.pop());return r.push(r.pop().concat([i],t.shift())),l.getInstance().fences_(e,t,n,r)}if(o&&a.compareNeutralFences(e[0],o)){if(!a.elligibleLeftNeutral(o)||!a.elligibleRightNeutral(e[0])){n.push(e.shift());const i=t.shift();return i&&r.push(i),l.getInstance().fences_(e,t,n,r)}const i=l.getInstance().horizontalFencedNode_(n.pop(),e.shift(),r.pop());return r.push(r.pop().concat([i],t.shift())),l.getInstance().fences_(e,t,n,r)}if(o&&"close"===s&&a.isNeutralFence(o)&&n.some(i)){const o=c.sliceNodes(n,i,!0),s=r.pop(),a=r.length-o.tail.length+1,u=l.getInstance().neutralFences_(o.tail,r.slice(a));r=r.slice(0,a);const d=l.getInstance().horizontalFencedNode_(o.div,e.shift(),r.pop().concat(u,s));return r.push(r.pop().concat([d],t.shift())),l.getInstance().fences_(e,t,o.head,r)}const u=e.shift();return l.fenceToPunct_(u),r.push(r.pop().concat([u],t.shift())),l.getInstance().fences_(e,t,n,r)}neutralFences_(e,t){if(0===e.length)return e;if(1===e.length)return l.fenceToPunct_(e[0]),e;const n=e.shift();if(!a.elligibleLeftNeutral(n)){l.fenceToPunct_(n);const r=t.shift();return r.unshift(n),r.concat(l.getInstance().neutralFences_(e,t))}const r=c.sliceNodes(e,(function(e){return a.compareNeutralFences(e,n)}));if(!r.div){l.fenceToPunct_(n);const r=t.shift();return r.unshift(n),r.concat(l.getInstance().neutralFences_(e,t))}if(!a.elligibleRightNeutral(r.div))return l.fenceToPunct_(r.div),e.unshift(n),l.getInstance().neutralFences_(e,t);const i=l.getInstance().combineFencedContent_(n,r.div,r.head,t);if(r.tail.length>0){const e=i.shift(),t=l.getInstance().neutralFences_(r.tail,i);return e.concat(t)}return i[0]}combineFencedContent_(e,t,n,r){if(0===n.length){const n=l.getInstance().horizontalFencedNode_(e,t,r.shift());return r.length>0?r[0].unshift(n):r=[[n]],r}const i=r.shift(),o=n.length-1,s=r.slice(0,o),a=(r=r.slice(o)).shift(),c=l.getInstance().neutralFences_(n,s);i.push(...c),i.push(...a);const u=l.getInstance().horizontalFencedNode_(e,t,i);return r.length>0?r[0].unshift(u):r=[[u]],r}horizontalFencedNode_(e,t,n){const r=l.getInstance().row(n);let i=l.getInstance().factory_.makeBranchNode("fenced",[r],[e,t]);return"open"===e.role?(l.getInstance().classifyHorizontalFence_(i),i=o.run("propagateComposedFunction",i)):i.role=e.role,i=o.run("detect_cycle",i),l.rewriteFencedNode_(i)}classifyHorizontalFence_(e){e.role="leftright";const t=e.childNodes;if(!a.isSetNode(e)||t.length>1)return;if(0===t.length||"empty"===t[0].type)return void(e.role="set empty");const n=t[0].type;if(1===t.length&&a.isSingletonSetContent(t[0]))return void(e.role="set singleton");const r=t[0].role;if("punctuated"===n&&"sequence"===r){if("comma"!==t[0].contentNodes[0].role)return 1!==t[0].contentNodes.length||"vbar"!==t[0].contentNodes[0].role&&"colon"!==t[0].contentNodes[0].role?void 0:(e.role="set extended",void l.getInstance().setExtension_(e));e.role="set collection"}}setExtension_(e){const t=e.childNodes[0].childNodes[0];t&&"infixop"===t.type&&1===t.contentNodes.length&&a.isMembership(t.contentNodes[0])&&(t.addAnnotation("set","intensional"),t.contentNodes[0].addAnnotation("set","intensional"))}getPunctuationInRow_(e){if(e.length<=1)return e;const t=e=>{const t=e.type;return"punctuation"===t||"text"===t||"operator"===t||"relation"===t},n=c.partitionNodes(e,(function(n){if(!a.isPunctuation(n))return!1;if(a.isPunctuation(n)&&!a.isRole(n,"ellipsis"))return!0;const r=e.indexOf(n);if(0===r)return!e[1]||!t(e[1]);const i=e[r-1];if(r===e.length-1)return!t(i);const o=e[r+1];return!t(i)||!t(o)}));if(0===n.rel.length)return e;const r=[];let i=n.comp.shift();i.length>0&&r.push(l.getInstance().row(i));let o=0;for(;n.comp.length>0;)r.push(n.rel[o++]),i=n.comp.shift(),i.length>0&&r.push(l.getInstance().row(i));return[l.getInstance().punctuatedNode_(r,n.rel)]}punctuatedNode_(e,t){const n=l.getInstance().factory_.makeBranchNode("punctuated",e,t);if(t.length===e.length){const e=t[0].role;if("unknown"!==e&&t.every((function(t){return t.role===e})))return n.role=e,n}return a.singlePunctAtPosition(e,t,0)?n.role="startpunct":a.singlePunctAtPosition(e,t,e.length-1)?n.role="endpunct":t.every((e=>a.isRole(e,"dummy")))?n.role="text":t.every((e=>a.isRole(e,"space")))?n.role="space":n.role="sequence",n}dummyNode_(e){const t=l.getInstance().factory_.makeMultipleContentNodes(e.length-1,i.invisibleComma());return t.forEach((function(e){e.role="dummy"})),l.getInstance().punctuatedNode_(e,t)}accentRole_(e,t){if(!a.isAccent(e))return!1;const n=e.textContent,r=i.lookupSecondary("bar",n)||i.lookupSecondary("tilde",n)||e.role;return e.role="underscore"===t?"underaccent":"overaccent",e.addAnnotation("accent",r),!0}accentNode_(e,t,n,r,i){const o=(t=t.slice(0,r+1))[1],s=t[2];let a;if(!i&&s&&(a=l.getInstance().factory_.makeBranchNode("subscript",[e,o],[]),a.role="subsup",t=[a,s],n="superscript"),i){const r=l.getInstance().accentRole_(o,n);if(s){l.getInstance().accentRole_(s,"overscore")&&!r?(a=l.getInstance().factory_.makeBranchNode("overscore",[e,s],[]),t=[a,o],n="underscore"):(a=l.getInstance().factory_.makeBranchNode("underscore",[e,o],[]),t=[a,s],n="overscore"),a.role="underover"}}return l.getInstance().makeLimitNode_(e,t,a,n)}makeLimitNode_(e,t,n,r){if("limupper"===r&&"limlower"===e.type)return e.childNodes.push(t[1]),t[1].parent=e,e.type="limboth",e;if("limlower"===r&&"limupper"===e.type)return e.childNodes.splice(1,-1,t[1]),t[1].parent=e,e.type="limboth",e;const i=l.getInstance().factory_.makeBranchNode(r,t,[]),o=a.isEmbellished(e);return n&&(n.embellished=o),i.embellished=o,i.role=e.role,i}getFunctionsInRow_(e,t){const n=t||[];if(0===e.length)return n;const r=e.shift(),i=l.classifyFunction_(r,e);if(!i)return n.push(r),l.getInstance().getFunctionsInRow_(e,n);const o=l.getInstance().getFunctionsInRow_(e,[]),s=l.getInstance().getFunctionArgs_(r,o,i);return n.concat(s)}getFunctionArgs_(e,t,n){let r,i,o;switch(n){case"integral":{const n=l.getInstance().getIntegralArgs_(t);if(!n.intvar&&!n.integrand.length)return n.rest.unshift(e),n.rest;const r=l.getInstance().row(n.integrand);return o=l.getInstance().integralNode_(e,r,n.intvar),n.rest.unshift(o),n.rest}case"prefix":if(t[0]&&"fenced"===t[0].type){const n=t.shift();return a.isNeutralFence(n)||(n.role="leftright"),o=l.getInstance().functionNode_(e,n),t.unshift(o),t}if(r=c.sliceNodes(t,a.isPrefixFunctionBoundary),r.head.length)i=l.getInstance().row(r.head),r.div&&r.tail.unshift(r.div);else{if(!r.div||!a.isType(r.div,"appl"))return t.unshift(e),t;i=r.div}return o=l.getInstance().functionNode_(e,i),r.tail.unshift(o),r.tail;case"bigop":return r=c.sliceNodes(t,a.isBigOpBoundary),r.head.length?(i=l.getInstance().row(r.head),o=l.getInstance().bigOpNode_(e,i),r.div&&r.tail.unshift(r.div),r.tail.unshift(o),r.tail):(t.unshift(e),t);default:{if(0===t.length)return[e];const n=t[0];return"fenced"===n.type&&!a.isNeutralFence(n)&&a.isSimpleFunctionScope(n)?(n.role="leftright",l.propagateFunctionRole_(e,"simple function"),o=l.getInstance().functionNode_(e,t.shift()),t.unshift(o),t):(t.unshift(e),t)}}}getIntegralArgs_(e,t=[]){if(0===e.length)return{integrand:t,intvar:null,rest:e};const n=e[0];if(a.isGeneralFunctionBoundary(n))return{integrand:t,intvar:null,rest:e};if(a.isIntegralDxBoundarySingle(n))return n.role="integral",{integrand:t,intvar:n,rest:e.slice(1)};if(e[1]&&a.isIntegralDxBoundary(n,e[1])){const r=l.getInstance().prefixNode_(e[1],[n]);return r.role="integral",{integrand:t,intvar:r,rest:e.slice(2)}}return t.push(e.shift()),l.getInstance().getIntegralArgs_(e,t)}functionNode_(e,t){const n=l.getInstance().factory_.makeContentNode(i.functionApplication()),r=l.getInstance().funcAppls[e.id];r&&(n.mathmlTree=r.mathmlTree,n.mathml=r.mathml,n.annotation=r.annotation,n.attributes=r.attributes,delete l.getInstance().funcAppls[e.id]),n.type="punctuation",n.role="application";const o=l.getFunctionOp_(e,(function(e){return a.isType(e,"function")||a.isType(e,"identifier")&&a.isRole(e,"simple function")}));return l.getInstance().functionalNode_("appl",[e,t],o,[n])}bigOpNode_(e,t){const n=l.getFunctionOp_(e,(e=>a.isType(e,"largeop")));return l.getInstance().functionalNode_("bigop",[e,t],n,[])}integralNode_(e,t,n){t=t||l.getInstance().factory_.makeEmptyNode(),n=n||l.getInstance().factory_.makeEmptyNode();const r=l.getFunctionOp_(e,(e=>a.isType(e,"largeop")));return l.getInstance().functionalNode_("integral",[e,t,n],r,[])}functionalNode_(e,t,n,r){const i=t[0];let o;n&&(o=n.parent,r.push(n));const s=l.getInstance().factory_.makeBranchNode(e,t,r);return s.role=i.role,o&&(n.parent=o),s}fractionNode_(e,t){const n=l.getInstance().factory_.makeBranchNode("fraction",[e,t],[]);return n.role=n.childNodes.every((function(e){return a.isType(e,"number")&&a.isRole(e,"integer")}))?"vulgar":n.childNodes.every(a.isPureUnit)?"unit":"division",o.run("propagateSimpleFunction",n)}scriptNode_(e,t,n){let r;switch(e.length){case 0:r=l.getInstance().factory_.makeEmptyNode();break;case 1:if(r=e[0],n)return r;break;default:r=l.getInstance().dummyNode_(e)}return r.role=t,r}findNestedRow_(e,t,n,i){if(n>3)return null;for(let o,s=0;o=e[s];s++){const e=r.tagName(o);if("MSPACE"!==e){if("MROW"===e)return l.getInstance().findNestedRow_(r.toArray(o.childNodes),t,n+1,i);if(l.findSemantics(o,t,i))return o}}return null}}t.default=l,l.FENCE_TO_PUNCT_={metric:"metric",neutral:"vbar",open:"openfence",close:"closefence"},l.MML_TO_LIMIT_={MSUB:{type:"limlower",length:1},MUNDER:{type:"limlower",length:1},MSUP:{type:"limupper",length:1},MOVER:{type:"limupper",length:1},MSUBSUP:{type:"limboth",length:2},MUNDEROVER:{type:"limboth",length:2}},l.MML_TO_BOUNDS_={MSUB:{type:"subscript",length:1,accent:!1},MSUP:{type:"superscript",length:1,accent:!1},MSUBSUP:{type:"subscript",length:2,accent:!1},MUNDER:{type:"underscore",length:1,accent:!0},MOVER:{type:"overscore",length:1,accent:!0},MUNDEROVER:{type:"underscore",length:2,accent:!0}},l.CLASSIFY_FUNCTION_={integral:"integral",sum:"bigop","prefix function":"prefix","limit function":"prefix","simple function":"prefix","composed function":"prefix"},l.MATHJAX_FONTS={"-tex-caligraphic":"caligraphic","-tex-caligraphic-bold":"caligraphic-bold","-tex-calligraphic":"caligraphic","-tex-calligraphic-bold":"caligraphic-bold","-tex-oldstyle":"oldstyle","-tex-oldstyle-bold":"oldstyle-bold","-tex-mathit":"italic"}},7984:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticSkeleton=void 0;const r=n(1426),i=n(5024),o=n(8171);class s{constructor(e){this.parents=null,this.levelsMap=null,e=0===e?e:e||[],this.array=e}static fromTree(e){return s.fromNode(e.root)}static fromNode(e){return new s(s.fromNode_(e))}static fromString(e){return new s(s.fromString_(e))}static simpleCollapseStructure(e){return"number"==typeof e}static contentCollapseStructure(e){return!!e&&!s.simpleCollapseStructure(e)&&"c"===e[0]}static interleaveIds(e,t){return r.interleaveLists(s.collapsedLeafs(e),s.collapsedLeafs(t))}static collapsedLeafs(...e){return e.reduce(((e,t)=>{return e.concat((n=t,s.simpleCollapseStructure(n)?[n]:(n=n,s.contentCollapseStructure(n[1])?n.slice(2):n.slice(1))));var n}),[])}static fromStructure(e,t){return new s(s.tree_(e,t.root))}static combineContentChildren(e,t,n){switch(e.type){case"relseq":case"infixop":case"multirel":return r.interleaveLists(n,t);case"prefixop":return t.concat(n);case"postfixop":return n.concat(t);case"fenced":return n.unshift(t[0]),n.push(t[1]),n;case"appl":return[n[0],t[0],n[1]];case"root":return[n[1],n[0]];case"row":case"line":return t.length&&n.unshift(t[0]),n;default:return n}}static makeSexp_(e){return s.simpleCollapseStructure(e)?e.toString():s.contentCollapseStructure(e)?"(c "+e.slice(1).map(s.makeSexp_).join(" ")+")":"("+e.map(s.makeSexp_).join(" ")+")"}static fromString_(e){let t=e.replace(/\(/g,"[");return t=t.replace(/\)/g,"]"),t=t.replace(/ /g,","),t=t.replace(/c/g,'"c"'),JSON.parse(t)}static fromNode_(e){if(!e)return[];const t=e.contentNodes;let n;t.length&&(n=t.map(s.fromNode_),n.unshift("c"));const r=e.childNodes;if(!r.length)return t.length?[e.id,n]:e.id;const i=r.map(s.fromNode_);return t.length&&i.unshift(n),i.unshift(e.id),i}static tree_(e,t){if(!t)return[];if(!t.childNodes.length)return t.id;const n=t.id,r=[n],a=i.evalXPath(`.//self::*[@${o.Attribute.ID}=${n}]`,e)[0],c=s.combineContentChildren(t,t.contentNodes.map((function(e){return e})),t.childNodes.map((function(e){return e})));a&&s.addOwns_(a,c);for(let t,n=0;t=c[n];n++)r.push(s.tree_(e,t));return r}static addOwns_(e,t){const n=e.getAttribute(o.Attribute.COLLAPSED),r=n?s.realLeafs_(s.fromString(n).array):t.map((e=>e.id));e.setAttribute(o.Attribute.OWNS,r.join(" "))}static realLeafs_(e){if(s.simpleCollapseStructure(e))return[e];if(s.contentCollapseStructure(e))return[];e=e;let t=[];for(let n=1;n<e.length;n++)t=t.concat(s.realLeafs_(e[n]));return t}populate(){this.parents&&this.levelsMap||(this.parents={},this.levelsMap={},this.populate_(this.array,this.array,[]))}toString(){return s.makeSexp_(this.array)}populate_(e,t,n){if(s.simpleCollapseStructure(e))return e=e,this.levelsMap[e]=t,void(this.parents[e]=e===n[0]?n.slice(1):n);const r=s.contentCollapseStructure(e)?e.slice(1):e,i=[r[0]].concat(n);for(let t=0,n=r.length;t<n;t++){const n=r[t];this.populate_(n,e,i)}}isRoot(e){return e===this.levelsMap[e][0]}directChildren(e){if(!this.isRoot(e))return[];return this.levelsMap[e].slice(1).map((e=>s.simpleCollapseStructure(e)?e:s.contentCollapseStructure(e)?e[1]:e[0]))}subtreeNodes(e){if(!this.isRoot(e))return[];const t=(e,n)=>{s.simpleCollapseStructure(e)?n.push(e):(e=e,s.contentCollapseStructure(e)&&(e=e.slice(1)),e.forEach((e=>t(e,n))))},n=this.levelsMap[e],r=[];return t(n.slice(1),r),r}}t.SemanticSkeleton=s},1784:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTree=void 0;const r=n(6671),i=n(4036),o=n(241),s=n(8122),a=n(9444),c=n(6161);n(7103);class l{constructor(e){this.mathml=e,this.parser=new s.SemanticMathml,this.root=this.parser.parse(e),this.collator=this.parser.getFactory().leafMap.collateMeaning();const t=this.collator.newDefault();t&&(this.parser=new s.SemanticMathml,this.parser.getFactory().defaultMap=t,this.root=this.parser.parse(e)),u.visit(this.root,{}),(0,i.annotate)(this.root)}static empty(){const e=r.parseInput("<math/>"),t=new l(e);return t.mathml=e,t}static fromNode(e,t){const n=l.empty();return n.root=e,t&&(n.mathml=t),n}static fromRoot(e,t){let n=e;for(;n.parent;)n=n.parent;const r=l.fromNode(n);return t&&(r.mathml=t),r}static fromXml(e){const t=l.empty();return e.childNodes[0]&&(t.root=a.SemanticNode.fromXml(e.childNodes[0])),t}xml(e){const t=r.parseInput("<stree></stree>"),n=this.root.xml(t.ownerDocument,e);return t.appendChild(n),t}toString(e){return r.serializeXml(this.xml(e))}formatXml(e){const t=this.toString(e);return r.formatXml(t)}displayTree(){this.root.displayTree()}replaceNode(e,t){const n=e.parent;n?n.replaceChild(e,t):this.root=t}toJson(){const e={};return e.stree=this.root.toJson(),e}}t.SemanticTree=l;const u=new o.SemanticVisitor("general","unit",((e,t)=>{if("infixop"===e.type&&("multiplication"===e.role||"implicit"===e.role)){const t=e.childNodes;t.length&&(c.isPureUnit(t[0])||c.isUnitCounter(t[0]))&&e.childNodes.slice(1).every(c.isPureUnit)&&(e.role="unit")}return!1}))},8901:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.partitionNodes=t.sliceNodes=t.getEmbellishedInner=t.addAttributes=t.isZeroLength=t.purgeNodes=t.isOrphanedGlyph=t.hasDisplayTag=t.hasEmptyTag=t.hasIgnoreTag=t.hasLeafTag=t.hasMathTag=t.directSpeechKeys=t.DISPLAYTAGS=t.EMPTYTAGS=t.IGNORETAGS=t.LEAFTAGS=void 0;const r=n(6671);function i(e){return!!e&&-1!==t.LEAFTAGS.indexOf(r.tagName(e))}function o(e,t,n){n&&e.reverse();const r=[];for(let i,o=0;i=e[o];o++){if(t(i))return n?{head:e.slice(o+1).reverse(),div:i,tail:r.reverse()}:{head:r,div:i,tail:e.slice(o+1)};r.push(i)}return n?{head:[],div:null,tail:r.reverse()}:{head:r,div:null,tail:[]}}t.LEAFTAGS=["MO","MI","MN","MTEXT","MS","MSPACE"],t.IGNORETAGS=["MERROR","MPHANTOM","MALIGNGROUP","MALIGNMARK","MPRESCRIPTS","ANNOTATION","ANNOTATION-XML"],t.EMPTYTAGS=["MATH","MROW","MPADDED","MACTION","NONE","MSTYLE","SEMANTICS"],t.DISPLAYTAGS=["MROOT","MSQRT"],t.directSpeechKeys=["aria-label","exact-speech","alt"],t.hasMathTag=function(e){return!!e&&"MATH"===r.tagName(e)},t.hasLeafTag=i,t.hasIgnoreTag=function(e){return!!e&&-1!==t.IGNORETAGS.indexOf(r.tagName(e))},t.hasEmptyTag=function(e){return!!e&&-1!==t.EMPTYTAGS.indexOf(r.tagName(e))},t.hasDisplayTag=function(e){return!!e&&-1!==t.DISPLAYTAGS.indexOf(r.tagName(e))},t.isOrphanedGlyph=function(e){return!!e&&"MGLYPH"===r.tagName(e)&&!i(e.parentNode)},t.purgeNodes=function(e){const n=[];for(let i,o=0;i=e[o];o++){if(i.nodeType!==r.NodeType.ELEMENT_NODE)continue;const e=r.tagName(i);-1===t.IGNORETAGS.indexOf(e)&&(-1!==t.EMPTYTAGS.indexOf(e)&&0===i.childNodes.length||n.push(i))}return n},t.isZeroLength=function(e){if(!e)return!1;if(-1!==["negativeveryverythinmathspace","negativeverythinmathspace","negativethinmathspace","negativemediummathspace","negativethickmathspace","negativeverythickmathspace","negativeveryverythickmathspace"].indexOf(e))return!0;const t=e.match(/[0-9.]+/);return!!t&&0===parseFloat(t[0])},t.addAttributes=function(e,n){if(n.hasAttributes()){const r=n.attributes;for(let n=r.length-1;n>=0;n--){const i=r[n].name;i.match(/^ext/)&&(e.attributes[i]=r[n].value,e.nobreaking=!0),-1!==t.directSpeechKeys.indexOf(i)&&(e.attributes["ext-speech"]=r[n].value,e.nobreaking=!0),i.match(/texclass$/)&&(e.attributes.texclass=r[n].value),"href"===i&&(e.attributes.href=r[n].value,e.nobreaking=!0)}}},t.getEmbellishedInner=function e(t){return t&&t.embellished&&t.childNodes.length>0?e(t.childNodes[0]):t},t.sliceNodes=o,t.partitionNodes=function(e,t){let n=e;const r=[],i=[];let s=null;do{s=o(n,t),i.push(s.head),r.push(s.div),n=s.tail}while(s.div);return r.pop(),{rel:r,comp:i}}},9135:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractSpeechGenerator=void 0;const r=n(985),i=n(8171),o=n(1848),s=n(144);t.AbstractSpeechGenerator=class{constructor(){this.modality=i.addPrefix("speech"),this.rebuilt_=null,this.options_={}}getRebuilt(){return this.rebuilt_}setRebuilt(e){this.rebuilt_=e}setOptions(e){this.options_=e||{},this.modality=i.addPrefix(this.options_.modality||"speech")}getOptions(){return this.options_}start(){}end(){}generateSpeech(e,t){return this.rebuilt_||(this.rebuilt_=new o.RebuildStree(t)),(0,r.setup)(this.options_),s.computeMarkup(this.getRebuilt().xml)}}},3153:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AdhocSpeechGenerator=void 0;const r=n(9135);class i extends r.AbstractSpeechGenerator{getSpeech(e,t){const n=this.generateSpeech(e,t);return e.setAttribute(this.modality,n),n}}t.AdhocSpeechGenerator=i},6281:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorGenerator=void 0;const r=n(8171),i=n(1123),o=n(1848),s=n(8835),a=n(9135);class c extends a.AbstractSpeechGenerator{constructor(){super(...arguments),this.modality=(0,r.addPrefix)("foreground"),this.contrast=new i.ContrastPicker}static visitStree_(e,t,n){if(e.childNodes.length){if(e.contentNodes.length&&("punctuated"===e.type&&e.contentNodes.forEach((e=>n[e.id]=!0)),"implicit"!==e.role&&t.push(e.contentNodes.map((e=>e.id)))),e.childNodes.length){if("implicit"===e.role){const r=[];let i=[];for(const t of e.childNodes){const e=[];c.visitStree_(t,e,n),e.length<=2&&r.push(e.shift()),i=i.concat(e)}return t.push(r),void i.forEach((e=>t.push(e)))}e.childNodes.forEach((e=>c.visitStree_(e,t,n)))}}else n[e.id]||t.push(e.id)}getSpeech(e,t){return s.getAttribute(e,this.modality)}generateSpeech(e,t){return this.getRebuilt()||this.setRebuilt(new o.RebuildStree(e)),this.colorLeaves_(e),s.getAttribute(e,this.modality)}colorLeaves_(e){const t=[];c.visitStree_(this.getRebuilt().streeRoot,t,{});for(const n of t){const t=this.contrast.generate();let r=!1;r=Array.isArray(n)?n.map((n=>this.colorLeave_(e,n,t))).reduce(((e,t)=>e||t),!1):this.colorLeave_(e,n.toString(),t),r&&this.contrast.increment()}}colorLeave_(e,t,n){const r=s.getBySemanticId(e,t);return!!r&&(r.setAttribute(this.modality,n),!0)}}t.ColorGenerator=c},1565:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectSpeechGenerator=void 0;const r=n(8835),i=n(9135);class o extends i.AbstractSpeechGenerator{getSpeech(e,t){return r.getAttribute(e,this.modality)}}t.DirectSpeechGenerator=o},7721:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DummySpeechGenerator=void 0;const r=n(9135);class i extends r.AbstractSpeechGenerator{getSpeech(e,t){return""}}t.DummySpeechGenerator=i},1558:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeSpeechGenerator=void 0;const r=n(8835),i=n(7486);class o extends i.TreeSpeechGenerator{getSpeech(e,t){return super.getSpeech(e,t),r.getAttribute(e,this.modality)}}t.NodeSpeechGenerator=o},7317:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.generatorMapping_=t.generator=void 0;const r=n(3153),i=n(6281),o=n(1565),s=n(7721),a=n(1558),c=n(5778),l=n(7486);t.generator=function(e){return(t.generatorMapping_[e]||t.generatorMapping_.Direct)()},t.generatorMapping_={Adhoc:()=>new r.AdhocSpeechGenerator,Color:()=>new i.ColorGenerator,Direct:()=>new o.DirectSpeechGenerator,Dummy:()=>new s.DummySpeechGenerator,Node:()=>new a.NodeSpeechGenerator,Summary:()=>new c.SummarySpeechGenerator,Tree:()=>new l.TreeSpeechGenerator}},144:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.computeSummary_=t.retrieveSummary=t.connectAllMactions=t.connectMactions=t.nodeAtPosition_=t.computePrefix_=t.retrievePrefix=t.addPrefix=t.addModality=t.addSpeech=t.recomputeMarkup=t.computeMarkup=t.recomputeSpeech=t.computeSpeech=void 0;const r=n(4253),i=n(6671),o=n(5024),s=n(8171),a=n(6060),c=n(1784),l=n(8835);function u(e){return a.SpeechRuleEngine.getInstance().evaluateNode(e)}function d(e){return u(c.SemanticTree.fromNode(e).xml())}function h(e){const t=d(e);return r.markup(t)}function p(e){const t=f(e);return r.markup(t)}function f(e){const t=c.SemanticTree.fromRoot(e),n=o.evalXPath('.//*[@id="'+e.id+'"]',t.xml());let r=n[0];return n.length>1&&(r=m(e,n)||r),r?a.SpeechRuleEngine.getInstance().runInSetting({modality:"prefix",domain:"default",style:"default",strict:!0,speech:!0},(function(){return a.SpeechRuleEngine.getInstance().evaluateNode(r)})):[]}function m(e,t){const n=t[0];if(!e.parent)return n;const r=[];for(;e;)r.push(e.id),e=e.parent;const i=function(e,t){for(;t.length&&t.shift().toString()===e.getAttribute("id")&&e.parentNode&&e.parentNode.parentNode;)e=e.parentNode.parentNode;return!t.length};for(let e,n=0;e=t[n];n++)if(i(e,r.slice()))return e;return n}function g(e){return e?a.SpeechRuleEngine.getInstance().runInSetting({modality:"summary",strict:!1,speech:!0},(function(){return a.SpeechRuleEngine.getInstance().evaluateNode(e)})):[]}t.computeSpeech=u,t.recomputeSpeech=d,t.computeMarkup=function(e){const t=u(e);return r.markup(t)},t.recomputeMarkup=h,t.addSpeech=function(e,t,n){const o=i.querySelectorAllByAttrValue(n,"id",t.id.toString())[0],a=o?r.markup(u(o)):h(t);e.setAttribute(s.Attribute.SPEECH,a)},t.addModality=function(e,t,n){const r=h(t);e.setAttribute(n,r)},t.addPrefix=function(e,t){const n=p(t);n&&e.setAttribute(s.Attribute.PREFIX,n)},t.retrievePrefix=p,t.computePrefix_=f,t.nodeAtPosition_=m,t.connectMactions=function(e,t,n){const r=i.querySelectorAll(t,"maction");for(let t,o=0;t=r[o];o++){const r=t.getAttribute("id"),o=i.querySelectorAllByAttrValue(e,"id",r)[0];if(!o)continue;const a=t.childNodes[1],c=a.getAttribute(s.Attribute.ID);let u=l.getBySemanticId(e,c);if(u&&"dummy"!==u.getAttribute(s.Attribute.TYPE))continue;if(u=o.childNodes[0],u.getAttribute("sre-highlighter-added"))continue;const d=a.getAttribute(s.Attribute.PARENT);d&&u.setAttribute(s.Attribute.PARENT,d),u.setAttribute(s.Attribute.TYPE,"dummy"),u.setAttribute(s.Attribute.ID,c);i.querySelectorAllByAttrValue(n,"id",c)[0].setAttribute("alternative",c)}},t.connectAllMactions=function(e,t){const n=i.querySelectorAll(e,"maction");for(let e,r=0;e=n[r];r++){const n=e.childNodes[1].getAttribute(s.Attribute.ID);i.querySelectorAllByAttrValue(t,"id",n)[0].setAttribute("alternative",n)}},t.retrieveSummary=function(e){const t=g(e);return r.markup(t)},t.computeSummary_=g},5778:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SummarySpeechGenerator=void 0;const r=n(9135),i=n(144);class o extends r.AbstractSpeechGenerator{getSpeech(e,t){return i.connectAllMactions(t,this.getRebuilt().xml),this.generateSpeech(e,t)}}t.SummarySpeechGenerator=o},7486:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TreeSpeechGenerator=void 0;const r=n(8171),i=n(8835),o=n(9135),s=n(144);class a extends o.AbstractSpeechGenerator{getSpeech(e,t){const n=this.generateSpeech(e,t),o=this.getRebuilt().nodeDict;for(const n in o){const a=o[n],c=i.getBySemanticId(t,n),l=i.getBySemanticId(e,n);c&&l&&(this.modality&&this.modality!==r.Attribute.SPEECH?s.addModality(l,a,this.modality):s.addSpeech(l,a,this.getRebuilt().xml),this.modality===r.Attribute.SPEECH&&s.addPrefix(l,a))}return n}}t.TreeSpeechGenerator=a},650:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.INTERVALS=t.makeLetter=t.numberRules=t.alphabetRules=t.getFont=t.makeInterval=t.generate=t.makeDomains_=t.Domains_=t.Base=t.Embellish=t.Font=void 0;const r=n(4886),i=n(2371),o=n(4524),s=n(3319),a=n(4161);var c,l,u;function d(){const e=o.LOCALE.ALPHABETS,n=(e,t)=>{const n={};return Object.keys(e).forEach((e=>n[e]=!0)),Object.keys(t).forEach((e=>n[e]=!0)),Object.keys(n)};t.Domains_.small=n(e.smallPrefix,e.letterTrans),t.Domains_.capital=n(e.capPrefix,e.letterTrans),t.Domains_.digit=n(e.digitPrefix,e.digitTrans)}function h(e){const t=e.toString(16).toUpperCase();return t.length>3?t:("000"+t).slice(-4)}function p([e,t],n){const r=parseInt(e,16),i=parseInt(t,16),o=[];for(let e=r;e<=i;e++){let t=h(e);!1!==n[t]&&(t=n[t]||t,o.push(t))}return o}function f(e){const t="normal"===e||"fullwidth"===e?"":o.LOCALE.MESSAGES.font[e]||o.LOCALE.MESSAGES.embellish[e]||"";return(0,s.localeFontCombiner)(t)}function m(e,n,r,i,s,a){const c=f(i);for(let i,l,u,d=0;i=e[d],l=n[d],u=r[d];d++){const e=a?o.LOCALE.ALPHABETS.capPrefix:o.LOCALE.ALPHABETS.smallPrefix,n=a?t.Domains_.capital:t.Domains_.small;S(c.combiner,i,l,u,c.font,e,s,o.LOCALE.ALPHABETS.letterTrans,n)}}function g(e,n,r,i,s){const a=f(r);for(let r,c,l=0;r=e[l],c=n[l];l++){const e=o.LOCALE.ALPHABETS.digitPrefix,n=l+s;S(a.combiner,r,c,n,a.font,e,i,o.LOCALE.ALPHABETS.digitTrans,t.Domains_.digit)}}function S(e,t,n,r,i,o,s,c,l){for(let u,d=0;u=l[d];d++){const l=u in c?c[u]:c.default,d=u in o?o[u]:o.default;a.defineRule(t.toString(),u,"default",s,n,e(l(r),i,d))}}!function(e){e.BOLD="bold",e.BOLDFRAKTUR="bold-fraktur",e.BOLDITALIC="bold-italic",e.BOLDSCRIPT="bold-script",e.DOUBLESTRUCK="double-struck",e.FULLWIDTH="fullwidth",e.FRAKTUR="fraktur",e.ITALIC="italic",e.MONOSPACE="monospace",e.NORMAL="normal",e.SCRIPT="script",e.SANSSERIF="sans-serif",e.SANSSERIFITALIC="sans-serif-italic",e.SANSSERIFBOLD="sans-serif-bold",e.SANSSERIFBOLDITALIC="sans-serif-bold-italic"}(c=t.Font||(t.Font={})),function(e){e.SUPER="super",e.SUB="sub",e.CIRCLED="circled",e.PARENTHESIZED="parenthesized",e.PERIOD="period",e.NEGATIVECIRCLED="negative-circled",e.DOUBLECIRCLED="double-circled",e.CIRCLEDSANSSERIF="circled-sans-serif",e.NEGATIVECIRCLEDSANSSERIF="negative-circled-sans-serif",e.COMMA="comma",e.SQUARED="squared",e.NEGATIVESQUARED="negative-squared"}(l=t.Embellish||(t.Embellish={})),function(e){e.LATINCAP="latinCap",e.LATINSMALL="latinSmall",e.GREEKCAP="greekCap",e.GREEKSMALL="greekSmall",e.DIGIT="digit"}(u=t.Base||(t.Base={})),t.Domains_={small:["default"],capital:["default"],digit:["default"]},t.makeDomains_=d,t.generate=function(e){const n=r.default.getInstance().locale;r.default.getInstance().locale=e,i.setLocale(),a.addSymbolRules({locale:e}),d();const s=t.INTERVALS;for(let e,t=0;e=s[t];t++){const t=p(e.interval,e.subst),n=t.map((function(e){return String.fromCodePoint(parseInt(e,16))}));if("offset"in e)g(t,n,e.font,e.category,e.offset||0);else{m(t,n,o.LOCALE.ALPHABETS[e.base],e.font,e.category,!!e.capital)}}r.default.getInstance().locale=n,i.setLocale()},t.makeInterval=p,t.getFont=f,t.alphabetRules=m,t.numberRules=g,t.makeLetter=S,t.INTERVALS=[{interval:["1D400","1D419"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.BOLD},{interval:["1D41A","1D433"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.BOLD},{interval:["1D56C","1D585"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.BOLDFRAKTUR},{interval:["1D586","1D59F"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.BOLDFRAKTUR},{interval:["1D468","1D481"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.BOLDITALIC},{interval:["1D482","1D49B"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.BOLDITALIC},{interval:["1D4D0","1D4E9"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.BOLDSCRIPT},{interval:["1D4EA","1D503"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.BOLDSCRIPT},{interval:["1D538","1D551"],base:u.LATINCAP,subst:{"1D53A":"2102","1D53F":"210D","1D545":"2115","1D547":"2119","1D548":"211A","1D549":"211D","1D551":"2124"},capital:!0,category:"Lu",font:c.DOUBLESTRUCK},{interval:["1D552","1D56B"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.DOUBLESTRUCK},{interval:["1D504","1D51D"],base:u.LATINCAP,subst:{"1D506":"212D","1D50B":"210C","1D50C":"2111","1D515":"211C","1D51D":"2128"},capital:!0,category:"Lu",font:c.FRAKTUR},{interval:["1D51E","1D537"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.FRAKTUR},{interval:["FF21","FF3A"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.FULLWIDTH},{interval:["FF41","FF5A"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.FULLWIDTH},{interval:["1D434","1D44D"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.ITALIC},{interval:["1D44E","1D467"],base:u.LATINSMALL,subst:{"1D455":"210E"},capital:!1,category:"Ll",font:c.ITALIC},{interval:["1D670","1D689"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.MONOSPACE},{interval:["1D68A","1D6A3"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.MONOSPACE},{interval:["0041","005A"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.NORMAL},{interval:["0061","007A"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.NORMAL},{interval:["1D49C","1D4B5"],base:u.LATINCAP,subst:{"1D49D":"212C","1D4A0":"2130","1D4A1":"2131","1D4A3":"210B","1D4A4":"2110","1D4A7":"2112","1D4A8":"2133","1D4AD":"211B"},capital:!0,category:"Lu",font:c.SCRIPT},{interval:["1D4B6","1D4CF"],base:u.LATINSMALL,subst:{"1D4BA":"212F","1D4BC":"210A","1D4C4":"2134"},capital:!1,category:"Ll",font:c.SCRIPT},{interval:["1D5A0","1D5B9"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.SANSSERIF},{interval:["1D5BA","1D5D3"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.SANSSERIF},{interval:["1D608","1D621"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.SANSSERIFITALIC},{interval:["1D622","1D63B"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.SANSSERIFITALIC},{interval:["1D5D4","1D5ED"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.SANSSERIFBOLD},{interval:["1D5EE","1D607"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.SANSSERIFBOLD},{interval:["1D63C","1D655"],base:u.LATINCAP,subst:{},capital:!0,category:"Lu",font:c.SANSSERIFBOLDITALIC},{interval:["1D656","1D66F"],base:u.LATINSMALL,subst:{},capital:!1,category:"Ll",font:c.SANSSERIFBOLDITALIC},{interval:["0391","03A9"],base:u.GREEKCAP,subst:{"03A2":"03F4"},capital:!0,category:"Lu",font:c.NORMAL},{interval:["03B0","03D0"],base:u.GREEKSMALL,subst:{"03B0":"2207","03CA":"2202","03CB":"03F5","03CC":"03D1","03CD":"03F0","03CE":"03D5","03CF":"03F1","03D0":"03D6"},capital:!1,category:"Ll",font:c.NORMAL},{interval:["1D6A8","1D6C0"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:c.BOLD},{interval:["1D6C1","1D6E1"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:c.BOLD},{interval:["1D6E2","1D6FA"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:c.ITALIC},{interval:["1D6FB","1D71B"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:c.ITALIC},{interval:["1D71C","1D734"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:c.BOLDITALIC},{interval:["1D735","1D755"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:c.BOLDITALIC},{interval:["1D756","1D76E"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:c.SANSSERIFBOLD},{interval:["1D76F","1D78F"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:c.SANSSERIFBOLD},{interval:["1D790","1D7A8"],base:u.GREEKCAP,subst:{},capital:!0,category:"Lu",font:c.SANSSERIFBOLDITALIC},{interval:["1D7A9","1D7C9"],base:u.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:c.SANSSERIFBOLDITALIC},{interval:["0030","0039"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:c.NORMAL},{interval:["2070","2079"],base:u.DIGIT,subst:{2071:"00B9",2072:"00B2",2073:"00B3"},offset:0,category:"No",font:l.SUPER},{interval:["2080","2089"],base:u.DIGIT,subst:{},offset:0,category:"No",font:l.SUB},{interval:["245F","2473"],base:u.DIGIT,subst:{"245F":"24EA"},offset:0,category:"No",font:l.CIRCLED},{interval:["3251","325F"],base:u.DIGIT,subst:{},offset:21,category:"No",font:l.CIRCLED},{interval:["32B1","32BF"],base:u.DIGIT,subst:{},offset:36,category:"No",font:l.CIRCLED},{interval:["2474","2487"],base:u.DIGIT,subst:{},offset:1,category:"No",font:l.PARENTHESIZED},{interval:["2487","249B"],base:u.DIGIT,subst:{2487:"1F100"},offset:0,category:"No",font:l.PERIOD},{interval:["2775","277F"],base:u.DIGIT,subst:{2775:"24FF"},offset:0,category:"No",font:l.NEGATIVECIRCLED},{interval:["24EB","24F4"],base:u.DIGIT,subst:{},offset:11,category:"No",font:l.NEGATIVECIRCLED},{interval:["24F5","24FE"],base:u.DIGIT,subst:{},offset:1,category:"No",font:l.DOUBLECIRCLED},{interval:["277F","2789"],base:u.DIGIT,subst:{"277F":"1F10B"},offset:0,category:"No",font:l.CIRCLEDSANSSERIF},{interval:["2789","2793"],base:u.DIGIT,subst:{2789:"1F10C"},offset:0,category:"No",font:l.NEGATIVECIRCLEDSANSSERIF},{interval:["FF10","FF19"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:c.FULLWIDTH},{interval:["1D7CE","1D7D7"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:c.BOLD},{interval:["1D7D8","1D7E1"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:c.DOUBLESTRUCK},{interval:["1D7E2","1D7EB"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:c.SANSSERIF},{interval:["1D7EC","1D7F5"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:c.SANSSERIFBOLD},{interval:["1D7F6","1D7FF"],base:u.DIGIT,subst:{},offset:0,category:"Nd",font:c.MONOSPACE},{interval:["1F101","1F10A"],base:u.DIGIT,subst:{},offset:0,category:"No",font:l.COMMA},{interval:["24B6","24CF"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:l.CIRCLED},{interval:["24D0","24E9"],base:u.LATINSMALL,subst:{},capital:!1,category:"So",font:l.CIRCLED},{interval:["1F110","1F129"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:l.PARENTHESIZED},{interval:["249C","24B5"],base:u.LATINSMALL,subst:{},capital:!1,category:"So",font:l.PARENTHESIZED},{interval:["1F130","1F149"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:l.SQUARED},{interval:["1F170","1F189"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:l.NEGATIVESQUARED},{interval:["1F150","1F169"],base:u.LATINCAP,subst:{},capital:!0,category:"So",font:l.NEGATIVECIRCLED}]},3955:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.Comparator=t.ClearspeakPreferences=void 0;const r=n(4886),i=n(4998),o=n(8310),s=n(8310),a=n(4161),c=n(6060);class l extends o.DynamicCstr{constructor(e,t){super(e),this.preference=t}static comparator(){return new d(r.default.getInstance().dynamicCstr,s.DynamicProperties.createProp([o.DynamicCstr.DEFAULT_VALUES[s.Axis.LOCALE]],[o.DynamicCstr.DEFAULT_VALUES[s.Axis.MODALITY]],[o.DynamicCstr.DEFAULT_VALUES[s.Axis.DOMAIN]],[o.DynamicCstr.DEFAULT_VALUES[s.Axis.STYLE]]))}static fromPreference(e){const t=e.split(":"),n={},r=u.getProperties(),i=Object.keys(r);for(let e,o=0;e=t[o];o++){const t=e.split("_");if(-1===i.indexOf(t[0]))continue;const o=t[1];o&&o!==l.AUTO&&-1!==r[t[0]].indexOf(o)&&(n[t[0]]=t[1])}return n}static toPreference(e){const t=Object.keys(e),n=[];for(let r=0;r<t.length;r++)n.push(t[r]+"_"+e[t[r]]);return n.length?n.join(":"):o.DynamicCstr.DEFAULT_VALUE}static getLocalePreferences(e){const t=e||a.enumerate(c.SpeechRuleEngine.getInstance().enumerate());return l.getLocalePreferences_(t)}static smartPreferences(e,t){const n=l.getLocalePreferences()[t];if(!n)return[];const r=e.explorers.speech,o=l.relevantPreferences(r.walker.getFocus().getSemanticPrimary()),s=i.DOMAIN_TO_STYLES.clearspeak;return[{type:"radio",content:"No Preferences",id:"clearspeak-default",variable:"speechRules"},{type:"radio",content:"Current Preferences",id:"clearspeak-"+s,variable:"speechRules"},{type:"rule"},{type:"label",content:"Preferences for "+o},{type:"rule"}].concat(n[o].map((function(e){const t=e.split("_");return{type:"radio",content:t[1],id:"clearspeak-"+l.addPreference(s,t[0],t[1]),variable:"speechRules"}})))}static relevantPreferences(e){const t=f[e.type];return t&&(t[e.role]||t[""])||"ImpliedTimes"}static findPreference(e,t){if("default"===e)return l.AUTO;return l.fromPreference(e)[t]||l.AUTO}static addPreference(e,t,n){if("default"===e)return t+"_"+n;const r=l.fromPreference(e);return r[t]=n,l.toPreference(r)}static getLocalePreferences_(e){const t={};for(const n in e){if(!e[n].speech||!e[n].speech.clearspeak)continue;const r=Object.keys(e[n].speech.clearspeak),i=t[n]={};for(const e in u.getProperties()){const t=u.getProperties()[e],n=[e+"_Auto"];if(t)for(const i of t)-1!==r.indexOf(e+"_"+i)&&n.push(e+"_"+i);i[e]=n}}return t}equal(e){if(!super.equal(e))return!1;const t=Object.keys(this.preference),n=e.preference;if(t.length!==Object.keys(n).length)return!1;for(let e,r=0;e=t[r];r++)if(this.preference[e]!==n[e])return!1;return!0}}t.ClearspeakPreferences=l,l.AUTO="Auto";const u=new s.DynamicProperties({AbsoluteValue:["Auto","AbsEnd","Cardinality","Determinant"],Bar:["Auto","Conjugate"],Caps:["Auto","SayCaps"],CombinationPermutation:["Auto","ChoosePermute"],Currency:["Auto","Position","Prefix"],Ellipses:["Auto","AndSoOn"],Enclosed:["Auto","EndEnclose"],Exponent:["Auto","AfterPower","Ordinal","OrdinalPower","Exponent"],Fraction:["Auto","EndFrac","FracOver","General","GeneralEndFrac","Ordinal","Over","OverEndFrac","Per"],Functions:["Auto","None","Reciprocal"],ImpliedTimes:["Auto","MoreImpliedTimes","None"],Log:["Auto","LnAsNaturalLog"],Matrix:["Auto","Combinatoric","EndMatrix","EndVector","SilentColNum","SpeakColNum","Vector"],MultiLineLabel:["Auto","Case","Constraint","Equation","Line","None","Row","Step"],MultiLineOverview:["Auto","None"],MultiLinePausesBetweenColumns:["Auto","Long","Short"],MultsymbolDot:["Auto","Dot"],MultsymbolX:["Auto","By","Cross"],Paren:["Auto","CoordPoint","Interval","Silent","Speak","SpeakNestingLevel"],Prime:["Auto","Angle","Length"],Roots:["Auto","PosNegSqRoot","PosNegSqRootEnd","RootEnd"],SetMemberSymbol:["Auto","Belongs","Element","Member","In"],Sets:["Auto","SilentBracket","woAll"],TriangleSymbol:["Auto","Delta"],Trig:["Auto","ArcTrig","TrigInverse","Reciprocal"],VerticalLine:["Auto","Divides","Given","SuchThat"]});class d extends s.DefaultComparator{constructor(e,t){super(e,t),this.preference=e instanceof l?e.preference:{}}match(e){if(!(e instanceof l))return super.match(e);if("default"===e.getComponents()[s.Axis.STYLE])return!0;const t=Object.keys(e.preference);for(let n,r=0;n=t[r];r++)if(this.preference[n]!==e.preference[n])return!1;return!0}compare(e,t){const n=super.compare(e,t);if(0!==n)return n;const r=e instanceof l,i=t instanceof l;if(!r&&i)return 1;if(r&&!i)return-1;if(!r&&!i)return 0;const o=Object.keys(e.preference).length,s=Object.keys(t.preference).length;return o>s?-1:o<s?1:0}}t.Comparator=d;class h extends s.DynamicCstrParser{constructor(){super([s.Axis.LOCALE,s.Axis.MODALITY,s.Axis.DOMAIN,s.Axis.STYLE])}parse(e){const t=super.parse(e);let n=t.getValue(s.Axis.STYLE);const r=t.getValue(s.Axis.LOCALE),i=t.getValue(s.Axis.MODALITY);let a={};return n!==o.DynamicCstr.DEFAULT_VALUE&&(a=this.fromPreference(n),n=this.toPreference(a)),new l({locale:r,modality:i,domain:"clearspeak",style:n},a)}fromPreference(e){return l.fromPreference(e)}toPreference(e){return l.toPreference(e)}}t.Parser=h;const p=[["AbsoluteValue","fenced","neutral","metric"],["Bar","overscore","overaccent"],["Caps","identifier","latinletter"],["CombinationPermutation","appl","unknown"],["Ellipses","punctuation","ellipsis"],["Exponent","superscript",""],["Fraction","fraction",""],["Functions","appl","simple function"],["ImpliedTimes","operator","implicit"],["Log","appl","prefix function"],["Matrix","matrix",""],["Matrix","vector",""],["MultiLineLabel","multiline","label"],["MultiLineOverview","multiline","table"],["MultiLinePausesBetweenColumns","multiline","table"],["MultiLineLabel","table","label"],["MultiLineOverview","table","table"],["MultiLinePausesBetweenColumns","table","table"],["MultiLineLabel","cases","label"],["MultiLineOverview","cases","table"],["MultiLinePausesBetweenColumns","cases","table"],["MultsymbolDot","operator","multiplication"],["MultsymbolX","operator","multiplication"],["Paren","fenced","leftright"],["Prime","superscript","prime"],["Roots","root",""],["Roots","sqrt",""],["SetMemberSymbol","relation","element"],["Sets","fenced","set extended"],["TriangleSymbol","identifier","greekletter"],["Trig","appl","prefix function"],["VerticalLine","punctuated","vbar"]],f=function(){const e={};for(let t,n=0;t=p[n];n++){const n=t[0];let r=e[t[1]];r||(r={},e[t[1]]=r),r[t[2]]=n}return e}();r.default.getInstance().comparators.clearspeak=l.comparator,r.default.getInstance().parsers.clearspeak=new h},127:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClearspeakRules=void 0;const r=n(8310),i=n(931),o=n(8662),s=n(3269),a=n(2110),c=n(7278);t.ClearspeakRules=function(){c.addStore(r.DynamicCstr.BASE_LOCALE+".speech.clearspeak","",{CTFpauseSeparator:i.pauseSeparator,CTFnodeCounter:o.nodeCounter,CTFcontentIterator:i.contentIterator,CSFvulgarFraction:a.vulgarFraction,CQFvulgarFractionSmall:o.isSmallVulgarFraction,CQFcellsSimple:o.allCellsSimple,CSFordinalExponent:o.ordinalExponent,CSFwordOrdinal:o.wordOrdinal,CQFmatchingFences:o.matchingFences,CSFnestingDepth:o.nestingDepth,CQFfencedArguments:o.fencedArguments,CQFsimpleArguments:o.simpleArguments,CQFspaceoutNumber:s.spaceoutNumber})}},8662:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.wordOrdinal=t.layoutFactor_=t.fencedFactor_=t.simpleFactor_=t.simpleArguments=t.fencedArguments=t.insertNesting=t.matchingFences=t.nestingDepth=t.NESTING_DEPTH=t.ordinalExponent=t.allTextLastContent_=t.isUnitExpression=t.isSmallVulgarFraction=t.allCellsSimple=t.allIndices_=t.isInteger_=t.simpleCell_=t.simpleNode=t.hasPreference=t.isSimpleFraction_=t.isSimpleNumber_=t.isNumber_=t.isLetter_=t.isSimple_=t.isSimpleLetters_=t.isSimpleDegree_=t.isSimpleNegative_=t.isSimpleFunction_=t.isSimpleExpression=t.nodeCounter=void 0;const r=n(6671),i=n(4886),o=n(5024),s=n(4524),a=n(9385),c=n(1058),l=n(931),u=n(4036),d=n(241),h=n(4020);function p(e){return y(e)||S(e)||g(e)||m(e)||f(e)}function f(e){return"appl"===e.type&&("prefix function"===e.childNodes[0].role||"simple function"===e.childNodes[0].role)&&(b(e.childNodes[1])||"fenced"===e.childNodes[1].type&&b(e.childNodes[1].childNodes[0]))}function m(e){return"prefixop"===e.type&&"negative"===e.role&&b(e.childNodes[0])&&"prefixop"!==e.childNodes[0].type&&"appl"!==e.childNodes[0].type&&"punctuated"!==e.childNodes[0].type}function g(e){return"punctuated"===e.type&&"endpunct"===e.role&&2===e.childNodes.length&&"degree"===e.childNodes[1].role&&(N(e.childNodes[0])||E(e.childNodes[0])||"prefixop"===e.childNodes[0].type&&"negative"===e.childNodes[0].role&&(N(e.childNodes[0].childNodes[0])||E(e.childNodes[0].childNodes[0])))}function S(e){return N(e)||"infixop"===e.type&&"implicit"===e.role&&(2===e.childNodes.length&&(N(e.childNodes[0])||y(e.childNodes[0]))&&N(e.childNodes[1])||3===e.childNodes.length&&y(e.childNodes[0])&&N(e.childNodes[1])&&N(e.childNodes[2]))}function b(e){return e.hasAnnotation("clearspeak","simple")}function N(e){return"identifier"===e.type&&("latinletter"===e.role||"greekletter"===e.role||"otherletter"===e.role||"simple function"===e.role)}function E(e){return"number"===e.type&&("integer"===e.role||"float"===e.role)}function y(e){return E(e)||A(e)}function A(e){if(_("Fraction_Over")||_("Fraction_FracOver"))return!1;if("fraction"!==e.type||"vulgar"!==e.role)return!1;if(_("Fraction_Ordinal"))return!0;const t=parseInt(e.childNodes[0].textContent,10),n=parseInt(e.childNodes[1].textContent,10);return t>0&&t<20&&n>0&&n<11}function _(e){return i.default.getInstance().style===e}function C(e){if(!e.hasAttribute("annotation"))return!1;const t=e.getAttribute("annotation");return!!/clearspeak:simple$|clearspeak:simple;/.exec(t)}function T(e){if(C(e))return!0;if("subscript"!==e.tagName)return!1;const t=e.childNodes[0].childNodes,n=t[1];return"identifier"===t[0].tagName&&(v(n)||"infixop"===n.tagName&&n.hasAttribute("role")&&"implicit"===n.getAttribute("role")&&O(n))}function v(e){return"number"===e.tagName&&e.hasAttribute("role")&&"integer"===e.getAttribute("role")}function O(e){return o.evalXPath("children/*",e).every((e=>v(e)||"identifier"===e.tagName))}function M(e){return"text"===e.type||"punctuated"===e.type&&"text"===e.role&&E(e.childNodes[0])&&I(e.childNodes.slice(1))||"identifier"===e.type&&"unit"===e.role||"infixop"===e.type&&("implicit"===e.role||"unit"===e.role)}function I(e){for(let t=0;t<e.length-1;t++)if("text"!==e[t].type||""!==e[t].textContent)return!1;return"text"===e[e.length-1].type}function L(e,t){if(!t||!e)return e;const n=e.match(/^(open|close) /);return n?n[0]+t+" "+e.substring(n[0].length):t+" "+e}function R(e){return!!e&&("number"===e.tagName||"identifier"===e.tagName||"function"===e.tagName||"appl"===e.tagName||"fraction"===e.tagName)}function x(e){return e&&("fenced"===e.tagName||e.hasAttribute("role")&&"leftright"===e.getAttribute("role")||P(e))}function P(e){return!!e&&("matrix"===e.tagName||"vector"===e.tagName)}t.nodeCounter=function(e,t){const n=t.split("-"),r=l.nodeCounter(e,n[0]||""),i=n[1]||"",o=n[2]||"";let s=!0;return function(){const e=r();return s?(s=!1,o+e+i):e+i}},t.isSimpleExpression=p,t.isSimpleFunction_=f,t.isSimpleNegative_=m,t.isSimpleDegree_=g,t.isSimpleLetters_=S,t.isSimple_=b,t.isLetter_=N,t.isNumber_=E,t.isSimpleNumber_=y,t.isSimpleFraction_=A,t.hasPreference=_,(0,u.register)(new d.SemanticAnnotator("clearspeak","simple",(function(e){return p(e)?"simple":""}))),t.simpleNode=C,t.simpleCell_=T,t.isInteger_=v,t.allIndices_=O,t.allCellsSimple=function(e){const t="matrix"===e.tagName?"children/row/children/cell/children/*":"children/line/children/*";return o.evalXPath(t,e).every(T)?[e]:[]},t.isSmallVulgarFraction=function(e){return(0,a.vulgarFractionSmall)(e,20,11)?[e]:[]},t.isUnitExpression=M,t.allTextLastContent_=I,(0,u.register)(new d.SemanticAnnotator("clearspeak","unit",(function(e){return M(e)?"unit":""}))),t.ordinalExponent=function(e){const t=parseInt(e.textContent,10);return isNaN(t)?e.textContent:t>10?s.LOCALE.NUMBERS.numericOrdinal(t):s.LOCALE.NUMBERS.wordOrdinal(t)},t.NESTING_DEPTH=null,t.nestingDepth=function(e){let n=0;const r=e.textContent,i="open"===e.getAttribute("role")?0:1;let o=e.parentNode;for(;o;)"fenced"===o.tagName&&o.childNodes[0].childNodes[i].textContent===r&&n++,o=o.parentNode;return t.NESTING_DEPTH=n>1?s.LOCALE.NUMBERS.wordOrdinal(n):"",t.NESTING_DEPTH},t.matchingFences=function(e){const t=e.previousSibling;let n,r;return t?(n=t,r=e):(n=e,r=e.nextSibling),r&&(0,h.isMatchingFence)(n.textContent,r.textContent)?[e]:[]},t.insertNesting=L,c.Grammar.getInstance().setCorrection("insertNesting",L),t.fencedArguments=function(e){const t=r.toArray(e.parentNode.childNodes),n=o.evalXPath("../../children/*",e),i=t.indexOf(e);return x(n[i])||x(n[i+1])?[e]:[]},t.simpleArguments=function(e){const t=r.toArray(e.parentNode.childNodes),n=o.evalXPath("../../children/*",e),i=t.indexOf(e);return R(n[i])&&n[i+1]&&(R(n[i+1])||"root"===n[i+1].tagName||"sqrt"===n[i+1].tagName||"superscript"===n[i+1].tagName&&n[i+1].childNodes[0].childNodes[0]&&("number"===n[i+1].childNodes[0].childNodes[0].tagName||"identifier"===n[i+1].childNodes[0].childNodes[0].tagName)&&("2"===n[i+1].childNodes[0].childNodes[1].textContent||"3"===n[i+1].childNodes[0].childNodes[1].textContent))?[e]:[]},t.simpleFactor_=R,t.fencedFactor_=x,t.layoutFactor_=P,t.wordOrdinal=function(e){return s.LOCALE.NUMBERS.wordOrdinal(parseInt(e.textContent,10))}},5659:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadAjax=t.loadFileSync=t.loadFile=t.parseMaps=t.retrieveFiles=t.standardLoader=t.loadLocale=t.store=void 0;const i=n(9501),o=n(4886),s=n(4998),a=n(7129),c=n(4755),l=n(8310),u=n(4161),d=n(6060),h=n(2371),p=n(650);t.store=u;const f={functions:u.addFunctionRules,symbols:u.addSymbolRules,units:u.addUnitRules,si:u.setSiPrefixes};let m=!1;function g(e=o.default.getInstance().locale){o.EnginePromise.loaded[e]||(o.EnginePromise.loaded[e]=[!1,!1],function(e){if(o.default.getInstance().isIE&&o.default.getInstance().mode===s.Mode.HTTP)return void y(e);b(e)}(e))}function S(){switch(o.default.getInstance().mode){case s.Mode.ASYNC:return A;case s.Mode.HTTP:return C;case s.Mode.SYNC:default:return _}}function b(e){const t=o.default.getInstance().customLoader?o.default.getInstance().customLoader:S(),n=new Promise((n=>{t(e).then((t=>{N(t),o.EnginePromise.loaded[e]=[!0,!0],n(e)}),(t=>{o.EnginePromise.loaded[e]=[!0,!1],console.error(`Unable to load locale: ${e}`),o.default.getInstance().locale=o.default.getInstance().defaultLocale,n(e)}))}));o.EnginePromise.promises[e]=n}function N(e){E(JSON.parse(e))}function E(e,t){let n=!0;for(let r,i=0;r=Object.keys(e)[i];i++){const i=r.split("/");t&&t!==i[0]||("rules"===i[1]?d.SpeechRuleEngine.getInstance().addStore(e[r]):"messages"===i[1]?(0,h.completeLocale)(e[r]):(n&&(p.generate(i[0]),n=!1),e[r].forEach(f[i[1]])))}}function y(e,t){let n=t||1;i.mapsForIE?E(i.mapsForIE,e):n<=5&&setTimeout((()=>y(e,n++)).bind(this),300)}function A(e){const t=a.localePath(e);return new Promise(((e,n)=>{c.default.fs.readFile(t,"utf8",((t,r)=>{if(t)return n(t);e(r)}))}))}function _(e){const t=a.localePath(e);return new Promise(((e,n)=>{let r="{}";try{r=c.default.fs.readFileSync(t,"utf8")}catch(e){return n(e)}e(r)}))}function C(e){const t=a.localePath(e),n=new XMLHttpRequest;return new Promise(((e,r)=>{n.onreadystatechange=function(){if(4===n.readyState){const t=n.status;0===t||t>=200&&t<400?e(n.responseText):r(t)}},n.open("GET",t,!0),n.send()}))}t.loadLocale=function(e=o.default.getInstance().locale){return r(this,void 0,void 0,(function*(){return m||(g(l.DynamicCstr.BASE_LOCALE),m=!0),o.EnginePromise.promises[l.DynamicCstr.BASE_LOCALE].then((()=>r(this,void 0,void 0,(function*(){const t=o.default.getInstance().defaultLocale;return t?(g(t),o.EnginePromise.promises[t].then((()=>r(this,void 0,void 0,(function*(){return g(e),o.EnginePromise.promises[e]}))))):(g(e),o.EnginePromise.promises[e])}))))}))},t.standardLoader=S,t.retrieveFiles=b,t.parseMaps=N,t.loadFile=A,t.loadFileSync=_,t.loadAjax=C},3784:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.leftSubscriptBrief=t.leftSuperscriptBrief=t.leftSubscriptVerbose=t.leftSuperscriptVerbose=t.baselineBrief=t.baselineVerbose=void 0;const r=n(3269);t.baselineVerbose=function(e){return r.baselineVerbose(e).replace(/-$/,"")},t.baselineBrief=function(e){return r.baselineBrief(e).replace(/-$/,"")},t.leftSuperscriptVerbose=function(e){return r.superscriptVerbose(e).replace(/^exposant/,"exposant gauche")},t.leftSubscriptVerbose=function(e){return r.subscriptVerbose(e).replace(/^indice/,"indice gauche")},t.leftSuperscriptBrief=function(e){return r.superscriptBrief(e).replace(/^sup/,"sup gauche")},t.leftSubscriptBrief=function(e){return r.subscriptBrief(e).replace(/^sub/,"sub gauche")}},4972:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MathspeakRules=void 0;const r=n(8310),i=n(931),o=n(3784),s=n(3269),a=n(2110),c=n(7278),l=n(9771);t.MathspeakRules=function(){c.addStore(r.DynamicCstr.BASE_LOCALE+".speech.mathspeak","",{CQFspaceoutNumber:s.spaceoutNumber,CQFspaceoutIdentifier:s.spaceoutIdentifier,CSFspaceoutText:s.spaceoutText,CSFopenFracVerbose:s.openingFractionVerbose,CSFcloseFracVerbose:s.closingFractionVerbose,CSFoverFracVerbose:s.overFractionVerbose,CSFopenFracBrief:s.openingFractionBrief,CSFcloseFracBrief:s.closingFractionBrief,CSFopenFracSbrief:s.openingFractionSbrief,CSFcloseFracSbrief:s.closingFractionSbrief,CSFoverFracSbrief:s.overFractionSbrief,CSFvulgarFraction:a.vulgarFraction,CQFvulgarFractionSmall:s.isSmallVulgarFraction,CSFopenRadicalVerbose:s.openingRadicalVerbose,CSFcloseRadicalVerbose:s.closingRadicalVerbose,CSFindexRadicalVerbose:s.indexRadicalVerbose,CSFopenRadicalBrief:s.openingRadicalBrief,CSFcloseRadicalBrief:s.closingRadicalBrief,CSFindexRadicalBrief:s.indexRadicalBrief,CSFopenRadicalSbrief:s.openingRadicalSbrief,CSFindexRadicalSbrief:s.indexRadicalSbrief,CQFisSmallRoot:s.smallRoot,CSFsuperscriptVerbose:s.superscriptVerbose,CSFsuperscriptBrief:s.superscriptBrief,CSFsubscriptVerbose:s.subscriptVerbose,CSFsubscriptBrief:s.subscriptBrief,CSFbaselineVerbose:s.baselineVerbose,CSFbaselineBrief:s.baselineBrief,CSFleftsuperscriptVerbose:s.superscriptVerbose,CSFleftsubscriptVerbose:s.subscriptVerbose,CSFrightsuperscriptVerbose:s.superscriptVerbose,CSFrightsubscriptVerbose:s.subscriptVerbose,CSFleftsuperscriptBrief:s.superscriptBrief,CSFleftsubscriptBrief:s.subscriptBrief,CSFrightsuperscriptBrief:s.superscriptBrief,CSFrightsubscriptBrief:s.subscriptBrief,CSFunderscript:s.nestedUnderscript,CSFoverscript:s.nestedOverscript,CSFendscripts:s.endscripts,CTFordinalCounter:a.ordinalCounter,CTFwordCounter:a.wordCounter,CTFcontentIterator:i.contentIterator,CQFdetIsSimple:s.determinantIsSimple,CSFRemoveParens:s.removeParens,CQFresetNesting:s.resetNestingDepth,CGFbaselineConstraint:s.generateBaselineConstraint,CGFtensorRules:s.generateTensorRules}),c.addStore("es.speech.mathspeak",r.DynamicCstr.BASE_LOCALE+".speech.mathspeak",{CTFunitMultipliers:l.unitMultipliers,CQFoneLeft:l.oneLeft}),c.addStore("fr.speech.mathspeak",r.DynamicCstr.BASE_LOCALE+".speech.mathspeak",{CSFbaselineVerbose:o.baselineVerbose,CSFbaselineBrief:o.baselineBrief,CSFleftsuperscriptVerbose:o.leftSuperscriptVerbose,CSFleftsubscriptVerbose:o.leftSubscriptVerbose,CSFleftsuperscriptBrief:o.leftSuperscriptBrief,CSFleftsubscriptBrief:o.leftSubscriptBrief})}},3269:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.smallRoot=t.generateTensorRules=t.removeParens=t.generateBaselineConstraint=t.determinantIsSimple=t.nestedOverscript=t.endscripts=t.overscoreNestingDepth=t.nestedUnderscript=t.underscoreNestingDepth=t.indexRadicalSbrief=t.openingRadicalSbrief=t.indexRadicalBrief=t.closingRadicalBrief=t.openingRadicalBrief=t.indexRadicalVerbose=t.closingRadicalVerbose=t.openingRadicalVerbose=t.getRootIndex=t.nestedRadical=t.radicalNestingDepth=t.baselineBrief=t.baselineVerbose=t.superscriptBrief=t.superscriptVerbose=t.subscriptBrief=t.subscriptVerbose=t.nestedSubSuper=t.isSmallVulgarFraction=t.overFractionSbrief=t.closingFractionSbrief=t.openingFractionSbrief=t.closingFractionBrief=t.openingFractionBrief=t.overFractionVerbose=t.closingFractionVerbose=t.openingFractionVerbose=t.nestedFraction=t.fractionNestingDepth=t.computeNestingDepth_=t.containsAttr=t.getNestingDepth=t.resetNestingDepth=t.nestingBarriers=t.spaceoutIdentifier=t.spaceoutNumber=t.spaceoutNodes=t.spaceoutText=void 0;const r=n(1426),i=n(6671),o=n(5024),s=n(4524),a=n(7793);let c={};function l(e,t){const n=Array.from(e.textContent),r=[],i=a.default.getInstance(),o=e.ownerDocument;for(let e,s=0;e=n[s];s++){const n=i.getNodeFactory().makeLeafNode(e,"unknown"),s=i.identifierNode(n,"unknown","");t(s),r.push(s.xml(o))}return r}function u(e,n,o,s,a,l){s=s||t.nestingBarriers,a=a||{},l=l||function(e){return!1};const u=i.serializeXml(n);if(c[e]||(c[e]={}),c[e][u])return c[e][u];if(l(n)||o.indexOf(n.tagName)<0)return 0;const d=h(n,o,r.setdifference(s,o),a,l,0);return c[e][u]=d,d}function d(e,t){if(!e.attributes)return!1;const n=i.toArray(e.attributes);for(let e,r=0;e=n[r];r++)if(t[e.nodeName]===e.nodeValue)return!0;return!1}function h(e,t,n,r,o,s){if(o(e)||n.indexOf(e.tagName)>-1||d(e,r))return s;if(t.indexOf(e.tagName)>-1&&s++,!e.childNodes||0===e.childNodes.length)return s;const a=i.toArray(e.childNodes);return Math.max.apply(null,a.map((function(e){return h(e,t,n,r,o,s)})))}function p(e){return u("fraction",e,["fraction"],t.nestingBarriers,{},s.LOCALE.FUNCTIONS.fracNestDepth)}function f(e,t,n){const r=p(e),i=Array(r).fill(t);return n&&i.push(n),i.join(s.LOCALE.MESSAGES.regexp.JOINER_FRAC)}function m(e,t,n){for(;e.parentNode;){const r=e.parentNode,i=r.parentNode;if(!i)break;const o=e.getAttribute&&e.getAttribute("role");("subscript"===i.tagName&&e===r.childNodes[1]||"tensor"===i.tagName&&o&&("leftsub"===o||"rightsub"===o))&&(t=n.sub+s.LOCALE.MESSAGES.regexp.JOINER_SUBSUPER+t),("superscript"===i.tagName&&e===r.childNodes[1]||"tensor"===i.tagName&&o&&("leftsuper"===o||"rightsuper"===o))&&(t=n.sup+s.LOCALE.MESSAGES.regexp.JOINER_SUBSUPER+t),e=i}return t.trim()}function g(e){return u("radical",e,["sqrt","root"],t.nestingBarriers,{})}function S(e,t,n){const r=g(e),i=b(e);return n=i?s.LOCALE.FUNCTIONS.combineRootIndex(n,i):n,1===r?n:s.LOCALE.FUNCTIONS.combineNestedRadical(t,s.LOCALE.FUNCTIONS.radicalNestDepth(r-1),n)}function b(e){const t="sqrt"===e.tagName?"2":o.evalXPath("children/*[1]",e)[0].textContent.trim();return s.LOCALE.MESSAGES.MSroots[t]||""}function N(e){return u("underscore",e,["underscore"],t.nestingBarriers,{},(function(e){return e.tagName&&"underscore"===e.tagName&&"underaccent"===e.childNodes[0].childNodes[1].getAttribute("role")}))}function E(e){return u("overscore",e,["overscore"],t.nestingBarriers,{},(function(e){return e.tagName&&"overscore"===e.tagName&&"overaccent"===e.childNodes[0].childNodes[1].getAttribute("role")}))}t.spaceoutText=function(e){return Array.from(e.textContent).join(" ")},t.spaceoutNodes=l,t.spaceoutNumber=function(e){return l(e,(function(e){e.textContent.match(/\W/)||(e.type="number")}))},t.spaceoutIdentifier=function(e){return l(e,(function(e){e.font="unknown",e.type="identifier"}))},t.nestingBarriers=["cases","cell","integral","line","matrix","multiline","overscore","root","row","sqrt","subscript","superscript","table","underscore","vector"],t.resetNestingDepth=function(e){return c={},[e]},t.getNestingDepth=u,t.containsAttr=d,t.computeNestingDepth_=h,t.fractionNestingDepth=p,t.nestedFraction=f,t.openingFractionVerbose=function(e){return f(e,s.LOCALE.MESSAGES.MS.START,s.LOCALE.MESSAGES.MS.FRAC_V)},t.closingFractionVerbose=function(e){return f(e,s.LOCALE.MESSAGES.MS.END,s.LOCALE.MESSAGES.MS.FRAC_V)},t.overFractionVerbose=function(e){return f(e,s.LOCALE.MESSAGES.MS.FRAC_OVER)},t.openingFractionBrief=function(e){return f(e,s.LOCALE.MESSAGES.MS.START,s.LOCALE.MESSAGES.MS.FRAC_B)},t.closingFractionBrief=function(e){return f(e,s.LOCALE.MESSAGES.MS.END,s.LOCALE.MESSAGES.MS.FRAC_B)},t.openingFractionSbrief=function(e){const t=p(e);return 1===t?s.LOCALE.MESSAGES.MS.FRAC_S:s.LOCALE.FUNCTIONS.combineNestedFraction(s.LOCALE.MESSAGES.MS.NEST_FRAC,s.LOCALE.FUNCTIONS.radicalNestDepth(t-1),s.LOCALE.MESSAGES.MS.FRAC_S)},t.closingFractionSbrief=function(e){const t=p(e);return 1===t?s.LOCALE.MESSAGES.MS.ENDFRAC:s.LOCALE.FUNCTIONS.combineNestedFraction(s.LOCALE.MESSAGES.MS.NEST_FRAC,s.LOCALE.FUNCTIONS.radicalNestDepth(t-1),s.LOCALE.MESSAGES.MS.ENDFRAC)},t.overFractionSbrief=function(e){const t=p(e);return 1===t?s.LOCALE.MESSAGES.MS.FRAC_OVER:s.LOCALE.FUNCTIONS.combineNestedFraction(s.LOCALE.MESSAGES.MS.NEST_FRAC,s.LOCALE.FUNCTIONS.radicalNestDepth(t-1),s.LOCALE.MESSAGES.MS.FRAC_OVER)},t.isSmallVulgarFraction=function(e){return s.LOCALE.FUNCTIONS.fracNestDepth(e)?[e]:[]},t.nestedSubSuper=m,t.subscriptVerbose=function(e){return m(e,s.LOCALE.MESSAGES.MS.SUBSCRIPT,{sup:s.LOCALE.MESSAGES.MS.SUPER,sub:s.LOCALE.MESSAGES.MS.SUB})},t.subscriptBrief=function(e){return m(e,s.LOCALE.MESSAGES.MS.SUB,{sup:s.LOCALE.MESSAGES.MS.SUP,sub:s.LOCALE.MESSAGES.MS.SUB})},t.superscriptVerbose=function(e){return m(e,s.LOCALE.MESSAGES.MS.SUPERSCRIPT,{sup:s.LOCALE.MESSAGES.MS.SUPER,sub:s.LOCALE.MESSAGES.MS.SUB})},t.superscriptBrief=function(e){return m(e,s.LOCALE.MESSAGES.MS.SUP,{sup:s.LOCALE.MESSAGES.MS.SUP,sub:s.LOCALE.MESSAGES.MS.SUB})},t.baselineVerbose=function(e){const t=m(e,"",{sup:s.LOCALE.MESSAGES.MS.SUPER,sub:s.LOCALE.MESSAGES.MS.SUB});return t?t.replace(new RegExp(s.LOCALE.MESSAGES.MS.SUB+"$"),s.LOCALE.MESSAGES.MS.SUBSCRIPT).replace(new RegExp(s.LOCALE.MESSAGES.MS.SUPER+"$"),s.LOCALE.MESSAGES.MS.SUPERSCRIPT):s.LOCALE.MESSAGES.MS.BASELINE},t.baselineBrief=function(e){return m(e,"",{sup:s.LOCALE.MESSAGES.MS.SUP,sub:s.LOCALE.MESSAGES.MS.SUB})||s.LOCALE.MESSAGES.MS.BASE},t.radicalNestingDepth=g,t.nestedRadical=S,t.getRootIndex=b,t.openingRadicalVerbose=function(e){return S(e,s.LOCALE.MESSAGES.MS.NESTED,s.LOCALE.MESSAGES.MS.STARTROOT)},t.closingRadicalVerbose=function(e){return S(e,s.LOCALE.MESSAGES.MS.NESTED,s.LOCALE.MESSAGES.MS.ENDROOT)},t.indexRadicalVerbose=function(e){return S(e,s.LOCALE.MESSAGES.MS.NESTED,s.LOCALE.MESSAGES.MS.ROOTINDEX)},t.openingRadicalBrief=function(e){return S(e,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.STARTROOT)},t.closingRadicalBrief=function(e){return S(e,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.ENDROOT)},t.indexRadicalBrief=function(e){return S(e,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.ROOTINDEX)},t.openingRadicalSbrief=function(e){return S(e,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.ROOT)},t.indexRadicalSbrief=function(e){return S(e,s.LOCALE.MESSAGES.MS.NEST_ROOT,s.LOCALE.MESSAGES.MS.INDEX)},t.underscoreNestingDepth=N,t.nestedUnderscript=function(e){const t=N(e);return Array(t).join(s.LOCALE.MESSAGES.MS.UNDER)+s.LOCALE.MESSAGES.MS.UNDERSCRIPT},t.overscoreNestingDepth=E,t.endscripts=function(e){return s.LOCALE.MESSAGES.MS.ENDSCRIPTS},t.nestedOverscript=function(e){const t=E(e);return Array(t).join(s.LOCALE.MESSAGES.MS.OVER)+s.LOCALE.MESSAGES.MS.OVERSCRIPT},t.determinantIsSimple=function(e){if("matrix"!==e.tagName||"determinant"!==e.getAttribute("role"))return[];const t=o.evalXPath("children/row/children/cell/children/*",e);for(let e,n=0;e=t[n];n++)if("number"!==e.tagName){if("identifier"===e.tagName){const t=e.getAttribute("role");if("latinletter"===t||"greekletter"===t||"otherletter"===t)continue}return[]}return[e]},t.generateBaselineConstraint=function(){const e=e=>e.map((e=>"ancestor::"+e)),t=e=>"not("+e+")",n=t(e(["subscript","superscript","tensor"]).join(" or ")),r=e(["relseq","multrel"]),i=e(["fraction","punctuation","fenced","sqrt","root"]);let o=[];for(let e,t=0;e=i[t];t++)o=o.concat(r.map((function(t){return e+"/"+t})));return[["ancestor::*/following-sibling::*",n,t(o.join(" | "))].join(" and ")]},t.removeParens=function(e){if(!e.childNodes.length||!e.childNodes[0].childNodes.length||!e.childNodes[0].childNodes[0].childNodes.length)return"";const t=e.childNodes[0].childNodes[0].childNodes[0].textContent;return t.match(/^\(.+\)$/)?t.slice(1,-1):t};const y=new Map([[3,"CSFleftsuperscript"],[4,"CSFleftsubscript"],[2,"CSFbaseline"],[1,"CSFrightsubscript"],[0,"CSFrightsuperscript"]]),A=new Map([[4,2],[3,3],[2,1],[1,4],[0,5]]);function _(e){const t=[];let n="",r="",i=parseInt(e,2);for(let e=0;e<5;e++){const o="children/*["+A.get(e)+"]";if(1&i){const t=y.get(e%5);n="[t] "+t+"Verbose; [n] "+o+";"+n,r="[t] "+t+"Brief; [n] "+o+";"+r}else t.unshift("name("+o+')="empty"');i>>=1}return[t,n,r]}t.generateTensorRules=function(e,t=!0){const n=["11111","11110","11101","11100","10111","10110","10101","10100","01111","01110","01101","01100"];for(let r,i=0;r=n[i];i++){let n="tensor"+r,[i,o,s]=_(r);e.defineRule(n,"default",o,"self::tensor",...i),t&&(e.defineRule(n,"brief",s,"self::tensor",...i),e.defineRule(n,"sbrief",s,"self::tensor",...i));const a=y.get(2);o+="; [t]"+a+"Verbose",s+="; [t]"+a+"Brief",n+="-baseline";const c="((.//*[not(*)])[last()]/@id)!=(((.//ancestor::fraction|ancestor::root|ancestor::sqrt|ancestor::cell|ancestor::line|ancestor::stree)[1]//*[not(*)])[last()]/@id)";e.defineRule(n,"default",o,"self::tensor",c,...i),t&&(e.defineRule(n,"brief",s,"self::tensor",c,...i),e.defineRule(n,"sbrief",s,"self::tensor",c,...i))}},t.smallRoot=function(e){let t=Object.keys(s.LOCALE.MESSAGES.MSroots).length;if(!t)return[];if(t++,!e.childNodes||0===e.childNodes.length||!e.childNodes[0].childNodes)return[];const n=e.childNodes[0].childNodes[0].textContent;if(!/^\d+$/.test(n))return[];const r=parseInt(n,10);return r>1&&r<=t?[e]:[]}},9570:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.implicitIterator=t.relationIterator=t.propagateNumber=t.checkParent_=t.NUMBER_INHIBITORS_=t.NUMBER_PROPAGATORS_=t.enlargeFence=t.indexRadical=t.closingRadical=t.openingRadical=t.radicalNestingDepth=t.nestedRadical=t.overBevelledFraction=t.overFraction=t.closingFraction=t.openingFraction=void 0;const r=n(4148),i=n(6671),o=n(5024),s=n(1058),a=n(4886),c=n(4036),l=n(241),u=n(4524),d=n(3269);function h(e,t){const n=p(e);return 1===n?t:new Array(n).join(u.LOCALE.MESSAGES.MS.NESTED)+t}function p(e,t){const n=t||0;return e.parentNode?p(e.parentNode,"root"===e.tagName||"sqrt"===e.tagName?n+1:n):n}function f(e){const t="\u2820";if(1===e.length)return t+e;const n=e.split("");return n.every((function(e){return"\u2833"===e}))?t+n.join(t):e.slice(0,-1)+t+e.slice(-1)}function m(e,n){const r=e.parent;if(!r)return!1;const i=r.type;return-1!==t.NUMBER_PROPAGATORS_.indexOf(i)||"prefixop"===i&&"negative"===r.role&&!n.script||"prefixop"===i&&"geometry"===r.role||!("punctuated"!==i||n.enclosed&&"text"!==r.role)}function g(e,n){return e.childNodes.length?(-1!==t.NUMBER_INHIBITORS_.indexOf(e.type)&&(n.script=!0),"fenced"===e.type?(n.number=!1,n.enclosed=!0,["",n]):(m(e,n)&&(n.number=!0,n.enclosed=!1),["",n])):(m(e,n)&&(n.number=!0,n.script=!1,n.enclosed=!1),[n.number?"number":"",{number:!1,enclosed:n.enclosed,script:n.script}])}t.openingFraction=function(e){const t=d.fractionNestingDepth(e);return new Array(t).join(u.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+u.LOCALE.MESSAGES.MS.FRACTION_START},t.closingFraction=function(e){const t=d.fractionNestingDepth(e);return new Array(t).join(u.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+u.LOCALE.MESSAGES.MS.FRACTION_END},t.overFraction=function(e){const t=d.fractionNestingDepth(e);return new Array(t).join(u.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+u.LOCALE.MESSAGES.MS.FRACTION_OVER},t.overBevelledFraction=function(e){const t=d.fractionNestingDepth(e);return new Array(t).join(u.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+"\u2838"+u.LOCALE.MESSAGES.MS.FRACTION_OVER},t.nestedRadical=h,t.radicalNestingDepth=p,t.openingRadical=function(e){return h(e,u.LOCALE.MESSAGES.MS.STARTROOT)},t.closingRadical=function(e){return h(e,u.LOCALE.MESSAGES.MS.ENDROOT)},t.indexRadical=function(e){return h(e,u.LOCALE.MESSAGES.MS.ROOTINDEX)},t.enlargeFence=f,s.Grammar.getInstance().setCorrection("enlargeFence",f),t.NUMBER_PROPAGATORS_=["multirel","relseq","appl","row","line"],t.NUMBER_INHIBITORS_=["subscript","superscript","overscore","underscore"],t.checkParent_=m,t.propagateNumber=g,(0,c.register)(new l.SemanticVisitor("nemeth","number",g,{number:!0})),t.relationIterator=function(e,t){const n=e.slice(0);let s,c=!0;return s=e.length>0?o.evalXPath("../../content/*",e[0]):[],function(){const e=s.shift(),o=n.shift(),l=n[0],h=t?[r.AuditoryDescription.create({text:t},{translate:!0})]:[];if(!e)return h;const p=o?d.nestedSubSuper(o,"",{sup:u.LOCALE.MESSAGES.MS.SUPER,sub:u.LOCALE.MESSAGES.MS.SUB}):"",f=o&&"EMPTY"!==i.tagName(o)||c&&e.parentNode.parentNode&&e.parentNode.parentNode.previousSibling?[r.AuditoryDescription.create({text:"\u2800"+p},{})]:[],m=l&&"EMPTY"!==i.tagName(l)||!s.length&&e.parentNode.parentNode&&e.parentNode.parentNode.nextSibling?[r.AuditoryDescription.create({text:"\u2800"},{})]:[],g=a.default.evaluateNode(e);return c=!1,h.concat(f,g,m)}},t.implicitIterator=function(e,t){const n=e.slice(0);let s;return s=e.length>0?o.evalXPath("../../content/*",e[0]):[],function(){const e=n.shift(),o=n[0],a=s.shift(),c=t?[r.AuditoryDescription.create({text:t},{translate:!0})]:[];if(!a)return c;const l=e&&"NUMBER"===i.tagName(e),u=o&&"NUMBER"===i.tagName(o);return c.concat(l&&u&&"space"===a.getAttribute("role")?[r.AuditoryDescription.create({text:"\u2800"},{})]:[])}}},2110:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ordinalPosition=t.vulgarFraction=t.wordCounter=t.ordinalCounter=void 0;const r=n(1930),i=n(6671),o=n(4524),s=n(9385);t.ordinalCounter=function(e,t){let n=0;return function(){return o.LOCALE.NUMBERS.numericOrdinal(++n)+" "+t}},t.wordCounter=function(e,t){let n=0;return function(){return o.LOCALE.NUMBERS.numberToOrdinal(++n,!1)+" "+t}},t.vulgarFraction=function(e){const t=(0,s.convertVulgarFraction)(e,o.LOCALE.MESSAGES.MS.FRAC_OVER);return t.convertible&&t.enumerator&&t.denominator?[new r.Span(o.LOCALE.NUMBERS.numberToWords(t.enumerator),{extid:e.childNodes[0].childNodes[0].getAttribute("extid"),separator:""}),new r.Span(o.LOCALE.NUMBERS.vulgarSep,{separator:""}),new r.Span(o.LOCALE.NUMBERS.numberToOrdinal(t.denominator,1!==t.enumerator),{extid:e.childNodes[0].childNodes[1].getAttribute("extid")})]:[new r.Span(t.content||"",{extid:e.getAttribute("extid")})]},t.ordinalPosition=function(e){const t=i.toArray(e.parentNode.childNodes);return o.LOCALE.NUMBERS.numericOrdinal(t.indexOf(e)+1).toString()}},3724:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BrailleRules=t.OtherRules=t.PrefixRules=void 0;const r=n(8310),i=n(931),o=n(3269),s=n(9570),a=n(2110),c=n(7278);t.PrefixRules=function(){c.addStore("en.prefix.default","",{CSFordinalPosition:a.ordinalPosition})},t.OtherRules=function(){c.addStore("en.speech.chromevox","",{CTFnodeCounter:i.nodeCounter,CTFcontentIterator:i.contentIterator}),c.addStore("en.speech.emacspeak","en.speech.chromevox",{CQFvulgarFractionSmall:o.isSmallVulgarFraction,CSFvulgarFraction:a.vulgarFraction})},t.BrailleRules=function(){c.addStore("nemeth.braille.default",r.DynamicCstr.BASE_LOCALE+".speech.mathspeak",{CSFopenFraction:s.openingFraction,CSFcloseFraction:s.closingFraction,CSFoverFraction:s.overFraction,CSFoverBevFraction:s.overBevelledFraction,CSFopenRadical:s.openingRadical,CSFcloseRadical:s.closingRadical,CSFindexRadical:s.indexRadical,CSFsubscript:o.subscriptVerbose,CSFsuperscript:o.superscriptVerbose,CSFbaseline:o.baselineVerbose,CGFtensorRules:e=>o.generateTensorRules(e,!1),CTFrelationIterator:s.relationIterator,CTFimplicitIterator:s.implicitIterator})}},9805:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.INIT_=void 0;const r=n(127),i=n(4972),o=n(3724);t.INIT_=!1,t.init=function(){t.INIT_||((0,i.MathspeakRules)(),(0,r.ClearspeakRules)(),(0,o.PrefixRules)(),(0,o.OtherRules)(),(0,o.BrailleRules)(),t.INIT_=!0)}},7278:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getStore=t.addStore=t.funcStore=void 0;const r=n(8310);t.funcStore=new Map,t.addStore=function(e,n,r){const i={};if(n){const e=t.funcStore.get(n)||{};Object.assign(i,e)}t.funcStore.set(e,Object.assign(i,r))},t.getStore=function(e,n,i){return t.funcStore.get([e,n,i].join("."))||t.funcStore.get([r.DynamicCstr.DEFAULT_VALUES[r.Axis.LOCALE],n,i].join("."))||t.funcStore.get([r.DynamicCstr.BASE_LOCALE,n,i].join("."))||{}}},9771:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.oneLeft=t.leftMostUnit=t.rightMostUnit=t.unitMultipliers=void 0;const r=n(4148),i=n(5024),o=n(4524);t.unitMultipliers=function(e,t){const n=e;let i=0;return function(){const e=r.AuditoryDescription.create({text:a(n[i])&&c(n[i+1])?o.LOCALE.MESSAGES.unitTimes:""},{});return i++,[e]}};const s=["superscript","subscript","overscore","underscore"];function a(e){for(;e;){if("unit"===e.getAttribute("role"))return!0;const t=e.tagName,n=i.evalXPath("children/*",e);e=-1!==s.indexOf(t)?n[0]:n[n.length-1]}return!1}function c(e){for(;e;){if("unit"===e.getAttribute("role"))return!0;e=i.evalXPath("children/*",e)[0]}return!1}t.rightMostUnit=a,t.leftMostUnit=c,t.oneLeft=function(e){for(;e;){if("number"===e.tagName&&"1"===e.textContent)return[e];if("infixop"!==e.tagName||"multiplication"!==e.getAttribute("role")&&"implicit"!==e.getAttribute("role"))return[];e=i.evalXPath("children/*",e)[0]}return[]}},4660:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractWalker=void 0;const r=n(4148),i=n(4253),o=n(6671),s=n(4998),a=n(985),c=n(6988),l=n(8171),u=n(4524),d=n(1058),h=n(7984),p=n(7317),f=n(144),m=n(3955),g=n(5658),S=n(1848),b=n(8119),N=n(8835),E=n(5024);class y{constructor(e,t,n,r){this.node=e,this.generator=t,this.highlighter=n,this.modifier=!1,this.keyMapping=new Map([[c.KeyCode.UP,this.up.bind(this)],[c.KeyCode.DOWN,this.down.bind(this)],[c.KeyCode.RIGHT,this.right.bind(this)],[c.KeyCode.LEFT,this.left.bind(this)],[c.KeyCode.TAB,this.repeat.bind(this)],[c.KeyCode.DASH,this.expand.bind(this)],[c.KeyCode.SPACE,this.depth.bind(this)],[c.KeyCode.HOME,this.home.bind(this)],[c.KeyCode.X,this.summary.bind(this)],[c.KeyCode.Z,this.detail.bind(this)],[c.KeyCode.V,this.virtualize.bind(this)],[c.KeyCode.P,this.previous.bind(this)],[c.KeyCode.U,this.undo.bind(this)],[c.KeyCode.LESS,this.previousRules.bind(this)],[c.KeyCode.GREATER,this.nextRules.bind(this)]]),this.cursors=[],this.xml_=null,this.rebuilt_=null,this.focus_=null,this.active_=!1,this.node.id?this.id=this.node.id:this.node.hasAttribute(y.SRE_ID_ATTR)?this.id=this.node.getAttribute(y.SRE_ID_ATTR):(this.node.setAttribute(y.SRE_ID_ATTR,y.ID_COUNTER.toString()),this.id=y.ID_COUNTER++),this.rootNode=N.getSemanticRoot(e),this.rootId=this.rootNode.getAttribute(l.Attribute.ID),this.xmlString_=r,this.moved=b.WalkerMoves.ENTER}getXml(){return this.xml_||(this.xml_=o.parseInput(this.xmlString_)),this.xml_}getRebuilt(){return this.rebuilt_||this.rebuildStree(),this.rebuilt_}isActive(){return this.active_}activate(){this.isActive()||(this.generator.start(),this.toggleActive_())}deactivate(){this.isActive()&&(b.WalkerState.setState(this.id,this.primaryId()),this.generator.end(),this.toggleActive_())}getFocus(e=!1){return this.focus_||(this.focus_=this.singletonFocus(this.rootId)),e&&this.updateFocus(),this.focus_}setFocus(e){this.focus_=e}getDepth(){return this.levels.depth()-1}isSpeech(){return this.generator.modality===l.Attribute.SPEECH}focusDomNodes(){return this.getFocus().getDomNodes()}focusSemanticNodes(){return this.getFocus().getSemanticNodes()}speech(){const e=this.focusDomNodes();if(!e.length)return"";const t=this.specialMove();if(null!==t)return t;switch(this.moved){case b.WalkerMoves.DEPTH:return this.depth_();case b.WalkerMoves.SUMMARY:return this.summary_();case b.WalkerMoves.DETAIL:return this.detail_();default:{const t=[],n=this.focusSemanticNodes();for(let r=0,i=e.length;r<i;r++){const i=e[r],o=n[r];t.push(i?this.generator.getSpeech(i,this.getXml()):f.recomputeMarkup(o))}return this.mergePrefix_(t)}}}move(e){const t=this.keyMapping.get(e);if(!t)return null;const n=t();return!(!n||n===this.getFocus())&&(this.setFocus(n),this.moved===b.WalkerMoves.HOME&&(this.levels=this.initLevels()),!0)}up(){return this.moved=b.WalkerMoves.UP,this.getFocus()}down(){return this.moved=b.WalkerMoves.DOWN,this.getFocus()}left(){return this.moved=b.WalkerMoves.LEFT,this.getFocus()}right(){return this.moved=b.WalkerMoves.RIGHT,this.getFocus()}repeat(){return this.moved=b.WalkerMoves.REPEAT,this.getFocus().clone()}depth(){return this.moved=this.isSpeech()?b.WalkerMoves.DEPTH:b.WalkerMoves.REPEAT,this.getFocus().clone()}home(){this.moved=b.WalkerMoves.HOME;return this.singletonFocus(this.rootId)}getBySemanticId(e){return N.getBySemanticId(this.node,e)}primaryId(){return this.getFocus().getSemanticPrimary().id.toString()}expand(){const e=this.getFocus().getDomPrimary(),t=this.actionable_(e);return t?(this.moved=b.WalkerMoves.EXPAND,t.dispatchEvent(new Event("click")),this.getFocus().clone()):this.getFocus()}expandable(e){return!!this.actionable_(e)&&0===e.childNodes.length}collapsible(e){return!!this.actionable_(e)&&e.childNodes.length>0}restoreState(){if(!this.highlighter)return;const e=b.WalkerState.getState(this.id);if(!e)return;let t=this.getRebuilt().nodeDict[e];const n=[];for(;t;)n.push(t.id),t=t.parent;for(n.pop();n.length>0;){this.down();const e=n.pop(),t=this.findFocusOnLevel(e);if(!t)break;this.setFocus(t)}this.moved=b.WalkerMoves.ENTER}updateFocus(){this.setFocus(g.Focus.factory(this.getFocus().getSemanticPrimary().id.toString(),this.getFocus().getSemanticNodes().map((e=>e.id.toString())),this.getRebuilt(),this.node))}rebuildStree(){this.rebuilt_=new S.RebuildStree(this.getXml()),this.rootId=this.rebuilt_.stree.root.id.toString(),this.generator.setRebuilt(this.rebuilt_),this.skeleton=h.SemanticSkeleton.fromTree(this.rebuilt_.stree),this.skeleton.populate(),this.focus_=this.singletonFocus(this.rootId),this.levels=this.initLevels(),f.connectMactions(this.node,this.getXml(),this.rebuilt_.xml)}previousLevel(){const e=this.getFocus().getDomPrimary();return e?N.getAttribute(e,l.Attribute.PARENT):this.getFocus().getSemanticPrimary().parent.id.toString()}nextLevel(){const e=this.getFocus().getDomPrimary();let t,n;if(e){t=N.splitAttribute(N.getAttribute(e,l.Attribute.CHILDREN)),n=N.splitAttribute(N.getAttribute(e,l.Attribute.CONTENT));const r=N.getAttribute(e,l.Attribute.TYPE),i=N.getAttribute(e,l.Attribute.ROLE);return this.combineContentChildren(r,i,n,t)}const r=e=>e.id.toString(),i=this.getRebuilt().nodeDict[this.primaryId()];return t=i.childNodes.map(r),n=i.contentNodes.map(r),0===t.length?[]:this.combineContentChildren(i.type,i.role,n,t)}singletonFocus(e){this.getRebuilt();const t=this.retrieveVisuals(e);return this.focusFromId(e,t)}retrieveVisuals(e){if(!this.skeleton)return[e];const t=parseInt(e,10),n=this.skeleton.subtreeNodes(t);if(!n.length)return[e];n.unshift(t);const r={},i=[];E.updateEvaluator(this.getXml());for(const e of n)r[e]||(i.push(e.toString()),r[e]=!0,this.subtreeIds(e,r));return i}subtreeIds(e,t){const n=E.evalXPath(`//*[@data-semantic-id="${e}"]`,this.getXml());E.evalXPath("*//@data-semantic-id",n[0]).forEach((e=>t[parseInt(e.textContent,10)]=!0))}focusFromId(e,t){return g.Focus.factory(e,t,this.getRebuilt(),this.node)}summary(){return this.moved=this.isSpeech()?b.WalkerMoves.SUMMARY:b.WalkerMoves.REPEAT,this.getFocus().clone()}detail(){return this.moved=this.isSpeech()?b.WalkerMoves.DETAIL:b.WalkerMoves.REPEAT,this.getFocus().clone()}specialMove(){return null}virtualize(e){return this.cursors.push({focus:this.getFocus(),levels:this.levels,undo:e||!this.cursors.length}),this.levels=this.levels.clone(),this.getFocus().clone()}previous(){const e=this.cursors.pop();return e?(this.levels=e.levels,e.focus):this.getFocus()}undo(){let e;do{e=this.cursors.pop()}while(e&&!e.undo);return e?(this.levels=e.levels,e.focus):this.getFocus()}update(e){this.generator.setOptions(e),(0,a.setup)(e).then((()=>p.generator("Tree").getSpeech(this.node,this.getXml())))}nextRules(){const e=this.generator.getOptions();return"speech"!==e.modality?this.getFocus():(s.DOMAIN_TO_STYLES[e.domain]=e.style,e.domain="mathspeak"===e.domain?"clearspeak":"mathspeak",e.style=s.DOMAIN_TO_STYLES[e.domain],this.update(e),this.moved=b.WalkerMoves.REPEAT,this.getFocus().clone())}nextStyle(e,t){if("mathspeak"===e){const e=["default","brief","sbrief"],n=e.indexOf(t);return-1===n?t:n>=e.length-1?e[0]:e[n+1]}if("clearspeak"===e){const e=m.ClearspeakPreferences.getLocalePreferences().en;if(!e)return"default";const n=m.ClearspeakPreferences.relevantPreferences(this.getFocus().getSemanticPrimary()),r=m.ClearspeakPreferences.findPreference(t,n),i=e[n].map((function(e){return e.split("_")[1]})),o=i.indexOf(r);if(-1===o)return t;const s=o>=i.length-1?i[0]:i[o+1];return m.ClearspeakPreferences.addPreference(t,n,s)}return t}previousRules(){const e=this.generator.getOptions();return"speech"!==e.modality?this.getFocus():(e.style=this.nextStyle(e.domain,e.style),this.update(e),this.moved=b.WalkerMoves.REPEAT,this.getFocus().clone())}refocus(){let e,t=this.getFocus();for(;!t.getNodes().length;){e=this.levels.peek();const n=this.up();if(!n)break;this.setFocus(n),t=this.getFocus(!0)}this.levels.push(e),this.setFocus(t)}toggleActive_(){this.active_=!this.active_}mergePrefix_(e,t=[]){const n=this.isSpeech()?this.prefix_():"";n&&e.unshift(n);const r=this.isSpeech()?this.postfix_():"";return r&&e.push(r),i.finalize(i.merge(t.concat(e)))}prefix_(){const e=this.getFocus().getDomNodes(),t=this.getFocus().getSemanticNodes();return e[0]?N.getAttribute(e[0],l.Attribute.PREFIX):f.retrievePrefix(t[0])}postfix_(){const e=this.getFocus().getDomNodes();return e[0]?N.getAttribute(e[0],l.Attribute.POSTFIX):""}depth_(){const e=d.Grammar.getInstance().getParameter("depth");d.Grammar.getInstance().setParameter("depth",!0);const t=this.getFocus().getDomPrimary(),n=this.expandable(t)?u.LOCALE.MESSAGES.navigate.EXPANDABLE:this.collapsible(t)?u.LOCALE.MESSAGES.navigate.COLLAPSIBLE:"",o=u.LOCALE.MESSAGES.navigate.LEVEL+" "+this.getDepth(),s=this.getFocus().getSemanticNodes(),a=f.retrievePrefix(s[0]),c=[new r.AuditoryDescription({text:o,personality:{}}),new r.AuditoryDescription({text:a,personality:{}}),new r.AuditoryDescription({text:n,personality:{}})];return d.Grammar.getInstance().setParameter("depth",e),i.finalize(i.markup(c))}actionable_(e){const t=null==e?void 0:e.parentNode;return t&&this.highlighter.isMactionNode(t)?t:null}summary_(){const e=this.getFocus().getSemanticPrimary().id.toString(),t=this.getRebuilt().xml.getAttribute("id")===e?this.getRebuilt().xml:o.querySelectorAllByAttrValue(this.getRebuilt().xml,"id",e)[0],n=f.retrieveSummary(t);return this.mergePrefix_([n])}detail_(){const e=this.getFocus().getSemanticPrimary().id.toString(),t=this.getRebuilt().xml.getAttribute("id")===e?this.getRebuilt().xml:o.querySelectorAllByAttrValue(this.getRebuilt().xml,"id",e)[0],n=t.getAttribute("alternative");t.removeAttribute("alternative");const r=f.computeMarkup(t),i=this.mergePrefix_([r]);return t.setAttribute("alternative",n),i}}t.AbstractWalker=y,y.ID_COUNTER=0,y.SRE_ID_ATTR="sre-explorer-id"},4296:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DummyWalker=void 0;const r=n(4660);class i extends r.AbstractWalker{up(){return null}down(){return null}left(){return null}right(){return null}repeat(){return null}depth(){return null}home(){return null}getDepth(){return 0}initLevels(){return null}combineContentChildren(e,t,n,r){return[]}findFocusOnLevel(e){return null}}t.DummyWalker=i},5658:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Focus=void 0;const r=n(8835);class i{constructor(e,t){this.nodes=e,this.primary=t,this.domNodes=[],this.domPrimary_=null,this.allNodes=[]}static factory(e,t,n,o){const s=e=>r.getBySemanticId(o,e),a=n.nodeDict,c=s(e),l=t.map(s),u=t.map((function(e){return a[e]})),d=new i(u,a[e]);return d.domNodes=l,d.domPrimary_=c,d.allNodes=i.generateAllVisibleNodes_(t,l,a,o),d}static generateAllVisibleNodes_(e,t,n,o){const s=e=>r.getBySemanticId(o,e);let a=[];for(let r=0,c=e.length;r<c;r++){if(t[r]){a.push(t[r]);continue}const c=n[e[r]];if(!c)continue;const l=c.childNodes.map((function(e){return e.id.toString()})),u=l.map(s);a=a.concat(i.generateAllVisibleNodes_(l,u,n,o))}return a}getSemanticPrimary(){return this.primary}getSemanticNodes(){return this.nodes}getNodes(){return this.allNodes}getDomNodes(){return this.domNodes}getDomPrimary(){return this.domPrimary_}toString(){return"Primary:"+this.domPrimary_+" Nodes:"+this.domNodes}clone(){const e=new i(this.nodes,this.primary);return e.domNodes=this.domNodes,e.domPrimary_=this.domPrimary_,e.allNodes=this.allNodes,e}}t.Focus=i},1497:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Levels=void 0;class n{constructor(){this.level_=[]}push(e){this.level_.push(e)}pop(){return this.level_.pop()}peek(){return this.level_[this.level_.length-1]||null}indexOf(e){const t=this.peek();return t?t.indexOf(e):null}find(e){const t=this.peek();if(!t)return null;for(let n=0,r=t.length;n<r;n++)if(e(t[n]))return t[n];return null}get(e){const t=this.peek();return!t||e<0||e>=t.length?null:t[e]}depth(){return this.level_.length}clone(){const e=new n;return e.level_=this.level_.slice(0),e}toString(){let e="";for(let t,n=0;t=this.level_[n];n++)e+="\n"+t.map((function(e){return e.toString()}));return e}}t.Levels=n},1848:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RebuildStree=void 0;const r=n(6671),i=n(8171),o=n(4020),s=n(4790),a=n(7793),c=n(7984),l=n(1784),u=n(8901),d=n(8835);class h{constructor(e){this.mathml=e,this.factory=new s.SemanticNodeFactory,this.nodeDict={},this.mmlRoot=d.getSemanticRoot(e),this.streeRoot=this.assembleTree(this.mmlRoot),this.stree=l.SemanticTree.fromNode(this.streeRoot,this.mathml),this.xml=this.stree.xml(),a.default.getInstance().setNodeFactory(this.factory)}static addAttributes(e,t,n){n&&1===t.childNodes.length&&t.childNodes[0].nodeType!==r.NodeType.TEXT_NODE&&u.addAttributes(e,t.childNodes[0]),u.addAttributes(e,t)}static textContent(e,t,n){if(!n&&t.textContent)return void(e.textContent=t.textContent);const r=d.splitAttribute(d.getAttribute(t,i.Attribute.OPERATOR));r.length>1&&(e.textContent=r[1])}static isPunctuated(e){return!c.SemanticSkeleton.simpleCollapseStructure(e)&&e[1]&&c.SemanticSkeleton.contentCollapseStructure(e[1])}getTree(){return this.stree}assembleTree(e){const t=this.makeNode(e),n=d.splitAttribute(d.getAttribute(e,i.Attribute.CHILDREN)),r=d.splitAttribute(d.getAttribute(e,i.Attribute.CONTENT));if(h.addAttributes(t,e,!(n.length||r.length)),0===r.length&&0===n.length)return h.textContent(t,e),t;if(r.length>0){const e=d.getBySemanticId(this.mathml,r[0]);e&&h.textContent(t,e,!0)}t.contentNodes=r.map((e=>this.setParent(e,t))),t.childNodes=n.map((e=>this.setParent(e,t)));const o=d.getAttribute(e,i.Attribute.COLLAPSED);return o?this.postProcess(t,o):t}makeNode(e){const t=d.getAttribute(e,i.Attribute.TYPE),n=d.getAttribute(e,i.Attribute.ROLE),r=d.getAttribute(e,i.Attribute.FONT),o=d.getAttribute(e,i.Attribute.ANNOTATION)||"",s=d.getAttribute(e,i.Attribute.ID),a=d.getAttribute(e,i.Attribute.EMBELLISHED),c=d.getAttribute(e,i.Attribute.FENCEPOINTER),l=this.createNode(parseInt(s,10));return l.type=t,l.role=n,l.font=r||"unknown",l.parseAnnotation(o),c&&(l.fencePointer=c),a&&(l.embellished=a),l}makePunctuation(e){const t=this.createNode(e);return t.updateContent((0,o.invisibleComma)()),t.role="dummy",t}makePunctuated(e,t,n){const r=this.createNode(t[0]);r.type="punctuated",r.embellished=e.embellished,r.fencePointer=e.fencePointer,r.role=n;const i=t.splice(1,1)[0].slice(1);r.contentNodes=i.map(this.makePunctuation.bind(this)),this.collapsedChildren_(t)}makeEmpty(e,t,n){const r=this.createNode(t);r.type="empty",r.embellished=e.embellished,r.fencePointer=e.fencePointer,r.role=n}makeIndex(e,t,n){if(h.isPunctuated(t))return this.makePunctuated(e,t,n),void(t=t[0]);c.SemanticSkeleton.simpleCollapseStructure(t)&&!this.nodeDict[t.toString()]&&this.makeEmpty(e,t,n)}postProcess(e,t){const n=c.SemanticSkeleton.fromString(t).array;if("subsup"===e.type){const t=this.createNode(n[1][0]);return t.type="subscript",t.role="subsup",e.type="superscript",t.embellished=e.embellished,t.fencePointer=e.fencePointer,this.makeIndex(e,n[1][2],"rightsub"),this.makeIndex(e,n[2],"rightsuper"),this.collapsedChildren_(n),e}if("subscript"===e.type)return this.makeIndex(e,n[2],"rightsub"),this.collapsedChildren_(n),e;if("superscript"===e.type)return this.makeIndex(e,n[2],"rightsuper"),this.collapsedChildren_(n),e;if("tensor"===e.type)return this.makeIndex(e,n[2],"leftsub"),this.makeIndex(e,n[3],"leftsuper"),this.makeIndex(e,n[4],"rightsub"),this.makeIndex(e,n[5],"rightsuper"),this.collapsedChildren_(n),e;if("punctuated"===e.type){if(h.isPunctuated(n)){const t=n.splice(1,1)[0].slice(1);e.contentNodes=t.map(this.makePunctuation.bind(this))}return e}if("underover"===e.type){const t=this.createNode(n[1][0]);return"overaccent"===e.childNodes[1].role?(t.type="overscore",e.type="underscore"):(t.type="underscore",e.type="overscore"),t.role="underover",t.embellished=e.embellished,t.fencePointer=e.fencePointer,this.collapsedChildren_(n),e}return e}createNode(e){const t=this.factory.makeNode(e);return this.nodeDict[e.toString()]=t,t}collapsedChildren_(e){const t=e=>{const n=this.nodeDict[e[0]];n.childNodes=[];for(let r=1,i=e.length;r<i;r++){const i=e[r];n.childNodes.push(c.SemanticSkeleton.simpleCollapseStructure(i)?this.nodeDict[i]:t(i))}return n};t(e)}setParent(e,t){const n=d.getBySemanticId(this.mathml,e),r=this.assembleTree(n);return r.parent=t,r}}t.RebuildStree=h},1937:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticWalker=void 0;const r=n(4660),i=n(1497);class o extends r.AbstractWalker{constructor(e,t,n,r){super(e,t,n,r),this.node=e,this.generator=t,this.highlighter=n,this.levels=null,this.restoreState()}initLevels(){const e=new i.Levels;return e.push([this.getFocus()]),e}up(){super.up();const e=this.previousLevel();if(!e)return null;this.levels.pop();return this.levels.find((function(t){return t.getSemanticNodes().some((function(t){return t.id.toString()===e}))}))}down(){super.down();const e=this.nextLevel();return 0===e.length?null:(this.levels.push(e),e[0])}combineContentChildren(e,t,n,r){switch(e){case"relseq":case"infixop":case"multirel":return this.makePairList(r,n);case"prefixop":return[this.focusFromId(r[0],n.concat(r))];case"postfixop":return[this.focusFromId(r[0],r.concat(n))];case"matrix":case"vector":case"fenced":return[this.focusFromId(r[0],[n[0],r[0],n[1]])];case"cases":return[this.focusFromId(r[0],[n[0],r[0]])];case"punctuated":return"text"===t?r.map(this.singletonFocus.bind(this)):r.length===n.length?n.map(this.singletonFocus.bind(this)):this.combinePunctuations(r,n,[],[]);case"appl":return[this.focusFromId(r[0],[r[0],n[0]]),this.singletonFocus(r[1])];case"root":return[this.singletonFocus(r[1]),this.singletonFocus(r[0])];default:return r.map(this.singletonFocus.bind(this))}}combinePunctuations(e,t,n,r){if(0===e.length)return r;const i=e.shift(),o=t.shift();return i===o?(n.push(o),this.combinePunctuations(e,t,n,r)):(t.unshift(o),n.push(i),e.length===t.length?(r.push(this.focusFromId(i,n.concat(t))),r):(r.push(this.focusFromId(i,n)),this.combinePunctuations(e,t,[],r)))}makePairList(e,t){if(0===e.length)return[];if(1===e.length)return[this.singletonFocus(e[0])];const n=[this.singletonFocus(e.shift())];for(let r=0,i=e.length;r<i;r++)n.push(this.focusFromId(e[r],[t[r],e[r]]));return n}left(){super.left();const e=this.levels.indexOf(this.getFocus());if(null===e)return null;const t=this.levels.get(e-1);return t||null}right(){super.right();const e=this.levels.indexOf(this.getFocus());if(null===e)return null;const t=this.levels.get(e+1);return t||null}findFocusOnLevel(e){return this.levels.find((t=>t.getSemanticPrimary().id===e))}}t.SemanticWalker=o},3531:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SyntaxWalker=void 0;const r=n(1426),i=n(4660),o=n(1497);class s extends i.AbstractWalker{constructor(e,t,n,r){super(e,t,n,r),this.node=e,this.generator=t,this.highlighter=n,this.levels=null,this.restoreState()}initLevels(){const e=new o.Levels;return e.push([this.primaryId()]),e}up(){super.up();const e=this.previousLevel();return e?(this.levels.pop(),this.singletonFocus(e)):null}down(){super.down();const e=this.nextLevel();if(0===e.length)return null;const t=this.singletonFocus(e[0]);return t&&this.levels.push(e),t}combineContentChildren(e,t,n,i){switch(e){case"relseq":case"infixop":case"multirel":return(0,r.interleaveLists)(i,n);case"prefixop":return n.concat(i);case"postfixop":return i.concat(n);case"matrix":case"vector":case"fenced":return i.unshift(n[0]),i.push(n[1]),i;case"cases":return i.unshift(n[0]),i;case"punctuated":return"text"===t?(0,r.interleaveLists)(i,n):i;case"appl":return[i[0],n[0],i[1]];case"root":return[i[1],i[0]];default:return i}}left(){super.left();const e=this.levels.indexOf(this.primaryId());if(null===e)return null;const t=this.levels.get(e-1);return t?this.singletonFocus(t):null}right(){super.right();const e=this.levels.indexOf(this.primaryId());if(null===e)return null;const t=this.levels.get(e+1);return t?this.singletonFocus(t):null}findFocusOnLevel(e){return this.singletonFocus(e.toString())}focusDomNodes(){return[this.getFocus().getDomPrimary()]}focusSemanticNodes(){return[this.getFocus().getSemanticPrimary()]}}t.SyntaxWalker=s},4051:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TableWalker=void 0;const r=n(6671),i=n(6988),o=n(3531),s=n(8119);class a extends o.SyntaxWalker{constructor(e,t,n,r){super(e,t,n,r),this.node=e,this.generator=t,this.highlighter=n,this.firstJump=null,this.key_=null,this.row_=0,this.currentTable_=null,this.keyMapping.set(i.KeyCode.ZERO,this.jumpCell.bind(this)),this.keyMapping.set(i.KeyCode.ONE,this.jumpCell.bind(this)),this.keyMapping.set(i.KeyCode.TWO,this.jumpCell.bind(this)),this.keyMapping.set(i.KeyCode.THREE,this.jumpCell.bind(this)),this.keyMapping.set(i.KeyCode.FOUR,this.jumpCell.bind(this)),this.keyMapping.set(i.KeyCode.FIVE,this.jumpCell.bind(this)),this.keyMapping.set(i.KeyCode.SIX,this.jumpCell.bind(this)),this.keyMapping.set(i.KeyCode.SEVEN,this.jumpCell.bind(this)),this.keyMapping.set(i.KeyCode.EIGHT,this.jumpCell.bind(this)),this.keyMapping.set(i.KeyCode.NINE,this.jumpCell.bind(this))}move(e){this.key_=e;const t=super.move(e);return this.modifier=!1,t}up(){return this.moved=s.WalkerMoves.UP,this.eligibleCell_()?this.verticalMove_(!1):super.up()}down(){return this.moved=s.WalkerMoves.DOWN,this.eligibleCell_()?this.verticalMove_(!0):super.down()}jumpCell(){if(!this.isInTable_()||null===this.key_)return this.getFocus();if(this.moved===s.WalkerMoves.ROW){this.moved=s.WalkerMoves.CELL;const e=this.key_-i.KeyCode.ZERO;return this.isLegalJump_(this.row_,e)?this.jumpCell_(this.row_,e):this.getFocus()}const e=this.key_-i.KeyCode.ZERO;return e>this.currentTable_.childNodes.length?this.getFocus():(this.row_=e,this.moved=s.WalkerMoves.ROW,this.getFocus().clone())}undo(){const e=super.undo();return e===this.firstJump&&(this.firstJump=null),e}eligibleCell_(){const e=this.getFocus().getSemanticPrimary();return this.modifier&&"cell"===e.type&&-1!==a.ELIGIBLE_CELL_ROLES.indexOf(e.role)}verticalMove_(e){const t=this.previousLevel();if(!t)return null;const n=this.getFocus(),r=this.levels.indexOf(this.primaryId()),i=this.levels.pop(),o=this.levels.indexOf(t),s=this.levels.get(e?o+1:o-1);if(!s)return this.levels.push(i),null;this.setFocus(this.singletonFocus(s));const a=this.nextLevel();return a[r]?(this.levels.push(a),this.singletonFocus(a[r])):(this.setFocus(n),this.levels.push(i),null)}jumpCell_(e,t){this.firstJump?this.virtualize(!1):(this.firstJump=this.getFocus(),this.virtualize(!0));const n=this.currentTable_.id.toString();let r;do{r=this.levels.pop()}while(-1===r.indexOf(n));this.levels.push(r),this.setFocus(this.singletonFocus(n)),this.levels.push(this.nextLevel());const i=this.currentTable_.childNodes[e-1];return this.setFocus(this.singletonFocus(i.id.toString())),this.levels.push(this.nextLevel()),this.singletonFocus(i.childNodes[t-1].id.toString())}isLegalJump_(e,t){const n=r.querySelectorAllByAttrValue(this.getRebuilt().xml,"id",this.currentTable_.id.toString())[0];if(!n||n.hasAttribute("alternative"))return!1;const i=this.currentTable_.childNodes[e-1];if(!i)return!1;const o=r.querySelectorAllByAttrValue(n,"id",i.id.toString())[0];return!(!o||o.hasAttribute("alternative"))&&!(!i||!i.childNodes[t-1])}isInTable_(){let e=this.getFocus().getSemanticPrimary();for(;e;){if(-1!==a.ELIGIBLE_TABLE_TYPES.indexOf(e.type))return this.currentTable_=e,!0;e=e.parent}return!1}}t.TableWalker=a,a.ELIGIBLE_CELL_ROLES=["determinant","rowvector","binomial","squarematrix","multiline","matrix","vector","cases","table"],a.ELIGIBLE_TABLE_TYPES=["multiline","matrix","vector","cases","table"]},8119:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WalkerState=t.WalkerMoves=void 0,function(e){e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right",e.REPEAT="repeat",e.DEPTH="depth",e.ENTER="enter",e.EXPAND="expand",e.HOME="home",e.SUMMARY="summary",e.DETAIL="detail",e.ROW="row",e.CELL="cell"}(t.WalkerMoves||(t.WalkerMoves={}));class n{static resetState(e){delete n.STATE[e]}static setState(e,t){n.STATE[e]=t}static getState(e){return n.STATE[e]}}t.WalkerState=n,n.STATE={}},907:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.walkerMapping_=t.walker=void 0;const r=n(4296),i=n(1937),o=n(3531),s=n(4051);t.walker=function(e,n,r,i,o){return(t.walkerMapping_[e.toLowerCase()]||t.walkerMapping_.dummy)(n,r,i,o)},t.walkerMapping_={dummy:(e,t,n,i)=>new r.DummyWalker(e,t,n,i),semantic:(e,t,n,r)=>new i.SemanticWalker(e,t,n,r),syntax:(e,t,n,r)=>new o.SyntaxWalker(e,t,n,r),table:(e,t,n,r)=>new s.TableWalker(e,t,n,r)}},8835:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getBySemanticId=t.getSemanticRoot=t.getAttribute=t.splitAttribute=void 0;const r=n(6671),i=n(8171);t.splitAttribute=function(e){return e?e.split(/,/):[]},t.getAttribute=function(e,t){return e.getAttribute(t)},t.getSemanticRoot=function(e){if(e.hasAttribute(i.Attribute.TYPE)&&!e.hasAttribute(i.Attribute.PARENT))return e;const t=r.querySelectorAllByAttr(e,i.Attribute.TYPE);for(let e,n=0;e=t[n];n++)if(!e.hasAttribute(i.Attribute.PARENT))return e;return e},t.getBySemanticId=function(e,t){return e.getAttribute(i.Attribute.ID)===t?e:r.querySelectorAllByAttrValue(e,i.Attribute.ID,t)[0]}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var __webpack_exports__={};!function(){var e=__webpack_require__(8723),t=__webpack_require__(7306),n=__webpack_require__(8905),r=__webpack_require__.n(n);MathJax.loader&&MathJax.loader.checkVersion("a11y/sre",t.q,"a11y"),(0,e.r8)({_:{a11y:{sre:n}}});var i=__webpack_require__(1993);if(MathJax.startup){var o=i.GL.resolvePath("[sre]",!1);if("undefined"!=typeof window)window.SREfeature={json:o};else{try{o=MathJax.config.loader.require.resolve(o+"/base.json").replace(/\/base\.json$/,"")}catch(e){}__webpack_require__.g.SREfeature={json:o}}}MathJax.startup&&(("undefined"!=typeof window?window:__webpack_require__.g).SREfeature.custom=function(e){return r().preloadLocales(e)})}()})();
   </script>
   <script charset="UTF-8">
    !function(){"use strict";var t={433:function(t,e,r){var n,a=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},i.apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},c=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,a=0,i=e.length;a<i;a++)!n&&a in e||(n||(n=Array.prototype.slice.call(e,0,a)),n[a]=e[a]);return t.concat(n||Array.prototype.slice.call(e))},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.EnrichHandler=e.EnrichedMathDocumentMixin=e.EnrichedMathItemMixin=void 0;var h=r(184),u=r(769),p=r(758),f=r(77),d=l(r(712)),y="none";function M(t,e,r){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.prototype.serializeMml=function(t){if("outerHTML"in t)return t.outerHTML;if("undefined"!=typeof Element&&"undefined"!=typeof window&&t instanceof Element){var e=window.document.createElement("div");return e.appendChild(t),e.innerHTML}return t.toString()},n.prototype.enrich=function(t,n){if(void 0===n&&(n=!1),!(this.state()>=u.STATE.ENRICHED)){if(!this.isEscaped&&(t.options.enableEnrichment||n)){t.options.sre.speech!==y&&(y=t.options.sre.speech,h.mathjax.retryAfter(d.default.setupEngine(t.options.sre).then((function(){return d.default.sreReady()}))));var a=new t.options.MathItem("",e);try{var i=this.inputData.originalMml=r(this.root);a.math=this.serializeMml(d.default.toEnriched(i)),a.display=this.display,a.compile(t),this.root=a.root,this.inputData.enrichedMml=a.math}catch(e){t.options.enrichError(t,this,e)}}this.state(u.STATE.ENRICHED)}},n.prototype.attachSpeech=function(t){var e,r;if(!(this.state()>=u.STATE.ATTACHSPEECH)){var n=this.root.attributes.get("aria-label")||this.getSpeech(this.root);if(n){var a=t.adaptor,i=this.typesetRoot;a.setAttribute(i,"aria-label",n);try{for(var s=o(a.childNodes(i)),c=s.next();!c.done;c=s.next()){var l=c.value;a.setAttribute(l,"aria-hidden","true")}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}}this.state(u.STATE.ATTACHSPEECH)}},n.prototype.getSpeech=function(t){var e,r,n=t.attributes;if(!n)return"";var a=n.getExplicit("data-semantic-speech");if(!n.getExplicit("data-semantic-parent")&&a)return a;try{for(var i=o(t.childNodes),s=i.next();!s.done;s=i.next()){var c=s.value,l=this.getSpeech(c);if(null!=l)return l}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return""},n}(t)}function m(t,e){var r;return r=function(t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=t.apply(this,c([],s(r),!1))||this;e.setMmlFactory(a.mmlFactory);var i=a.constructor.ProcessBits;i.has("enriched")||(i.allocate("enriched"),i.allocate("attach-speech"));var o=new p.SerializedMmlVisitor(a.mmlFactory),l=function(t){return o.visitTree(t)};return a.options.MathItem=M(a.options.MathItem,e,l),a}return a(r,t),r.prototype.attachSpeech=function(){var t,e;if(!this.processed.isSet("attach-speech")){try{for(var r=o(this.math),n=r.next();!n.done;n=r.next()){n.value.attachSpeech(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.processed.set("attach-speech")}return this},r.prototype.enrich=function(){var t,e;if(!this.processed.isSet("enriched")){if(this.options.enableEnrichment)try{for(var r=o(this.math),n=r.next();!n.done;n=r.next()){n.value.enrich(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.processed.set("enriched")}return this},r.prototype.enrichError=function(t,e,r){console.warn("Enrichment error:",r)},r.prototype.state=function(e,r){return void 0===r&&(r=!1),t.prototype.state.call(this,e,r),e<u.STATE.ENRICHED&&this.processed.clear("enriched"),this},r}(t),r.OPTIONS=i(i({},t.OPTIONS),{enableEnrichment:!0,enrichError:function(t,e,r){return t.enrichError(t,e,r)},renderActions:(0,f.expandable)(i(i({},t.OPTIONS.renderActions),{enrich:[u.STATE.ENRICHED],attachSpeech:[u.STATE.ATTACHSPEECH]})),sre:(0,f.expandable)({speech:"none",domain:"mathspeak",style:"default",locale:"en"})}),r}(0,u.newState)("ENRICHED",30),(0,u.newState)("ATTACHSPEECH",155),e.EnrichedMathItemMixin=M,e.EnrichedMathDocumentMixin=m,e.EnrichHandler=function(t,e){return e.setAdaptor(t.adaptor),t.documentClass=m(t.documentClass,e),t}},306:function(t,e){e.q=void 0,e.q="3.2.2"},712:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Sre=MathJax._.a11y.sre.Sre,e.sreReady=MathJax._.a11y.sre.sreReady,e.default=MathJax._.a11y.sre.default},723:function(t,e){MathJax._.components.global.isObject,MathJax._.components.global.combineConfig,e.PV=MathJax._.components.global.combineDefaults,e.r8=MathJax._.components.global.combineWithMathJax,MathJax._.components.global.MathJax},769:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.protoItem=MathJax._.core.MathItem.protoItem,e.AbstractMathItem=MathJax._.core.MathItem.AbstractMathItem,e.STATE=MathJax._.core.MathItem.STATE,e.newState=MathJax._.core.MathItem.newState},758:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DATAMJX=MathJax._.core.MmlTree.SerializedMmlVisitor.DATAMJX,e.toEntity=MathJax._.core.MmlTree.SerializedMmlVisitor.toEntity,e.SerializedMmlVisitor=MathJax._.core.MmlTree.SerializedMmlVisitor.SerializedMmlVisitor},184:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.mathjax=MathJax._.mathjax.mathjax},77:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=MathJax._.util.Options.isObject,e.APPEND=MathJax._.util.Options.APPEND,e.REMOVE=MathJax._.util.Options.REMOVE,e.OPTIONS=MathJax._.util.Options.OPTIONS,e.Expandable=MathJax._.util.Options.Expandable,e.expandable=MathJax._.util.Options.expandable,e.makeArray=MathJax._.util.Options.makeArray,e.keys=MathJax._.util.Options.keys,e.copy=MathJax._.util.Options.copy,e.insert=MathJax._.util.Options.insert,e.defaultOptions=MathJax._.util.Options.defaultOptions,e.userOptions=MathJax._.util.Options.userOptions,e.selectOptions=MathJax._.util.Options.selectOptions,e.selectOptionsFromKeys=MathJax._.util.Options.selectOptionsFromKeys,e.separateOptions=MathJax._.util.Options.separateOptions,e.lookup=MathJax._.util.Options.lookup},475:function(t,e){e.K=MathJax._.input.mathml_ts.MathML}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}!function(){var t=r(723),e=r(306),n=r(433);MathJax.loader&&MathJax.loader.checkVersion("a11y/semantic-enrich",e.q,"a11y"),(0,t.r8)({_:{a11y:{"semantic-enrich":n}}});var a=r(712),i=r(475);MathJax.loader&&(0,t.PV)(MathJax.config.loader,"a11y/semantic-enrich",{checkReady:function(){return a.default.sreReady()}}),MathJax.startup&&MathJax.startup.extendHandler((function(t){return(0,n.EnrichHandler)(t,new i.K)}))}()}();
   </script>
   <script charset="UTF-8">
    !function(){"use strict";var t,e,o,r,n,i,a,s,l={18:function(t,e,o){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},i.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(t,e,o,r){void 0===r&&(r=o);var n=Object.getOwnPropertyDescriptor(e,o);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,r,n)}:function(t,e,o,r){void 0===r&&(r=o),t[r]=e[o]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&a(e,t,o);return s(e,t),e},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],r=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var r,n,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a},h=this&&this.__spreadArray||function(t,e,o){if(o||2===arguments.length)for(var r,n=0,i=e.length;n<i;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.setA11yOption=e.setA11yOptions=e.ExplorerHandler=e.ExplorerMathDocumentMixin=e.ExplorerMathItemMixin=void 0;var f=o(769),d=o(511),y=o(77),v=o(433),g=o(850),m=l(o(269)),x=l(o(85)),b=o(854),_=o(367),w=p(o(712));function M(t,e){return function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.explorers={},e.attached=[],e.restart=[],e.refocus=!1,e.savedId=null,e}return n(o,t),o.prototype.explorable=function(t,o){if(void 0===o&&(o=!1),!(this.state()>=f.STATE.EXPLORER)){if(!this.isEscaped&&(t.options.enableExplorer||o)){var r=this.typesetRoot,n=e(this.root);this.savedId&&(this.typesetRoot.setAttribute("sre-explorer-id",this.savedId),this.savedId=null),this.explorers=function(t,e,o){var r,n,i={};try{for(var a=c(Object.keys(A)),s=a.next();!s.done;s=a.next()){var l=s.value;i[l]=A[l](t,e,o)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}(t,r,n),this.attachExplorers(t)}this.state(f.STATE.EXPLORER)}},o.prototype.attachExplorers=function(t){var e,o,r,n;this.attached=[];var i=[];try{for(var a=c(Object.keys(this.explorers)),s=a.next();!s.done;s=a.next()){var l=s.value;(p=this.explorers[l])instanceof m.AbstractKeyExplorer&&(p.AddEvents(),p.stoppable=!1,i.unshift(p)),t.options.a11y[l]?(p.Attach(),this.attached.push(l)):p.Detach()}}catch(t){e={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(e)throw e.error}}try{for(var u=c(i),h=u.next();!h.done;h=u.next()){var p;if((p=h.value).attached){p.stoppable=!0;break}}}catch(t){r={error:t}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}},o.prototype.rerender=function(e,o){var r,n;void 0===o&&(o=f.STATE.RERENDER),this.savedId=this.typesetRoot.getAttribute("sre-explorer-id"),this.refocus=window.document.activeElement===this.typesetRoot;try{for(var i=c(this.attached),a=i.next();!a.done;a=i.next()){var s=a.value,l=this.explorers[s];l.active&&(this.restart.push(s),l.Stop())}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.prototype.rerender.call(this,e,o)},o.prototype.updateDocument=function(e){var o=this;t.prototype.updateDocument.call(this,e),this.refocus&&this.typesetRoot.focus(),this.restart.forEach((function(t){return o.explorers[t].Start()})),this.restart=[],this.refocus=!1},o}(t)}function O(t){var e;return e=function(t){function e(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var r=t.apply(this,h([],u(e),!1))||this,n=r.constructor.ProcessBits;n.has("explorer")||n.allocate("explorer");var i=new v.SerializedMmlVisitor(r.mmlFactory),a=function(t){return i.visitTree(t)};return r.options.MathItem=M(r.options.MathItem,a),r.explorerRegions=S(r),r}return n(e,t),e.prototype.explorable=function(){var t,e;if(!this.processed.isSet("explorer")){if(this.options.enableExplorer)try{for(var o=c(this.math),r=o.next();!r.done;r=o.next()){r.value.explorable(this)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}this.processed.set("explorer")}return this},e.prototype.state=function(e,o){return void 0===o&&(o=!1),t.prototype.state.call(this,e,o),e<f.STATE.EXPLORER&&this.processed.clear("explorer"),this},e}(t),e.OPTIONS=i(i({},t.OPTIONS),{enableExplorer:!0,renderActions:(0,y.expandable)(i(i({},t.OPTIONS.renderActions),{explorable:[f.STATE.EXPLORER]})),sre:(0,y.expandable)(i(i({},t.OPTIONS.sre),{speech:"shallow"})),a11y:{align:"top",backgroundColor:"Blue",backgroundOpacity:20,braille:!1,flame:!1,foregroundColor:"Black",foregroundOpacity:100,highlight:"None",hover:!1,infoPrefix:!1,infoRole:!1,infoType:!1,keyMagnifier:!1,magnification:"None",magnify:"400%",mouseMagnifier:!1,speech:!0,subtitles:!0,treeColoring:!1,viewBraille:!1}}),e}function S(t){return{speechRegion:new _.LiveRegion(t),brailleRegion:new _.LiveRegion(t),magnifier:new _.HoverRegion(t),tooltip1:new _.ToolTip(t),tooltip2:new _.ToolTip(t),tooltip3:new _.ToolTip(t)}}(0,f.newState)("EXPLORER",160),e.ExplorerMathItemMixin=M,e.ExplorerMathDocumentMixin=O,e.ExplorerHandler=function(t,e){return void 0===e&&(e=null),!t.documentClass.prototype.enrich&&e&&(t=(0,d.EnrichHandler)(t,e)),t.documentClass=O(t.documentClass),t};var A={speech:function(t,e){for(var o,r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=(o=m.SpeechExplorer).create.apply(o,h([t,t.explorerRegions.speechRegion,e],u(r),!1));i.speechGenerator.setOptions({locale:t.options.sre.locale,domain:t.options.sre.domain,style:t.options.sre.style,modality:"speech"});var a=i.speechGenerator.getOptions().locale;return a!==w.default.engineSetup().locale&&(t.options.sre.locale=w.default.engineSetup().locale,i.speechGenerator.setOptions({locale:t.options.sre.locale})),i.showRegion="subtitles",i},braille:function(t,e){for(var o,r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=(o=m.SpeechExplorer).create.apply(o,h([t,t.explorerRegions.brailleRegion,e],u(r),!1));return i.speechGenerator.setOptions({locale:"nemeth",domain:"default",style:"default",modality:"braille"}),i.showRegion="viewBraille",i},keyMagnifier:function(t,e){for(var o,r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return(o=m.Magnifier).create.apply(o,h([t,t.explorerRegions.magnifier,e],u(r),!1))},mouseMagnifier:function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return x.ContentHoverer.create(t,t.explorerRegions.magnifier,e,(function(t){return t.hasAttribute("data-semantic-type")}),(function(t){return t}))},hover:function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return x.FlameHoverer.create(t,null,e)},infoType:function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return x.ValueHoverer.create(t,t.explorerRegions.tooltip1,e,(function(t){return t.hasAttribute("data-semantic-type")}),(function(t){return t.getAttribute("data-semantic-type")}))},infoRole:function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return x.ValueHoverer.create(t,t.explorerRegions.tooltip2,e,(function(t){return t.hasAttribute("data-semantic-role")}),(function(t){return t.getAttribute("data-semantic-role")}))},infoPrefix:function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return x.ValueHoverer.create(t,t.explorerRegions.tooltip3,e,(function(t){return t.hasAttribute("data-semantic-prefix")}),(function(t){return t.getAttribute("data-semantic-prefix")}))},flame:function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return b.FlameColorer.create(t,null,e)},treeColoring:function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return b.TreeColorer.create.apply(b.TreeColorer,h([t,null,e],u(o),!1))}};function E(t,e,o){switch(e){case"magnification":switch(o){case"None":t.options.a11y.magnification=o,t.options.a11y.keyMagnifier=!1,t.options.a11y.mouseMagnifier=!1;break;case"Keyboard":t.options.a11y.magnification=o,t.options.a11y.keyMagnifier=!0,t.options.a11y.mouseMagnifier=!1;break;case"Mouse":t.options.a11y.magnification=o,t.options.a11y.keyMagnifier=!1,t.options.a11y.mouseMagnifier=!0}break;case"highlight":switch(o){case"None":t.options.a11y.highlight=o,t.options.a11y.hover=!1,t.options.a11y.flame=!1;break;case"Hover":t.options.a11y.highlight=o,t.options.a11y.hover=!0,t.options.a11y.flame=!1;break;case"Flame":t.options.a11y.highlight=o,t.options.a11y.hover=!1,t.options.a11y.flame=!0}break;default:t.options.a11y[e]=o}}e.setA11yOptions=function(t,e){var o,r,n=w.default.engineSetup();for(var i in e)void 0===t.options.a11y[i]?void 0!==n[i]&&(t.options.sre[i]=e[i]):(E(t,i,e[i]),"locale"===i&&(t.options.sre[i]=e[i]));try{for(var a=c(t.math),s=a.next();!s.done;s=a.next()){s.value.attachExplorers(t)}}catch(t){o={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}},e.setA11yOption=E;var C={},k=function(t,e){var o,r,n=w.default.clearspeakPreferences.getLocalePreferences()[e];if(!n){var i=t.findID("Accessibility","Speech","Clearspeak");return i&&i.disable(),null}!function(t,e){var o,r,n=t.pool.lookup("speechRules"),i=function(e){if(C[e])return"continue";t.factory.get("variable")(t.factory,{name:"csprf_"+e,setter:function(t){C[e]=t,n.setValue("clearspeak-"+w.default.clearspeakPreferences.addPreference(w.default.clearspeakStyle(),e,t))},getter:function(){return C[e]||"Auto"}},t.pool)};try{for(var a=c(e),s=a.next();!s.done;s=a.next())i(s.value)}catch(t){o={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}}(t,Object.keys(n));var a=[],s=function(t){a.push({title:t,values:n[t].map((function(e){return e.replace(RegExp("^"+t+"_"),"")})),variable:"csprf_"+t})};try{for(var l=c(Object.getOwnPropertyNames(n)),u=l.next();!u.done;u=l.next()){s(u.value)}}catch(t){o={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(o)throw o.error}}var h=t.factory.get("selectionBox")(t.factory,{title:"Clearspeak Preferences",signature:"",order:"alphabetic",grid:"square",selections:a},t);return{type:"command",id:"ClearspeakPreferences",content:"Select Preferences",action:function(){return h.post(0,0)}}};g.MJContextMenu.DynamicSubmenus.set("Clearspeak",(function(t,e){var o=t.pool.lookup("locale").getValue(),r=k(t,o),n=[];try{n=w.default.clearspeakPreferences.smartPreferences(t.mathItem,o)}catch(t){console.log(t)}return r&&n.splice(2,0,r),t.factory.get("subMenu")(t.factory,{items:n,id:"Clearspeak"},e)}));g.MJContextMenu.DynamicSubmenus.set("A11yLanguage",(function(t,e){var o,r,n=[];try{for(var i=c(w.default.locales.keys()),a=i.next();!a.done;a=i.next()){var s=a.value;"nemeth"!==s&&n.push({type:"radio",id:s,content:w.default.locales.get(s)||s,variable:"locale"})}}catch(t){o={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return n.sort((function(t,e){return t.content.localeCompare(e.content,"en")})),t.factory.get("subMenu")(t.factory,{items:n,id:"Language"},e)}))},724:function(t,e,o){var r=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var r,n,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a},n=this&&this.__spreadArray||function(t,e,o){if(o||2===arguments.length)for(var r,n=0,i=e.length;n<i;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],r=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractExplorer=void 0;var s=a(o(712)),l=function(){function t(t,e,o){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];this.document=t,this.region=e,this.node=o,this.stoppable=!0,this.events=[],this.highlighter=this.getHighlighter(),this._active=!1}return t.stopEvent=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopImmediatePropagation?t.stopImmediatePropagation():t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},t.create=function(t,e,o){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var s=new(this.bind.apply(this,n([void 0,t,e,o],r(i),!1)));return s},t.prototype.Events=function(){return this.events},Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!1,configurable:!0}),t.prototype.Attach=function(){this.AddEvents()},t.prototype.Detach=function(){this.RemoveEvents()},t.prototype.Start=function(){this.highlighter=this.getHighlighter(),this.active=!0},t.prototype.Stop=function(){this.active&&(this.region.Clear(),this.region.Hide(),this.active=!1)},t.prototype.AddEvents=function(){var t,e;try{for(var o=i(this.events),n=o.next();!n.done;n=o.next()){var a=r(n.value,2),s=a[0],l=a[1];this.node.addEventListener(s,l)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.RemoveEvents=function(){var t,e;try{for(var o=i(this.events),n=o.next();!n.done;n=o.next()){var a=r(n.value,2),s=a[0],l=a[1];this.node.removeEventListener(s,l)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.Update=function(t){void 0===t&&(t=!1)},t.prototype.getHighlighter=function(){var t=this.document.options.a11y,e={color:t.foregroundColor.toLowerCase(),alpha:t.foregroundOpacity/100},o={color:t.backgroundColor.toLowerCase(),alpha:t.backgroundOpacity/100};return s.default.getHighlighter(o,e,{renderer:this.document.outputJax.name,browser:"v3"})},t.prototype.stopEvent=function(e){this.stoppable&&t.stopEvent(e)},t}();e.AbstractExplorer=l},269:function(t,e,o){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,r){return new(o||(o=Promise))((function(n,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var o,r,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Magnifier=e.SpeechExplorer=e.AbstractKeyExplorer=void 0;var l=o(724),c=s(o(712)),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attached=!1,e.eventsAttached=!1,e.events=t.prototype.Events.call(e).concat([["keydown",e.KeyDown.bind(e)],["focusin",e.FocusIn.bind(e)],["focusout",e.FocusOut.bind(e)]]),e.oldIndex=null,e}return n(e,t),e.prototype.FocusIn=function(t){},e.prototype.FocusOut=function(t){this.Stop()},e.prototype.Update=function(t){if(void 0===t&&(t=!1),this.active||t){this.highlighter.unhighlight();var e=this.walker.getFocus(!0).getNodes();e.length||(this.walker.refocus(),e=this.walker.getFocus().getNodes()),this.highlighter.highlight(e)}},e.prototype.Attach=function(){t.prototype.Attach.call(this),this.attached=!0,this.oldIndex=this.node.tabIndex,this.node.tabIndex=1,this.node.setAttribute("role","application")},e.prototype.AddEvents=function(){this.eventsAttached||(t.prototype.AddEvents.call(this),this.eventsAttached=!0)},e.prototype.Detach=function(){this.active&&(this.node.tabIndex=this.oldIndex,this.oldIndex=null,this.node.removeAttribute("role")),this.attached=!1},e.prototype.Stop=function(){this.active&&(this.highlighter.unhighlight(),this.walker.deactivate()),t.prototype.Stop.call(this)},e}(l.AbstractExplorer);e.AbstractKeyExplorer=u;var h=function(t){function e(e,o,r,n){var i=t.call(this,e,o,r)||this;return i.document=e,i.region=o,i.node=r,i.mml=n,i.showRegion="subtitles",i.init=!1,i.restarted=!1,i.initWalker(),i}return n(e,t),e.prototype.Start=function(){var o=this;if(this.attached){var r=this.getOptions();if(!this.init)return this.init=!0,void(e.updatePromise=e.updatePromise.then((function(){return i(o,void 0,void 0,(function(){var t=this;return a(this,(function(e){return[2,c.default.sreReady().then((function(){return c.default.setupEngine({locale:r.locale})})).then((function(){t.Speech(t.walker),t.Start()}))]}))}))})).catch((function(t){return console.log(t.message)})));t.prototype.Start.call(this),this.speechGenerator=c.default.getSpeechGenerator("Direct"),this.speechGenerator.setOptions(r),this.walker=c.default.getWalker("table",this.node,this.speechGenerator,this.highlighter,this.mml),this.walker.activate(),this.Update(),this.document.options.a11y[this.showRegion]&&e.updatePromise.then((function(){return o.region.Show(o.node,o.highlighter)})),this.restarted=!0}},e.prototype.Update=function(o){var r=this;void 0===o&&(o=!1),t.prototype.Update.call(this,o);var n=this.speechGenerator.getOptions();"speech"===n.modality&&(this.document.options.sre.domain=n.domain,this.document.options.sre.style=n.style,this.document.options.a11y.speechRules=n.domain+"-"+n.style),e.updatePromise=e.updatePromise.then((function(){return i(r,void 0,void 0,(function(){var t=this;return a(this,(function(e){return[2,c.default.sreReady().then((function(){return c.default.setupEngine({modality:n.modality,locale:n.locale})})).then((function(){return t.region.Update(t.walker.speech())}))]}))}))}))},e.prototype.Speech=function(t){var o=this;e.updatePromise.then((function(){t.speech(),o.node.setAttribute("hasspeech","true"),o.Update(),o.restarted&&o.document.options.a11y[o.showRegion]&&o.region.Show(o.node,o.highlighter)}))},e.prototype.KeyDown=function(t){var e=t.keyCode;if(this.walker.modifier=t.shiftKey,27===e)return this.Stop(),void this.stopEvent(t);if(this.active){if(this.Move(e),this.triggerLink(e))return;this.stopEvent(t)}else(32===e&&t.shiftKey||13===e)&&(this.Start(),this.stopEvent(t))},e.prototype.triggerLink=function(t){var e,o;if(13!==t)return!1;var r=null===(e=this.walker.getFocus().getNodes())||void 0===e?void 0:e[0];return!!(null===(o=null==r?void 0:r.getAttribute("data-semantic-postfix"))||void 0===o?void 0:o.match(/(^| )link($| )/))&&(r.parentNode.dispatchEvent(new MouseEvent("click")),!0)},e.prototype.Move=function(t){this.walker.move(t),this.Update()},e.prototype.initWalker=function(){this.speechGenerator=c.default.getSpeechGenerator("Tree");var t=c.default.getWalker("dummy",this.node,this.speechGenerator,this.highlighter,this.mml);this.walker=t},e.prototype.getOptions=function(){var t=this.speechGenerator.getOptions(),e=this.document.options.sre;return"speech"!==t.modality||t.locale===e.locale&&t.domain===e.domain&&t.style===e.style||(t.domain=e.domain,t.style=e.style,t.locale=e.locale,this.walker.update(t)),t},e.updatePromise=Promise.resolve(),e}(u);e.SpeechExplorer=h;var p=function(t){function e(e,o,r,n){var i=t.call(this,e,o,r)||this;return i.document=e,i.region=o,i.node=r,i.mml=n,i.walker=c.default.getWalker("table",i.node,c.default.getSpeechGenerator("Dummy"),i.highlighter,i.mml),i}return n(e,t),e.prototype.Update=function(e){void 0===e&&(e=!1),t.prototype.Update.call(this,e),this.showFocus()},e.prototype.Start=function(){t.prototype.Start.call(this),this.attached&&(this.region.Show(this.node,this.highlighter),this.walker.activate(),this.Update())},e.prototype.showFocus=function(){var t=this.walker.getFocus().getNodes()[0];this.region.Show(t,this.highlighter)},e.prototype.Move=function(t){this.walker.move(t)&&this.Update()},e.prototype.KeyDown=function(t){var e=t.keyCode;return this.walker.modifier=t.shiftKey,27===e?(this.Stop(),void this.stopEvent(t)):this.active&&13!==e?(this.Move(e),void this.stopEvent(t)):void((32===e&&t.shiftKey||13===e)&&(this.Start(),this.stopEvent(t)))},e}(u);e.Magnifier=p},85:function(t,e,o){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var r,n,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.FlameHoverer=e.ContentHoverer=e.ValueHoverer=e.Hoverer=e.AbstractMouseExplorer=void 0;var a=o(367),s=o(724);o(712);var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events=t.prototype.Events.call(e).concat([["mouseover",e.MouseOver.bind(e)],["mouseout",e.MouseOut.bind(e)]]),e}return n(e,t),e.prototype.MouseOver=function(t){this.Start()},e.prototype.MouseOut=function(t){this.Stop()},e}(s.AbstractExplorer);e.AbstractMouseExplorer=l;var c=function(t){function e(e,o,r,n,i){var a=t.call(this,e,o,r)||this;return a.document=e,a.region=o,a.node=r,a.nodeQuery=n,a.nodeAccess=i,a}return n(e,t),e.prototype.MouseOut=function(e){e.clientX===this.coord[0]&&e.clientY===this.coord[1]||(this.highlighter.unhighlight(),this.region.Hide(),t.prototype.MouseOut.call(this,e))},e.prototype.MouseOver=function(e){t.prototype.MouseOver.call(this,e);var o=e.target;this.coord=[e.clientX,e.clientY];var r=i(this.getNode(o),2),n=r[0],a=r[1];n&&(this.highlighter.unhighlight(),this.highlighter.highlight([n]),this.region.Update(a),this.region.Show(n,this.highlighter))},e.prototype.getNode=function(t){for(var e=t;t&&t!==this.node;){if(this.nodeQuery(t))return[t,this.nodeAccess(t)];t=t.parentNode}for(t=e;t;){if(this.nodeQuery(t))return[t,this.nodeAccess(t)];var o=t.childNodes[0];t=o&&"defs"===o.tagName?t.childNodes[1]:o}return[null,null]},e}(l);e.Hoverer=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(c);e.ValueHoverer=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(c);e.ContentHoverer=h;var p=function(t){function e(e,o,r){var n=t.call(this,e,new a.DummyRegion(e),r,(function(t){return n.highlighter.isMactionNode(t)}),(function(){}))||this;return n.document=e,n.node=r,n}return n(e,t),e}(c);e.FlameHoverer=p},367:function(t,e,o){var r,n,i,a,s=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.HoverRegion=e.LiveRegion=e.ToolTip=e.StringRegion=e.DummyRegion=e.AbstractRegion=void 0;var l=o(888),c=function(){function t(t){this.document=t,this.CLASS=this.constructor,this.AddStyles(),this.AddElement()}return t.prototype.AddStyles=function(){if(!this.CLASS.styleAdded){var t=this.document.adaptor.node("style");t.innerHTML=this.CLASS.style.cssText,this.document.adaptor.head(this.document.adaptor.document).appendChild(t),this.CLASS.styleAdded=!0}},t.prototype.AddElement=function(){var t=this.document.adaptor.node("div");t.classList.add(this.CLASS.className),t.style.backgroundColor="white",this.div=t,this.inner=this.document.adaptor.node("div"),this.div.appendChild(this.inner),this.document.adaptor.body(this.document.adaptor.document).appendChild(this.div)},t.prototype.Show=function(t,e){this.position(t),this.highlight(e),this.div.classList.add(this.CLASS.className+"_Show")},t.prototype.Hide=function(){this.div.classList.remove(this.CLASS.className+"_Show")},t.prototype.stackRegions=function(t){for(var e=t.getBoundingClientRect(),o=0,r=Number.POSITIVE_INFINITY,n=this.document.adaptor.document.getElementsByClassName(this.CLASS.className+"_Show"),i=0,a=void 0;a=n[i];i++)a!==this.div&&(o=Math.max(a.getBoundingClientRect().bottom,o),r=Math.min(a.getBoundingClientRect().left,r));var s=(o||e.bottom+10)+window.pageYOffset,l=(r<Number.POSITIVE_INFINITY?r:e.left)+window.pageXOffset;this.div.style.top=s+"px",this.div.style.left=l+"px"},t.styleAdded=!1,t}();e.AbstractRegion=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.Clear=function(){},e.prototype.Update=function(){},e.prototype.Hide=function(){},e.prototype.Show=function(){},e.prototype.AddElement=function(){},e.prototype.AddStyles=function(){},e.prototype.position=function(){},e.prototype.highlight=function(t){},e}(c);e.DummyRegion=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.Clear=function(){this.Update(""),this.inner.style.top="",this.inner.style.backgroundColor=""},e.prototype.Update=function(t){this.inner.textContent="",this.inner.textContent=t},e.prototype.position=function(t){this.stackRegions(t)},e.prototype.highlight=function(t){var e=t.colorString();this.inner.style.backgroundColor=e.background,this.inner.style.color=e.foreground},e}(c);e.StringRegion=h;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.className="MJX_ToolTip",e.style=new l.CssStyles(((n={})["."+e.className]={position:"absolute",display:"inline-block",height:"1px",width:"1px"},n["."+e.className+"_Show"]={width:"auto",height:"auto",opacity:1,"text-align":"center","border-radius":"6px",padding:"0px 0px","border-bottom":"1px dotted black",position:"absolute","z-index":202},n)),e}(h);e.ToolTip=p;var f=function(t){function e(e){var o=t.call(this,e)||this;return o.document=e,o.div.setAttribute("aria-live","assertive"),o}return s(e,t),e.className="MJX_LiveRegion",e.style=new l.CssStyles(((i={})["."+e.className]={position:"absolute",top:"0",height:"1px",width:"1px",padding:"1px",overflow:"hidden"},i["."+e.className+"_Show"]={top:"0",position:"absolute",width:"auto",height:"auto",padding:"0px 0px",opacity:1,"z-index":"202",left:0,right:0,margin:"0 auto","background-color":"rgba(0, 0, 255, 0.2)","box-shadow":"0px 10px 20px #888",border:"2px solid #CCCCCC"},i)),e}(h);e.LiveRegion=f;var d=function(t){function e(e){var o=t.call(this,e)||this;return o.document=e,o.inner.style.lineHeight="0",o}return s(e,t),e.prototype.position=function(t){var e,o=t.getBoundingClientRect(),r=this.div.getBoundingClientRect(),n=o.left+o.width/2-r.width/2;switch(n=n<0?0:n,n+=window.pageXOffset,this.document.options.a11y.align){case"top":e=o.top-r.height-10;break;case"bottom":e=o.bottom+10;break;default:e=o.top+o.height/2-r.height/2}e=(e+=window.pageYOffset)<0?0:e,this.div.style.top=e+"px",this.div.style.left=n+"px"},e.prototype.highlight=function(t){if(!this.inner.firstChild||this.inner.firstChild.hasAttribute("sre-highlight")){var e=t.colorString();this.inner.style.backgroundColor=e.background,this.inner.style.color=e.foreground}},e.prototype.Show=function(e,o){this.div.style.fontSize=this.document.options.a11y.magnify,this.Update(e),t.prototype.Show.call(this,e,o)},e.prototype.Clear=function(){this.inner.textContent="",this.inner.style.top="",this.inner.style.backgroundColor=""},e.prototype.Update=function(t){this.Clear();var e=this.cloneNode(t);this.inner.appendChild(e)},e.prototype.cloneNode=function(t){var e=t.cloneNode(!0);if("MJX-CONTAINER"!==e.nodeName){"g"!==e.nodeName&&(e.style.marginLeft=e.style.marginRight="0");for(var o=t;o&&"MJX-CONTAINER"!==o.nodeName;)o=o.parentNode;if("MJX-MATH"!==e.nodeName&&"svg"!==e.nodeName)if("svg"===(e=o.firstChild.cloneNode(!1).appendChild(e).parentNode).nodeName){e.firstChild.setAttribute("transform","matrix(1 0 0 -1 0 0)");var r=parseFloat(e.getAttribute("viewBox").split(/ /)[2]),n=parseFloat(e.getAttribute("width")),i=t.getBBox(),a=i.x,s=i.y,l=i.width,c=i.height;e.setAttribute("viewBox",[a,-(s+c),l,c].join(" ")),e.removeAttribute("style"),e.setAttribute("width",n/r*l+"ex"),e.setAttribute("height",n/r*c+"ex"),o.setAttribute("sre-highlight","false")}(e=o.cloneNode(!1).appendChild(e).parentNode).style.margin="0"}return e},e.className="MJX_HoverRegion",e.style=new l.CssStyles(((a={})["."+e.className]={position:"absolute",height:"1px",width:"1px",padding:"1px",overflow:"hidden"},a["."+e.className+"_Show"]={position:"absolute",width:"max-content",height:"auto",padding:"0px 0px",opacity:1,"z-index":"202",margin:"0 auto","background-color":"rgba(0, 0, 255, 0.2)","box-shadow":"0px 10px 20px #888",border:"2px solid #CCCCCC"},a)),e}(c);e.HoverRegion=d},854:function(t,e,o){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TreeColorer=e.FlameColorer=e.AbstractTreeExplorer=void 0;var a=o(724),s=i(o(712)),l=function(t){function e(e,o,r,n){var i=t.call(this,e,null,r)||this;return i.document=e,i.region=o,i.node=r,i.mml=n,i.stoppable=!1,i}return n(e,t),e.prototype.Attach=function(){t.prototype.Attach.call(this),this.Start()},e.prototype.Detach=function(){this.Stop(),t.prototype.Detach.call(this)},e}(a.AbstractExplorer);e.AbstractTreeExplorer=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.Start=function(){this.active||(this.active=!0,this.highlighter.highlightAll(this.node))},e.prototype.Stop=function(){this.active&&this.highlighter.unhighlightAll(),this.active=!1},e}(l);e.FlameColorer=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.Start=function(){if(!this.active){this.active=!0;var t=s.default.getSpeechGenerator("Color");this.node.hasAttribute("hasforegroundcolor")||(t.generateSpeech(this.node,this.mml),this.node.setAttribute("hasforegroundcolor","true")),this.highlighter.colorizeAll(this.node)}},e.prototype.Stop=function(){this.active&&this.highlighter.uncolorizeAll(this.node),this.active=!1},e}(l);e.TreeColorer=u},306:function(t,e){e.q=void 0,e.q="3.2.2"},511:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.EnrichedMathItemMixin=MathJax._.a11y["semantic-enrich"].EnrichedMathItemMixin,e.EnrichedMathDocumentMixin=MathJax._.a11y["semantic-enrich"].EnrichedMathDocumentMixin,e.EnrichHandler=MathJax._.a11y["semantic-enrich"].EnrichHandler},712:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Sre=MathJax._.a11y.sre.Sre,e.sreReady=MathJax._.a11y.sre.sreReady,e.default=MathJax._.a11y.sre.default},723:function(t,e){MathJax._.components.global.isObject,MathJax._.components.global.combineConfig,MathJax._.components.global.combineDefaults,e.r8=MathJax._.components.global.combineWithMathJax,MathJax._.components.global.MathJax},769:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.protoItem=MathJax._.core.MathItem.protoItem,e.AbstractMathItem=MathJax._.core.MathItem.AbstractMathItem,e.STATE=MathJax._.core.MathItem.STATE,e.newState=MathJax._.core.MathItem.newState},433:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DATAMJX=MathJax._.core.MmlTree.SerializedMmlVisitor.DATAMJX,e.toEntity=MathJax._.core.MmlTree.SerializedMmlVisitor.toEntity,e.SerializedMmlVisitor=MathJax._.core.MmlTree.SerializedMmlVisitor.SerializedMmlVisitor},77:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=MathJax._.util.Options.isObject,e.APPEND=MathJax._.util.Options.APPEND,e.REMOVE=MathJax._.util.Options.REMOVE,e.OPTIONS=MathJax._.util.Options.OPTIONS,e.Expandable=MathJax._.util.Options.Expandable,e.expandable=MathJax._.util.Options.expandable,e.makeArray=MathJax._.util.Options.makeArray,e.keys=MathJax._.util.Options.keys,e.copy=MathJax._.util.Options.copy,e.insert=MathJax._.util.Options.insert,e.defaultOptions=MathJax._.util.Options.defaultOptions,e.userOptions=MathJax._.util.Options.userOptions,e.selectOptions=MathJax._.util.Options.selectOptions,e.selectOptionsFromKeys=MathJax._.util.Options.selectOptionsFromKeys,e.separateOptions=MathJax._.util.Options.separateOptions,e.lookup=MathJax._.util.Options.lookup},888:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.CssStyles=MathJax._.util.StyleList.CssStyles},850:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MJContextMenu=MathJax._.ui.menu.MJContextMenu.MJContextMenu}},c={};function u(t){var e=c[t];if(void 0!==e)return e.exports;var o=c[t]={exports:{}};return l[t].call(o.exports,o,o.exports,u),o.exports}t=u(723),e=u(306),o=u(18),r=u(724),n=u(269),i=u(85),a=u(367),s=u(854),MathJax.loader&&MathJax.loader.checkVersion("a11y/explorer",e.q,"a11y"),(0,t.r8)({_:{a11y:{explorer_ts:o,explorer:{Explorer:r,KeyExplorer:n,MouseExplorer:i,Region:a,TreeExplorer:s}}}}),MathJax.startup&&MathJax.startup.extendHandler((function(t){return(0,o.ExplorerHandler)(t)}))}();
   </script>
   <base href="https://www.ecoledirecte.com/login?cameFrom=%2FFamille"/>
  </meta>
  <link href="style.css" rel="stylesheet"/>
 </head>
 <body>
  <app-root _nghost-ng-c2239468317="" ng-version="19.1.7" style="position: relative;">
   <div _ngcontent-ng-c2239468317="" class="container-principal">
    <ed-custom-busy _ngcontent-ng-c2239468317="" _nghost-ng-c3651941352="">
     <!-- -->
    </ed-custom-busy>
    <router-outlet _ngcontent-ng-c2239468317="">
    </router-outlet>
    <ng-component>
     <div id="main-part">
      <div id="main">
       <router-outlet>
       </router-outlet>
       <ed-login _nghost-ng-c2903637670="">
        <main _ngcontent-ng-c2903637670="" class="container-fluid no-padding" id="login">
         <div _ngcontent-ng-c2903637670="" class="row">
          <div _ngcontent-ng-c2903637670="" class="col-lg-4 col-md-5 login-container">
           <div _ngcontent-ng-c2903637670="" class="text-center">
            <img _ngcontent-ng-c2903637670="" alt="Logo du site EcoleDirecte" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK0AAABxCAYAAACnUyMXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjU3OEQ0Rjk1RDMwMTFFOUIwQ0ZDNzczMjQyQkZBQjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjU3OEQ0RkE1RDMwMTFFOUIwQ0ZDNzczMjQyQkZBQjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNTc4RDRGNzVEMzAxMUU5QjBDRkM3NzMyNDJCRkFCNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyNTc4RDRGODVEMzAxMUU5QjBDRkM3NzMyNDJCRkFCNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgHRr04AACwiSURBVHja7F0JfBNV/p83k6ttmja979KbUnpAy43IfQuuiheXq64iyiqy6+1fhd11wWNVPNj1FlRUVBYQBDmF5aa00AKlB73b0Ltp06ZNZv6Z+81k0iZtgabkfT6PSUKSTt585/u+v9/7/X4PEASBuJr9zdhpUhZX1UeX1ejDdQ36oKo6fYiuvjXoaqMhoLnV6N1kaPdqbDF6t7R3eDYZjBoCAUhjq9HLcoAa/0StkrcqZViHl7uiWamQtWvVqgYftVu91tOt3tdTVRfoo64O9vWsCPFVV4ZYjuGBXiVuCnnbzXwNgAu00q2xpU17vrA69VyRLvVi8dWk/MqGuKKqhpjSOn2YBYiAAh55QACDQRqIBILyX4JCSCWAI1eFf4wTENRx6hjmo66MDdYWxIRoC+LDtHmJkf45Qwf5nw/z9ypzgfYmaQZjp/vZyxUZxy+WjTmRWz4ms6AqvbSuJYzGJkqBk+AAijJgpYEISGASgH+NZVEgZFXC6nWJRrBvIYQvEKI3kNfMAmwCJ3iAW17Tusub0mMCM9Njg06lx4ecGpEQciLMX1PmAu0AaO0dJtXJC2VjDmQVTtmfeWXqifzqDMv1xyhmtICSIIHJAtRyBNxzij6pIwEzLTeaUo9BL84UAin3EiH8f4KgQU7wz8kjQeDUMcJXXXHr0PCDE5LpHh3iU+ACrZO0ipqmsF+OX5r3y7HLtx06X3pra6fZjQIjyoCUAiYLUhaQKM2wHMsCCJBAAE4gBicAfXfyomtEWIGZ4B8zoOXBLARybKDmyqz06J3TR0TtvDUl8oCbQtbmAm0/alcq62K+O3juvu1H824/WVCdDgBGT/Uoxkzz9FQPGMBKSgAGrOT/oRAwCUlQ9ha4wJpluwQxAV9IWgKTc4AEgDkgU9ICpx67ydH22cOidt4xPv6H2SNjdnioFC0u0N6ApqvXB205lHPP9wfO33f0cuUoxAJUEpQcUEnoYQxIEQacHEhhgPJAInoFPltvAfZ/FkirBskXWIAKwEyyLGEDxDSAlXLEOGd41M7FU5O+mD48epdchna6QHsNG04Q6J5T+TO/2JX50LaTefM6cSADFpBS0z4DVhq4QhnAApVlWAAQoQywe8omuprNu8EqsPEfUq8D++4JKcNN9JhgWZeTEDgHYn+NonbRhMGbHpyR9p+EcJ+LLtD2YatvNvh+vOPksk93ZT5ypaY5ggQqQoEVo7QqxbIko2JCoNKGFkJr1y5RQEAgtJ6KrRnO0dG3BiQBnRMAUuAFjgO5GxATzHOWdTkAI2ZkSlLYgWVzUt+fMzJ2mwxDTS7Q9rBdKtEN+eDn409+tf/cEoOJUJFalZr+KaDKmCMDVABrVZhR2StNiHBnfWGB2OABElY9TkiNLgQcCVShIm8DYW3oEVZglZoRhI8J0LVOBrZADAGYBC5gAYybkWh/dcnK24e/uXRq8qc32nhzKtBmXq7I+OfXh176+UTefJJRASpjWBWjpn6AWB6zehWgNoBqG6CC6RIwRxaMAGYk9rOQq4kDtb1yFwYc+5wGHMpKFuoJ+z5UJGcQ5sZkZwwJL4cdAOZBbAPAFHhx5jUzEqBW1D1527B/PT532Ls3ynBzCtCevFg2+m8b97+6K7NoBgdWSApQZhOjXcWsKu33xAVGCmlzswAlV51w7v9wROumaArVelSG+XmWB2vVlUG+7lVBWnWVxl3Z5O2hbNR4KJs83ZR6DAVmlQJrV8pl7Rz54jimb+v0bOvodDN2mpUNLW3aBn2bT4O+3ade3+ZbVdcSUlmnD62w9CtXmwa1deJK2BfMut1gsAIBmEVABmKXnb0AFrOwcJzIIw9g8v8s4PVQ1D1zR8brj8xK/fB6M2+/Bi0pA17+bO/rW0/mz6P0KQlSTEZpVQKln3Osyl00CUYRWc0AxzkmpZzwpP8yQHNlaLhvTkKY9lJiuO+FhDDfS/FhPpe8PFSN1+O3Wq4DqKhtDiuqaojNK6sdnFN8NTmnuDb5XMnVlCZDh0bwG1ldToJY4KJDBeClDVChV0TI7t24JhgAAwH74ozmxalxjPBxq1yzaOxz901I3AQAQty0oK2sbQpd/cXeNZ/vO78UByjKM6vMDrBKONlZAwOhB1ujkunHxgUfz4gPODkqIeRYRlzwST8v95r+eOOSYM4vr004dbly5MlL5aMP55RNOF9amyTwhgB+gQRIAViCgQlB3IQtS44QgJcGDC6QDqRkIME7Ni7gxFsPTngyIz7oxE0F2g6TWfHej0ee/sfmwy/qjWY1QrIqKmM0q4y+IKwri506xUIV0qKAAanlEuFjYgNOTkuL2DM1bdCeEfEhx8np3Fm9JrVNrf6/nyuZuOd0/qydpwtnVzUZAhEASyQGwFagpscMSK72OQZeVioQjFwgn6OEmXhi6tCPXls07nlPd0XzgAftnlOXZ678cOf6y7qmWAqgImYlKK8A4DwC1lYVzaTAjFNHFQY6Zg2L3LVgfNzmaWmDdnurVQ3IAGwkE58tqEr/+ciFu348fHHB5avN0YBlV+4GZwCMsL5rFJIOjoBXbGwSEHgZ2WBh3UE+bhXr/3TrslkZUTsGJGjrmlr9/rrhl3c2HsxdyDOrjNKuAPIMWP4R6TImVA+ycDFAmGenRv5617jY7+aOiNlGGkvITdayC6uHbdqXtfSbAzkLdS1GPwAzMIoJZyuEHluUEqOs1HIUvJDRxoCXshks7PvY5MT/rH1g/NPuSnnrgAHtdwey73/6o53vXm3p8KNASjGrBbSYDAHQwMJgBbAEYMAa66e+snRy4udLJyd9GuyjrkRcDek0meW/nMibt2H7qcf35ZROIii2xTgjFuFmsN6AVyQbCDZQB7dcGhq4iYGe+RufnHFvWrR/plODtkFv8FmxfttH3x25eDeCyhGWYSlZgGGCgBaCdlxSNhTgwEqKfwKZmxa26/E5ae9MTonYaxlw3AVV6ZZXVpO4/udjKz/ff36p0QwUlFRAIfACGT2bkeDFAO3vFkS62cG6sLuMIRSWdd3khPHDByc8tnhS4udOCdoDZwumPvTmz1+WNRpCCAtgAcayKzt4GK+zJMAqB8B0/5iYzU/fnr4uKcL3vAuS9rfqen3w+1uPP7V+++kVrSazG+CMXBi89MoiGV7MeSIAEPl57QEv77EhzOSMaEaWT07895sPjv+zQoZ1OAVozTiOrdm477W/f3fkRUq3YnLa58rIAYSJF6CmK245k+CWEpWA6Hx4UuKnf/lD+uvhfp6lLgj2Drxv/nDkuQ93ZT7WgVt4gJVl4oUbKCKOBi1qn9YV+3hJ1sXNlGyYlRS89+uV0+/qjb1xXUB7taElcMk/f/hmX07JZFoCyBl2ldNGAjVAmDAQhNFGADETi8bEffvy3SNeiQ7yLnBBru9aYWVd7HMf73lr66mCeZyXhiURmIUh1iUk8uK6Bi8LXMbDYAHvsFBN7n+fnzMz1Fdd3i9BezqvfOSdq7/ZWtHUFkyzq5xnVxTSr9wAENxqy7TE4ANvLB2/MjnSL9sFsWvXfjtTMGPFBzs+yq/RR3FyTXCNZIzbDGNAy1wv8tBVwiYbmYMz3gVAL/SQrDvYz6Nw5wtzpg8K8CrqV6AlswYefmfrZwYTUAEZzK4wYKEYAcZtEuWtKl+3eOyqO8fEfu+C1PVpZHLn6k37V7+99cRKM6kJmOsk8OpQbMwEz3PLx90xrsg9Ri320N6FQV7Kir0v3zYxOsir4IaDlnR4r9m077XVmw+/TP1ohmF5wwsTZguQP8byI2QWtf7MrOS3nr9rxGqPPvbt2dP0BqOmWNcUVV7XHFbd0BJc22Twr2k2BNQ0tvu3GjvUja1GbzIApsXymAyAwS1Xr7GtQ2Pr+3w8lI0yDOskaxuoVQo9edR6qOq1GkW9r9qtPshbXRWo9agK1qqrIgI0JYHeHtU3GrxHcoon/PHNnzcW1bdEAJS2O8hrx0kHdnUSzvpA2etuG7yUMY0z7IszS+pkyKPWrezQq/PGhvrYLxX6HLSkwbX83Z8//nTvuT9SP5aVBIx+pacaKF6AYde0EE3uJ49NfmB4dMDpa31hWto61JmFVennrlSnZRfp0i6W1ScV6pqia1rafYUBJwyLiEMCIUMEOJiKQ9jM7yIQtVJuiA/0KogP1ualRPllJ0cGZI+MDzrhp7m+cRHNre1eD7/90xc/nci/nTOYOeaVc7Mk7xpzALiMzoWBmxKkubj35bm3+mncaq47aMkpZvHrmzf/93ThbTRQFbQuYg0vFIMyB2iBLrOc9QtzUtc+f2fGaqUcM16rC3G5vCbhh99z7j2QXTLlyOXK0SYCyDnGR5kYXJQNLLEFVlupMUj3KTpS4ywCMBBkFOBczG9aqDZ3elrE7jtGx/8wIi74xPWIpiJny7e2HH72ha8O/t2MMnIBo33qBMoeGeCizKJEdxoX0rmsccZ6FibG+B3d/eKcSfa4w/oMtCRg//B/G3fsyy2dxAOW/XEyfjmW/cMWORCldS/f+MTk+8YmBB+5VoOfX14Tv/LD7et/zS6eTk9zvF+YisVFUVGtA1H2AJDKwO2r9HBxZgRinc8lSIXBkfExgcc/enTKn4ZE+OZcD9bdfvzi/IXrfvq21US4ITI5Q0BynoyoGAZZnwD3kfGxn//7kQkPXhfQNhvaNQtWf7N1b27ZJPaOpKWBwnJklw5RyAWCI3ekhW//+NGJD2jVqvprNeDnCivSJv31k0NNRrOGIG8iGT/FAdhzAcWnCtkU8BDtikkdkQi2xpt5nftXlOLDpb5Yuo8KbTr1j7vTowK9C68HcDPzyzPmvvLNLl1rhx/CEBLBEhIjF9ggHUeBy/02C2gJwox8tGjUimXTkt6/pqBtbe/wmPncZ/uPFupG2gNYyzP8rXtHPPPnWalvX8tpjgxzTPvT27mXdc2x1PmQ3gtusOVCdxtAhcC0waiSqeRED1gXEOKLYNPHyR4JTv+TkWwm5JEJ8Z9teHTSQ9dL5+YWVydPe+HL/bqWTj+acfsauHSEmAoljCdfnTdyaITPOVsfQ3sLjAWrv956tLCaBiwJDBkJEMsPkmEiSUAgfm6yxl//OnPWk7NT37rWuuz7g1n35lXXx1J6lRlY8tyoAZfJ6PPE6FgHSirAHWU7ncnLdio0kuuMFsaA4x0Vfhf8N6i/yf596JyoZW72XC3nn1vZMPR6GmdJg4LOH3rjoXGBalktYu60WNwW6YlbjrjJIvVM1BI7eWsRJBBR5tKSR3ZBTaozdfzoAir0728jgHLRRwc2t3WY3PoctKSX4IF133+9+3zpVEq/kkC1HGmGlVHxrwTgGTYl0PPSidW3j5iaHLbnegzy3sz86fxaOqur5VSnXG/Ma9TrCMaF7/F1EZhO2Oqgl93G98J/G4qLpSOxmHBNS/fzVNdeb3dYXKjf5R2vLZrlrUSbSeACCrw0aIFleieneDKQiZc2do4DANxvJ9k6u0qf+Pefs17pc9Cu3LBj/XfH8u5CZDzDUkfWD4uyLiMCmZIQcPj3V+ePiQ70um7LsGcLqobTTMZk6GL0kbybKQc5y5Qow34A6l2xw/Xs8Dkx58ied/IgnxuySjg8Luz0t88uuAclo2BI4FrYliCZlgQuxbZM5i5iJ9uyv5OKk2Kui+Varduduyq3vCG5z0D70fbjT3y488xjvIa1MCzHYtCyrOV8708ftOWXZ2ZP83JXNl6vgSU9GRcq6hIIJnaUZH2WoSiNDdXx6hvWvI6d0dlpkX5nb9QCxPT0uF/XPTDlWRKoFHBNJOOaKU2K4MyR9QzgfFlUuxiXuTaWb5Wt+PLYR30C2t8y82f8+eNf3yUghiUojShjdB/KMeyKSQkbNq6YfM+19L9KtZwr1Sk4+dtQJs0EZTQTpyXR/seqdrMvQY1vaoQ260aunK28Y/ybd46M20oCl2baTqqTbEsvfTEZzyh9vvb9NoZ1mdnkQGHNuF/Ols7rFWiLq+uj7l/7/WYcYCjBWY0yvmgGtMr17PSkt99dOm75jQjOzi6qTBPm/oui8fvS1XrdGm+3ahSylugArxse8bbhydsfjvB2ryAlAmAkAqlxqSPMtqKyUl24E6BVSJpxX/4x8x9krbYegZbca+C+td9/X99u9qZZll08YONi2VuFQF6ck7r2n/ePWnW98uDFLauwchgBYEscqprIalkA+qAj0r0nzdZ3if+epWVE+GTdqLGFm4+ne90Hj9+2jPKxssYYk1KOwNrW6nd01aHZ0KJtz1Y1J/33TMkdPQLtM5/sevtkoS6DjSdgQ9eEoYU48sKsoev+tiDjuRs5mFmF1cMQeIVLdNF7znRwlUFRx3G+cwUtzHZ0PouV/7yNv8G8Ny3C52x/4f/ZIxN2LBid8CPpOybMNNMSOKRvHWZb0V1suY7v7bmw0mHQ7j59edb7u84sJ3Ur7aRntCxGL4fSgLBo2ImDN/xtwcgbCljSFZdVqkvmGJXUtVwVRT59WiAZumNSWE8ISilJdQiQuAiMuMRrUgCGO6sPCR7MqRHeWUg/amsfmvkXBQo6EYL2ILBdcKP3lG0t/WBR3dhTRTWj7AZtvd7g++j6/36CQP5OLk0G8JLgj6Oiv353ydjlN3raulxWM7itE1dxFb5FBZPto1uouBzEcDRz4Ix2M/MaztyJsJY0YoZfgzrpjBe/Rr0u/oyJfy5+zPSR0QHH+xNoIwO1xctnDf8IWMaEYM6VY1sC7x3bMtdw45HCB+wG7aqPf3mnrMkQQrIsArMra4lbGHbOkODfNjx0y4P9QWedKaxMB0xaCOsxIFAA3emwpSrVCaigIcyqJoY9GfAQDMA44HWIAEp3YGI644znnps6BO8TgJgDtUn02IRkhGrODQ71vtDfzMS/3HXLWgXpqaI0LTtzmHhtCwh+bO3qrGeHXjX89kzxPR0mXNEtaPdnF0356mDuInoFifbD0kmIPMtmhGrPffP45AUKGdrRHwbvVF7ZKPruhPdVED3vbsQov6GEViUvhpkBlonxT5oYBiWPnWQ3Ilo50eyjAE2RanlljLeyJMJTVqlVIE1kR80dOGIyUu8H5PvJz5HPO43055n/Yztg/g7ZMbzT/O7icY/3R99GsI+m8r5bkjaTRhiZlQA4KQSxLIEgDqAW4RjGcs1qDWbt/guV08hvkHXlLXhyw44P6BA0GRPBzix3MswV5qnUbV05bY7GTdFvKrmQe4DRd6mEP7ZbC58ZXKgYCFWnimGOGG+3spQwbXZsoGd+lL/mir9GdTXQy6M60MtNF+DlrvP2sK/0khknsDq9wY8s93m1uS2gtrnNv6y2OSKvon5wfnVTXF51Q0J5oyGIDdwhZw2NUt76+aNT/3gtwzh72x6bM+qDLw+dX0zPSjJ+/KjlLpx3iVIzmD0yDTCZDvT13JNTNXNmStgvNkH7/rZjT16oakwgZAooJlbGMZYSAx1bVkz5Q6jWo7y/DJrJjMsyi3Wp4kqCVvEE3WWRMlrWXQba7hsWtWVOWui2WxKCDvl5uvVJBgFZ/C7Ay0NH9sEIIjnVV9Tpww7mlE4+mlc+LjrQu2jhhKSvyLq4/dmTPCIh7MTgYG3+JZ0+Dmf1LM4sMLD2AUAc9w1S15BAfr1QOfNtW0xLbrH59y1HXmCZlcDYzEw2rYJAPl4ybtmomIBj/WnQLpXphrSZzCoyigv2HgiiqroaL85QwJFp8f6Hvn5k/N3+nqqrN+K3hPp6li+8NekrsjvTEsiC8Unfr/nx6IuA8YgQCOSzZVZKe7RVleUzF2taYqubDMGSmvafPxx8sam904sONsG4YBP2oi+fkPDx4vFxn/e3ATtdUJkBWGnAyQJ7jTDeSAjTKHVblk+Yf6MA68xtRnr8Ls5Vx7ntCBFwEccMMsAbZFmlDcOtQFvT1BKwfueZxwkudE/OGF50uaKRYX5Zb90/6s/9ccDOFlSms1KAQDHI+LLXCKOnsDvTwn/sTzrdmdrIhLDjGjelnjfAmCRGyGXrsDEGeKMss6Qu3Qq067cfe6rdjKtIZgUihtWoZC2bH594l0qOtffHATtVUDmCDt+DHNRsbr49nWGCEVG+J1zw66leR80ZUUGZ9N6R4uVccXfEiUAzbZ5OP1gA2maDUfP+zjPLCThAGvDLtB8sHP2ExWou7I+DRZa2zLyiSxUybFeGmISbC6FdXWnh2rMu+PW8pcUEnRUyK1zfC/Sql9YbIgSG2NcHspY0tXd4kcEwdMlNlGZaC3stzIj6YdHYuC/760DlluiSO3BcgcgAFOQNhL07o5XabhNrTwj2uuiCXs9bfKhfHpBkWqSHgUWA+3xpQ6sQtJ/+lvkwwe54yHYLM4Vp3HTvLR7zWH8eqExqJYwO8CbgBQXEeltRG24DqmUEe52XocDkgl7PW7i/VylVP4IQbdULsy9wFLl0rYx6o1nDgfZ0fsXIzNKrqXTIIbxMiyAfLBm3zEetquvPA0Uu3xJQOgrnQUBFXoRu2rAIn0wX7HrXgrzV1dT+u7BnBkGsdayjzfKZRmOnhtO0Xx/MWsw65LlAE4RMl4n6Yd6wyK39faAyC6vTrSKFgAMB3wwlpIZ7Zblg17vmrlK00hglpPcR7k0jKF8WXQJn64m82xGurDl9wT1VipY37hu9sr8PErnknFlimSVQDOE7yh8F0V421AHjD0yL8D3jgl3vGpleRbC1bOEIO3F3lG6Zz6GsNCipbwkTX9zV84e/FqL1qOjvg5RTrEvpNONyQjKtBti3AkMvMZqTQrxyXLDrXSPrYVzDG6KdYtrdmfmzEDYlhWHZtDDf3CemJ7/jDIOUWVSVzqfRoIiAcVkgo90YYZb/Gh7odcFNjrW5YNe71tRq9LYO+kb7gGkRKnCIYtpDucUTxdH665fcslyGok5hRZ8pqkznDC5BJRhEtJTbdU8L83bp2T5otXqDn2AZHb4WPXbREuwSexVK7pB9+HLFGH7XawS5Z3jMT+Pjg393lkGijTBUuFRrtQ9WtwIfGRbh7fIc9EEr1jVECa+BaJ8GhwNm+MWJSK17qexCac1QoxlXUMmKJFFhqHnN3aNfcJYBIo2ws2U1yfQ2pCJpYI8RxutZJC3c5e7qi3a5qj5eOicPFQYzIQ5Wm7S8PdJXXYyeK65OpQoHM1/wpwlDPo8L0uY5ywCdu6JLM+G4TKCbUGhXcgfu6tRQlzzoi3a2qHo4IZkk2ts8ewRJCfPKlmUXV6Wy3+Mml7X/3x9Gv+JMA3SmqCKD20ZeYHjxRqVtI4x3pSQGaAo8VfJmF+R61zrNZvmpYt1w6jpgIvejlSHmmDogH6SEac+iJTWNg9iXlk9J+Xew1rn2lqU8B4KUcBTadQWxb3As7xke6u0KkumDdjyvfIyhw+RuJQvECz4OIZbucgw1DiWX2ctr9WHkf5GZlE/PHfGGsw3S6cLqDIJbqoUzFOwMkmHa0dKGMdM/OHyQgNLEqSQ9AiqgYdeqDv0ebzdl45BQbe79Y+I2JQT73DQBOLvP5s8mYJsCQwUhAVwgvsONQKbG+B4mw2Jl5XXNoeRLD01K+SJE61nhTANEej7OldcMoerjol2FI3aHWoBcaWoPu9JoCONy9XEzX+eAzd1nDQJ7GSKnav6aPbnPPjct6e01fxj5PJkbNtBB+8PxvAW8QSyDAq+kAvHtJVo6EXJqQuBv5Euy1o5Od4sZRjw9d7TTsSzp+TAj1G4fwurcwEGmpSLf2HKTzGPOoGOLdSDdM60EoC1Mjb2+L++vbSbE7V/3jFoxkAF78nLF6Ms1zdFc0BWraTFxtUpHXV30NZg7NHQb+RRtae/wmJ8e+0tssE++sw1SdnF1mmRdAyl/bVd59VB+PccM1GCztR4U9nWZUtih1945XPDEyeLaUQMZtP/Ze2YZz7Ay3vWIiK+HHbUnED4on+zpwV7n4gM9L1FMSwbpLp81ar0zDlJ2CZkuDmtYVHg3ow7c1TDDUuzKHq1MWMd8i2SjpAaCfHGs8OGRg/wGZCqPrrEl6NtjefdwDCuDWFasa+1lWbYGheXBvelh37L/I4sL0BZNTYn+zSlBW3w1jWNHuHqjZBJjd4hFoF1ngNV/9Ri0ZEfpqujnKppTByrLrt958imDGVEhcjm0/zGkaQFsgQGHgAtQ0Ll4xKAvONCumDvmPQAA4WyDRIZTniWD1sXeAqnas/Y7AvmnwAawHXHVAGZ6w+mPG3FcMRABS7Lse3vOPsGXG5AJNS13XewdR3aGo1N1FqeEbAnUqLh9g2ULJ6ZudMaBKtI1xDR3dKopzQgbYYIADXvGCE66E+eFIL2MXYbLK+FIQoBn3kAE7eofD7+qN+EeiFxJbXdFSQMKuCiUze1ofWB+7FbcGiuINpRp1e71zjhQ2cW6NKHxBLm5QHc5YfDAAERQKBneLdFu32wXHgQWtGYzcu/wiG8GGmCzrlQN33Ag50/83rmM8QpncnPywF6WBZzHZm58wO6MCJ+TAtA662CdL9WlWm1EJyg0192dDRebgzJG4erVgu0+e6RhOD/v7PjA3+Ykh20bSIAla6ct/3TPv3HUMvjcxoJyqCoR5iDLigsAmpGXZyS+Kn6X04I2q0SXZuXisllNprspCKGroMALCjguYuAeSAMGuDPiAvZ/++AtC/pD/d6+bG9uP/7ssZLaDHj/DXpbAzljGGPCotb2jhtO9zsTg7eNjPQ5PmBAe7a4Js26uBywLpPepdCnNmYzaWRYKzlIwAy4ElSArU3bQ7b1VGCGlGCfnMVjYr+8e0TMtzdil59r2U4VVo18aeuxVylmlbMMK+ONMBTtGcsytRJQlOh4Y/7Qp6Xe6ZSgJUvqlzTow6g7XBAkAxzeEfzR4WFfbbgr9SHE1exuja3t2vvXb/vOTCIUk/EsywEWE61+ATsBy9b+MiMvTYp9M8pXXThgQJtNubpQYR4YHJqI2uPuooOKk4LU510wdEzH3vveth8KGtsGUaRBeQwUjJ5VMCVhIdDa7S4kuKrhSX7qvOenJa6x9U7UGQfuHOU5ABIsi9ifZsNo1SGBmlwXFO1vT2/c+97uvIopvNEFSQPYIEbsBSxbUZErDYp/ds/wB1Qy20UOnZRpdWmCgskYJgQv2o34hxYPhgZ5upjWzvb61qMvrz944TGaWUUsyxpfKGsM2wtYev851tPy0sSYdVLGl9MzbVZJTapV7pejmtYyRt4qrCHQk19pcTXb7T/7sh57YeuJ1ZwMYDu3ZAvn5DlgeEHbXU2M8P7fKzOSXu7uk07HtGRRjuyquiG0A1tiJcwezwFTKzUj2PucC452AHZ/1mOPbjr4ISJXCAErk/EeA9auQOwxvqw3ZPFzw+o2Lcy4157if04H2kvlNUNw3HLeXMFk8WqYnUEylrEaEujp0rPdtLd/OfnMqi1H1wrBqoB0LLPy5RBgAW944ZR/sfOnxaPvDPVyt2vTGacD7fmymmQ+DBGDNCwiXAnrdjMQi5Ua6OkqgWSjkTt/P//d7+vW7claxWtXSL9ym8dgIpnWTao+B1yc20zwyztTl90S7XfI3nNzQtBeTRHm0WPMHY5BKTbdMC1TkdrFtNLN0NHp/tDHv361ObP4TkSugtxZjKcAhQELoP3BugOsaFNBsxl5ZVLc35eMGPSZI+fnfKAttzAtCoRBxYJwRDvUAbO/QnKwxqVpRa2ktmnQnet3bD1T2ZiKKJRCsGLQEq2jgAUscPlNrJ8YFbHh1RlDXnL0HJ0OtFmltamS6eJ2Ld/yLcxTWemlkje6YMq33eeKZy38ZM+munaTD2d0YXIhw4rrS9grCdjkUGqrVhOyNDnkm3fmpz7Rk/N0KtDWt7T5VjQZgqkBFWxsh1lX5etSUyFIqkvPcs1oMitf/fnomn/uyf4rBU6FCgIsy66odSXKrgDLjjUA0E7ktGtraUrIN5/ek76kp9nJTgVazgizmcBobyONMNdKGNlyy2uTl37y28YzlQ2pnH4VxBOIy6Y6AFguNJONoDMhj4+I+Pe781Mf7006vVOB9lJF7RBhHVpRajKK2hlzAJChN3nMAVn4eO3OUy+89mv282YCKBCFmwiwEt4BewHLphmxPnHGS/DiLdFr18wc+nxvQzSdC7RVdYO5ARMPpINV+BIDNTetPNh3oXTaU5uPvJtzVZ9IAZPyDsisDS0pg8sWYOHwTQG7UvHJ+Ibbhq54dEz0h31x/k4F2tyK2qGConLiQBn7k2+JRH+Pm26vsKKaxphnfjj61o/nSuZT4CS9AwJmxSSWZO1lV5EcYPywbnJCv+XujIWzE4O399XvcCrQ5lQ0DLHOVADWz7tB7CCNW7mHQtZys4C1yWD0XvfrmefW7s9ZaSZQWgqg0BIsJrMu+Y+KbIUu2RXyv0IMm6R1y/txyajbE/zVl/ry9zgNaBta23yq9IZAanUGldCzdpc+BUijCfcw4wQ20GtrkWB9b1/2U+sO5DzVYsS9BMHaKGYNWHGoZ3dyQIpdGcAuSAjY+umC4UuvRflUpwHtpcr6wdLb+iAOl49sbDf5vHuseNXT46LWDViw7reAdT8LVoyWAvBKFiaSAb3RrhxYLUcUN340Z8iqZWNiPrhWv89pQFuga4gTxBwIyqPb6zlgLgROIKv2Faz976Wr80aGak5GeSmvRGndimJ9PQoitB7FShlmvBa/obalzb+80RBW1WgIKW9sCS9raA2XYcA0OylyR0ak36nefv9lXUPChwdznvjkeMEDrSZcTYFUqYTcVixgJVxY3bGrwO8qza4pvu65G+9JX5gS7JV9LbHgNKAtrmmM5jNsEaHHwF6mZQecYZPfy5vG/V5aP45epWEtXTMR5CHXhatVlQFq5dVgL7eqQLVS5+uuqPNSKZrI6U4pQzlQk6GSBqPJw9BpcjeacIW+vUPT2GbU6vTGgHqD0bemxein07cHlLUaA3AzrrTKrLCczit7L750aPm0KRNiAw86Oi5kYMue3NKZ6w/m/nnnxYoZHIMqFJBRhfFgBahtN1ZXYEWkDC0OsPjLt8SsfXFK4mvw2Nz0oC2qaYrmYw5EBoOV68se8ELAZ7+Tqk1rBtVGIqi6vS0IqTFYntcjVol3LNqILqWz8AbDlMxoiyQNbbygB4pqJjsC2nxdY/w3p/IXbTpZuKig0RBFnb/SXcik4g1TegJWsc+V87viHLv+5460h0dFdJ1tcFOCtrCmKUawXaUgD6wHG09QbIvTF5KqS0vpMctjDGISGKhS5ZMQ6fRycUIffJ5W/mQ64inaT1Nkj7zYcqbo7o0nCpYcLasdyYGSXMkSrFzBex2gPZMB3GOotBNbcNoyK8kwwrB2WvyrK8bFviPH0M7riQWnAe3lmsYY4YZqiGhzNUdYluCBy10YpqiyrbJIRDdAtfW3bIEZZjALGEaE+56Q1qmNg3fklN22I7f0Ngsbj0PIX06xqpv1PsBAKhbDUWZFRKtZQrCS7HpvUtCWdbOGrgr3di+9EVhwCtCSAR265vYAKlAGLkvPPXaQceGpma1HCxBhLVrx7tlSdWptgdfq5pEqHQrVv7WwfH59a3y8n3uersUYdKa8MeP3wqsTt+eWzb1U0xTHfZZkVKt0eZH1j6LCqi4AtZYqNpkV4UtEsTGvrBQwm5CxIV4n35g9dNXYQb5HbiQenAK0ddS2lQhULBkR+WZBz7angpmP9TvCgEKEs3g3L9gStl3fUxRQADJvy/mtrE4UdHIhgE0fpn475JoS+FYllrRtgdVqO3toYYAzsPhzSfRxz1s9JeWVO5PDvu8PpZ2cArS1eoO/tccA6UH5SAemcqsvJpDuEejI98Pfy8wWKPy72KwM0XdITvuINKuKZxX4b4pZFd7FhwFrnJeq8OVJQ/9237CITfYkHLpAC7Wr+nZ/QS0D0EW/Vu2afjfCGIA4U0LfcsTENcSANDgFKdugm7+BIIKNT+DAFu6II6l+7jnPTohbuyAlfHN/AqtTgZYM/rYqv0mIa8pCbHgtAXatUAsYxgVS+z0gos2Q7fGciLwdMFARQsiqjJE1JdLn0KpbYt+YmRC8sz9XeHQK0LZ3dqqswcpqLoxxV5HvxCDrF1wfluwLBicIIRA5PzJiw4BDbAOVk6m4tQzAcSv3lQxFDI8OC9u4bHT0B0ODvJwixtgpQOumkLfxjCranI7sQMw88FSKIFYI6G8gljKSHCq7LzKmrAwrCKiMR2BUkObM0uHhny8cFrlJo5I3OdO85BSgHeTndYV6wFq0ZhNjOZugLZQIyICRcPcInPqEDese9B8Aiw0nwUMJWcT5fKWWWulVrBAPRdXC5PDNS9IHfe4srOq0oB0+KOhMjK/nlcKG1igybQPBOy3AhViUvDAYzvstCSD0VVJbIgHpan6SYO6C6noLbJsLE128LrUiR0iwKScBeL3q5y6vuXtI6E/3pYZ/PTbS938DobgzIAjnqKhO5jQdyiuf+Mv5K7dtzSmfV9LcHtFlEDPMunDyIwxkQbCNhHFjq75qT3Fry9cr5Y5CJBi1q6kfkgBDfNUX5ycGbJ+bGLJtVLjv8YEWN+w0oBW3cxW1qTtySm/bfaly5u9l9SMtP0VuvZQJpB3wlE9UKjJfIkYXAGm0gt6CVgRYqw2jCeuaATbAqlHJGmZF+e2fEuv/29TYwN+ifNRFyABuTgtauBk6TO7HrujG/l5YPfFQoW7iIRLEOCIXxtxK1K+Fq6MIHgNEciXJJvN2X2fBNrNKMCjSNasGqZVVkyJ9j4yJ8Pnf2Ei//w0L1WYOtD0dBjxoxa2t0+SWU9mQnFVRN/xMeV36mbKG9NO6pmSLrpXxskEcSCJepJDKjLCxgGE3aG0xKSEhBWiQ+rorakYFe2Wmh3mfSQv2Ppse5nM6UutRjNzEbUCCVqqRQTcXqhuTLl9tGpxf2xx3uUYfT/Zzdfr4NqNZYwVg1EHgOmSEiQArA8bBXu7FMT4eV+J9PfIHB2guDPbXXCJL6/t5qGoQV7s5QdtVq21p969oMoTq9G1BVc1tIdXMUddiDKxv69C2Gk0e+k6zurnD5Fnf3qlp7jR7IGZyn1sJ6WCZpt2VMr2/UtakUcr1ZPdUYXqNQq73cZfXBapVuiBPMhtCpQvWuFVGat1LgjzdqwbaHmPXsv2/AAMAc8KhcztdFRIAAAAASUVORK5CYII="/>
            <h1 _ngcontent-ng-c2903637670="">
             EcoleDirecte
            </h1>
           </div>
           <div _ngcontent-ng-c2903637670="" class="form-box" hidden="" id="site-closed">
            <h3 _ngcontent-ng-c2903637670="" class="animated fadeInUp alert alert-danger" id="outputbis">
             Ce site est
             <br _ngcontent-ng-c2903637670=""/>
             actuellement fermé
            </h3>
            <br _ngcontent-ng-c2903637670=""/>
            <p _ngcontent-ng-c2903637670="" class="form-text">
             Vous ne pouvez pas vous connecter pour le moment.
             <br _ngcontent-ng-c2903637670=""/>
             Contactez votre établissement pour plus d'informations.
            </p>
           </div>
           <div _ngcontent-ng-c2903637670="" class="form-box bottomSpace" hidden="">
            <h2 _ngcontent-ng-c2903637670="">
             Redirection en cours
            </h2>
            <fa-icon _ngcontent-ng-c2903637670="" animation="spin-pulse" aria-hidden="true" class="ng-fa-icon">
             <svg aria-hidden="true" class="svg-inline--fa fa-spinner fa-spin-pulse fa-pulse" data-icon="spinner" data-prefix="fas" focusable="false" role="img" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
              <path d="M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z" fill="currentColor">
              </path>
             </svg>
            </fa-icon>
           </div>
           <ed-login-form _ngcontent-ng-c2903637670="" _nghost-ng-c4224837587="" class="form-box">
            <!-- -->
            <div _ngcontent-ng-c4224837587="" id="bloc-connexion" style="position: relative;">
             <h2 _ngcontent-ng-c4224837587="" class="text-center">
              Connectez-vous
             </h2>
             <!-- -->
             <form _ngcontent-ng-c4224837587="" class="ng-valid ng-touched ng-dirty" novalidate="">
              <input _ngcontent-ng-c4224837587="" aria-invalid="false" aria-label="Identifiant" autocapitalize="off" autocomplete="username" class="log form-control focus-blue ng-valid ng-touched ng-dirty" id="username" name="username" placeholder="Identifiant" type="text"/>
              <div _ngcontent-ng-c4224837587="" class="mdp">
               <div _ngcontent-ng-c4224837587="">
                <input _ngcontent-ng-c4224837587="" aria-invalid="false" aria-label="Mot de passe" autocomplete="current-password" class="log form-control focus-blue ng-valid ng-touched ng-dirty" id="password" name="password" placeholder="Mot de passe" type="password"/>
                <button _ngcontent-ng-c4224837587="" class="btn no-background hov-transparent btn-secondary float-end focus-blue" id="show-password" title="Afficher le mot de passe" type="button">
                 <fa-icon _ngcontent-ng-c4224837587="" aria-hidden="true" class="ng-fa-icon">
                  <svg aria-hidden="true" class="svg-inline--fa fa-eye" data-icon="eye" data-prefix="fas" focusable="false" role="img" viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                   <path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z" fill="currentColor">
                   </path>
                  </svg>
                 </fa-icon>
                </button>
               </div>
               <a _ngcontent-ng-c4224837587="" class="mdp-lost focus-blue" href="https://api.ecoledirecte.com/mot-de-passe-oublie.awp">
                Mot de passe oublié ?
               </a>
               <!-- -->
              </div>
              <div _ngcontent-ng-c4224837587="" class="form-check text-bold">
               <input _ngcontent-ng-c4224837587="" class="form-check-input focus-blue ng-untouched ng-pristine ng-valid" id="seSouvenirDeMoi" name="loginStored" type="checkbox"/>
               <label _ngcontent-ng-c4224837587="" class="form-check-label" for="seSouvenirDeMoi">
                Se souvenir de moi
               </label>
              </div>
              <!-- -->
              <div _ngcontent-ng-c4224837587="" class="clearfix">
              </div>
              <div _ngcontent-ng-c4224837587="" class="d-grid gap-2">
               <button _ngcontent-ng-c4224837587="" class="btn btn-info login focus-black" id="connexion" type="submit">
                Connexion
               </button>
              </div>
             </form>
             <cg-busy>
              <div class="cg-busy cg-busy-animation configBusy" hidden="">
               <div class="cg-busy-backdrop cg-busy-backdrop-animation">
               </div>
               <div _ngcontent-ng-c3651941352="" class="ng-busy-default-wrapper">
                <div _ngcontent-ng-c3651941352="" class="ng-busy-default-sign">
                 <div _ngcontent-ng-c3651941352="" class="ng-busy-default-spinner">
                  <div _ngcontent-ng-c3651941352="" class="bounce1">
                  </div>
                  <div _ngcontent-ng-c3651941352="" class="bounce2">
                  </div>
                  <div _ngcontent-ng-c3651941352="" class="bounce3">
                  </div>
                 </div>
                 <p _ngcontent-ng-c3651941352="" role="status">
                  Chargement en cours
                 </p>
                </div>
               </div>
               <!-- -->
              </div>
              <!-- -->
             </cg-busy>
             <!-- -->
            </div>
           </ed-login-form>
           <div _ngcontent-ng-c2903637670="" id="item-mentions">
            <button _ngcontent-ng-c2903637670="" class="btn btn-link focus-blue" edmodalfocusinit="" type="button">
             Mentions légales
            </button>
            <button _ngcontent-ng-c2903637670="" class="btn btn-link focus-blue ms-3" edmodalfocusinit="" type="button">
             Accessibilité
            </button>
           </div>
           <span _ngcontent-ng-c2903637670="" class="float-start version-site">
            v4.79.0
           </span>
          </div>
          <div _ngcontent-ng-c2903637670="" class="col-lg-8 col-md-7 info-container">
           <button _ngcontent-ng-c2903637670="" class="btn btn-link focus-black" edmodalfocusinit="" id="pb-connexion" type="button">
            Problème de connexion ?
           </button>
           <div _ngcontent-ng-c2903637670="" class="autopromo">
            <p _ngcontent-ng-c2903637670="">
             <span _ngcontent-ng-c2903637670="">
              Retrouvez EcoleDirecte aussi sur votre mobile
             </span>
            </p>
            <ul _ngcontent-ng-c2903637670="" class="list-inline app-link focus-white">
             <li _ngcontent-ng-c2903637670="" class="list-inline-item">
              <a _ngcontent-ng-c2903637670="" href="https://play.google.com/store/apps/developer?id=Aplim" target="_blank">
               <img _ngcontent-ng-c2903637670="" alt="Page Google play de l'application mobile EcoleDirecte" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAA2CAYAAABA8JJzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTcyNTQxNUU1RDM2MTFFOUIwQ0ZDNzczMjQyQkZBQjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTcyNTQxNUY1RDM2MTFFOUIwQ0ZDNzczMjQyQkZBQjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNTc4RDRGRjVEMzAxMUU5QjBDRkM3NzMyNDJCRkFCNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyNTc4RDUwMDVEMzAxMUU5QjBDRkM3NzMyNDJCRkFCNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnCocuYAABiZSURBVHja7F0JeE3XFl733khuIgQlqClVraGaamoWQyotUfPcmomhxvZpq5TS6kRrbJUqSjVFVYw1lYqgZqkxIogxSExRYkhkv/Vv9nnn3tyTwZR47vq+/eWeeZ991l7Dv9baMUVERJDJZKKrV6/SrFmzKCUlhXLmzNkoNja28b59+15ISEjwsFgst3GOk5yUGRJCmG7fvm0uW7bsSR8fnzAvL6+Qs0wdO3Yk3id5zgUnguny589PSUlJvqtXr/6Oma+mc/ic9KDozJkzL/GfhgUKFPioZMmSQ4sXL/69p6cn3bhxg2j79u10+fJlmjx5sj/vvAHGdTZne5itR48eX5w/f54OHDhAdPPmTQoNDS3i6uqa6BwcZ3tUrVu3bk2mTJlCtHHjRvL19V3lHBRne5TNzc3t9KBBg3Kwf2Epv2LFijFOS8VJj5LYOcn11FNPHTDny5evuXM4nJQVxHZgkPngwYO+j+sL8AwiFxeXbNMfDw8PypUrl7ZdpUoVat487fn9xhtvUEBAwBPJgOfOnfOlatWqLctOtkHRokXF4sWLRXR0tGDvXMTGxop169aJpk2b2pzH7rwALVq0KNv0PS4uTvbJarXK7bVr18rttK4B4R2fRDswd+7c0WaTySSy06woUqQINW7cGLODvvjiCwmOly5dmhYuXEg//PCDdt6VK1eIGZU2bNiQbfqOPv7+++90h+fu9DE9unbtGl26dOmJlIA5cuRIoho1aizJTrPilVdekVKhVatWNvt/+umnVPtZ5aW6vly5cqJJkybi2Wef1fYVK1YMXpf8XbVqVcGq0fD51atXF0FBQSJnzpw2+/PkySMKFy4sf5cpU0bUrFlTmM3mNN+FGVJcv35d/q5YsaJgbZPqHEj5PXv2pNr/6quvyvdgJzHdMcM4sCqX9+ePKve5urpKLeHp6amdV6BAAcETXNsuVKgQpJD87evrq/1+VA1OSLZlwL59+9rsx8cG7d69W25jYBMTE8WoUaO0c1hiiqSkJBEfHy/OnDkj8ubNK/cvX75crFmzRvz222/i5s2b8j4bN260+Tj4MNu3b5fHExISBEsm0aJFC+14r169xPHjx8WPP/4onwv6559/NKZEwz2PHTumbf/yyy+SwVgqin///Ve7pmDBgoYMCMZnqS73X7x4UZw4ccJmMtk3Pz8/eQ5LUXHr1i3RuXNnub9SpUpyLN555x3t3BUrVsj7KqZG//7++28xe/Zs2TdMqkfNgOZsGD90uB/hQmYAKlWqlHLjyd3dnZjJ5HblypVp8ODBUm3zTCe2Ge+EepiYYahu3brSQWBJRD179sTEoxkzZsjjiHNDleMYTwB67rnn6MiRI1KdQv2rexQvXpxee+01qlevHvGHppdeeolGjhyp9ZHtVypRooS2DdXq5eVFLFmIJS8hBopreCIYvv/SpUuJpTixxKV8+fIRS1D6888/Dc9fsmSJDKNiHJ5//nnNJGGJLx00PFsRxgX9UXF9mAgsNal27drUrVs32rdv36P/4I+LBETDTOdBk7+Z+eR5EyZMkNtly5aV21u3bpVqWH8dfyTBDGyzjz+q5iC8/PLL8vfAgQO14y+++KLcN378eLndunVruV2nTh0b6QVnSW1DkmGf2p4zZ04qJ2T+/Pk2jopeArJEkMdCQ0OlSmVbWEotENSlo/EKDw+Xx9u1a2ezH6YG6IMPPtD2hYWFCZ64ghlTbuPdQDApsuJbP1YSkG0bYluODh48qG3rKTIykho1aiQl5P79+2natGnaTGe1JiWYnrZs2aL9fvrpp+VfZAbpAujyL9tRmpQEIXSpiNWqlMyK7DOGIKHtiSeI/AsJZ094PxBPCGKbV74DpCGrbWK16XBcmjVrRn/88QexOqWoqCh65pln5H51Pqth7Vz81vcR4wKCZskqynYMqAaI7R+b/d988438O3r0aIcMCFq2bJnEBj/77DOpUlq2bCn3QxWzxLGX/HpAVPvw9swAxpYDZTZrqk0RPnJycrLh5IH6tCd/f3+bZ+opLi5O/p0+fTp5e3vLBpWOfp0+fdrheF24cIEaNmxILLGlCoZKViYDiJ0R7VyljlU/1V9HE+WJZUD1ofGhAOR26NCB2IGg/v37S5sNdpn+PMVYbKgTOw2SKXbt2mXDLGfPnpX7Q0JCpESDDQjwd+rUqfL4jh07pMQDk8MGhK23YMECeez777+3+ZB64Bs2JdKKFOG33uZSDAi7DvlvXbp0IfZsad68eRrj4nx1j9jYWGKnQNqVgKJwDOMA29RossLWBZPCfoN0Vs+HNAQNGDBA2p+9e/eWdjJy8NTYKcZT21lC2c0GhC2nPFVF586dQ/aEzXlsoEsvb8yYMXIbNpOeZs2apdk68EJZ4oht27Zpx5kpbCAOZjppiymC1xoYGKgdb9OmjbQj9Z5iTEyMYGbXtnF/eN9qm5lYrF+/XoLlilatWiUhEnUOTw55ndpmppYeu57Gjh1rOF7wqhUdPXrUxv4NDg7WjuEZc+fOFadOndK8/0mTJskxxFhmlQ2Y7RgQTAHYATACPjbbNA7PAyzDKkca7mofe6wSJwTmpj8XEQlAM/hdv359ifUZPZ+9ZWn8w8nR78dHw+RQzoNiWkRu9FAOSyNt28fHR7sPmNkRzIHz9dicahUqVJDRHzhIaeGNwCeBW7L9a8PYqmGMWEWLuwEHua0mHnvPgj3+dPHMJ4oBH0aDZ5xeSMzZsoYB04zkm+6e+bgTPGfgX07KfmTIgGbPYlSk13vkXeAERU2aTVdPxD22L9mjR49slTXjpAwwoMfLAXS9RAtyLRtHzdbWpAM/LKBd4+aQuJ382L0kvEM9fpfVBK8Xni0wRER0IJ3ZWZGJCU4GVBiXuwtZU+Jo3/JYMvnnosBRfci3eQBtm7SA9of8kWUd9vPzk+ExQCAIJQFuAFanwm7ZnQDnIJT30UcfabgjcD9ATU4JaGMA3iZXDxN5FTDTvh23yHTtKgW1KE7PzvqQYjoF0eaJ8+jAsg2PxF4EYg9sDB8O2BrwMmBXSN1CbBV4GPDBX3/9VaZEZWeCxEPkAkD7X3/9JfcBj7x169Yj7wsww+DgYBlr3rt3b/YCos0WE5ldLeRqtVA+ZsLIEx60bvk1cjl3inzrlKZuoZ9T8G+f0jNVXriDqj+kDgKQRdlo27ZtaeLEiRQUFCT3Af2HBEFEA+g/oh6hoaEUHR0tkwmyMwNCWusZTh9deZSEqNGYMWOyNCM7TQZ0sZrIYmW14UGULz9RxPFcFL4rF1nOnyHXi6epeqvaNGT919Tzp/epaDmfB965Pn36yKTTtWvXyngtElLj4+Ntztm8ebOMLiA7BYQQlH3cNzuSPpSYVZEIFY1BTDv7MaALGNBMFjcLWaQkNJF3fkHbT3rS2v1PUV5XnsHnjpLpeiI17PwGjd42jrqODabc3g8G7sCs/O6772RiQf369dM9f9OmTVJCQiUbxU2zEz0JS51k5B1d0paAZjK5mqWBZzKlkMksqJBbCm0+nZus7kRtfeMpKfkaXYq7RrnyuFOPdztS/Tf9acGYxTR//FJKSU6+Z+kwZ84cTQpm5EXBdIh7pkUFCxakmjVrStUDbBA10VCJGZkMiCEjjgpGP3XqVIbeA3FqpWrhfGAbOXnHjh3LkM2HWHj58uVlnBp5fulJKjwD6lydh8wYmCiQdMj+wXMzSoULF5ZxaGTt4H3DwsJskiuQg4jxSMv5A/aPb4OkCpRYZIoBTcyAOcB8yPA2gwOZGS18Ae8q5H6bwk7n5Rc2UVffWLqRbKbE6zco7vpRKlYoD434ui+17h5As79dToumria6lZIpBkRSAZjlxIkTEp5Ij/CijjJPFMFjHj9+vLQNMRCAPZBYikwS2EBffvmlIX7Yt29f+eHAqEhUQJbMokWL6OOPP3ZouCMpdciQITKhAcwDBwqZL3gWGATJBoMGDUqTAX19fWnSpEkSOoJ6xgQARINkiREjRhheB88aNjImGdKzYBeDSVSyw/z582VyR3qQFJI+kDgBUwZJtXD20N8PP/yQxo0bJ8/p1asXde/eXWbgpHU/pLgdPXrUuDrQKBT3dLtgUW3zYeG3KEy8siRMVFwWJir9wW3FelFl1XpRcdUGUXTxVvH2nuUi4vZUseXmDPFX4kwRdn2G2MS/D4gVIk78KcLG9BZB5XwyFaJRiZxIIqD7DPcgrswfX6byI5ZLutoPReyNpoqHsr0pj7399ts28eCZM2fK/QjiN2jQwOaat956SyZS8EcSzDQySZSljzyfJbTgsdZiyTiuqHbt2to9VFIFnq/qWJB2j8RVkEq+cNRUginKAtCYAWWsHPHm999/XytpUEkaiGWDmNm0+DpLeC0hGEmwiBtj3Jgp5X6ePFrcHTR48GDD/qh3fPPNNzMfCy7asbuoEXFYVF4RLqqsDBdVV4eLams2iGprN4rq6zYK//X8N2yTKLF6uxgQtUocElPEXmbE7cnTxVYxW+xImSUSQ4cK8fMwIZZ8KlYMay1qliuSIabBIIGmTZt2X8yH+gowH5jA0XEU4igCY6n9LEnkPpYWDq9DRgsI2TFIONDfa9myZakmgMru0ddnILNakcqyRlaKyuq2fybqUxSxZHXYL2Q/pzVxUbQEYttaK4HVM2C9evXkNhjX0fUqS0clPaCfqI8xGn+WfloGO2U2I9oEJ8QNTgg3V7N0RPDXxQ37WSvzb1cPMxXPk0JL47xp2nEf8jbfojwWMyHLrPzCKHI/fJEohe2RG1eoflB5Cv++I00f0pB8CuROUwWgwBt0v4mS7733nqyrmDBhgsPje/bsoblz58rfnTp1kp42QnZIaIXqghozUnXK9sQzQFC7CtPTE2pLkN0Mwn0dxaRVYujAgQPl31GjRmnHYIMNHz5cmgnIW4RJYGRPwWyBvacSce0JiAEwSGVX4x31hNWqYJqonEt7+vnnnzX4BgRTAt8I+Kw9YSwrVKgga3TuEYZhZrNayMXVJJnOojUwpcsd5mQmhDNSwiuJlsYXpK+u+1IyWan0ygPkFsPMV4Q5FVnfLuyMxJ/nL5ZEXbtXpciVvahf6wqGnVJp5EgyvR9q06aN/Gv0wfSDqpwNNZgwvI3KA8AIKuGTpZc0/FVUg9VWqvMVOA57UGVa60nZr8A21fvj4yEZlqUt1apViz799FOqVKmStA3toSi985aeUwVkQY2tfd3yyZMnbSIyeC84G2A4CAXYt/oJA8ckISHBoQ0NexEE2/seYRi6KwEtsuG3i9sdKWixMlO6g0GJj/HAsmfs9ryV1pzNR8nDd5DryQtEpdnwhQmDBoHmyY9KAXQTR1a/EtSngzEDqhoFhN1UvUZaBA+1TJkyUtqhoS4EWcLwvpQUMSJW9xpuiBAfHADFLGkBxKqmBB8HzoXyPB1BRup9VGWf0YRT78r2qUyxh4SCsY+KPiNprCfcH1I5LVxRecIYH309i5769esn4S8w5LZt22QdC6Qnqg7RV/3EHDZsmJx89hMP90BkKr0QqWFPLVDB7hYJRru4/w+UBtNBBbswY0EaurJbfL54HsrF3vK4T36hwl9upYtbE/irs+dcgN1m2Nyu/KIe3MowI5TMTatDwqjZf5YadmrdunXajEYpY1pQAWYfVAYaVAjglc8//1wDpUFIhzciSEek7IMwWEqCwPNDMyJVtKSYD/UoIBRG2Us5eIogSDFHUIoqIIKnrM6fPXs2sU1nUyj1sLE5MC4kLvBUjCXUPbxhhOvAUNAWMFH091AlC2BEe80zdOjQeweiySQoh9V0l9nuqF8pBa3cWAqaWRq65uBBK5GLrBZBQ/v9RpVX7aGEyoUpYeNFSgg5SuTFHc3Pg1uCRWDZfLR1yxFq3mEe1Ws/nyKjLxg+GjNHET6CUS4fBmL16tXyhTFAsIGAswG6gaRRqgoSxSgdCwynjoWHh2v1JPgYgDPSMxMAMYDGjh1Lhw8flvcC06iiJ0hxSC/UgXzyySeGeCFIPRuqGO+S6agC9xnSyUiyKWxQ9VtJSnU+GO/111+nwMBAatWqlaxfxlhC1WJs8NeegTF+eD/UnCiCDQtBEBMTc+8MKJJu3pF4bsr5uKOG4XyYmQkl8xXxolzJt2lwt9/p5aWRFFvKG1U7ZPb2oCtrWELMPAIDkY7HXaZO3X+nqs1CaOGq6HQ7BfsLOBsIBdfLly93eB6SEiAtEf9V5ZpqUPT2HVQxsEVHhPsDswNDAZjG/VSIir1Wwz5C5YMmT54s/8KeQooVGBHPh+OBcsqdO3dK/A2xbMNowN0JoArlIVWxJk5mJRnwuPTyHtU7QRWria3GC9oGkg+hT0eEIna9DahIfSs4MLAVod6VDZguGcEwpfp0Ea3FWdHk7E7R9NxO0Th+p2hyfpdoejFCtLwUIeqKQ+KN5ANiZdtR4nSezmJvjd4i0r+riKrZVlyq20qI+q1E7IuVxNB65YSnl9s9wShYW0UR6jqwxgsZr7Sknfvuu+9quJaCdIDD2a/3gsYMJI/rl+Ho2rWrdi8syWF/jcLPsJSHUX+wtosiR7UgqHlRBExN7V+5cqW2HzCUfZ8B1QDXUzUejmAYrCbmqE/szMjjo0eP1tbMATHjye19+/bJ5UAcXasK84F/opbE/nhkZKRgu1iu4aMvzqd7rQkpPaCraC/iRdNL/4jmlyNEiyu7RIt/d4s21/4R9UW0aCIOisXtJ4rovH3Fzurvi4jqfcSRWt2Z8XqLy6+2FmNKvygKubndN5D87bffpqoQQ9GRvjiIjXe5qoGinj17ascwWFhrBYTBRfEOAFasBqDA1f79+6d6LgBWRV999ZX8WMDN8LFQMYdVBhwtjqRvqJBTwLC/v7/NMVZZ2v3x0YDBgdkwkbBeiyJ8zClTpkhsMiQkRALURisZsO0rKwhZG8hVJAAAY0Ei9J1tNHk/YHMKdAeGqQfbAayD8HxWxbJgCZggcE8wGJsRqSaMaij2UuRoVYtMM2CZgd1EF3FJtEzcLVrfYMa7uUe8mbRHNBSHRTOWfqHtpor9OQeJTdU/Erv9PxQJgUNFfEA/8eMLAaK0p9cDLV7Bx0OZJRYMUoS1+MBYWLoCkQzMegwyBtERY6BEEdIQZZC4DktzYJkMVJ8ZPReraLEalwv/sCqV17DNacPgjsBtfNAhQ4YIVmc2k4fVsDwH0gsTBgsdQQJjKQ4wuX75DVZhklkUsUcsNQJ7+GlOVjAgfk+fPl3YE95FRUHUxMXahKpfaO3bt9cWXwIBxMfyH2Bk9A+MjcpBR89nG1heo39GegxoAgNu2rSpkb1qLvtBMPmPGkP/ppwkk0xGEHSV3MmVUqhVx81Ual4MXfNzpeLuVrLSDVpzIYImn9xCmy6dfGjZFUigRDwXNhvsF3itSOw8dOhQhgPtgGkAncB+zGgKPOwt4GbwqnGdI0KcGPYfsDJANHBIEPeFJ40YrlpECXZSZrKf4YzAWVBed1oEzA3OmPKqMU7ADmGzAUqxzxLCfREnBw6pj01jP5wn2HNwJADH6B0mjIej2DvuD9gGy4VkhPg7RBpKwBc+6C56iyuindgvW1OWeq1uHxQhbeeIzS7fiIga08XxgBligV9/8Xr+Mk90eSHqckGoPdbHm1VDbXNUVJQ8Z8eOHQ7ttwfREAtG2C8r6nwhOTO70FG6ZZmCTDLV/irlIIu4TQ3eOkAvzLtF1tql6VDifvo6ZgX9GruenmSCBIGXe9ehk9LYniBFIPkQlkO+IgDuh1XDklV5hlhICVJfj0ZkhFxSUlIMe4wDicx8Zkqmxl3OUtUFeelIpURaEDOD5saupGvJ1+lJJ6gqtcqUArQdEVLLELaCWntY9R9Q144WbXpY1LVrV4kbwvzApMqo6rUxA3jGOFz3K4cbLDsXtu/M1Ck4B5WYdZMmF1tInfa+Q9NPLHQyn11EBISwmRHBZoXtyc5GmkDx/RCq64C/GcWwHzThnSD1AfpDsmd2gUv8M0NiV32mI/3sM7CtGMFn/NrtiBhBI0TJnKWcy0kYtIkTJ2pe48iRI23Wi0Fj9Su9dni7zvH6X2MGPoR19AY4PCG/VdTy7yCqUQ3nYGWgIVETuYeKsAoVYB+A1YBThg8f7hyn1JDVRhPP2JLDhg074lSm90/IjUP8GDYR1C0SDxAXRoA/O63MkF2oTp0638o4K6uIqc4Z6WyPurE9XFFCBCtXrvTImzdvlHNQnO1RNfaeZyMVzoykR/aEEwMCAmozEx50KgYnPWzKnz//Xy1btuyCSBRgGGmrJCYmnu3cuXOVwMDAKVm1VIST/r/JarVea9CgwaimTZvWjYuLS0Y4T0ZCEPsDSMpG9JVatWq97enpOZm3G1ksFr/Tp097swGNfyyc4hxCJ2UC45OxDHbGrnp5eZ1l/tnm4eGxuFy5ciegeiH9IPz+K8AARQ15jydT648AAAAASUVORK5CYII="/>
              </a>
             </li>
             <li _ngcontent-ng-c2903637670="" class="list-inline-item">
              <a _ngcontent-ng-c2903637670="" href="https://itunes.apple.com/fr/developer/aplim/id466797731" target="_blank">
               <img _ngcontent-ng-c2903637670="" alt="Page App Store de l'application mobile EcoleDirecte" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAAA2CAYAAACvMvlNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTcyNTQxNjI1RDM2MTFFOUIwQ0ZDNzczMjQyQkZBQjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTcyNTQxNjM1RDM2MTFFOUIwQ0ZDNzczMjQyQkZBQjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxNzI1NDE2MDVEMzYxMUU5QjBDRkM3NzMyNDJCRkFCNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxNzI1NDE2MTVEMzYxMUU5QjBDRkM3NzMyNDJCRkFCNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjiBe5EAABIsSURBVHja7J0JmFfTG8dPU4hBykyNlNI8TRlLUhKG57GEPFlKlkQiT2WpKPsylCdLdkKWKEtJi6UkRTUpQipkTYoQhWwRae7/fN6/9z7n3rm/3/xmptma+32e+/zm3nvOveec+573vOuZWvPnzzf169c3r7zyipk0adIFhYWFJ69bt65BWlraZmOMZ2LE2DKotXnz5toNGzb8rW3btq/n5OTcs2HDhj+7dOlizKpVq8y0adN2zc3NXfgf0cVHfJT70ahRo+X5+fnZq1evNqagoKB2dnb2e/HAxEdFH5mZmV8vWbJkp9oNGjQ4Y/r06RfHq0WMisaff/5Zb+PGjQYivH758uV7x0MSozLw008/1Uv74YcfGsRDEaMSueG2VglO+zceihiVhTp16vybVqtWrdgME6NyCbEsla08aQoLC43npUbHluCl7K+//lozDWW2/1lZWSxBCcfAcgbTuHFjZCWzYcOGmjEwBx100PSSqtYXXHCBt3jxYu/HH3/0rEzpff/99ykda9euld958+Z5Rx55ZMrva9OmjXfppZd6zzzzjDd58mRvxIgR3jHHHFOk3Lnnnuu99dZb3gEHHFAlTBBNmjTx5s+f71122WVyvsMOO3i///679CNRnX322cf7+++/veuuu65GmGkaNmz4YYmJ8LzzzvO2FPbbb7+U3jl27Fgpv2zZMu+1117zvv32Wzl/88036YRf7tZbb5Xrxx57bJUY4L322kvaQ/s5T09Pl/OZM2cmrNO2bVspc8cdd8REGHUgP37yySdJCcsuNd4ff/whx8aNG5OWffDBB1N672OPPSblt912W/9at27d5NoHH3wQKGsVrSo74DvttJO0+amnnkpYhokJbrrppiL3tttuuxK9r3bt2mVu8386Q7kSYVpJlm7bKWOXlIT37TJirrnmGtO3b1/Tp08f8/DDDyd9Hj7rVIDcCTIyMvxrU6ZMMfn5+Wbfffc1dmmXayeccIKZOnWqadWqlV9u6NCh5uuvvzaWe5pbbrlFrtll0rz++uvm9NNPN0888YSxYoL57LPPjF3iA+/dY489zPTp083KlSvNd999Z2688cbAffpnua+xy61Zt26d+eabb0yPHj0C/XvppZfM2Wef7feDMbLEaO677z55JnXOOOOMpP3fcccdzQsvvGA+/vhjqdO/f/+k5Q888ECzaNEi8+WXX5qPPvpI+gt69epliBWgX8BOamNXlkC/JkyYYPr162fsRDFW1BI5tkrJhFZo9uzHSsrdkGfggr/99luxy/Hjjz+e0nsfeeQRKW8Hr4j8BG6++WY5h3uAww8/XM6vvvpqOT/rrLNEjLATQ663aNHCbwNcaciQIdJmgPxJmV133VVk3n/++cc788wz/WdbovXf/+GHH8q1goICz04+kXndZ1gFQ87h5CoTWoVDriEXXnLJJSIjA5WRozghq89XX33lHXLIISJfAkvYkWNllUW5b4nQO+644zxLYN7uu+8u9yzhB8Sg7bff3hdrtL62j3bdfvvtFbIcl1g7ZvZs2rTJ2EEx22yzTWCm8Dec0i6Jcg6HwS0T5mqUa9asmdQvCzZv3iy/devWlV/VOOE2IDs7W36XL19u3n77bb+etolryqXgNF988YUZPHiwOeecc8ygQYOMJURj5Trz6aef+s/r3bu3sUqDcNaff/5ZrlsZVJ4Jd124cKHp2rWref/99/32rV+/PmBRgDv17NlTzu1ElHbbCWNmz55t/v03aLY99dRTTevWrY2dWMYSixxwXw64VRhwWQD3nzFjhhyKX375RX75fkCtGnwnhZ2Mpl69evJ9dByrlIlGiefVV181J510UqmICCKESO1MM5mZmWVqvJ3h8qtE4rYTQCwQEYQxZ84cISA+DmYQwNKkWLFihXwUlndguU6RZ7O0stxaTiJEyIT766+/fKK2mq/8JhJZtF2LFy/2r9kVQ4jUcnU5VyJUEaR9+/bya1cDGW9EIoiIpTIKMAcm0l133SX9sdzW3HvvvXJPmUP4HS4j2WWXXWQCVRQBlspOSIOZLXaZkqO0YAAY0FTf6X5kV94DL774YmQ9CP3QQw8VWXHixIny8Rs1auRzzDCx8B67BPvEEUbz5s3957ofkY/L38qRldMkws477xw4px3Ihip3u33Wd8Cd16xZI3WZSMlw9913m8mTJxurYZt77rlH2ousp8/W76a/rp2X9+k7KwpppanEkrwlDLepdlZnsJUf5N0I3iwzcCsUIeUKWk4/IAI511BWIEKWVz4Ek4il0sp6PmENHz5cfnWJGzNmjPzeeeed8ssShWIDISxdutQ3LLurgb43PLn0nP5CoKwi7dq1k2twKqv1mtGjR8u5Pk+59bhx43wiJPaOpZxnhCekIj09XRQPCBVF5D+5P8DV9fqAAQMCYoy+f0t833JTTGwDRWi1nKfMAimKi13WUyr70EMP+YoEigKgvioaetxwww1yz3I/Obfaq5xbLiO/domS61lZWZ5dRkWRwOZoZTu5/+STTwaed//99/tCOkBRyc3N9e9bGVKuq1nIjqWc2+UvoJiMGjUqoDRYQvIskXj248s5Bnh9piVOuWa5mX9t4MCBfv+tFi6/mKiixqpjx45y32rR8ms1ZFHE1ESkyhTj+MYbb8g48Kv1wapVqyrUTljHVAOwrNiBEncW3ASFYsGCBUXKwcWsJincAlitWZQNlAFMESgOyslZOjGTvPzyy2Ka4ZlwTBdwiueee8507txZ5LaRI0eKDKiAO7E8KkeH06BI2A8t5ygu3bt3lzYB3HUoLXBxlA3uLVmyRJZOBUqU+wxAOzEVwbnhmphfZs2aFTlWcOlTTjlFZEne/8ADD/hthntyHRMMCgzjg3zL+CisRi3tjDlhOR9NmzYtYm6Jj8rzmKSZGggVxNWEEqMaR9FUV6DIoBgkMnPEiIkwJWB6Oeqoo8RGh5yE7IbrLRWgXbq2usrC/vvvL+ajNm3aiIyKbIn9EfkU+VUy0WoCqqtMSOCCC41UqS4HLstkWLhwYY2RCaslJ9xzzz19D4MCrohtLez2qopgowG0UAUeCoJYMVrj4cEm6WrHroeIZHE8QNSJOWElcsILL7xQ2rF+/Xpv6dKlPvfQwIWqfPTq1Stg8wsH5xIf2bdvXwnOcK8PGzZMAmIBARWxdlzJQI4C2NjU0wHwRFR1YFtU4OOdOXNm4D7BBPiJly1bFriOfY+QLrUlxopJJQLDqsYPoogQ/YIPFAM0RtohQ4ZE1iMwgeUMjRji1eWNZRz3HsbogoICidkLY++995Yy+JXfe+89ubbbbruZo48+Wq7j9po3b14RwokCOSbuMlwcMGrj70b5Uhx22GHiIoQoUWTCChn36Fdubq4s8cQ6YuCOeh8BC4wN44exnefxN9FFjPWjjz7qR9+4E6Jjx44SgMKzEQ94fo1Zjt30AnJduIbbSZGXlxdZD0EffP7553I+YMAAz8qPRRQCXH3hunPmzPFdYZz37t3bdx+GlaPiopnJr1GMHDmy2P6SM5MMVosOlO/Zs2fCmE++m5WnA+XtRPLvn3baaZ6VRwPR865Y0KxZM3lGFCZNmuTZSVH+4f1VgQhnzZrld1yDXAkOLe7DktcBGGANklU/KSkJLqziEKhrua1cX7lype9PBvh/VU5TQGSmBDk6+JkJoE1UfsaMGZEfvbCwUH6ff/55v+zQoUMDZQhsZYzdNlquFiAsAmUVV1xxhT9OCsslpRxjrQGvYOrUqeLTd60UvK+k6RXVjggt+/c2bdokbSCLzThZbS5RRdUNz2AilTt16iR5G7jxNHJaQXaf1h0/fnzgHoEPnTt3lshkopbz8/MD94vLlKPfLgiMILGpVatWRcraZd/LyckJEGO/fv2EKIiQJkiCcieeeGKAQK1o4j+DMnPnzg2MEVHyxgmYABpQwUSFoC+66CKvfv36Uo7oa8XJJ58cyEEZM2aMf08zC7daIiSlUwH3c+8tWLDAv0c0S7iucjP96ES0hMsQZaNYvXq1P6tJAVDAVfTDuwdh9Ao4BgRqkiQgEbGTKPmLaJdwnaeffjqhyAEhMKkUiBrh+iSJafoBQKQwTnafglReJVA9mHAKtPSoPmmkkpUrt24iJORJw7jC97p27Zp0oKZMmeLfv/766yOfX7duXZ8bAD6QcVJOi0vF1DArYJWHYvuDPOZODsWKFSu87OzsQFlkLkWXLl0iw7cAoWmJ3udye/2GLLcu4IzhehMnTvTDv6wiE/nscePG+Vy4ZcuWW6exGk1QtWK0UcLsMU4TtEogguaTqAmHTLxE0FCvMHABEgpFPocaxdGk3fB31Y6jgJYoO4+a/+ejEH6WDISXceC2I7iV9APQokULcduhGYdzdKJgJ4v/t112k7ZPoePlhvGzYWq4f/SdcC8FoW8aPKwgIIQ2a3ksByUxI1UbIsQcgjkBYBbRiONEPlk+YDj3xB3YRMDkoHDNIqnUdSOUiXBOFZhOrKghOSz4wJlc5PKQkmq5cEpmKzc4IxE0MQtoQpTrYXITstzJr+NO1LXm3iRDmEi3GiLs1q2b/zfBmbi5sGcxCyEMbIUQp4bFExhql5/IZyXbO8clnqgcmmQpCW5YfGkCQ62ma6xMaAYOHCjn2OJSIUI3pyVZXrjbNw10dVMRooiHVUZD3kiLgGMz/lEpALrXUEldiqUiQje6uLSgsanOGDiS6w3BWItR2c3vYEYzQLfddpuck1CeiAiTZQlimFZERbEky79wly0S5ksDNzU1Kn8lzL2Am/jUoUOHhM92/e1aR5OzEnF5JhNeHJZYvgMpqqlugFVuRAh3wIKfk5MTSUQ0FI5EOXYLCAeOKueibnFZaYrjjz/ez1B79913/ZkWrs8AkYzEs/EW4AmICgTAs0L2WRS3bdq0qb8sq2fFBSH2VrMtch15VXd+YDet0oaKkUoQNQncDx8mFjw9rnzIkkl+chjsiqFQd2EqGY+kyyK3MilGjBhhLr/88soLYEB1x+NQHDB4YrgsDtiXUnmva5648sork5adPXt2pBbsaseAIAgT2vkL043CErN/L2xOwajr1sW+h0knFU/ItddeK7uKNW/ePHCdzZKuuuqqwHvYUMlEhH6hKZskoWFo1xkZGYH7doXw75PcpAZy10RjJ3dkm7FJujj//PMT2nHd/YLKxUSTChEOHjzYt109++yzZSZCjMmu6cMqHEnL9+/f3y9rl7YiRKjGbnV5YXKxXDHQLmxdbNkRJkLL1f0yuPKoy3YergsPYrRcO7Jt2A7V00EdJqrVNsVDo3Y2BcSaKPpG4w2nTZvm9ejRwydiiE+Bi3H48OFidHe9TKB79+5FdgGL2lzKPTBcu3jnnXdkskHc2DYZSzxPqZimykyEuKoSIWy/071iEgEiLYmvOJkNzISSmBRWUw4QIXvlsHcNXoMo4KtVL0EUEVLXyqORdTH04r1J1DZSTdesWZN0TDCGDxo0KNLArT5sF6NHjw5wItdoHwZGdKtxJ7QxYiNNNrYXX3xxsXsMJeKSW8xOiECMGq9yUxh2pov8RnoicHeoigIRG8UBoXjUqFGilSZKc3SBHEWIFHYwZBjVll3Fgh29SHccNmyYOfjgg0WjpB4pn8l2EkPWpG/U48jLyxMTBrsncB3NNpn2zE4ILVu2FCWLKBeieKiP3Mw97Hjjx4+XBPsoLfWII44wVhyRvW9oM+YYTDqueYm0B8LFsFdiu6P/jDP2Q2Rm3WHCVVBIqaUdpMcmAymvpKeyjw6aO7uk0V8sFewAhl3UTuLylQnDPspEwMIeNWtdsAtWWC4qz8OVCXUJS/VwZUJ1d8VHJYb3Y1BFu2TXKrRkuKOruTGjmIVcJ87N1WDhJJQlGRyPBhb6ykBZUj3jNNEtj1LZCVnOONQ4GSNGWVCm8P7qRICut6CkW9q5dSt8s6CawAktIdWqCR1FaEdEYDktqccHwVvFigrfp6UGoFb79u1nLlq0qNPW3lGc/OwhDRGiVZaEEKnHAeenbkyIW/S7fF4nKyvrp5rQWSJI3CiSkgCzVFSESYyyIyMj4/e0Dh06TIyHIkZlITMz87k0uxxPady48ex4OGJUNJo0afJZnz597pdI4rlz56bn5eW9YmLjaXxU0NG6deu3x44duxshb7UI08GVhAF5woQJp61du7aLFb7ZVt+L/wNojC2pBBcWFqZZGfDn9PT0V9u1azeWUDviGf8nwAByWtwoKZhRcQAAAABJRU5ErkJggg=="/>
              </a>
             </li>
            </ul>
           </div>
          </div>
         </div>
        </main>
       </ed-login>
       <!-- -->
      </div>
     </div>
    </ng-component>
    <!-- -->
    <router-outlet _ngcontent-ng-c2239468317="" name="auxiliaryModal">
    </router-outlet>
    <!-- -->
    <!-- -->
    <!-- -->
   </div>
   <cg-busy>
    <div class="cg-busy cg-busy-animation configBusy" hidden="">
     <div class="cg-busy-backdrop cg-busy-backdrop-animation">
     </div>
     <div class="cg-busy-default-sign">
      <div class="cg-busy-default-spinner">
       <div class="bar1">
       </div>
       <div class="bar2">
       </div>
       <div class="bar3">
       </div>
       <div class="bar4">
       </div>
       <div class="bar5">
       </div>
       <div class="bar6">
       </div>
       <div class="bar7">
       </div>
       <div class="bar8">
       </div>
       <div class="bar9">
       </div>
       <div class="bar10">
       </div>
       <div class="bar11">
       </div>
       <div class="bar12">
       </div>
      </div>
      <div class="cg-busy-default-text">
       Please Wait...
      </div>
     </div>
     <!-- -->
    </div>
    <!-- -->
   </cg-busy>
   <!-- -->
   <div _ngcontent-ng-c2239468317="" aria-live="polite" toastcontainer="">
   </div>
   <div _ngcontent-ng-c2239468317="" id="preloadfont">
    .
   </div>
   <!-- -->
  </app-root>
  <link href="chunk-P43LDTDV.js" rel="modulepreload"/>
  <link href="chunk-J6IC2M6B.js" rel="modulepreload"/>
  <link href="chunk-7CSBEB3V.js" rel="modulepreload"/>
  <link href="chunk-E5ZA5763.js" rel="modulepreload"/>
  <link href="chunk-VA3ZEK2O.js" rel="modulepreload"/>
  <link href="chunk-YWOUMLOF.js" rel="modulepreload"/>
  <link href="chunk-P77SXUYR.js" rel="modulepreload"/>
  <link href="chunk-W6INLPM7.js" rel="modulepreload"/>
  <link href="chunk-DNXLOF7Z.js" rel="modulepreload"/>
  <link href="chunk-7Q7YRLBY.js" rel="modulepreload"/>
  <script type="module">
   var ae=globalThis;function te(e){return(ae.__Zone_symbol_prefix||"__zone_symbol__")+e}function dt(){let e=ae.performance;function n(H){e&&e.mark&&e.mark(H)}function a(H,i){e&&e.measure&&e.measure(H,i)}n("Zone");let Y=class Y{static assertZonePatched(){if(ae.Promise!==O.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let i=Y.current;for(;i.parent;)i=i.parent;return i}static get current(){return b.zone}static get currentTask(){return D}static __load_patch(i,s,o=!1){if(O.hasOwnProperty(i)){let p=ae[te("forceDuplicateZoneCheck")]===!0;if(!o&&p)throw Error("Already loaded patch: "+i)}else if(!ae["__Zone_disable_"+i]){let p="Zone:"+i;n(p),O[i]=s(ae,Y,R),a(p,p)}}get parent(){return this._parent}get name(){return this._name}constructor(i,s){this._parent=i,this._name=s?s.name||"unnamed":"<root>",this._properties=s&&s.properties||{},this._zoneDelegate=new f(this,this._parent&&this._parent._zoneDelegate,s)}get(i){let s=this.getZoneWith(i);if(s)return s._properties[i]}getZoneWith(i){let s=this;for(;s;){if(s._properties.hasOwnProperty(i))return s;s=s._parent}return null}fork(i){if(!i)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,i)}wrap(i,s){if(typeof i!="function")throw new Error("Expecting function got: "+i);let o=this._zoneDelegate.intercept(this,i,s),p=this;return function(){return p.runGuarded(o,this,arguments,s)}}run(i,s,o,p){b={parent:b,zone:this};try{return this._zoneDelegate.invoke(this,i,s,o,p)}finally{b=b.parent}}runGuarded(i,s=null,o,p){b={parent:b,zone:this};try{try{return this._zoneDelegate.invoke(this,i,s,o,p)}catch(x){if(this._zoneDelegate.handleError(this,x))throw x}}finally{b=b.parent}}runTask(i,s,o){if(i.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(i.zone||K).name+"; Execution: "+this.name+")");let p=i,{type:x,data:{isPeriodic:M=!1,isRefreshable:ie=!1}={}}=i;if(i.state===q&&(x===z||x===y))return;let le=i.state!=A;le&&p._transitionTo(A,d);let ue=D;D=p,b={parent:b,zone:this};try{x==y&&i.data&&!M&&!ie&&(i.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,p,s,o)}catch(re){if(this._zoneDelegate.handleError(this,re))throw re}}finally{let re=i.state;if(re!==q&&re!==X)if(x==z||M||ie&&re===k)le&&p._transitionTo(d,A,k);else{let h=p._zoneDelegates;this._updateTaskCount(p,-1),le&&p._transitionTo(q,A,q),ie&&(p._zoneDelegates=h)}b=b.parent,D=ue}}scheduleTask(i){if(i.zone&&i.zone!==this){let o=this;for(;o;){if(o===i.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${i.zone.name}`);o=o.parent}}i._transitionTo(k,q);let s=[];i._zoneDelegates=s,i._zone=this;try{i=this._zoneDelegate.scheduleTask(this,i)}catch(o){throw i._transitionTo(X,k,q),this._zoneDelegate.handleError(this,o),o}return i._zoneDelegates===s&&this._updateTaskCount(i,1),i.state==k&&i._transitionTo(d,k),i}scheduleMicroTask(i,s,o,p){return this.scheduleTask(new T(G,i,s,o,p,void 0))}scheduleMacroTask(i,s,o,p,x){return this.scheduleTask(new T(y,i,s,o,p,x))}scheduleEventTask(i,s,o,p,x){return this.scheduleTask(new T(z,i,s,o,p,x))}cancelTask(i){if(i.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(i.zone||K).name+"; Execution: "+this.name+")");if(!(i.state!==d&&i.state!==A)){i._transitionTo(V,d,A);try{this._zoneDelegate.cancelTask(this,i)}catch(s){throw i._transitionTo(X,V),this._zoneDelegate.handleError(this,s),s}return this._updateTaskCount(i,-1),i._transitionTo(q,V),i.runCount=-1,i}}_updateTaskCount(i,s){let o=i._zoneDelegates;s==-1&&(i._zoneDelegates=null);for(let p=0;p<o.length;p++)o[p]._updateTaskCount(i.type,s)}};Y.__symbol__=te;let t=Y,c={name:"",onHasTask:(H,i,s,o)=>H.hasTask(s,o),onScheduleTask:(H,i,s,o)=>H.scheduleTask(s,o),onInvokeTask:(H,i,s,o,p,x)=>H.invokeTask(s,o,p,x),onCancelTask:(H,i,s,o)=>H.cancelTask(s,o)};class f{get zone(){return this._zone}constructor(i,s,o){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=i,this._parentDelegate=s,this._forkZS=o&&(o&&o.onFork?o:s._forkZS),this._forkDlgt=o&&(o.onFork?s:s._forkDlgt),this._forkCurrZone=o&&(o.onFork?this._zone:s._forkCurrZone),this._interceptZS=o&&(o.onIntercept?o:s._interceptZS),this._interceptDlgt=o&&(o.onIntercept?s:s._interceptDlgt),this._interceptCurrZone=o&&(o.onIntercept?this._zone:s._interceptCurrZone),this._invokeZS=o&&(o.onInvoke?o:s._invokeZS),this._invokeDlgt=o&&(o.onInvoke?s:s._invokeDlgt),this._invokeCurrZone=o&&(o.onInvoke?this._zone:s._invokeCurrZone),this._handleErrorZS=o&&(o.onHandleError?o:s._handleErrorZS),this._handleErrorDlgt=o&&(o.onHandleError?s:s._handleErrorDlgt),this._handleErrorCurrZone=o&&(o.onHandleError?this._zone:s._handleErrorCurrZone),this._scheduleTaskZS=o&&(o.onScheduleTask?o:s._scheduleTaskZS),this._scheduleTaskDlgt=o&&(o.onScheduleTask?s:s._scheduleTaskDlgt),this._scheduleTaskCurrZone=o&&(o.onScheduleTask?this._zone:s._scheduleTaskCurrZone),this._invokeTaskZS=o&&(o.onInvokeTask?o:s._invokeTaskZS),this._invokeTaskDlgt=o&&(o.onInvokeTask?s:s._invokeTaskDlgt),this._invokeTaskCurrZone=o&&(o.onInvokeTask?this._zone:s._invokeTaskCurrZone),this._cancelTaskZS=o&&(o.onCancelTask?o:s._cancelTaskZS),this._cancelTaskDlgt=o&&(o.onCancelTask?s:s._cancelTaskDlgt),this._cancelTaskCurrZone=o&&(o.onCancelTask?this._zone:s._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let p=o&&o.onHasTask,x=s&&s._hasTaskZS;(p||x)&&(this._hasTaskZS=p?o:c,this._hasTaskDlgt=s,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,o.onScheduleTask||(this._scheduleTaskZS=c,this._scheduleTaskDlgt=s,this._scheduleTaskCurrZone=this._zone),o.onInvokeTask||(this._invokeTaskZS=c,this._invokeTaskDlgt=s,this._invokeTaskCurrZone=this._zone),o.onCancelTask||(this._cancelTaskZS=c,this._cancelTaskDlgt=s,this._cancelTaskCurrZone=this._zone))}fork(i,s){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,i,s):new t(i,s)}intercept(i,s,o){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,i,s,o):s}invoke(i,s,o,p,x){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,i,s,o,p,x):s.apply(o,p)}handleError(i,s){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,i,s):!0}scheduleTask(i,s){let o=s;if(this._scheduleTaskZS)this._hasTaskZS&&o._zoneDelegates.push(this._hasTaskDlgtOwner),o=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,i,s),o||(o=s);else if(s.scheduleFn)s.scheduleFn(s);else if(s.type==G)U(s);else throw new Error("Task is missing scheduleFn.");return o}invokeTask(i,s,o,p){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,i,s,o,p):s.callback.apply(o,p)}cancelTask(i,s){let o;if(this._cancelTaskZS)o=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,i,s);else{if(!s.cancelFn)throw Error("Task is not cancelable");o=s.cancelFn(s)}return o}hasTask(i,s){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,i,s)}catch(o){this.handleError(i,o)}}_updateTaskCount(i,s){let o=this._taskCounts,p=o[i],x=o[i]=p+s;if(x<0)throw new Error("More tasks executed then were scheduled.");if(p==0||x==0){let M={microTask:o.microTask>0,macroTask:o.macroTask>0,eventTask:o.eventTask>0,change:i};this.hasTask(this._zone,M)}}}class T{constructor(i,s,o,p,x,M){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=i,this.source=s,this.data=p,this.scheduleFn=x,this.cancelFn=M,!o)throw new Error("callback is not defined");this.callback=o;let ie=this;i===z&&p&&p.useG?this.invoke=T.invokeTask:this.invoke=function(){return T.invokeTask.call(ae,ie,this,arguments)}}static invokeTask(i,s,o){i||(i=this),Q++;try{return i.runCount++,i.zone.runTask(i,s,o)}finally{Q==1&&J(),Q--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(q,k)}_transitionTo(i,s,o){if(this._state===s||this._state===o)this._state=i,i==q&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${i}', expecting state '${s}'${o?" or '"+o+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let g=te("setTimeout"),m=te("Promise"),C=te("then"),_=[],w=!1,S;function Z(H){if(S||ae[m]&&(S=ae[m].resolve(0)),S){let i=S[C];i||(i=S.then),i.call(S,H)}else ae[g](H,0)}function U(H){Q===0&&_.length===0&&Z(J),H&&_.push(H)}function J(){if(!w){for(w=!0;_.length;){let H=_;_=[];for(let i=0;i<H.length;i++){let s=H[i];try{s.zone.runTask(s,null,null)}catch(o){R.onUnhandledError(o)}}}R.microtaskDrainDone(),w=!1}}let K={name:"NO ZONE"},q="notScheduled",k="scheduling",d="scheduled",A="running",V="canceling",X="unknown",G="microTask",y="macroTask",z="eventTask",O={},R={symbol:te,currentZoneFrame:()=>b,onUnhandledError:W,microtaskDrainDone:W,scheduleMicroTask:U,showUncaughtError:()=>!t[te("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:W,patchMethod:()=>W,bindArguments:()=>[],patchThen:()=>W,patchMacroTask:()=>W,patchEventPrototype:()=>W,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>W,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>W,wrapWithCurrentZone:()=>W,filterProperties:()=>[],attachOriginToPatched:()=>W,_redefineProperty:()=>W,patchCallbacks:()=>W,nativeScheduleMicroTask:Z},b={parent:null,zone:new t(null,null)},D=null,Q=0;function W(){}return a("Zone","Zone"),t}function _t(){let e=globalThis,n=e[te("forceDuplicateZoneCheck")]===!0;if(e.Zone&&(n||typeof e.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return e.Zone??=dt(),e.Zone}var be=Object.getOwnPropertyDescriptor,Ae=Object.defineProperty,je=Object.getPrototypeOf,Et=Object.create,Tt=Array.prototype.slice,He="addEventListener",xe="removeEventListener",Le=te(He),Ie=te(xe),fe="true",he="false",Pe=te("");function Ve(e,n){return Zone.current.wrap(e,n)}function Ge(e,n,a,t,c){return Zone.current.scheduleMacroTask(e,n,a,t,c)}var j=te,De=typeof window<"u",pe=De?window:void 0,$=De&&pe||globalThis,gt="removeAttribute";function Fe(e,n){for(let a=e.length-1;a>=0;a--)typeof e[a]=="function"&&(e[a]=Ve(e[a],n+"_"+a));return e}function yt(e,n){let a=e.constructor.name;for(let t=0;t<n.length;t++){let c=n[t],f=e[c];if(f){let T=be(e,c);if(!tt(T))continue;e[c]=(g=>{let m=function(){return g.apply(this,Fe(arguments,a+"."+c))};return _e(m,g),m})(f)}}}function tt(e){return e?e.writable===!1?!1:!(typeof e.get=="function"&&typeof e.set>"u"):!0}var nt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Se=!("nw"in $)&&typeof $.process<"u"&&$.process.toString()==="[object process]",Be=!Se&&!nt&&!!(De&&pe.HTMLElement),rt=typeof $.process<"u"&&$.process.toString()==="[object process]"&&!nt&&!!(De&&pe.HTMLElement),Ce={},mt=j("enable_beforeunload"),Ye=function(e){if(e=e||$.event,!e)return;let n=Ce[e.type];n||(n=Ce[e.type]=j("ON_PROPERTY"+e.type));let a=this||e.target||$,t=a[n],c;if(Be&&a===pe&&e.type==="error"){let f=e;c=t&&t.call(this,f.message,f.filename,f.lineno,f.colno,f.error),c===!0&&e.preventDefault()}else c=t&&t.apply(this,arguments),e.type==="beforeunload"&&$[mt]&&typeof c=="string"?e.returnValue=c:c!=null&&!c&&e.preventDefault();return c};function $e(e,n,a){let t=be(e,n);if(!t&&a&&be(a,n)&&(t={enumerable:!0,configurable:!0}),!t||!t.configurable)return;let c=j("on"+n+"patched");if(e.hasOwnProperty(c)&&e[c])return;delete t.writable,delete t.value;let f=t.get,T=t.set,g=n.slice(2),m=Ce[g];m||(m=Ce[g]=j("ON_PROPERTY"+g)),t.set=function(C){let _=this;if(!_&&e===$&&(_=$),!_)return;typeof _[m]=="function"&&_.removeEventListener(g,Ye),T&&T.call(_,null),_[m]=C,typeof C=="function"&&_.addEventListener(g,Ye,!1)},t.get=function(){let C=this;if(!C&&e===$&&(C=$),!C)return null;let _=C[m];if(_)return _;if(f){let w=f.call(this);if(w)return t.set.call(this,w),typeof C[gt]=="function"&&C.removeAttribute(n),w}return null},Ae(e,n,t),e[c]=!0}function ot(e,n,a){if(n)for(let t=0;t<n.length;t++)$e(e,"on"+n[t],a);else{let t=[];for(let c in e)c.slice(0,2)=="on"&&t.push(c);for(let c=0;c<t.length;c++)$e(e,t[c],a)}}var se=j("originalInstance");function ve(e){let n=$[e];if(!n)return;$[j(e)]=n,$[e]=function(){let c=Fe(arguments,e);switch(c.length){case 0:this[se]=new n;break;case 1:this[se]=new n(c[0]);break;case 2:this[se]=new n(c[0],c[1]);break;case 3:this[se]=new n(c[0],c[1],c[2]);break;case 4:this[se]=new n(c[0],c[1],c[2],c[3]);break;default:throw new Error("Arg list too long.")}},_e($[e],n);let a=new n(function(){}),t;for(t in a)e==="XMLHttpRequest"&&t==="responseBlob"||function(c){typeof a[c]=="function"?$[e].prototype[c]=function(){return this[se][c].apply(this[se],arguments)}:Ae($[e].prototype,c,{set:function(f){typeof f=="function"?(this[se][c]=Ve(f,e+"."+c),_e(this[se][c],f)):this[se][c]=f},get:function(){return this[se][c]}})}(t);for(t in n)t!=="prototype"&&n.hasOwnProperty(t)&&($[e][t]=n[t])}function de(e,n,a){let t=e;for(;t&&!t.hasOwnProperty(n);)t=je(t);!t&&e[n]&&(t=e);let c=j(n),f=null;if(t&&(!(f=t[c])||!t.hasOwnProperty(c))){f=t[c]=t[n];let T=t&&be(t,n);if(tt(T)){let g=a(f,c,n);t[n]=function(){return g(this,arguments)},_e(t[n],f)}}return f}function pt(e,n,a){let t=null;function c(f){let T=f.data;return T.args[T.cbIdx]=function(){f.invoke.apply(this,arguments)},t.apply(T.target,T.args),f}t=de(e,n,f=>function(T,g){let m=a(T,g);return m.cbIdx>=0&&typeof g[m.cbIdx]=="function"?Ge(m.name,g[m.cbIdx],m,c):f.apply(T,g)})}function _e(e,n){e[j("OriginalDelegate")]=n}var Je=!1,Me=!1;function kt(){try{let e=pe.navigator.userAgent;if(e.indexOf("MSIE ")!==-1||e.indexOf("Trident/")!==-1)return!0}catch{}return!1}function vt(){if(Je)return Me;Je=!0;try{let e=pe.navigator.userAgent;(e.indexOf("MSIE ")!==-1||e.indexOf("Trident/")!==-1||e.indexOf("Edge/")!==-1)&&(Me=!0)}catch{}return Me}function Ke(e){return typeof e=="function"}function Qe(e){return typeof e=="number"}var me=!1;if(typeof window<"u")try{let e=Object.defineProperty({},"passive",{get:function(){me=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{me=!1}var bt={useG:!0},ne={},st={},it=new RegExp("^"+Pe+"(\\w+)(true|false)$"),ct=j("propagationStopped");function at(e,n){let a=(n?n(e):e)+he,t=(n?n(e):e)+fe,c=Pe+a,f=Pe+t;ne[e]={},ne[e][he]=c,ne[e][fe]=f}function Pt(e,n,a,t){let c=t&&t.add||He,f=t&&t.rm||xe,T=t&&t.listeners||"eventListeners",g=t&&t.rmAll||"removeAllListeners",m=j(c),C="."+c+":",_="prependListener",w="."+_+":",S=function(k,d,A){if(k.isRemoved)return;let V=k.callback;typeof V=="object"&&V.handleEvent&&(k.callback=y=>V.handleEvent(y),k.originalDelegate=V);let X;try{k.invoke(k,d,[A])}catch(y){X=y}let G=k.options;if(G&&typeof G=="object"&&G.once){let y=k.originalDelegate?k.originalDelegate:k.callback;d[f].call(d,A.type,y,G)}return X};function Z(k,d,A){if(d=d||e.event,!d)return;let V=k||d.target||e,X=V[ne[d.type][A?fe:he]];if(X){let G=[];if(X.length===1){let y=S(X[0],V,d);y&&G.push(y)}else{let y=X.slice();for(let z=0;z<y.length&&!(d&&d[ct]===!0);z++){let O=S(y[z],V,d);O&&G.push(O)}}if(G.length===1)throw G[0];for(let y=0;y<G.length;y++){let z=G[y];n.nativeScheduleMicroTask(()=>{throw z})}}}let U=function(k){return Z(this,k,!1)},J=function(k){return Z(this,k,!0)};function K(k,d){if(!k)return!1;let A=!0;d&&d.useG!==void 0&&(A=d.useG);let V=d&&d.vh,X=!0;d&&d.chkDup!==void 0&&(X=d.chkDup);let G=!1;d&&d.rt!==void 0&&(G=d.rt);let y=k;for(;y&&!y.hasOwnProperty(c);)y=je(y);if(!y&&k[c]&&(y=k),!y||y[m])return!1;let z=d&&d.eventNameToString,O={},R=y[m]=y[c],b=y[j(f)]=y[f],D=y[j(T)]=y[T],Q=y[j(g)]=y[g],W;d&&d.prepend&&(W=y[j(d.prepend)]=y[d.prepend]);function Y(r,u){return!me&&typeof r=="object"&&r?!!r.capture:!me||!u?r:typeof r=="boolean"?{capture:r,passive:!0}:r?typeof r=="object"&&r.passive!==!1?{...r,passive:!0}:r:{passive:!0}}let H=function(r){if(!O.isExisting)return R.call(O.target,O.eventName,O.capture?J:U,O.options)},i=function(r){if(!r.isRemoved){let u=ne[r.eventName],v;u&&(v=u[r.capture?fe:he]);let P=v&&r.target[v];if(P){for(let E=0;E<P.length;E++)if(P[E]===r){P.splice(E,1),r.isRemoved=!0,r.removeAbortListener&&(r.removeAbortListener(),r.removeAbortListener=null),P.length===0&&(r.allRemoved=!0,r.target[v]=null);break}}}if(r.allRemoved)return b.call(r.target,r.eventName,r.capture?J:U,r.options)},s=function(r){return R.call(O.target,O.eventName,r.invoke,O.options)},o=function(r){return W.call(O.target,O.eventName,r.invoke,O.options)},p=function(r){return b.call(r.target,r.eventName,r.invoke,r.options)},x=A?H:s,M=A?i:p,ie=function(r,u){let v=typeof u;return v==="function"&&r.callback===u||v==="object"&&r.originalDelegate===u},le=d&&d.diff?d.diff:ie,ue=Zone[j("UNPATCHED_EVENTS")],re=e[j("PASSIVE_EVENTS")];function h(r){if(typeof r=="object"&&r!==null){let u={...r};return r.signal&&(u.signal=r.signal),u}return r}let l=function(r,u,v,P,E=!1,N=!1){return function(){let L=this||e,I=arguments[0];d&&d.transferEventName&&(I=d.transferEventName(I));let F=arguments[1];if(!F)return r.apply(this,arguments);if(Se&&I==="uncaughtException")return r.apply(this,arguments);let B=!1;if(typeof F!="function"){if(!F.handleEvent)return r.apply(this,arguments);B=!0}if(V&&!V(r,F,L,arguments))return;let Ee=me&&!!re&&re.indexOf(I)!==-1,ee=h(Y(arguments[2],Ee)),Te=ee==null?void 0:ee.signal;if(Te!=null&&Te.aborted)return;if(ue){for(let ce=0;ce<ue.length;ce++)if(I===ue[ce])return Ee?r.call(L,I,F,ee):r.apply(this,arguments)}let Oe=ee?typeof ee=="boolean"?!0:ee.capture:!1,Ue=ee&&typeof ee=="object"?ee.once:!1,ht=Zone.current,Ne=ne[I];Ne||(at(I,z),Ne=ne[I]);let ze=Ne[Oe?fe:he],ge=L[ze],We=!1;if(ge){if(We=!0,X){for(let ce=0;ce<ge.length;ce++)if(le(ge[ce],F))return}}else ge=L[ze]=[];let we,qe=L.constructor.name,Xe=st[qe];Xe&&(we=Xe[I]),we||(we=qe+u+(z?z(I):I)),O.options=ee,Ue&&(O.options.once=!1),O.target=L,O.capture=Oe,O.eventName=I,O.isExisting=We;let ke=A?bt:void 0;ke&&(ke.taskData=O),Te&&(O.options.signal=void 0);let oe=ht.scheduleEventTask(we,F,ke,v,P);if(Te){O.options.signal=Te;let ce=()=>oe.zone.cancelTask(oe);r.call(Te,"abort",ce,{once:!0}),oe.removeAbortListener=()=>Te.removeEventListener("abort",ce)}if(O.target=null,ke&&(ke.taskData=null),Ue&&(O.options.once=!0),!me&&typeof oe.options=="boolean"||(oe.options=ee),oe.target=L,oe.capture=Oe,oe.eventName=I,B&&(oe.originalDelegate=F),N?ge.unshift(oe):ge.push(oe),E)return L}};return y[c]=l(R,C,x,M,G),W&&(y[_]=l(W,w,o,M,G,!0)),y[f]=function(){let r=this||e,u=arguments[0];d&&d.transferEventName&&(u=d.transferEventName(u));let v=arguments[2],P=v?typeof v=="boolean"?!0:v.capture:!1,E=arguments[1];if(!E)return b.apply(this,arguments);if(V&&!V(b,E,r,arguments))return;let N=ne[u],L;N&&(L=N[P?fe:he]);let I=L&&r[L];if(I)for(let F=0;F<I.length;F++){let B=I[F];if(le(B,E)){if(I.splice(F,1),B.isRemoved=!0,I.length===0&&(B.allRemoved=!0,r[L]=null,!P&&typeof u=="string")){let Ee=Pe+"ON_PROPERTY"+u;r[Ee]=null}return B.zone.cancelTask(B),G?r:void 0}}return b.apply(this,arguments)},y[T]=function(){let r=this||e,u=arguments[0];d&&d.transferEventName&&(u=d.transferEventName(u));let v=[],P=lt(r,z?z(u):u);for(let E=0;E<P.length;E++){let N=P[E],L=N.originalDelegate?N.originalDelegate:N.callback;v.push(L)}return v},y[g]=function(){let r=this||e,u=arguments[0];if(u){d&&d.transferEventName&&(u=d.transferEventName(u));let v=ne[u];if(v){let P=v[he],E=v[fe],N=r[P],L=r[E];if(N){let I=N.slice();for(let F=0;F<I.length;F++){let B=I[F],Ee=B.originalDelegate?B.originalDelegate:B.callback;this[f].call(this,u,Ee,B.options)}}if(L){let I=L.slice();for(let F=0;F<I.length;F++){let B=I[F],Ee=B.originalDelegate?B.originalDelegate:B.callback;this[f].call(this,u,Ee,B.options)}}}}else{let v=Object.keys(r);for(let P=0;P<v.length;P++){let E=v[P],N=it.exec(E),L=N&&N[1];L&&L!=="removeListener"&&this[g].call(this,L)}this[g].call(this,"removeListener")}if(G)return this},_e(y[c],R),_e(y[f],b),Q&&_e(y[g],Q),D&&_e(y[T],D),!0}let q=[];for(let k=0;k<a.length;k++)q[k]=K(a[k],t);return q}function lt(e,n){if(!n){let f=[];for(let T in e){let g=it.exec(T),m=g&&g[1];if(m&&(!n||m===n)){let C=e[T];if(C)for(let _=0;_<C.length;_++)f.push(C[_])}}return f}let a=ne[n];a||(at(n),a=ne[n]);let t=e[a[he]],c=e[a[fe]];return t?c?t.concat(c):t.slice():c?c.slice():[]}function wt(e,n){let a=e.Event;a&&a.prototype&&n.patchMethod(a.prototype,"stopImmediatePropagation",t=>function(c,f){c[ct]=!0,t&&t.apply(c,f)})}function Rt(e,n){n.patchMethod(e,"queueMicrotask",a=>function(t,c){Zone.current.scheduleMicroTask("queueMicrotask",c[0])})}var Re=j("zoneTask");function ye(e,n,a,t){let c=null,f=null;n+=t,a+=t;let T={};function g(C){let _=C.data;_.args[0]=function(){return C.invoke.apply(this,arguments)};let w=c.apply(e,_.args);return Qe(w)?_.handleId=w:(_.handle=w,_.isRefreshable=Ke(w.refresh)),C}function m(C){let{handle:_,handleId:w}=C.data;return f.call(e,_??w)}c=de(e,n,C=>function(_,w){if(Ke(w[0])){let S={isRefreshable:!1,isPeriodic:t==="Interval",delay:t==="Timeout"||t==="Interval"?w[1]||0:void 0,args:w},Z=w[0];w[0]=function(){try{return Z.apply(this,arguments)}finally{let{handle:A,handleId:V,isPeriodic:X,isRefreshable:G}=S;!X&&!G&&(V?delete T[V]:A&&(A[Re]=null))}};let U=Ge(n,w[0],S,g,m);if(!U)return U;let{handleId:J,handle:K,isRefreshable:q,isPeriodic:k}=U.data;if(J)T[J]=U;else if(K&&(K[Re]=U,q&&!k)){let d=K.refresh;K.refresh=function(){let{zone:A,state:V}=U;return V==="notScheduled"?(U._state="scheduled",A._updateTaskCount(U,1)):V==="running"&&(U._state="scheduling"),d.call(this)}}return K??J??U}else return C.apply(e,w)}),f=de(e,a,C=>function(_,w){let S=w[0],Z;Qe(S)?(Z=T[S],delete T[S]):(Z=S==null?void 0:S[Re],Z?S[Re]=null:Z=S),Z!=null&&Z.type?Z.cancelFn&&Z.zone.cancelTask(Z):C.apply(e,w)})}function Ct(e,n){let{isBrowser:a,isMix:t}=n.getGlobalObjects();if(!a&&!t||!e.customElements||!("customElements"in e))return;let c=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];n.patchCallbacks(n,e.customElements,"customElements","define",c)}function Dt(e,n){if(Zone[n.symbol("patchEventTarget")])return;let{eventNames:a,zoneSymbolEventNames:t,TRUE_STR:c,FALSE_STR:f,ZONE_SYMBOL_PREFIX:T}=n.getGlobalObjects();for(let m=0;m<a.length;m++){let C=a[m],_=C+f,w=C+c,S=T+_,Z=T+w;t[C]={},t[C][f]=S,t[C][c]=Z}let g=e.EventTarget;if(!(!g||!g.prototype))return n.patchEventTarget(e,n,[g&&g.prototype]),!0}function St(e,n){n.patchEventPrototype(e,n)}function ut(e,n,a){if(!a||a.length===0)return n;let t=a.filter(f=>f.target===e);if(!t||t.length===0)return n;let c=t[0].ignoreProperties;return n.filter(f=>c.indexOf(f)===-1)}function et(e,n,a,t){if(!e)return;let c=ut(e,n,a);ot(e,c,t)}function Ze(e){return Object.getOwnPropertyNames(e).filter(n=>n.startsWith("on")&&n.length>2).map(n=>n.substring(2))}function Ot(e,n){if(Se&&!rt||Zone[e.symbol("patchEvents")])return;let a=n.__Zone_ignore_on_properties,t=[];if(Be){let c=window;t=t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let f=kt()?[{target:c,ignoreProperties:["error"]}]:[];et(c,Ze(c),a&&a.concat(f),je(c))}t=t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let c=0;c<t.length;c++){let f=n[t[c]];f&&f.prototype&&et(f.prototype,Ze(f.prototype),a)}}function Nt(e){e.__load_patch("legacy",n=>{let a=n[e.__symbol__("legacyPatch")];a&&a()}),e.__load_patch("timers",n=>{let a="set",t="clear";ye(n,a,t,"Timeout"),ye(n,a,t,"Interval"),ye(n,a,t,"Immediate")}),e.__load_patch("requestAnimationFrame",n=>{ye(n,"request","cancel","AnimationFrame"),ye(n,"mozRequest","mozCancel","AnimationFrame"),ye(n,"webkitRequest","webkitCancel","AnimationFrame")}),e.__load_patch("blocking",(n,a)=>{let t=["alert","prompt","confirm"];for(let c=0;c<t.length;c++){let f=t[c];de(n,f,(T,g,m)=>function(C,_){return a.current.run(T,n,_,m)})}}),e.__load_patch("EventTarget",(n,a,t)=>{St(n,t),Dt(n,t);let c=n.XMLHttpRequestEventTarget;c&&c.prototype&&t.patchEventTarget(n,t,[c.prototype])}),e.__load_patch("MutationObserver",(n,a,t)=>{ve("MutationObserver"),ve("WebKitMutationObserver")}),e.__load_patch("IntersectionObserver",(n,a,t)=>{ve("IntersectionObserver")}),e.__load_patch("FileReader",(n,a,t)=>{ve("FileReader")}),e.__load_patch("on_property",(n,a,t)=>{Ot(t,n)}),e.__load_patch("customElements",(n,a,t)=>{Ct(n,t)}),e.__load_patch("XHR",(n,a)=>{C(n);let t=j("xhrTask"),c=j("xhrSync"),f=j("xhrListener"),T=j("xhrScheduled"),g=j("xhrURL"),m=j("xhrErrorBeforeScheduled");function C(_){let w=_.XMLHttpRequest;if(!w)return;let S=w.prototype;function Z(R){return R[t]}let U=S[Le],J=S[Ie];if(!U){let R=_.XMLHttpRequestEventTarget;if(R){let b=R.prototype;U=b[Le],J=b[Ie]}}let K="readystatechange",q="scheduled";function k(R){let b=R.data,D=b.target;D[T]=!1,D[m]=!1;let Q=D[f];U||(U=D[Le],J=D[Ie]),Q&&J.call(D,K,Q);let W=D[f]=()=>{if(D.readyState===D.DONE)if(!b.aborted&&D[T]&&R.state===q){let H=D[a.__symbol__("loadfalse")];if(D.status!==0&&H&&H.length>0){let i=R.invoke;R.invoke=function(){let s=D[a.__symbol__("loadfalse")];for(let o=0;o<s.length;o++)s[o]===R&&s.splice(o,1);!b.aborted&&R.state===q&&i.call(R)},H.push(R)}else R.invoke()}else!b.aborted&&D[T]===!1&&(D[m]=!0)};return U.call(D,K,W),D[t]||(D[t]=R),z.apply(D,b.args),D[T]=!0,R}function d(){}function A(R){let b=R.data;return b.aborted=!0,O.apply(b.target,b.args)}let V=de(S,"open",()=>function(R,b){return R[c]=b[2]==!1,R[g]=b[1],V.apply(R,b)}),X="XMLHttpRequest.send",G=j("fetchTaskAborting"),y=j("fetchTaskScheduling"),z=de(S,"send",()=>function(R,b){if(a.current[y]===!0||R[c])return z.apply(R,b);{let D={target:R,url:R[g],isPeriodic:!1,args:b,aborted:!1},Q=Ge(X,d,D,k,A);R&&R[m]===!0&&!D.aborted&&Q.state===q&&Q.invoke()}}),O=de(S,"abort",()=>function(R,b){let D=Z(R);if(D&&typeof D.type=="string"){if(D.cancelFn==null||D.data&&D.data.aborted)return;D.zone.cancelTask(D)}else if(a.current[G]===!0)return O.apply(R,b)})}}),e.__load_patch("geolocation",n=>{n.navigator&&n.navigator.geolocation&&yt(n.navigator.geolocation,["getCurrentPosition","watchPosition"])}),e.__load_patch("PromiseRejectionEvent",(n,a)=>{function t(c){return function(f){lt(n,c).forEach(g=>{let m=n.PromiseRejectionEvent;if(m){let C=new m(c,{promise:f.promise,reason:f.rejection});g.invoke(C)}})}}n.PromiseRejectionEvent&&(a[j("unhandledPromiseRejectionHandler")]=t("unhandledrejection"),a[j("rejectionHandledHandler")]=t("rejectionhandled"))}),e.__load_patch("queueMicrotask",(n,a,t)=>{Rt(n,t)})}function Lt(e){e.__load_patch("ZoneAwarePromise",(n,a,t)=>{let c=Object.getOwnPropertyDescriptor,f=Object.defineProperty;function T(h){if(h&&h.toString===Object.prototype.toString){let l=h.constructor&&h.constructor.name;return(l||"")+": "+JSON.stringify(h)}return h?h.toString():Object.prototype.toString.call(h)}let g=t.symbol,m=[],C=n[g("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,_=g("Promise"),w=g("then"),S="__creationTrace__";t.onUnhandledError=h=>{if(t.showUncaughtError()){let l=h&&h.rejection;l?console.error("Unhandled Promise rejection:",l instanceof Error?l.message:l,"; Zone:",h.zone.name,"; Task:",h.task&&h.task.source,"; Value:",l,l instanceof Error?l.stack:void 0):console.error(h)}},t.microtaskDrainDone=()=>{for(;m.length;){let h=m.shift();try{h.zone.runGuarded(()=>{throw h.throwOriginal?h.rejection:h})}catch(l){U(l)}}};let Z=g("unhandledPromiseRejectionHandler");function U(h){t.onUnhandledError(h);try{let l=a[Z];typeof l=="function"&&l.call(this,h)}catch{}}function J(h){return h&&h.then}function K(h){return h}function q(h){return M.reject(h)}let k=g("state"),d=g("value"),A=g("finally"),V=g("parentPromiseValue"),X=g("parentPromiseState"),G="Promise.then",y=null,z=!0,O=!1,R=0;function b(h,l){return r=>{try{Y(h,l,r)}catch(u){Y(h,!1,u)}}}let D=function(){let h=!1;return function(r){return function(){h||(h=!0,r.apply(null,arguments))}}},Q="Promise resolved with itself",W=g("currentTaskTrace");function Y(h,l,r){let u=D();if(h===r)throw new TypeError(Q);if(h[k]===y){let v=null;try{(typeof r=="object"||typeof r=="function")&&(v=r&&r.then)}catch(P){return u(()=>{Y(h,!1,P)})(),h}if(l!==O&&r instanceof M&&r.hasOwnProperty(k)&&r.hasOwnProperty(d)&&r[k]!==y)i(r),Y(h,r[k],r[d]);else if(l!==O&&typeof v=="function")try{v.call(r,u(b(h,l)),u(b(h,!1)))}catch(P){u(()=>{Y(h,!1,P)})()}else{h[k]=l;let P=h[d];if(h[d]=r,h[A]===A&&l===z&&(h[k]=h[X],h[d]=h[V]),l===O&&r instanceof Error){let E=a.currentTask&&a.currentTask.data&&a.currentTask.data[S];E&&f(r,W,{configurable:!0,enumerable:!1,writable:!0,value:E})}for(let E=0;E<P.length;)s(h,P[E++],P[E++],P[E++],P[E++]);if(P.length==0&&l==O){h[k]=R;let E=r;try{throw new Error("Uncaught (in promise): "+T(r)+(r&&r.stack?`
`+r.stack:""))}catch(N){E=N}C&&(E.throwOriginal=!0),E.rejection=r,E.promise=h,E.zone=a.current,E.task=a.currentTask,m.push(E),t.scheduleMicroTask()}}}return h}let H=g("rejectionHandledHandler");function i(h){if(h[k]===R){try{let l=a[H];l&&typeof l=="function"&&l.call(this,{rejection:h[d],promise:h})}catch{}h[k]=O;for(let l=0;l<m.length;l++)h===m[l].promise&&m.splice(l,1)}}function s(h,l,r,u,v){i(h);let P=h[k],E=P?typeof u=="function"?u:K:typeof v=="function"?v:q;l.scheduleMicroTask(G,()=>{try{let N=h[d],L=!!r&&A===r[A];L&&(r[V]=N,r[X]=P);let I=l.run(E,void 0,L&&E!==q&&E!==K?[]:[N]);Y(r,!0,I)}catch(N){Y(r,!1,N)}},r)}let o="function ZoneAwarePromise() { [native code] }",p=function(){},x=n.AggregateError;class M{static toString(){return o}static resolve(l){return l instanceof M?l:Y(new this(null),z,l)}static reject(l){return Y(new this(null),O,l)}static withResolvers(){let l={};return l.promise=new M((r,u)=>{l.resolve=r,l.reject=u}),l}static any(l){if(!l||typeof l[Symbol.iterator]!="function")return Promise.reject(new x([],"All promises were rejected"));let r=[],u=0;try{for(let E of l)u++,r.push(M.resolve(E))}catch{return Promise.reject(new x([],"All promises were rejected"))}if(u===0)return Promise.reject(new x([],"All promises were rejected"));let v=!1,P=[];return new M((E,N)=>{for(let L=0;L<r.length;L++)r[L].then(I=>{v||(v=!0,E(I))},I=>{P.push(I),u--,u===0&&(v=!0,N(new x(P,"All promises were rejected")))})})}static race(l){let r,u,v=new this((N,L)=>{r=N,u=L});function P(N){r(N)}function E(N){u(N)}for(let N of l)J(N)||(N=this.resolve(N)),N.then(P,E);return v}static all(l){return M.allWithCallback(l)}static allSettled(l){return(this&&this.prototype instanceof M?this:M).allWithCallback(l,{thenCallback:u=>({status:"fulfilled",value:u}),errorCallback:u=>({status:"rejected",reason:u})})}static allWithCallback(l,r){let u,v,P=new this((I,F)=>{u=I,v=F}),E=2,N=0,L=[];for(let I of l){J(I)||(I=this.resolve(I));let F=N;try{I.then(B=>{L[F]=r?r.thenCallback(B):B,E--,E===0&&u(L)},B=>{r?(L[F]=r.errorCallback(B),E--,E===0&&u(L)):v(B)})}catch(B){v(B)}E++,N++}return E-=2,E===0&&u(L),P}constructor(l){let r=this;if(!(r instanceof M))throw new Error("Must be an instanceof Promise.");r[k]=y,r[d]=[];try{let u=D();l&&l(u(b(r,z)),u(b(r,O)))}catch(u){Y(r,!1,u)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return M}then(l,r){var E;let u=(E=this.constructor)==null?void 0:E[Symbol.species];(!u||typeof u!="function")&&(u=this.constructor||M);let v=new u(p),P=a.current;return this[k]==y?this[d].push(P,v,l,r):s(this,P,v,l,r),v}catch(l){return this.then(null,l)}finally(l){var P;let r=(P=this.constructor)==null?void 0:P[Symbol.species];(!r||typeof r!="function")&&(r=M);let u=new r(p);u[A]=A;let v=a.current;return this[k]==y?this[d].push(v,u,l,l):s(this,v,u,l,l),u}}M.resolve=M.resolve,M.reject=M.reject,M.race=M.race,M.all=M.all;let ie=n[_]=n.Promise;n.Promise=M;let le=g("thenPatched");function ue(h){let l=h.prototype,r=c(l,"then");if(r&&(r.writable===!1||!r.configurable))return;let u=l.then;l[w]=u,h.prototype.then=function(v,P){return new M((N,L)=>{u.call(this,N,L)}).then(v,P)},h[le]=!0}t.patchThen=ue;function re(h){return function(l,r){let u=h.apply(l,r);if(u instanceof M)return u;let v=u.constructor;return v[le]||ue(v),u}}return ie&&(ue(ie),de(n,"fetch",h=>re(h))),Promise[a.__symbol__("uncaughtPromiseErrors")]=m,M})}function It(e){e.__load_patch("toString",n=>{let a=Function.prototype.toString,t=j("OriginalDelegate"),c=j("Promise"),f=j("Error"),T=function(){if(typeof this=="function"){let _=this[t];if(_)return typeof _=="function"?a.call(_):Object.prototype.toString.call(_);if(this===Promise){let w=n[c];if(w)return a.call(w)}if(this===Error){let w=n[f];if(w)return a.call(w)}}return a.call(this)};T[t]=a,Function.prototype.toString=T;let g=Object.prototype.toString,m="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?m:g.call(this)}})}function Mt(e,n,a,t,c){let f=Zone.__symbol__(t);if(n[f])return;let T=n[f]=n[t];n[t]=function(g,m,C){return m&&m.prototype&&c.forEach(function(_){let w=`${a}.${t}::`+_,S=m.prototype;try{if(S.hasOwnProperty(_)){let Z=e.ObjectGetOwnPropertyDescriptor(S,_);Z&&Z.value?(Z.value=e.wrapWithCurrentZone(Z.value,w),e._redefineProperty(m.prototype,_,Z)):S[_]&&(S[_]=e.wrapWithCurrentZone(S[_],w))}else S[_]&&(S[_]=e.wrapWithCurrentZone(S[_],w))}catch{}}),T.call(n,g,m,C)},e.attachOriginToPatched(n[t],T)}function Zt(e){e.__load_patch("util",(n,a,t)=>{let c=Ze(n);t.patchOnProperties=ot,t.patchMethod=de,t.bindArguments=Fe,t.patchMacroTask=pt;let f=a.__symbol__("BLACK_LISTED_EVENTS"),T=a.__symbol__("UNPATCHED_EVENTS");n[T]&&(n[f]=n[T]),n[f]&&(a[f]=a[T]=n[f]),t.patchEventPrototype=wt,t.patchEventTarget=Pt,t.isIEOrEdge=vt,t.ObjectDefineProperty=Ae,t.ObjectGetOwnPropertyDescriptor=be,t.ObjectCreate=Et,t.ArraySlice=Tt,t.patchClass=ve,t.wrapWithCurrentZone=Ve,t.filterProperties=ut,t.attachOriginToPatched=_e,t._redefineProperty=Object.defineProperty,t.patchCallbacks=Mt,t.getGlobalObjects=()=>({globalSources:st,zoneSymbolEventNames:ne,eventNames:c,isBrowser:Be,isMix:rt,isNode:Se,TRUE_STR:fe,FALSE_STR:he,ZONE_SYMBOL_PREFIX:Pe,ADD_EVENT_LISTENER_STR:He,REMOVE_EVENT_LISTENER_STR:xe})})}function At(e){Lt(e),It(e),Zt(e)}var ft=_t();At(ft);Nt(ft);
/*! Bundled license information:

zone.js/fesm2015/zone.js:
  (**
   * @license Angular v<unknown>
   * (c) 2010-2024 Google LLC. https://angular.io/
   * License: MIT
   *)
*/
  </script>
  <script defer="">
   (function(){function A(ee){return ee&&ee.__esModule?ee.default:ee}function j(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}function M(ee,z){if(!(ee instanceof z))throw new TypeError("Cannot call a class as a function")}function w(ee,z){for(var P=0;P<z.length;P++){var Y=z[P];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(ee,Y.key,Y)}}function E(ee,z,P){return z&&w(ee.prototype,z),P&&w(ee,P),ee}function N(ee){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)},N(ee)}function O(ee,z){return O=Object.setPrototypeOf||function(P,Y){return P.__proto__=Y,P},O(ee,z)}function x(ee,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(z&&z.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),z&&O(ee,z)}function I(ee,z){return!z||((P=z)&&P.constructor===Symbol?"symbol":typeof P)!="object"&&typeof z!="function"?j(ee):z;var P}var _;function S(ee){return Array.isArray(ee)||{}.toString.call(ee)=="[object Object]"}function u(ee){return!ee||typeof ee!="object"&&typeof ee!="function"}_=function ee(){var z=[].slice.call(arguments),P=!1;typeof z[0]=="boolean"&&(P=z.shift());var Y=z[0];if(u(Y))throw new Error("extendee must be an object");for(var $=z.slice(1),J=$.length,te=0;te<J;te++){var q=$[te];for(var K in q)if(Object.prototype.hasOwnProperty.call(q,K)){var U=q[K];if(P&&S(U)){var F=Array.isArray(U)?[]:{};Y[K]=ee(!0,Object.prototype.hasOwnProperty.call(Y,K)&&!u(Y[K])?Y[K]:F,U)}else Y[K]=U}}return Y};var y=function(){"use strict";function ee(){M(this,ee)}return E(ee,[{key:"on",value:function(z,P){return this._callbacks=this._callbacks||{},this._callbacks[z]||(this._callbacks[z]=[]),this._callbacks[z].push(P),this}},{key:"emit",value:function(z){for(var P=arguments.length,Y=new Array(P>1?P-1:0),$=1;$<P;$++)Y[$-1]=arguments[$];this._callbacks=this._callbacks||{};var J=this._callbacks[z],te=!0,q=!1,K=void 0;if(J)try{for(var U,F=J[Symbol.iterator]();!(te=(U=F.next()).done);te=!0){var re=U.value;re.apply(this,Y)}}catch(W){q=!0,K=W}finally{try{te||F.return==null||F.return()}finally{if(q)throw K}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+z,{args:Y})),this}},{key:"makeEvent",value:function(z,P){var Y={bubbles:!0,cancelable:!0,detail:P};if(typeof window.CustomEvent=="function")return new CustomEvent(z,Y);var $=document.createEvent("CustomEvent");return $.initCustomEvent(z,Y.bubbles,Y.cancelable,Y.detail),$}},{key:"off",value:function(z,P){if(!this._callbacks||arguments.length===0)return this._callbacks={},this;var Y=this._callbacks[z];if(!Y)return this;if(arguments.length===1)return delete this._callbacks[z],this;for(var $=0;$<Y.length;$++){var J=Y[$];if(J===P){Y.splice($,1);break}}return this}}]),ee}(),v={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(ee,z,P){if(P)return{dzuuid:P.file.upload.uuid,dzchunkindex:P.index,dztotalfilesize:P.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:P.file.upload.totalChunkCount,dzchunkbyteoffset:P.index*this.options.chunkSize}},accept:function(ee,z){return z()},chunksUploaded:function(ee,z){z()},binaryBody:!1,fallback:function(){var ee;this.element.className="".concat(this.element.className," dz-browser-not-supported");var z=!0,P=!1,Y=void 0;try{for(var $,J=this.element.getElementsByTagName("div")[Symbol.iterator]();!(z=($=J.next()).done);z=!0){var te=$.value;if(/(^| )dz-message($| )/.test(te.className)){ee=te,te.className="dz-message";break}}}catch(K){P=!0,Y=K}finally{try{z||J.return==null||J.return()}finally{if(P)throw Y}}ee||(ee=m.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(ee));var q=ee.getElementsByTagName("span")[0];return q&&(q.textContent!=null?q.textContent=this.options.dictFallbackMessage:q.innerText!=null&&(q.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(ee,z,P,Y){var $={srcX:0,srcY:0,srcWidth:ee.width,srcHeight:ee.height},J=ee.width/ee.height;z==null&&P==null?(z=$.srcWidth,P=$.srcHeight):z==null?z=P*J:P==null&&(P=z/J);var te=(z=Math.min(z,$.srcWidth))/(P=Math.min(P,$.srcHeight));if($.srcWidth>z||$.srcHeight>P)if(Y==="crop")J>te?($.srcHeight=ee.height,$.srcWidth=$.srcHeight*te):($.srcWidth=ee.width,$.srcHeight=$.srcWidth/te);else{if(Y!=="contain")throw new Error("Unknown resizeMethod '".concat(Y,"'"));J>te?P=z/J:z=P*J}return $.srcX=(ee.width-$.srcWidth)/2,$.srcY=(ee.height-$.srcHeight)/2,$.trgWidth=z,$.trgHeight=P,$},transformFile:function(ee,z){return(this.options.resizeWidth||this.options.resizeHeight)&&ee.type.match(/image.*/)?this.resizeImage(ee,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,z):z(ee)},previewTemplate:A('<div class="dz-file-preview dz-preview"> <div class="dz-image"><img data-dz-thumbnail=""></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size=""></span></div> <div class="dz-filename"><span data-dz-name=""></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress=""></span> </div> <div class="dz-error-message"><span data-dz-errormessage=""></span></div> <div class="dz-success-mark"> <svg width="54" height="54" fill="#fff"><path d="m10.207 29.793 4.086-4.086a1 1 0 0 1 1.414 0l5.586 5.586a1 1 0 0 0 1.414 0l15.586-15.586a1 1 0 0 1 1.414 0l4.086 4.086a1 1 0 0 1 0 1.414L22.707 42.293a1 1 0 0 1-1.414 0L10.207 31.207a1 1 0 0 1 0-1.414Z"/></svg> </div> <div class="dz-error-mark"> <svg width="54" height="54" fill="#fff"><path d="m26.293 20.293-7.086-7.086a1 1 0 0 0-1.414 0l-4.586 4.586a1 1 0 0 0 0 1.414l7.086 7.086a1 1 0 0 1 0 1.414l-7.086 7.086a1 1 0 0 0 0 1.414l4.586 4.586a1 1 0 0 0 1.414 0l7.086-7.086a1 1 0 0 1 1.414 0l7.086 7.086a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7.086-7.086a1 1 0 0 1 0-1.414l7.086-7.086a1 1 0 0 0 0-1.414l-4.586-4.586a1 1 0 0 0-1.414 0l-7.086 7.086a1 1 0 0 1-1.414 0Z"/></svg> </div> </div>'),drop:function(ee){return this.element.classList.remove("dz-drag-hover")},dragstart:function(ee){},dragend:function(ee){return this.element.classList.remove("dz-drag-hover")},dragenter:function(ee){return this.element.classList.add("dz-drag-hover")},dragover:function(ee){return this.element.classList.add("dz-drag-hover")},dragleave:function(ee){return this.element.classList.remove("dz-drag-hover")},paste:function(ee){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(ee){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){var z=this;ee.previewElement=m.createElement(this.options.previewTemplate.trim()),ee.previewTemplate=ee.previewElement,this.previewsContainer.appendChild(ee.previewElement);var P=!0,Y=!1,$=void 0;try{for(var J,te=ee.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator]();!(P=(J=te.next()).done);P=!0){var q=J.value;q.textContent=ee.name}}catch(le){Y=!0,$=le}finally{try{P||te.return==null||te.return()}finally{if(Y)throw $}}var K=!0,U=!1,F=void 0;try{for(var re,W=ee.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator]();!(K=(re=W.next()).done);K=!0)(q=re.value).innerHTML=this.filesize(ee.size)}catch(le){U=!0,F=le}finally{try{K||W.return==null||W.return()}finally{if(U)throw F}}this.options.addRemoveLinks&&(ee._removeLink=m.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),ee.previewElement.appendChild(ee._removeLink));var ie=function(le){var me=z;if(le.preventDefault(),le.stopPropagation(),ee.status===m.UPLOADING)return m.confirm(z.options.dictCancelUploadConfirmation,function(){return me.removeFile(ee)});var De=z;return z.options.dictRemoveFileConfirmation?m.confirm(z.options.dictRemoveFileConfirmation,function(){return De.removeFile(ee)}):z.removeFile(ee)},he=!0,ve=!1,Ne=void 0;try{for(var ze,rt=ee.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator]();!(he=(ze=rt.next()).done);he=!0)ze.value.addEventListener("click",ie)}catch(le){ve=!0,Ne=le}finally{try{he||rt.return==null||rt.return()}finally{if(ve)throw Ne}}}},removedfile:function(ee){return ee.previewElement!=null&&ee.previewElement.parentNode!=null&&ee.previewElement.parentNode.removeChild(ee.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(ee,z){if(ee.previewElement){ee.previewElement.classList.remove("dz-file-preview");var P=!0,Y=!1,$=void 0;try{for(var J,te=ee.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator]();!(P=(J=te.next()).done);P=!0){var q=J.value;q.alt=ee.name,q.src=z}}catch(K){Y=!0,$=K}finally{try{P||te.return==null||te.return()}finally{if(Y)throw $}}return setTimeout(function(){return ee.previewElement.classList.add("dz-image-preview")},1)}},error:function(ee,z){if(ee.previewElement){ee.previewElement.classList.add("dz-error"),typeof z!="string"&&z.error&&(z=z.error);var P=!0,Y=!1,$=void 0;try{for(var J,te=ee.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator]();!(P=(J=te.next()).done);P=!0)J.value.textContent=z}catch(q){Y=!0,$=q}finally{try{P||te.return==null||te.return()}finally{if(Y)throw $}}}},errormultiple:function(){},processing:function(ee){if(ee.previewElement&&(ee.previewElement.classList.add("dz-processing"),ee._removeLink))return ee._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(ee,z,P){var Y=!0,$=!1,J=void 0;if(ee.previewElement)try{for(var te,q=ee.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator]();!(Y=(te=q.next()).done);Y=!0){var K=te.value;K.nodeName==="PROGRESS"?K.value=z:K.style.width="".concat(z,"%")}}catch(U){$=!0,J=U}finally{try{Y||q.return==null||q.return()}finally{if($)throw J}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(ee){if(ee.previewElement)return ee.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(ee){return this.emit("error",ee,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(ee){if(ee._removeLink&&(ee._removeLink.innerHTML=this.options.dictRemoveFile),ee.previewElement)return ee.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},m=function(ee){"use strict";function z(P,Y){var $,J,te,q;if(M(this,z),($=I(this,(J=z,N(J)).call(this))).element=P,$.clickableElements=[],$.listeners=[],$.files=[],typeof $.element=="string"&&($.element=document.querySelector($.element)),!$.element||$.element.nodeType==null)throw new Error("Invalid dropzone element.");if($.element.dropzone)throw new Error("Dropzone already attached.");z.instances.push(j($)),$.element.dropzone=j($);var K=(q=z.optionsForElement($.element))!=null?q:{};if($.options=A(_)(!0,{},v,K,Y??{}),$.options.previewTemplate=$.options.previewTemplate.replace(/\n*/g,""),$.options.forceFallback||!z.isBrowserSupported())return I($,$.options.fallback.call(j($)));if($.options.url==null&&($.options.url=$.element.getAttribute("action")),!$.options.url)throw new Error("No URL provided.");if($.options.acceptedFiles&&$.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if($.options.uploadMultiple&&$.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if($.options.binaryBody&&$.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");return $.options.acceptedMimeTypes&&($.options.acceptedFiles=$.options.acceptedMimeTypes,delete $.options.acceptedMimeTypes),$.options.renameFilename!=null&&($.options.renameFile=function(U){return $.options.renameFilename.call(j($),U.name,U)}),typeof $.options.method=="string"&&($.options.method=$.options.method.toUpperCase()),(te=$.getExistingFallback())&&te.parentNode&&te.parentNode.removeChild(te),$.options.previewsContainer!==!1&&($.options.previewsContainer?$.previewsContainer=z.getElement($.options.previewsContainer,"previewsContainer"):$.previewsContainer=$.element),$.options.clickable&&($.options.clickable===!0?$.clickableElements=[$.element]:$.clickableElements=z.getElements($.options.clickable,"clickable")),$.init(),$}return x(z,ee),E(z,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(P){return P.accepted}).map(function(P){return P})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(P){return!P.accepted}).map(function(P){return P})}},{key:"getFilesWithStatus",value:function(P){return this.files.filter(function(Y){return Y.status===P}).map(function(Y){return Y})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(z.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(z.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(z.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(P){return P.status===z.UPLOADING||P.status===z.QUEUED}).map(function(P){return P})}},{key:"init",value:function(){var P=this,Y=this,$=this,J=this,te=this,q=this,K=this,U=this,F=this,re=this,W=this;if(this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(z.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length){var ie=this,he=function(){var Me=ie;ie.hiddenFileInput&&ie.hiddenFileInput.parentNode.removeChild(ie.hiddenFileInput),ie.hiddenFileInput=document.createElement("input"),ie.hiddenFileInput.setAttribute("type","file"),(ie.options.maxFiles===null||ie.options.maxFiles>1)&&ie.hiddenFileInput.setAttribute("multiple","multiple"),ie.hiddenFileInput.className="dz-hidden-input",ie.options.acceptedFiles!==null&&ie.hiddenFileInput.setAttribute("accept",ie.options.acceptedFiles),ie.options.capture!==null&&ie.hiddenFileInput.setAttribute("capture",ie.options.capture),ie.hiddenFileInput.setAttribute("tabindex","-1"),ie.hiddenFileInput.style.visibility="hidden",ie.hiddenFileInput.style.position="absolute",ie.hiddenFileInput.style.top="0",ie.hiddenFileInput.style.left="0",ie.hiddenFileInput.style.height="0",ie.hiddenFileInput.style.width="0",z.getElement(ie.options.hiddenInputContainer,"hiddenInputContainer").appendChild(ie.hiddenFileInput),ie.hiddenFileInput.addEventListener("change",function(){var Re=Me.hiddenFileInput.files,we=!0,ke=!1,Ve=void 0;if(Re.length)try{for(var We,$e=Re[Symbol.iterator]();!(we=(We=$e.next()).done);we=!0){var ue=We.value;Me.addFile(ue)}}catch(Se){ke=!0,Ve=Se}finally{try{we||$e.return==null||$e.return()}finally{if(ke)throw Ve}}Me.emit("addedfiles",Re),he()})};he()}this.URL=window.URL!==null?window.URL:window.webkitURL;var ve=!0,Ne=!1,ze=void 0;try{for(var rt,le=this.events[Symbol.iterator]();!(ve=(rt=le.next()).done);ve=!0){var me=rt.value;this.on(me,this.options[me])}}catch(Me){Ne=!0,ze=Me}finally{try{ve||le.return==null||le.return()}finally{if(Ne)throw ze}}this.on("uploadprogress",function(){return P.updateTotalUploadProgress()}),this.on("removedfile",function(){return Y.updateTotalUploadProgress()}),this.on("canceled",function(Me){return $.emit("complete",Me)}),this.on("complete",function(Me){var Re=J;if(J.getAddedFiles().length===0&&J.getUploadingFiles().length===0&&J.getQueuedFiles().length===0)return setTimeout(function(){return Re.emit("queuecomplete")},0)});var De=function(Me){if(function(Re){if(Re.dataTransfer.types){for(var we=0;we<Re.dataTransfer.types.length;we++)if(Re.dataTransfer.types[we]==="Files")return!0}return!1}(Me))return Me.stopPropagation(),Me.preventDefault?Me.preventDefault():Me.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(Me){return te.emit("dragstart",Me)},dragenter:function(Me){return De(Me),q.emit("dragenter",Me)},dragover:function(Me){var Re;try{Re=Me.dataTransfer.effectAllowed}catch{}return Me.dataTransfer.dropEffect=Re==="move"||Re==="linkMove"?"move":"copy",De(Me),K.emit("dragover",Me)},dragleave:function(Me){return U.emit("dragleave",Me)},drop:function(Me){return De(Me),F.drop(Me)},dragend:function(Me){return re.emit("dragend",Me)}}}],this.clickableElements.forEach(function(Me){var Re=W;return W.listeners.push({element:Me,events:{click:function(we){return(Me!==Re.element||we.target===Re.element||z.elementInside(we.target,Re.element.querySelector(".dz-message")))&&Re.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),this.hiddenFileInput!=null&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,z.instances.splice(z.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var P,Y=0,$=0;if(this.getActiveFiles().length){var J=!0,te=!1,q=void 0;try{for(var K,U=this.getActiveFiles()[Symbol.iterator]();!(J=(K=U.next()).done);J=!0){var F=K.value;Y+=F.upload.bytesSent,$+=F.upload.total}}catch(re){te=!0,q=re}finally{try{J||U.return==null||U.return()}finally{if(te)throw q}}P=100*Y/$}else P=100;return this.emit("totaluploadprogress",P,$,Y)}},{key:"_getParamName",value:function(P){return typeof this.options.paramName=="function"?this.options.paramName(P):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(P,"]"):"")}},{key:"_renameFile",value:function(P){return typeof this.options.renameFile!="function"?P.name:this.options.renameFile(P)}},{key:"getFallbackForm",value:function(){var P,Y;if(P=this.getExistingFallback())return P;var $='<div class="dz-fallback">';this.options.dictFallbackText&&($+="<p>".concat(this.options.dictFallbackText,"</p>")),$+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var J=z.createElement($);return this.element.tagName!=="FORM"?(Y=z.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(J):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),Y??J}},{key:"getExistingFallback",value:function(){var P=function(F){var re=!0,W=!1,ie=void 0;try{for(var he,ve=F[Symbol.iterator]();!(re=(he=ve.next()).done);re=!0){var Ne=he.value;if(/(^| )fallback($| )/.test(Ne.className))return Ne}}catch(ze){W=!0,ie=ze}finally{try{re||ve.return==null||ve.return()}finally{if(W)throw ie}}},Y=!0,$=!1,J=void 0;try{for(var te,q=["div","form"][Symbol.iterator]();!(Y=(te=q.next()).done);Y=!0){var K,U=te.value;if(K=P(this.element.getElementsByTagName(U)))return K}}catch(F){$=!0,J=F}finally{try{Y||q.return==null||q.return()}finally{if($)throw J}}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(P){return function(){var Y=[];for(var $ in P.events){var J=P.events[$];Y.push(P.element.addEventListener($,J,!1))}return Y}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(P){return function(){var Y=[];for(var $ in P.events){var J=P.events[$];Y.push(P.element.removeEventListener($,J,!1))}return Y}()})}},{key:"disable",value:function(){var P=this;return this.clickableElements.forEach(function(Y){return Y.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(Y){return P.cancelUpload(Y)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(P){return P.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(P){var Y=0,$="b";if(P>0){for(var J=["tb","gb","mb","kb","b"],te=0;te<J.length;te++){var q=J[te];if(P>=Math.pow(this.options.filesizeBase,4-te)/10){Y=P/Math.pow(this.options.filesizeBase,4-te),$=q;break}}Y=Math.round(10*Y)/10}return"<strong>".concat(Y,"</strong> ").concat(this.options.dictFileSizeUnits[$])}},{key:"_updateMaxFilesReachedClass",value:function(){return this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(P){if(P.dataTransfer){this.emit("drop",P);for(var Y=[],$=0;$<P.dataTransfer.files.length;$++)Y[$]=P.dataTransfer.files[$];if(Y.length){var J=P.dataTransfer.items;J&&J.length&&J[0].webkitGetAsEntry!=null?this._addFilesFromItems(J):this.handleFiles(Y)}this.emit("addedfiles",Y)}}},{key:"paste",value:function(P){if(Y=P!=null?P.clipboardData:void 0,$=function(te){return te.items},(Y!=null?$(Y):void 0)!=null){var Y,$;this.emit("paste",P);var J=P.clipboardData.items;return J.length?this._addFilesFromItems(J):void 0}}},{key:"handleFiles",value:function(P){var Y=!0,$=!1,J=void 0;try{for(var te,q=P[Symbol.iterator]();!(Y=(te=q.next()).done);Y=!0){var K=te.value;this.addFile(K)}}catch(U){$=!0,J=U}finally{try{Y||q.return==null||q.return()}finally{if($)throw J}}}},{key:"_addFilesFromItems",value:function(P){var Y=this;return function(){var $=[],J=!0,te=!1,q=void 0;try{for(var K,U=P[Symbol.iterator]();!(J=(K=U.next()).done);J=!0){var F,re=K.value;re.webkitGetAsEntry!=null&&(F=re.webkitGetAsEntry())?F.isFile?$.push(Y.addFile(re.getAsFile())):F.isDirectory?$.push(Y._addFilesFromDirectory(F,F.name)):$.push(void 0):re.getAsFile!=null&&(re.kind==null||re.kind==="file")?$.push(Y.addFile(re.getAsFile())):$.push(void 0)}}catch(W){te=!0,q=W}finally{try{J||U.return==null||U.return()}finally{if(te)throw q}}return $}()}},{key:"_addFilesFromDirectory",value:function(P,Y){var $=this,J=P.createReader(),te=function(K){return U=console,F="log",re=function(W){return W.log(K)},U!=null&&typeof U[F]=="function"?re(U,F):void 0;var U,F,re},q=function(){var K=$;return J.readEntries(function(U){if(U.length>0){var F=!0,re=!1,W=void 0;try{for(var ie,he=U[Symbol.iterator]();!(F=(ie=he.next()).done);F=!0){var ve=ie.value,Ne=K;ve.isFile?ve.file(function(ze){if(!Ne.options.ignoreHiddenFiles||ze.name.substring(0,1)!==".")return ze.fullPath="".concat(Y,"/").concat(ze.name),Ne.addFile(ze)}):ve.isDirectory&&K._addFilesFromDirectory(ve,"".concat(Y,"/").concat(ve.name))}}catch(ze){re=!0,W=ze}finally{try{F||he.return==null||he.return()}finally{if(re)throw W}}q()}return null},te)};return q()}},{key:"accept",value:function(P,Y){this.options.maxFilesize&&P.size>1048576*this.options.maxFilesize?Y(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(P.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):z.isValidFile(P,this.options.acceptedFiles)?this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(Y(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",P)):this.options.accept.call(this,P,Y):Y(this.options.dictInvalidFileType)}},{key:"addFile",value:function(P){var Y=this;P.upload={uuid:z.uuidv4(),progress:0,total:P.size,bytesSent:0,filename:this._renameFile(P)},this.files.push(P),P.status=z.ADDED,this.emit("addedfile",P),this._enqueueThumbnail(P),this.accept(P,function($){$?(P.accepted=!1,Y._errorProcessing([P],$)):(P.accepted=!0,Y.options.autoQueue&&Y.enqueueFile(P)),Y._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(P){var Y=!0,$=!1,J=void 0;try{for(var te,q=P[Symbol.iterator]();!(Y=(te=q.next()).done);Y=!0){var K=te.value;this.enqueueFile(K)}}catch(U){$=!0,J=U}finally{try{Y||q.return==null||q.return()}finally{if($)throw J}}return null}},{key:"enqueueFile",value:function(P){if(P.status!==z.ADDED||P.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");var Y=this;if(P.status=z.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return Y.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(P){if(this.options.createImageThumbnails&&P.type.match(/image.*/)&&P.size<=1048576*this.options.maxThumbnailFilesize){var Y=this;return this._thumbnailQueue.push(P),setTimeout(function(){return Y._processThumbnailQueue()},0)}}},{key:"_processThumbnailQueue",value:function(){var P=this;if(!this._processingThumbnail&&this._thumbnailQueue.length!==0){this._processingThumbnail=!0;var Y=this._thumbnailQueue.shift();return this.createThumbnail(Y,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function($){return P.emit("thumbnail",Y,$),P._processingThumbnail=!1,P._processThumbnailQueue()})}}},{key:"removeFile",value:function(P){if(P.status===z.UPLOADING&&this.cancelUpload(P),this.files=R(this.files,P),this.emit("removedfile",P),this.files.length===0)return this.emit("reset")}},{key:"removeAllFiles",value:function(P){P==null&&(P=!1);var Y=!0,$=!1,J=void 0;try{for(var te,q=this.files.slice()[Symbol.iterator]();!(Y=(te=q.next()).done);Y=!0){var K=te.value;(K.status!==z.UPLOADING||P)&&this.removeFile(K)}}catch(U){$=!0,J=U}finally{try{Y||q.return==null||q.return()}finally{if($)throw J}}return null}},{key:"resizeImage",value:function(P,Y,$,J,te){var q=this;return this.createThumbnail(P,Y,$,J,!0,function(K,U){if(U==null)return te(P);var F=q.options.resizeMimeType;F==null&&(F=P.type);var re=U.toDataURL(F,q.options.resizeQuality);return F!=="image/jpeg"&&F!=="image/jpg"||(re=ne.restore(P.dataURL,re)),te(z.dataURItoBlob(re))})}},{key:"createThumbnail",value:function(P,Y,$,J,te,q){var K=this,U=new FileReader;U.onload=function(){P.dataURL=U.result,P.type!=="image/svg+xml"?K.createThumbnailFromUrl(P,Y,$,J,te,q):q!=null&&q(U.result)},U.readAsDataURL(P)}},{key:"displayExistingFile",value:function(P,Y,$,J,te){var q=te===void 0||te;if(this.emit("addedfile",P),this.emit("complete",P),q){var K=this;P.dataURL=Y,this.createThumbnailFromUrl(P,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(U){K.emit("thumbnail",P,U),$&&$()},J)}else this.emit("thumbnail",P,Y),$&&$()}},{key:"createThumbnailFromUrl",value:function(P,Y,$,J,te,q,K){var U=this,F=document.createElement("img");return K&&(F.crossOrigin=K),te=getComputedStyle(document.body).imageOrientation!="from-image"&&te,F.onload=function(){var re=U,W=function(ie){return ie(1)};return typeof EXIF<"u"&&EXIF!==null&&te&&(W=function(ie){return EXIF.getData(F,function(){return ie(EXIF.getTag(this,"Orientation"))})}),W(function(ie){P.width=F.width,P.height=F.height;var he=re.options.resize.call(re,P,Y,$,J),ve=document.createElement("canvas"),Ne=ve.getContext("2d");switch(ve.width=he.trgWidth,ve.height=he.trgHeight,ie>4&&(ve.width=he.trgHeight,ve.height=he.trgWidth),ie){case 2:Ne.translate(ve.width,0),Ne.scale(-1,1);break;case 3:Ne.translate(ve.width,ve.height),Ne.rotate(Math.PI);break;case 4:Ne.translate(0,ve.height),Ne.scale(1,-1);break;case 5:Ne.rotate(.5*Math.PI),Ne.scale(1,-1);break;case 6:Ne.rotate(.5*Math.PI),Ne.translate(0,-ve.width);break;case 7:Ne.rotate(.5*Math.PI),Ne.translate(ve.height,-ve.width),Ne.scale(-1,1);break;case 8:Ne.rotate(-.5*Math.PI),Ne.translate(-ve.height,0)}Z(Ne,F,he.srcX!=null?he.srcX:0,he.srcY!=null?he.srcY:0,he.srcWidth,he.srcHeight,he.trgX!=null?he.trgX:0,he.trgY!=null?he.trgY:0,he.trgWidth,he.trgHeight);var ze=ve.toDataURL("image/png");if(q!=null)return q(ze,ve)})},q!=null&&(F.onerror=q),F.src=P.dataURL}},{key:"processQueue",value:function(){var P=this.options.parallelUploads,Y=this.getUploadingFiles().length,$=Y;if(!(Y>=P)){var J=this.getQueuedFiles();if(J.length>0){if(this.options.uploadMultiple)return this.processFiles(J.slice(0,P-Y));for(;$<P;){if(!J.length)return;this.processFile(J.shift()),$++}}}}},{key:"processFile",value:function(P){return this.processFiles([P])}},{key:"processFiles",value:function(P){var Y=!0,$=!1,J=void 0;try{for(var te,q=P[Symbol.iterator]();!(Y=(te=q.next()).done);Y=!0){var K=te.value;K.processing=!0,K.status=z.UPLOADING,this.emit("processing",K)}}catch(U){$=!0,J=U}finally{try{Y||q.return==null||q.return()}finally{if($)throw J}}return this.options.uploadMultiple&&this.emit("processingmultiple",P),this.uploadFiles(P)}},{key:"_getFilesWithXhr",value:function(P){return this.files.filter(function(Y){return Y.xhr===P}).map(function(Y){return Y})}},{key:"cancelUpload",value:function(P){if(P.status===z.UPLOADING){var Y=this._getFilesWithXhr(P.xhr),$=!0,J=!1,te=void 0;try{for(var q,K=Y[Symbol.iterator]();!($=(q=K.next()).done);$=!0)(he=q.value).status=z.CANCELED}catch(ve){J=!0,te=ve}finally{try{$||K.return==null||K.return()}finally{if(J)throw te}}P.xhr!==void 0&&P.xhr.abort();var U=!0,F=!1,re=void 0;try{for(var W,ie=Y[Symbol.iterator]();!(U=(W=ie.next()).done);U=!0){var he=W.value;this.emit("canceled",he)}}catch(ve){F=!0,re=ve}finally{try{U||ie.return==null||ie.return()}finally{if(F)throw re}}this.options.uploadMultiple&&this.emit("canceledmultiple",Y)}else P.status!==z.ADDED&&P.status!==z.QUEUED||(P.status=z.CANCELED,this.emit("canceled",P),this.options.uploadMultiple&&this.emit("canceledmultiple",[P]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(P){for(var Y=arguments.length,$=new Array(Y>1?Y-1:0),J=1;J<Y;J++)$[J-1]=arguments[J];return typeof P=="function"?P.apply(this,$):P}},{key:"uploadFile",value:function(P){return this.uploadFiles([P])}},{key:"uploadFiles",value:function(P){var Y=this;this._transformFiles(P,function($){if(Y.options.chunking){var J=$[0];P[0].upload.chunked=Y.options.chunking&&(Y.options.forceChunking||J.size>Y.options.chunkSize),P[0].upload.totalChunkCount=Math.ceil(J.size/Y.options.chunkSize)}if(P[0].upload.chunked){var te=Y,q=Y,K=P[0];J=$[0],K.upload.chunks=[];var U=function(){for(var W=0;K.upload.chunks[W]!==void 0;)W++;if(!(W>=K.upload.totalChunkCount)){var ie=W*te.options.chunkSize,he=Math.min(ie+te.options.chunkSize,J.size),ve={name:te._getParamName(0),data:J.webkitSlice?J.webkitSlice(ie,he):J.slice(ie,he),filename:K.upload.filename,chunkIndex:W};K.upload.chunks[W]={file:K,index:W,dataBlock:ve,status:z.UPLOADING,progress:0,retries:0},te._uploadData(P,[ve])}};if(K.upload.finishedChunkUpload=function(W,ie){var he=q,ve=!0;W.status=z.SUCCESS,W.dataBlock=null,W.response=W.xhr.responseText,W.responseHeaders=W.xhr.getAllResponseHeaders(),W.xhr=null;for(var Ne=0;Ne<K.upload.totalChunkCount;Ne++){if(K.upload.chunks[Ne]===void 0)return U();K.upload.chunks[Ne].status!==z.SUCCESS&&(ve=!1)}ve&&q.options.chunksUploaded(K,function(){he._finished(P,ie,null)})},Y.options.parallelChunkUploads)for(var F=0;F<K.upload.totalChunkCount;F++)U();else U()}else{var re=[];for(F=0;F<P.length;F++)re[F]={name:Y._getParamName(F),data:$[F],filename:P[F].upload.filename};Y._uploadData(P,re)}})}},{key:"_getChunk",value:function(P,Y){for(var $=0;$<P.upload.totalChunkCount;$++)if(P.upload.chunks[$]!==void 0&&P.upload.chunks[$].xhr===Y)return P.upload.chunks[$]}},{key:"_uploadData",value:function(P,Y){var $=this,J=this,te=this,q=this,K=new XMLHttpRequest,U=!0,F=!1,re=void 0;try{for(var W=P[Symbol.iterator]();!(U=(we=W.next()).done);U=!0)(rt=we.value).xhr=K}catch(Ve){F=!0,re=Ve}finally{try{U||W.return==null||W.return()}finally{if(F)throw re}}P[0].upload.chunked&&(P[0].upload.chunks[Y[0].chunkIndex].xhr=K);var ie=this.resolveOption(this.options.method,P,Y),he=this.resolveOption(this.options.url,P,Y);K.open(ie,he,!0),this.resolveOption(this.options.timeout,P)&&(K.timeout=this.resolveOption(this.options.timeout,P)),K.withCredentials=!!this.options.withCredentials,K.onload=function(Ve){$._finishedUploading(P,K,Ve)},K.ontimeout=function(){J._handleUploadError(P,K,"Request timedout after ".concat(J.options.timeout/1e3," seconds"))},K.onerror=function(){te._handleUploadError(P,K)},(K.upload!=null?K.upload:K).onprogress=function(Ve){return q._updateFilesUploadProgress(P,K,Ve)};var ve=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};for(var Ne in this.options.binaryBody&&(ve["Content-Type"]=P[0].type),this.options.headers&&A(_)(ve,this.options.headers),ve){var ze=ve[Ne];ze&&K.setRequestHeader(Ne,ze)}if(this.options.binaryBody){U=!0,F=!1,re=void 0;try{for(W=P[Symbol.iterator]();!(U=(we=W.next()).done);U=!0){var rt=we.value;this.emit("sending",rt,K)}}catch(Ve){F=!0,re=Ve}finally{try{U||W.return==null||W.return()}finally{if(F)throw re}}this.options.uploadMultiple&&this.emit("sendingmultiple",P,K),this.submitRequest(K,null,P)}else{var le=new FormData;if(this.options.params){var me=this.options.params;for(var De in typeof me=="function"&&(me=me.call(this,P,K,P[0].upload.chunked?this._getChunk(P[0],K):null)),me){var Me=me[De];if(Array.isArray(Me))for(var Re=0;Re<Me.length;Re++)le.append(De,Me[Re]);else le.append(De,Me)}}U=!0,F=!1,re=void 0;try{var we;for(W=P[Symbol.iterator]();!(U=(we=W.next()).done);U=!0)rt=we.value,this.emit("sending",rt,K,le)}catch(Ve){F=!0,re=Ve}finally{try{U||W.return==null||W.return()}finally{if(F)throw re}}for(this.options.uploadMultiple&&this.emit("sendingmultiple",P,K,le),this._addFormElementData(le),Re=0;Re<Y.length;Re++){var ke=Y[Re];le.append(ke.name,ke.data,ke.filename)}this.submitRequest(K,le,P)}}},{key:"_transformFiles",value:function(P,Y){for(var $=this,J=function(U){$.options.transformFile.call($,P[U],function(F){te[U]=F,++q===P.length&&Y(te)})},te=[],q=0,K=0;K<P.length;K++)J(K)}},{key:"_addFormElementData",value:function(P){var Y=!0,$=!1,J=void 0;if(this.element.tagName==="FORM")try{for(var te=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator]();!(Y=(F=te.next()).done);Y=!0){var q=F.value,K=q.getAttribute("name"),U=q.getAttribute("type");if(U&&(U=U.toLowerCase()),K!=null)if(q.tagName==="SELECT"&&q.hasAttribute("multiple")){Y=!0,$=!1,J=void 0;try{var F;for(te=q.options[Symbol.iterator]();!(Y=(F=te.next()).done);Y=!0){var re=F.value;re.selected&&P.append(K,re.value)}}catch(W){$=!0,J=W}finally{try{Y||te.return==null||te.return()}finally{if($)throw J}}}else(!U||U!=="checkbox"&&U!=="radio"||q.checked)&&P.append(K,q.value)}}catch(W){$=!0,J=W}finally{try{Y||te.return==null||te.return()}finally{if($)throw J}}}},{key:"_updateFilesUploadProgress",value:function(P,Y,$){var J=!0,te=!1,q=void 0;if(P[0].upload.chunked){W=P[0];var K=this._getChunk(W,Y);$?(K.progress=100*$.loaded/$.total,K.total=$.total,K.bytesSent=$.loaded):(K.progress=100,K.bytesSent=K.total),W.upload.progress=0,W.upload.total=0,W.upload.bytesSent=0;for(var U=0;U<W.upload.totalChunkCount;U++)W.upload.chunks[U]&&W.upload.chunks[U].progress!==void 0&&(W.upload.progress+=W.upload.chunks[U].progress,W.upload.total+=W.upload.chunks[U].total,W.upload.bytesSent+=W.upload.chunks[U].bytesSent);W.upload.progress=W.upload.progress/W.upload.totalChunkCount,this.emit("uploadprogress",W,W.upload.progress,W.upload.bytesSent)}else try{for(var F,re=P[Symbol.iterator]();!(J=(F=re.next()).done);J=!0){var W;(W=F.value).upload.total&&W.upload.bytesSent&&W.upload.bytesSent==W.upload.total||($?(W.upload.progress=100*$.loaded/$.total,W.upload.total=$.total,W.upload.bytesSent=$.loaded):(W.upload.progress=100,W.upload.bytesSent=W.upload.total),this.emit("uploadprogress",W,W.upload.progress,W.upload.bytesSent))}}catch(ie){te=!0,q=ie}finally{try{J||re.return==null||re.return()}finally{if(te)throw q}}}},{key:"_finishedUploading",value:function(P,Y,$){var J;if(P[0].status!==z.CANCELED&&Y.readyState===4){if(Y.responseType!=="arraybuffer"&&Y.responseType!=="blob"&&(J=Y.responseText,Y.getResponseHeader("content-type")&&~Y.getResponseHeader("content-type").indexOf("application/json")))try{J=JSON.parse(J)}catch(te){$=te,J="Invalid JSON response from server."}this._updateFilesUploadProgress(P,Y),200<=Y.status&&Y.status<300?P[0].upload.chunked?P[0].upload.finishedChunkUpload(this._getChunk(P[0],Y),J):this._finished(P,J,$):this._handleUploadError(P,Y,J)}}},{key:"_handleUploadError",value:function(P,Y,$){if(P[0].status!==z.CANCELED){if(P[0].upload.chunked&&this.options.retryChunks){var J=this._getChunk(P[0],Y);if(J.retries++<this.options.retryChunksLimit)return void this._uploadData(P,[J.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(P,$||this.options.dictResponseError.replace("{{statusCode}}",Y.status),Y)}}},{key:"submitRequest",value:function(P,Y,$){if(P.readyState==1)if(this.options.binaryBody)if($[0].upload.chunked){var J=this._getChunk($[0],P);P.send(J.dataBlock.data)}else P.send($[0]);else P.send(Y);else console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(P,Y,$){var J=!0,te=!1,q=void 0;try{for(var K,U=P[Symbol.iterator]();!(J=(K=U.next()).done);J=!0){var F=K.value;F.status=z.SUCCESS,this.emit("success",F,Y,$),this.emit("complete",F)}}catch(re){te=!0,q=re}finally{try{J||U.return==null||U.return()}finally{if(te)throw q}}if(this.options.uploadMultiple&&(this.emit("successmultiple",P,Y,$),this.emit("completemultiple",P)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(P,Y,$){var J=!0,te=!1,q=void 0;try{for(var K,U=P[Symbol.iterator]();!(J=(K=U.next()).done);J=!0){var F=K.value;F.status=z.ERROR,this.emit("error",F,Y,$),this.emit("complete",F)}}catch(re){te=!0,q=re}finally{try{J||U.return==null||U.return()}finally{if(te)throw q}}if(this.options.uploadMultiple&&(this.emit("errormultiple",P,Y,$),this.emit("completemultiple",P)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=y,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(P){var Y=16*Math.random()|0;return(P==="x"?Y:3&Y|8).toString(16)})}}]),z}(y);m.initClass(),m.options={},m.optionsForElement=function(ee){return ee.getAttribute("id")?m.options[V(ee.getAttribute("id"))]:void 0},m.instances=[],m.forElement=function(ee){if(typeof ee=="string"&&(ee=document.querySelector(ee)),(ee!=null?ee.dropzone:void 0)==null)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return ee.dropzone},m.discover=function(){var ee;if(document.querySelectorAll)ee=document.querySelectorAll(".dropzone");else{ee=[];var z=function(P){return function(){var Y=[],$=!0,J=!1,te=void 0;try{for(var q,K=P[Symbol.iterator]();!($=(q=K.next()).done);$=!0){var U=q.value;/(^| )dropzone($| )/.test(U.className)?Y.push(ee.push(U)):Y.push(void 0)}}catch(F){J=!0,te=F}finally{try{$||K.return==null||K.return()}finally{if(J)throw te}}return Y}()};z(document.getElementsByTagName("div")),z(document.getElementsByTagName("form"))}return function(){var P=[],Y=!0,$=!1,J=void 0;try{for(var te,q=ee[Symbol.iterator]();!(Y=(te=q.next()).done);Y=!0){var K=te.value;m.optionsForElement(K)!==!1?P.push(new m(K)):P.push(void 0)}}catch(U){$=!0,J=U}finally{try{Y||q.return==null||q.return()}finally{if($)throw J}}return P}()},m.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],m.isBrowserSupported=function(){var ee=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){m.blacklistedBrowsers!==void 0&&(m.blockedBrowsers=m.blacklistedBrowsers);var z=!0,P=!1,Y=void 0;try{for(var $,J=m.blockedBrowsers[Symbol.iterator]();!(z=($=J.next()).done);z=!0)$.value.test(navigator.userAgent)&&(ee=!1)}catch(te){P=!0,Y=te}finally{try{z||J.return==null||J.return()}finally{if(P)throw Y}}}else ee=!1;else ee=!1;return ee},m.dataURItoBlob=function(ee){for(var z=atob(ee.split(",")[1]),P=ee.split(",")[0].split(":")[1].split(";")[0],Y=new ArrayBuffer(z.length),$=new Uint8Array(Y),J=0,te=z.length,q=0<=te;q?J<=te:J>=te;q?J++:J--)$[J]=z.charCodeAt(J);return new Blob([Y],{type:P})};var R=function(ee,z){return ee.filter(function(P){return P!==z}).map(function(P){return P})},V=function(ee){return ee.replace(/[\-_](\w)/g,function(z){return z.charAt(1).toUpperCase()})};m.createElement=function(ee){var z=document.createElement("div");return z.innerHTML=ee,z.childNodes[0]},m.elementInside=function(ee,z){if(ee===z)return!0;for(;ee=ee.parentNode;)if(ee===z)return!0;return!1},m.getElement=function(ee,z){var P;if(typeof ee=="string"?P=document.querySelector(ee):ee.nodeType!=null&&(P=ee),P==null)throw new Error("Invalid `".concat(z,"` option provided. Please provide a CSS selector or a plain HTML element."));return P},m.getElements=function(ee,z){var P,Y;if(ee instanceof Array){Y=[];try{var $=!0,J=!1,te=void 0;try{for(var q=ee[Symbol.iterator]();!($=(K=q.next()).done);$=!0)P=K.value,Y.push(this.getElement(P,z))}catch(U){J=!0,te=U}finally{try{$||q.return==null||q.return()}finally{if(J)throw te}}}catch{Y=null}}else if(typeof ee=="string"){Y=[],$=!0,J=!1,te=void 0;try{var K;for(q=document.querySelectorAll(ee)[Symbol.iterator]();!($=(K=q.next()).done);$=!0)P=K.value,Y.push(P)}catch(U){J=!0,te=U}finally{try{$||q.return==null||q.return()}finally{if(J)throw te}}}else ee.nodeType!=null&&(Y=[ee]);if(Y==null||!Y.length)throw new Error("Invalid `".concat(z,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return Y},m.confirm=function(ee,z,P){return window.confirm(ee)?z():P!=null?P():void 0},m.isValidFile=function(ee,z){if(!z)return!0;z=z.split(",");var P=ee.type,Y=P.replace(/\/.*$/,""),$=!0,J=!1,te=void 0;try{for(var q,K=z[Symbol.iterator]();!($=(q=K.next()).done);$=!0){var U=q.value;if((U=U.trim()).charAt(0)==="."){if(ee.name.toLowerCase().indexOf(U.toLowerCase(),ee.name.length-U.length)!==-1)return!0}else if(/\/\*$/.test(U)){if(Y===U.replace(/\/.*$/,""))return!0}else if(P===U)return!0}}catch(F){J=!0,te=F}finally{try{$||K.return==null||K.return()}finally{if(J)throw te}}return!1},typeof jQuery<"u"&&jQuery!==null&&(jQuery.fn.dropzone=function(ee){return this.each(function(){return new m(this,ee)})}),m.ADDED="added",m.QUEUED="queued",m.ACCEPTED=m.QUEUED,m.UPLOADING="uploading",m.PROCESSING=m.UPLOADING,m.CANCELED="canceled",m.ERROR="error",m.SUCCESS="success";var Z=function(ee,z,P,Y,$,J,te,q,K,U){var F=function(re){re.naturalWidth;var W=re.naturalHeight,ie=document.createElement("canvas");ie.width=1,ie.height=W;var he=ie.getContext("2d");he.drawImage(re,0,0);for(var ve=he.getImageData(1,0,1,W).data,Ne=0,ze=W,rt=W;rt>Ne;)ve[4*(rt-1)+3]===0?ze=rt:Ne=rt,rt=ze+Ne>>1;var le=rt/W;return le===0?1:le}(z);return ee.drawImage(z,P,Y,$,J,te,q,K,U/F)},ne=function(){"use strict";function ee(){M(this,ee)}return E(ee,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(z){for(var P="",Y=void 0,$=void 0,J="",te=void 0,q=void 0,K=void 0,U="",F=0;te=(Y=z[F++])>>2,q=(3&Y)<<4|($=z[F++])>>4,K=(15&$)<<2|(J=z[F++])>>6,U=63&J,isNaN($)?K=U=64:isNaN(J)&&(U=64),P=P+this.KEY_STR.charAt(te)+this.KEY_STR.charAt(q)+this.KEY_STR.charAt(K)+this.KEY_STR.charAt(U),Y=$=J="",te=q=K=U="",F<z.length;);return P}},{key:"restore",value:function(z,P){if(!z.match("data:image/jpeg;base64,"))return P;var Y=this.decode64(z.replace("data:image/jpeg;base64,","")),$=this.slice2Segments(Y),J=this.exifManipulation(P,$);return"data:image/jpeg;base64,".concat(this.encode64(J))}},{key:"exifManipulation",value:function(z,P){var Y=this.getExifArray(P),$=this.insertExif(z,Y);return new Uint8Array($)}},{key:"getExifArray",value:function(z){for(var P=void 0,Y=0;Y<z.length;){if((P=z[Y])[0]===255&P[1]===225)return P;Y++}return[]}},{key:"insertExif",value:function(z,P){var Y=z.replace("data:image/jpeg;base64,",""),$=this.decode64(Y),J=$.indexOf(255,3),te=$.slice(0,J),q=$.slice(J),K=te;return K=(K=K.concat(P)).concat(q)}},{key:"slice2Segments",value:function(z){for(var P=0,Y=[];!(z[P]===255&z[P+1]===218);){if(z[P]===255&z[P+1]===216)P+=2;else{var $=P+(256*z[P+2]+z[P+3])+2,J=z.slice(P,$);Y.push(J),P=$}if(P>z.length)break}return Y}},{key:"decode64",value:function(z){var P=void 0,Y=void 0,$="",J=void 0,te=void 0,q="",K=0,U=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(z)&&console.warn(`There were invalid base64 characters in the input text.
Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='
Expect errors in decoding.`),z=z.replace(/[^A-Za-z0-9\+\/\=]/g,"");P=this.KEY_STR.indexOf(z.charAt(K++))<<2|(J=this.KEY_STR.indexOf(z.charAt(K++)))>>4,Y=(15&J)<<4|(te=this.KEY_STR.indexOf(z.charAt(K++)))>>2,$=(3&te)<<6|(q=this.KEY_STR.indexOf(z.charAt(K++))),U.push(P),te!==64&&U.push(Y),q!==64&&U.push($),P=Y=$="",J=te=q="",K<z.length;);return U}}]),ee}();ne.initClass(),window.Dropzone=m})();var $bu_=new function(){var A=this;this.version="3.3.55npm",this.vsakt={c:"130",f:"131",s:"17.6",e:"130",i:"12",ios:"17.6",samsung:"27",o:"114",e_a:"129",o_a:"84",y:"24.7.8",v:"6.9",uc:"13.7.8"},this.vsinsecure_below={c:"126",f:"126",s:"11.1.1",e:"119",i:11,ios:"16.5",samsung:12,o:62,o_a:78,y:"20",v:"6.0",uc:"13.4"},this.vsdefault={c:-3,f:-3,s:-2,e:17,i:11,ios:12,samsung:-3,o:-3,o_a:-3,y:-1,v:-1,uc:-.2,a:535},this.names={c:"Chrome",f:"Firefox",s:"Safari",e:"Edge",i:"Internet Explorer",ios:"iOS",samsung:"Samsung Internet",o:"Opera",o_a:"Opera",e_a:"Edge",y:"Yandex Browser",v:"Vivaldi",uc:"UC Browser",a:"Android Browser",x:"Other",silk:"Silk"},this.get_browser=function(w){var M,w=(w||navigator.userAgent).replace("_","."),E={n:"x",v:0,t:"other browser",age_years:void 0,no_device_update:!1,available:A.vsakt};function N(v,m){return new RegExp(m,"i").test(w)?v:!1}E.other=N("bot","Pagespeed|pingdom|Preview|ktxn|dynatrace|Ruxit|PhantomJS|Headless|Lighthouse|bot|spider|archiver|transcoder|crawl|checker|monitoring|prerender|screenshot|python-|php|uptime|validator|fetcher|facebook|slurp|google|yahoo|node|mail.ru|github|cloudflare|addthis|thumb|proxy|feed|fetch|favicon|link|http|scrape|seo|page|search console|AOLBuild|Teoma|Expeditor")||N("TV","SMART-TV|SmartTV")||N("niche browser","motorola edge|Comodo.Dragon|OculusBrowser|Falkon|Brave|Classic Browser|Dorado|LBBROWSER|Focus|waterfox|Firefox/56.2|Firefox/56.3|Whale|MIDP|k-meleon|sparrow|wii|Chromium|Puffin|Opera Mini|maxthon|maxton|dolfin|dolphin|seamonkey|opera mini|netfront|moblin|maemo|arora|kazehakase|epiphany|konqueror|rekonq|symbian|webos|PaleMoon|Basilisk|QupZilla|Otter|Midori|qutebrowser|slimjet")||N("mobile without upgrade path or landing page","OPR/44.12.2246|cros|kindle|tizen|silk|blackberry|bb10|RIM|PlayBook|meego|nokia|ucweb|ZuneWP7|537.85.10"),E.embedded=/"QtWebEngine|Teams|Electron/i.test(w),E.mobile=/iphone|ipod|ipad|android|mobile|phone|ios|iemobile/i.test(w),E.discontinued=/netscape|greenbrowser|camino|flot|fennec|galeon|coolnovo/i.test(w);for(var O=[["CriOS.VV","c","ios"],["FxiOS.VV","f","ios"],["Trident.*rv:VV","i","i"],["Trident.VV","i","i"],["UCBrowser.VV","uc","c"],["MSIE.VV","i","i"],["Edge.VV","e","e"],["Edg.VV","e","c"],["EdgA.VV","e_a","c"],["Vivaldi.VV","v","c"],["Android.*OPR.VV","o_a","c"],["OPR.VV","o","c"],["YaBrowser.VV","y","c"],["SamsungBrowser.VV","samsung","c"],["Silk.VV","silk","c"],["Chrome.VV","c","c"],["Firefox.VV","f","f"],[" OS.VV.*Safari","ios","ios"],["Version.VV.*Safari","s","s"],["Safari.VV","s","s"],["Opera.*Version.VV","o"],["Opera.VV","o"]],x="(\\d+\\.?\\d+\\.?\\d*\\.?\\d*)",I=0;I<O.length;I++)if(w.match(new RegExp(O[I][0].replace("VV",x),"i"))){E.n=O[I][1],E.engine=O[I][2];break}if(E.fullv=RegExp.$1,E.v=parseFloat(E.fullv),/windows.nt.5|windows.nt.4|windows.nt.6.0|windows.95|windows.98|os x 10.2|os x 10.3|os x 10.4|os x 10.5/i.test(w)&&(E.no_device_update=!0,E.available={}),navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1&&(E.n="ios",E.engine="ios",E.fullv=E.v=13,E.no_device_update=!0),/iphone|ipod|ipad|ios/i.test(w)){w.match(new RegExp("OS."+x,"i")),E.n="ios",E.fullv=RegExp.$1,E.v=parseFloat(E.fullv),E.engine="ios";var _=A.available_ios(w,E.v);_<12&&Math.round(E.v)===11&&(_=12),E.available={ios:_},parseFloat(E.available.ios)<15&&(E.no_device_update=!0)}if(/windows.nt.5.1|windows.nt.5.2|windows.nt.6.0/i.test(w)&&(E.available={c:49.9,f:52.9},E.no_device_update=!0),/os x 10.6/i.test(w)&&(E.available={s:"5.1.10",c:49.9,f:48},E.no_device_update=!0),/os x 10.7|os x 10.8/i.test(w)&&(E.available={s:"6.2.8",c:49.9,f:48},E.no_device_update=!0),/os x 10.9/i.test(w)&&(E.available.s="9.1.3"),/os x 10.10/i.test(w)&&(E.available.s="10.1.2"),w.indexOf("Android")>-1&&E.n==="s"){var S=parseInt((/WebKit\/([0-9]+)/i.exec(w)||0)[1],10)||2e3;S<=534&&(E.n="a",E.fullv=E.v=S,E.is_insecure=!0)}E.t=A.names[E.n]+" "+E.v,E.is_supported=E.is_latest=A.vsakt[E.n]?A.less(E.fullv,A.vsakt[E.n])<=0:void 0,E.vmaj=Math.round(E.v),E.is_insecure=E.is_insecure||!A.vsinsecure_below[E.n]?void 0:A.less(E.fullv,A.vsinsecure_below[E.n])===1,(E.n==="f"&&(E.vmaj===115||E.vmaj===128)||E.n==="c"&&E.vmaj===120)&&(E.is_supported=!0,E.is_insecure=!1,E.n==="f"&&(E.esr=!0)),E.n==="ios"&&E.v>=15&&(E.is_supported=!0),(E.n==="a"||E.n==="x")&&(E.t=A.names[E.n]),E.n==="e"&&(E.t=A.names[E.n]+" "+E.vmaj,E.is_supported=A.less(E.fullv,"18.15063")!=1),E.n in["c","f","o","e"]&&A.less(E.fullv,parseFloat(A.vsakt[E.n])-1)<=0&&(E.is_supported=!0);var u={f:7,c:8,o:8,i:1,e:1,s:1};u[E.n]&&(E.age_years=Math.round((A.vsakt[E.n]-E.v)/u[E.n]*10)/10||0);var y={e:"Edge.VV",c:"Chrome.VV",f:"Firefox.VV",s:"Version.VV",i:"MSIE.VV",ios:" OS.VV"};return E.engine&&(w.match(new RegExp(y[E.engine].replace("VV",x),"i")),E.engine_version=parseFloat(RegExp.$1)),E},this.semver=function(j){if(j instanceof Array)return j;var M=(j+".0.0.0").split(".");return[parseInt(M[0])||0,parseInt(M[1])||0,parseInt(M[2])||0,parseInt(M[3])||0]},this.less=function(j,M){j=A.semver(j),M=A.semver(M);for(var w=0;;w++){if(w>=j.length)return w>=M.length?0:1;if(w>=M.length)return-1;var E=M[w]-j[w];if(E)return E>0?1:-1}},this.available_ios=function(j,M){var w=Math.max(window.screen.height,window.screen.width),E=window.devicePixelRatio;return/ipad/i.test(j)?w==1024&&E==2?10:w==1112||w==1366?15:w==1024&&M<6?5:9:E==1?6:E==3||w==812||w==736||w==667?15:w==568?10:w==480?7:6}};window.$bu_getBrowser=$bu_.get_browser;var $buo=function(A,j){var M=window.navigator,w;A=window._buorgres=A||{};var E=A.l||(M.languages?M.languages[0]:null)||M.language||M.browserLanguage||M.userLanguage||document.documentElement.getAttribute("lang")||"en";A.llfull=E.replace("_","-").toLowerCase().substr(0,5),A.ll=A.llfull.substr(0,2),A.domain=A.domain!==void 0?A.domain:(/file:/.test(location.href)?"https:":"")+"//browser-update.org",A.apiver=A.api||A.c||-1,A.jsv=$bu_.version;var N=A.apiver<2018&&{i:10,f:11,o:21,s:8,c:30}||{},O=A.notify||A.vs||{};O.e!==0&&(O.e=O.e||O.i),O.i=O.i||O.e;var x=A.required||{};x.e!==0&&(x.e=x.e||x.i),x.i||(x.i=x.e,$bu_.vsakt.i=$bu_.vsakt.e);for(w in $bu_.vsdefault)O[w]&&($bu_.less(O[w],0)>=0?x[w]=parseFloat($bu_.vsakt[w])+parseFloat(O[w])+.01:x[w]=parseFloat(O[w])+.01),(!(w in x)||x[w]==null)&&(x[w]=$bu_.vsdefault[w]),$bu_.less(x[w],0)>=0&&(x[w]=parseFloat($bu_.vsakt[w])+parseFloat(x[w])),N[w]&&$bu_.less(x[w],N[w])===1&&(x[w]=N[w]);x.ios=x.ios||x.s,x.i<79&&x.i>65&&(x.i=x.i-60),x.e<79&&x.e>65&&(x.e=x.e-60),A.required=x,A.reminder=A.reminder<.1?0:A.reminder||24*7,A.reminderClosed=A.reminderClosed<1?0:A.reminderClosed||24*7,A.onshow=A.onshow||function(_){},A.onclick=A.onclick||function(_){},A.onclose=A.onclose||function(_){},A.pageurl=A.pageurl||location.hostname||"x",A.newwindow=A.newwindow!==!1,A.test=j||A.test||location.hash==="#test-bu"||!1,A.ignorecookie=A.ignorecookie||location.hash==="#ignorecookie-bu",A.reasons=[],A.hide_reasons=[];function I(_){var S=_.browser=$bu_.get_browser(_.override_ua);return _.is_below_required=x[S.n]&&$bu_.less(S.fullv,x[S.n])===1,S.other!==!1&&_.hide_reasons.push("is other browser:"+S.other),S.embedded!==!1&&_.hide_reasons.push("is embedded browser:"+S.embedded),S.esr&&!_.notify_esr&&_.hide_reasons.push("Extended support (ESR)"),S.mobile&&_.mobile===!1&&_.hide_reasons.push("do not notify mobile"),S.is_latest&&_.hide_reasons.push("is latest version of the browser"),S.no_device_update&&_.hide_reasons.push("no device update"),_.is_below_required&&_.reasons.push("below required"),(_.insecure||_.unsecure)&&S.is_insecure&&_.reasons.push("insecure"),_.unsupported&&!S.is_supported&&_.reasons.push("no vendor support"),_.hide_reasons.length>0?!1:_.reasons.length>0}if(A.notified=I(A),A.already_shown=document.cookie.indexOf("browserupdateorg=pause")>-1&&!A.ignorecookie,!(!A.test&&(!A.notified||A.already_shown))){if(A.setCookie=function(_){document.cookie="browserupdateorg=pause; expires="+new Date(new Date().getTime()+36e5*_).toGMTString()+"; path=/; SameSite=Lax"+(/https:/.test(location.href)?"; Secure":"")},A.already_shown&&(A.ignorecookie||A.test)&&A.setCookie(-10),A.reminder>0&&A.setCookie(A.reminder),A.nomessage){A.onshow(A);return}$buo_show()}};typeof module<"u"&&(module.exports=$buo);var $buo_show=function(){var A=window._buorgres,j=$bu_getBrowser(),M=A.burl||"http"+(/MSIE/i.test(navigator.userAgent)?"":"s")+"://browser-update.org/";A.url||(A.url=M+(A.l&&A.l+"/"||"")+"update-browser.html"+(A.test?"?force_outdated=true":"")+"#"+A.jsv+":"+A.pageurl),A.url_permanent_hide=A.url_permanent_hide||M+"block-ignore-browser-update-warning.html";function w(){for(var V=arguments,Z=V[0],ne=1;ne<V.length;++ne)Z=Z.replace(/%s/,V[ne]);return Z}var E={},N;E.en={msg:"Your web browser ({brow_name}) is out of date.",msgmore:"Update your browser for more security, speed and the best experience on this site.",bupdate:"Update browser",bignore:"Ignore",remind:"You will be reminded in {days} days.",bnever:"Never show again",insecure:"Your web browser ({brow_name}) has a serious security vulnerability!"},E.ar={msg:"\u0645\u062A\u0635\u0641\u062D \u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A \u0627\u0644\u062E\u0627\u0635 \u0628\u0643 ({brow_name}) \u063A\u064A\u0631 \u0645\u064F\u062D\u062F\u0651\u062B.",msgmore:"\u0642\u0645 \u0628\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u062A\u0635\u0641\u062D \u0627\u0644\u062E\u0627\u0635 \u0628\u0643 \u0644\u0645\u0632\u064A\u062F \u0645\u0646 \u0627\u0644\u0623\u0645\u0627\u0646 \u0648\u0627\u0644\u0633\u0631\u0639\u0629 \u0648\u0644\u0623\u0641\u0636\u0644 \u062A\u062C\u0631\u0628\u0629 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0642\u0639.",bupdate:"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u062A\u0635\u0641\u062D",bignore:"\u062A\u062C\u0627\u0647\u0644",remind:"\u0633\u064A\u062A\u0645 \u062A\u0630\u0643\u064A\u0631\u0643 \u0641\u064A \u063A\u0636\u0648\u0646 {days} \u0623\u064A\u0627\u0645.",bnever:"\u0644\u0627 \u062A\u0638\u0647\u0631 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649"},E.bg={msg:"\u0412\u0430\u0448\u0438\u044F\u0442 \u0443\u0435\u0431 \u0431\u0440\u0430\u0443\u0437\u044A\u0440 ({brow_name}) \u0435 \u043E\u0441\u0442\u0430\u0440\u044F\u043B.",msgmore:"\u0410\u043A\u0442\u0443\u0430\u043B\u0438\u0437\u0438\u0440\u0430\u0439\u0442\u0435 \u0431\u0440\u0430\u0443\u0437\u044A\u0440\u0430 \u0441\u0438 \u0437\u0430 \u043F\u043E\u0432\u0435\u0447\u0435 \u0441\u0438\u0433\u0443\u0440\u043D\u043E\u0441\u0442, \u0431\u044A\u0440\u0437\u0438\u043D\u0430 \u0438 \u043D\u0430\u0439-\u0434\u043E\u0431\u0440\u043E\u0442\u043E \u0438\u0437\u0436\u0438\u0432\u044F\u0432\u0430\u043D\u0435 \u043D\u0430 \u0442\u043E\u0437\u0438 \u0441\u0430\u0439\u0442.",bupdate:"\u0410\u043A\u0442\u0443\u0430\u043B\u0438\u0437\u0438\u0440\u0430\u043D\u0435 \u043D\u0430 \u0431\u0440\u0430\u0443\u0437\u044A\u0440\u0430",bignore:"\u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0430\u0439",remind:"\u0429\u0435 \u0432\u0438 \u0431\u044A\u0434\u0435 \u043D\u0430\u043F\u043E\u043C\u043D\u0435\u043D\u043E \u0441\u043B\u0435\u0434 {days} \u0434\u043D\u0438.",bnever:"\u041D\u0438\u043A\u043E\u0433\u0430 \u043F\u043E\u0432\u0435\u0447\u0435 \u0434\u0430 \u043D\u0435 \u0441\u0435 \u043F\u043E\u043A\u0430\u0437\u0432\u0430"},E.ca={msg:"El teu navegador ({brow_name}) est\xE0 desactualitzat.",msgmore:"Actualitzeu el vostre navegador per obtenir m\xE9s seguretat, velocitat i una millor experi\xE8ncia en aquest lloc.",bupdate:"Actualitza el navegador",bignore:"Ignorar",remind:"T'ho recordarem d'aqu\xED a {days} dies.",bnever:"No ho tornis a mostrar"},E.cs={msg:"V\xE1\u0161 prohl\xED\u017Ee\u010D ({brow_name}) je zastaral\xFD.",msgmore:"Aktualizujte prohl\xED\u017Ee\u010D pro lep\u0161\xED zabezpe\u010Den\xED, rychlost a nejlep\u0161\xED z\xE1\u017Eitek z tohoto webu.",bupdate:"Aktualizovat prohl\xED\u017Ee\u010D",bignore:"Ignorovat",remind:"Znovu budete upozorn\u011Bni za {days} dn\u016F.",bnever:"Ji\u017E nezobrazovat"},E.cy={msg:"Mae eich porwr gwe ({brow_name}) angen ei ddiweddaru.",msgmore:"Diweddarwch eich porwr i gael mwy o ddiogelwch, cyflymder a'r profiad gorau ar y safle hwn.",bupdate:"Diweddaru porwr",bignore:"Anwybyddu",remind:"Byddwn yn eich atgoffa mewn {days} diwrnod.",bnever:"Peidiwch \xE2 dangos eto"},E.da={msg:"Din web browser ({brow_name}) er for\xE6ldet",msgmore:"Opdater din browser for mere sikkerhed, hastighed og den bedste oplevelse p\xE5 denne side.",bupdate:"Opdater browser",bignore:"Ignorer",remind:"Du vil blive p\xE5mindet om {days} dage.",bnever:"Vis aldrig igen"},E.de={msg:"Ihr Webbrowser ({brow_name}) ist veraltet.",msgmore:"Aktualisieren Sie Ihren Browser f\xFCr mehr Sicherheit, Geschwindigkeit und den besten Komfort auf dieser Seite.",bupdate:"Browser aktualisieren",bignore:"Ignorieren",remind:"Sie werden in {days} Tagen wieder erinnert.",bnever:"Nie wieder anzeigen",insecure:"Ihr Webbrowser ({brow_name}) hat eine ernsthafte Sicherheitsl\xFCcke!"},E.el={msg:"\u03A4\u03BF \u03C0\u03C1\u03CC\u03B3\u03C1\u03B1\u03BC\u03BC\u03B1 \u03C0\u03B5\u03C1\u03B9\u03AE\u03B3\u03B7\u03C3\u03AE\u03C2 \u03C3\u03B1\u03C2 ({brow_name}) \u03B5\u03AF\u03BD\u03B1\u03B9 \u03B1\u03C0\u03B1\u03C1\u03C7\u03B1\u03B9\u03C9\u03BC\u03AD\u03BD\u03BF.",msgmore:"\u0395\u03BD\u03B7\u03BC\u03B5\u03C1\u03CE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CC\u03B3\u03C1\u03B1\u03BC\u03BC\u03B1 \u03C0\u03B5\u03C1\u03B9\u03AE\u03B3\u03B7\u03C3\u03AE\u03C2 \u03C3\u03B1\u03C2 \u03B3\u03B9\u03B1 \u03C0\u03B5\u03C1\u03B9\u03C3\u03C3\u03CC\u03C4\u03B5\u03C1\u03B7 \u03B1\u03C3\u03C6\u03AC\u03BB\u03B5\u03B9\u03B1, \u03C4\u03B1\u03C7\u03CD\u03C4\u03B7\u03C4\u03B1 \u03BA\u03B1\u03B9 \u03C4\u03B7\u03BD \u03BA\u03B1\u03BB\u03CD\u03C4\u03B5\u03C1\u03B7 \u03B5\u03BC\u03C0\u03B5\u03B9\u03C1\u03AF\u03B1 \u03C3' \u03B1\u03C5\u03C4\u03CC\u03BD \u03C4\u03BF\u03BD \u03B9\u03C3\u03C4\u03CC\u03C4\u03BF\u03C0\u03BF.",bupdate:"\u0395\u03BD\u03B7\u03BC\u03B5\u03C1\u03CE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CC\u03B3\u03C1\u03B1\u03BC\u03BC\u03B1 \u03C0\u03B5\u03C1\u03B9\u03AE\u03B3\u03B7\u03C3\u03B7\u03C2",bignore:"\u0391\u03B3\u03BD\u03BF\u03AE\u03C3\u03C4\u03B5",remind:"\u0398\u03B1 \u03C3\u03B1\u03C2 \u03C4\u03BF \u03C5\u03C0\u03B5\u03BD\u03B8\u03C5\u03BC\u03AF\u03C3\u03BF\u03C5\u03BC\u03B5 \u03C3\u03B5 {days} \u03B7\u03BC\u03AD\u03C1\u03B5\u03C2.",bnever:"\u039D\u03B1 \u03BC\u03B7\u03BD \u03B5\u03BC\u03C6\u03B1\u03BD\u03B9\u03C3\u03C4\u03B5\u03AF \u03BE\u03B1\u03BD\u03AC"},E.es={msg:"Su navegador web ({brow_name}) est\xE1 desactualizado.",msgmore:"Actualice su navegador para obtener m\xE1s seguridad, velocidad y para disfrutar de la mejor experiencia en este sitio.",bupdate:"Actualizar navegador",bignore:"Ignorar",remind:"Se le recordar\xE1 en {days} d\xEDas.",bnever:"No mostrar de nuevo"},E.et={msg:"Teie veebilehitseja ({brow_name}) on vananenud.",msgmore:"Veebilehitseja uuendamisega kaasneb nii parem turvalisus, kiirus kui ka kasutusmugavus.",bupdate:"Uuenda veebilehitsejat",bignore:"Eira",remind:"Uus meeldetuletus {days} p\xE4eva p\xE4rast.",bnever:"\xC4ra kunagi enam n\xE4ita"},E.fa={msg:"\u0645\u0631\u0648\u0631\u06AF\u0631 \u0634\u0645\u0627 ({brow_name}) \u0642\u062F\u06CC\u0645\u06CC \u0627\u0633\u062A.",msgmore:"\u0628\u0631\u0627\u06CC \u0627\u06CC\u0645\u0646\u06CC\u060C \u0633\u0631\u0639\u062A \u0648 \u062A\u062C\u0631\u0628\u0647 \u0628\u0647\u062A\u0631 \u0645\u0631\u0648\u0631\u06AF\u0631 \u062E\u0648\u062F \u0631\u0627 \u0628\u0647\u200C\u0631\u0648\u0632 \u06A9\u0646\u06CC\u062F.",bupdate:"\u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0645\u0631\u0648\u0631\u06AF\u0631",bignore:"\u0646\u0627\u062F\u06CC\u062F\u0647 \u06AF\u0631\u0641\u062A\u0646",remind:"\u0628\u0647 \u0634\u0645\u0627 \u062A\u0627 {days} \u0631\u0648\u0632 \u062F\u06CC\u06AF\u0631 \u062F\u0648\u0628\u0627\u0631\u0647 \u06CC\u0627\u062F\u200C\u0622\u0648\u0631\u06CC \u062E\u0648\u0627\u0647\u062F \u0634\u062F.",bnever:"\u0647\u0631\u06AF\u0632 \u0646\u0645\u0627\u06CC\u0634 \u0646\u062F\u0647"},E.fi={msg:"Selaimesi ({brow_name}) on vanhentunut.",msgmore:"P\xE4ivit\xE4 selaimesi saadaksesi tietoturvap\xE4ivityksi\xE4, nopeutta sek\xE4 parhaan k\xE4ytt\xF6kokemuksen sivustolla.",bupdate:"P\xE4ivit\xE4 selain",bignore:"Ohita",remind:"Saat uuden muistutuksen {days} p\xE4iv\xE4n p\xE4\xE4st\xE4.",bnever:"\xC4l\xE4 n\xE4yt\xE4 uudestaan"},E.fr={msg:"Votre navigateur Web ({brow_name}) n'est pas \xE0 jour.",msgmore:"Mettez \xE0 jour votre navigateur pour plus de s\xE9curit\xE9 et de rapidit\xE9 et une meilleure exp\xE9rience sur ce site.",bupdate:"Mettre \xE0 jour le navigateur",bignore:"Ignorer",remind:"Vous serez rappel\xE9 dans {days} jours.",bnever:"Ne plus afficher"},E.gl={msg:"T\xE1 an l\xEDonl\xE9itheoir agat ({brow_name}) as d\xE1ta.",msgmore:"Actualiza o teu navegador para obter m\xE1is seguridade, rapidez e mellor experiencia neste sitio.",bupdate:"Actualizar navegador web",bignore:"Ignorar",remind:"Lembraralle en {days} d\xEDas.",bnever:"Non volver mostrar m\xE1is"},E.he={msg:"\u05D3\u05E4\u05D3\u05E4\u05DF ({brow_name}) \u05E9\u05DC\u05DA \u05D0\u05D9\u05E0\u05D5 \u05DE\u05E2\u05D5\u05D3\u05DB\u05DF.",msgmore:"\u05E2\u05D3\u05DB\u05DF/\u05D9 \u05D0\u05EA \u05D4\u05D3\u05E4\u05D3\u05E4\u05DF \u05E9\u05DC\u05DA \u05DC\u05E9\u05D9\u05E4\u05D5\u05E8 \u05D4\u05D0\u05D1\u05D8\u05D7\u05D4 \u05D5\u05D4\u05DE\u05D4\u05D9\u05E8\u05D5\u05EA \u05D5\u05DB\u05D3\u05D9 \u05DC\u05D9\u05D4\u05E0\u05D5\u05EA \u05DE\u05D4\u05D7\u05D5\u05D5\u05D9\u05D4 \u05D4\u05D8\u05D5\u05D1\u05D4 \u05D1\u05D9\u05D5\u05EA\u05E8 \u05D1\u05D0\u05EA\u05E8 \u05D6\u05D4.",bupdate:"\u05E2\u05D3\u05DB\u05DF \u05D3\u05E4\u05D3\u05E4\u05DF",bignore:"\u05D4\u05EA\u05E2\u05DC\u05DD",remind:"\u05EA\u05E7\u05D1\u05DC/\u05D9 \u05EA\u05D6\u05DB\u05D5\u05E8\u05EA \u05D1\u05E2\u05D5\u05D3  {days} \u05D9\u05DE\u05D9\u05DD.",bnever:"\u05D0\u05DC \u05EA\u05E6\u05D9\u05D2 \u05E9\u05D5\u05D1"},E.hi={msg:"\u0906\u092A\u0915\u093E \u0935\u0947\u092C \u092C\u094D\u0930\u093E\u0909\u091C\u093C\u0930 ({brow_name}) \u092A\u0941\u0930\u093E\u0928\u093E \u0939\u0948\u0964",msgmore:"\u0907\u0938 \u0938\u093E\u0907\u091F \u092A\u0930 \u0905\u0927\u093F\u0915 \u0938\u0941\u0930\u0915\u094D\u0937\u093E, \u0917\u0924\u093F \u0914\u0930 \u0938\u0930\u094D\u0935\u094B\u0924\u094D\u0924\u092E \u0905\u0928\u0941\u092D\u0935 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F \u0905\u092A\u0928\u0947 \u092C\u094D\u0930\u093E\u0909\u095B\u0930 \u0915\u094B \u0905\u092A\u0921\u0947\u091F \u0915\u0930\u0947\u0902 \u0964",bupdate:"\u092C\u094D\u0930\u093E\u0909\u091C\u093C\u0930 \u0905\u092A\u0921\u0947\u091F \u0915\u0930\u0947\u0902",bignore:"\u0928\u091C\u0930\u0905\u0902\u0926\u093E\u091C \u0915\u0930\u0947\u0902",remind:"\u0906\u092A\u0915\u094B {days} \u0926\u093F\u0928\u094B\u0902 \u092E\u0947\u0902 \u092F\u093E\u0926 \u0926\u093F\u0932\u093E\u092F\u093E \u091C\u093E\u090F\u0917\u093E\u0964",bnever:"\u092B\u093F\u0930 \u0915\u092D\u0940 \u092E\u0924 \u0926\u093F\u0916\u093E\u0928\u093E"},E.hu={msg:"Az \xD6n webb\xF6ng\xE9sz\u0151je ({brow_name}) elavult.",msgmore:"Friss\xEDtse b\xF6ng\xE9sz\u0151j\xE9t a nagyobb biztons\xE1g, sebess\xE9g \xE9s \xE9lm\xE9ny \xE9rdek\xE9ben!",bupdate:"B\xF6ng\xE9sz\u0151 friss\xEDt\xE9se",bignore:"Mell\u0151z\xE9s",remind:"\xDAjra eml\xE9keztet\xFCnk {days} napon bel\xFCl.",bnever:"Ne mutassa t\xF6bbet"},E.id={msg:"Peramban web ({brow_name}) Anda sudah usang.",msgmore:"Perbarui peramban Anda untuk pengalaman terbaik, lebih aman, dan cepat di situs ini.",bupdate:"Perbarui peramban",bignore:"Abaikan",remind:"Anda akan diingatkan kembali dalam {days} hari.",bnever:"Jangan pernah tampilkan lagi"},E.it={msg:"Il tuo browser ({brow_name}) non \xE8 aggiornato.",msgmore:"Aggiorna il browser per una maggiore sicurezza, velocit\xE0 e la migliore esperienza su questo sito.",bupdate:"Aggiorna browser",bignore:"Ignora",remind:"Riceverai un promemoria tra {days} giorni.",bnever:"Non mostrare di nuovo"},E.ja={msg:"\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6\uFF08{brow_name}\uFF09\u306F\u6700\u65B0\u7248\u3067\u306F\u3042\u308A\u307E\u305B\u3093\u3002",msgmore:"\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u3001\u30B9\u30D4\u30FC\u30C9\u3001\u305D\u3057\u3066\u3053\u306E\u30B5\u30A4\u30C8\u3067\u306E\u6700\u826F\u306E\u4F53\u9A13\u306E\u305F\u3081\u306B\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6\u3092\u66F4\u65B0\u3057\u3066\u304F\u3060\u3055\u3044\u3002",bupdate:"\u30D6\u30E9\u30A6\u30B6\u3092\u66F4\u65B0\u3059\u308B",bignore:"\u7121\u8996\u3059\u308B",remind:"{days} \u65E5\u5F8C\u306B\u3082\u3046\u4E00\u5EA6\u304A\u77E5\u3089\u305B\u3057\u307E\u3059\u3002",bnever:"\u6B21\u56DE\u304B\u3089\u8868\u793A\u3057\u306A\u3044"},E.ko={msg:"\uADC0\uD558\uC758 \uC6F9 \uBE0C\uB77C\uC6B0\uC800({brow_name})\uB294 \uC624\uB798\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",msgmore:"\uC774 \uC0AC\uC774\uD2B8\uC5D0\uC11C \uBCF4\uC548, \uC18D\uB3C4\uC640 \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC744 \uC5BB\uC73C\uB824\uBA74 \uBE0C\uB77C\uC6B0\uC800\uB97C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624.",bupdate:"\uBE0C\uB77C\uC6B0\uC800 \uC5C5\uB370\uC774\uD2B8\uD558\uAE30",bignore:"\uBB34\uC2DC\uD558\uAE30",remind:"{days}\uC77C \uD6C4\uC5D0 \uC54C\uB824 \uB4DC\uB9BD\uB2C8\uB2E4.",bnever:"\uB2E4\uC2DC \uD45C\uC2DC\uD558\uC9C0 \uC54A\uAE30"},E.lt={msg:"J\u016Bs\u0173 nar\u0161ykl\u0117 ({brow_name}) yra pasenusi.",msgmore:"Atsinaujinkite savo nar\u0161ykl\u0119 nor\u0117dami gauti daugiau saugumo, grei\u010Dio ir pa\u010Di\u0173 geriausi\u0173 patir\u010Di\u0173 \u0161ioje svetain\u0117je.",bupdate:"Atnaujinti nar\u0161ykl\u0119",bignore:"Nepaisyti",remind:"Jums bus priminta po {days} dien\u0173.",bnever:"Daugiau niekada nerodyti"},E.lv={msg:"J\u016Bsu p\u0101rl\u016Bkprogramma ({brow_name}) ir novecojusi.",msgmore:"Atjaunojiet savu p\u0101rl\u016Bkprogrammu liel\u0101kai dro\u0161\u012Bbai, \u0101trumam un lab\u0101kai pieredzei ar \u0161o vietni.",bupdate:"Atjaunin\u0101t p\u0101rl\u016Bkprogrammu",bignore:"Ignor\u0113t",remind:"Jums tiks par\u0101d\u012Bts atg\u0101din\u0101jums p\u0113c {days} dien\u0101m.",bnever:"Vairs ner\u0101d\u012Bt"},E.ms={msg:"Pelayar web anda ({brow_name}) sudah lapuk.",msgmore:"Kemas kini pelayar anda untuk lebih keselamatan, kelajuan dan pengalaman terbaik di laman web ini.",bupdate:"Kemas kini pelayar",bignore:"Abaikan",remind:"Anda akan diingatkan dalam {days} hari.",bnever:"Jangan tunjukkan lagi"},E.nl={msg:"Uw webbrowser ({brow_name}) is verouderd.",msgmore:"Update uw browser voor meer veiligheid, snelheid en om deze site optimaal te kunnen gebruiken.",bupdate:"Browser updaten",bignore:"Negeren",remind:"We zullen u er in {days} dagen aan herinneren.",bnever:"Nooit meer tonen"},E.no=E.nn=E.nb={msg:"Nettleseren din ({brow_name}) er utdatert.",msgmore:"Oppdater nettleseren din for \xF8kt sikkerhet, hastighet og den beste opplevelsen p\xE5 dette nettstedet.",bupdate:"Oppdater nettleser",bignore:"Ignorer",remind:"Du vil f\xE5 en p\xE5minnelse om {days} dager.",bnever:"Aldri vis igjen"},E.pl={msg:"Twoja przegl\u0105darka ({brow_name}) jest nieaktualna.",msgmore:"Zaktualizuj przegl\u0105dark\u0119, by korzysta\u0107 z tej strony bezpieczniej, szybciej i po prostu sprawniej.",bupdate:"Aktualizuj przegl\u0105dark\u0119",bignore:"Ignoruj",remind:"Przypomnimy o tym za {days} dni.",bnever:"Nie pokazuj wi\u0119cej"},E.pt={msg:"Seu navegador da web ({brow_name}) est\xE1 desatualizado.",msgmore:"Atualize seu navegador para ter mais seguran\xE7a e velocidade, al\xE9m da melhor experi\xEAncia neste site.",bupdate:"Atualizar navegador",bignore:"Ignorar",remind:"Voc\xEA ser\xE1 relembrado em {days} dias.",bnever:"N\xE3o mostrar novamente"},E.ro={msg:"Browserul t\u0103u ({brow_name}) nu este actualizat.",msgmore:"Actualizeaz\u0103 browserul pentru o mai mare siguran\u021B\u0103, vitez\u0103 \u0219i cea mai bun\u0103 experien\u021B\u0103 pe acest site.",bupdate:"Actualizeaz\u0103 browser",bignore:"Ignor\u0103",remind:"\u021Ai se va reaminti peste {days} zile.",bnever:"Nu mai ar\u0103ta"},E.ru={msg:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 ({brow_name}) \u0443\u0441\u0442\u0430\u0440\u0435\u043B.",msgmore:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u0435 \u0432\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0434\u043B\u044F \u043F\u043E\u0432\u044B\u0448\u0435\u043D\u0438\u044F \u0443\u0440\u043E\u0432\u043D\u044F \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438, \u0441\u043A\u043E\u0440\u043E\u0441\u0442\u0438 \u0438 \u043A\u043E\u043C\u0444\u043E\u0440\u0442\u0430 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u044D\u0442\u043E\u0433\u043E \u0441\u0430\u0439\u0442\u0430.",bupdate:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0431\u0440\u0430\u0443\u0437\u0435\u0440",bignore:"\u0418\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C",remind:"\u0412\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u0435 \u043D\u0430\u043F\u043E\u043C\u0438\u043D\u0430\u043D\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 {days} \u0434\u043D\u0435\u0439.",bnever:"\u0411\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C "},E.sk={msg:"V\xE1\u0161 internetov\xFD prehliada\u010D ({brow_name}) je zastaran\xFD.",msgmore:"Pre v\xE4\u010D\u0161iu bezpe\u010Dnos\u0165, r\xFDchlos\u0165 a lep\u0161iu sk\xFAsenos\u0165 s touto str\xE1nkou si aktualizujte svoj prehliada\u010D.",bupdate:"Aktualizova\u0165 prehliada\u010D",bignore:"Ignorova\u0165",remind:"Bude v\xE1m to pripomenut\xE9 o {days} dn\xED.",bnever:"U\u017E nikdy viac neukazova\u0165"},E.sl={msg:"Va\u0161 spletni brskalnik ({brow_name}) je zastarel.",msgmore:"Posodobite svoj brskalnik za dodatno varnost, hitrost in najbolj\u0161o izku\u0161njo na tem spletnem mestu.",bupdate:"Posodobi brskalnik",bignore:"Prezri",remind:"Opomnik boste prejeli \u010Dez toliko dni: {days}.",bnever:"Ne prika\u017Ei ve\u010D"},E.sq={msg:"Shfletuesi juaj ({brow_name}) \xEBsht\xEB i vjetruar.",msgmore:"P\xEBrdit\xEBsoni shfletuesin tuaj p\xEBr m\xEB tep\xEBr siguri, shpejt\xEBsi dhe p\xEBr m\xEB t\xEB mirin e funksionimeve n\xEB k\xEBt\xEB sajt.",bupdate:"P\xEBrdit\xEBso shfletuesin",bignore:"Shp\xEBrfille",remind:"Do t\u2019ju rikujtohet pas {days} dit\xEBsh.",bnever:"Mos e shfaq kurr\xEB m\xEB"},E.sr={msg:"Va\u0161 pretra\u017Eiva\u010D ({brow_name}) je zastareo.",msgmore:"Ima poznate sigurnosne probleme i najverovatnije ne\u0107e prikazati sve funkcionalnisti ovog i drugih sajtova.",bupdate:"Nadogradi pretra\u017Eiva\u010D",bignore:"Ignorisi",remind:"Zaboravic\u0301ete za {days} dana.",bnever:"Ne prikazuj opet"},E.sv={msg:"Din webbl\xE4sare ({brow_name}) \xE4r f\xF6r\xE5ldrad. ",msgmore:"Uppdatera din webbl\xE4sare f\xF6r mer s\xE4kerhet, hastighet och den b\xE4sta upplevelsen p\xE5 den h\xE4r sajten. ",bupdate:"Uppdatera webbl\xE4saren",bignore:"Ignorera",remind:"Du f\xE5r en p\xE5minnelse om {days} dagar.",bnever:"Visa aldrig igen"},E.th={msg:"\u0E40\u0E27\u0E47\u0E1A\u0E40\u0E1A\u0E23\u0E32\u0E27\u0E4C\u0E40\u0E0B\u0E2D\u0E23\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13 ({brow_name}) \u0E25\u0E49\u0E32\u0E2A\u0E21\u0E31\u0E22\u0E41\u0E25\u0E49\u0E27",msgmore:"\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E17\u0E40\u0E1A\u0E23\u0E32\u0E27\u0E4C\u0E40\u0E0B\u0E2D\u0E23\u0E4C\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E27\u0E32\u0E21\u0E1B\u0E25\u0E2D\u0E14\u0E20\u0E31\u0E22, \u0E04\u0E27\u0E32\u0E21\u0E40\u0E23\u0E47\u0E27 \u0E41\u0E25\u0E30\u0E1B\u0E23\u0E30\u0E2A\u0E1A\u0E01\u0E32\u0E23\u0E13\u0E4C\u0E17\u0E35\u0E48\u0E14\u0E35\u0E17\u0E35\u0E48\u0E2A\u0E38\u0E14\u0E1A\u0E19\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E19\u0E35\u0E49",bupdate:"\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E17\u0E40\u0E1A\u0E23\u0E32\u0E27\u0E4C\u0E40\u0E0B\u0E2D\u0E23\u0E4C",bignore:"\u0E02\u0E49\u0E32\u0E21",remind:"\u0E04\u0E38\u0E13\u0E08\u0E30\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E41\u0E08\u0E49\u0E07\u0E40\u0E15\u0E37\u0E2D\u0E19\u0E43\u0E19 {days} \u0E27\u0E31\u0E19",bnever:"\u0E44\u0E21\u0E48\u0E15\u0E49\u0E2D\u0E07\u0E41\u0E2A\u0E14\u0E07\u0E2D\u0E35\u0E01"},E.tr={msg:"Web taray\u0131c\u0131n\u0131z ({brow_name}) g\xFCncel de\u011Fil.",msgmore:"Daha fazla g\xFCvenlik ve h\u0131z ile bu sitede en iyi deneyim i\xE7in taray\u0131c\u0131n\u0131z\u0131 g\xFCncelleyin.",bupdate:"Taray\u0131c\u0131y\u0131 g\xFCncelle",bignore:"Yok say",remind:"{days} g\xFCn sonra bir hat\u0131rlatma alacaks\u0131n\u0131z.",bnever:"Bir daha g\xF6sterme"},E.uk={msg:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 ({brow_name}) \u0437\u0430\u0441\u0442\u0430\u0440\u0456\u043B\u0438\u0439.",msgmore:"\u041E\u043D\u043E\u0432\u0456\u0442\u044C \u0441\u0432\u0456\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0434\u043B\u044F \u0431\u0456\u043B\u044C\u0448\u043E\u0457 \u0431\u0435\u0437\u043F\u0435\u043A\u0438, \u0448\u0432\u0438\u0434\u043A\u043E\u0441\u0442\u0456 \u0442\u0430 \u043F\u043E\u0432\u043D\u043E\u0446\u0456\u043D\u043D\u043E\u0457 \u0440\u043E\u0431\u043E\u0442\u0438 \u0446\u044C\u043E\u0433\u043E \u0441\u0430\u0439\u0442\u0443.",bupdate:"\u041E\u043D\u043E\u0432\u0438\u0442\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440",bignore:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u0438",remind:"\u0412\u0438 \u043E\u0442\u0440\u0438\u043C\u0430\u0454\u0442\u0435 \u043D\u0430\u0433\u0430\u0434\u0443\u0432\u0430\u043D\u043D\u044F \u0447\u0435\u0440\u0435\u0437 {days} \u0434\u043D\u0456\u0432.",bnever:"\u0411\u0456\u043B\u044C\u0448\u0435 \u043D\u0435 \u043F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438"},E.uz={msg:"Sizning ({brow_name}) veb-brauzeringiz eskirgan",msgmore:"Xavfsizlik, tezkorlik va ushbu sayt imkoniyatlaridan to`liq foydalanish uchun brauzeringizni yangilang.",bupdate:"Brauzeringizni yangilang",bignore:"E\u2019tibor bermaslik",remind:"Sizga {days} kundan so`ng eslatammiz.",bnever:"Hech qachon qayta ko'rsatmang"},E.vi={msg:"Tr\xECnh duy\u1EC7t web c\u1EE7a b\u1EA1n ({brow_name}) \u0111\xE3 l\u1ED7i th\u1EDDi.",msgmore:"C\u1EADp nh\u1EADt tr\xECnh duy\u1EC7t c\u1EE7a b\u1EA1n \u0111\u1EC3 c\xF3 th\xEAm b\u1EA3o m\u1EADt, t\u1ED1c \u0111\u1ED9 v\xE0 tr\u1EA3i nghi\u1EC7m t\u1ED1t nh\u1EA5t tr\xEAn trang web n\xE0y.",bupdate:"C\u1EADp nh\u1EADt tr\xECnh duy\u1EC7t",bignore:"B\u1ECF qua",remind:"B\u1EA1n s\u1EBD \u0111\u01B0\u1EE3c nh\u1EAFc nh\u1EDF sau {days} ng\xE0y.",bnever:"Kh\xF4ng bao gi\u1EDD hi\u1EC3n th\u1ECB l\u1EA1i"},E.zh={msg:"\u60A8\u7684\u7F51\u9875\u6D4F\u89C8\u5668\uFF08{brow_name}\uFF09\u5DF2\u8FC7\u671F\u3002",msgmore:"\u66F4\u65B0\u60A8\u7684\u6D4F\u89C8\u5668\uFF0C\u4EE5\u4FBF\u5728\u8BE5\u7F51\u7AD9\u4E0A\u83B7\u5F97\u66F4\u5B89\u5168\u3001\u66F4\u5FEB\u901F\u548C\u6700\u597D\u7684\u4F53\u9A8C\u3002",bupdate:"\u66F4\u65B0\u6D4F\u89C8\u5668",bignore:"\u5FFD\u7565",remind:"\u4F1A\u5728{days}\u5929\u540E\u63D0\u9192\u60A8\u3002",bnever:"\u4E0D\u518D\u663E\u793A"},E["zh-tw"]=E["zh-hans-cn"]={msg:"\u60A8\u7684\u7DB2\u8DEF\u700F\u89BD\u5668\uFF08{brow_name}\uFF09\u5DF2\u904E\u820A\u3002",msgmore:"\u66F4\u65B0\u60A8\u7684\u700F\u89BD\u5668\u4EE5\u7372\u5F97\u66F4\u4F73\u7684\u5B89\u5168\u6027\u3001\u901F\u5EA6\u4EE5\u53CA\u5728\u6B64\u7DB2\u7AD9\u7684\u6700\u4F73\u9AD4\u9A57\u3002",bupdate:"\u66F4\u65B0\u700F\u89BD\u5668",bignore:"\u5FFD\u7565",remind:"\u60A8\u5C07\u5728 {days} \u5929\u5F8C\u6536\u5230\u63D0\u9192\u3002",bnever:"\u4E0D\u8981\u518D\u986F\u793A"};var O=A["text_for_"+j.n+"_in_"+A.ll]||A["text_for_"+j.n]||A["text_"+A.llfull]||A["text_in_"+A.ll]||A["text_"+A.ll]||A.text;if(E=N=E[A.llfull]||E[A.ll]||E.en,O)if(typeof O=="string")E=N=O;else for(var x in O)N[x]=O[x];A.browser.is_insecure&&N.insecure&&(N.msg=N.insecure),N.msg&&(E='<b class="buorg-mainmsg">'+E.msg+'</b> <span class="buorg-moremsg">'+E.msgmore+'</span> <span class="buorg-buttons"><a{up_but}>'+E.bupdate+"</a> <a{ignore_but}>"+E.bignore+"</a></span>");var I="";A.newwindow&&(I=' target="_blank" rel="noopener"');var _=A.div=document.createElement("div");_.id=_.className="buorg";var S="<style>.buorg-icon {width: 22px; height: 16px; vertical-align: middle; position: relative; top: -0.05em; display: inline-block; background: no-repeat 0px center url(https://browser-update.org/static/img/small/"+j.n+".png);}</style>",u="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:center;  color:#000; background-color: #fff8ea; font: 18px Calibri,Helvetica,sans-serif; box-shadow: 0 0 5px rgba(0,0,0,0.2);animation: buorgfly 1s ease-out 0s;}.buorg-pad { padding: 9px;  line-height: 1.7em; }.buorg-buttons { display: block; text-align: center; }#buorgig,#buorgul,#buorgpermanent { color: #fff; text-decoration: none; cursor:pointer; box-shadow: 0 0 2px rgba(0,0,0,0.4); padding: 1px 10px; border-radius: 4px; font-weight: normal; background: #5ab400;    white-space: nowrap;    margin: 0 2px; display: inline-block;}#buorgig { background-color: #edbc68;}@media only screen and (max-width: 700px){.buorg div { padding:5px 12px 5px 9px; line-height: 1.3em;}}@keyframes buorgfly {from {opacity:0;transform:translateY(-50px)} to {opacity:1;transform:translateY(0px)}}.buorg-fadeout {transition: visibility 0s 8.5s, opacity 8s ease-out .5s;}</style>";N.msg&&(A.ll=="ar"||A.ll=="he"||A.ll=="fa")&&(u+="<style>.buorg {direction:RTL; unicode-bidi:embed;}</style>"),!N.msg&&E.indexOf&&E.indexOf("%s")!==-1?(E=w(E,j.t,' id="buorgul" href="'+A.url+'"'+I),S+="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:left; cursor:pointer; color:#000; font: 13px Arial,sans-serif;color:#000;}.buorg div { padding:5px 36px 5px 40px; }.buorg>div>a,.buorg>div>a:visited{color:#E25600; text-decoration: underline;}#buorgclose{position:absolute;right:6px;top:0px;height:20px;width:12px;font:18px bold;padding:0;}#buorga{display:block;}@media only screen and (max-width: 700px){.buorg div { padding:5px 15px 5px 9px; }}</style>",_.innerHTML="<div>"+E+'<div id="buorgclose"><a id="buorga">&times;</a></div></div>'+S,A.addmargin=!0):(A.style==="bottom"?u+="<style>.buorg {bottom:0; top:auto; border-top:1px solid #A29330; } @keyframes buorgfly {from {opacity:0;transform:translateY(50px)} to {opacity:1;transform:translateY(0px)}}</style>":A.style==="corner"?u+="<style> .buorg { text-align: left; width:300px; top:50px; right:50px; left:auto; border:1px solid #A29330; } .buorg-buttons, .buorg-mainmsg, .buorg-moremsg { display: block; } .buorg-buttons a {margin: 4px 2px;} .buorg-icon {display: none;}</style>":A.addmargin=!0,E=E.replace("{brow_name}",j.t).replace("{up_but}",' id="buorgul" href="'+A.url+'"'+I).replace("{ignore_but}",' id="buorgig" role="button" tabindex="0"'),_.innerHTML='<div class="buorg-pad" role="status" aria-live="polite"><span class="buorg-icon"> </span>'+E+"</div>"+S+u),A.text=E,A.container?(A.container.appendChild(_),A.addmargin=!1):document.body.insertBefore(_,document.body.firstChild);var y=document.getElementById("buorgul");if(y&&(y.onclick=function(V){_.onclick=null,A.onclick(A),!A.noclose&&(A.setCookie(A.reminderClosed),A.noclose||(_.style.display="none",A.addmargin&&A.shift_page_down!==!1&&(v.style.marginTop=A.bodymt)))}),O||(_.style.cursor="pointer",_.onclick=function(){A.newwindow?window.open(A.url,"_blank"):window.location.href=A.url,A.setCookie(A.reminderClosed),A.onclick(A)}),A.addmargin&&A.shift_page_down!==!1){var v=document.getElementsByTagName("html")[0]||document.body;A.bodymt=v.style.marginTop,v.style.marginTop=_.clientHeight+"px"}var m=document.getElementById("buorga")||document.getElementById("buorgig");if(m&&(m.onclick=function(V){return _.onclick=null,A.onclose(A),A.addmargin&&A.shift_page_down!==!1&&(v.style.marginTop=A.bodymt),A.setCookie(A.reminderClosed),!A.no_permanent_hide&&N.bnever&&N.remind?(A.div.innerHTML='<div class="buorg-pad"><span class="buorg-moremsg">'+(A.reminderClosed>24?N.remind.replace("{days}",Math.round(A.reminderClosed/24)):"")+'</span> <span class="buorg-buttons"><a id="buorgpermanent" role="button" tabindex="0" href="'+A.url_permanent_hide+'"'+I+">"+N.bnever+"</a></span></div>"+S+u,_.className="buorg buorg-fadeout",document.getElementById("buorgpermanent").onclick=function(Z){A.setCookie(24*365),A.div.style.display="none"},A.div.style.opacity=0,A.div.style.visibility="hidden",!1):(A.div.style.display="none",!1)},(A.noclose||A.reminderClosed==0)&&m.parentNode.removeChild(m)),A.onshow(A),A.test&&!A.dont_show_debuginfo){var R=document.createElement("script");R.src=A.domain+"/update.test.js",document.body.appendChild(R)}};/**
 * @license
 * Video.js 8.21.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */(function(A,j){typeof exports=="object"&&typeof module<"u"?module.exports=j():typeof define=="function"&&define.amd?define(j):(A=typeof globalThis<"u"?globalThis:A||self).videojs=j()})(this,function(){var A="8.21.0";let j={},M=function(s,t){return j[s]=j[s]||[],t&&(j[s]=j[s].concat(t)),j[s]};function w(s,t){return!((t=M(s).indexOf(t))<=-1||(j[s]=j[s].slice(),j[s].splice(t,1),0))}let E={prefixed:!0};var N=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],O=N[0];let x;for(let s=0;s<N.length;s++)if(N[s][1]in document){x=N[s];break}if(x){for(let s=0;s<x.length;s++)E[O[s]]=x[s];E.prefixed=x[0]!==O[0]}let I=[];function _(s){return R(s)?Object.keys(s):[]}let S=function s(t,i=":",a=""){let o="info",l;function h(...H){l("log",o,H)}var T,B,G;return l=(T=t,G=a,(H,_e,pe)=>{var ae,_e=B.levels[_e],Ce=new RegExp(`^(${_e})$`);let Le=T;if(H!=="log"&&pe.unshift(H.toUpperCase()+":"),G&&(Le="%c"+T,pe.unshift(G)),pe.unshift(Le+":"),I&&(I.push([].concat(pe)),ae=I.length-1e3,I.splice(0,0<ae?ae:0)),window.console){let xe=window.console[H];(xe=xe||H!=="debug"?xe:window.console.info||window.console.log)&&_e&&Ce.test(H)&&xe[Array.isArray(pe)?"apply":"call"](window.console,pe)}}),(B=h).createLogger=(H,se,pe)=>s(t+` ${se=se!==void 0?se:i} `+H,se,pe!==void 0?pe:a),h.createNewLogger=(H,se,pe)=>s(H,se,pe),h.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:o},h.level=H=>{if(typeof H=="string"){if(!h.levels.hasOwnProperty(H))throw new Error(`"${H}" in not a valid log level`);o=H}return o},(h.history=()=>I?[].concat(I):[]).filter=H=>(I||[]).filter(se=>new RegExp(`.*${H}.*`).test(se[0])),h.history.clear=()=>{I&&(I.length=0)},h.history.disable=()=>{I!==null&&(I.length=0,I=null)},h.history.enable=()=>{I===null&&(I=[])},h.error=(...H)=>l("error",o,H),h.warn=(...H)=>l("warn",o,H),h.debug=(...H)=>l("debug",o,H),h}("VIDEOJS"),u=S.createLogger,y=Object.prototype.toString;function v(s,t){_(s).forEach(i=>t(s[i],i))}function m(s,t,i=0){return _(s).reduce((a,o)=>t(a,s[o],o),i)}function R(s){return!!s&&typeof s=="object"}function V(s){return R(s)&&y.call(s)==="[object Object]"&&s.constructor===Object}function Z(...s){let t={};return s.forEach(i=>{i&&v(i,(a,o)=>{V(a)?(V(t[o])||(t[o]={}),t[o]=Z(t[o],a)):t[o]=a})}),t}function ne(s={}){var t,i,a=[];for(t in s)s.hasOwnProperty(t)&&(i=s[t],a.push(i));return a}function ee(s,t,i,a=!0){let o=h=>Object.defineProperty(s,t,{value:h,enumerable:!0,writable:!0});var l={configurable:!0,enumerable:!0,get(){var h=i();return o(h),h}};return a&&(l.set=o),Object.defineProperty(s,t,l)}let z=Object.freeze({__proto__:null,each:v,reduce:m,isObject:R,isPlain:V,merge:Z,values:ne,defineLazyProperty:ee}),P=!1,Y=null,$=!1,J,te=!1,q=!1,K=!1,U=!1,F=null,re=null;var vi=!!(window.cast&&window.cast.framework&&window.cast.framework.CastReceiverContext);let W=null,ie=!1,he=!1,ve=!1,Ne=!1,ze=!1,rt=!1,le=!1,me=!!(We()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch));var De,Me=window.navigator&&window.navigator.userAgentData;if(Me&&Me.platform&&Me.brands&&($=Me.platform==="Android",q=!!Me.brands.find(s=>s.brand==="Microsoft Edge"),K=!!Me.brands.find(s=>s.brand==="Chromium"),U=!q&&K,F=re=(Me.brands.find(s=>s.brand==="Chromium")||{}).version||null,he=Me.platform==="Windows"),!K){let s=window.navigator&&window.navigator.userAgent||"";P=/iPod/i.test(s),Y=(Me=s.match(/OS (\d+)_/i))&&Me[1]?Me[1]:null,$=/Android/i.test(s),J=(Me=s.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(er=Me[1]&&parseFloat(Me[1]),De=Me[2]&&parseFloat(Me[2]),er&&De?parseFloat(Me[1]+"."+Me[2]):er||null):null,te=/Firefox/i.test(s),q=/Edg/i.test(s),K=/Chrome/i.test(s)||/CriOS/i.test(s),U=!q&&K,F=re=(De=s.match(/(Chrome|CriOS)\/(\d+)/))&&De[2]?parseFloat(De[2]):null,W=function(){var t=/MSIE\s(\d+)\.\d/.exec(s);let i=t&&parseFloat(t[1]);return i=!i&&/Trident\/7.0/i.test(s)&&/rv:11.0/.test(s)?11:i}(),ze=/Tizen/i.test(s),rt=/Web0S/i.test(s),le=ze||rt,ie=/Safari/i.test(s)&&!U&&!$&&!q&&!le,he=/Windows/i.test(s),ve=/iPad/i.test(s)||ie&&me&&!/iPhone/i.test(s),Ne=/iPhone/i.test(s)&&!ve}let Re=Ne||ve||P,we=(ie||Re)&&!U;var ke=Object.freeze({__proto__:null,get IS_IPOD(){return P},get IOS_VERSION(){return Y},get IS_ANDROID(){return $},get ANDROID_VERSION(){return J},get IS_FIREFOX(){return te},get IS_EDGE(){return q},get IS_CHROMIUM(){return K},get IS_CHROME(){return U},get CHROMIUM_VERSION(){return F},get CHROME_VERSION(){return re},IS_CHROMECAST_RECEIVER:vi,get IE_VERSION(){return W},get IS_SAFARI(){return ie},get IS_WINDOWS(){return he},get IS_IPAD(){return ve},get IS_IPHONE(){return Ne},get IS_TIZEN(){return ze},get IS_WEBOS(){return rt},get IS_SMART_TV(){return le},TOUCH_ENABLED:me,IS_IOS:Re,IS_ANY_SAFARI:we});function Ve(s){return typeof s=="string"&&!!s.trim()}function We(){return document===window.document}function $e(s){return R(s)&&s.nodeType===1}function ue(){try{return window.parent!==window.self}catch{return!0}}function Se(s){return function(t,i){return Ve(t)?(i=$e(i=Ve(i)?document.querySelector(i):i)?i:document)[s]&&i[s](t):document[s](null)}}function be(s="div",t={},i={},a){let o=document.createElement(s);return Object.getOwnPropertyNames(t).forEach(function(l){var h=t[l];l==="textContent"?Fe(o,h):o[l]===h&&l!=="tabIndex"||(o[l]=h)}),Object.getOwnPropertyNames(i).forEach(function(l){o.setAttribute(l,i[l])}),a&&je(o,a),o}function Fe(s,t){return typeof s.textContent>"u"?s.innerText=t:s.textContent=t,s}function ut(s,t){t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s)}function Pt(s,t){if(0<=t.indexOf(" "))throw new Error("class has illegal whitespace characters");return s.classList.contains(t)}function yt(s,...t){return s.classList.add(...t.reduce((i,a)=>i.concat(a.split(/\s+/)),[])),s}function At(s,...t){return s?(s.classList.remove(...t.reduce((i,a)=>i.concat(a.split(/\s+/)),[])),s):(S.warn("removeClass was called with an element that doesn't exist"),null)}function ri(s,t,i){return typeof(i=typeof i=="function"?i(s,t):i)!="boolean"&&(i=void 0),t.split(/\s+/).forEach(a=>s.classList.toggle(a,i)),s}function $t(s,t){Object.getOwnPropertyNames(t).forEach(function(i){var a=t[i];a===null||typeof a>"u"||a===!1?s.removeAttribute(i):s.setAttribute(i,a===!0?"":a)})}function Rt(s){var t={},i=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(s&&s.attributes&&0<s.attributes.length){var a=s.attributes;for(let l=a.length-1;0<=l;l--){var o=a[l].name;let h=a[l].value;i.includes(o)&&(h=h!==null),t[o]=h}}return t}function zt(s,t){return s.getAttribute(t)}function et(s,t,i){s.setAttribute(t,i)}function ct(s,t){s.removeAttribute(t)}function It(){document.body.focus(),document.onselectstart=function(){return!1}}function at(){document.onselectstart=function(){return!0}}function vt(s){if(s&&s.getBoundingClientRect&&s.parentNode){let t=s.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(a=>{t[a]!==void 0&&(i[a]=t[a])}),i.height||(i.height=parseFloat(ot(s,"height"))),i.width||(i.width=parseFloat(ot(s,"width"))),i}}function Ke(s){if(!s||!s.offsetParent)return{left:0,top:0,width:0,height:0};var t=s.offsetWidth,i=s.offsetHeight;let a=0,o=0;for(;s.offsetParent&&s!==document[E.fullscreenElement];)a+=s.offsetLeft,o+=s.offsetTop,s=s.offsetParent;return{left:a,top:o,width:t,height:i}}function Je(T,t){var i={x:0,y:0};if(Re){let pe=T;for(;pe&&pe.nodeName.toLowerCase()!=="html";){var a,o=ot(pe,"transform");/^matrix/.test(o)?(a=o.slice(7,-1).split(/,\s/).map(Number),i.x+=a[4],i.y+=a[5]):/^matrix3d/.test(o)&&(a=o.slice(9,-1).split(/,\s/).map(Number),i.x+=a[12],i.y+=a[13]),pe.assignedSlot&&pe.assignedSlot.parentElement&&window.WebKitCSSMatrix&&(o=window.getComputedStyle(pe.assignedSlot.parentElement).transform,o=new window.WebKitCSSMatrix(o),i.x+=o.m41,i.y+=o.m42),pe=pe.parentNode||pe.host}}var l={},h=Ke(t.target),T=Ke(T),B=T.width,G=T.height;let H=t.offsetY-(T.top-h.top),se=t.offsetX-(T.left-h.left);return t.changedTouches&&(se=t.changedTouches[0].pageX-T.left,H=t.changedTouches[0].pageY+T.top,Re)&&(se-=i.x,H-=i.y),l.y=1-Math.max(0,Math.min(1,H/G)),l.x=Math.max(0,Math.min(1,se/B)),l}function ei(s){return R(s)&&s.nodeType===3}function ki(s){for(;s.firstChild;)s.removeChild(s.firstChild);return s}function ti(s){return typeof s=="function"&&(s=s()),(Array.isArray(s)?s:[s]).map(t=>$e(t=typeof t=="function"?t():t)||ei(t)?t:typeof t=="string"&&/\S/.test(t)?document.createTextNode(t):void 0).filter(t=>t)}function je(s,t){return ti(t).forEach(i=>s.appendChild(i)),s}function Xe(s,t){return je(ki(s),t)}function _t(s){return s.button===void 0&&s.buttons===void 0||s.button===0&&s.buttons===void 0||s.type==="mouseup"&&s.button===0&&s.buttons===0||s.type==="mousedown"&&s.button===0&&s.buttons===0||s.button===0&&s.buttons===1}let fe=Se("querySelector"),tt=Se("querySelectorAll");function ot(s,t){if(!s||!t||typeof window.getComputedStyle!="function")return"";{let i;try{i=window.getComputedStyle(s)}catch{return""}return i?i.getPropertyValue(t)||i[t]:""}}function Oe(s){[...document.styleSheets].forEach(t=>{try{var i=[...t.cssRules].map(o=>o.cssText).join(""),a=document.createElement("style");a.textContent=i,s.document.head.appendChild(a)}catch{i=document.createElement("link"),i.rel="stylesheet",i.type=t.type,i.media=t.media.mediaText,i.href=t.href,s.document.head.appendChild(i)}})}var Qe=Object.freeze({__proto__:null,isReal:We,isEl:$e,isInFrame:ue,createEl:be,textContent:Fe,prependTo:ut,hasClass:Pt,addClass:yt,removeClass:At,toggleClass:ri,setAttributes:$t,getAttributes:Rt,getAttribute:zt,setAttribute:et,removeAttribute:ct,blockTextSelection:It,unblockTextSelection:at,getBoundingClientRect:vt,findPosition:Ke,getPointerPosition:Je,isTextNode:ei,emptyEl:ki,normalizeContent:ti,appendContent:je,insertContent:Xe,isSingleLeftClick:_t,$:fe,$$:tt,computedStyle:ot,copyStyleSheetsToWindow:Oe});function de(){if(bt.options.autoSetup!==!1){var s=Array.prototype.slice.call(document.getElementsByTagName("video")),t=Array.prototype.slice.call(document.getElementsByTagName("audio")),i=Array.prototype.slice.call(document.getElementsByTagName("video-js")),a=s.concat(t,i);if(a&&0<a.length)for(let l=0,h=a.length;l<h;l++){var o=a[l];if(!o||!o.getAttribute){Q(1);break}o.player===void 0&&o.getAttribute("data-setup")!==null&&bt(o)}else nt||Q(1)}}let nt=!1,bt;function Q(s,t){We()&&(t&&(bt=t),window.setTimeout(de,s))}function qe(){nt=!0,window.removeEventListener("load",qe)}We()&&(document.readyState==="complete"?qe():window.addEventListener("load",qe));function Ye(s){var t=document.createElement("style");return t.className=s,t}function ye(s,t){s.styleSheet?s.styleSheet.cssText=t:s.textContent=t}var Ee=new WeakMap;let Be=3;function St(s,t){var i;Ee.has(s)&&((i=Ee.get(s)).handlers[t].length===0&&(delete i.handlers[t],s.removeEventListener?s.removeEventListener(t,i.dispatcher,!1):s.detachEvent&&s.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),Object.getOwnPropertyNames(i).length===0)&&Ee.delete(s)}function pt(s,t,i,a){i.forEach(function(o){s(t,o,a)})}function gt(s){if(!s.fixed_){if(!s||!s.isPropagationStopped||!s.isImmediatePropagationStopped){let T=s||window.event;s={};var t,i,a,o=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(t in T)o.includes(t)||t==="returnValue"&&T.preventDefault||(s[t]=T[t]);s.target||(s.target=s.srcElement||document),s.relatedTarget||(s.relatedTarget=s.fromElement===s.target?s.toElement:s.fromElement),s.preventDefault=function(){T.preventDefault&&T.preventDefault(),s.returnValue=!1,T.returnValue=!1,s.defaultPrevented=!0},s.defaultPrevented=!1,s.stopPropagation=function(){T.stopPropagation&&T.stopPropagation(),s.cancelBubble=!0,T.cancelBubble=!0,s.isPropagationStopped=l},s.isPropagationStopped=h,s.stopImmediatePropagation=function(){T.stopImmediatePropagation&&T.stopImmediatePropagation(),s.isImmediatePropagationStopped=l,s.stopPropagation()},s.isImmediatePropagationStopped=h,s.clientX!=null&&(i=document.documentElement,a=document.body,s.pageX=s.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),s.pageY=s.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)),s.which=s.charCode||s.keyCode,s.button!=null&&(s.button=1&s.button?0:4&s.button?1:2&s.button?2:0)}s.fixed_=!0}return s;function l(){return!0}function h(){return!1}}let qt,Yn=["touchstart","touchmove"];function Vt(s,t,i){if(Array.isArray(t))return pt(Vt,s,t,i);Ee.has(s)||Ee.set(s,{});let a=Ee.get(s);if(a.handlers||(a.handlers={}),a.handlers[t]||(a.handlers[t]=[]),i.guid||(i.guid=Be++),a.handlers[t].push(i),a.dispatcher||(a.disabled=!1,a.dispatcher=function(o,l){if(!a.disabled){o=gt(o);var h=a.handlers[o.type];if(h){var T=h.slice(0);for(let B=0,G=T.length;B<G&&!o.isImmediatePropagationStopped();B++)try{T[B].call(s,o,l)}catch(H){S.error(H)}}}}),a.handlers[t].length===1)if(s.addEventListener){let o=!1;(function(){if(typeof qt!="boolean"){qt=!1;try{var l=Object.defineProperty({},"passive",{get(){qt=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{}}return qt})()&&-1<Yn.indexOf(t)&&(o={passive:!0}),s.addEventListener(t,a.dispatcher,o)}else s.attachEvent&&s.attachEvent("on"+t,a.dispatcher)}function kt(s,t,i){if(Ee.has(s)){let h=Ee.get(s);if(h.handlers){if(Array.isArray(t))return pt(kt,s,t,i);var a=function(T,B){h.handlers[B]=[],St(T,B)};if(t===void 0)for(var o in h.handlers)Object.prototype.hasOwnProperty.call(h.handlers||{},o)&&a(s,o);else{var l=h.handlers[t];if(l)if(i){if(i.guid)for(let T=0;T<l.length;T++)l[T].guid===i.guid&&l.splice(T--,1);St(s,t)}else a(s,t)}}}}function oi(s,t,i){var a=Ee.has(s)?Ee.get(s):{},o=s.parentNode||s.ownerDocument;return typeof t=="string"?t={type:t,target:s}:t.target||(t.target=s),t=gt(t),a.dispatcher&&a.dispatcher.call(s,t,i),o&&!t.isPropagationStopped()&&t.bubbles===!0?oi.call(null,o,t,i):!o&&!t.defaultPrevented&&t.target&&t.target[t.type]&&(Ee.has(t.target)||Ee.set(t.target,{}),a=Ee.get(t.target),t.target[t.type])&&(a.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),a.disabled=!1),!t.defaultPrevented}function Si(s,t,i){if(Array.isArray(t))return pt(Si,s,t,i);function a(){kt(s,t,a),i.apply(this,arguments)}a.guid=i.guid=i.guid||Be++,Vt(s,t,a)}function Pi(s,t,i){function a(){kt(s,t,a),i.apply(this,arguments)}a.guid=i.guid=i.guid||Be++,Vt(s,t,a)}var hr=Object.freeze({__proto__:null,fixEvent:gt,on:Vt,off:kt,trigger:oi,one:Si,any:Pi});function Kt(s,t,i){return t.guid||(t.guid=Be++),(s=t.bind(s)).guid=i?i+"_"+t.guid:t.guid,s}function Yt(s,t){let i=window.performance.now();return function(...a){var o=window.performance.now();o-i>=t&&(s(...a),i=o)}}function Hi(s,t,i,a=window){let o;function l(){let h=this,T=arguments,B=function(){o=null,B=null,i||s.apply(h,T)};!o&&i&&s.apply(h,T),a.clearTimeout(o),o=a.setTimeout(B,t)}return l.cancel=()=>{a.clearTimeout(o),o=null},l}let Ai=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:Kt,throttle:Yt,debounce:Hi}),qi;class ci{on(t,i){var a=this.addEventListener;this.addEventListener=()=>{},Vt(this,t,i),this.addEventListener=a}off(t,i){kt(this,t,i)}one(t,i){var a=this.addEventListener;this.addEventListener=()=>{},Si(this,t,i),this.addEventListener=a}any(t,i){var a=this.addEventListener;this.addEventListener=()=>{},Pi(this,t,i),this.addEventListener=a}trigger(t){var i=t.type||t;t=gt(t=typeof t=="string"?{type:i}:t),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](t),oi(this,t)}queueTrigger(t){qi=qi||new Map;let i=t.type||t,a=qi.get(this);a||(a=new Map,qi.set(this,a));var o=a.get(i),o=(a.delete(i),window.clearTimeout(o),window.setTimeout(()=>{a.delete(i),a.size===0&&(a=null,qi.delete(this)),this.trigger(t)},0));a.set(i,o)}}ci.prototype.allowedEvents_={},ci.prototype.addEventListener=ci.prototype.on,ci.prototype.removeEventListener=ci.prototype.off,ci.prototype.dispatchEvent=ci.prototype.trigger;let Zn=s=>typeof s.name=="function"?s.name():typeof s.name=="string"?s.name:s.name_||(s.constructor&&s.constructor.name?s.constructor.name:typeof s),On=s=>s instanceof ci||!!s.eventBusEl_&&["on","one","off","trigger"].every(t=>typeof s[t]=="function"),qa=s=>typeof s=="string"&&/\S/.test(s)||Array.isArray(s)&&!!s.length,js=(s,t,i)=>{if(!s||!s.nodeName&&!On(s))throw new Error(`Invalid target for ${Zn(t)}#${i}; must be a DOM node or evented object.`)},ql=(s,t,i)=>{if(!qa(s))throw new Error(`Invalid event type for ${Zn(t)}#${i}; must be a non-empty string or array.`)},Vl=(s,t,i)=>{if(typeof s!="function")throw new Error(`Invalid listener for ${Zn(t)}#${i}; must be a function.`)},Va=(s,t,i)=>{var a=t.length<3||t[0]===s||t[0]===s.eventBusEl_;let o,l,h;return a?(o=s.eventBusEl_,3<=t.length&&t.shift(),[l,h]=t):(o=t[0],l=t[1],h=t[2]),js(o,s,i),ql(l,s,i),Vl(h,s,i),h=Kt(s,h),{isTargetingSelf:a,target:o,type:l,listener:h}},Qn=(s,t,i,a)=>{js(s,s,t),s.nodeName?hr[t](s,i,a):s[t](i,a)},ip={on(...s){let{isTargetingSelf:t,target:i,type:a,listener:o}=Va(this,s,"on");if(Qn(i,"on",a,o),!t){let l=()=>this.off(i,a,o);l.guid=o.guid,s=()=>this.off("dispose",l),s.guid=o.guid,Qn(this,"on","dispose",l),Qn(i,"on","dispose",s)}},one(...s){let{isTargetingSelf:t,target:i,type:a,listener:o}=Va(this,s,"one");if(t)Qn(i,"one",a,o);else{let l=(...h)=>{this.off(i,a,l),o.apply(null,h)};l.guid=o.guid,Qn(i,"one",a,l)}},any(...s){let{isTargetingSelf:t,target:i,type:a,listener:o}=Va(this,s,"any");if(t)Qn(i,"any",a,o);else{let l=(...h)=>{this.off(i,a,l),o.apply(null,h)};l.guid=o.guid,Qn(i,"any",a,l)}},off(s,t,i){!s||qa(s)?kt(this.eventBusEl_,s,t):(s=s,t=t,js(s,this,"off"),ql(t,this,"off"),Vl(i,this,"off"),i=Kt(this,i),this.off("dispose",i),s.nodeName?(kt(s,t,i),kt(s,"dispose",i)):On(s)&&(s.off(t,i),s.off("dispose",i)))},trigger(s,t){js(this.eventBusEl_,this,"trigger");var i=s&&typeof s!="string"?s.type:s;if(qa(i))return oi(this.eventBusEl_,s,t);throw new Error(`Invalid event type for ${Zn(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`)}};function Wa(s,t={}){if(t=t.eventBusKey,t){if(!s[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);s.eventBusEl_=s[t]}else s.eventBusEl_=be("span",{className:"vjs-event-bus"});Object.assign(s,ip),s.eventedCallbacks&&s.eventedCallbacks.forEach(i=>{i()}),s.on("dispose",()=>{s.off(),[s,s.el_,s.eventBusEl_].forEach(function(i){i&&Ee.has(i)&&Ee.delete(i)}),window.setTimeout(()=>{s.eventBusEl_=null},0)})}let np={state:{},setState(s){typeof s=="function"&&(s=s());let t;return v(s,(i,a)=>{this.state[a]!==i&&((t=t||{})[a]={from:this.state[a],to:i}),this.state[a]=i}),t&&On(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Wl(s,t){Object.assign(s,np),s.state=Object.assign({},s.state,t),typeof s.handleStateChanged=="function"&&On(s)&&s.on("statechanged",s.handleStateChanged)}function Qr(s){return typeof s!="string"?s:s.replace(/./,t=>t.toLowerCase())}function _i(s){return typeof s!="string"?s:s.replace(/./,t=>t.toUpperCase())}function Xl(s,t){return _i(s)===_i(t)}let rp=Object.freeze({__proto__:null,toLowerCase:Qr,toTitleCase:_i,titleCaseEquals:Xl});class Ze{constructor(t,i,a){!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Z({},this.options_),i=this.options_=Z(this.options_,i),this.id_=i.id||i.el&&i.el.id,this.id_||(t=t&&t.id&&t.id()||"no_player",this.id_=t+"_component_"+Be++),this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(o=>this.addClass(o)),["on","off","one","any","trigger"].forEach(o=>{this[o]=void 0}),i.evented!==!1&&(Wa(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Wl(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,(this.clearingTimersOnDispose_=!1)!==i.initChildren&&this.initChildren(),this.ready(a),i.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(t={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let i=this.children_.length-1;0<=i;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(t.restoreEl?this.el_.parentNode.replaceChild(t.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(t){return t&&(this.options_=Z(this.options_,t)),this.options_}el(){return this.el_}createEl(t,i,a){return be(t,i,a)}localize(t,i,a=t){var l=this.player_.language&&this.player_.language(),h=this.player_.languages&&this.player_.languages(),o=h&&h[l],l=l&&l.split("-")[0],h=h&&h[l];let T=a;return o&&o[t]?T=o[t]:h&&h[t]&&(T=h[t]),T=i?T.replace(/\{(\d+)\}/g,function(B,G){return G=i[G-1],typeof G>"u"?B:G}):T}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(t){return this.childIndex_[t]}getChild(t){if(t)return this.childNameIndex_[t]}getDescendant(...t){t=t.reduce((a,o)=>a.concat(o),[]);let i=this;for(let a=0;a<t.length;a++)if(!(i=i.getChild(t[a]))||!i.getChild)return;return i}setIcon(t,i=this.el()){var a,o,l;if(this.player_.options_.experimentalSvgIcons)return l="http://www.w3.org/2000/svg",a=be("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),(o=document.createElementNS(l,"svg")).setAttributeNS(null,"viewBox","0 0 512 512"),l=document.createElementNS(l,"use"),o.appendChild(l),l.setAttributeNS(null,"href","#vjs-icon-"+t),a.appendChild(o),this.iconIsSet_?i.replaceChild(a,i.querySelector(".vjs-icon-placeholder")):i.appendChild(a),this.iconIsSet_=!0,a}addChild(t,i={},a=this.children_.length){let o,l;if(typeof t=="string"){l=_i(t);var h=i.componentClass||l,T=(i.name=l,Ze.getComponent(h));if(!T)throw new Error(`Component ${h} does not exist`);if(typeof T!="function")return null;o=new T(this.player_||this,i)}else o=t;if(o.parentComponent_&&o.parentComponent_.removeChild(o),this.children_.splice(a,0,o),o.parentComponent_=this,typeof o.id=="function"&&(this.childIndex_[o.id()]=o),(l=l||o.name&&_i(o.name()))&&(this.childNameIndex_[l]=o,this.childNameIndex_[Qr(l)]=o),typeof o.el=="function"&&o.el()){let B=null;this.children_[a+1]&&(this.children_[a+1].el_?B=this.children_[a+1].el_:$e(this.children_[a+1])&&(B=this.children_[a+1])),this.contentEl().insertBefore(o.el(),B)}return o}removeChild(t){if((t=typeof t=="string"?this.getChild(t):t)&&this.children_){let a=!1;for(let o=this.children_.length-1;0<=o;o--)if(this.children_[o]===t){a=!0,this.children_.splice(o,1);break}var i;a&&(t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[_i(t.name())]=null,this.childNameIndex_[Qr(t.name())]=null,i=t.el())&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}initChildren(){let t=this.options_.children;if(t){let i=this.options_,a,o=Ze.getComponent("Tech");(a=Array.isArray(t)?t:Object.keys(t)).concat(Object.keys(this.options_).filter(function(l){return!a.some(function(h){return typeof h=="string"?l===h:l===h.name})})).map(l=>{let h,T;return T=typeof l=="string"?(h=l,t[h]||this.options_[h]||{}):(h=l.name,l),{name:h,opts:T}}).filter(l=>(l=Ze.getComponent(l.opts.componentClass||_i(l.name)),l&&!o.isTech(l))).forEach(l=>{var h=l.name;let T=l.opts;(T=i[h]!==void 0?i[h]:T)!==!1&&((T=T===!0?{}:T).playerOptions=this.options_.playerOptions,l=this.addChild(h,T))&&(this[h]=l)})}}buildCSSClass(){return""}ready(t,i=!1){t&&(this.isReady_?i?t.call(this):this.setTimeout(t,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(t)))}triggerReady(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&0<t.length&&t.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)}$(t,i){return fe(t,i||this.contentEl())}$$(t,i){return tt(t,i||this.contentEl())}hasClass(t){return Pt(this.el_,t)}addClass(...t){yt(this.el_,...t)}removeClass(...t){At(this.el_,...t)}toggleClass(t,i){ri(this.el_,t,i)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(t){return zt(this.el_,t)}setAttribute(t,i){et(this.el_,t,i)}removeAttribute(t){ct(this.el_,t)}width(t,i){return this.dimension("width",t,i)}height(t,i){return this.dimension("height",t,i)}dimensions(t,i){this.width(t,!0),this.height(i)}dimension(t,i,a){var o,l;if(i===void 0)return this.el_?(l=(o=this.el_.style[t]).indexOf("px"))!==-1?parseInt(o.slice(0,l),10):parseInt(this.el_["offset"+_i(t)],10):0;(""+(i=i!==null&&i==i?i:0)).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[t]=i:this.el_.style[t]=i==="auto"?"":i+"px",a||this.trigger("componentresize")}currentDimension(t){let i=0;if(t!=="width"&&t!=="height")throw new Error("currentDimension only accepts width or height value");return i=ot(this.el_,t),(i=parseFloat(i))!==0&&!isNaN(i)||(t="offset"+_i(t),i=this.el_[t]),i}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){var t=this.el_.getBoundingClientRect();return{boundingClientRect:{x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left},center:{x:t.left+t.width/2,y:t.top+t.height/2,width:0,height:0,top:t.top+t.height/2,right:t.left+t.width/2,bottom:t.top+t.height/2,left:t.left+t.width/2}}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(t){this.player_&&(t.key==="Tab"||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||t.stopPropagation(),this.player_.handleKeyDown(t))}handleKeyPress(t){this.handleKeyDown(t)}emitTapEvents(){let t=0,i=null,a;this.on("touchstart",function(l){l.touches.length===1&&(i={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},t=window.performance.now(),a=!0)}),this.on("touchmove",function(l){var h;(1<l.touches.length||i&&(h=l.touches[0].pageX-i.pageX,l=l.touches[0].pageY-i.pageY,10<Math.sqrt(h*h+l*l)))&&(a=!1)});function o(){a=!1}this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(l){!(i=null)===a&&window.performance.now()-t<200&&(l.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(this.player()&&this.player().reportUserActivity){let i=Kt(this.player(),this.player().reportUserActivity),a;this.on("touchstart",function(){i(),this.clearInterval(a),a=this.setInterval(i,250)});var t=function(o){i(),this.clearInterval(a)};this.on("touchmove",i),this.on("touchend",t),this.on("touchcancel",t)}}setTimeout(t,i){var a;return t=Kt(this,t),this.clearTimersOnDispose_(),a=window.setTimeout(()=>{this.setTimeoutIds_.has(a)&&this.setTimeoutIds_.delete(a),t()},i),this.setTimeoutIds_.add(a),a}clearTimeout(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),window.clearTimeout(t)),t}setInterval(t,i){return t=Kt(this,t),this.clearTimersOnDispose_(),t=window.setInterval(t,i),this.setIntervalIds_.add(t),t}clearInterval(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),window.clearInterval(t)),t}requestAnimationFrame(t){var i;return this.clearTimersOnDispose_(),t=Kt(this,t),i=window.requestAnimationFrame(()=>{this.rafIds_.has(i)&&this.rafIds_.delete(i),t()}),this.rafIds_.add(i),i}requestNamedAnimationFrame(t,i){this.namedRafs_.has(t)&&this.cancelNamedAnimationFrame(t),this.clearTimersOnDispose_(),i=Kt(this,i);var a=this.requestAnimationFrame(()=>{i(),this.namedRafs_.has(t)&&this.namedRafs_.delete(t)});return this.namedRafs_.set(t,a),t}cancelNamedAnimationFrame(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))}cancelAnimationFrame(t){return this.rafIds_.has(t)&&(this.rafIds_.delete(t),window.cancelAnimationFrame(t)),t}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([t,i])=>{this[t].forEach((a,o)=>this[i](o))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(t){return 0<=(t||this.el_).tabIndex&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(t){function i(l){var l=window.getComputedStyle(l,null),h=l.getPropertyValue("visibility");return l.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(h)}var a;return!(!function(o){if(o.offsetWidth+o.offsetHeight+o.getBoundingClientRect().height+o.getBoundingClientRect().width!==0){var l={x:o.getBoundingClientRect().left+o.offsetWidth/2,y:o.getBoundingClientRect().top+o.offsetHeight/2};if(!(l.x<0||l.x>(document.documentElement.clientWidth||window.innerWidth)||l.y<0||l.y>(document.documentElement.clientHeight||window.innerHeight))){let h=document.elementFromPoint(l.x,l.y);for(;h;){if(h===o)return 1;if(!h.parentNode)return;h=h.parentNode}}}}(t=t||this.el())||!i((a=t).parentElement)||!i(a)||a.style.opacity==="0"||window.getComputedStyle(a).height==="0px"||window.getComputedStyle(a).width==="0px"||t.parentElement&&!(0<=t.tabIndex))}static registerComponent(t,i){if(typeof t!="string"||!t)throw new Error(`Illegal component name, "${t}"; must be a non-empty string.`);var a=Ze.getComponent("Tech"),a=a&&a.isTech(i),o=Ze===i||Ze.prototype.isPrototypeOf(i.prototype);if(a||!o){let l;throw l=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${t}"; ${l}.`)}if(t=_i(t),Ze.components_||(Ze.components_={}),o=Ze.getComponent("Player"),t==="Player"&&o&&o.players){let l=o.players;if(a=Object.keys(l),l&&0<a.length&&a.map(h=>l[h]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Ze.components_[t]=i,Ze.components_[Qr(t)]=i}static getComponent(t){if(t&&Ze.components_)return Ze.components_[t]}}function Gl(s,t,i,a){var o=a,l=i.length-1;if(typeof o!="number"||o<0||l<o)throw new Error(`Failed to execute '${s}' on 'TimeRanges': The index provided (${o}) is non-numeric or out of bounds (0-${l}).`);return i[a][t]}function Xa(s){let t;return t=s===void 0||s.length===0?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:s.length,start:Gl.bind(null,"start",0,s),end:Gl.bind(null,"end",1,s)},window.Symbol&&window.Symbol.iterator&&(t[window.Symbol.iterator]=()=>(s||[]).values()),t}function hn(s,t){return Array.isArray(s)?Xa(s):s===void 0||t===void 0?Xa():Xa([[s,t]])}Ze.registerComponent("Component",Ze);function $l(s,h){s=s<0?0:s;let i=Math.floor(s%60),a=Math.floor(s/60%60),o=Math.floor(s/3600);var l=Math.floor(h/60%60),h=Math.floor(h/3600);return o=0<(o=!isNaN(s)&&s!==1/0?o:a=i="-")||0<h?o+":":"",a=((o||10<=l)&&a<10?"0"+a:a)+":",i=i<10?"0"+i:i,o+a+i}let Ga=$l;function Kl(s){Ga=s}function Yl(){Ga=$l}function Jn(s,t=s){return Ga(s,t)}Me=Object.freeze({__proto__:null,createTimeRanges:hn,createTimeRange:hn,setFormatTime:Kl,resetFormatTime:Yl,formatTime:Jn});function Zl(s,t){let i=0;var a;let o;if(!t)return 0;s&&s.length||(s=hn(0,0));for(let l=0;l<s.length;l++)a=s.start(l),(o=s.end(l))>t&&(o=t),i+=o-a;return i/t}function yi(s){if(s instanceof yi)return s;typeof s=="number"?this.code=s:typeof s=="string"?this.message=s:R(s)&&(typeof s.code=="number"&&(this.code=s.code),Object.assign(this,s)),this.message||(this.message=yi.defaultMessages[this.code]||"")}function Jr(s){return s!=null&&typeof s.then=="function"}function vn(s){Jr(s)&&s.then(null,t=>{})}yi.prototype.code=0,yi.prototype.message="",yi.prototype.status=null,yi.prototype.metadata=null,yi.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],yi.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},yi.MEDIA_ERR_CUSTOM=0,yi.prototype.MEDIA_ERR_CUSTOM=0,yi.MEDIA_ERR_ABORTED=1,yi.prototype.MEDIA_ERR_ABORTED=1,yi.MEDIA_ERR_NETWORK=2,yi.prototype.MEDIA_ERR_NETWORK=2,yi.MEDIA_ERR_DECODE=3,yi.prototype.MEDIA_ERR_DECODE=3,yi.MEDIA_ERR_SRC_NOT_SUPPORTED=4,yi.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,yi.MEDIA_ERR_ENCRYPTED=5,yi.prototype.MEDIA_ERR_ENCRYPTED=5;function $a(s){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,i,a)=>(s[i]&&(t[i]=s[i]),t),{cues:s.cues&&Array.prototype.map.call(s.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})}var Ql,sp=function(s){var t=s.$$("track");let i=Array.prototype.map.call(t,a=>a.track);return Array.prototype.map.call(t,function(a){var o=$a(a.track);return a.src&&(o.src=a.src),o}).concat(Array.prototype.filter.call(s.textTracks(),function(a){return i.indexOf(a)===-1}).map($a))},ap=function(s,t){return s.forEach(function(i){let a=t.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(o=>a.addCue(o))}),t.textTracks()};let Ka="vjs-modal-dialog";class pr extends Ze{constructor(t,i){super(t,i),this.handleKeyDown_=a=>this.handleKeyDown(a),this.close_=a=>this.close(a),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=be("div",{className:Ka+"-content"},{role:"document"}),this.descEl_=be("p",{className:Ka+"-description vjs-control-text",id:this.el().getAttribute("aria-describedby")}),Fe(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return Ka+" vjs-hidden "+super.buildCSSClass()}label(){return this.localize(this.options_.label||"Modal Window")}description(){let t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t}open(){var t;this.opened_?this.options_.fillAlways&&this.fill():(t=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)}opened(t){return typeof t=="boolean"&&this[t?"open":"close"](),this.opened_}close(){var t;this.opened_&&(t=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary)&&this.dispose()}closeable(t){if(typeof t=="boolean"){var i,t=this.closeable_=!!t;let o=this.getChild("closeButton");t&&!o&&(i=this.contentEl_,this.contentEl_=this.el_,o=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(o,"close",this.close_)),!t&&o&&(this.off(o,"close",this.close_),this.removeChild(o),o.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(l){var i=this.contentEl(),a=i.parentNode,o=i.nextSibling,l=(this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(i),this.empty(),Xe(i,l),this.trigger("modalfill"),o?a.insertBefore(i,o):a.appendChild(i),this.getChild("closeButton"));l&&a.appendChild(l.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),ki(this.contentEl()),this.trigger("modalempty")}content(t){return typeof t<"u"&&(this.content_=t),this.content_}conditionalFocus_(){var t=document.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,!i.contains(t)&&i!==t||(this.previouslyActiveEl_=t,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(t){if(this.trigger({type:"modalKeydown",originalEvent:t,target:this,bubbles:!0}),t.stopPropagation(),t.key==="Escape"&&this.closeable())t.preventDefault(),this.close();else if(t.key==="Tab"){var i=this.focusableEls_(),a=this.el_.querySelector(":focus");let o;for(let l=0;l<i.length;l++)if(a===i[l]){o=l;break}document.activeElement===this.el_&&(o=0),t.shiftKey&&o===0?(i[i.length-1].focus(),t.preventDefault()):t.shiftKey||o!==i.length-1||(i[0].focus(),t.preventDefault())}}focusableEls_(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,i=>(i instanceof window.HTMLAnchorElement||i instanceof window.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof window.HTMLInputElement||i instanceof window.HTMLSelectElement||i instanceof window.HTMLTextAreaElement||i instanceof window.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof window.HTMLIFrameElement||i instanceof window.HTMLObjectElement||i instanceof window.HTMLEmbedElement||i.hasAttribute("tabindex")&&i.getAttribute("tabindex")!==-1||i.hasAttribute("contenteditable"))}}pr.prototype.options_={pauseOnOpen:!0,temporary:!0},Ze.registerComponent("ModalDialog",pr);class es extends ci{constructor(t=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let i=0;i<t.length;i++)this.addTrack(t[i])}addTrack(t){let i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.tracks_[i]}}),this.tracks_.indexOf(t)===-1&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=()=>{this.trigger({track:t,type:"labelchange",target:this})},On(t)&&t.addEventListener("labelchange",t.labelchange_)}removeTrack(t){let i;for(let a=0,o=this.length;a<o;a++)if(this[a]===t){(i=this[a]).off&&i.off(),this.tracks_.splice(a,1);break}i&&this.trigger({track:i,type:"removetrack",target:this})}getTrackById(t){let i=null;for(let o=0,l=this.length;o<l;o++){var a=this[o];if(a.id===t){i=a;break}}return i}}for(Ql in es.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"})es.prototype["on"+Ql]=null;function Ya(s,t){for(let i=0;i<s.length;i++)Object.keys(s[i]).length&&t.id!==s[i].id&&(s[i].enabled=!1)}class op extends es{constructor(t=[]){for(let i=t.length-1;0<=i;i--)if(t[i].enabled){Ya(t,t[i]);break}super(t),this.changing_=!1}addTrack(t){t.enabled&&Ya(this,t),super.addTrack(t),t.addEventListener&&(t.enabledChange_=()=>{this.changing_||(this.changing_=!0,Ya(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)}}function Za(s,t){for(let i=0;i<s.length;i++)Object.keys(s[i]).length&&t.id!==s[i].id&&(s[i].selected=!1)}class lp extends es{constructor(t=[]){for(let i=t.length-1;0<=i;i--)if(t[i].selected){Za(t,t[i]);break}super(t),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set(){}})}addTrack(t){t.selected&&Za(this,t),super.addTrack(t),t.addEventListener&&(t.selectedChange_=()=>{this.changing_||(this.changing_=!0,Za(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)}}class Jl extends es{addTrack(t){super.addTrack(t),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),t.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(t.kind)===-1&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(t){super.removeTrack(t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_)&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_)}}class Hs{constructor(t){Hs.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(t){var i=this.length||0;let a=0;function o(h){""+h in this||Object.defineProperty(this,""+h,{get(){return this.cues_[h]}})}var l=t.length;if(this.cues_=t,this.length_=t.length,i<l)for(a=i;a<l;a++)o.call(this,a)}getCueById(t){let i=null;for(let o=0,l=this.length;o<l;o++){var a=this[o];if(a.id===t){i=a;break}}return i}}let up={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},dp={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},cp={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},eu={disabled:"disabled",hidden:"hidden",showing:"showing"};class Qa extends ci{constructor(t={}){super();let i={id:t.id||"vjs_track_"+Be++,kind:t.kind||"",language:t.language||""},a=t.label||"";for(let o in i)Object.defineProperty(this,o,{get(){return i[o]},set(){}});Object.defineProperty(this,"label",{get(){return a},set(o){o!==a&&(a=o,this.trigger("labelchange"))}})}}function Ja(s){return new URL(s,document.baseURI)}function tu(s){return new URL(s,document.baseURI).href}function qs(s,t=window.location){return Ja(s).origin!==t.origin}let eo=function(s){return typeof s=="string"&&(s=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(s),s)?s.pop().toLowerCase():""},hp=Object.freeze({__proto__:null,parseUrl:Ja,getAbsoluteURL:tu,getFileExtension:eo,isCrossOrigin:qs});var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vs(s,t){return s(t={exports:{}},t.exports),t.exports}var on=typeof window<"u"?window:typeof er<"u"?er:typeof self<"u"?self:{},iu=Vs(function(s){function t(){return s.exports=t=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var o,l=arguments[a];for(o in l)!{}.hasOwnProperty.call(l,o)||(i[o]=l[o])}return i},s.exports.__esModule=!0,s.exports.default=s.exports,t.apply(null,arguments)}s.exports=t,s.exports.__esModule=!0,s.exports.default=s.exports}),Ii=(vi=iu)&&vi.__esModule&&Object.prototype.hasOwnProperty.call(vi,"default")?vi.default:vi,pp=function(s){var t;return!!s&&((t=fp.call(s))==="[object Function]"||typeof s=="function"&&t!=="[object RegExp]"||typeof window<"u"&&(s===window.setTimeout||s===window.alert||s===window.confirm||s===window.prompt))},fp=Object.prototype.toString;function mp(s,t){var i,a=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(a)return(a=a.call(s)).next.bind(a);if(Array.isArray(s)||(a=function(o,l){var h;if(o)return typeof o=="string"?nu(o,l):(h=(h=Object.prototype.toString.call(o).slice(8,-1))==="Object"&&o.constructor?o.constructor.name:h)==="Map"||h==="Set"?Array.from(o):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?nu(o,l):void 0}(s))||t&&s&&typeof s.length=="number")return a&&(s=a),i=0,function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nu(s,t){(t==null||t>s.length)&&(t=s.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=s[i];return a}var vi=function(){function s(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var t=s.prototype;return t.getIsEnabled=function(){return this.enabled_},t.enable=function(){this.enabled_=!0},t.disable=function(){this.enabled_=!1},t.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},t.addInterceptor=function(i,a){return this.typeToInterceptorsMap_.has(i)||this.typeToInterceptorsMap_.set(i,new Set),i=this.typeToInterceptorsMap_.get(i),!i.has(a)&&(i.add(a),!0)},t.removeInterceptor=function(i,a){return i=this.typeToInterceptorsMap_.get(i),!(!i||!i.has(a)||(i.delete(a),0))},t.clearInterceptorsByType=function(i){return!!this.typeToInterceptorsMap_.get(i)&&(this.typeToInterceptorsMap_.delete(i),this.typeToInterceptorsMap_.set(i,new Set),!0)},t.clear=function(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=new Map,!0)},t.getForType=function(i){return this.typeToInterceptorsMap_.get(i)||new Set},t.execute=function(i,a){for(var o=mp(this.getForType(i));!(l=o()).done;){var l=l.value;try{a=l(a)}catch{}}return a},s}(),Xi=function(){function s(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var t=s.prototype;return t.getIsEnabled=function(){return this.enabled_},t.enable=function(){this.enabled_=!0},t.disable=function(){this.enabled_=!1},t.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},t.getMaxAttempts=function(){return this.maxAttempts_},t.setMaxAttempts=function(i){this.maxAttempts_=i},t.getDelayFactor=function(){return this.delayFactor_},t.setDelayFactor=function(i){this.delayFactor_=i},t.getFuzzFactor=function(){return this.fuzzFactor_},t.setFuzzFactor=function(i){this.fuzzFactor_=i},t.getInitialDelay=function(){return this.initialDelay_},t.setInitialDelay=function(i){this.initialDelay_=i},t.createRetry=function(a){var a=a===void 0?{}:a,o=a.maxAttempts;return new gp({maxAttempts:o||this.maxAttempts_,delayFactor:a.delayFactor||this.delayFactor_,fuzzFactor:a.fuzzFactor||this.fuzzFactor_,initialDelay:a.initialDelay||this.initialDelay_})},s}(),gp=function(){function s(i){this.maxAttempts_=i.maxAttempts,this.delayFactor_=i.delayFactor,this.fuzzFactor_=i.fuzzFactor,this.currentDelay_=i.initialDelay,this.currentAttempt_=1}var t=s.prototype;return t.moveToNextAttempt=function(){this.currentAttempt_++;var i=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+i},t.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},t.getCurrentDelay=function(){return this.currentDelay_},t.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},t.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},t.getCurrentFuzzedDelay=function(){var i=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return i+Math.random()*(a-i)},s}();wi.httpHandler=function(s,t){return t===void 0&&(t=!1),function(i,a,o){if(i)s(i);else if(400<=a.statusCode&&a.statusCode<=599){if(i=o,t)if(on.TextDecoder){a=function(l){return l===void 0&&(l=""),l.toLowerCase().split(";").reduce(function(h,G){var G=G.split("="),B=G[0],G=G[1];return B.trim()==="charset"?G.trim():h},"utf-8")}(a.headers&&a.headers["content-type"]);try{i=new TextDecoder(a).decode(o)}catch{}}else i=String.fromCharCode.apply(null,new Uint8Array(o));s({cause:i})}else s(null,o)}},wi.requestInterceptorsStorage=new vi,wi.responseInterceptorsStorage=new vi,wi.retryManager=new Xi;for(var yp=function(t){var i={};return t&&t.trim().split(`
`).forEach(function(h){var o=h.indexOf(":"),l=h.slice(0,o).trim().toLowerCase(),h=h.slice(o+1).trim();typeof i[l]>"u"?i[l]=h:Array.isArray(i[l])?i[l].push(h):i[l]=[i[l],h]}),i},to=wi,vi=wi,ru=(wi.XMLHttpRequest=on.XMLHttpRequest||function(){},wi.XDomainRequest="withCredentials"in new wi.XMLHttpRequest?wi.XMLHttpRequest:on.XDomainRequest,["get","put","post","patch","head","delete"]),vp=function(t){wi[t==="delete"?"del":t]=function(i,a,o){return(a=su(i,a,o)).method=t.toUpperCase(),no(a)}},io=0;io<ru.length;io++)vp(ru[io]);function su(s,t,i){var a=s;return pp(t)?(i=t,typeof s=="string"&&(a={uri:s})):a=iu({},t,{uri:s}),a.callback=i,a}function wi(s,t,i){return no(t=su(s,t,i))}function no(s){if(typeof s.callback>"u")throw new Error("callback argument missing");s.requestType&&wi.requestInterceptorsStorage.getIsEnabled()&&(pe=wi.requestInterceptorsStorage.execute(s.requestType,{uri:s.uri||s.url,headers:s.headers||{},body:s.body,metadata:s.metadata||{},retry:s.retry,timeout:s.timeout}),s.uri=pe.uri,s.headers=pe.headers,s.body=pe.body,s.metadata=pe.metadata,s.retry=pe.retry,s.timeout=pe.timeout);var t=!1,i=function(xe,Pe,Ae){t||(t=!0,s.callback(xe,Pe,Ae))};function a(){var xe=void 0,xe=G.response||G.responseText||function(Pe){try{if(Pe.responseType==="document")return Pe.responseXML;var Ae=Pe.responseXML&&Pe.responseXML.documentElement.nodeName==="parsererror";if(Pe.responseType===""&&!Ae)return Pe.responseXML}catch{}return null}(G);if(Ce)try{xe=JSON.parse(xe)}catch{}return xe}function o(xe){var Pe;if(clearTimeout(B),clearTimeout(s.retryTimeout),(xe=xe instanceof Error?xe:new Error(""+(xe||"Unknown XMLHttpRequest Error"))).statusCode=0,T||!wi.retryManager.getIsEnabled()||!s.retry||!s.retry.shouldRetry())return s.requestType&&wi.responseInterceptorsStorage.getIsEnabled()&&(Pe={headers:Le.headers||{},body:Le.body,responseUrl:G.responseURL,responseType:G.responseType},Pe=wi.responseInterceptorsStorage.execute(s.requestType,Pe),Le.body=Pe.body,Le.headers=Pe.headers),i(xe,Le);s.retryTimeout=setTimeout(function(){s.retry.moveToNextAttempt(),s.xhr=G,no(s)},s.retry.getCurrentFuzzedDelay())}function l(){var xe,Pe,Ae;if(!T)return clearTimeout(B),clearTimeout(s.retryTimeout),Ae=s.useXDR&&G.status===void 0?200:G.status===1223?204:G.status,xe=Le,Pe=null,Ae!==0?(xe={body:a(),statusCode:Ae,method:se,headers:{},url:H,rawRequest:G},G.getAllResponseHeaders&&(xe.headers=yp(G.getAllResponseHeaders()))):Pe=new Error("Internal XMLHttpRequest Error"),s.requestType&&wi.responseInterceptorsStorage.getIsEnabled()&&(Ae={headers:xe.headers||{},body:xe.body,responseUrl:G.responseURL,responseType:G.responseType},Ae=wi.responseInterceptorsStorage.execute(s.requestType,Ae),xe.body=Ae.body,xe.headers=Ae.headers),i(Pe,xe,xe.body)}var h,T,B,G=s.xhr||null,H=(G=G||new(s.cors||s.useXDR?wi.XDomainRequest:wi.XMLHttpRequest)).url=s.uri||s.url,se=G.method=s.method||"GET",pe=s.body||s.data,ae=G.headers=s.headers||{},_e=!!s.sync,Ce=!1,Le={body:void 0,headers:{},statusCode:0,method:se,url:H,rawRequest:G};if("json"in s&&s.json!==!1&&(Ce=!0,ae.accept||ae.Accept||(ae.Accept="application/json"),se!=="GET")&&se!=="HEAD"&&(ae["content-type"]||ae["Content-Type"]||(ae["Content-Type"]="application/json"),pe=JSON.stringify(s.json===!0?pe:s.json)),G.onreadystatechange=function(){G.readyState!==4||wi.responseInterceptorsStorage.getIsEnabled()||setTimeout(l,0)},G.onload=l,G.onerror=o,G.onprogress=function(){},G.onabort=function(){T=!0,clearTimeout(s.retryTimeout)},G.ontimeout=o,G.open(se,H,!_e,s.username,s.password),_e||(G.withCredentials=!!s.withCredentials),!_e&&0<s.timeout&&(B=setTimeout(function(){var xe;T||(T=!0,G.abort("timeout"),(xe=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",o(xe))},s.timeout)),G.setRequestHeader)for(h in ae)ae.hasOwnProperty(h)&&G.setRequestHeader(h,ae[h]);else if(s.headers&&!function(xe){for(var Pe in xe)if(xe.hasOwnProperty(Pe))return;return 1}(s.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in s&&(G.responseType=s.responseType),"beforeSend"in s&&typeof s.beforeSend=="function"&&s.beforeSend(G),G.send(pe||null),G}to.default=vi;function au(s,t){var i=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder());let a=[];i.oncue=function(o){t.addCue(o)},i.onparsingerror=function(o){a.push(o)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(s),0<a.length&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for "+t.src),a.forEach(o=>S.error(o)),window.console)&&window.console.groupEnd&&window.console.groupEnd(),i.flush()}function ou(s,t){var i={uri:s};(s=qs(s))&&(i.cors=s),(s=t.tech_.crossOrigin()==="use-credentials")&&(i.withCredentials=s),to(i,Kt(this,function(a,o,l){if(a)return S.error(a,o);t.loaded_=!0,typeof window.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],h=>{if(h.type!=="vttjserror")return au(l,t);S.error("vttjs failed to load, stopping trying to process "+t.src)}):au(l,t)}))}class ts extends Qa{constructor(t={}){if(!t.tech)throw new Error("A tech was not provided.");t=Z(t,{kind:cp[t.kind]||"subtitles",language:t.language||t.srclang||""});let i=eu[t.mode]||"disabled",a=t.default,o=(t.kind!=="metadata"&&t.kind!=="chapters"||(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1,new Hs(this.cues_)),l=new Hs(this.activeCues_),h=!1;this.timeupdateHandler=Kt(this,function(T={}){this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,h)&&(this.trigger("cuechange"),h=!1),T.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),this.tech_.one("dispose",()=>{this.stopTracking()}),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return a},set(){}},mode:{get(){return i},set(T){eu[T]&&i!==T&&(i=T,this.preload_||i==="disabled"||this.cues.length!==0||ou(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?o:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length!==0){var T=this.tech_.currentTime(),B=[];for(let H=0,se=this.cues.length;H<se;H++){var G=this.cues[H];G.startTime<=T&&T<=G.endTime&&B.push(G)}if(h=!1,B.length!==this.activeCues_.length)h=!0;else for(let H=0;H<B.length;H++)this.activeCues_.indexOf(B[H])===-1&&(h=!0);this.activeCues_=B,l.setCues_(this.activeCues_)}return l},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&ou(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(t){let i=t;if(!("getCueAsHTML"in i)){for(var a in i=new window.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)a in i||(i[a]=t[a]);i.id=t.id,i.originalCue_=t}var o=this.tech_.textTracks();for(let l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)}removeCue(t){let i=this.cues_.length;for(;i--;){var a=this.cues_[i];if(a===t||a.originalCue_&&a.originalCue_===t){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}}}ts.prototype.allowedEvents_={cuechange:"cuechange"};class lu extends Qa{constructor(t={}){t=Z(t,{kind:dp[t.kind]||""}),super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(a){typeof a=="boolean"&&a!==i&&(i=a,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class uu extends Qa{constructor(t={}){t=Z(t,{kind:up[t.kind]||""}),super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(a){typeof a=="boolean"&&a!==i&&(i=a,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class Dn extends ci{constructor(t={}){super();let i,a=new ts(t);this.kind=a.kind,this.src=a.src,this.srclang=a.language,this.label=a.label,this.default=a.default,Object.defineProperties(this,{readyState:{get(){return i}},track:{get(){return a}}}),i=Dn.NONE,a.addEventListener("loadeddata",()=>{i=Dn.LOADED,this.trigger({type:"load",target:this})})}}Dn.prototype.allowedEvents_={load:"load"},Dn.NONE=0,Dn.LOADING=1,Dn.LOADED=2,Dn.ERROR=3;let ln={audio:{ListClass:op,TrackClass:lu,capitalName:"Audio"},video:{ListClass:lp,TrackClass:uu,capitalName:"Video"},text:{ListClass:Jl,TrackClass:ts,capitalName:"Text"}},fr=(Object.keys(ln).forEach(function(s){ln[s].getterName=s+"Tracks",ln[s].privateName=s+"Tracks_"}),{remoteText:{ListClass:Jl,TrackClass:ts,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(s=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=s.length;t<i;t++)this.addTrackElement_(s[t])}addTrackElement_(s){let t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(s)===-1&&this.trackElements_.push(s)}getTrackElementByTrack_(s){let t;for(let i=0,a=this.trackElements_.length;i<a;i++)if(s===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(s){for(let t=0,i=this.trackElements_.length;t<i;t++)if(s===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:Dn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}}),Vi=Object.assign({},ln,fr);fr.names=Object.keys(fr),ln.names=Object.keys(ln),Vi.names=[].concat(fr.names).concat(ln.names);var Xi=typeof er<"u"?er:typeof window<"u"?window:{},Ws=typeof document<"u"?document:(Ws=Xi["__GLOBAL_DOCUMENT_CACHE@4"])||(Xi["__GLOBAL_DOCUMENT_CACHE@4"]={}),vi=Ws,ro=Object.create||function(s){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return du.prototype=s,new du};function du(){}function pn(s,t){this.name="ParsingError",this.code=s.code,this.message=t||s.message}function so(s){function t(i,a,o,l){return 3600*(0|i)+60*(0|a)+(0|o)+(0|l)/1e3}return s=s.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/),s?s[3]?t(s[1],s[2],s[3].replace(":",""),s[4]):59<s[1]?t(s[1],s[2],0,s[4]):t(0,s[1],s[2],s[4]):null}function is(){this.values=ro(null)}function ns(s,t,i,a){var o,l,h=a?s.split(a):[s];for(o in h)typeof h[o]=="string"&&(l=h[o].split(i)).length===2&&t(l[0].trim(),l[1].trim())}((pn.prototype=ro(Error.prototype)).constructor=pn).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},is.prototype={set:function(s,t){this.get(s)||t===""||(this.values[s]=t)},get:function(s,t,i){return i?this.has(s)?this.values[s]:t[i]:this.has(s)?this.values[s]:t},has:function(s){return s in this.values},alt:function(s,t,i){for(var a=0;a<i.length;++a)if(t===i[a]){this.set(s,t);break}},integer:function(s,t){/^-?\d+$/.test(t)&&this.set(s,parseInt(t,10))},percent:function(s,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(s,t),!0)}};var ao=vi.createElement&&vi.createElement("textarea"),bp={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},cu={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},_p={v:"title",lang:"lang"},hu={rt:"ruby"};function pu(s,t){for(var i,a,o,l,h,T,B=s.document.createElement("div"),G=B,H=[];T=void 0,(T=t?(T=(T=t.match(/^([^<]*)(<[^>]*>?)?/))[1]||T[2],t=t.substr(T.length),T):null)!==null;)T[0]==="<"?T[1]==="/"?H.length&&H[H.length-1]===T.substr(2).replace(">","")&&(H.pop(),G=G.parentNode):(a=so(T.substr(1,T.length-2)))?(i=s.document.createProcessingInstruction("timestamp",a),G.appendChild(i)):(a=T.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(o=a[1],l=a[3],h=void 0,h=bp[o],i=h?(h=s.document.createElement(h),(o=_p[o])&&l&&(h[o]=l.trim()),h):null)&&(o=G,hu[(l=i).localName]&&hu[l.localName]!==o.localName||(a[2]&&((h=a[2].split(".")).forEach(function(ae){var pe=/^bg_/.test(ae),ae=pe?ae.slice(3):ae;cu.hasOwnProperty(ae)&&(ae=cu[ae],i.style[pe?"background-color":"color"]=ae)}),i.className=h.join(" ")),H.push(a[1]),G.appendChild(i),G=i)):G.appendChild(s.document.createTextNode((l=T,ao.innerHTML=l,l=ao.textContent,ao.textContent="",l)));return B}var fu=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Tp(s){var t=[],i="";if(s&&s.childNodes){for(o(t,s);i=function l(h){var T,B,G;return h&&h.length?(B=(T=h.pop()).textContent||T.innerText)?(G=B.match(/^.*(\n|\r)/))?G[h.length=0]:B:T.tagName==="ruby"?l(h):T.childNodes?(o(h,T),l(h)):void 0:null}(t);)for(var a=0;a<i.length;a++)if(function(l){for(var h=0;h<fu.length;h++){var T=fu[h];if(l>=T[0]&&l<=T[1])return 1}}(i.charCodeAt(a)))return"rtl"}return"ltr";function o(l,h){for(var T=h.childNodes.length-1;0<=T;T--)l.push(h.childNodes[T])}}function Xs(){}function oo(s,t,i){Xs.call(this),this.cue=t,this.cueDiv=pu(s,t.text),this.applyStyles({color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"},this.cueDiv),this.div=s.document.createElement("div"),s={direction:Tp(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(s),this.div.appendChild(this.cueDiv);var a=0;switch(t.positionAlign){case"start":case"line-left":a=t.position;break;case"center":a=t.position-t.size/2;break;case"end":case"line-right":a=t.position-t.size}t.vertical===""?this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(o){this.applyStyles({top:this.formatStyle(o.top,"px"),bottom:this.formatStyle(o.bottom,"px"),left:this.formatStyle(o.left,"px"),right:this.formatStyle(o.right,"px"),height:this.formatStyle(o.height,"px"),width:this.formatStyle(o.width,"px")})}}function Wi(s){var t,i,a,o;s.div&&(t=s.div.offsetHeight,i=s.div.offsetWidth,a=s.div.offsetTop,o=(o=(o=s.div.childNodes)&&o[0])&&o.getClientRects&&o.getClientRects(),s=s.div.getBoundingClientRect(),o=o?Math.max(o[0]&&o[0].height||0,s.height/o.length):0),this.left=s.left,this.right=s.right,this.top=s.top||a,this.height=s.height||t,this.bottom=s.bottom||a+(s.height||t),this.width=s.width||i,this.lineHeight=o!==void 0?o:s.lineHeight}function Sp(s,t,i,a){var o,l=new Wi(t),h=t.cue,T=function(_e){if(typeof _e.line=="number"&&(_e.snapToLines||0<=_e.line&&_e.line<=100))return _e.line;if(!_e.track||!_e.track.textTrackList||!_e.track.textTrackList.mediaElement)return-1;for(var Ce=_e.track,Le=Ce.textTrackList,xe=0,Pe=0;Pe<Le.length&&Le[Pe]!==Ce;Pe++)Le[Pe].mode==="showing"&&xe++;return-1*++xe}(h),B=[];if(h.snapToLines){switch(h.vertical){case"":B=["+y","-y"],o="height";break;case"rl":B=["+x","-x"],o="width";break;case"lr":B=["-x","+x"],o="width"}var G=l.lineHeight,H=G*Math.round(T),se=i[o]+G,pe=B[0];Math.abs(H)>se&&(H=H<0?-1:1,H*=Math.ceil(se/G)*G),T<0&&(H+=h.vertical===""?i.height:i.width,B=B.reverse()),l.move(pe,H)}else{var ae=l.lineHeight/i.height*100;switch(h.lineAlign){case"center":T-=ae/2;break;case"end":T-=ae}switch(h.vertical){case"":t.applyStyles({top:t.formatStyle(T,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(T,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(T,"%")})}B=["+y","-x","+x","-y"],l=new Wi(t)}se=function(_e,Ce){for(var Le,xe=new Wi(_e),Pe=1,Ae=0;Ae<Ce.length;Ae++){for(;_e.overlapsOppositeAxis(i,Ce[Ae])||_e.within(i)&&_e.overlapsAny(a);)_e.move(Ce[Ae]);if(_e.within(i))return _e;var st=_e.intersectPercentage(i);st<Pe&&(Le=new Wi(_e),Pe=st),_e=new Wi(xe)}return Le||xe}(l,B),t.move(se.toCSSCompatValues(i))}function rs(){}Xs.prototype.applyStyles=function(s,t){for(var i in t=t||this.div,s)s.hasOwnProperty(i)&&(t.style[i]=s[i])},Xs.prototype.formatStyle=function(s,t){return s===0?0:s+t},(oo.prototype=ro(Xs.prototype)).constructor=oo,Wi.prototype.move=function(s,t){switch(t=t!==void 0?t:this.lineHeight,s){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Wi.prototype.overlaps=function(s){return this.left<s.right&&this.right>s.left&&this.top<s.bottom&&this.bottom>s.top},Wi.prototype.overlapsAny=function(s){for(var t=0;t<s.length;t++)if(this.overlaps(s[t]))return!0;return!1},Wi.prototype.within=function(s){return this.top>=s.top&&this.bottom<=s.bottom&&this.left>=s.left&&this.right<=s.right},Wi.prototype.overlapsOppositeAxis=function(s,t){switch(t){case"+x":return this.left<s.left;case"-x":return this.right>s.right;case"+y":return this.top<s.top;case"-y":return this.bottom>s.bottom}},Wi.prototype.intersectPercentage=function(s){return Math.max(0,Math.min(this.right,s.right)-Math.max(this.left,s.left))*Math.max(0,Math.min(this.bottom,s.bottom)-Math.max(this.top,s.top))/(this.height*this.width)},Wi.prototype.toCSSCompatValues=function(s){return{top:this.top-s.top,bottom:s.bottom-this.bottom,left:this.left-s.left,right:s.right-this.right,height:this.height,width:this.width}},Wi.getSimpleBoxPosition=function(s){var t=s.div?s.div.offsetHeight:s.tagName?s.offsetHeight:0,i=s.div?s.div.offsetWidth:s.tagName?s.offsetWidth:0,a=s.div?s.div.offsetTop:s.tagName?s.offsetTop:0;return{left:(s=s.div?s.div.getBoundingClientRect():s.tagName?s.getBoundingClientRect():s).left,right:s.right,top:s.top||a,height:s.height||t,bottom:s.bottom||a+(s.height||t),width:s.width||i}},rs.StringDecoder=function(){return{decode:function(s){if(!s)return"";if(typeof s!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(s))}}},rs.convertCueToDOMTree=function(s,t){return s&&t?pu(s,t):null},rs.processCues=function(s,t,i){if(!s||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var a=s.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin="1.5%",i.appendChild(a),function(se){for(var pe=0;pe<se.length;pe++)if(se[pe].hasBeenReset||!se[pe].displayState)return 1}(t))for(var o,l,h=[],T=Wi.getSimpleBoxPosition(a),B={font:Math.round(.05*T.height*100)/100+"px sans-serif"},G=0;G<t.length;G++)o=new oo(s,l=t[G],B),a.appendChild(o.div),Sp(0,o,T,h),l.displayState=o.div,h.push(Wi.getSimpleBoxPosition(o));else for(var H=0;H<t.length;H++)a.appendChild(t[H].displayState)},(rs.Parser=function(s,t,i){i||(i=t,t={}),t=t||{},this.window=s,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(s){if(!(s instanceof pn))throw s;this.onparsingerror&&this.onparsingerror(s)},parse:function(s){var t=this;function i(){for(var B=t.buffer,G=0;G<B.length&&B[G]!=="\r"&&B[G]!==`
`;)++G;var H=B.substr(0,G);return B[G]==="\r"&&++G,B[G]===`
`&&++G,t.buffer=B.substr(G),H}function a(B){B.match(/X-TIMESTAMP-MAP/)?ns(B,function(G,H){var se;G==="X-TIMESTAMP-MAP"&&(G=H,se=new is,ns(G,function(pe,ae){switch(pe){case"MPEGT":se.integer(pe+"S",ae);break;case"LOCA":se.set(pe+"L",so(ae))}},/[^\d]:/,/,/),t.ontimestampmap)&&t.ontimestampmap({MPEGTS:se.get("MPEGTS"),LOCAL:se.get("LOCAL")})},/=/):ns(B,function(G,H){var se;G==="Region"&&(G=H,se=new is,ns(G,function(pe,ae){switch(pe){case"id":se.set(pe,ae);break;case"width":se.percent(pe,ae);break;case"lines":se.integer(pe,ae);break;case"regionanchor":case"viewportanchor":var _e,Ce=ae.split(",");Ce.length===2&&((_e=new is).percent("x",Ce[0]),_e.percent("y",Ce[1]),_e.has("x")&&_e.has("y"))&&(se.set(pe+"X",_e.get("x")),se.set(pe+"Y",_e.get("y")));break;case"scroll":se.alt(pe,ae,["up"])}},/=/,/\s/),se.has("id"))&&((G=new(t.vttjs.VTTRegion||t.window.VTTRegion)).width=se.get("width",100),G.lines=se.get("lines",3),G.regionAnchorX=se.get("regionanchorX",0),G.regionAnchorY=se.get("regionanchorY",100),G.viewportAnchorX=se.get("viewportanchorX",0),G.viewportAnchorY=se.get("viewportanchorY",100),G.scroll=se.get("scroll",""),t.onregion&&t.onregion(G),t.regionList.push({id:se.get("id"),region:G}))},/:/)}s&&(t.buffer+=t.decoder.decode(s,{stream:!0}));try{if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;var o,l=(o=i()).match(/^WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new pn(pn.Errors.BadSignature);t.state="HEADER"}for(var h=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(h?h=!1:o=i(),t.state){case"HEADER":/:/.test(o)?a(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch{t.cue.align="middle"}if(t.state="CUE",o.indexOf("-->")===-1){t.cue.id=o;continue}case"CUE":try{(function(B,G,H){var se=B;function pe(){var Le=so(B);if(Le===null)throw new pn(pn.Errors.BadTimeStamp,"Malformed timestamp: "+se);return B=B.replace(/^[^\sa-zA-Z-]+/,""),Le}function ae(){B=B.replace(/^\s+/,"")}if(ae(),G.startTime=pe(),ae(),B.substr(0,3)!=="-->")throw new pn(pn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+se);B=B.substr(3),ae(),G.endTime=pe(),ae();var _e=B,Ce=new is;ns(_e,function(Le,xe){switch(Le){case"region":for(var Pe=H.length-1;0<=Pe;Pe--)if(H[Pe].id===xe){Ce.set(Le,H[Pe].region);break}break;case"vertical":Ce.alt(Le,xe,["rl","lr"]);break;case"line":var Ae=xe.split(","),st=Ae[0];Ce.integer(Le,st),Ce.percent(Le,st)&&Ce.set("snapToLines",!1),Ce.alt(Le,st,["auto"]),Ae.length===2&&Ce.alt("lineAlign",Ae[1],["start","center","end"]);break;case"position":Ae=xe.split(","),Ce.percent(Le,Ae[0]),Ae.length===2&&Ce.alt("positionAlign",Ae[1],["start","center","end"]);break;case"size":Ce.percent(Le,xe);break;case"align":Ce.alt(Le,xe,["start","center","end","left","right"])}},/:/,/\s/),G.region=Ce.get("region",null),G.vertical=Ce.get("vertical","");try{G.line=Ce.get("line","auto")}catch{}G.lineAlign=Ce.get("lineAlign","start"),G.snapToLines=Ce.get("snapToLines",!0),G.size=Ce.get("size",100);try{G.align=Ce.get("align","center")}catch{G.align=Ce.get("align","middle")}try{G.position=Ce.get("position","auto")}catch{G.position=Ce.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},G.align)}G.positionAlign=Ce.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},G.align)})(o,t.cue,t.regionList)}catch(B){t.reportOrThrowError(B),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var T=o.indexOf("-->")!==-1;if(!o||T&&(h=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+=`
`),t.cue.text+=o.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":o||(t.state="ID");continue}}}catch(B){t.reportOrThrowError(B),t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var s=this;try{if(s.buffer+=s.decoder.decode(),!s.cue&&s.state!=="HEADER"||(s.buffer+=`

`,s.parse()),s.state==="INITIAL")throw new pn(pn.Errors.BadSignature)}catch(t){s.reportOrThrowError(t)}return s.onflush&&s.onflush(),this}};var wp=rs,Ep={"":1,lr:1,rl:1},Cp={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function lo(s){return typeof s=="string"&&!!Cp[s.toLowerCase()]&&s.toLowerCase()}function mu(s,t,i){this.hasBeenReset=!1;var a="",o=!1,l=s,h=t,T=i,B=null,G="",H=!0,se="auto",pe="start",ae="auto",_e="auto",Ce=100,Le="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return a},set:function(xe){a=""+xe}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(xe){o=!!xe}},startTime:{enumerable:!0,get:function(){return l},set:function(xe){if(typeof xe!="number")throw new TypeError("Start time must be set to a number.");l=xe,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return h},set:function(xe){if(typeof xe!="number")throw new TypeError("End time must be set to a number.");h=xe,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return T},set:function(xe){T=""+xe,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return B},set:function(xe){B=xe,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return G},set:function(xe){if(xe=typeof(xe=xe)=="string"&&!!Ep[xe.toLowerCase()]&&xe.toLowerCase(),xe===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");G=xe,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return H},set:function(xe){H=!!xe,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return se},set:function(xe){if(typeof xe!="number"&&xe!=="auto")throw new SyntaxError("Line: an invalid number or illegal string was specified.");se=xe,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return pe},set:function(xe){xe=lo(xe),xe&&(pe=xe,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return ae},set:function(xe){if(xe<0||100<xe)throw new Error("Position must be between 0 and 100.");ae=xe,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return _e},set:function(xe){xe=lo(xe),xe&&(_e=xe,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return Ce},set:function(xe){if(xe<0||100<xe)throw new Error("Size must be between 0 and 100.");Ce=xe,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Le},set:function(xe){if(xe=lo(xe),!xe)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Le=xe,this.hasBeenReset=!0}}}),this.displayState=void 0}mu.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var xp=mu,kp={"":!0,up:!0};function ss(s){return typeof s=="number"&&0<=s&&s<=100}function Np(){var s=100,t=3,i=0,a=100,o=0,l=100,h="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return s},set:function(T){if(!ss(T))throw new Error("Width must be between 0 and 100.");s=T}},lines:{enumerable:!0,get:function(){return t},set:function(T){if(typeof T!="number")throw new TypeError("Lines must be set to a number.");t=T}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(T){if(!ss(T))throw new Error("RegionAnchorX must be between 0 and 100.");a=T}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(T){if(!ss(T))throw new Error("RegionAnchorY must be between 0 and 100.");i=T}},viewportAnchorY:{enumerable:!0,get:function(){return l},set:function(T){if(!ss(T))throw new Error("ViewportAnchorY must be between 0 and 100.");l=T}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(T){if(!ss(T))throw new Error("ViewportAnchorX must be between 0 and 100.");o=T}},scroll:{enumerable:!0,get:function(){return h},set:function(T){T=typeof(T=T)=="string"&&!!kp[T.toLowerCase()]&&T.toLowerCase(),T!==!1&&(h=T)}}})}var uo=Vs(function(t){var t=t.exports={WebVTT:wp,VTTCue:xp,VTTRegion:Np},i=(on.vttjs=t,on.WebVTT=t.WebVTT,t.VTTCue),a=t.VTTRegion,o=on.VTTCue,l=on.VTTRegion;t.shim=function(){on.VTTCue=i,on.VTTRegion=a},t.restore=function(){on.VTTCue=o,on.VTTRegion=l},on.VTTCue||t.shim()});uo.WebVTT;class Ut extends Ze{constructor(t={},i=function(){}){t.reportTouchActivity=!1,super(null,t,i),this.onDurationChange_=a=>this.onDurationChange(a),this.trackProgress_=a=>this.trackProgress(a),this.trackCurrentTime_=a=>this.trackCurrentTime(a),this.stopTrackingCurrentTime_=a=>this.stopTrackingCurrentTime(a),this.disposeSourceHandler_=a=>this.disposeSourceHandler(a),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Vi.names.forEach(a=>{a=Vi[a],t&&t[a.getterName]&&(this[a.privateName]=t[a.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(a=>{t[`native${a}Tracks`]===!1&&(this[`featuresNative${a}Tracks`]=!1)}),t.nativeCaptions===!1||t.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:t.nativeCaptions!==!0&&t.nativeTextTracks!==!0||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=t.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Vi.text.ListClass,this.initTrackListeners(),t.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(t){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(t),1)),this.trigger({src:t,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Kt(this,function(){var i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),(this.bufferedPercent_=i)===1&&this.stopTrackingProgress()}),500)}onDurationChange(t){this.duration_=this.duration()}buffered(){return hn(0,0)}bufferedPercent(){return Zl(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(ln.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(t){(t=[].concat(t)).forEach(i=>{var a=this[i+"Tracks"]()||[];let o=a.length;for(;o--;){var l=a[o];i==="text"&&this.removeRemoteTextTrack(l),a.removeTrack(l)}})}cleanupAutoTextTracks(){var t=this.autoRemoteTextTracks_||[];let i=t.length;for(;i--;){var a=t[i];this.removeRemoteTextTrack(a)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(t){return t!==void 0&&(this.error_=new yi(t),this.trigger("error")),this.error_}played(){return this.hasStarted_?hn(0,0):hn()}play(){}setScrubbing(t){}scrubbing(){}setCurrentTime(t){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){ln.names.forEach(t=>{var i=ln[t];let a=()=>{this.trigger(t+"trackchange")},o=this[i.getterName]();o.addEventListener("removetrack",a),o.addEventListener("addtrack",a),this.on("dispose",()=>{o.removeEventListener("removetrack",a),o.removeEventListener("addtrack",a)})})}addWebVttScript_(){if(!window.WebVTT)if(document.body.contains(this.el()))if(!this.options_["vtt.js"]&&V(uo)&&0<Object.keys(uo).length)this.trigger("vttjsloaded");else{let t=document.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=()=>{this.trigger("vttjsloaded")},t.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{t.onload=null,t.onerror=null}),window.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){let t=this.textTracks(),i=this.remoteTextTracks(),a=T=>t.addTrack(T.track),o=T=>t.removeTrack(T.track),l=(i.on("addtrack",a),i.on("removetrack",o),this.addWebVttScript_(),()=>this.trigger("texttrackchange")),h=()=>{l();for(let B=0;B<t.length;B++){var T=t[B];T.removeEventListener("cuechange",l),T.mode==="showing"&&T.addEventListener("cuechange",l)}};h(),t.addEventListener("change",h),t.addEventListener("addtrack",h),t.addEventListener("removetrack",h),this.on("dispose",function(){i.off("addtrack",a),i.off("removetrack",o),t.removeEventListener("change",h),t.removeEventListener("addtrack",h),t.removeEventListener("removetrack",h);for(let T=0;T<t.length;T++)t[T].removeEventListener("cuechange",l)})}addTextTrack(t,i,a){if(t)return t=t,i=i,a=a,l={},h=(o=this).textTracks(),l.kind=t,i&&(l.label=i),a&&(l.language=a),l.tech=o,t=new Vi.text.TrackClass(l),h.addTrack(t),t;throw new Error("TextTrack kind is required but was not provided");var o,l,h}createRemoteTextTrack(t){return t=Z(t,{tech:this}),new fr.remoteTextEl.TrackClass(t)}addRemoteTextTrack(t={},i){let a=this.createRemoteTextTrack(t);return typeof i!="boolean"&&(i=!1),this.remoteTextTrackEls().addTrackElement_(a),this.remoteTextTracks().addTrack(a.track),i===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(a.track)),a}removeRemoteTextTrack(t){var i=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(t){let i=Be++;return!this.isReady_||this.paused()?(this.queuedHanders_.add(i),this.one("playing",()=>{this.queuedHanders_.has(i)&&(this.queuedHanders_.delete(i),t())})):this.requestNamedAnimationFrame(i,t),i}cancelVideoFrameCallback(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(t){}overrideNativeVideoTracks(t){}canPlayType(t){return""}static canPlayType(t){return""}static canPlaySource(t,i){return Ut.canPlayType(t.type)}static isTech(t){return t.prototype instanceof Ut||t instanceof Ut||t===Ut}static registerTech(t,i){if(Ut.techs_||(Ut.techs_={}),!Ut.isTech(i))throw new Error(`Tech ${t} must be a Tech`);if(!Ut.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(Ut.canPlaySource)return t=_i(t),Ut.techs_[t]=i,Ut.techs_[Qr(t)]=i,t!=="Tech"&&Ut.defaultTechOrder_.push(t),i;throw new Error("Techs must have a static canPlaySource method on them")}static getTech(t){if(t)return Ut.techs_&&Ut.techs_[t]?Ut.techs_[t]:(t=_i(t),window&&window.videojs&&window.videojs[t]?(S.warn(`The ${t} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),window.videojs[t]):void 0)}}Vi.names.forEach(function(s){let t=Vi[s];Ut.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Ut.prototype.featuresVolumeControl=!0,Ut.prototype.featuresMuteControl=!0,Ut.prototype.featuresFullscreenResize=!1,Ut.prototype.featuresPlaybackRate=!1,Ut.prototype.featuresProgressEvents=!1,Ut.prototype.featuresSourceset=!1,Ut.prototype.featuresTimeupdateEvents=!1,Ut.prototype.featuresNativeTextTracks=!1,Ut.prototype.featuresVideoFrameCallback=!1,Ut.withSourceHandlers=function(s){s.registerSourceHandler=function(t,i){let a=s.sourceHandlers;a=a||(s.sourceHandlers=[]),i===void 0&&(i=a.length),a.splice(i,0,t)},s.canPlayType=function(t){var i,a=s.sourceHandlers||[];for(let o=0;o<a.length;o++)if(i=a[o].canPlayType(t))return i;return""},s.selectSourceHandler=function(t,i){var a=s.sourceHandlers||[];for(let o=0;o<a.length;o++)if(a[o].canHandleSource(t,i))return a[o];return null},s.canPlaySource=function(t,i){var a=s.selectSourceHandler(t,i);return a?a.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){let i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},s.prototype),s.prototype.setSource=function(t){let i=s.selectSourceHandler(t,this.options_);i||(s.nativeSourceHandler?i=s.nativeSourceHandler:S.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==s.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},s.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Ze.registerComponent("Tech",Ut),Ut.registerTech("Tech",Ut),Ut.defaultTechOrder_=[];let tr={},Gs={},$s={};function Ap(s,t,i){s.setTimeout(()=>function a(o={},l=[],h,T,B=[],G=!1){let[H,...se]=l;if(typeof H=="string")a(o,tr[H],h,T,B,G);else if(H){let pe=Dp(T,H);if(!pe.setSource)return B.push(pe),a(o,se,h,T,B,G);pe.setSource(Object.assign({},o),function(ae,_e){if(ae)return a(o,se,h,T,B,G);B.push(pe),a(_e,o.type===_e.type?se:tr[_e.type],h,T,B,G)})}else se.length?a(o,se,h,T,B,G):G?h(o,B):a(o,tr["*"],h,T,B,!0)}(t,tr[t.type],i,s),1)}function gu(s,h,i,l=null){var o="call"+_i(i),o=s.reduce(co(o),l),l=o===$s,h=l?null:h[i](o),T=s,B=i,G=h,H=l;for(let pe=T.length-1;0<=pe;pe--){var se=T[pe];se[B]&&se[B](H,G)}return h}let Ip={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Op={setCurrentTime:1,setMuted:1,setVolume:1},yu={play:1,pause:1};function co(s){return(t,i)=>t===$s?$s:i[s]?i[s](t):t}function Dp(s,t){var i=Gs[s.id()];let a=null;if(i==null)a=t(s),Gs[s.id()]=[[t,a]];else{for(let h=0;h<i.length;h++){var[o,l]=i[h];o===t&&(a=l)}a===null&&(a=t(s),i.push([t,a]))}return a}function vu(s){if(Array.isArray(s)){let t=[];s.forEach(function(i){i=vu(i),Array.isArray(i)?t=t.concat(i):R(i)&&t.push(i)}),s=t}else s=typeof s=="string"&&s.trim()?[bu({src:s})]:R(s)&&typeof s.src=="string"&&s.src&&s.src.trim()?[bu(s)]:[];return s}let Pp={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Ks=function(s=""){return s=eo(s),Pp[s.toLowerCase()]||""};function bu(s){var t;return s.type||(t=Ks(s.src))&&(s.type=t),s}Xi=ze?10009:rt?461:8;let mr={codes:{play:415,pause:19,ff:417,rw:412,back:Xi},names:{415:"play",19:"pause",417:"ff",412:"rw",[Xi]:"back"},isEventKey(s,t){return t=t.toLowerCase(),!(!this.names[s.keyCode]||this.names[s.keyCode]!==t)},getEventName(s){return this.names[s.keyCode]||(this.codes[s.code]?(s=this.codes[s.code],this.names[s]):null)}};class Rp extends ci{constructor(t){super(),this.player_=t,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(1<this.focusableComponents.length?this.focusableComponents[1]:this.focusableComponents[0]).focus()}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(t){var i,a=t.originalEvent||t;["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(a.key)?this.isPaused_||(a.preventDefault(),i=a.key.substring(5).toLowerCase(),this.move(i)):mr.isEventKey(a,"play")||mr.isEventKey(a,"pause")||mr.isEventKey(a,"ff")||mr.isEventKey(a,"rw")?(a.preventDefault(),i=mr.getEventName(a),this.performMediaAction_(i)):mr.isEventKey(a,"Back")&&t.target&&typeof t.target.closeable=="function"&&t.target.closeable()&&(a.preventDefault(),t.target.close())}performMediaAction_(t){if(this.player_)switch(t){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+5);break;case"rw":this.userSeek_(this.player_.currentTime()-5)}}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(t){var i=t.relatedTarget;let a=null;var o=this.getCurrentComponent(t.target);i&&(a=!!i.closest(".video-js"),i.classList.contains("vjs-text-track-settings"))&&!this.isPaused_&&this.searchForTrackSelect_(),(t.currentTarget.contains(t.relatedTarget)||a)&&i||(o&&o.name()==="CloseButton"?this.refocusComponent():(this.pause(),o&&o.el()&&(this.lastFocusedComponent_=o)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){var t=this.player_;let i=[];function a(o){for(var l of o)l.hasOwnProperty("el_")&&l.getIsFocusable()&&l.getIsAvailableToBeFocused(l.el())&&i.push(l),l.hasOwnProperty("children_")&&0<l.children_.length&&a(l.children_)}return t.children_.forEach(o=>{if(o.hasOwnProperty("el_")){if(o.getIsFocusable&&o.getIsAvailableToBeFocused&&o.getIsFocusable()&&o.getIsAvailableToBeFocused(o.el()))return void i.push(o);o.hasOwnProperty("children_")&&0<o.children_.length?a(o.children_):o.hasOwnProperty("items")&&0<o.items.length?a(o.items):this.findSuitableDOMChild(o)&&i.push(o)}o.name_==="ErrorDisplay"&&o.opened_&&(o=o.el_.querySelector(".vjs-errors-ok-button-container"))&&o.querySelectorAll("button").forEach((l,h)=>{i.push({name:()=>"ModalButton"+(h+1),el:()=>l,getPositions:()=>{var T=l.getBoundingClientRect();return{boundingClientRect:{x:T.x,y:T.y,width:T.width,height:T.height,top:T.top,right:T.right,bottom:T.bottom,left:T.left},center:{x:T.left+T.width/2,y:T.top+T.height/2,width:0,height:0,top:T.top+T.height/2,right:T.left+T.width/2,bottom:T.top+T.height/2,left:T.left+T.width/2}}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:T=>!0,focus:()=>l.focus()})})}),this.focusableComponents=i,this.focusableComponents}findSuitableDOMChild(t){return t.el()?function i(a){if(t.getIsFocusable(a)&&t.getIsAvailableToBeFocused(a))return a;for(let l=0;l<a.children.length;l++){var o=i(a.children[l]);if(o)return o}return null}(t.el()):null}getCurrentComponent(t){this.updateFocusableComponents();var i=t||document.activeElement;if(this.focusableComponents.length){for(var a of this.focusableComponents)if(a.el()===i)return a}}add(t){var i=[...this.focusableComponents];t.hasOwnProperty("el_")&&t.getIsFocusable()&&t.getIsAvailableToBeFocused(t.el())&&i.push(t),this.focusableComponents=i,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(t){for(let i=0;i<this.focusableComponents.length;i++)if(this.focusableComponents[i].name()===t.name())return this.focusableComponents.splice(i,1),void this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}clear(){0<this.focusableComponents.length&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(t){let i=this.getCurrentComponent();if(i){let o=i.getPositions();var a=this.focusableComponents.filter(l=>l!==i&&this.isInDirection_(o.boundingClientRect,l.getPositions().boundingClientRect,t)),a=this.findBestCandidate_(o.center,a,t);a?this.focus(a):this.trigger({type:"endOfFocusableComponents",direction:t,focusedComponent:i})}}findBestCandidate_(t,i,a){let o=1/0,l=null;for(var h of i){var T=h.getPositions().center,T=this.calculateDistance_(t,T,a);T<o&&(o=T,l=h)}return l}isInDirection_(t,i,a){switch(a){case"right":return i.left>=t.right;case"left":return i.right<=t.left;case"down":return i.top>=t.bottom;case"up":return i.bottom<=t.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[t])}else this.focus(this.updateFocusableComponents()[0])}focus(t){typeof t=="object"&&(t.getIsAvailableToBeFocused(t.el())?t.focus():this.findSuitableDOMChild(t)&&this.findSuitableDOMChild(t).focus())}calculateDistance_(t,i,a){var o=Math.abs(t.x-i.x),l=Math.abs(t.y-i.y);let h;switch(a){case"right":case"left":h=o+100*l;break;case"up":h=2*l+.5*o;break;case"down":h=5*l+o;break;default:h=o+l}return h}searchForTrackSelect_(){var t;for(t of this.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){this.focus(t);break}}}class Lp extends Ze{constructor(t,i,a){if(super(t,Z({createEl:!1},i),a),i.playerOptions.sources&&i.playerOptions.sources.length!==0)t.src(i.playerOptions.sources);else for(let l=0,h=i.playerOptions.techOrder;l<h.length;l++){var o=_i(h[l]);let T=Ut.getTech(o);if((T=o?T:Ze.getComponent(o))&&T.isSupported()){t.loadTech_(o);break}}}}Ze.registerComponent("MediaLoader",Lp);class Ys extends Ze{constructor(t,i){super(t,i),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=a=>this.handleMouseOver(a),this.handleMouseOut_=a=>this.handleMouseOut(a),this.handleClick_=a=>this.handleClick(a),this.handleKeyDown_=a=>this.handleKeyDown(a),this.emitTapEvents(),this.enable()}createEl(t="div",i={},a={}){return i=Object.assign({className:this.buildCSSClass(),tabIndex:0},i),t==="button"&&S.error(`Creating a ClickableComponent with an HTML element of ${t} is not supported; use a Button instead.`),a=Object.assign({role:"button"},a),this.tabIndex_=i.tabIndex,t=be(t,i,a),this.player_.options_.experimentalSvgIcons||t.appendChild(be("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(t),t}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(t){return this.controlTextEl_=be("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_}controlText(t,i=this.el()){if(t===void 0)return this.controlText_||"Need Text";var a=this.localize(t);this.controlText_=t,Fe(this.controlTextEl_,a),this.nonIconControl||this.player_.options_.noUITitleAttributes||i.setAttribute("title",a)}buildCSSClass(){return"vjs-control vjs-button "+super.buildCSSClass()}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(t){t.key===" "||t.key==="Enter"?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}}Ze.registerComponent("ClickableComponent",Ys);class ho extends Ys{constructor(t,i){super(t,i),this.update(),this.update_=a=>this.update(a),t.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return be("div",{className:"vjs-poster"})}crossOrigin(t){if(typeof t>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;t!==null&&t!=="anonymous"&&t!=="use-credentials"?this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`):this.$("img")&&(this.$("img").crossOrigin=t)}update(t){var i=this.player().poster();this.setSrc(i),i?this.show():this.hide()}setSrc(t){t?(this.$("img")||this.el_.appendChild(be("picture",{className:"vjs-poster",tabIndex:-1},{},be("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=t):this.el_.textContent=""}handleClick(t){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?vn(this.player_.play()):this.player_.pause())}}ho.prototype.crossorigin=ho.prototype.crossOrigin,Ze.registerComponent("PosterImage",ho);let Mp={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function po(s,t){let i;if(s.length===4)i=s[1]+s[1]+s[2]+s[2]+s[3]+s[3];else{if(s.length!==7)throw new Error("Invalid color code provided, "+s+"; must be formatted as e.g. #f0e or #f604e2.");i=s.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function bn(s,t,i){try{s.style[t]=i}catch{}}function _u(s){return s?s+"px":""}class Up extends Ze{constructor(t,i,a){super(t,i,a);let o=l=>{this.updateDisplayOverlay(),this.updateDisplay(l)};t.on("loadstart",l=>this.toggleDisplay(l)),t.on("texttrackchange",l=>this.updateDisplay(l)),t.on("loadedmetadata",l=>{this.updateDisplayOverlay(),this.preselectTrack(l)}),t.ready(Kt(this,function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",o),t.on("playerresize",o);let h=window.screen.orientation||window,T=window.screen.orientation?"change":"orientationchange";h.addEventListener(T,o),t.on("dispose",()=>h.removeEventListener(T,o));var l=this.options_.playerOptions.tracks||[];for(let B=0;B<l.length;B++)this.player_.addRemoteTextTrack(l[B],!0);this.preselectTrack()}}))}preselectTrack(){var t={captions:1,subtitles:1},i=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage;let o,l,h;for(let B=0;B<i.length;B++){var T=i[B];a&&a.enabled&&a.language&&a.language===T.language&&T.kind in t?h=T.kind!==a.kind&&h||T:a&&!a.enabled?(h=null,o=null,l=null):T.default&&(T.kind!=="descriptions"||o?T.kind in t&&!l&&(l=T):o=T)}h?h.mode="showing":l?l.mode="showing":o&&(o.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof window.WebVTT=="function"&&window.WebVTT.processCues(window,[],this.el_)}updateDisplay(){var t,i,a,o=this.player_.textTracks(),l=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),l){var h=[];for(let G=0;G<o.length;++G){var T=o[G];T.mode==="showing"&&h.push(T)}this.updateForTrack(h)}else{let G=null,H=null,se=o.length;for(;se--;){var B=o[se];B.mode==="showing"&&(B.kind==="descriptions"?G=B:H=B)}H?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(H)):G&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(G)),window.CSS.supports("inset","10px")||(t=(l=this.el_).querySelectorAll(".vjs-text-track-cue"),i=this.player_.controlBar.el_.getBoundingClientRect().height,a=this.player_.el_.getBoundingClientRect().height,l.style="",bn(l,"position","relative"),bn(l,"height",a-i+"px"),bn(l,"top","unset"),le?bn(l,"bottom",a+"px"):bn(l,"bottom","0px"),0<t.length&&t.forEach(pe=>{var ae;pe.style.inset&&(ae=pe.style.inset.split(" ")).length===3&&Object.assign(pe.style,{top:ae[0],right:ae[1],bottom:ae[2],left:"unset"})}))}}updateDisplayOverlay(){if(this.player_.videoHeight()&&window.CSS.supports("inset-inline: 10px")){var t=this.player_.currentWidth(),i=this.player_.currentHeight(),a=t/i,o=this.player_.videoWidth()/this.player_.videoHeight();let l=0,h=0;.1<Math.abs(a-o)&&(o<a?l=Math.round((t-i*o)/2):h=Math.round((i-t/o)/2)),bn(this.el_,"insetInline",_u(l)),bn(this.el_,"insetBlock",_u(h))}}updateDisplayState(t){var i=this.player_.textTrackSettings.getValues(),a=t.activeCues;let o=a.length;for(;o--;){var l,h=a[o];h&&(h=h.displayState,i.color&&(h.firstChild.style.color=i.color),i.textOpacity&&bn(h.firstChild,"color",po(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(h.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&bn(h.firstChild,"backgroundColor",po(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?bn(h,"backgroundColor",po(i.windowColor,i.windowOpacity)):h.style.backgroundColor=i.windowColor),i.edgeStyle&&(i.edgeStyle==="dropshadow"?h.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":i.edgeStyle==="raised"?h.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":i.edgeStyle==="depressed"?h.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":i.edgeStyle==="uniform"&&(h.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),i.fontPercent&&i.fontPercent!==1&&(l=window.parseFloat(h.style.fontSize),h.style.fontSize=l*i.fontPercent+"px",h.style.height="auto",h.style.top="auto"),i.fontFamily)&&i.fontFamily!=="default"&&(i.fontFamily==="small-caps"?h.firstChild.style.fontVariant="small-caps":h.firstChild.style.fontFamily=Mp[i.fontFamily])}}updateForTrack(t){if(Array.isArray(t)||(t=[t]),typeof window.WebVTT=="function"&&!t.every(h=>!h.activeCues)){var i=[];for(let h=0;h<t.length;++h){var a=t[h];for(let T=0;T<a.activeCues.length;++T)i.push(a.activeCues[T])}window.WebVTT.processCues(window,i,this.el_);for(let h=0;h<t.length;++h){var o=t[h];for(let T=0;T<o.activeCues.length;++T){var l=o.activeCues[T].displayState;yt(l,"vjs-text-track-cue","vjs-text-track-cue-"+(o.language||h)),o.language&&et(l,"lang",o.language)}this.player_.textTrackSettings&&this.updateDisplayState(o)}}}}Ze.registerComponent("TextTrackDisplay",Up);class Fp extends Ze{createEl(){var t=this.player_.isAudio(),t=this.localize(t?"Audio Player":"Video Player"),t=be("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(t),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Ze.registerComponent("LoadingSpinner",Fp);class Bi extends Ys{createEl(t,i={},a={}){return i=be("button",i=Object.assign({className:this.buildCSSClass()},i),a=Object.assign({type:"button"},a)),this.player_.options_.experimentalSvgIcons||i.appendChild(be("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(t,i={}){var a=this.constructor.name;return S.warn(`Adding an actionable (user controllable) child to a Button (${a}) is not supported; use a ClickableComponent instead.`),Ze.prototype.addChild.call(this,t,i)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(t){t.key===" "||t.key==="Enter"?t.stopPropagation():super.handleKeyDown(t)}}Ze.registerComponent("Button",Bi);class Tu extends Bi{constructor(t,i){super(t,i),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",a=>this.handleMouseDown(a))}buildCSSClass(){return"vjs-big-play-button"}handleClick(t){var i=this.player_.play();if(this.mouseused_&&"clientX"in t&&"clientY"in t)vn(i),this.player_.tech(!0)&&this.player_.tech(!0).focus();else{var t=this.player_.getChild("controlBar");let o=t&&t.getChild("playToggle");o?(t=()=>o.focus(),Jr(i)?i.then(t,()=>{}):this.setTimeout(t,1)):this.player_.tech(!0).focus()}}handleKeyDown(t){this.mouseused_=!1,super.handleKeyDown(t)}handleMouseDown(t){this.mouseused_=!0}}Tu.prototype.controlText_="Play Video",Ze.registerComponent("BigPlayButton",Tu);class Bp extends Bi{constructor(t,i){super(t,i),this.setIcon("cancel"),this.controlText(i&&i.controlText||this.localize("Close"))}buildCSSClass(){return"vjs-close-button "+super.buildCSSClass()}handleClick(t){this.trigger({type:"close",bubbles:!1})}handleKeyDown(t){t.key==="Escape"?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}}Ze.registerComponent("CloseButton",Bp);class Su extends Bi{constructor(t,i={}){super(t,i),i.replay=i.replay===void 0||i.replay,this.setIcon("play"),this.on(t,"play",a=>this.handlePlay(a)),this.on(t,"pause",a=>this.handlePause(a)),i.replay&&this.on(t,"ended",a=>this.handleEnded(a))}buildCSSClass(){return"vjs-play-control "+super.buildCSSClass()}handleClick(t){this.player_.paused()?vn(this.player_.play()):this.player_.pause()}handleSeeked(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)}handlePlay(t){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",i=>this.handleSeeked(i))}}Su.prototype.controlText_="Play",Ze.registerComponent("PlayToggle",Su);class gr extends Ze{constructor(t,i){super(t,i),this.on(t,["timeupdate","ended","seeking"],a=>this.update(a)),this.updateTextNode_()}createEl(){var t=this.buildCSSClass(),i=super.createEl("div",{className:t+" vjs-time-control vjs-control"}),a=be("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});return i.appendChild(a),this.contentEl_=be("span",{className:t+"-display"},{role:"presentation"}),i.appendChild(this.contentEl_),i}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(t){!this.player_.options_.enableSmoothSeeking&&t.type==="seeking"||this.updateContent(t)}updateTextNode_(t=0){t=Jn(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(this.contentEl_){let i=this.textNode_;i&&this.contentEl_.firstChild!==i&&(i=null,S.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=document.createTextNode(this.formattedTime_),this.textNode_&&(i?this.contentEl_.replaceChild(this.textNode_,i):this.contentEl_.appendChild(this.textNode_))}}))}updateContent(t){}}gr.prototype.labelText_="Time",gr.prototype.controlText_="Time",Ze.registerComponent("TimeDisplay",gr);class fo extends gr{buildCSSClass(){return"vjs-current-time"}updateContent(t){let i;i=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(i)}}fo.prototype.labelText_="Current Time",fo.prototype.controlText_="Current Time",Ze.registerComponent("CurrentTimeDisplay",fo);class mo extends gr{constructor(t,i){super(t,i),i=a=>this.updateContent(a),this.on(t,"durationchange",i),this.on(t,"loadstart",i),this.on(t,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(t){var i=this.player_.duration();this.updateTextNode_(i)}}mo.prototype.labelText_="Duration",mo.prototype.controlText_="Duration",Ze.registerComponent("DurationDisplay",mo);class zp extends Ze{createEl(){var t=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=super.createEl("div"),a=super.createEl("span",{textContent:"/"});return i.appendChild(a),t.appendChild(i),t}}Ze.registerComponent("TimeDivider",zp);class go extends gr{constructor(t,i){super(t,i),this.on(t,"durationchange",a=>this.updateContent(a))}buildCSSClass(){return"vjs-remaining-time"}createEl(){var t=super.createEl();return this.options_.displayNegative!==!1&&t.insertBefore(be("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t}updateContent(t){if(typeof this.player_.duration()=="number"){let i;i=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(i)}}}go.prototype.labelText_="Remaining Time",go.prototype.controlText_="Remaining Time",Ze.registerComponent("RemainingTimeDisplay",go);class jp extends Ze{constructor(t,i){super(t,i),this.updateShowing(),this.on(this.player(),"durationchange",a=>this.updateShowing(a))}createEl(){var t=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=be("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(be("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"})),this.contentEl_.appendChild(document.createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,super.dispose()}updateShowing(t){this.player().duration()===1/0?this.show():this.hide()}}Ze.registerComponent("LiveDisplay",jp);class wu extends Bi{constructor(t,i){super(t,i),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=a=>this.updateLiveEdgeStatus(a),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){var t=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",t),this.textEl_=be("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function as(s,t,i){return s=Number(s),Math.min(i,Math.max(t,isNaN(s)?t:s))}wu.prototype.controlText_="Seek to live, currently playing live",Ze.registerComponent("SeekToLive",wu),Ws=Object.freeze({__proto__:null,clamp:as});class yo extends Ze{constructor(t,i){super(t,i),this.handleMouseDown_=a=>this.handleMouseDown(a),this.handleMouseUp_=a=>this.handleMouseUp(a),this.handleKeyDown_=a=>this.handleKeyDown(a),this.handleClick_=a=>this.handleClick(a),this.handleMouseMove_=a=>this.handleMouseMove(a),this.update_=a=>this.update(a),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){var t;this.enabled()&&(t=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)}createEl(t,i={},a={}){return i.className=i.className+" vjs-slider",i=Object.assign({tabIndex:0},i),a=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},a),super.createEl(t,i,a)}handleMouseDown(t){var i=this.bar.el_.ownerDocument;t.type==="mousedown"&&t.preventDefault(),t.type!=="touchstart"||U||t.preventDefault(),It(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove_),this.on(i,"mouseup",this.handleMouseUp_),this.on(i,"touchmove",this.handleMouseMove_),this.on(i,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)}handleMouseMove(t){}handleMouseUp(t){var i=this.bar.el_.ownerDocument;at(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()}update(){if(this.el_&&this.bar){let t=this.getProgress();return t!==this.progress_&&(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",()=>{var i=this.vertical()?"height":"width";this.bar.el().style[i]=(100*t).toFixed(2)+"%"})),t}}getProgress(){return Number(as(this.getPercent(),0,1).toFixed(4))}calculateDistance(t){return t=Je(this.el_,t),this.vertical()?t.y:t.x}handleKeyDown(t){var a=this.options_.playerOptions.spatialNavigation,i=a&&a.enabled,a=a&&a.horizontalSeek;i?a&&t.key==="ArrowLeft"||!a&&t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepBack()):a&&t.key==="ArrowRight"||!a&&t.key==="ArrowUp"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t):t.key==="ArrowLeft"||t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepBack()):t.key==="ArrowUp"||t.key==="ArrowRight"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t)}handleClick(t){t.stopPropagation(),t.preventDefault()}vertical(t){if(t===void 0)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Ze.registerComponent("Slider",yo);let vo=(s,t)=>as(s/t*100,0,100).toFixed(2)+"%";class Hp extends Ze{constructor(t,i){super(t,i),this.partEls_=[],this.on(t,"progress",a=>this.update(a))}createEl(){var t=super.createEl("div",{className:"vjs-load-progress"}),i=be("span",{className:"vjs-control-text"}),a=be("span",{textContent:this.localize("Loaded")}),o=document.createTextNode(": ");return this.percentageEl_=be("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(i),i.appendChild(a),i.appendChild(o),i.appendChild(this.percentageEl_),t}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(t){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{var l=this.player_.liveTracker,i=this.player_.buffered(),l=l&&l.isLive()?l.seekableEnd():this.player_.duration(),a=this.player_.bufferedEnd(),o=this.partEls_,l=vo(a,l);this.percent_!==l&&(this.el_.style.width=l,Fe(this.percentageEl_,l),this.percent_=l);for(let B=0;B<i.length;B++){var h=i.start(B),T=i.end(B);let G=o[B];G||(G=this.el_.appendChild(be()),o[B]=G),G.dataset.start===h&&G.dataset.end===T||(G.dataset.start=h,G.dataset.end=T,G.style.left=vo(h,a),G.style.width=vo(T-h,a))}for(let B=o.length;B>i.length;B--)this.el_.removeChild(o[B-1]);o.length=i.length})}}Ze.registerComponent("LoadProgressBar",Hp);class qp extends Ze{constructor(t,i){super(t,i),this.update=Yt(Kt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(t,h,a){var o=Ke(this.el_),l=vt(this.player_.el()),h=t.width*h;if(l&&o){let T=t.left-l.left+h,B=t.width-h+(l.right-t.right),G=(B||(B=t.width-h,T=h),o.width/2);T<G?G+=G-T:B<G&&(G=B),G<0?G=0:G>o.width&&(G=o.width),G=Math.round(G),this.el_.style.right=`-${G}px`,this.write(a)}}write(t){Fe(this.el_,t)}updateTime(t,i,a,o){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let l;var h,T,B=this.player_.duration();l=this.player_.liveTracker&&this.player_.liveTracker.isLive()?((T=(h=this.player_.liveTracker.liveWindow())-i*h)<1?"":"-")+Jn(T,h):Jn(a,B),this.update(t,i,l),o&&o()})}}Ze.registerComponent("TimeTooltip",qp);class bo extends Ze{constructor(t,i){super(t,i),this.setIcon("circle"),this.update=Yt(Kt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(t,i){var a,o=this.getChild("timeTooltip");o&&(a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),o.updateTime(t,i,a))}}bo.prototype.options_={children:[]},Re||$||bo.prototype.options_.children.push("timeTooltip"),Ze.registerComponent("PlayProgressBar",bo);class Eu extends Ze{constructor(t,i){super(t,i),this.update=Yt(Kt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,i){var a=i*this.player_.duration();this.getChild("timeTooltip").updateTime(t,i,a,()=>{this.el_.style.left=t.width*i+"px"})}}Eu.prototype.options_={children:["timeTooltip"]},Ze.registerComponent("MouseTimeDisplay",Eu);class Zs extends yo{constructor(t,i){(i=Z(Zs.prototype.options_,i)).children=[...i.children];var a=t.options_.disableSeekWhileScrubbingOnMobile&&(Re||$);(Re||$)&&!a||i.children.splice(1,0,"mouseTimeDisplay"),super(t,i),this.shouldDisableSeekWhileScrubbingOnMobile_=a,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=Kt(this,this.update),this.update=Yt(this.update_,30),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=t=>this.enableInterval_(t),this.disableIntervalHandler_=t=>this.disableInterval_(t),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.on(document,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(t){document.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(t){if(document.visibilityState!=="hidden"){let i=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{var a=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),o=this.player_.liveTracker;let l=this.player_.duration();o&&o.isLive()&&(l=this.player_.liveTracker.liveCurrentTime()),this.percent_!==i&&(this.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),this.percent_=i),this.currentTime_===a&&this.duration_===l||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Jn(a,l),Jn(l,l)],"{1} of {2}")),this.currentTime_=a,this.duration_=l),this.bar&&this.bar.update(vt(this.el()),this.getProgress())}),i}}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){if(this.pendingSeekTime_)return this.pendingSeekTime_/this.player_.duration();var t=this.getCurrentTime_();let i;var a=this.player_.liveTracker;return a&&a.isLive()?(i=(t-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(i=1)):i=t/this.player_.duration(),i}handleMouseDown(t){_t(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbingOnMobile_||this.player_.pause(),super.handleMouseDown(t))}handleMouseMove(t,i=!1){if(_t(t)&&!isNaN(this.player_.duration())){i||this.player_.scrubbing()||this.player_.scrubbing(!0);let l;if(i=this.calculateDistance(t),t=this.player_.liveTracker,t&&t.isLive()){if(.99<=i)return void t.seekToLiveEdge();var a=t.seekableStart(),o=t.liveCurrentTime();if((l=(l=(l=a+i*t.liveWindow())>=o?o:l)<=a?a+.1:l)===1/0)return}else(l=i*this.player_.duration())===this.player_.duration()&&(l-=.1);this.shouldDisableSeekWhileScrubbingOnMobile_?this.pendingSeekTime_=l:this.userSeek_(l),this.player_.options_.enableSmoothSeeking&&this.update()}}enable(){super.enable();var t=this.getChild("mouseTimeDisplay");t&&t.show()}disable(){super.disable();var t=this.getChild("mouseTimeDisplay");t&&t.hide()}handleMouseUp(t){super.handleMouseUp(t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime_&&(this.userSeek_(this.pendingSeekTime_),this.pendingSeekTime_=null),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?vn(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(t){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(t){var i,a=this.player_.liveTracker;t.key===" "||t.key==="Enter"?(t.preventDefault(),t.stopPropagation(),this.handleAction(t)):t.key==="Home"?(t.preventDefault(),t.stopPropagation(),this.userSeek_(0)):t.key==="End"?(t.preventDefault(),t.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration())):/^[0-9]$/.test(t.key)?(t.preventDefault(),t.stopPropagation(),i=.1*parseInt(t.key,10),a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*i):this.userSeek_(this.player_.duration()*i)):t.key==="PageDown"?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):t.key==="PageUp"?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(t)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.off(document,"visibilitychange",this.toggleVisibility_),super.dispose()}}Zs.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ze.registerComponent("SeekBar",Zs);class Cu extends Ze{constructor(t,i){super(t,i),this.handleMouseMove=Yt(Kt(this,this.handleMouseMove),30),this.throttledHandleMouseSeek=Yt(Kt(this,this.handleMouseSeek),30),this.handleMouseUpHandler_=a=>this.handleMouseUp(a),this.handleMouseDownHandler_=a=>this.handleMouseDown(a),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(t){var i,a,o,l,h=this.getChild("seekBar");h&&(i=h.getChild("playProgressBar"),a=h.getChild("mouseTimeDisplay"),i||a)&&(o=Ke(l=h.el()),l=as(l=Je(l,t).x,0,1),a&&a.update(o,l),i)&&i.update(o,h.getProgress())}handleMouseSeek(t){var i=this.getChild("seekBar");i&&i.handleMouseMove(t)}enabled(){return this.enabled_}disable(){var t;this.children().forEach(i=>i.disable&&i.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())&&(t=this.getChild("seekBar"),this.player_.scrubbing(!1),t.videoWasPlaying)&&vn(this.player_.play())}enable(){this.children().forEach(t=>t.enable&&t.enable()),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseDown(t){var i=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(t),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){var i=this.getChild("seekBar");i&&i.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()}}Cu.prototype.options_={children:["seekBar"]},Ze.registerComponent("ProgressControl",Cu);class xu extends Bi{constructor(t,i){super(t,i),this.setIcon("picture-in-picture-enter"),this.on(t,["enterpictureinpicture","leavepictureinpicture"],a=>this.handlePictureInPictureChange(a)),this.on(t,["disablepictureinpicturechanged","loadedmetadata"],a=>this.handlePictureInPictureEnabledChange(a)),this.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return"vjs-picture-in-picture-control vjs-hidden "+super.buildCSSClass()}handlePictureInPictureAudioModeChange(){this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){document.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in window?this.enable():this.disable()}handlePictureInPictureChange(t){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof document.exitPictureInPicture=="function"&&super.show()}}xu.prototype.controlText_="Picture-in-Picture",Ze.registerComponent("PictureInPictureToggle",xu);class ku extends Bi{constructor(t,i){super(t,i),this.setIcon("fullscreen-enter"),this.on(t,"fullscreenchange",a=>this.handleFullscreenChange(a)),document[t.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return"vjs-fullscreen-control "+super.buildCSSClass()}handleFullscreenChange(t){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}ku.prototype.controlText_="Fullscreen",Ze.registerComponent("FullscreenToggle",ku);class Vp extends Ze{createEl(){var t=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",t),t.appendChild(super.createEl("span",{className:"vjs-control-text"})),t}}Ze.registerComponent("VolumeLevel",Vp);class Wp extends Ze{constructor(t,i){super(t,i),this.update=Yt(Kt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(t,i,a,o){if(!a){var a=vt(this.el_),l=vt(this.player_.el()),i=t.width*i;if(!l||!a)return;var h=t.left-l.left+i,i=t.width-i+(l.right-t.right);let G=a.width/2;h<G?G+=G-h:i<G&&(G=i),G<0?G=0:G>a.width&&(G=a.width),this.el_.style.right=`-${G}px`}this.write(o+"%")}write(t){Fe(this.el_,t)}updateVolume(t,i,a,o,l){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(t,i,a,o.toFixed(0)),l&&l()})}}Ze.registerComponent("VolumeLevelTooltip",Wp);class Nu extends Ze{constructor(t,i){super(t,i),this.update=Yt(Kt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,i,a){var o=100*i;this.getChild("volumeLevelTooltip").updateVolume(t,i,a,o,()=>{a?this.el_.style.bottom=t.height*i+"px":this.el_.style.left=t.width*i+"px"})}}Nu.prototype.options_={children:["volumeLevelTooltip"]},Ze.registerComponent("MouseVolumeLevelDisplay",Nu);class Qs extends yo{constructor(t,i){super(t,i),this.on("slideractive",a=>this.updateLastVolume_(a)),this.on(t,"volumechange",a=>this.updateARIAAttributes(a)),t.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(t){_t(t)&&super.handleMouseDown(t)}handleMouseMove(t){var i,a,o,l=this.getChild("mouseVolumeLevelDisplay");l&&(i=vt(o=this.el()),a=this.vertical(),o=Je(o,t),o=as(o=a?o.y:o.x,0,1),l.update(i,o,a)),_t(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(t){var i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){let t=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(t)})}}Qs.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Re||$||Qs.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Qs.prototype.playerEvent="volumechange",Ze.registerComponent("VolumeBar",Qs);class Au extends Ze{constructor(t,i={}){var a,o;i.vertical=i.vertical||!1,typeof i.volumeBar<"u"&&!V(i.volumeBar)||(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),super(t,i),a=this,(o=t).tech_&&!o.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(o,"loadstart",function(){o.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")}),this.throttledHandleMouseMove=Yt(Kt(this,this.handleMouseMove),30),this.handleMouseUpHandler_=l=>this.handleMouseUp(l),this.on("mousedown",l=>this.handleMouseDown(l)),this.on("touchstart",l=>this.handleMouseDown(l)),this.on("mousemove",l=>this.handleMouseMove(l)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),super.createEl("div",{className:"vjs-volume-control vjs-control "+t})}handleMouseDown(t){var i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)}handleMouseMove(t){this.volumeBar.handleMouseMove(t)}}Au.prototype.options_={children:["volumeBar"]},Ze.registerComponent("VolumeControl",Au);class Iu extends Bi{constructor(t,i){var a,o;super(t,i),a=this,(o=t).tech_&&!o.tech_.featuresMuteControl&&a.addClass("vjs-hidden"),a.on(o,"loadstart",function(){o.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")}),this.on(t,["loadstart","volumechange"],l=>this.update(l))}buildCSSClass(){return"vjs-mute-control "+super.buildCSSClass()}handleClick(t){var i=this.player_.volume(),a=this.player_.lastVolume_();i===0?(this.player_.volume(a<.1?.1:a),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())}update(t){this.updateIcon_(),this.updateControlText_()}updateIcon_(){var t=this.player_.volume();let i=3;this.setIcon("volume-high"),Re&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),t===0||this.player_.muted()?(this.setIcon("volume-mute"),i=0):t<.33?(this.setIcon("volume-low"),i=1):t<.67&&(this.setIcon("volume-medium"),i=2),At(this.el_,[0,1,2,3].reduce((a,o)=>a+`${o?" ":""}vjs-vol-`+o,"")),yt(this.el_,"vjs-vol-"+i)}updateControlText_(){var t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}Iu.prototype.controlText_="Mute",Ze.registerComponent("MuteToggle",Iu);class Ou extends Ze{constructor(t,i={}){typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,typeof i.volumeControl<"u"&&!V(i.volumeControl)||(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),super(t,i),this.handleKeyPressHandler_=a=>this.handleKeyPress(a),this.on(t,["loadstart"],a=>this.volumePanelState_(a)),this.on(this.muteToggle,"keyup",a=>this.handleKeyPress(a)),this.on(this.volumeControl,"keyup",a=>this.handleVolumeControlKeyUp(a)),this.on("keydown",a=>this.handleKeyPress(a)),this.on("mouseover",a=>this.handleMouseOver(a)),this.on("mouseout",a=>this.handleMouseOut(a)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),super.createEl("div",{className:"vjs-volume-panel vjs-control "+t})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(t){t.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(t){this.addClass("vjs-hover"),Vt(document,"keyup",this.handleKeyPressHandler_)}handleMouseOut(t){this.removeClass("vjs-hover"),kt(document,"keyup",this.handleKeyPressHandler_)}handleKeyPress(t){t.key==="Escape"&&this.handleMouseOut()}}Ou.prototype.options_={children:["muteToggle","volumeControl"]},Ze.registerComponent("VolumePanel",Ou);class Du extends Bi{constructor(t,i){super(t,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon("forward-"+this.skipTime),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(t.language())])),this.show()):this.hide()}getSkipForwardTime(){var t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} `+super.buildCSSClass()}handleClick(t){if(!isNaN(this.player_.duration())){var i=this.player_.currentTime(),a=this.player_.liveTracker,a=a&&a.isLive()?a.seekableEnd():this.player_.duration();let o;o=i+this.skipTime<=a?i+this.skipTime:a,this.player_.currentTime(o)}}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}Du.prototype.controlText_="Skip Forward",Ze.registerComponent("SkipForward",Du);class Pu extends Bi{constructor(t,i){super(t,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon("replay-"+this.skipTime),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(t.language())])),this.show()):this.hide()}getSkipBackwardTime(){var t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} `+super.buildCSSClass()}handleClick(t){var i=this.player_.currentTime(),a=this.player_.liveTracker,a=a&&a.isLive()&&a.seekableStart();let o;o=a&&i-this.skipTime<=a?a:i>=this.skipTime?i-this.skipTime:0,this.player_.currentTime(o)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}Pu.prototype.controlText_="Skip Backward",Ze.registerComponent("SkipBackward",Pu);class Ru extends Ze{constructor(t,i){super(t,i),i&&(this.menuButton_=i.menuButton),this.focusedChild_=-1,this.on("keydown",a=>this.handleKeyDown(a)),this.boundHandleBlur_=a=>this.handleBlur(a),this.boundHandleTapClick_=a=>this.handleTapClick(a)}addEventListenerForItem(t){t instanceof Ze&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(t){t instanceof Ze&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))}removeChild(t){typeof t=="string"&&(t=this.getChild(t)),this.removeEventListenerForItem(t),super.removeChild(t)}addItem(t){t=this.addChild(t),t&&this.addEventListenerForItem(t)}createEl(){var t=this.options_.contentElType||"ul",t=(this.contentEl_=be(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu"),super.createEl("div",{append:this.contentEl_,className:"vjs-menu"}));return t.appendChild(this.contentEl_),Vt(t,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(t){let i=t.relatedTarget||document.activeElement;this.children().some(a=>a.el()===i)||(t=this.menuButton_)&&t.buttonPressed_&&i!==t.el().firstChild&&t.unpressButton()}handleTapClick(t){var i;this.menuButton_&&(this.menuButton_.unpressButton(),i=this.children(),Array.isArray(i))&&(i=i.filter(a=>a.el()===t.target)[0])&&i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}handleKeyDown(t){t.key==="ArrowLeft"||t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):t.key!=="ArrowRight"&&t.key!=="ArrowUp"||(t.preventDefault(),t.stopPropagation(),this.stepBack())}stepForward(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_+1),this.focus(t)}stepBack(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_-1),this.focus(t)}focus(t=0){var i=this.children().slice();i.length&&i[0].hasClass("vjs-menu-title")&&i.shift(),0<i.length&&(t<0?t=0:i.length<=t&&(t=i.length-1),i[this.focusedChild_=t].el_.focus())}}Ze.registerComponent("Menu",Ru);class _o extends Ze{constructor(t,i={}){super(t,i),this.menuButton_=new Bi(t,i),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true"),t=Bi.prototype.buildCSSClass(),this.menuButton_.el_.className=this.buildCSSClass()+" "+t,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0,i=a=>this.handleClick(a),this.handleMenuKeyUp_=a=>this.handleMenuKeyUp(a),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",a=>this.handleKeyDown(a)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Vt(document,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",a=>this.handleMouseLeave(a)),this.on("keydown",a=>this.handleSubmenuKeyDown(a))}update(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){var t,i=new Ru(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(t=be("li",{className:"vjs-menu-title",textContent:_i(this.options_.title),tabIndex:-1}),t=new Ze(this.player_,{el:t}),i.addItem(t)),this.items=this.createItems(),this.items)for(let a=0;a<this.items.length;a++)i.addItem(this.items[a]);return i}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(t){super.setIcon(t,this.menuButton_.el_)}buildWrapperCSSClass(){let t="vjs-menu-button";this.options_.inline===!0?t+="-inline":t+="-popup";var i=Bi.prototype.buildCSSClass();return`vjs-menu-button ${t} ${i} `+super.buildCSSClass()}buildCSSClass(){let t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup",`vjs-menu-button ${t} `+super.buildCSSClass()}controlText(t,i=this.menuButton_.el()){return this.menuButton_.controlText(t,i)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(t){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(t){this.removeClass("vjs-hover"),kt(document,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(t){t.key==="Escape"||t.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!t.key==="Tab"&&(t.preventDefault(),this.menuButton_.focus())):t.key!=="Up"&&(t.key!=="Down"||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)||this.buttonPressed_||(t.preventDefault(),this.pressButton())}handleMenuKeyUp(t){t.key!=="Escape"&&t.key!=="Tab"||this.removeClass("vjs-hover")}handleSubmenuKeyPress(t){this.handleSubmenuKeyDown(t)}handleSubmenuKeyDown(t){t.key!=="Escape"&&t.key!=="Tab"||(this.buttonPressed_&&this.unpressButton(),!t.key==="Tab"&&(t.preventDefault(),this.menuButton_.focus()))}pressButton(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Re&&ue()||this.menu.focus())}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Ze.registerComponent("MenuButton",_o);class To extends _o{constructor(t,i){let a=i.tracks;if(super(t,i),this.items.length<=1&&this.hide(),a){let o=Kt(this,this.update);a.addEventListener("removetrack",o),a.addEventListener("addtrack",o),a.addEventListener("labelchange",o),this.player_.on("ready",o),this.player_.on("dispose",function(){a.removeEventListener("removetrack",o),a.removeEventListener("addtrack",o),a.removeEventListener("labelchange",o)})}}}Ze.registerComponent("TrackButton",To);class os extends Ys{constructor(t,i){super(t,i),this.selectable=i.selectable,this.isSelected_=i.selected||!1,this.multiSelectable=i.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(t,i,a){return this.nonIconControl=!0,i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},i),a),a=be("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),this.player_.options_.experimentalSvgIcons?i.appendChild(a):i.replaceChild(a,i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(t){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(t.key)||super.handleKeyDown(t)}handleClick(t){this.selected(!0)}selected(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Ze.registerComponent("MenuItem",os);class ls extends os{constructor(t,i){var a=i.track;let o=t.textTracks(),l=(i.label=a.label||a.language||"Unknown",i.selected=a.mode==="showing",super(t,i),this.track=a,this.kinds=(i.kinds||[i.kind||this.track.kind]).filter(Boolean),(...T)=>{this.handleTracksChange.apply(this,T)}),h=(...T)=>{this.handleSelectedLanguageChange.apply(this,T)};if(t.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",h),this.on("dispose",function(){t.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",h)}),o.onchange===void 0){let T;this.on(["tap","click"],function(){if(typeof window.Event!="object")try{T=new window.Event("change")}catch{}T||(T=document.createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(T)})}this.handleTracksChange()}handleClick(t){var i=this.track,a=this.player_.textTracks();if(super.handleClick(t),a)for(let l=0;l<a.length;l++){var o=a[l];this.kinds.indexOf(o.kind)!==-1&&(o===i?o.mode!=="showing"&&(o.mode="showing"):o.mode!=="disabled"&&(o.mode="disabled"))}}handleTracksChange(t){var i=this.track.mode==="showing";i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(t){var i;this.track.mode!=="showing"||(i=this.player_.cache_.selectedLanguage)&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind})}dispose(){this.track=null,super.dispose()}}Ze.registerComponent("TextTrackMenuItem",ls);class Lu extends ls{constructor(t,i){i.track={player:t,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.track.label=i.label||i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,super(t,i)}handleTracksChange(t){var i=this.player().textTracks();let a=!0;for(let l=0,h=i.length;l<h;l++){var o=i[l];if(-1<this.options_.kinds.indexOf(o.kind)&&o.mode==="showing"){a=!1;break}}a!==this.isSelected_&&this.selected(a)}handleSelectedLanguageChange(t){var i=this.player().textTracks();let a=!0;for(let l=0,h=i.length;l<h;l++){var o=i[l];if(-1<["captions","descriptions","subtitles"].indexOf(o.kind)&&o.mode==="showing"){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Ze.registerComponent("OffTextTrackMenuItem",Lu);class yr extends To{constructor(t,i={}){i.tracks=t.textTracks(),super(t,i)}createItems(t=[],i=ls){let a;this.label_&&(a=this.label_+" off"),t.push(new Lu(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let T=0;T<o.length;T++){var l,h=o[T];-1<this.kinds_.indexOf(h.kind)&&((l=new i(this.player_,{track:h,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1})).addClass(`vjs-${h.kind}-menu-item`),t.push(l))}return t}}Ze.registerComponent("TextTrackButton",yr);class Mu extends os{constructor(t,i){var a=i.track,o=i.cue,l=t.currentTime();i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=l&&l<o.endTime,super(t,i),this.track=a,this.cue=o}handleClick(t){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Ze.registerComponent("ChaptersTrackMenuItem",Mu);class So extends yr{constructor(t,i,a){super(t,i,a),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(o=>{o.selected(this.track_.activeCues[0]===o.cue)})}}buildCSSClass(){return"vjs-chapters-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-chapters-button "+super.buildWrapperCSSClass()}update(t){t&&t.track&&t.track.kind!=="chapters"||((t=this.findChaptersTrack())!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update())}setTrack(t){var i;this.track_!==t&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&i.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null),this.track_=t,this.track_)&&(this.track_.mode="hidden",(i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_))}findChaptersTrack(){var t=this.player_.textTracks()||[];for(let a=t.length-1;0<=a;a--){var i=t[a];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(_i(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){var t=[];if(this.track_){var i=this.track_.cues;if(i)for(let o=0,l=i.length;o<l;o++){var a=i[o],a=new Mu(this.player_,{track:this.track_,cue:a});t.push(a)}}return t}}So.prototype.kind_="chapters",So.prototype.controlText_="Chapters",Ze.registerComponent("ChaptersButton",So);class wo extends yr{constructor(t,i,a){super(t,i,a),this.setIcon("audio-description");let o=t.textTracks(),l=Kt(this,this.handleTracksChange);o.addEventListener("change",l),this.on("dispose",function(){o.removeEventListener("change",l)})}handleTracksChange(t){var i=this.player().textTracks();let a=!1;for(let l=0,h=i.length;l<h;l++){var o=i[l];if(o.kind!==this.kind_&&o.mode==="showing"){a=!0;break}}a?this.disable():this.enable()}buildCSSClass(){return"vjs-descriptions-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-descriptions-button "+super.buildWrapperCSSClass()}}wo.prototype.kind_="descriptions",wo.prototype.controlText_="Descriptions",Ze.registerComponent("DescriptionsButton",wo);class Eo extends yr{constructor(t,i,a){super(t,i,a),this.setIcon("subtitles")}buildCSSClass(){return"vjs-subtitles-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-subtitles-button "+super.buildWrapperCSSClass()}}Eo.prototype.kind_="subtitles",Eo.prototype.controlText_="Subtitles",Ze.registerComponent("SubtitlesButton",Eo);class Co extends ls{constructor(t,i){i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",super(t,i),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+i.kind+" settings dialog")}handleClick(t){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Ze.registerComponent("CaptionSettingsMenuItem",Co);class xo extends yr{constructor(t,i,a){super(t,i,a),this.setIcon("captions")}buildCSSClass(){return"vjs-captions-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-captions-button "+super.buildWrapperCSSClass()}createItems(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Co(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(t)}}xo.prototype.kind_="captions",xo.prototype.controlText_="Captions",Ze.registerComponent("CaptionsButton",xo);class Uu extends ls{createEl(t,i,a){return t=super.createEl(t,i,a),i=t.querySelector(".vjs-menu-item-text"),this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",t):i.appendChild(be("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(be("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),t}}Ze.registerComponent("SubsCapsMenuItem",Uu);class ko extends yr{constructor(t,i={}){super(t,i),this.label_="subtitles",this.setIcon("subtitles"),-1<["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(_i(this.label_))}buildCSSClass(){return"vjs-subs-caps-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-subs-caps-button "+super.buildWrapperCSSClass()}createItems(){let t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Co(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=super.createItems(t,Uu)}}ko.prototype.kinds_=["captions","subtitles"],ko.prototype.controlText_="Subtitles",Ze.registerComponent("SubsCapsButton",ko);class Fu extends os{constructor(t,i){var a=i.track;let o=t.audioTracks(),l=(i.label=a.label||a.language||"Unknown",i.selected=a.enabled,super(t,i),this.track=a,this.addClass(`vjs-${a.kind}-menu-item`),(...h)=>{this.handleTracksChange.apply(this,h)});o.addEventListener("change",l),this.on("dispose",()=>{o.removeEventListener("change",l)})}createEl(t,i,a){return t=super.createEl(t,i,a),i=t.querySelector(".vjs-menu-item-text"),0<=["main-desc","descriptions"].indexOf(this.options_.track.kind)&&(i.appendChild(be("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(be("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),t}handleClick(t){if(super.handleClick(t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){var i=this.player_.audioTracks();for(let o=0;o<i.length;o++){var a=i[o];a!==this.track&&(a.enabled=a===this.track)}}}handleTracksChange(t){this.selected(this.track.enabled)}}Ze.registerComponent("AudioTrackMenuItem",Fu);class Bu extends To{constructor(t,i={}){i.tracks=t.audioTracks(),super(t,i),this.setIcon("audio")}buildCSSClass(){return"vjs-audio-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-audio-button "+super.buildWrapperCSSClass()}createItems(t=[]){this.hideThreshold_=1;var i=this.player_.audioTracks();for(let o=0;o<i.length;o++){var a=i[o];t.push(new Fu(this.player_,{track:a,selectable:!0,multiSelectable:!1}))}return t}}Bu.prototype.controlText_="Audio Track",Ze.registerComponent("AudioTrackButton",Bu);class No extends os{constructor(t,i){var a=i.rate,o=parseFloat(a,10);i.label=a,i.selected=o===t.playbackRate(),i.selectable=!0,i.multiSelectable=!1,super(t,i),this.label=a,this.rate=o,this.on(t,"ratechange",l=>this.update(l))}handleClick(t){super.handleClick(),this.player().playbackRate(this.rate)}update(t){this.selected(this.player().playbackRate()===this.rate)}}No.prototype.contentElType="button",Ze.registerComponent("PlaybackRateMenuItem",No);class zu extends _o{constructor(t,i){super(t,i),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(t,"loadstart",a=>this.updateVisibility(a)),this.on(t,"ratechange",a=>this.updateLabel(a)),this.on(t,"playbackrateschange",a=>this.handlePlaybackRateschange(a))}createEl(){var t=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=be("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return"vjs-playback-rate "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-playback-rate "+super.buildWrapperCSSClass()}createItems(){var t=this.playbackRates(),i=[];for(let a=t.length-1;0<=a;a--)i.push(new No(this.player(),{rate:t[a]+"x"}));return i}handlePlaybackRateschange(t){this.update()}playbackRates(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length}updateVisibility(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}zu.prototype.controlText_="Playback Rate",Ze.registerComponent("PlaybackRateMenuButton",zu);class ju extends Ze{buildCSSClass(){return"vjs-spacer "+super.buildCSSClass()}createEl(t="div",i={},a={}){return i.className||(i.className=this.buildCSSClass()),super.createEl(t,i,a)}}Ze.registerComponent("Spacer",ju);class Xp extends ju{buildCSSClass(){return"vjs-custom-control-spacer "+super.buildCSSClass()}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xA0"})}}Ze.registerComponent("CustomControlSpacer",Xp);class Hu extends Ze{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}Hu.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},Ze.registerComponent("ControlBar",Hu);class qu extends pr{constructor(t,i){super(t,i),this.on(t,"error",a=>{this.open(a)})}buildCSSClass(){return"vjs-error-display "+super.buildCSSClass()}content(){var t=this.player().error();return t?this.localize(t.message):""}}qu.prototype.options_=Object.assign({},pr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Ze.registerComponent("ErrorDisplay",qu);class Vu extends Ze{constructor(t,i={}){super(t,i),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),be("select",{id:this.options_.id},{},this.options_.SelectOptions.map(a=>{var i=(this.options_.labelId||"vjs-track-option-"+Be++)+"-"+a[1].replace(/\W+/g,""),a=be("option",{id:i,value:this.localize(a[0]),textContent:this.localize(a[1])});return a.setAttribute("aria-labelledby",this.selectLabelledbyIds+" "+i),a}))}}Ze.registerComponent("TextTrackSelect",Vu);class ir extends Ze{constructor(t,o={}){super(t,o);var a,o=be("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId}),o=(this.el().appendChild(o),this.options_.selects);for(a of o){var l=this.options_.selectConfigs[a],B=l.className,h=l.id.replace("%s",this.options_.id_);let G=null;var T="vjs_select_"+Be++,B=(this.options_.type==="colors"&&(G=be("span",{className:B}),(B=be("label",{id:h,className:"vjs-label",textContent:this.localize(l.label)})).setAttribute("for",T),G.appendChild(B)),new Vu(t,{SelectOptions:l.options,legendId:this.options_.legendId,id:T,labelId:h}));this.addChild(B),this.options_.type==="colors"&&(G.appendChild(B.el()),this.el().appendChild(G))}}createEl(){return be("fieldset",{className:this.options_.className})}}Ze.registerComponent("TextTrackFieldset",ir);class Wu extends Ze{constructor(t,a={}){super(t,a);var a=this.options_.textTrackComponentid,o=new ir(t,{id_:a,legendId:"captions-text-legend-"+a,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"}),o=(this.addChild(o),new ir(t,{id_:a,legendId:"captions-background-"+a,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"})),o=(this.addChild(o),new ir(t,{id_:a,legendId:"captions-window-"+a,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"}));this.addChild(o)}createEl(){return be("div",{className:"vjs-track-settings-colors"})}}Ze.registerComponent("TextTrackSettingsColors",Wu);class Xu extends Ze{constructor(t,a={}){super(t,a);var a=this.options_.textTrackComponentid,o=new ir(t,{id_:a,legendId:"captions-font-size-"+a,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"}),o=(this.addChild(o),new ir(t,{id_:a,legendId:"captions-edge-style-"+a,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"})),o=(this.addChild(o),new ir(t,{id_:a,legendId:"captions-font-family-"+a,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"}));this.addChild(o)}createEl(){return be("div",{className:"vjs-track-settings-font"})}}Ze.registerComponent("TextTrackSettingsFont",Xu);class Gu extends Ze{constructor(t,a={}){super(t,a);var a=this.localize("restore all settings to the default values"),o=new Bi(t,{controlText:a,className:"vjs-default-button"}),o=(o.el().classList.remove("vjs-control","vjs-button"),o.el().textContent=this.localize("Reset"),this.addChild(o),new Bi(t,{controlText:a,className:"vjs-done-button"}));o.el().classList.remove("vjs-control","vjs-button"),o.el().textContent=this.localize("Done"),this.addChild(o)}createEl(){return be("div",{className:"vjs-track-settings-controls"})}}Ze.registerComponent("TrackSettingsControls",Gu);let Ao="vjs-text-track-settings";var vi=["#000","Black"],Xi=["#00F","Blue"],da=["#0FF","Cyan"],_r=["#0F0","Green"],Oi=["#F0F","Magenta"],nr=["#F00","Red"],_n=["#FFF","White"],Fi=["#FF0","Yellow"],Ar=["1","Opaque"],xr=["0.5","Semi-Transparent"],Cr=["0","Transparent"];let Bn={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[vi,_n,nr,_r,Xi,Fi,Oi,da],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Ar,xr,Cr],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[_n,vi,nr,_r,Xi,Fi,Oi,da],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:s=>s==="1.00"?null:Number(s)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Ar,xr],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[Cr,xr,Ar],className:"vjs-window-opacity vjs-opacity"}};function $u(s,t){if((s=t?t(s):s)&&s!=="none")return s}Bn.windowColor.options=Bn.backgroundColor.options;class Gp extends pr{constructor(t,i){i.temporary=!1,super(t,i),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(t),this.endDialog=be("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),i.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(t){var i=new Wu(t,{textTrackComponentid:this.id_,selectConfigs:Bn,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]}),i=(this.addChild(i),new Xu(t,{textTrackComponentid:this.id_,selectConfigs:Bn,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]})),i=(this.addChild(i),new Gu(t));this.addChild(i)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),v(Bn,t=>{this.on(this.$(t.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return m(Bn,(t,i,a)=>{o=this.$(i.selector),i=i.parser;var o=$u(o.options[o.options.selectedIndex].value,i);return o!==void 0&&(t[a]=o),t},{})}setValues(t){v(Bn,(i,a)=>{var o=this.$(i.selector),l=t[a],h=i.parser;if(l){for(let T=0;T<o.options.length;T++)if($u(o.options[T].value,h)===l){o.selectedIndex=T;break}}})}setDefaults(){v(Bn,t=>{var i=t.hasOwnProperty("default")?t.default:0;this.$(t.selector).selectedIndex=i})}restoreSettings(){let t;try{t=JSON.parse(window.localStorage.getItem(Ao))}catch(i){S.warn(i)}t&&this.setValues(t)}saveSettings(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?window.localStorage.setItem(Ao,JSON.stringify(t)):window.localStorage.removeItem(Ao)}catch(i){S.warn(i)}}}updateDisplay(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Ze.registerComponent("TextTrackSettings",Gp);class $p extends Ze{constructor(t,i){let a=i.ResizeObserver||window.ResizeObserver;super(t,Z({createEl:!(a=i.ResizeObserver===null?!1:a),reportTouchActivity:!1},i)),this.ResizeObserver=i.ResizeObserver||window.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=Hi(()=>{this.resizeHandler()},100,!1,this),a?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(t.el())):(this.loadListener_=()=>{if(this.el_&&this.el_.contentWindow){let o=this.debouncedHandler_,l=this.unloadListener_=function(){kt(this,"resize",o),kt(this,"unload",l),l=null};Vt(this.el_.contentWindow,"unload",l),Vt(this.el_.contentWindow,"resize",o)}},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Ze.registerComponent("ResizeManager",$p);let Kp={trackingThreshold:20,liveTolerance:15};class Yp extends Ze{constructor(t,i){super(t,Z(Kp,i,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=a=>this.handlePlay(a),this.handleFirstTimeupdate_=a=>this.handleFirstTimeupdate(a),this.handleSeeked_=a=>this.handleSeeked(a),this.seekToLiveEdge_=a=>this.seekToLiveEdge(a),this.reset_(),this.on(this.player_,"durationchange",a=>this.handleDurationchange(a)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){var t=this.player_.seekable();if(t&&t.length){var t=Number(window.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(t-this.lastTime_)/1e3,t=(this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i,this.liveCurrentTime()),i=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(t-i)>this.options_.liveTolerance;(o=this.timeupdateSeen_&&t!==1/0?o:!1)!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<t,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){var t=this.player_.seekable(),i=[];let a=t?t.length:0;for(;a--;)i.push(t.end(a));return i.length?i.sort()[i.length-1]:1/0}seekableStart(){var t=this.player_.seekable(),i=[];let a=t?t.length:0;for(;a--;)i.push(t.start(a));return i.length?i.sort()[0]:0}liveWindow(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){var t=this.seekableEnd();return this.lastSeekEnd_!==-1&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Ze.registerComponent("LiveTracker",Yp);class Zp extends Ze{constructor(t,i){super(t,i),this.on("statechanged",a=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:be("div",{className:"vjs-title-bar-title",id:"vjs-title-bar-title-"+Be++}),description:be("div",{className:"vjs-title-bar-description",id:"vjs-title-bar-description-"+Be++})},be("div",{className:"vjs-title-bar"},{},ne(this.els))}updateDom_(){var t=this.player_.tech_;let i=t&&t.el_,a={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(T=>{var l=this.state[T],h=this.els[T],T=a[T];ki(h),l&&Fe(h,l),i&&(i.removeAttribute(T),l)&&i.setAttribute(T,h.id)}),this.state.title||this.state.description?this.show():this.hide()}update(t){this.setState(t)}dispose(){var t=this.player_.tech_,t=t&&t.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Ze.registerComponent("TitleBar",Zp);let Qp={initialDisplay:4e3,position:[],takeFocus:!1};class Jp extends Bi{constructor(t,i){super(t,i=Z(Qp,i)),this.controlText(i.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],a=>{this.removeClass("force-display")})}buildCSSClass(){return"vjs-transient-button focus-visible "+this.options_.position.map(t=>"vjs-"+t).join(" ")}createEl(){var t=be("button",{},{type:"button",class:this.buildCSSClass()},be("span"));return this.controlTextEl_=t.querySelector("span"),t}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Ze.registerComponent("TransientButton",Jp);function Ku(s){let t=s.el();if(!t.resetSourceWatch_){let i={},a=nf(s),o=l=>(...h)=>(h=l.apply(t,h),Io(s),h);["append","appendChild","insertAdjacentHTML"].forEach(l=>{t[l]&&(i[l]=t[l],t[l]=o(i[l]))}),Object.defineProperty(t,"innerHTML",Z(a,{set:o(a.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(i).forEach(l=>{t[l]=i[l]}),Object.defineProperty(t,"innerHTML",a)},s.one("sourceset",t.resetSourceWatch_)}}function ef(s){if(s.featuresSourceset){let i=s.el();if(!i.resetSourceset_){t=s;let a=Yu([t.el(),window.HTMLMediaElement.prototype,rf],"src");var t;let o=i.setAttribute,l=i.load;Object.defineProperty(i,"src",Z(a,{set:h=>(h=a.set.call(i,h),s.triggerSourceset(i.src),h)})),i.setAttribute=(h,T)=>(T=o.call(i,h,T),/src/i.test(h)&&s.triggerSourceset(i.src),T),i.load=()=>{var h=l.call(i);return Io(s)||(s.triggerSourceset(""),Ku(s)),h},i.currentSrc?s.triggerSourceset(i.currentSrc):Io(s)||Ku(s),i.resetSourceset_=()=>{i.resetSourceset_=null,i.load=l,i.setAttribute=o,Object.defineProperty(i,"src",a),i.resetSourceWatch_&&i.resetSourceWatch_()}}}}let Io=s=>{var t=s.el();if(t.hasAttribute("src"))s.triggerSourceset(t.src);else{var i=s.$$("source"),a=[];let l="";if(!i.length)return!1;for(let h=0;h<i.length;h++){var o=i[h].src;o&&a.indexOf(o)===-1&&a.push(o)}if(!a.length)return!1;a.length===1&&(l=a[0]),s.triggerSourceset(l)}return!0},tf=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(s){for(var t=document.createElement(this.nodeName.toLowerCase()),i=(t.innerHTML=s,document.createDocumentFragment());t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",window.Element.prototype.appendChild.call(this,i),this.innerHTML}}),Yu=(s,t)=>{let i={};for(let a=0;a<s.length&&!((i=Object.getOwnPropertyDescriptor(s[a],t))&&i.set&&i.get);a++);return i.enumerable=!0,i.configurable=!0,i},nf=s=>Yu([s.el(),window.HTMLMediaElement.prototype,window.Element.prototype,tf],"innerHTML"),rf=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?tu(window.Element.prototype.getAttribute.call(this,"src")):""},set(s){return window.Element.prototype.setAttribute.call(this,"src",s),s}});class mt extends Ut{constructor(t,i){super(t,i),i=t.source;let a=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||t.tag&&t.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),t.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){var o=this.el_.childNodes;let T=o.length;for(var l=[];T--;){var h=o[T];h.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(h),this.remoteTextTracks().addTrack(h.track),this.textTracks().addTrack(h.track),a||this.el_.hasAttribute("crossorigin")||!qs(h.src)||(a=!0)):l.push(h))}for(let B=0;B<l.length;B++)this.el_.removeChild(l[B])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&a&&S.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(me||Ne)&&t.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),mt.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){ef(this)}restoreMetadataTracksInIOSNativePlayer_(){let t=this.textTracks(),i,a=()=>{i=[];for(let h=0;h<t.length;h++){var l=t[h];l.kind==="metadata"&&i.push({track:l,storedMode:l.mode})}},o=(a(),t.addEventListener("change",a),this.on("dispose",()=>t.removeEventListener("change",a)),()=>{for(let h=0;h<i.length;h++){var l=i[h];l.track.mode==="disabled"&&l.track.mode!==l.storedMode&&(l.track.mode=l.storedMode)}t.removeEventListener("change",o)});this.on("webkitbeginfullscreen",()=>{t.removeEventListener("change",a),t.removeEventListener("change",o),t.addEventListener("change",o)}),this.on("webkitendfullscreen",()=>{t.removeEventListener("change",a),t.addEventListener("change",a),t.removeEventListener("change",o)})}overrideNative_(t,i){if(i===this[`featuresNative${t}Tracks`]){let a=t.toLowerCase();this[a+"TracksListeners_"]&&Object.keys(this[a+"TracksListeners_"]).forEach(o=>{this.el()[a+"Tracks"].removeEventListener(o,this[a+"TracksListeners_"][o])}),this[`featuresNative${t}Tracks`]=!i,this[a+"TracksListeners_"]=null,this.proxyNativeTracksForType_(a)}}overrideNativeAudioTracks(t){this.overrideNative_("Audio",t)}overrideNativeVideoTracks(t){this.overrideNative_("Video",t)}proxyNativeTracksForType_(t){var i=ln[t];let a=this.el()[i.getterName],o=this[i.getterName]();if(this[`featuresNative${i.capitalName}Tracks`]&&a&&a.addEventListener){let l={change:T=>{var B={type:"change",target:o,currentTarget:o,srcElement:o};o.trigger(B),t==="text"&&this[fr.remoteText.getterName]().trigger(B)},addtrack(T){o.addTrack(T.track)},removetrack(T){o.removeTrack(T.track)}},h=function(){var T=[];for(let B=0;B<o.length;B++){let G=!1;for(let H=0;H<a.length;H++)if(a[H]===o[B]){G=!0;break}G||T.push(o[B])}for(;T.length;)o.removeTrack(T.shift())};this[i.getterName+"Listeners_"]=l,Object.keys(l).forEach(T=>{let B=l[T];a.addEventListener(T,B),this.on("dispose",G=>a.removeEventListener(T,B))}),this.on("loadstart",h),this.on("dispose",T=>this.off("loadstart",h))}}proxyNativeTracks_(){ln.names.forEach(t=>{this.proxyNativeTracksForType_(t)})}createEl(){let t=this.options_.tag;t&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(t?(i=t.cloneNode(!0),t.parentNode&&t.parentNode.insertBefore(i,t),mt.disposeMediaElement(t),t=i):(t=document.createElement("video"),i=Z({},this.options_.tag&&Rt(this.options_.tag)),me&&this.options_.nativeControlsForTouch===!0||delete i.controls,$t(t,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))),t.playerId=this.options_.playerId),typeof this.options_.preload<"u"&&et(t,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);var i,a=["loop","muted","playsinline","autoplay"];for(let h=0;h<a.length;h++){var o=a[h],l=this.options_[o];typeof l<"u"&&(l?et(t,o,o):ct(t,o),t[o]=l)}return t}handleLateInit_(t){if(t.networkState!==0&&t.networkState!==3)if(t.readyState===0){let i=!1,a=function(){i=!0},o=(this.on("loadstart",a),function(){i||this.trigger("loadstart")});this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",o),i||this.trigger("loadstart")})}else{let i=["loadstart"];i.push("loadedmetadata"),2<=t.readyState&&i.push("loadeddata"),3<=t.readyState&&i.push("canplay"),4<=t.readyState&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(a){this.trigger(a)},this)})}}setScrubbing(t){this.isScrubbing_=t}scrubbing(){return this.isScrubbing_}setCurrentTime(t){try{this.isScrubbing_&&this.el_.fastSeek&&we?this.el_.fastSeek(t):this.el_.currentTime=t}catch(i){S(i,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&$&&U&&this.el_.currentTime===0){let t=()=>{0<this.el_.currentTime&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if("webkitDisplayingFullscreen"in this.el_){let t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",()=>{this.off("webkitbeginfullscreen",i),this.off("webkitendfullscreen",t)})}}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){let t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)vn(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},0);else try{t.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):super.requestVideoFrameCallback(t)}cancelVideoFrameCallback(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):super.cancelVideoFrameCallback(t)}src(t){if(t===void 0)return this.el_.src;this.setSrc(t)}addSourceElement(t,i){return t?(t={src:t},i&&(t.type=i),i=be("source",{},t),this.el_.appendChild(i),!0):(S.error("Invalid source URL."),!1)}removeSourceElement(t){if(t){var i;for(i of this.el_.querySelectorAll("source"))if(i.src===t)return this.el_.removeChild(i),!0;S.warn("No matching source element found with src: "+t)}else S.error("Source URL is required to remove the source element.");return!1}reset(){mt.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(t){this.el_.controls=!!t}addTextTrack(t,i,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,a):super.addTextTrack(t,i,a)}createRemoteTextTrack(t){var i;return this.featuresNativeTextTracks?(i=document.createElement("track"),t.kind&&(i.kind=t.kind),t.label&&(i.label=t.label),(t.language||t.srclang)&&(i.srclang=t.language||t.srclang),t.default&&(i.default=t.default),t.id&&(i.id=t.id),t.src&&(i.src=t.src),i):super.createRemoteTextTrack(t)}addRemoteTextTrack(t,i){return t=super.addRemoteTextTrack(t,i),this.featuresNativeTextTracks&&this.el().appendChild(t),t}removeRemoteTextTrack(t){if(super.removeRemoteTextTrack(t),this.featuresNativeTextTracks){var i=this.$$("track");let a=i.length;for(;a--;)t!==i[a]&&t!==i[a].track||this.el().removeChild(i[a])}}getVideoPlaybackQuality(){var t;return typeof this.el().getVideoPlaybackQuality=="function"?this.el().getVideoPlaybackQuality():(t={},typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),window.performance&&(t.creationTime=window.performance.now()),t)}}ee(mt,"TEST_VID",function(){var s,t;if(We())return s=document.createElement("video"),(t=document.createElement("track")).kind="captions",t.srclang="en",t.label="English",s.appendChild(t),s}),mt.isSupported=function(){try{mt.TEST_VID.volume=.5}catch{return!1}return!(!mt.TEST_VID||!mt.TEST_VID.canPlayType)},mt.canPlayType=function(s){return mt.TEST_VID.canPlayType(s)},mt.canPlaySource=function(s,t){return mt.canPlayType(s.type)},mt.canControlVolume=function(){try{let t=mt.TEST_VID.volume;mt.TEST_VID.volume=t/2+.1;var s=t!==mt.TEST_VID.volume;return s&&Re?(window.setTimeout(()=>{mt&&mt.prototype&&(mt.prototype.featuresVolumeControl=t!==mt.TEST_VID.volume)}),!1):s}catch{return!1}},mt.canMuteVolume=function(){try{var s=mt.TEST_VID.muted;return mt.TEST_VID.muted=!s,mt.TEST_VID.muted?et(mt.TEST_VID,"muted","muted"):ct(mt.TEST_VID,"muted"),s!==mt.TEST_VID.muted}catch{return!1}},mt.canControlPlaybackRate=function(){if($&&U&&re<58)return!1;try{var s=mt.TEST_VID.playbackRate;return mt.TEST_VID.playbackRate=s/2+.1,s!==mt.TEST_VID.playbackRate}catch{return!1}},mt.canOverrideAttributes=function(){try{var s=()=>{};Object.defineProperty(document.createElement("video"),"src",{get:s,set:s}),Object.defineProperty(document.createElement("audio"),"src",{get:s,set:s}),Object.defineProperty(document.createElement("video"),"innerHTML",{get:s,set:s}),Object.defineProperty(document.createElement("audio"),"innerHTML",{get:s,set:s})}catch{return!1}return!0},mt.supportsNativeTextTracks=function(){return we||Re&&U},mt.supportsNativeVideoTracks=function(){return!(!mt.TEST_VID||!mt.TEST_VID.videoTracks)},mt.supportsNativeAudioTracks=function(){return!(!mt.TEST_VID||!mt.TEST_VID.audioTracks)},mt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([s,t]){ee(mt.prototype,s,()=>mt[t](),!0)}),mt.prototype.featuresVolumeControl=mt.canControlVolume(),mt.prototype.movingMediaElementInDOM=!Re,mt.prototype.featuresFullscreenResize=!0,mt.prototype.featuresProgressEvents=!0,mt.prototype.featuresTimeupdateEvents=!0,mt.prototype.featuresVideoFrameCallback=!(!mt.TEST_VID||!mt.TEST_VID.requestVideoFrameCallback),mt.disposeMediaElement=function(s){if(s){for(s.parentNode&&s.parentNode.removeChild(s);s.hasChildNodes();)s.removeChild(s.firstChild);if(s.removeAttribute("src"),typeof s.load=="function")try{s.load()}catch{}}},mt.resetMediaElement=function(s){if(s){var t=s.querySelectorAll("source");let i=t.length;for(;i--;)s.removeChild(t[i]);if(s.removeAttribute("src"),typeof s.load=="function")try{s.load()}catch{}}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(s){mt.prototype[s]=function(){return this.el_[s]||this.el_.hasAttribute(s)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(s){mt.prototype["set"+_i(s)]=function(t){(this.el_[s]=t)?this.el_.setAttribute(s,s):this.el_.removeAttribute(s)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(s){mt.prototype[s]=function(){return this.el_[s]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(s){mt.prototype["set"+_i(s)]=function(t){this.el_[s]=t}}),["pause","load","play"].forEach(function(s){mt.prototype[s]=function(){return this.el_[s]()}}),Ut.withSourceHandlers(mt),mt.nativeSourceHandler={},mt.nativeSourceHandler.canPlayType=function(s){try{return mt.TEST_VID.canPlayType(s)}catch{return""}},mt.nativeSourceHandler.canHandleSource=function(s,t){return s.type?mt.nativeSourceHandler.canPlayType(s.type):s.src?(s=eo(s.src),mt.nativeSourceHandler.canPlayType("video/"+s)):""},mt.nativeSourceHandler.handleSource=function(s,t,i){t.setSrc(s.src)},mt.nativeSourceHandler.dispose=function(){},mt.registerSourceHandler(mt.nativeSourceHandler),Ut.registerTech("Html5",mt);let Zu=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Oo={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Do=["tiny","xsmall","small","medium","large","xlarge","huge"],Js={},sf=(Do.forEach(s=>{var t=s.charAt(0)==="x"?"x-"+s.substring(1):s;Js[s]="vjs-layout-"+t}),{tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0});class ui extends Ze{constructor(t,i,l){if(t.id=t.id||i.id||"vjs_video_"+Be++,(i=Object.assign(ui.getTagSettings(t),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,i.language||(o=t.closest("[lang]"))&&(i.language=o.getAttribute("lang")),super(null,i,l),this.boundDocumentFullscreenChange_=h=>this.documentFullscreenChange_(h),this.boundFullWindowOnEscKey_=h=>this.fullWindowOnEscKey(h),this.boundUpdateStyleEl_=h=>this.updateStyleEl_(h),this.boundApplyInitTime_=h=>this.applyInitTime_(h),this.boundUpdateCurrentBreakpoint_=h=>this.updateCurrentBreakpoint_(h),this.boundHandleTechClick_=h=>this.handleTechClick_(h),this.boundHandleTechDoubleClick_=h=>this.handleTechDoubleClick_(h),this.boundHandleTechTouchStart_=h=>this.handleTechTouchStart_(h),this.boundHandleTechTouchMove_=h=>this.handleTechTouchMove_(h),this.boundHandleTechTouchEnd_=h=>this.handleTechTouchEnd_(h),this.boundHandleTechTap_=h=>this.handleTechTap_(h),this.boundUpdatePlayerHeightOnAudioOnlyMode_=h=>this.updatePlayerHeightOnAudioOnlyMode_(h),this.isFullscreen_=!1,this.log=u(this.id_),this.fsApi_=E,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=t,this.tagAttributes=t&&Rt(t),this.language(this.options_.language),i.languages){let h={};Object.getOwnPropertyNames(i.languages).forEach(function(T){h[T.toLowerCase()]=i.languages[T]}),this.languages_=h}else this.languages_=ui.prototype.options_.languages;this.resetCache_(),this.poster_=i.poster||"",this.controls_=!!i.controls,t.controls=!1,t.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],t.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(h=>{if(typeof this[h]!="function")throw new Error(`plugin "${h}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Wa(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Vt(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);var o=Z(this.options_),l=(i.plugins&&Object.keys(i.plugins).forEach(h=>{this[h](i.plugins[h])}),i.debug&&this.debug(!0),this.options_.playerOptions=o,this.middleware_=[],this.playbackRates(i.playbackRates),i.experimentalSvgIcons&&((l=new window.DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`,"image/svg+xml")).querySelector("parsererror")?(S.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null):((o=l.documentElement).style.display="none",this.el_.appendChild(o),this.addClass("vjs-svg-icons-enabled"))),this.initChildren(),this.isAudio(t.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),i.spatialNavigation&&i.spatialNavigation.enabled&&(this.spatialNavigation=new Rp(this),this.addClass("vjs-spatial-navigation-enabled")),me&&this.addClass("vjs-touch-enabled"),Re||this.addClass("vjs-workinghover"),ui.players[this.id_]=this,A.split(".")[0]);this.addClass("vjs-v"+l),this.userActive(!0),this.reportUserActivity(),this.one("play",h=>this.listenForUserActivity_(h)),this.on("keydown",h=>this.handleKeyDown(h)),this.on("languagechange",h=>this.handleLanguagechange(h)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){var t;this.trigger("dispose"),this.off("dispose"),kt(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),kt(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),ui.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),t=this,Gs.hasOwnProperty(t.id())&&delete Gs[t.id()],Vi.names.forEach(i=>{i=this[Vi[i].getterName](),i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t=this.tag,i,a=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js",l=(a?i=this.el_=t.parentNode:o||(i=this.el_=super.createEl("div")),Rt(t));if(o){for(i=this.el_=t,t=this.tag=document.createElement("video");i.children.length;)t.appendChild(i.firstChild);Pt(i,"video-js")||yt(i,"video-js"),i.appendChild(t),a=this.playerElIngest_=i,Object.keys(i).forEach(H=>{try{t[H]=i[H]}catch{}})}t.setAttribute("tabindex","-1"),l.tabindex="-1",U&&he&&(t.setAttribute("role","application"),l.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(H){o&&H==="class"||i.setAttribute(H,l[H]),o&&t.setAttribute(H,l[H])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",(t.player=i.player=this).addClass("vjs-paused");var h,T=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(H=>ke[H]).map(H=>"vjs-device-"+H.substring(3).toLowerCase().replace(/\_/g,"-")),B=(this.addClass(...T),window.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&(this.styleEl_=Ye("vjs-styles-dimensions"),T=fe(".vjs-styles-defaults"),(h=fe("head")).insertBefore(this.styleEl_,T?T.nextSibling:h.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin),t.getElementsByTagName("a"));for(let H=0;H<B.length;H++){var G=B.item(H);yt(G,"vjs-hidden"),G.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!a&&t.parentNode.insertBefore(i,t),ut(t,i),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i}crossOrigin(t){if(typeof t>"u")return this.techGet_("crossOrigin");t!==null&&t!=="anonymous"&&t!=="use-credentials"?S.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`):(this.techCall_("setCrossOrigin",t),this.posterImage&&this.posterImage.crossOrigin(t))}width(t){return this.dimension("width",t)}height(t){return this.dimension("height",t)}dimension(t,i){var a,o=t+"_";if(i===void 0)return this[o]||0;i===""||i==="auto"?(this[o]=void 0,this.updateStyleEl_()):(a=parseFloat(i),isNaN(a)?S.error(`Improper value "${i}" supplied for for `+t):(this[o]=a,this.updateStyleEl_()))}fluid(t){if(t===void 0)return!!this.fluid_;var i;this.fluid_=!!t,On(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),t=this,i=()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)},On(t)?i():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(t){if(t===void 0)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(t){if(t===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(window.VIDEOJS_NO_DYNAMIC_STYLE===!0){let i=typeof this.width_=="number"?this.width_:this.options_.width,a=typeof this.height_=="number"?this.height_:this.options_.height;var t=this.tech_&&this.tech_.el();t&&(0<=i&&(t.width=i),0<=a)&&(t.height=a)}else{let i,a,o,l;t=(o=this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),t=t[1]/t[0],i=this.width_!==void 0?this.width_:this.height_!==void 0?this.height_/t:this.videoWidth()||300,a=this.height_!==void 0?this.height_:i*t,l=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(l),ye(this.styleEl_,`
      .${l} {
        width: ${i}px;
        height: ${a}px;
      }

      .${l}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${100*t}%;
      }
    `)}}loadTech_(t,i){this.tech_&&this.unloadTech_();var a=_i(t),o=t.charAt(0).toLowerCase()+t.slice(1);a!=="Html5"&&this.tag&&(Ut.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=a,this.isReady_=!1;let l=this.autoplay(),h={source:i,autoplay:l=typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay?!1:l,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+`_${o}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};if(Vi.names.forEach(T=>{T=Vi[T],h[T.getterName]=this[T.privateName]}),Object.assign(h,this.options_[a]),Object.assign(h,this.options_[o]),Object.assign(h,this.options_[t.toLowerCase()]),this.tag&&(h.tag=this.tag),i&&i.src===this.cache_.src&&0<this.cache_.currentTime&&(h.startTime=this.cache_.currentTime),o=Ut.getTech(t),!o)throw new Error(`No Tech named '${a}' exists! '${a}' should be registered using videojs.registerTech()'`);this.tech_=new o(h),this.tech_.ready(Kt(this,this.handleTechReady_),!0),ap(this.textTracksJson_||[],this.tech_),Zu.forEach(T=>{this.on(this.tech_,T,B=>this[`handleTech${_i(T)}_`](B))}),Object.keys(Oo).forEach(T=>{this.on(this.tech_,T,B=>{this.tech_.playbackRate()===0&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${Oo[T]}_`].bind(this),event:B}):this[`handleTech${Oo[T]}_`](B)})}),this.on(this.tech_,"loadstart",T=>this.handleTechLoadStart_(T)),this.on(this.tech_,"sourceset",T=>this.handleTechSourceset_(T)),this.on(this.tech_,"waiting",T=>this.handleTechWaiting_(T)),this.on(this.tech_,"ended",T=>this.handleTechEnded_(T)),this.on(this.tech_,"seeking",T=>this.handleTechSeeking_(T)),this.on(this.tech_,"play",T=>this.handleTechPlay_(T)),this.on(this.tech_,"pause",T=>this.handleTechPause_(T)),this.on(this.tech_,"durationchange",T=>this.handleTechDurationChange_(T)),this.on(this.tech_,"fullscreenchange",(T,B)=>this.handleTechFullscreenChange_(T,B)),this.on(this.tech_,"fullscreenerror",(T,B)=>this.handleTechFullscreenError_(T,B)),this.on(this.tech_,"enterpictureinpicture",T=>this.handleTechEnterPictureInPicture_(T)),this.on(this.tech_,"leavepictureinpicture",T=>this.handleTechLeavePictureInPicture_(T)),this.on(this.tech_,"error",T=>this.handleTechError_(T)),this.on(this.tech_,"posterchange",T=>this.handleTechPosterChange_(T)),this.on(this.tech_,"textdata",T=>this.handleTechTextData_(T)),this.on(this.tech_,"ratechange",T=>this.handleTechRateChange_(T)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||a==="Html5"&&this.tag||ut(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Vi.names.forEach(t=>{t=Vi[t],this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=sp(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(t){return t===void 0&&S.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":A}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()&&this.hasStarted(!1),this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(t){if(this.tech_&&typeof t=="string"){var i=()=>{let o=this.muted(),l=(this.muted(!0),()=>{this.muted(o)});this.playTerminatedQueue_.push(l);var h=this.play();if(Jr(h))return h.catch(T=>{throw l(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(T||""))})};let a;if(t!=="any"||this.muted()?a=t!=="muted"||this.muted()?this.play():i():Jr(a=this.play())&&(a=a.catch(i)),Jr(a))return a.then(()=>{this.trigger({type:"autoplay-success",autoplay:t})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:t})})}}updateSourceCaches_(o=""){let i=o,a="";typeof i!="string"&&(i=o.src,a=o.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!a&&(a=((G,H)=>{if(!H)return"";if(G.cache_.source.src===H&&G.cache_.source.type)return G.cache_.source.type;var se=G.cache_.sources.filter(_e=>_e.src===H);if(se.length)return se[0].type;var pe=G.$$("source");for(let _e=0;_e<pe.length;_e++){var ae=pe[_e];if(ae.type&&ae.src&&ae.src===H)return ae.type}return Ks(H)})(this,i)),this.cache_.source=Z({},o,{src:i,type:a});var o=this.cache_.sources.filter(G=>G.src&&G.src===i),l=[],h=this.$$("source"),T=[];for(let G=0;G<h.length;G++){var B=Rt(h[G]);l.push(B),B.src&&B.src===i&&T.push(B.src)}T.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i}handleTechSourceset_(t){if(!this.changingSrc_){let o=l=>this.updateSourceCaches_(l);var i=this.currentSource().src,a=t.src;(o=!i||/^blob:/.test(i)||!/^blob:/.test(a)||this.lastSource_&&(this.lastSource_.tech===a||this.lastSource_.player===i)?o:()=>{})(a),t.src||this.tech_.any(["sourceset","loadstart"],l=>{l.type!=="sourceset"&&(l=this.techGet_("currentSrc"),this.lastSource_.tech=l,this.updateSourceCaches_(l))})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})}hasStarted(t){if(t===void 0)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){0<this.tech_.playbackRate()&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(t=>t.callback(t.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");let t=this.currentTime(),i=()=>{t!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",i))};this.on("timeupdate",i)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(t){!this.controls_||this.options_!==void 0&&this.options_.userActions!==void 0&&this.options_.userActions.click!==void 0&&this.options_.userActions.click===!1||(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,t):this.paused()?vn(this.play()):this.pause())}handleTechDoubleClick_(t){!this.controls_||Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(t.target))||this.options_!==void 0&&this.options_.userActions!==void 0&&this.options_.userActions.doubleClick!==void 0&&this.options_.userActions.doubleClick===!1||(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,t):this.isInPictureInPicture()&&!document.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(t){t.cancelable&&t.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(t){if(t=t.target.player,!t||t===this){t=this.el();let i=document[this.fsApi_.fullscreenElement]===t;!i&&t.matches&&(i=t.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}}handleTechFullscreenChange_(t,i){i&&(i.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(i.isFullscreen))}handleTechFullscreenError_(t,i){this.trigger("fullscreenerror",i)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(t){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(t){this.isInPictureInPicture(!1)}handleTechError_(){var t=this.tech_.error();t&&this.error(t)}handleTechTextData_(){let t=1<arguments.length?arguments[1]:null;this.trigger("textdata",t)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(t,i){this.ready(function(){if(t in Op)return a=this.middleware_,this.tech_[t](a.reduce(co(t),i));if(t in yu)return gu(this.middleware_,this.tech_,t,i);var a;try{this.tech_&&this.tech_[t](i)}catch(o){throw S(o),o}},!0)}techGet_(t){if(this.tech_&&this.tech_.isReady_){if(t in Ip)return i=this.middleware_,a=this.tech_,i.reduceRight(co(t),a[t]());if(t in yu)return gu(this.middleware_,this.tech_,t);var i,a;try{return this.tech_[t]()}catch(o){throw this.tech_[t]===void 0?S(`Video.js: ${t} method not defined for ${this.techName_} playback technology.`,o):o.name==="TypeError"?(S(`Video.js: ${t} unavailable on ${this.techName_} playback technology element.`,o),this.tech_.isReady_=!1):S(o),o}}}play(){return new Promise(t=>{this.play_(t)})}play_(a=vn){this.playCallbacks_.push(a);var i,a=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),o=!!(we||Re);this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),this.isReady_&&a?(i=this.techGet_("play"),o&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),i===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)):(this.waitToPlay_=l=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!a&&o&&this.load())}runPlayTerminatedQueue_(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(i){i()})}runPlayCallbacks_(t){var i=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],i.forEach(function(a){a(t)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||hn(0,0)}scrubbing(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(t){if(t===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),this.cache_.initTime=0,isFinite(t)&&(this.cache_.currentTime=Number(t))):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(t){if(t===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;(t=(t=parseFloat(t))<0?1/0:t)!==this.cache_.duration&&((this.cache_.duration=t)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let t=this.techGet_("buffered");return t=t&&t.length?t:hn(0,0)}seekable(){let t=this.techGet_("seekable");return t=t&&t.length?t:hn(0,0)}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return Zl(this.buffered(),this.duration())}bufferedEnd(){var t=this.buffered(),i=this.duration();let a=t.end(t.length-1);return a=a>i?i:a}volume(t){let i;if(t===void 0)return i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i;i=Math.max(0,Math.min(1,t)),this.cache_.volume=i,this.techCall_("setVolume",i),0<i&&this.lastVolume_(i)}muted(t){if(t===void 0)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)}defaultMuted(t){return t!==void 0&&this.techCall_("setDefaultMuted",t),this.techGet_("defaultMuted")||!1}lastVolume_(t){if(t===void 0||t===0)return this.cache_.lastVolume;this.cache_.lastVolume=t}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(t){var i;if(t===void 0)return this.isFullscreen_;i=this.isFullscreen_,this.isFullscreen_=!!t,this.isFullscreen_!==i&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()}requestFullscreen(t){this.isInPictureInPicture()&&this.exitPictureInPicture();let i=this;return new Promise((a,o)=>{function l(){i.off("fullscreenerror",T),i.off("fullscreenchange",h)}function h(){l(),a()}function T(G,H){l(),o(H)}i.one("fullscreenchange",h),i.one("fullscreenerror",T);var B=i.requestFullscreenHelper_(t);B&&(B.then(l,l),B.then(a,o))})}requestFullscreenHelper_(t){let i;if(this.fsApi_.prefixed||(i=this.options_.fullscreen&&this.options_.fullscreen.options||{},t!==void 0&&(i=t)),this.fsApi_.requestFullscreen)return(t=this.el_[this.fsApi_.requestFullscreen](i))&&t.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),t;this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){let t=this;return new Promise((i,a)=>{function o(){t.off("fullscreenerror",h),t.off("fullscreenchange",l)}function l(){o(),i()}function h(B,G){o(),a(G)}t.one("fullscreenchange",l),t.one("fullscreenerror",h);var T=t.exitFullscreenHelper_();T&&(T.then(o,o),T.then(i,a))})}exitFullscreenHelper_(){var t;if(this.fsApi_.requestFullscreen)return(t=document[this.fsApi_.exitFullscreen]())&&vn(t.then(()=>this.isFullscreen(!1))),t;this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,Vt(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow="hidden",yt(document.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(t){t.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,kt(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow=this.docOrigOverflow,At(document.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(t){if(t===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(t){if(t===void 0)return!!this.isInPictureInPicture_;this.isInPictureInPicture_=!!t,this.togglePictureInPictureClass_()}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&window.documentPictureInPicture){let t=document.createElement(this.el().tagName);return t.classList=this.el().classList,t.classList.add("vjs-pip-container"),this.posterImage&&t.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&t.appendChild(this.titleBar.el().cloneNode(!0)),t.appendChild(be("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),window.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(i=>(Oe(i),this.el_.parentNode.insertBefore(t,this.el_),i.document.body.appendChild(this.el_),i.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:i}),i.addEventListener("pagehide",a=>{a=a.target.querySelector(".video-js"),t.parentNode.replaceChild(a,t),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),i))}return"pictureInPictureEnabled"in document&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return window.documentPictureInPicture&&window.documentPictureInPicture.window?(window.documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in document?document.exitPictureInPicture():void 0}handleKeyDown(t){var i,a,o=this.options_.userActions;o&&o.hotkeys&&(i=this.el_.ownerDocument.activeElement,a=i.tagName.toLowerCase(),i.isContentEditable||(a==="input"?["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type)===-1:["textarea"].indexOf(a)!==-1)||(typeof o.hotkeys=="function"?o.hotkeys.call(this,t):this.handleHotkeys(t)))}handleHotkeys(t){var{fullscreenKey:i=l=>t.key.toLowerCase()==="f",muteKey:a=l=>t.key.toLowerCase()==="m",playPauseKey:o=l=>t.key.toLowerCase()==="k"||t.key.toLowerCase()===" "}=this.options_.userActions?this.options_.userActions.hotkeys:{};i.call(this,t)?(t.preventDefault(),t.stopPropagation(),i=Ze.getComponent("FullscreenToggle"),document[this.fsApi_.fullscreenEnabled]!==!1&&i.prototype.handleClick.call(this,t)):a.call(this,t)?(t.preventDefault(),t.stopPropagation(),Ze.getComponent("MuteToggle").prototype.handleClick.call(this,t)):o.call(this,t)&&(t.preventDefault(),t.stopPropagation(),Ze.getComponent("PlayToggle").prototype.handleClick.call(this,t))}canPlayType(t){var i;for(let o=0,l=this.options_.techOrder;o<l.length;o++){var a=l[o];let h=Ut.getTech(a);if(h=h||Ze.getComponent(a)){if(h.isSupported()&&(i=h.canPlayType(t)))return i}else S.error(`The "${a}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(t){function i(T,B,G){let H;return T.some(se=>B.some(pe=>{if(H=G(se,pe))return!0})),H}var a=this.options_.techOrder.map(T=>[T,Ut.getTech(T)]).filter(([T,B])=>B?B.isSupported():(S.error(`The "${T}" tech is undefined. Skipped browser support check for that tech.`),!1));let o;var l,h=([T,B],G)=>{if(B.canPlaySource(G,this.options_[T.toLowerCase()]))return{source:G,tech:T}};return(o=this.options_.sourceOrder?i(t,a,(l=h,(T,B)=>l(B,T))):i(a,t,h))||!1}handleSrc_(t,i){if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();let a=vu(t);if(a.length){if(this.changingSrc_=!0,i||(this.cache_.sources=a),this.updateSourceCaches_(a[0]),Ap(this,a[0],(o,l)=>{var h;if(this.middleware_=l,i||(this.cache_.sources=a),this.updateSourceCaches_(o),this.src_(o))return 1<a.length?this.handleSrc_(a.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());h=this.tech_,l.forEach(T=>T.setTech&&T.setTech(h))}),1<a.length){let o=()=>{this.error(null),this.handleSrc_(a.slice(1),!0)},l=()=>{this.off("error",o)};this.one("error",o),this.one("playing",l),this.resetRetryOnError_=()=>{this.off("error",o),this.off("playing",l)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(t){return this.handleSrc_(t,!1)}src_(t){var i=this.selectSource([t]);return!i||(Xl(i.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(()=>{this.changingSrc_=!1})),!1)}addSourceElement(t,i){return!!this.tech_&&this.tech_.addSourceElement(t,i)}removeSourceElement(t){return!!this.tech_&&this.tech_.removeSourceElement(t)}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():vn(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),On(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);var{currentTimeDisplay:t,durationDisplay:i,progressControl:o,remainingTimeDisplay:a}=this.controlBar||{},o=(o||{}).seekBar;t&&t.updateContent(),i&&i.updateContent(),a&&a.updateContent(),o&&(o.update(),o.loadProgressBar)&&o.loadProgressBar.update()}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){var t=this.currentSource(),i=[];return Object.keys(t).length!==0&&i.push(t),this.cache_.sources||i}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(t){if(t===void 0)return this.techGet_("preload");this.techCall_("setPreload",t),this.options_.preload=t}autoplay(t){if(t===void 0)return this.options_.autoplay||!1;let i;typeof t=="string"&&/(any|play|muted)/.test(t)||t===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_(typeof t=="string"?t:"play"),i=!1):this.options_.autoplay=!!t,i=typeof i>"u"?this.options_.autoplay:i,this.tech_&&this.techCall_("setAutoplay",i)}playsinline(t){return t!==void 0&&(this.techCall_("setPlaysinline",t),this.options_.playsinline=t),this.techGet_("playsinline")}loop(t){if(t===void 0)return this.techGet_("loop");this.techCall_("setLoop",t),this.options_.loop=t}poster(t){if(t===void 0)return this.poster_;(t=t||"")!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){var t;(!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster&&(t=this.tech_.poster()||"")!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}controls(t){if(t===void 0)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(t){if(t===void 0)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(t){if(t===void 0)return this.error_||null;if(M("beforeerror").forEach(i=>{i=i(this,t),R(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null?t=i:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&t.code===4){let i=function(){this.error(t)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),this.one("loadstart",function(){this.off(["click","touchstart"],i)})}else t===null?(this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new yi(t),this.addClass("vjs-error"),S.error(`(CODE:${this.error_.code} ${yi.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),M("error").forEach(i=>i(this,this.error_)))}reportUserActivity(t){this.userActivity_=!0}userActive(t){if(t===void 0)return this.userActive_;(t=!!t)!==this.userActive_&&(this.userActive_=t,this.userActive_?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")))}listenForUserActivity_(){let t,i,a,o=Kt(this,this.reportUserActivity);function l(B){o(),this.clearInterval(t)}this.on("mousedown",function(){o(),this.clearInterval(t),t=this.setInterval(o,250)}),this.on("mousemove",function(B){B.screenX===i&&B.screenY===a||(i=B.screenX,a=B.screenY,o())}),this.on("mouseup",l),this.on("mouseleave",l);var h=this.getChild("controlBar");!h||Re||$||(h.on("mouseenter",function(B){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(B){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);let T;this.setInterval(function(){var B;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(T),(B=this.options_.inactivityTimeout)<=0||(T=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},B)))},250)}playbackRate(t){if(t===void 0)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)}defaultPlaybackRate(t){return t!==void 0?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(t){if(t===void 0)return!!this.isAudio_;this.isAudio_=!!t}updatePlayerHeightOnAudioOnlyMode_(){var t=this.getChild("ControlBar");t&&this.audioOnlyCache_.controlBarHeight!==t.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=t.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");var t=this.children();let i=this.getChild("ControlBar");var a=i&&i.currentHeight();t.forEach(o=>{o!==i&&o.el_&&!o.hasClass("vjs-hidden")&&(o.hide(),this.audioOnlyCache_.hiddenChildren.push(o))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=a,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(a),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(t=>t.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(t){return typeof t!="boolean"||t===this.audioOnlyMode_?this.audioOnlyMode_:(this.audioOnlyMode_=t)?(t=[],this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())):Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(t){return typeof t!="boolean"||t===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=t)?(this.audioOnlyMode()?this.audioOnlyMode(!1):Promise.resolve()).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()})}addTextTrack(t,i,a){if(this.tech_)return this.tech_.addTextTrack(t,i,a)}addRemoteTextTrack(t,i){if(this.tech_)return this.tech_.addRemoteTextTrack(t,i)}removeRemoteTextTrack(t={}){let i=t.track;if(i=i||t,this.tech_)return this.tech_.removeRemoteTextTrack(i)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(t){if(t===void 0)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),On(this))&&this.trigger("languagechange")}languages(){return Z(ui.prototype.options_.languages,this.languages_)}toJSON(){var t=Z(this.options_),i=t.tracks;t.tracks=[];for(let o=0;o<i.length;o++){var a=i[o];(a=Z(a)).player=void 0,t.tracks[o]=a}return t}createModal(t,i){(i=i||{}).content=t||"";let a=new pr(this,i);return this.addChild(a),a.on("dispose",()=>{this.removeChild(a)}),a.open(),a}updateCurrentBreakpoint_(){if(this.responsive()){var t=this.currentBreakpoint(),i=this.currentWidth();for(let o=0;o<Do.length;o++){var a=Do[o];if(i<=this.breakpoints_[a]){if(t===a)return;t&&this.removeClass(Js[t]),this.addClass(Js[a]),this.breakpoint_=a;break}}}}removeCurrentBreakpoint_(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)}breakpoints(t){return t!==void 0&&(this.breakpoint_="",this.breakpoints_=Object.assign({},sf,t),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(t){return t===void 0?this.responsive_:(t=!!t)!==this.responsive_?((this.responsive_=t)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Js[this.breakpoint_]||""}loadMedia(t,i){var a,o,l,h,T,B,G;t&&typeof t=="object"&&(a=this.crossOrigin(),{artist:t,artwork:o,description:l,poster:h,src:T,textTracks:B,title:G}=(this.reset(),this.cache_.media=Z(t),this.cache_.media),!o&&h&&(this.cache_.media.artwork=[{src:h,type:Ks(h)}]),a&&this.crossOrigin(a),T&&this.src(T),h&&this.poster(h),Array.isArray(B)&&B.forEach(H=>this.addRemoteTextTrack(H,!1)),this.titleBar&&this.titleBar.update({title:G,description:l||t||""}),this.ready(i))}getMedia(){var t,i;return this.cache_.media?Z(this.cache_.media):(t=this.poster(),i={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),a=>({kind:a.kind,label:a.label,language:a.language,src:a.src}))},t&&(i.poster=t,i.artwork=[{src:i.poster,type:Ks(i.poster)}]),i)}static getTagSettings(t){var i={sources:[],tracks:[]},a=Rt(t),o=a["data-setup"];if(Pt(t,"vjs-fill")&&(a.fill=!0),Pt(t,"vjs-fluid")&&(a.fluid=!0),o!==null)try{Object.assign(a,JSON.parse(o||"{}"))}catch(B){S.error("data-setup",B)}if(Object.assign(i,a),t.hasChildNodes()){var l=t.childNodes;for(let B=0,G=l.length;B<G;B++){var h=l[B],T=h.nodeName.toLowerCase();T==="source"?i.sources.push(Rt(h)):T==="track"&&i.tracks.push(Rt(h))}}return i}debug(t){if(t===void 0)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(t){if(t===void 0)return this.cache_.playbackRates;Array.isArray(t)&&t.every(i=>typeof i=="number")&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))}}Vi.names.forEach(function(s){let t=Vi[s];ui.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),ui.prototype.crossorigin=ui.prototype.crossOrigin,ui.players={},_n=window.navigator,ui.prototype.options_={techOrder:Ut.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:_n&&(_n.languages&&_n.languages[0]||_n.userLanguage||_n.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1},Zu.forEach(function(s){ui.prototype[`handleTech${_i(s)}_`]=function(){return this.trigger(s)}}),Ze.registerComponent("Player",ui);function af(s,t){function i(){na(this,{name:s,plugin:t,instance:null},!0);var a=t.apply(this,arguments);return Qu(this,s),na(this,{name:s,plugin:t,instance:a}),a}return Object.keys(t).forEach(function(a){i[a]=t[a]}),i}let ea="plugin",vr="activePlugins_",br={},ta=s=>br.hasOwnProperty(s),ia=s=>ta(s)?br[s]:void 0,Qu=(s,t)=>{s[vr]=s[vr]||{},s[vr][t]=!0},na=(s,t,i)=>{i=(i?"before":"")+"pluginsetup",s.trigger(i,t),s.trigger(i+":"+t.name,t)},Ju=(s,t)=>(t.prototype.name=s,function(...i){na(this,{name:s,plugin:t,instance:null},!0);let a=new t(this,...i);return this[s]=()=>a,na(this,a.getEventHash()),a});class Zi{constructor(t){if(this.constructor===Zi)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Wa(this),delete this.trigger,Wl(this,this.constructor.defaultState),Qu(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,i={}){return oi(this.eventBusEl_,t,this.getEventHash(i))}handleStateChanged(t){}dispose(){var{name:t,player:i}=this;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[vr][t]=!1,this.player=this.state=null,i[t]=Ju(t,br[t])}static isBasic(t){return t=typeof t=="string"?ia(t):t,typeof t=="function"&&!Zi.prototype.isPrototypeOf(t.prototype)}static registerPlugin(t,i){if(typeof t!="string")throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(ta(t))S.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(ui.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if(typeof i!="function")throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof i}.`);return br[t]=i,t!==ea&&(Zi.isBasic(i)?ui.prototype[t]=af(t,i):ui.prototype[t]=Ju(t,i)),i}static deregisterPlugin(t){if(t===ea)throw new Error("Cannot de-register base plugin.");ta(t)&&(delete br[t],delete ui.prototype[t])}static getPlugins(t=Object.keys(br)){let i;return t.forEach(a=>{var o=ia(a);o&&((i=i||{})[a]=o)}),i}static getPluginVersion(t){return t=ia(t),t&&t.VERSION||""}}function fn(s,t,i,a){{var o=t+` is deprecated and will be removed in ${s}.0; please use ${i} instead.`,l=a;let h=!1;return function(...T){return h||S.warn(o),h=!0,l.apply(this,T)}}}Zi.getPlugin=ia,Zi.BASE_PLUGIN_NAME=ea,Zi.registerPlugin(ea,Zi),ui.prototype.usingPlugin=function(s){return!!this[vr]&&this[vr][s]===!0},ui.prototype.hasPlugin=function(s){return!!ta(s)};let ed=s=>s.indexOf("#")===0?s.slice(1):s;function He(s,t,i){let a=He.getPlayer(s);if(a)t&&S.warn(`Player "${s}" is already initialised. Options will not be applied.`),i&&a.ready(i);else{let o=typeof s=="string"?fe("#"+ed(s)):s;if(!$e(o))throw new TypeError("The element or ID supplied is not valid. (videojs)");s="getRootNode"in o&&o.getRootNode()instanceof window.ShadowRoot?o.getRootNode():o.ownerDocument.body,s=(o.ownerDocument.defaultView&&s.contains(o)||S.warn("The element supplied is not included in the DOM"),(t=t||{}).restoreEl===!0&&(t.restoreEl=(o.parentNode&&o.parentNode.hasAttribute&&o.parentNode.hasAttribute("data-vjs-player")?o.parentNode:o).cloneNode(!0)),M("beforesetup").forEach(l=>{l=l(o,Z(t)),!R(l)||Array.isArray(l)?S.error("please return an object in beforesetup hooks"):t=Z(t,l)}),Ze.getComponent("Player")),a=new s(o,t,i),M("setup").forEach(l=>l(a))}return a}He.hooks_=j,He.hooks=M,He.hook=function(s,t){M(s,t)},He.hookOnce=function(s,t){M(s,[].concat(t).map(i=>{let a=(...o)=>(w(s,a),i(...o));return a}))},He.removeHook=w,window.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&We()&&!(vi=fe(".vjs-styles-defaults"))&&(vi=Ye("vjs-styles-defaults"),(nr=fe("head"))&&nr.insertBefore(vi,nr.firstChild),ye(vi,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)),Q(1,He),He.VERSION=A,He.options=ui.prototype.options_,He.getPlayers=()=>ui.players,He.getPlayer=s=>{var t=ui.players;let i;if(typeof s=="string"){var a=ed(s),o=t[a];if(o)return o;i=fe("#"+a)}else i=s;if($e(i)){var{player:o,playerId:a}=i;if(o||t[a])return o||t[a]}},He.getAllPlayers=()=>Object.keys(ui.players).map(s=>ui.players[s]).filter(Boolean),He.players=ui.players,He.getComponent=Ze.getComponent,He.registerComponent=(s,t)=>(Ut.isTech(t)&&S.warn(`The ${s} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Ze.registerComponent.call(Ze,s,t)),He.getTech=Ut.getTech,He.registerTech=Ut.registerTech,He.use=function(s,t){tr[s]=tr[s]||[],tr[s].push(t)},Object.defineProperty(He,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(He.middleware,"TERMINATOR",{value:$s,writeable:!1,enumerable:!0}),He.browser=ke,He.obj=z,He.mergeOptions=fn(9,"videojs.mergeOptions","videojs.obj.merge",Z),He.defineLazyProperty=fn(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",ee),He.bind=fn(9,"videojs.bind","native Function.prototype.bind",Kt),He.registerPlugin=Zi.registerPlugin,He.deregisterPlugin=Zi.deregisterPlugin,He.plugin=(s,t)=>(S.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Zi.registerPlugin(s,t)),He.getPlugins=Zi.getPlugins,He.getPlugin=Zi.getPlugin,He.getPluginVersion=Zi.getPluginVersion,He.addLanguage=function(s,t){return s=(""+s).toLowerCase(),He.options.languages=Z(He.options.languages,{[s]:t}),He.options.languages[s]},He.log=S,He.createLogger=u,He.time=Me,He.createTimeRange=fn(9,"videojs.createTimeRange","videojs.time.createTimeRanges",hn),He.createTimeRanges=fn(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",hn),He.formatTime=fn(9,"videojs.formatTime","videojs.time.formatTime",Jn),He.setFormatTime=fn(9,"videojs.setFormatTime","videojs.time.setFormatTime",Kl),He.resetFormatTime=fn(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Yl),He.parseUrl=fn(9,"videojs.parseUrl","videojs.url.parseUrl",Ja),He.isCrossOrigin=fn(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",qs),He.EventTarget=ci,He.any=Pi,He.on=Vt,He.one=Si,He.off=kt,He.trigger=oi,He.xhr=to,He.TextTrack=ts,He.AudioTrack=lu,He.VideoTrack=uu,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(s=>{He[s]=function(){return S.warn(`videojs.${s}() is deprecated; use videojs.dom.${s}() instead`),Qe[s].apply(null,arguments)}}),He.computedStyle=fn(9,"videojs.computedStyle","videojs.dom.computedStyle",ot),He.dom=Qe,He.fn=Ai,He.num=Ws,He.str=rp,He.url=hp,He.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"},Vs(function(s,t){/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */s.exports=function(i){function a(H){return H&&typeof H=="object"&&"default"in H?H:{default:H}}var o=a(i);class l{constructor(se){let pe=this;return pe.id=se.id,pe.label=pe.id,pe.width=se.width,pe.height=se.height,pe.bitrate=se.bandwidth,pe.frameRate=se.frameRate,pe.enabled_=se.enabled,Object.defineProperty(pe,"enabled",{get(){return pe.enabled_()},set(ae){pe.enabled_(ae)}}),pe}}class h extends o.default.EventTarget{constructor(){super();let se=this;return se.levels_=[],se.selectedIndex_=-1,Object.defineProperty(se,"selectedIndex",{get(){return se.selectedIndex_}}),Object.defineProperty(se,"length",{get(){return se.levels_.length}}),se[Symbol.iterator]=()=>se.levels_.values(),se}addQualityLevel(se){let pe=this.getQualityLevelById(se.id);if(pe)return pe;const ae=this.levels_.length;return pe=new l(se),""+ae in this||Object.defineProperty(this,ae,{get(){return this.levels_[ae]}}),this.levels_.push(pe),this.trigger({qualityLevel:pe,type:"addqualitylevel"}),pe}removeQualityLevel(se){let pe=null;for(let ae=0,_e=this.length;ae<_e;ae++)if(this[ae]===se){pe=this.levels_.splice(ae,1)[0],this.selectedIndex_===ae?this.selectedIndex_=-1:this.selectedIndex_>ae&&this.selectedIndex_--;break}return pe&&this.trigger({qualityLevel:se,type:"removequalitylevel"}),pe}getQualityLevelById(se){for(let pe=0,ae=this.length;pe<ae;pe++){const _e=this[pe];if(_e.id===se)return _e}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}h.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const H in h.prototype.allowedEvents_)h.prototype["on"+H]=null;var T="4.1.0";const B=function(H,se){const pe=H.qualityLevels,ae=new h,_e=function(){ae.dispose(),H.qualityLevels=pe,H.off("dispose",_e)};return H.on("dispose",_e),H.qualityLevels=()=>ae,H.qualityLevels.VERSION=T,ae},G=function(H){return B(this,o.default.obj.merge({},H))};return o.default.registerPlugin("qualityLevels",G),G.VERSION=T,G}(He)});function of(s){return window.atob?window.atob(s):Buffer.from(s,"base64").toString("binary")}var td="https://example.com",ra=function(s,o){if(/^[a-z]+:/i.test(o))return o;/^data:/.test(s)&&(s=window.location&&window.location.href||"");var i=/^\/\//.test(s),a=!window.location&&!/\/\//i.test(s),o=(s=new window.URL(s,window.location||td),new URL(o,s));return a?o.href.slice(td.length):i?o.href.slice(o.protocol.length):o.href},_r=function(){function s(){this.listeners={}}var t=s.prototype;return t.on=function(i,a){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(a)},t.off=function(i,a){return!!this.listeners[i]&&(a=this.listeners[i].indexOf(a),this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(a,1),-1<a)},t.trigger=function(i){var a=this.listeners[i];if(a)if(arguments.length===2)for(var o=a.length,l=0;l<o;++l)a[l].call(this,arguments[1]);else for(var h=Array.prototype.slice.call(arguments,1),T=a.length,B=0;B<T;++B)a[B].apply(this,h)},t.dispose=function(){this.listeners={}},t.pipe=function(i){this.on("data",function(a){i.push(a)})},s}();function id(s){for(var t=of(s),i=new Uint8Array(t.length),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class lf extends _r{constructor(){super(),this.buffer=""}push(t){let i;for(this.buffer+=t,i=this.buffer.indexOf(`
`);-1<i;i=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)}}function Po(t){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),i}function Gi(s){var t={};if(s){var i,a=s.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let o=a.length;for(;o--;)a[o]!==""&&((i=/([^=]*)=(.*)/.exec(a[o]).slice(1))[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),t[i[0]]=i[1])}return t}let uf="	",nd=t=>{var t=t.split("x"),i={};return t[0]&&(i.width=parseInt(t[0],10)),t[1]&&(i.height=parseInt(t[1],10)),i};class df extends _r{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let i,a;(t=t.trim()).length!==0&&(t[0]!=="#"?this.trigger("data",{type:"uri",uri:t}):this.tagMappers.reduce((o,l)=>(l=l(t),l===t?o:o.concat([l])),[t]).forEach(o=>{for(let H=0;H<this.customParsers.length;H++)if(this.customParsers[H].call(this,o))return;var l;if(o.indexOf("#EXT")!==0)this.trigger("data",{type:"comment",text:o.slice(1)});else if(o=o.replace("\r",""),i=/^#EXTM3U/.exec(o))this.trigger("data",{type:"tag",tagType:"m3u"});else if(i=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(o))a={type:"tag",tagType:"inf"},i[1]&&(a.duration=parseFloat(i[1])),i[2]&&(a.title=i[2]),this.trigger("data",a);else if(i=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(o))a={type:"tag",tagType:"targetduration"},i[1]&&(a.duration=parseInt(i[1],10)),this.trigger("data",a);else if(i=/^#EXT-X-VERSION:([0-9.]*)?/.exec(o))a={type:"tag",tagType:"version"},i[1]&&(a.version=parseInt(i[1],10)),this.trigger("data",a);else if(i=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(o))a={type:"tag",tagType:"media-sequence"},i[1]&&(a.number=parseInt(i[1],10)),this.trigger("data",a);else if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(o))a={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(a.number=parseInt(i[1],10)),this.trigger("data",a);else if(i=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(o))a={type:"tag",tagType:"playlist-type"},i[1]&&(a.playlistType=i[1]),this.trigger("data",a);else if(i=/^#EXT-X-BYTERANGE:(.*)?$/.exec(o))a=Ii(Po(i[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",a);else if(i=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(o))a={type:"tag",tagType:"allow-cache"},i[1]&&(a.allowed=!/NO/.test(i[1])),this.trigger("data",a);else if(i=/^#EXT-X-MAP:(.*)$/.exec(o))a={type:"tag",tagType:"map"},i[1]&&((l=Gi(i[1])).URI&&(a.uri=l.URI),l.BYTERANGE)&&(a.byterange=Po(l.BYTERANGE)),this.trigger("data",a);else if(i=/^#EXT-X-STREAM-INF:(.*)$/.exec(o))a={type:"tag",tagType:"stream-inf"},i[1]&&(a.attributes=Gi(i[1]),a.attributes.RESOLUTION&&(a.attributes.RESOLUTION=nd(a.attributes.RESOLUTION)),a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes["FRAME-RATE"]&&(a.attributes["FRAME-RATE"]=parseFloat(a.attributes["FRAME-RATE"])),a.attributes["PROGRAM-ID"])&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],10)),this.trigger("data",a);else if(i=/^#EXT-X-MEDIA:(.*)$/.exec(o))a={type:"tag",tagType:"media"},i[1]&&(a.attributes=Gi(i[1])),this.trigger("data",a);else if(i=/^#EXT-X-ENDLIST/.exec(o))this.trigger("data",{type:"tag",tagType:"endlist"});else if(i=/^#EXT-X-DISCONTINUITY/.exec(o))this.trigger("data",{type:"tag",tagType:"discontinuity"});else if(i=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(o))a={type:"tag",tagType:"program-date-time"},i[1]&&(a.dateTimeString=i[1],a.dateTimeObject=new Date(i[1])),this.trigger("data",a);else if(i=/^#EXT-X-KEY:(.*)$/.exec(o))a={type:"tag",tagType:"key"},i[1]&&(a.attributes=Gi(i[1]),a.attributes.IV)&&(a.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV)),this.trigger("data",a);else if(i=/^#EXT-X-START:(.*)$/.exec(o))a={type:"tag",tagType:"start"},i[1]&&(a.attributes=Gi(i[1]),a.attributes["TIME-OFFSET"]=parseFloat(a.attributes["TIME-OFFSET"]),a.attributes.PRECISE=/YES/.test(a.attributes.PRECISE)),this.trigger("data",a);else if(i=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(o))a={type:"tag",tagType:"cue-out-cont"},i[1]?a.data=i[1]:a.data="",this.trigger("data",a);else if(i=/^#EXT-X-CUE-OUT:(.*)?$/.exec(o))a={type:"tag",tagType:"cue-out"},i[1]?a.data=i[1]:a.data="",this.trigger("data",a);else if(i=/^#EXT-X-CUE-IN:?(.*)?$/.exec(o))a={type:"tag",tagType:"cue-in"},i[1]?a.data=i[1]:a.data="",this.trigger("data",a);else if((i=/^#EXT-X-SKIP:(.*)$/.exec(o))&&i[1])(a={type:"tag",tagType:"skip"}).attributes=Gi(i[1]),a.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(a.attributes["SKIPPED-SEGMENTS"]=parseInt(a.attributes["SKIPPED-SEGMENTS"],10)),a.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(a.attributes["RECENTLY-REMOVED-DATERANGES"]=a.attributes["RECENTLY-REMOVED-DATERANGES"].split(uf)),this.trigger("data",a);else if((i=/^#EXT-X-PART:(.*)$/.exec(o))&&i[1])(a={type:"tag",tagType:"part"}).attributes=Gi(i[1]),["DURATION"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=parseFloat(a.attributes[H]))}),["INDEPENDENT","GAP"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=/YES/.test(a.attributes[H]))}),a.attributes.hasOwnProperty("BYTERANGE")&&(a.attributes.byterange=Po(a.attributes.BYTERANGE)),this.trigger("data",a);else if((i=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(o))&&i[1])(a={type:"tag",tagType:"server-control"}).attributes=Gi(i[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=parseFloat(a.attributes[H]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=/YES/.test(a.attributes[H]))}),this.trigger("data",a);else if((i=/^#EXT-X-PART-INF:(.*)$/.exec(o))&&i[1])(a={type:"tag",tagType:"part-inf"}).attributes=Gi(i[1]),["PART-TARGET"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=parseFloat(a.attributes[H]))}),this.trigger("data",a);else if((i=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(o))&&i[1])(a={type:"tag",tagType:"preload-hint"}).attributes=Gi(i[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(H){var se;a.attributes.hasOwnProperty(H)&&(a.attributes[H]=parseInt(a.attributes[H],10),se=H==="BYTERANGE-LENGTH"?"length":"offset",a.attributes.byterange=a.attributes.byterange||{},a.attributes.byterange[se]=a.attributes[H],delete a.attributes[H])}),this.trigger("data",a);else if((i=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(o))&&i[1])(a={type:"tag",tagType:"rendition-report"}).attributes=Gi(i[1]),["LAST-MSN","LAST-PART"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=parseInt(a.attributes[H],10))}),this.trigger("data",a);else if((i=/^#EXT-X-DATERANGE:(.*)$/.exec(o))&&i[1]){(a={type:"tag",tagType:"daterange"}).attributes=Gi(i[1]),["ID","CLASS"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=String(a.attributes[H]))}),["START-DATE","END-DATE"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=new Date(a.attributes[H]))}),["DURATION","PLANNED-DURATION"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=parseFloat(a.attributes[H]))}),["END-ON-NEXT"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=/YES/i.test(a.attributes[H]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(H){a.attributes.hasOwnProperty(H)&&(a.attributes[H]=a.attributes[H].toString(16))});var h,T,B,G=/^X-([A-Z]+-)+[A-Z]+$/;for(h in a.attributes)G.test(h)&&(T=/[0-9A-Fa-f]{6}/g.test(a.attributes[h]),B=/^\d+(\.\d+)?$/.test(a.attributes[h]),a.attributes[h]=T?a.attributes[h].toString(16):(B?parseFloat:String)(a.attributes[h]));this.trigger("data",a)}else(i=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(o))?this.trigger("data",{type:"tag",tagType:"independent-segments"}):(i=/^#EXT-X-I-FRAMES-ONLY/.exec(o))?this.trigger("data",{type:"tag",tagType:"i-frames-only"}):(i=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(o))?((a={type:"tag",tagType:"content-steering"}).attributes=Gi(i[1]),this.trigger("data",a)):(i=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(o))?((a={type:"tag",tagType:"i-frame-playlist"}).attributes=Gi(i[1]),a.attributes.URI&&(a.uri=a.attributes.URI),a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes.RESOLUTION&&(a.attributes.RESOLUTION=nd(a.attributes.RESOLUTION)),a.attributes["AVERAGE-BANDWIDTH"]&&(a.attributes["AVERAGE-BANDWIDTH"]=parseInt(a.attributes["AVERAGE-BANDWIDTH"],10)),a.attributes["FRAME-RATE"]&&(a.attributes["FRAME-RATE"]=parseFloat(a.attributes["FRAME-RATE"])),this.trigger("data",a)):(i=/^#EXT-X-DEFINE:(.*)$/.exec(o))?((a={type:"tag",tagType:"define"}).attributes=Gi(i[1]),this.trigger("data",a)):this.trigger("data",{type:"tag",data:o.slice(4)})}))}addParser({expression:t,customType:i,dataParser:a,segment:o}){typeof a!="function"&&(a=l=>l),this.customParsers.push(l=>{if(t.exec(l))return this.trigger("data",{type:"custom",data:a(l),customType:i,segment:o}),!0})}addTagMapper({expression:t,map:i}){this.tagMappers.push(a=>t.test(a)?i(a):a)}}function zn(s){let t={};return Object.keys(s).forEach(function(i){t[i.toLowerCase().replace(/-(\w)/g,a=>a[1].toUpperCase())]=s[i]}),t}function Ro(h){var t,i,a,o,l,{serverControl:h,targetDuration:T,partTargetDuration:B}=h;h&&(t="#EXT-X-SERVER-CONTROL",i="holdBack",a="partHoldBack",o=T&&3*T,l=B&&2*B,T&&!h.hasOwnProperty(i)&&(h[i]=o,this.trigger("info",{message:t+` defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&h[i]<o&&(this.trigger("warn",{message:t+` clamping HOLD-BACK (${h[i]}) to targetDuration * 3 (${o})`}),h[i]=o),B&&!h.hasOwnProperty(a)&&(h[a]=3*B,this.trigger("info",{message:t+` defaulting PART-HOLD-BACK to partTargetDuration * 3 (${h[a]}).`})),B)&&h[a]<l&&(this.trigger("warn",{message:t+` clamping PART-HOLD-BACK (${h[a]}) to partTargetDuration * 2 (${l}).`}),h[a]=l)}class cf extends _r{constructor(t={}){super(),this.lineStream=new lf,this.parseStream=new df,this.lineStream.pipe(this.parseStream),this.mainDefinitions=t.mainDefinitions||{},this.params=new URL(t.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;let i=this,a=[],o={},l,h,T=!1,B={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},G=0,H=(this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]},0),se=0,pe={};this.on("end",()=>{o.uri||!o.parts&&!o.preloadHints||(!o.map&&l&&(o.map=l),!o.key&&h&&(o.key=h),o.timeline||typeof G!="number"||(o.timeline=G),this.manifest.preloadSegment=o)}),this.parseStream.on("data",function(ae){let _e,Ce;if(i.manifest.definitions){for(var Le in i.manifest.definitions)if(ae.uri&&(ae.uri=ae.uri.replace(`{$${Le}}`,i.manifest.definitions[Le])),ae.attributes)for(var xe in ae.attributes)typeof ae.attributes[xe]=="string"&&(ae.attributes[xe]=ae.attributes[xe].replace(`{$${Le}}`,i.manifest.definitions[Le]))}({tag(){({version(){ae.version&&(this.manifest.version=ae.version)},"allow-cache"(){this.manifest.allowCache=ae.allowed,"allowed"in ae||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){var Pe={};"length"in ae&&((o.byterange=Pe).length=ae.length,"offset"in ae||(ae.offset=H)),"offset"in ae&&((o.byterange=Pe).offset=ae.offset),H=Pe.offset+Pe.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),ae.title&&(o.title=ae.title),0<ae.duration&&(o.duration=ae.duration),ae.duration===0&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key(){if(ae.attributes)if(ae.attributes.METHOD==="NONE")h=null;else if(ae.attributes.URI)if(ae.attributes.KEYFORMAT==="com.apple.streamingkeydelivery")this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:ae.attributes};else if(ae.attributes.KEYFORMAT==="com.microsoft.playready")this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:ae.attributes.URI};else{if(ae.attributes.KEYFORMAT==="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed")return["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(ae.attributes.METHOD)===-1?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):(ae.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),ae.attributes.URI.substring(0,23)!=="data:text/plain;base64,"?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):ae.attributes.KEYID&&ae.attributes.KEYID.substring(0,2)==="0x"?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:ae.attributes.KEYFORMAT,keyId:ae.attributes.KEYID.substring(2)},pssh:id(ae.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));ae.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),h={method:ae.attributes.METHOD||"AES-128",uri:ae.attributes.URI},typeof ae.attributes.IV<"u"&&(h.iv=ae.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(ae.number)?this.manifest.mediaSequence=ae.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+ae.number})},"discontinuity-sequence"(){isFinite(ae.number)?(this.manifest.discontinuitySequence=ae.number,G=ae.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+ae.number})},"playlist-type"(){/VOD|EVENT/.test(ae.playlistType)?this.manifest.playlistType=ae.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+ae.playlist})},map(){l={},ae.uri&&(l.uri=ae.uri),ae.byterange&&(l.byterange=ae.byterange),h&&(l.key=h)},"stream-inf"(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||B,ae.attributes?(o.attributes||(o.attributes={}),Ii(o.attributes,ae.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){var Pe;this.manifest.mediaGroups=this.manifest.mediaGroups||B,ae.attributes&&ae.attributes.TYPE&&ae.attributes["GROUP-ID"]&&ae.attributes.NAME?((Pe=this.manifest.mediaGroups[ae.attributes.TYPE])[ae.attributes["GROUP-ID"]]=Pe[ae.attributes["GROUP-ID"]]||{},_e=Pe[ae.attributes["GROUP-ID"]],(Ce={default:/yes/i.test(ae.attributes.DEFAULT)}).default?Ce.autoselect=!0:Ce.autoselect=/yes/i.test(ae.attributes.AUTOSELECT),ae.attributes.LANGUAGE&&(Ce.language=ae.attributes.LANGUAGE),ae.attributes.URI&&(Ce.uri=ae.attributes.URI),ae.attributes["INSTREAM-ID"]&&(Ce.instreamId=ae.attributes["INSTREAM-ID"]),ae.attributes.CHARACTERISTICS&&(Ce.characteristics=ae.attributes.CHARACTERISTICS),ae.attributes.FORCED&&(Ce.forced=/yes/i.test(ae.attributes.FORCED)),_e[ae.attributes.NAME]=Ce):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity(){G+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=ae.dateTimeString,this.manifest.dateTimeObject=ae.dateTimeObject),o.dateTimeString=ae.dateTimeString,o.dateTimeObject=ae.dateTimeObject;var Pe=this.lastProgramDateTime;this.lastProgramDateTime=new Date(ae.dateTimeString).getTime(),Pe===null&&this.manifest.segments.reduceRight((Ae,st)=>(st.programDateTime=Ae-1e3*st.duration,st.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(ae.duration)||ae.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+ae.duration}):(this.manifest.targetDuration=ae.duration,Ro.call(this,this.manifest))},start(){!ae.attributes||isNaN(ae.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start={timeOffset:ae.attributes["TIME-OFFSET"],precise:ae.attributes.PRECISE}},"cue-out"(){o.cueOut=ae.data},"cue-out-cont"(){o.cueOutCont=ae.data},"cue-in"(){o.cueIn=ae.data},skip(){this.manifest.skip=zn(ae.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",ae.attributes,["SKIPPED-SEGMENTS"])},part(){T=!0;var Pe=this.manifest.segments.length,Ae=zn(ae.attributes),Ae=(o.parts=o.parts||[],o.parts.push(Ae),Ae.byterange&&(Ae.byterange.hasOwnProperty("offset")||(Ae.byterange.offset=se),se=Ae.byterange.offset+Ae.byterange.length),o.parts.length-1);this.warnOnMissingAttributes_(`#EXT-X-PART #${Ae} for segment #`+Pe,ae.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((st,Ue)=>{st.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${Ue} lacks required attribute(s): LAST-PART`})})},"server-control"(){var Pe=this.manifest.serverControl=zn(ae.attributes);Pe.hasOwnProperty("canBlockReload")||(Pe.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Ro.call(this,this.manifest),Pe.canSkipDateranges&&!Pe.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){var Pe=this.manifest.segments.length,Ae=zn(ae.attributes),st=Ae.type&&Ae.type==="PART",Ue=(o.preloadHints=o.preloadHints||[],o.preloadHints.push(Ae),!Ae.byterange||Ae.byterange.hasOwnProperty("offset")||(Ae.byterange.offset=st?se:0,st&&(se=Ae.byterange.offset+Ae.byterange.length)),o.preloadHints.length-1);if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${Ue} for segment #`+Pe,ae.attributes,["TYPE","URI"]),Ae.type)for(let Et=0;Et<o.preloadHints.length-1;Et++){var ft=o.preloadHints[Et];ft.type&&ft.type===Ae.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${Ue} for segment #${Pe} has the same TYPE ${Ae.type} as preload hint #`+Et})}},"rendition-report"(){var Pe=zn(ae.attributes),Pe=(this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(Pe),this.manifest.renditionReports.length-1),Ae=["LAST-MSN","URI"];T&&Ae.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+Pe,ae.attributes,Ae)},"part-inf"(){this.manifest.partInf=zn(ae.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",ae.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Ro.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(zn(ae.attributes));var Pe=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_("#EXT-X-DATERANGE #"+Pe,ae.attributes,["ID","START-DATE"]);let Ae=this.manifest.dateRanges[Pe];Ae.endDate&&Ae.startDate&&new Date(Ae.endDate)<new Date(Ae.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),Ae.duration&&Ae.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),Ae.plannedDuration&&Ae.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});var st=!!Ae.endOnNext;if(st&&!Ae.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),st&&(Ae.duration||Ae.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),Ae.duration&&Ae.endDate&&(st=Ae.startDate.getTime()+1e3*Ae.duration,this.manifest.dateRanges[Pe].endDate=new Date(st)),pe[Ae.id]){for(var Ue in pe[Ae.id])if(Ae[Ue]&&JSON.stringify(pe[Ae.id][Ue])!==JSON.stringify(Ae[Ue])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}Pe=this.manifest.dateRanges.findIndex(ft=>ft.id===Ae.id),this.manifest.dateRanges[Pe]=Ii(this.manifest.dateRanges[Pe],Ae),pe[Ae.id]=Ii(pe[Ae.id],Ae),this.manifest.dateRanges.pop()}else pe[Ae.id]=Ae},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=zn(ae.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",ae.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};var Pe,Ae=(st,Ue)=>{st in this.manifest.definitions?this.trigger("error",{message:"EXT-X-DEFINE: Duplicate name "+st}):this.manifest.definitions[st]=Ue};return"QUERYPARAM"in ae.attributes?"NAME"in ae.attributes||"IMPORT"in ae.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):(Pe=this.params.get(ae.attributes.QUERYPARAM))?void Ae(ae.attributes.QUERYPARAM,decodeURIComponent(Pe)):void this.trigger("error",{message:"EXT-X-DEFINE: No query param "+ae.attributes.QUERYPARAM}):"NAME"in ae.attributes?"IMPORT"in ae.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in ae.attributes&&typeof ae.attributes.VALUE=="string"?void Ae(ae.attributes.NAME,ae.attributes.VALUE):void this.trigger("error",{message:"EXT-X-DEFINE: No value for "+ae.attributes.NAME}):"IMPORT"in ae.attributes?this.mainDefinitions[ae.attributes.IMPORT]?void Ae(ae.attributes.IMPORT,this.mainDefinitions[ae.attributes.IMPORT]):void this.trigger("error",{message:`EXT-X-DEFINE: No value ${ae.attributes.IMPORT} to import, or IMPORT used on main playlist`}):void this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:ae.attributes,uri:ae.uri,timeline:G}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",ae.attributes,["BANDWIDTH","URI"])}}[ae.tagType]||function(){}).call(i)},uri(){o.uri=ae.uri,a.push(o),!this.manifest.targetDuration||"duration"in o||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),h&&(o.key=h),o.timeline=G,l&&(o.map=l),se=0,this.lastProgramDateTime!==null&&(o.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*o.duration),o={}},comment(){},custom(){ae.segment?(o.custom=o.custom||{},o.custom[ae.customType]=ae.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[ae.customType]=ae.data)}})[ae.type].call(i)})}requiredCompatibilityversion(t,i){(t<i||!t)&&this.trigger("warn",{message:"manifest must be at least version "+i})}warnOnMissingAttributes_(t,i,a){let o=[];a.forEach(function(l){i.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+o.join(", ")})}push(t){this.lineStream.push(t)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}function rd(s){return rr.audio.test((s=s===void 0?"":s).trim().toLowerCase())}function hf(s){return rr.text.test((s=s===void 0?"":s).trim().toLowerCase())}function us(s,t){return s===void 0&&(s=""),t===void 0&&(t=!1),window.MediaSource&&window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported(Tr(s))||t&&window.ManagedMediaSource&&window.ManagedMediaSource.isTypeSupported&&window.ManagedMediaSource.isTypeSupported(Tr(s))||!1}function Lo(s){return(s=s===void 0?"":s).toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<ad.length;i++){var a=ad[i];if(rr["muxer"+a].test(t))return!0}return!1})}function sd(s){return mf.test(s)?"hls":gf.test(s)?"dash":s==="application/vnd.videojs.vhs+json"?"vhs-json":null}function pf(s){return ud(s)}var rr={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},ff=["video","audio","text"],ad=["Video","Audio","Text"],od=function(s){return s&&s.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,a){return"avc1."+("00"+Number(i).toString(16)).slice(-2)+"00"+("00"+Number(a).toString(16)).slice(-2)})},Tn=function(t){var t=(t=t===void 0?"":t).split(","),i=[];return t.forEach(function(a){var o;a=a.trim(),ff.forEach(function(l){var h,T=rr[l].exec(a.toLowerCase());!T||T.length<=1||(o=l,T=a.substring(0,T[1].length),h=a.replace(T,""),i.push({type:T,details:h,mediaType:l}))}),o||i.push({type:a,details:"",mediaType:"unknown"})}),i},Tr=function(s){var t,i,a;if(s&&typeof s=="string")return i="video",(t=s.toLowerCase().split(",").map(function(o){return od(o.trim())})).length===1&&rd(t[0])?i="audio":t.length===1&&hf(t[0])&&(i="application"),a="mp4",t.every(function(o){return rr.mp4.test(o)})?a="mp4":t.every(function(o){return rr.webm.test(o)})?a="webm":t.every(function(o){return rr.ogg.test(o)})&&(a="ogg"),i+"/"+a+';codecs="'+s+'"'},ld="mp4a.40.2",mf=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,gf=/^application\/dash\+xml/i,yf=function(s){return s.toString(2).length},vf=function(s){return Math.ceil(yf(s)/8)},ud=function(s){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer},wt=function(s){return s instanceof Uint8Array?s:(Array.isArray(s)||pf(s)||s instanceof ArrayBuffer||(s=typeof s!="number"||typeof s=="number"&&s!=s?0:[s]),new Uint8Array(s&&s.buffer||s,s&&s.byteOffset||0,s&&s.byteLength||0))},Ui=window.BigInt||Number,Mo=[Ui("0x1"),Ui("0x100"),Ui("0x10000"),Ui("0x1000000"),Ui("0x100000000"),Ui("0x10000000000"),Ui("0x1000000000000"),Ui("0x100000000000000"),Ui("0x10000000000000000")],bf=(Xi=new Uint16Array([65484]),(Xi=new Uint8Array(Xi.buffer,Xi.byteOffset,Xi.byteLength))[0],function(s,o){var o=o===void 0?{}:o,i=o.signed,i=i!==void 0&&i,o=o.le,a=o!==void 0&&o,o=(s=wt(s),a?"reduce":"reduceRight"),o=(s[o]||Array.prototype[o]).call(s,function(l,h,T){return T=a?T:Math.abs(T+1-s.length),l+Ui(h)*Mo[T]},Ui(0));return i&&(i=Mo[s.length]/Ui(2)-Ui(1))<(o=Ui(o))&&(o=(o=o-i-i)-Ui(2)),Number(o)}),_f=function(s,t){for(var t=(t===void 0?{}:t).le,i=t!==void 0&&t,a=(s=Ui(s=typeof s!="bigint"&&typeof s!="number"||typeof s=="number"&&s!=s?0:s),vf(s)),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var h=i?l:Math.abs(l+1-o.length);o[h]=Number(s/Mo[l]&Ui(255)),s<0&&(o[h]=Math.abs(~o[h]),o[h]-=l===0?1:2)}return o},dd=function(s,t){if(typeof(s=typeof s!="string"&&s&&typeof s.toString=="function"?s.toString():s)!="string")return new Uint8Array;t||(s=unescape(encodeURIComponent(s)));for(var i=new Uint8Array(s.length),a=0;a<s.length;a++)i[a]=s.charCodeAt(a);return i},hi=function(s,t,h){var h=h===void 0?{}:h,o=h.offset,a=o===void 0?0:o,o=h.mask,l=o===void 0?[]:o,h=(s=wt(s),(t=wt(t)).every||Array.prototype.every);return t.length&&s.length-a>=t.length&&h.call(t,function(T,B){return T===(l[B]?l[B]&s[a+B]:s[a+B])})},Tf=function(s,t,i){t.forEach(function(a){for(var o in s.mediaGroups[a])for(var l in s.mediaGroups[a][o]){var h=s.mediaGroups[a][o][l];i(h,a,o,l)}})};function Uo(s,t){return(t=t===void 0?Object:t)&&typeof t.freeze=="function"?t.freeze(s):s}var cd=Uo({HTML:"text/html",isHTML:function(s){return s===cd.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),hd=Uo({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===hd.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}),ds={assign:function(s,t){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i]);return s},find:function(s,t,i){if(i===void 0&&(i=Array.prototype),s&&typeof i.find=="function")return i.find.call(s,t);for(var a=0;a<s.length;a++)if(Object.prototype.hasOwnProperty.call(s,a)){var o=s[a];if(t.call(void 0,o,a,s))return o}},freeze:Uo,MIME_TYPE:cd,NAMESPACE:hd},Sn=ds.find,cs=ds.NAMESPACE;function Sf(s){return s!==""}function wf(s,t){return s.hasOwnProperty(t)||(s[t]=!0),s}function pd(s){return s?(s=(s=s)?s.split(/[\t\n\f\r ]+/).filter(Sf):[],Object.keys(s.reduce(wf,{}))):[]}function hs(s,t){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}function Qi(s,t){var i=s.prototype;function a(){}i instanceof t||(a.prototype=t.prototype,hs(i,a=new a),s.prototype=i=a),i.constructor!=s&&(i.constructor=s)}var Fi={},Oi=(Fi.ELEMENT_NODE=1,Fi.ATTRIBUTE_NODE=2,Fi.TEXT_NODE=3,Fi.CDATA_SECTION_NODE=4,Fi.ENTITY_REFERENCE_NODE=5,Fi.ENTITY_NODE=6,Fi.PROCESSING_INSTRUCTION_NODE=7,Fi.COMMENT_NODE=8,Fi.DOCUMENT_NODE=9,Fi.DOCUMENT_TYPE_NODE=10,Fi.DOCUMENT_FRAGMENT_NODE=11,Fi.NOTATION_NODE=12,{}),Ri={},Ji=(Oi.INDEX_SIZE_ERR=(Ri[1]="Index size error",1),Oi.DOMSTRING_SIZE_ERR=(Ri[2]="DOMString size error",2),Oi.HIERARCHY_REQUEST_ERR=(Ri[3]="Hierarchy request error",3)),fd=(Oi.WRONG_DOCUMENT_ERR=(Ri[4]="Wrong document",4),Oi.INVALID_CHARACTER_ERR=(Ri[5]="Invalid character",5),Oi.NO_DATA_ALLOWED_ERR=(Ri[6]="No data allowed",6),Oi.NO_MODIFICATION_ALLOWED_ERR=(Ri[7]="No modification allowed",7),Oi.NOT_FOUND_ERR=(Ri[8]="Not found",8));Oi.NOT_SUPPORTED_ERR=(Ri[9]="Not supported",9),Oi.INUSE_ATTRIBUTE_ERR=(Ri[10]="Attribute in use",10);function Ei(s,t){var i;return t instanceof Error?i=t:(i=this,Error.call(this,Ri[s]),this.message=Ri[s],Error.captureStackTrace&&Error.captureStackTrace(this,Ei)),i.code=s,t&&(this.message=this.message+": "+t),i}function Pn(){}function Sr(s,t){this._node=s,this._refresh=t,Fo(this)}function Fo(s){var t=s._node._inc||s._node.ownerDocument._inc;if(s._inc!==t){var i=s._refresh(s._node);if(Id(s,"length",i.length),!s.$$length||i.length<s.$$length)for(var a=i.length;a in s;a++)Object.prototype.hasOwnProperty.call(s,a)&&delete s[a];hs(i,s),s._inc=t}}function sa(){}function md(s,t){for(var i=s.length;i--;)if(s[i]===t)return i}function gd(s,t,i,a){a?t[md(t,a)]=i:t[t.length++]=i,s&&(t=(i.ownerElement=s).ownerDocument)&&(a&&_d(t,s,a),a=s,s=i,(i=t)&&i._inc++,s.namespaceURI===cs.XMLNS)&&(a._nsMap[s.prefix?s.localName:""]=s.value)}function yd(s,t,i){var a=md(t,i);if(!(0<=a))throw new Ei(fd,new Error(s.tagName+"@"+i));for(var o,l=t.length-1;a<l;)t[a]=t[++a];t.length=l,s&&(o=s.ownerDocument)&&(_d(o,s,i),i.ownerElement=null)}function vd(){}function ii(){}function bd(s){return(s=="<"?"&lt;":s==">"&&"&gt;")||(s=="&"?"&amp;":s=='"'&&"&quot;")||"&#"+s.charCodeAt()+";"}function ps(s,t){if(t(s))return 1;if(s=s.firstChild)do if(ps(s,t))return 1;while(s=s.nextSibling)}function fs(){this.ownerDocument=this}function _d(s,t,i){s&&s._inc++,i.namespaceURI===cs.XMLNS&&delete t._nsMap[i.prefix?i.localName:""]}function Bo(s,t,i){if(s&&s._inc){s._inc++;var a=t.childNodes;if(i)a[a.length++]=i;else{for(var o=t.firstChild,l=0;o;)o=(a[l++]=o).nextSibling;a.length=l,delete a[a.length]}}}function Td(s,t){var i=t.previousSibling,a=t.nextSibling;return i?i.nextSibling=a:s.firstChild=a,a?a.previousSibling=i:s.lastChild=i,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,Bo(s.ownerDocument,s),t}function Rn(s){return s&&s.nodeType===ii.DOCUMENT_TYPE_NODE}function wn(s){return s&&s.nodeType===ii.ELEMENT_NODE}function zo(s){return s&&s.nodeType===ii.TEXT_NODE}function Sd(a,t){var i,a=a.childNodes||[];if(!Sn(a,wn)&&!Rn(t))return i=Sn(a,Rn),!(t&&i&&a.indexOf(i)>a.indexOf(t))}function wd(a,t){var i,a=a.childNodes||[];if(!Sn(a,function(o){return wn(o)&&o!==t}))return i=Sn(a,Rn),!(t&&i&&a.indexOf(i)>a.indexOf(t))}function Ef(s,t,i){if(!(a=s)||a.nodeType!==ii.DOCUMENT_NODE&&a.nodeType!==ii.DOCUMENT_FRAGMENT_NODE&&a.nodeType!==ii.ELEMENT_NODE)throw new Ei(Ji,"Unexpected parent node type "+s.nodeType);var a;if(i&&i.parentNode!==s)throw new Ei(fd,"child not in parent");if(!(a=t)||!(wn(a)||zo(a)||Rn(a)||a.nodeType===ii.DOCUMENT_FRAGMENT_NODE||a.nodeType===ii.COMMENT_NODE||a.nodeType===ii.PROCESSING_INSTRUCTION_NODE)||Rn(t)&&s.nodeType!==ii.DOCUMENT_NODE)throw new Ei(Ji,"Unexpected node type "+t.nodeType+" for parent node type "+s.nodeType)}function Cf(s,t,i){var a=s.childNodes||[],o=t.childNodes||[];if(t.nodeType===ii.DOCUMENT_FRAGMENT_NODE){var l=o.filter(wn);if(1<l.length||Sn(o,zo))throw new Ei(Ji,"More than one element or text in fragment");if(l.length===1&&!Sd(s,i))throw new Ei(Ji,"Element in fragment can not be inserted before doctype")}if(wn(t)&&!Sd(s,i))throw new Ei(Ji,"Only one element can be added and only after doctype");if(Rn(t)){if(Sn(a,Rn))throw new Ei(Ji,"Only one doctype is allowed");if(o=Sn(a,wn),i&&a.indexOf(o)<a.indexOf(i))throw new Ei(Ji,"Doctype can only be inserted before an element");if(!i&&o)throw new Ei(Ji,"Doctype can not be appended since element is present")}}function Ed(s,t,i){var a=s.childNodes||[],o=t.childNodes||[];if(t.nodeType===ii.DOCUMENT_FRAGMENT_NODE){var l=o.filter(wn);if(1<l.length||Sn(o,zo))throw new Ei(Ji,"More than one element or text in fragment");if(l.length===1&&!wd(s,i))throw new Ei(Ji,"Element in fragment can not be inserted before doctype")}if(wn(t)&&!wd(s,i))throw new Ei(Ji,"Only one element can be added and only after doctype");if(Rn(t)){if(Sn(a,function(h){return Rn(h)&&h!==i}))throw new Ei(Ji,"Only one doctype is allowed");if(o=Sn(a,wn),i&&a.indexOf(o)<a.indexOf(i))throw new Ei(Ji,"Doctype can only be inserted before an element")}}function aa(s,t,i,a){if(Ef(s,t,i),s.nodeType===ii.DOCUMENT_NODE&&(a||Cf)(s,t,i),a=t.parentNode,a&&a.removeChild(t),t.nodeType===11){var o=t.firstChild;if(o==null)return t;var l=t.lastChild}else o=l=t;for(a=i?i.previousSibling:s.lastChild,o.previousSibling=a,l.nextSibling=i,a?a.nextSibling=o:s.firstChild=o,i==null?s.lastChild=l:i.previousSibling=l;o.parentNode=s,o!==l&&(o=o.nextSibling););return Bo(s.ownerDocument||s,s),t.nodeType==11&&(t.firstChild=t.lastChild=null),t}function wr(){this._nsMap={}}function oa(){}function ms(){}function jo(){}function Ho(){}function qo(){}function la(){}function Cd(){}function xd(){}function Vo(){}function ua(){}function Wo(){}function kd(){}function Nd(s,t){var i,a=[],o=this.nodeType==9&&this.documentElement||this,l=o.prefix,h=o.namespaceURI;return Er(this,a,s,t,i=h&&l==null&&o.lookupPrefix(h)==null?[{namespace:h,prefix:null}]:i),a.join("")}function Ad(s,t,i){var a=s.prefix||"",o=s.namespaceURI;if(o&&(a!=="xml"||o!==cs.XML)&&o!==cs.XMLNS){for(var l=i.length;l--;){var h=i[l];if(h.prefix===a)return h.namespace!==o}return 1}}function Xo(s,t,i){s.push(" ",t,'="',i.replace(/[<>&"\t\n\r]/g,bd),'"')}function Er(s,t,i,a,o){if(o=o||[],a){if(!(s=a(s)))return;if(typeof s=="string")return void t.push(s)}switch(s.nodeType){case 1:var l=s.attributes,h=l.length,T=s.firstChild,B=s.tagName,G=B;if(!(i=cs.isHTML(s.namespaceURI)||i)&&!s.prefix&&s.namespaceURI){for(var H,se=0;se<l.length;se++)if(l.item(se).name==="xmlns"){H=l.item(se).value;break}if(!H){for(var pe=o.length-1;0<=pe;pe--)if((ae=o[pe]).prefix===""&&ae.namespace===s.namespaceURI){H=ae.namespace;break}}if(H!==s.namespaceURI){for(var ae,pe=o.length-1;0<=pe;pe--)if((ae=o[pe]).namespace===s.namespaceURI){ae.prefix&&(G=ae.prefix+":"+B);break}}}t.push("<",G);for(var _e=0;_e<h;_e++)(Ce=l.item(_e)).prefix=="xmlns"?o.push({prefix:Ce.localName,namespace:Ce.value}):Ce.nodeName=="xmlns"&&o.push({prefix:"",namespace:Ce.value});for(var Ce,Le,xe,_e=0;_e<h;_e++)Ad(Ce=l.item(_e),0,o)&&(Xo(t,(Le=Ce.prefix||"")?"xmlns:"+Le:"xmlns",xe=Ce.namespaceURI),o.push({prefix:Le,namespace:xe})),Er(Ce,t,i,a,o);if(B===G&&Ad(s,0,o)&&(Xo(t,(Le=s.prefix||"")?"xmlns:"+Le:"xmlns",xe=s.namespaceURI),o.push({prefix:Le,namespace:xe})),T||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(B)){if(t.push(">"),i&&/^script$/i.test(B))for(;T;)T.data?t.push(T.data):Er(T,t,i,a,o.slice()),T=T.nextSibling;else for(;T;)Er(T,t,i,a,o.slice()),T=T.nextSibling;t.push("</",G,">")}else t.push("/>");return;case 9:case 11:for(T=s.firstChild;T;)Er(T,t,i,a,o.slice()),T=T.nextSibling;return;case 2:return Xo(t,s.name,s.value);case 3:return t.push(s.data.replace(/[<&>]/g,bd));case 4:return t.push("<![CDATA[",s.data,"]]>");case 8:return t.push("<!--",s.data,"-->");case 10:var Pe=s.publicId,Ae=s.systemId;return t.push("<!DOCTYPE ",s.name),void(Pe?(t.push(" PUBLIC ",Pe),Ae&&Ae!="."&&t.push(" ",Ae),t.push(">")):Ae&&Ae!="."?t.push(" SYSTEM ",Ae,">"):((Pe=s.internalSubset)&&t.push(" [",Pe,"]"),t.push(">")));case 7:return t.push("<?",s.target," ",s.data,"?>");case 5:return t.push("&",s.nodeName,";");default:t.push("??",s.nodeName)}}function Id(s,t,i){s[t]=i}Oi.INVALID_STATE_ERR=(Ri[11]="Invalid state",11),Oi.SYNTAX_ERR=(Ri[12]="Syntax error",12),Oi.INVALID_MODIFICATION_ERR=(Ri[13]="Invalid modification",13),Oi.NAMESPACE_ERR=(Ri[14]="Invalid namespace",14),Oi.INVALID_ACCESS_ERR=(Ri[15]="Invalid access",15),Ei.prototype=Error.prototype,hs(Oi,Ei),Pn.prototype={length:0,item:function(s){return 0<=s&&s<this.length?this[s]:null},toString:function(s,t){for(var i=[],a=0;a<this.length;a++)Er(this[a],i,s,t);return i.join("")},filter:function(s){return Array.prototype.filter.call(this,s)},indexOf:function(s){return Array.prototype.indexOf.call(this,s)}},Sr.prototype.item=function(s){return Fo(this),this[s]||null},Qi(Sr,Pn),sa.prototype={length:0,item:Pn.prototype.item,getNamedItem:function(s){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==s)return i}},setNamedItem:function(s){var t=s.ownerElement;if(t&&t!=this._ownerElement)throw new Ei(10);return t=this.getNamedItem(s.nodeName),gd(this._ownerElement,this,s,t),t},setNamedItemNS:function(s){var t=s.ownerElement;if(t&&t!=this._ownerElement)throw new Ei(10);return t=this.getNamedItemNS(s.namespaceURI,s.localName),gd(this._ownerElement,this,s,t),t},removeNamedItem:function(s){return s=this.getNamedItem(s),yd(this._ownerElement,this,s),s},removeNamedItemNS:function(s,t){return s=this.getNamedItemNS(s,t),yd(this._ownerElement,this,s),s},getNamedItemNS:function(s,t){for(var i=this.length;i--;){var a=this[i];if(a.localName==t&&a.namespaceURI==s)return a}return null}},vd.prototype={hasFeature:function(s,t){return!0},createDocument:function(s,t,i){var a=new fs;return a.implementation=this,a.childNodes=new Pn,a.doctype=i||null,i&&a.appendChild(i),t&&(i=a.createElementNS(s,t),a.appendChild(i)),a},createDocumentType:function(s,t,i){var a=new la;return a.name=s,a.nodeName=s,a.publicId=t||"",a.systemId=i||"",a}},ii.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(s,t){return aa(this,s,t)},replaceChild:function(s,t){aa(this,s,t,Ed),t&&this.removeChild(t)},removeChild:function(s){return Td(this,s)},appendChild:function(s){return this.insertBefore(s,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(s){return function t(i,a,o){var l=new a.constructor;for(var h in a){var T;Object.prototype.hasOwnProperty.call(a,h)&&typeof(T=a[h])!="object"&&T!=l[h]&&(l[h]=T)}switch(a.childNodes&&(l.childNodes=new Pn),l.ownerDocument=i,l.nodeType){case 1:var B=a.attributes,G=l.attributes=new sa,H=B.length;G._ownerElement=l;for(var se=0;se<H;se++)l.setAttributeNode(t(i,B.item(se),!0));break;case 2:o=!0}if(o)for(var pe=a.firstChild;pe;)l.appendChild(t(i,pe,o)),pe=pe.nextSibling;return l}(this.ownerDocument||this,this,s)},normalize:function(){for(var s=this.firstChild;s;){var t=s.nextSibling;t&&t.nodeType==3&&s.nodeType==3?(this.removeChild(t),s.appendData(t.data)):(s.normalize(),s=t)}},isSupported:function(s,t){return this.ownerDocument.implementation.hasFeature(s,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(s){for(var t=this;t;){var i=t._nsMap;if(i){for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)&&i[a]===s)return a}t=t.nodeType==2?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(s){for(var t=this;t;){var i=t._nsMap;if(i&&Object.prototype.hasOwnProperty.call(i,s))return i[s];t=t.nodeType==2?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(s){return this.lookupPrefix(s)==null}},hs(Fi,ii),hs(Fi,ii.prototype),fs.prototype={nodeName:"#document",nodeType:9,doctype:null,documentElement:null,_inc:1,insertBefore:function(s,t){if(s.nodeType==11)for(var i=s.firstChild;i;){var a=i.nextSibling;this.insertBefore(i,t),i=a}else aa(this,s,t),(s.ownerDocument=this).documentElement===null&&s.nodeType===1&&(this.documentElement=s);return s},removeChild:function(s){return this.documentElement==s&&(this.documentElement=null),Td(this,s)},replaceChild:function(s,t){aa(this,s,t,Ed),s.ownerDocument=this,t&&this.removeChild(t),wn(s)&&(this.documentElement=s)},importNode:function(s,t){return function i(a,o,l){var h;switch(o.nodeType){case 1:(h=o.cloneNode(!1)).ownerDocument=a;case 11:break;case 2:l=!0}if(h=h||o.cloneNode(!1),h.ownerDocument=a,h.parentNode=null,l)for(var T=o.firstChild;T;)h.appendChild(i(a,T,l)),T=T.nextSibling;return h}(this,s,t)},getElementById:function(s){var t=null;return ps(this.documentElement,function(i){if(i.nodeType==1&&i.getAttribute("id")==s)return t=i,!0}),t},getElementsByClassName:function(s){var t=pd(s);return new Sr(this,function(i){var a=[];return 0<t.length&&ps(i.documentElement,function(o){var l,h,T;o!==i&&o.nodeType===1&&(l=o.getAttribute("class"))&&((h=s===l)||(l=pd(l),h=t.every((T=l,function(B){return T&&T.indexOf(B)!==-1}))),h)&&a.push(o)}),a})},createElement:function(s){var t=new wr;return t.ownerDocument=this,t.nodeName=s,t.tagName=s,t.localName=s,t.childNodes=new Pn,(t.attributes=new sa)._ownerElement=t},createDocumentFragment:function(){var s=new ua;return s.ownerDocument=this,s.childNodes=new Pn,s},createTextNode:function(s){var t=new jo;return t.ownerDocument=this,t.appendData(s),t},createComment:function(s){var t=new Ho;return t.ownerDocument=this,t.appendData(s),t},createCDATASection:function(s){var t=new qo;return t.ownerDocument=this,t.appendData(s),t},createProcessingInstruction:function(s,t){var i=new Wo;return i.ownerDocument=this,i.tagName=i.nodeName=i.target=s,i.nodeValue=i.data=t,i},createAttribute:function(s){var t=new oa;return t.ownerDocument=this,t.name=s,t.nodeName=s,t.localName=s,t.specified=!0,t},createEntityReference:function(s){var t=new Vo;return t.ownerDocument=this,t.nodeName=s,t},createElementNS:function(s,t){var i=new wr,a=t.split(":"),o=i.attributes=new sa;return i.childNodes=new Pn,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=s,a.length==2?(i.prefix=a[0],i.localName=a[1]):i.localName=t,o._ownerElement=i},createAttributeNS:function(s,t){var i=new oa,a=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=s,i.specified=!0,a.length==2?(i.prefix=a[0],i.localName=a[1]):i.localName=t,i}},Qi(fs,ii),fs.prototype.getElementsByTagName=(wr.prototype={nodeType:1,hasAttribute:function(s){return this.getAttributeNode(s)!=null},getAttribute:function(s){return s=this.getAttributeNode(s),s&&s.value||""},getAttributeNode:function(s){return this.attributes.getNamedItem(s)},setAttribute:function(s,t){s=this.ownerDocument.createAttribute(s),s.value=s.nodeValue=""+t,this.setAttributeNode(s)},removeAttribute:function(s){s=this.getAttributeNode(s),s&&this.removeAttributeNode(s)},appendChild:function(s){return s.nodeType===11?this.insertBefore(s,null):(t=this,(s=s).parentNode&&s.parentNode.removeChild(s),s.parentNode=t,s.previousSibling=t.lastChild,s.nextSibling=null,s.previousSibling?s.previousSibling.nextSibling=s:t.firstChild=s,t.lastChild=s,Bo(t.ownerDocument,t,s),s);var t},setAttributeNode:function(s){return this.attributes.setNamedItem(s)},setAttributeNodeNS:function(s){return this.attributes.setNamedItemNS(s)},removeAttributeNode:function(s){return this.attributes.removeNamedItem(s.nodeName)},removeAttributeNS:function(s,t){s=this.getAttributeNodeNS(s,t),s&&this.removeAttributeNode(s)},hasAttributeNS:function(s,t){return this.getAttributeNodeNS(s,t)!=null},getAttributeNS:function(s,t){return s=this.getAttributeNodeNS(s,t),s&&s.value||""},setAttributeNS:function(s,t,i){s=this.ownerDocument.createAttributeNS(s,t),s.value=s.nodeValue=""+i,this.setAttributeNode(s)},getAttributeNodeNS:function(s,t){return this.attributes.getNamedItemNS(s,t)},getElementsByTagName:function(s){return new Sr(this,function(t){var i=[];return ps(t,function(a){a===t||a.nodeType!=1||s!=="*"&&a.tagName!=s||i.push(a)}),i})},getElementsByTagNameNS:function(s,t){return new Sr(this,function(i){var a=[];return ps(i,function(o){o===i||o.nodeType!==1||s!=="*"&&o.namespaceURI!==s||t!=="*"&&o.localName!=t||a.push(o)}),a})}}).getElementsByTagName,fs.prototype.getElementsByTagNameNS=wr.prototype.getElementsByTagNameNS,Qi(wr,ii),oa.prototype.nodeType=2,Qi(oa,ii),ms.prototype={data:"",substringData:function(s,t){return this.data.substring(s,s+t)},appendData:function(s){s=this.data+s,this.nodeValue=this.data=s,this.length=s.length},insertData:function(s,t){this.replaceData(s,0,t)},appendChild:function(s){throw new Error(Ri[Ji])},deleteData:function(s,t){this.replaceData(s,t,"")},replaceData:function(o,t,i){var a=this.data.substring(0,o),o=this.data.substring(o+t);this.nodeValue=this.data=i=a+i+o,this.length=i.length}},Qi(ms,ii),jo.prototype={nodeName:"#text",nodeType:3,splitText:function(a){var t=(i=this.data).substring(a),i=i.substring(0,a),a=(this.data=this.nodeValue=i,this.length=i.length,this.ownerDocument.createTextNode(t));return this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling),a}},Qi(jo,ms),Ho.prototype={nodeName:"#comment",nodeType:8},Qi(Ho,ms),qo.prototype={nodeName:"#cdata-section",nodeType:4},Qi(qo,ms),la.prototype.nodeType=10,Qi(la,ii),Cd.prototype.nodeType=12,Qi(Cd,ii),xd.prototype.nodeType=6,Qi(xd,ii),Vo.prototype.nodeType=5,Qi(Vo,ii),ua.prototype.nodeName="#document-fragment",ua.prototype.nodeType=11,Qi(ua,ii),Wo.prototype.nodeType=7,Qi(Wo,ii),kd.prototype.serializeToString=function(s,t,i){return Nd.call(s,t,i)},ii.prototype.toString=Nd;try{Object.defineProperty&&(Object.defineProperty(Sr.prototype,"length",{get:function(){return Fo(this),this.$$length}}),Object.defineProperty(ii.prototype,"textContent",{get:function(){return function s(t){switch(t.nodeType){case 1:case 11:var i=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&i.push(s(t)),t=t.nextSibling;return i.join("");default:return t.nodeValue}}(this)},set:function(s){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(s||String(s))&&this.appendChild(this.ownerDocument.createTextNode(s));break;default:this.data=s,this.value=s,this.nodeValue=s}}}),Id=function(s,t,i){s["$$"+t]=i})}catch{}var da={DocumentType:la,DOMException:Ei,DOMImplementation:vd,Element:wr,Node:ii,NodeList:Pn,XMLSerializer:kd},Go=Vs(function(s,t){var i=ds.freeze;t.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=i({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}),t.entityMap=t.HTML_ENTITIES}),gs=(Go.XML_ENTITIES,ds.NAMESPACE),Cr=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,xr=new RegExp("[\\-\\.0-9"+Cr.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Od=new RegExp("^"+Cr.source+xr.source+"*(?::"+Cr.source+xr.source+"*)?$"),ys=0,jn=1,kr=2,ca=3,Nr=4,vs=5,bs=6,ha=7;function _s(s,t){this.message=s,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,_s)}function Dd(){}function Pd(s,t){return t.lineNumber=s.lineNumber,t.columnNumber=s.columnNumber,t}function Rd(s,t,i){for(var a=s.tagName,o=null,l=s.length;l--;){var h=s[l],B=h.qName,T=h.value,B=0<(H=B.indexOf(":"))?(G=h.prefix=B.slice(0,H),se=B.slice(H+1),G==="xmlns"&&se):(G=null,(se=B)==="xmlns"&&"");h.localName=se,B!==!1&&(o==null&&(o={},Ld(i,i={})),i[B]=o[B]=T,h.uri=gs.XMLNS,t.startPrefixMapping(B,T))}for(var G,l=s.length;l--;)(G=(h=s[l]).prefix)&&(G==="xml"&&(h.uri=gs.XML),G!=="xmlns")&&(h.uri=i[G||""]);var H,se=0<(H=a.indexOf(":"))?(G=s.prefix=a.slice(0,H),s.localName=a.slice(H+1)):(G=null,s.localName=a),pe=s.uri=i[G||""];if(t.startElement(pe,se,a,s),!s.closed)return s.currentNSMap=i,s.localNSMap=o,1;if(t.endElement(pe,se,a),o)for(G in o)Object.prototype.hasOwnProperty.call(o,G)&&t.endPrefixMapping(G)}function Ld(s,t){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}function Md(){this.attributeNames={}}(_s.prototype=new Error).name=_s.name,Dd.prototype={parse:function(s,t,i){var a=this.domBuilder;a.startDocument(),Ld(t,t={}),function(o,l,h,T,B){function G(lt){var ht=lt.slice(1,-1);return Object.hasOwnProperty.call(h,ht)?h[ht]:ht.charAt(0)==="#"?65535<(ht=parseInt(ht.substr(1).replace("x","0x")))?(ht-=65536,String.fromCharCode(55296+(ht>>10),56320+(1023&ht))):String.fromCharCode(ht):(B.error("entity not found:"+lt),lt)}function H(lt){var ht;Pe<lt&&(ht=o.substring(Pe,lt).replace(/&#?\w+;/g,G),Ce&&se(Pe),T.characters(ht,0,lt-Pe),Pe=lt)}function se(lt,ht){for(;ae<=lt&&(ht=_e.exec(o));)pe=ht.index,ae=pe+ht[0].length,Ce.lineNumber++;Ce.columnNumber=lt-pe+1}for(var pe=0,ae=0,_e=/.*(?:\r\n?|\n)|.*$/g,Ce=T.locator,Le=[{currentNSMap:l}],xe={},Pe=0;;){try{var Ae,st,Ue=o.indexOf("<",Pe);if(Ue<0)return o.substr(Pe).match(/^\s*$/)||(Ae=T.doc,st=Ae.createTextNode(o.substr(Pe)),Ae.appendChild(st),T.currentElement=st);switch(Pe<Ue&&H(Ue),o.charAt(Ue+1)){case"/":var xt=o.indexOf(">",Ue+3),ft=o.substring(Ue+2,xt).replace(/[ \t\n\r]+$/g,""),Et=Le.pop(),dt=(xt<0?(ft=o.substring(Ue+2).replace(/[\s<].*/,""),B.error("end tag name: "+ft+" is not complete:"+Et.tagName),xt=Ue+1+ft.length):ft.match(/\s</)&&(ft=ft.replace(/[\s<].*/,""),B.error("end tag name: "+ft+" maybe not complete"),xt=Ue+1+ft.length),Et.localNSMap),Ot=Et.tagName==ft;if(Ot||Et.tagName&&Et.tagName.toLowerCase()==ft.toLowerCase()){if(T.endElement(Et.uri,Et.localName,ft),dt)for(var Ct in dt)Object.prototype.hasOwnProperty.call(dt,Ct)&&T.endPrefixMapping(Ct);Ot||B.fatalError("end tag name: "+ft+" is not match the current start tagName:"+Et.tagName)}else Le.push(Et);xt++;break;case"?":Ce&&se(Ue),xt=function(lt,ht,Ft){var Xt=lt.indexOf("?>",ht);return Xt&&(lt=lt.substring(ht,Xt).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/),lt)?(lt[0].length,Ft.processingInstruction(lt[1],lt[2]),Xt+2):-1}(o,Ue,T);break;case"!":Ce&&se(Ue),xt=function(lt,ht,Ft,Xt){{if(lt.charAt(ht+2)==="-")return lt.charAt(ht+3)==="-"?(Jt=lt.indexOf("-->",ht+4),ht<Jt?(Ft.comment(lt,ht+4,Jt-ht-4),Jt+3):(Xt.error("Unclosed comment"),-1)):-1;if(lt.substr(ht+3,6)=="CDATA[")return Jt=lt.indexOf("]]>",ht+9),Ft.startCDATA(),Ft.characters(lt,ht+9,Jt-ht-9),Ft.endCDATA(),Jt+3;var Ci,Xt=function(fi,Wt){var Gt,Mt=[],Ht=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Ht.lastIndex=Wt,Ht.exec(fi);Gt=Ht.exec(fi);)if(Mt.push(Gt),Gt[1])return Mt}(lt,ht),Jt=Xt.length;if(1<Jt&&/!doctype/i.test(Xt[0][0]))return lt=Xt[1][0],Ci=ht=!1,3<Jt&&(/^public$/i.test(Xt[2][0])?(ht=Xt[3][0],Ci=4<Jt&&Xt[4][0]):/^system$/i.test(Xt[2][0])&&(Ci=Xt[3][0])),Xt=Xt[Jt-1],Ft.startDTD(lt,ht,Ci),Ft.endDTD(),Xt.index+Xt[0].length}return-1}(o,Ue,T,B);break;default:Ce&&se(Ue);var Lt=new Md,jt=Le[Le.length-1].currentNSMap,xt=function(lt,ht,Ft,Xt,Ci,Jt){function ji(sn,an,Mn){Ft.attributeNames.hasOwnProperty(sn)&&Jt.fatalError("Attribute "+sn+" redefined"),Ft.addValue(sn,an.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,Ci),Mn)}for(var fi,Wt=++ht,Gt=ys;;){var Mt=lt.charAt(Wt);switch(Mt){case"=":if(Gt===jn)fi=lt.slice(ht,Wt);else if(Gt!==kr)throw new Error("attribute equal must after attrName");Gt=ca;break;case"'":case'"':if(Gt===ca||Gt===jn){if(Gt===jn&&(Jt.warning('attribute value must after "="'),fi=lt.slice(ht,Wt)),ht=Wt+1,!(0<(Wt=lt.indexOf(Mt,ht))))throw new Error("attribute value no end '"+Mt+"' match");Ht=lt.slice(ht,Wt),ji(fi,Ht,ht-1)}else{if(Gt!=Nr)throw new Error('attribute value must after "="');Ht=lt.slice(ht,Wt),ji(fi,Ht,ht),Jt.warning('attribute "'+fi+'" missed start quot('+Mt+")!!"),ht=Wt+1}Gt=vs;break;case"/":switch(Gt){case ys:Ft.setTagName(lt.slice(ht,Wt));case vs:case bs:case ha:Gt=ha,Ft.closed=!0;case Nr:case jn:break;case kr:Ft.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Jt.error("unexpected end of input"),Gt==ys&&Ft.setTagName(lt.slice(ht,Wt)),Wt;case">":switch(Gt){case ys:Ft.setTagName(lt.slice(ht,Wt));case vs:case bs:case ha:break;case Nr:case jn:(Ht=lt.slice(ht,Wt)).slice(-1)==="/"&&(Ft.closed=!0,Ht=Ht.slice(0,-1));case kr:Gt===kr&&(Ht=fi),Gt==Nr?(Jt.warning('attribute "'+Ht+'" missed quot(")!'),ji(fi,Ht,ht)):(gs.isHTML(Xt[""])&&Ht.match(/^(?:disabled|checked|selected)$/i)||Jt.warning('attribute "'+Ht+'" missed value!! "'+Ht+'" instead!!'),ji(Ht,Ht,ht));break;case ca:throw new Error("attribute value missed!!")}return Wt;case"\x80":Mt=" ";default:if(Mt<=" ")switch(Gt){case ys:Ft.setTagName(lt.slice(ht,Wt)),Gt=bs;break;case jn:fi=lt.slice(ht,Wt),Gt=kr;break;case Nr:var Ht=lt.slice(ht,Wt);Jt.warning('attribute "'+Ht+'" missed quot(")!!'),ji(fi,Ht,ht);case vs:Gt=bs}else switch(Gt){case kr:Ft.tagName,gs.isHTML(Xt[""])&&fi.match(/^(?:disabled|checked|selected)$/i)||Jt.warning('attribute "'+fi+'" missed value!! "'+fi+'" instead2!!'),ji(fi,fi,ht),ht=Wt,Gt=jn;break;case vs:Jt.warning('attribute space is required"'+fi+'"!!');case bs:Gt=jn,ht=Wt;break;case ca:Gt=Nr,ht=Wt;break;case ha:throw new Error("elements closed character '/' and '>' must be connected to")}}Wt++}}(o,Ue,Lt,jt,G,B),Zt=Lt.length;if(!Lt.closed&&function(lt,ht,Ft,Xt){var Ci=Xt[Ft];return Ci==null&&((Ci=lt.lastIndexOf("</"+Ft+">"))<ht&&(Ci=lt.lastIndexOf("</"+Ft)),Xt[Ft]=Ci),Ci<ht}(o,xt,Lt.tagName,xe)&&(Lt.closed=!0,h.nbsp||B.warning("unclosed xml attribute")),Ce&&Zt){for(var Ti=Pd(Ce,{}),mn=0;mn<Zt;mn++){var si=Lt[mn];se(si.offset),si.locator=Pd(Ce,{})}T.locator=Ti,Rd(Lt,T,jt)&&Le.push(Lt),T.locator=Ce}else Rd(Lt,T,jt)&&Le.push(Lt);gs.isHTML(Lt.uri)&&!Lt.closed?xt=function(lt,ht,Ft,Xt,Ci){if(/^(?:script|textarea)$/i.test(Ft)){var Jt=lt.indexOf("</"+Ft+">",ht),lt=lt.substring(ht+1,Jt);if(/[&<]/.test(lt))return/^script$/i.test(Ft)||(lt=lt.replace(/&#?\w+;/g,Xt)),Ci.characters(lt,0,lt.length),Jt}return ht+1}(o,xt,Lt.tagName,G,T):xt++}}catch(lt){if(lt instanceof _s)throw lt;B.error("element parse error: "+lt),xt=-1}Pe<xt?Pe=xt:H(Math.max(Ue,Pe)+1)}}(s,t,i,a,this.errorHandler),a.endDocument()}},Md.prototype={setTagName:function(s){if(!Od.test(s))throw new Error("invalid tagName:"+s);this.tagName=s},addValue:function(s,t,i){if(!Od.test(s))throw new Error("invalid attribute:"+s);this.attributeNames[s]=this.length,this[this.length++]={qName:s,value:t,offset:i}},length:0,getLocalName:function(s){return this[s].localName},getLocator:function(s){return this[s].locator},getQName:function(s){return this[s].qName},getURI:function(s){return this[s].uri},getValue:function(s){return this[s].value}};var Ar={XMLReader:Dd,ParseError:_s},xf=da.DOMImplementation,Ud=ds.NAMESPACE,kf=Ar.ParseError,Nf=Ar.XMLReader;function Fd(s){return s.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Bd(s){this.options=s||{locator:{}}}function Ts(){this.cdata=!1}function Ir(s,t){t.lineNumber=s.lineNumber,t.columnNumber=s.columnNumber}function Af(s){if(s)return`
@`+(s.systemId||"")+"#[line:"+s.lineNumber+",col:"+s.columnNumber+"]"}function zd(s,t,i){return typeof s=="string"?s.substr(t,i):s.length>=t+i||t?new java.lang.String(s,t,i)+"":s}function pa(s,t){(s.currentElement||s.doc).appendChild(t)}Bd.prototype.parseFromString=function(s,T){var i=this.options,a=new Nf,o=i.domBuilder||new Ts,G=i.errorHandler,l=i.locator,h=i.xmlns||{},T=/\/x?html?$/.test(T),B=T?Go.HTML_ENTITIES:Go.XML_ENTITIES,G=(l&&o.setDocumentLocator(l),a.errorHandler=function(H,se,pe){if(!H){if(se instanceof Ts)return se;H=se}var ae={},_e=H instanceof Function;function Ce(Le){var xe=H[Le];!xe&&_e&&(xe=H.length==2?function(Pe){H(Le,Pe)}:H),ae[Le]=xe?function(Pe){xe("[xmldom "+Le+"]	"+Pe+Af(pe))}:function(){}}return pe=pe||{},Ce("warning"),Ce("error"),Ce("fatalError"),ae}(G,o,l),a.domBuilder=i.domBuilder||o,T&&(h[""]=Ud.HTML),h.xml=h.xml||Ud.XML,i.normalizeLineEndings||Fd);return s&&typeof s=="string"?a.parse(G(s),h,B):a.errorHandler.error("invalid doc source"),o.doc},Ts.prototype={startDocument:function(){this.doc=new xf().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(s,t,i,a){var o=this.doc,l=o.createElementNS(s,i||t),h=a.length;pa(this,l),this.currentElement=l,this.locator&&Ir(this.locator,l);for(var T=0;T<h;T++){var s=a.getURI(T),B=a.getValue(T),i=a.getQName(T),G=o.createAttributeNS(s,i);this.locator&&Ir(a.getLocator(T),G),G.value=G.nodeValue=B,l.setAttributeNode(G)}},endElement:function(s,t,i){var a=this.currentElement;a.tagName,this.currentElement=a.parentNode},startPrefixMapping:function(s,t){},endPrefixMapping:function(s){},processingInstruction:function(s,t){s=this.doc.createProcessingInstruction(s,t),this.locator&&Ir(this.locator,s),pa(this,s)},ignorableWhitespace:function(s,t,i){},characters:function(s,t,i){var a;(s=zd.apply(this,arguments))&&(a=this.cdata?this.doc.createCDATASection(s):this.doc.createTextNode(s),this.currentElement?this.currentElement.appendChild(a):/^\s*$/.test(s)&&this.doc.appendChild(a),this.locator)&&Ir(this.locator,a)},skippedEntity:function(s){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(s){(this.locator=s)&&(s.lineNumber=0)},comment:function(s,t,i){s=zd.apply(this,arguments),s=this.doc.createComment(s),this.locator&&Ir(this.locator,s),pa(this,s)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(s,t,i){var a=this.doc.implementation;a&&a.createDocumentType&&(a=a.createDocumentType(s,t,i),this.locator&&Ir(this.locator,a),pa(this,a),this.doc.doctype=a)},warning:function(s){},error:function(s){},fatalError:function(s){throw new kf(s,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(s){Ts.prototype[s]=function(){return null}});var If=Bd;/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */let jd=s=>!!s&&typeof s=="object",Li=(...s)=>s.reduce((t,i)=>(typeof i=="object"&&Object.keys(i).forEach(a=>{Array.isArray(t[a])&&Array.isArray(i[a])?t[a]=t[a].concat(i[a]):jd(t[a])&&jd(i[a])?t[a]=Li(t[a],i[a]):t[a]=i[a]}),t),{}),Hd=s=>Object.keys(s).map(t=>s[t]),Of=(s,t)=>{var i=[];for(let a=s;a<t;a++)i.push(a);return i},Or=s=>s.reduce((t,i)=>t.concat(i),[]),qd=s=>{if(!s.length)return[];var t=[];for(let i=0;i<s.length;i++)t.push(s[i]);return t},Df=(s,t)=>s.reduce((i,a,o)=>(a[t]&&i.push(o),i),[]),Pf=(s,t)=>Hd(s.reduce((i,a)=>(a.forEach(o=>{i[t(o)]=o}),i),{}));var Dr={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};let Ss=({baseUrl:s="",source:t="",range:i="",indexRange:a=""})=>{if(s={uri:t,resolvedUri:ra(s||"",t)},i||a){t=(i||a).split("-");let o=window.BigInt?window.BigInt(t[0]):parseInt(t[0],10),l=window.BigInt?window.BigInt(t[1]):parseInt(t[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let h;typeof(h=typeof l=="bigint"||typeof o=="bigint"?window.BigInt(l)-window.BigInt(o)+window.BigInt(1):l-o+1)=="bigint"&&h<Number.MAX_SAFE_INTEGER&&(h=Number(h)),s.byterange={length:h,offset:o}}return s},Rf=s=>{let t;return t=typeof s.offset=="bigint"||typeof s.length=="bigint"?window.BigInt(s.offset)+window.BigInt(s.length)-window.BigInt(1):s.offset+s.length-1,s.offset+"-"+t},Vd=s=>(s&&typeof s!="number"&&(s=parseInt(s,10)),isNaN(s)?null:s),Lf={static(o){var{duration:l,timescale:t=1,sourceDuration:i,periodDuration:a}=o,o=Vd(o.endNumber),l=l/t;return typeof o=="number"?{start:0,end:o}:typeof a=="number"?{start:0,end:a/l}:{start:0,end:i/l}},dynamic(o){var{NOW:l,clientOffset:h,availabilityStartTime:T,timescale:t=1,duration:i,periodStart:B=0,minimumUpdatePeriod:G=0,timeShiftBufferDepth:a=1/0}=o,o=Vd(o.endNumber),l=(l+h)/1e3,h=T+B,T=Math.ceil((l+G-h)*t/i),B=Math.floor((l-h-a)*t/i),G=Math.floor((l-h)*t/i);return{start:Math.max(0,B),end:typeof o=="number"?o:Math.min(T,G)}}},Mf=s=>t=>{var{duration:i,timescale:a=1,periodStart:o,startNumber:l=1}=s;return{number:l+t,duration:i/a,timeline:o,time:t*i}},$o=s=>{var{type:t,duration:i,timescale:a=1,periodDuration:o,sourceDuration:l}=s,{start:T,end:h}=Lf[t](s),T=Of(T,h).map(Mf(s));return t==="static"&&(T[h=T.length-1].duration=(typeof o=="number"?o:l)-i/a*h),T},Wd=s=>{var{baseUrl:t,initialization:i={},sourceDuration:a,indexRange:o="",periodStart:l,presentationTime:h,number:T=0,duration:B}=s;if(t)return i=Ss({baseUrl:t,source:i.sourceURL,range:i.range}),(t=Ss({baseUrl:t,source:t,indexRange:o})).map=i,B?(o=$o(s)).length&&(t.duration=o[0].duration,t.timeline=o[0].timeline):a&&(t.duration=a,t.timeline=l),t.presentationTime=h||l,t.number=T,[t];throw new Error(Dr.NO_BASE_URL)},Ko=(s,t,i)=>{var a=s.sidx.map||null,o=s.sidx.duration,l=s.timeline||0,h=s.sidx.byterange,h=h.offset+h.length,T=t.timescale,B=t.references.filter(Pe=>Pe.referenceType!==1),G=[],H=s.endList?"static":"dynamic",se=s.sidx.timeline;let pe=se,ae=s.mediaSequence||0,_e;_e=typeof t.firstOffset=="bigint"?window.BigInt(h)+t.firstOffset:h+t.firstOffset;for(let Pe=0;Pe<B.length;Pe++){var Le=t.references[Pe],Ce=Le.referencedSize,Le=Le.subsegmentDuration;let Ae;Ae=typeof _e=="bigint"?_e+window.BigInt(Ce)-window.BigInt(1):_e+Ce-1;var xe=_e+"-"+Ae,xe={baseUrl:i,timescale:T,timeline:l,periodStart:se,presentationTime:pe,number:ae,duration:Le,sourceDuration:o,indexRange:xe,type:H},xe=Wd(xe)[0];a&&(xe.map=a),G.push(xe),typeof _e=="bigint"?_e+=window.BigInt(Ce):_e+=Ce,pe+=Le/T,ae++}return s.segments=G,s},Uf=["AUDIO","SUBTITLES"],Ff=1/60,Xd=s=>Pf(s,({timeline:t})=>t).sort((t,i)=>t.timeline>i.timeline?1:-1),Bf=(s,t)=>{for(let i=0;i<s.length;i++)if(s[i].attributes.NAME===t)return s[i];return null},Gd=s=>{let t=[];return Tf(s,Uf,(i,a,o,l)=>{t=t.concat(i.playlists||[])}),t},$d=({playlist:s,mediaSequence:t})=>{s.mediaSequence=t,s.segments.forEach((i,a)=>{i.number=s.mediaSequence+a})},zf=({oldPlaylists:s,newPlaylists:t,timelineStarts:i})=>{t.forEach(a=>{a.discontinuitySequence=i.findIndex(function({timeline:h}){return h===a.timeline});var o=Bf(s,a.attributes.NAME);if(o&&!a.sidx){let h=a.segments[0];var l=o.segments.findIndex(function(T){return Math.abs(T.presentationTime-h.presentationTime)<Ff});l===-1?($d({playlist:a,mediaSequence:o.mediaSequence+o.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),(!o.segments.length&&a.timeline>o.timeline||o.segments.length&&a.timeline>o.segments[o.segments.length-1].timeline)&&a.discontinuitySequence--):(o.segments[l].discontinuity&&!h.discontinuity&&(h.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),$d({playlist:a,mediaSequence:o.segments[l].number}))}})},jf=({oldManifest:s,newManifest:t})=>{var i=s.playlists.concat(Gd(s)),a=t.playlists.concat(Gd(t));return t.timelineStarts=Xd([s.timelineStarts,t.timelineStarts]),zf({oldPlaylists:i,newPlaylists:a,timelineStarts:t.timelineStarts}),t},fa=s=>s&&s.uri+"-"+Rf(s.byterange),Yo=s=>{s=s.reduce(function(i,a){return i[a.attributes.baseUrl]||(i[a.attributes.baseUrl]=[]),i[a.attributes.baseUrl].push(a),i},{});let t=[];return Object.values(s).forEach(i=>{i=Hd(i.reduce((a,o)=>{var l=o.attributes.id+(o.attributes.lang||"");return a[l]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),a[l].segments.push(...o.segments)),o.attributes.contentProtection&&(a[l].attributes.contentProtection=o.attributes.contentProtection)):(a[l]=o,a[l].attributes.timelineStarts=[]),a[l].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),a},{})),t=t.concat(i)}),t.map(i=>(i.discontinuityStarts=Df(i.segments||[],"discontinuity"),i))},Zo=(s,a)=>{var i=fa(s.sidx),a=i&&a[i]&&a[i].sidx;return a&&Ko(s,a,s.sidx.resolvedUri),s},Hf=(s,t={})=>{if(Object.keys(t).length)for(var i in s)s[i]=Zo(s[i],t);return s},qf=({attributes:s,segments:t,sidx:i,mediaSequence:a,discontinuitySequence:o,discontinuityStarts:l},h)=>(o={attributes:{NAME:s.id,BANDWIDTH:s.bandwidth,CODECS:s.codecs,"PROGRAM-ID":1},uri:"",endList:s.type==="static",timeline:s.periodStart,resolvedUri:s.baseUrl||"",targetDuration:s.duration,discontinuitySequence:o,discontinuityStarts:l,timelineStarts:s.timelineStarts,mediaSequence:a,segments:t},s.contentProtection&&(o.contentProtection=s.contentProtection),s.serviceLocation&&(o.attributes.serviceLocation=s.serviceLocation),i&&(o.sidx=i),h&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o),Vf=({attributes:s,segments:t,mediaSequence:i,discontinuityStarts:a,discontinuitySequence:o})=>{typeof t>"u"&&(t=[{uri:s.baseUrl,timeline:s.periodStart,resolvedUri:s.baseUrl||"",duration:s.sourceDuration,number:0}],s.duration=s.sourceDuration);var l={NAME:s.id,BANDWIDTH:s.bandwidth,"PROGRAM-ID":1},l=(s.codecs&&(l.CODECS=s.codecs),{attributes:l,uri:"",endList:s.type==="static",timeline:s.periodStart,resolvedUri:s.baseUrl||"",targetDuration:s.duration,timelineStarts:s.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:i,segments:t});return s.serviceLocation&&(l.attributes.serviceLocation=s.serviceLocation),l},Wf=(s,t={},i=!1)=>{let a;return s=s.reduce((o,l)=>{var h=l.attributes.role&&l.attributes.role.value||"",T=l.attributes.lang||"";let B=l.attributes.label||"main";return o[B=T&&!l.attributes.label?l.attributes.lang+(h?` (${h})`:""):B]||(o[B]={language:T,autoselect:!0,default:h==="main",playlists:[],uri:""}),T=Zo(qf(l,i),t),o[B].playlists.push(T),typeof a>"u"&&h==="main"&&((a=l).default=!0),o},{}),a||(s[Object.keys(s)[0]].default=!0),s},Xf=(s,t={})=>s.reduce((i,a)=>{var o=a.attributes.label||a.attributes.lang||"text",l=a.attributes.lang||"und";return i[o]||(i[o]={language:l,default:!1,autoselect:!1,playlists:[],uri:""}),i[o].playlists.push(Zo(Vf(a),t)),i},{}),Gf=s=>s.reduce((t,i)=>(i&&i.forEach(a=>{var{channel:o,language:l}=a;t[l]={autoselect:!1,default:!1,instreamId:o,language:l},a.hasOwnProperty("aspectRatio")&&(t[l].aspectRatio=a.aspectRatio),a.hasOwnProperty("easyReader")&&(t[l].easyReader=a.easyReader),a.hasOwnProperty("3D")&&(t[l]["3D"]=a["3D"])}),t),{}),$f=({attributes:s,segments:t,sidx:i,discontinuityStarts:a})=>(a={attributes:{NAME:s.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:s.width,height:s.height},CODECS:s.codecs,BANDWIDTH:s.bandwidth,"PROGRAM-ID":1},uri:"",endList:s.type==="static",timeline:s.periodStart,resolvedUri:s.baseUrl||"",targetDuration:s.duration,discontinuityStarts:a,timelineStarts:s.timelineStarts,segments:t},s.frameRate&&(a.attributes["FRAME-RATE"]=s.frameRate),s.contentProtection&&(a.contentProtection=s.contentProtection),s.serviceLocation&&(a.attributes.serviceLocation=s.serviceLocation),i&&(a.sidx=i),a),Kf=({attributes:s})=>s.mimeType==="video/mp4"||s.mimeType==="video/webm"||s.contentType==="video",Yf=({attributes:s})=>s.mimeType==="audio/mp4"||s.mimeType==="audio/webm"||s.contentType==="audio",Zf=({attributes:s})=>s.mimeType==="text/vtt"||s.contentType==="text",Qf=(s,t)=>{s.forEach(i=>{i.mediaSequence=0,i.discontinuitySequence=t.findIndex(function({timeline:a}){return a===i.timeline}),i.segments&&i.segments.forEach((a,o)=>{a.number=o})})},Kd=s=>s?Object.keys(s).reduce((t,i)=>(i=s[i],t.concat(i.playlists)),[]):[],Jf=({dashPlaylists:s,locations:t,contentSteering:i,sidxMapping:a={},previousManifest:o,eventStream:l})=>{var h,T,B,G,H,se,pe;return s.length?({sourceDuration:G,type:se,suggestedPresentationDelay:pe,minimumUpdatePeriod:H}=s[0].attributes,h=Yo(s.filter(Kf)).map($f),T=Yo(s.filter(Yf)),B=Yo(s.filter(Zf)),s=s.map(ae=>ae.attributes.captionServices).filter(Boolean),G={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:G,playlists:Hf(h,a)},0<=H&&(G.minimumUpdatePeriod=1e3*H),t&&(G.locations=t),i&&(G.contentSteering=i),se==="dynamic"&&(G.suggestedPresentationDelay=pe),l&&0<l.length&&(G.eventStream=l),H=G.playlists.length===0,t=T.length?Wf(T,a,H):null,i=B.length?Xf(B,a):null,pe=(se=h.concat(Kd(t),Kd(i))).map(({timelineStarts:ae})=>ae),G.timelineStarts=Xd(pe),Qf(se,G.timelineStarts),t&&(G.mediaGroups.AUDIO.audio=t),i&&(G.mediaGroups.SUBTITLES.subs=i),s.length&&(G.mediaGroups["CLOSED-CAPTIONS"].cc=Gf(s)),o?jf({oldManifest:o,newManifest:G}):G):{}},em=(a,t,i)=>{var{NOW:a,clientOffset:o,availabilityStartTime:l,timescale:h=1,periodStart:T=0,minimumUpdatePeriod:B=0}=a;return Math.ceil((((a+o)/1e3+B-(l+T))*h-t)/i)},Yd=(s,t)=>{var{type:i,minimumUpdatePeriod:a=0,media:o="",sourceDuration:l,timescale:h=1,startNumber:T=1,periodStart:B}=s,G=[];let H=-1;for(let Ce=0;Ce<t.length;Ce++){var ae=t[Ce],se=ae.d,pe=ae.r||0,ae=ae.t||0;H<0&&(H=ae),ae&&ae>H&&(H=ae);let Le;Le=pe<0?(ae=Ce+1)===t.length?i==="dynamic"&&0<a&&0<o.indexOf("$Number$")?em(s,H,se):(l*h-H)/se:(t[ae].t-H)/se:pe+1;var _e=T+G.length+Le;let xe=T+G.length;for(;xe<_e;)G.push({number:xe,duration:se/h,time:H,timeline:B}),H+=se,xe++}return G},tm=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,im=s=>(t,i,a,o)=>t==="$$"?"$":typeof s[i]>"u"?t:(t=""+s[i],i==="RepresentationID"||(o=a?parseInt(o,10):1)<=t.length?t:new Array(o-t.length+1).join("0")+t),Zd=(s,t)=>s.replace(tm,im(t)),nm=(s,t)=>s.duration||t?s.duration?$o(s):Yd(s,t):[{number:s.startNumber||1,duration:s.sourceDuration,time:0,timeline:s.periodStart}],rm=(s,t)=>{let i={RepresentationID:s.id,Bandwidth:s.bandwidth||0};var{initialization:a={sourceURL:"",range:""}}=s;let o=Ss({baseUrl:s.baseUrl,source:Zd(a.sourceURL,i),range:a.range});return nm(s,t).map(l=>{i.Number=l.number,i.Time=l.time;var h=Zd(s.media||"",i),T=s.timescale||1,T=s.periodStart+(l.time-(s.presentationTimeOffset||0))/T;return{uri:h,timeline:l.timeline,duration:l.duration,resolvedUri:ra(s.baseUrl||"",h),map:o,number:l.number,presentationTime:T}})},sm=(a,t)=>{var{baseUrl:a,initialization:i={}}=a,i=Ss({baseUrl:a,source:i.sourceURL,range:i.range}),a=Ss({baseUrl:a,source:t.media,range:t.mediaRange});return a.map=i,a},am=(s,t)=>{let{duration:i,segmentUrls:a=[],periodStart:o}=s;if(!i&&!t||i&&t)throw new Error(Dr.SEGMENT_TIME_UNSPECIFIED);let l=a.map(T=>sm(s,T)),h;return i&&(h=$o(s)),(h=t?Yd(s,t):h).map((T,B)=>{var G,H;if(l[B])return B=l[B],G=s.timescale||1,H=s.presentationTimeOffset||0,B.timeline=T.timeline,B.duration=T.duration,B.number=T.number,B.presentationTime=o+(T.time-H)/G,B}).filter(T=>T)},om=({attributes:T,segmentInfo:t})=>{let i,a;t.template?(a=rm,i=Li(T,t.template)):t.base?(a=Wd,i=Li(T,t.base)):t.list&&(a=am,i=Li(T,t.list));var o,l,h,T={attributes:T};return a&&(o=a(i,t.segmentTimeline),i.duration?({duration:l,timescale:h=1}=i,i.duration=l/h):o.length?i.duration=o.reduce((B,G)=>Math.max(B,Math.ceil(G.duration)),0):i.duration=0,T.attributes=i,T.segments=o,t.base)&&i.indexRange&&(T.sidx=o[0],T.segments=[]),T},lm=s=>s.map(om),pi=(s,t)=>qd(s.childNodes).filter(({tagName:i})=>i===t),ws=s=>s.textContent.trim(),Pr=h=>{var t,i,a,o,l,h=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(h);return h?([h,t,i,a,o,l]=h.slice(1),31536e3*parseFloat(h||0)+2592e3*parseFloat(t||0)+86400*parseFloat(i||0)+3600*parseFloat(a||0)+60*parseFloat(o||0)+parseFloat(l||0)):0},Qd={mediaPresentationDuration(s){return Pr(s)},availabilityStartTime(s){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(s=s)&&(s+="Z"),Date.parse(s)/1e3},minimumUpdatePeriod(s){return Pr(s)},suggestedPresentationDelay(s){return Pr(s)},type(s){return s},timeShiftBufferDepth(s){return Pr(s)},start(s){return Pr(s)},width(s){return parseInt(s,10)},height(s){return parseInt(s,10)},bandwidth(s){return parseInt(s,10)},frameRate(s){return parseFloat(s.split("/").reduce((t,i)=>t/i))},startNumber(s){return parseInt(s,10)},timescale(s){return parseInt(s,10)},presentationTimeOffset(s){return parseInt(s,10)},duration(s){var t=parseInt(s,10);return isNaN(t)?Pr(s):t},d(s){return parseInt(s,10)},t(s){return parseInt(s,10)},r(s){return parseInt(s,10)},presentationTime(s){return parseInt(s,10)},DEFAULT(s){return s}},Ni=s=>s&&s.attributes?qd(s.attributes).reduce((t,i)=>{var a=Qd[i.name]||Qd.DEFAULT;return t[i.name]=a(i.value),t},{}):{},um={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},ma=(s,t)=>t.length?Or(s.map(function(i){return t.map(function(h){var o=ws(h),l=ra(i.baseUrl,o),h=Li(Ni(h),{baseUrl:l});return l!==o&&!h.serviceLocation&&i.serviceLocation&&(h.serviceLocation=i.serviceLocation),h})})):s,Qo=a=>{var h=pi(a,"SegmentTemplate")[0],t=pi(a,"SegmentList")[0],i=t&&pi(t,"SegmentURL").map(B=>Li({tag:"SegmentURL"},Ni(B))),a=pi(a,"SegmentBase")[0],o=t||h,o=o&&pi(o,"SegmentTimeline")[0],l=t||a||h,l=l&&pi(l,"Initialization")[0],h=h&&Ni(h);h&&l?h.initialization=l&&Ni(l):h&&h.initialization&&(h.initialization={sourceURL:h.initialization});let T={template:h,segmentTimeline:o&&pi(o,"S").map(B=>Ni(B)),list:t&&Li(Ni(t),{segmentUrls:i,initialization:Ni(l)}),base:a&&Li(Ni(a),{initialization:Ni(l)})};return Object.keys(T).forEach(B=>{T[B]||delete T[B]}),T},dm=(s,t,i)=>a=>{var o=pi(a,"BaseURL"),o=ma(t,o);let l=Li(s,Ni(a)),h=Qo(a);return o.map(T=>({segmentInfo:Li(i,h),attributes:Li(l,T)}))},cm=s=>s.reduce((t,i)=>{var a=Ni(i),o=(a.schemeIdUri&&(a.schemeIdUri=a.schemeIdUri.toLowerCase()),um[a.schemeIdUri]);return o&&(t[o]={attributes:a},a=pi(i,"cenc:pssh")[0])&&(i=ws(a),t[o].pssh=i&&id(i)),t},{}),hm=s=>s.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"?(typeof s.value!="string"?[]:s.value.split(";")).map(t=>{let i,a;return a=t,/^CC\d=/.test(t)?[i,a]=t.split("="):/^CC\d$/.test(t)&&(i=t),{channel:i,language:a}}):s.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"?(typeof s.value!="string"?[]:s.value.split(";")).map(t=>{let i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};var a,o;return/=/.test(t)?([a,o=""]=t.split("="),i.channel=a,i.language=t,o.split(",").forEach(h=>{var[h,T]=h.split(":");h==="lang"?i.language=T:h==="er"?i.easyReader=Number(T):h==="war"?i.aspectRatio=Number(T):h==="3D"&&(i["3D"]=Number(T))})):i.language=t,i.channel&&(i.channel="SERVICE"+i.channel),i}):void 0,pm=s=>Or(pi(s.node,"EventStream").map(t=>{let i=Ni(t),a=i.schemeIdUri;return pi(t,"Event").map(o=>{var l=Ni(o),B=l.presentationTime||0,h=i.timescale||1,T=l.duration||0,B=B/h+s.attributes.start;return{schemeIdUri:a,value:i.value,id:l.id,start:B,end:B+T/h,messageData:ws(o)||l.messageData,contentEncoding:i.contentEncoding,presentationTimeOffset:i.presentationTimeOffset||0}})})),fm=(s,t,i)=>a=>{var o=Ni(a),l=ma(t,pi(a,"BaseURL")),h=pi(a,"Role")[0],h={role:Ni(h)};let T=Li(s,o,h);return o=pi(a,"Accessibility")[0],h=hm(Ni(o)),h&&(T=Li(T,{captionServices:h})),o=pi(a,"Label")[0],o&&o.childNodes.length&&(h=o.childNodes[0].nodeValue.trim(),T=Li(T,{label:h})),o=cm(pi(a,"ContentProtection")),Object.keys(o).length&&(T=Li(T,{contentProtection:o})),h=Qo(a),o=pi(a,"Representation"),a=Li(i,h),Or(o.map(dm(T,l,a)))},mm=(s,t)=>(T,a)=>{var o=ma(t,pi(T.node,"BaseURL")),l=Li(s,{periodStart:T.attributes.start}),h=(typeof T.attributes.duration=="number"&&(l.periodDuration=T.attributes.duration),pi(T.node,"AdaptationSet")),T=Qo(T.node);return Or(h.map(fm(l,o,T)))},gm=(s,t)=>(1<s.length&&t({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),s.length?((t=Li({serverURL:ws(s[0])},Ni(s[0]))).queryBeforeStart=t.queryBeforeStart==="true",t):null),ym=({attributes:s,priorPeriodAttributes:t,mpdType:i})=>typeof s.start=="number"?s.start:t&&typeof t.start=="number"&&typeof t.duration=="number"?t.start+t.duration:t||i!=="static"?null:0,vm=(s,i={})=>{var{manifestUri:i="",NOW:a=Date.now(),clientOffset:o=0,eventHandler:l=function(){}}=i,h=pi(s,"Period");if(!h.length)throw new Error(Dr.INVALID_NUMBER_OF_PERIOD);var T=pi(s,"Location");let B=Ni(s);i=ma([{baseUrl:i}],pi(s,"BaseURL")),s=pi(s,"ContentSteering"),B.type=B.type||"static",B.sourceDuration=B.mediaPresentationDuration||0,B.NOW=a,B.clientOffset=o,T.length&&(B.locations=T.map(ws));let G=[];return h.forEach((H,ae)=>{var pe=Ni(H),ae=G[ae-1];pe.start=ym({attributes:pe,priorPeriodAttributes:ae?ae.attributes:null,mpdType:B.type}),G.push({node:H,attributes:pe})}),{locations:B.locations,contentSteeringInfo:gm(s,l),representationInfo:Or(G.map(mm(B,i))),eventStream:Or(G.map(pm))}},Jd=s=>{if(s==="")throw new Error(Dr.DASH_EMPTY_MANIFEST);var t,i=new If;let a;try{t=i.parseFromString(s,"application/xml"),a=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!a||a&&0<a.getElementsByTagName("parsererror").length)throw new Error(Dr.DASH_INVALID_XML);return a},bm=s=>(t=>{if(t=pi(t,"UTCTiming")[0],!t)return null;var i=Ni(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;default:throw new Error(Dr.UNSUPPORTED_UTC_TIMING_SCHEME)}return i})(Jd(s));function Rr(s,t){var i,a,o;return t===void 0&&(t=0),(s=wt(s)).length-t<10||!hi(s,Sm,{offset:t})?t:(t+=((a=t)===void 0&&(a=0),o=(i=wt(i=s))[a+5],i=i[a+6]<<21|i[a+7]<<14|i[a+8]<<7|i[a+9],(16&o)>>4?20+i:10+i),Rr(s,t))}function ec(s,t,i){var a;return i>=t.length?t.length:(a=ya(t,i,!1),hi(s.bytes,a.bytes)?i:ec(s,t,i+(s=ya(t,i+a.length)).length+s.value+a.length))}function Jo(s,t){i=t,t=Array.isArray(i)?i.map(function(G){return rc(G)}):[rc(i)],s=wt(s);var i,a=[];if(t.length)for(var o=0;o<s.length;){var l=ya(s,o,!1),h=ya(s,o+l.length),B=o+l.length+h.length,T=(h.value===127&&(h.value=ec(l,s,B),h.value!==s.length)&&(h.value-=B),B+h.value>s.length?s.length:B+h.value),B=s.subarray(B,T);hi(t[0],l.bytes)&&(t.length===1?a.push(B):a=a.concat(Jo(B,t.slice(1)))),o+=l.length+h.length+B.length}return a}function tc(s,t,i,a){a===void 0&&(a=1/0),s=wt(s),i=[].concat(i);for(var o,l=0,h=0;l<s.length&&(h<a||o);){var T=void 0;if(hi(s.subarray(l),xm)?T=4:hi(s.subarray(l),km)&&(T=3),T){if(h++,o)return Am(s.subarray(o,l));var B=void 0;t==="h264"?B=31&s[l+T]:t==="h265"&&(B=s[l+T]>>1&63),i.indexOf(B)!==-1&&(o=l+T),l+=T+(t==="h264"?1:2)}else l++}return s.subarray(0,0)}var _m=Math.pow(2,32),ic=function(i){var t,i=new DataView(i.buffer,i.byteOffset,i.byteLength);return i.getBigUint64?(t=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:i.getUint32(0)*_m+i.getUint32(4)},Tm=function(s){var t=new DataView(s.buffer,s.byteOffset,s.byteLength),i={version:s[0],flags:new Uint8Array(s.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},a=12,o=(i.version===0?(i.earliestPresentationTime=t.getUint32(a),i.firstOffset=t.getUint32(a+4),a+=8):(i.earliestPresentationTime=ic(s.subarray(a)),i.firstOffset=ic(s.subarray(a+8)),a+=16),t.getUint16(a+=2));for(a+=2;0<o;a+=12,o--)i.references.push({referenceType:(128&s[a])>>>7,referencedSize:2147483647&t.getUint32(a),subsegmentDuration:t.getUint32(a+4),startsWithSap:!!(128&s[a+8]),sapType:(112&s[a+8])>>>4,sapDeltaTime:268435455&t.getUint32(a+8)});return i},Sm=wt([73,68,51]),nc=function(s){return typeof s=="string"?dd(s):s},wm=function(s){return Array.isArray(s)?s.map(function(t){return nc(t)}):[nc(s)]},Em=function s(t,i,a){a===void 0&&(a=!1),i=wm(i),t=wt(t);var o=[];if(i.length)for(var l=0;l<t.length;){var h=(t[l]<<24|t[l+1]<<16|t[l+2]<<8|t[l+3])>>>0,T=t.subarray(l+4,l+8);if(h==0)break;if(h=l+h,h>t.length){if(a)break;h=t.length}var B=t.subarray(l+8,h);hi(T,i[0])&&(i.length===1?o.push(B):o.push.apply(o,s(B,i.slice(1),a))),l=h}return o},ga={EBML:wt([26,69,223,163]),DocType:wt([66,130]),Segment:wt([24,83,128,103]),SegmentInfo:wt([21,73,169,102]),Tracks:wt([22,84,174,107]),Track:wt([174]),TrackNumber:wt([215]),DefaultDuration:wt([35,227,131]),TrackEntry:wt([174]),TrackType:wt([131]),FlagDefault:wt([136]),CodecID:wt([134]),CodecPrivate:wt([99,162]),VideoTrack:wt([224]),AudioTrack:wt([225]),Cluster:wt([31,67,182,117]),Timestamp:wt([231]),TimestampScale:wt([42,215,177]),BlockGroup:wt([160]),BlockDuration:wt([155]),Block:wt([161]),SimpleBlock:wt([163])},el=[128,64,32,16,8,4,2,1],Cm=function(s){for(var t=1,i=0;i<el.length&&!(s&el[i]);i++)t++;return t},ya=function(s,t,i,a){i===void 0&&(i=!0),a===void 0&&(a=!1);var o=Cm(s[t]),l=s.subarray(t,t+o);return i&&((l=Array.prototype.slice.call(s,t,t+o))[0]^=el[o-1]),{length:o,value:bf(l,{signed:a}),bytes:l}},rc=function s(t){return typeof t=="string"?t.match(/.{1,2}/g).map(s):typeof t=="number"?_f(t):t},xm=wt([0,0,0,1]),km=wt([0,0,1]),Nm=wt([0,0,3]),Am=function(s){for(var t=[],i=1;i<s.length-2;)hi(s.subarray(i,i+3),Nm)&&(t.push(i+2),i++),i++;if(t.length===0)return s;for(var a=s.length-t.length,o=new Uint8Array(a),l=0,i=0;i<a;l++,i++)l===t[0]&&(l++,t.shift()),o[i]=s[l];return o},$i={webm:wt([119,101,98,109]),matroska:wt([109,97,116,114,111,115,107,97]),flac:wt([102,76,97,67]),ogg:wt([79,103,103,83]),ac3:wt([11,119]),riff:wt([82,73,70,70]),avi:wt([65,86,73]),wav:wt([87,65,86,69]),"3gp":wt([102,116,121,112,51,103]),mp4:wt([102,116,121,112]),fmp4:wt([115,116,121,112]),mov:wt([102,116,121,112,113,116]),moov:wt([109,111,111,118]),moof:wt([109,111,111,102])},Lr={aac:function(s){var t=Rr(s);return hi(s,[255,16],{offset:t,mask:[255,22]})},mp3:function(s){var t=Rr(s);return hi(s,[255,2],{offset:t,mask:[255,6]})},webm:function(s){return s=Jo(s,[ga.EBML,ga.DocType])[0],hi(s,$i.webm)},mkv:function(s){return s=Jo(s,[ga.EBML,ga.DocType])[0],hi(s,$i.matroska)},mp4:function(s){return!Lr["3gp"](s)&&!Lr.mov(s)&&(!!(hi(s,$i.mp4,{offset:4})||hi(s,$i.fmp4,{offset:4})||hi(s,$i.moof,{offset:4})||hi(s,$i.moov,{offset:4}))||void 0)},mov:function(s){return hi(s,$i.mov,{offset:4})},"3gp":function(s){return hi(s,$i["3gp"],{offset:4})},ac3:function(s){var t=Rr(s);return hi(s,$i.ac3,{offset:t})},ts:function(s){if(s.length<189&&1<=s.length)return s[0]===71;for(var t=0;t+188<s.length&&t<188;){if(s[t]===71&&s[t+188]===71)return!0;t+=1}return!1},flac:function(s){var t=Rr(s);return hi(s,$i.flac,{offset:t})},ogg:function(s){return hi(s,$i.ogg)},avi:function(s){return hi(s,$i.riff)&&hi(s,$i.avi,{offset:8})},wav:function(s){return hi(s,$i.riff)&&hi(s,$i.wav,{offset:8})},h264:function(s){return tc(s,"h264",7,3).length},h265:function(s){return tc(s,"h265",[32,33],3).length}},tl=Object.keys(Lr).filter(function(s){return s!=="ts"&&s!=="h264"&&s!=="h265"}).concat(["ts","h264","h265"]),Im=(tl.forEach(function(s){var t=Lr[s];Lr[s]=function(i){return t(wt(i))}}),Lr),il=function(s){s=wt(s);for(var t=0;t<tl.length;t++){var i=tl[t];if(Im[i](s))return i}return""},Om=function(s){return 0<Em(s,["moof"]).length},sr=9e4;/*! @name @videojs/http-streaming @version 3.16.2 @license Apache-2.0 */let en=ra,va=(s,t)=>t&&t.responseURL&&s!==t.responseURL?t.responseURL:s,un=s=>He.log.debug?He.log.debug.bind(He,"VHS:",s+" >"):function(){};function Qt(...s){var t=He.obj||He;return(t.merge||t.mergeOptions).apply(t,s)}function zi(...s){var t=He.time||He;return(t.createTimeRanges||t.createTimeRanges).apply(t,s)}function Mr(s,t){return ac(s,function(i,a){return i-Cn<=t&&a+Cn>=t})}function ba(s,t){return ac(s,function(i){return i-En>=t})}function nl(s){if(s&&s.length&&s.end)return s.end(s.length-1)}function rl(s,t){let i=0;if(s&&s.length)for(let l=0;l<s.length;l++){var a=s.start(l),o=s.end(l);o<t||(i+=a<t&&t<=o?o-t:o-a)}return i}function Es({defaultDuration:s,durationList:t,startIndex:i,endIndex:a}){let o=0;if(a<i&&([i,a]=[a,i]),i<0){for(let l=i;l<Math.min(0,a);l++)o+=s;i=0}for(let l=i;l<a;l++)o+=t[l].duration;return o}function sc(s,t,i,a){if(!s||!s.segments)return null;if(s.endList)return hc(s);if(t===null)return null;t=t||0;let o=cc(s,s.mediaSequence+s.segments.length,t);return i&&(a=typeof a=="number"?a:dc(null,s),o-=a),Math.max(0,o)}let En=1/30,Cn=3*En,ac=function(s,t){var i=[];let a;if(s&&s.length)for(a=0;a<s.length;a++)t(s.start(a),s.end(a))&&i.push([s.start(a),s.end(a)]);return zi(i)},oc=s=>{var t=[];if(!s||!s.length)return"";for(let i=0;i<s.length;i++)t.push(s.start(i)+" => "+s.end(i));return t.join(", ")},ar=s=>{var t=[];for(let i=0;i<s.length;i++)t.push({start:s.start(i),end:s.end(i)});return t},sl=(s,t)=>{if(!t.preload)return t.duration;let i=0;return(t.parts||[]).forEach(function(a){i+=a.duration}),(t.preloadHints||[]).forEach(function(a){a.type==="PART"&&(i+=s.partTargetDuration)}),i},al=s=>(s.segments||[]).reduce((t,i,a)=>(i.parts?i.parts.forEach(function(o,l){t.push({duration:o.duration,segmentIndex:a,partIndex:l,part:o,segment:i})}):t.push({duration:i.duration,segmentIndex:a,partIndex:null,segment:i,part:null}),t),[]),lc=s=>(s=s.segments&&s.segments.length&&s.segments[s.segments.length-1],s&&s.parts||[]),uc=({preloadSegment:s})=>{var t;if(s)return{parts:s,preloadHints:t}=s,(t||[]).reduce((i,a)=>i+(a.type==="PART"?1:0),0)+(s&&s.length?s.length:0)},dc=(s,t)=>t.endList?0:s&&s.suggestedPresentationDelay?s.suggestedPresentationDelay:(s=0<lc(t).length)&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:s&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0,Dm=function(s,t){let i=0,a=t-s.mediaSequence,o=s.segments[a];if(o){if(typeof o.start<"u")return{result:o.start,precise:!0};if(typeof o.end<"u")return{result:o.end-o.duration,precise:!0}}for(;a--;){if(typeof(o=s.segments[a]).end<"u")return{result:i+o.end,precise:!0};if(i+=sl(s,o),typeof o.start<"u")return{result:i+o.start,precise:!0}}return{result:i,precise:!1}},Pm=function(s,t){let i=0;var a;let o=t-s.mediaSequence;for(;o<s.segments.length;o++){if(typeof(a=s.segments[o]).start<"u")return{result:a.start-i,precise:!0};if(i+=sl(s,a),typeof a.end<"u")return{result:a.end-i,precise:!0}}return{result:-1,precise:!1}},cc=function(s,t,i){var a;return(t=typeof t>"u"?s.mediaSequence+s.segments.length:t)<s.mediaSequence?0:(a=Dm(s,t)).precise?a.result:(s=Pm(s,t)).precise?s.result:a.result+i},hc=function(s,t,i){if(!s)return 0;if(typeof i!="number"&&(i=0),typeof t>"u"){if(s.totalDuration)return s.totalDuration;if(!s.endList)return window.Infinity}return cc(s,t,i)};function pc(s){return s.excludeUntil&&s.excludeUntil>Date.now()}function ol(s){return s.excludeUntil&&s.excludeUntil===1/0}function _a(s){var t=pc(s);return!s.disabled&&!t}function fc(s,t){return t.attributes&&t.attributes[s]}function mc(s,t){var i,a=s&&s.mediaGroups&&s.mediaGroups.AUDIO||{};let o=!1;for(i in a){for(var l in a[i])if(o=t(a[i][l]))break;if(o)break}return!!o}let ll=(s,t)=>{if(s.playlists.length===1)return!0;let i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return s.playlists.filter(a=>!!_a(a)&&(a.attributes.BANDWIDTH||0)<i).length===0},ul=(s,t)=>!(!s&&!t||!s&&t||s&&!t||s!==t&&(!s.id||!t.id||s.id!==t.id)&&(!s.resolvedUri||!t.resolvedUri||s.resolvedUri!==t.resolvedUri)&&(!s.uri||!t.uri||s.uri!==t.uri)),Cs=s=>{if(!s||!s.playlists||!s.playlists.length)return mc(s,i=>i.playlists&&i.playlists.length||i.uri);for(let i=0;i<s.playlists.length;i++){let a=s.playlists[i];var t=a.attributes&&a.attributes.CODECS;if((!t||!t.split(",").every(o=>rd(o)))&&(t=mc(s,o=>ul(a,o)),!t))return!1}return!0};var tn={liveEdgeDelay:dc,duration:hc,seekable:function(s,t,i){var a=t||0;let o=sc(s,t,!0,i);return o===null?zi():zi(a,o=o<a?a:o)},getMediaInfoForTime:function({playlist:s,currentTime:t,startingSegmentIndex:i,startingPartIndex:a,startTime:o,exactManifestTimings:l}){let h=t-o;var T=al(s);let B=0;for(let _e=0;_e<T.length;_e++){var G=T[_e];if(i===G.segmentIndex&&(typeof a!="number"||typeof G.partIndex!="number"||a===G.partIndex)){B=_e;break}}if(h<0){if(0<B)for(let _e=B-1;0<=_e;_e--){var H=T[_e];if(h+=H.duration,l){if(h<0)continue}else if(h+En<=0)continue;return{partIndex:H.partIndex,segmentIndex:H.segmentIndex,startTime:o-Es({defaultDuration:s.targetDuration,durationList:T,startIndex:B,endIndex:_e})}}return{partIndex:T[0]&&T[0].partIndex||null,segmentIndex:T[0]&&T[0].segmentIndex||0,startTime:t}}if(B<0){for(let _e=B;_e<0;_e++)if((h-=s.targetDuration)<0)return{partIndex:T[0]&&T[0].partIndex||null,segmentIndex:T[0]&&T[0].segmentIndex||0,startTime:t};B=0}for(let _e=B;_e<T.length;_e++){var se=T[_e],ae=(h-=se.duration,se.duration>En),pe=h===0,ae=ae&&0<=h+En;if(!pe&&!ae||_e===T.length-1){if(l){if(0<h)continue}else if(0<=h-En)continue;return{partIndex:se.partIndex,segmentIndex:se.segmentIndex,startTime:o+Es({defaultDuration:s.targetDuration,durationList:T,startIndex:B,endIndex:_e})}}}return{segmentIndex:T[T.length-1].segmentIndex,partIndex:T[T.length-1].partIndex,startTime:t}},isEnabled:_a,isDisabled:function(s){return s.disabled},isExcluded:pc,isIncompatible:ol,playlistEnd:sc,isAes:function(s){for(let t=0;t<s.segments.length;t++)if(s.segments[t].key)return!0;return!1},hasAttribute:fc,estimateSegmentRequestTime:function(s,t,i,a=0){return fc("BANDWIDTH",i)?(s*i.attributes.BANDWIDTH-8*a)/t:NaN},isLowestEnabledRendition:ll,isAudioOnly:Cs,playlistMatch:ul,segmentDurationWithParts:sl};let gc=He.log,Ur=(s,t)=>s+"-"+t,yc=(s,t,i)=>`placeholder-uri-${s}-${t}-`+i,Fr=(s,t)=>{s.mediaGroups&&["AUDIO","SUBTITLES"].forEach(i=>{if(s.mediaGroups[i])for(var a in s.mediaGroups[i])for(var o in s.mediaGroups[i][a]){var l=s.mediaGroups[i][a][o];t(l,i,a,o)}})},vc=({playlist:s,uri:t,id:i})=>{s.id=i,s.playlistErrors_=0,t&&(s.uri=t),s.attributes=s.attributes||{}},bc=(s,t,i=yc)=>{s.uri=t;for(let h=0;h<s.playlists.length;h++){var a;s.playlists[h].uri||(a="placeholder-uri-"+h,s.playlists[h].uri=a)}let o=Cs(s);var l;Fr(s,(h,T,B,G)=>{if(!h.playlists||!h.playlists.length){if(o&&T==="AUDIO"&&!h.uri)for(let se=0;se<s.playlists.length;se++){var H=s.playlists[se];if(H.attributes&&H.attributes.AUDIO&&H.attributes.AUDIO===B)return}h.playlists=[Ii({},h)]}h.playlists.forEach(function(se,pe){var ae=i(T,B,G,se),_e=Ur(pe,ae);se.uri?se.resolvedUri=se.resolvedUri||en(s.uri,se.uri):(se.uri=pe===0?ae:_e,se.resolvedUri=se.uri),se.id=se.id||_e,se.attributes=se.attributes||{},s.playlists[se.id]=se,s.playlists[se.uri]=se})}),(h=>{let T=h.playlists.length;for(;T--;){var B=h.playlists[T];vc({playlist:B,id:Ur(T,B.uri)}),B.resolvedUri=en(h.uri,B.uri),h.playlists[B.id]=B,(h.playlists[B.uri]=B).attributes.BANDWIDTH||gc.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(s),l=s,Fr(l,h=>{h.uri&&(h.resolvedUri=en(l.uri,h.uri))})};class _c{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(t=[]){this.offset_===null&&t.length&&([t]=t,t.programDateTime!==void 0)&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(t=[]){var i;t.length&&([i]=t,i=i.startDate.getTime(),this.trimProcessedDateRanges_(i),this.pendingDateRanges_=t.reduce((a,o)=>(a.set(o.id,o),a),new Map))}processDateRange(t){this.pendingDateRanges_.delete(t.id),this.processedDateRanges_.set(t.id,t)}getDateRangesToProcess(){if(this.offset_===null)return[];let t={},i=[];this.pendingDateRanges_.forEach((l,h)=>{this.processedDateRanges_.has(h)||(l.startTime=l.startDate.getTime()/1e3-this.offset_,l.processDateRange=()=>this.processDateRange(l),i.push(l),l.class&&(t[l.class]?(h=t[l.class].push(l),l.classListIndex=h-1):(t[l.class]=[l],l.classListIndex=0)))});for(var a of i){var o=t[a.class]||[];a.endDate?a.endTime=a.endDate.getTime()/1e3-this.offset_:a.endOnNext&&o[a.classListIndex+1]?a.endTime=o[a.classListIndex+1].startTime:a.duration?a.endTime=a.startTime+a.duration:a.plannedDuration?a.endTime=a.startTime+a.plannedDuration:a.endTime=a.startTime}return i}trimProcessedDateRanges_(t){new Map(this.processedDateRanges_).forEach((i,a)=>{i.startDate.getTime()<t&&this.processedDateRanges_.delete(a)})}}let or=({requestType:l,request:t,error:i,parseFailure:a})=>{var h=t.status<200||299<t.status,o=400<=t.status&&t.status<=499,l={uri:t.uri,requestType:l},h=h&&!o||a;return i&&o?(l.error=Ii({},i),l.errorType=He.Error.NetworkRequestFailed):t.aborted?l.errorType=He.Error.NetworkRequestAborted:t.timedout?l.erroType=He.Error.NetworkRequestTimeout:h&&(o=a?He.Error.NetworkBodyParserFailed:He.Error.NetworkBadStatus,l.errorType=o,l.status=t.status,l.headers=t.headers),l};_n=He.EventTarget;function Tc(s){var t=s.segments||[],i=s.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(let a=0;a<i.preloadHints.length;a++)if(i.preloadHints[a].type==="MAP")return t}i.duration=s.targetDuration,i.preload=!0,t.push(i)}return t}let Rm=(s,t)=>{if(!s)return t;var i=Qt(s,t);if(s.preloadHints&&!t.preloadHints&&delete i.preloadHints,s.parts&&!t.parts)delete i.parts;else if(s.parts&&t.parts)for(let a=0;a<t.parts.length;a++)s.parts&&s.parts[a]&&(i.parts[a]=Qt(s.parts[a],t.parts[a]));return!s.skipped&&t.skipped&&(i.skipped=!1),s.preload&&!t.preload&&(i.preload=!1),i},Sc=(s,t)=>{!s.resolvedUri&&s.uri&&(s.resolvedUri=en(t,s.uri)),s.key&&!s.key.resolvedUri&&(s.key.resolvedUri=en(t,s.key.uri)),s.map&&!s.map.resolvedUri&&(s.map.resolvedUri=en(t,s.map.uri)),s.map&&s.map.key&&!s.map.key.resolvedUri&&(s.map.key.resolvedUri=en(t,s.map.key.uri)),s.parts&&s.parts.length&&s.parts.forEach(i=>{i.resolvedUri||(i.resolvedUri=en(t,i.uri))}),s.preloadHints&&s.preloadHints.length&&s.preloadHints.forEach(i=>{i.resolvedUri||(i.resolvedUri=en(t,i.uri))})},wc=(s,t)=>s===t||s.segments&&t.segments&&s.segments.length===t.segments.length&&s.endList===t.endList&&s.mediaSequence===t.mediaSequence&&s.preloadSegment===t.preloadSegment,dl=(s,t,i=wc)=>{var a=Qt(s,{}),o=a.playlists[t.id];if(!o||i(o,t))return null;t.segments=Tc(t);let l=Qt(o,t);if(l.preloadSegment&&!t.preloadSegment&&delete l.preloadSegment,o.segments){if(t.skip){t.segments=t.segments||[];for(let h=0;h<t.skip.skippedSegments;h++)t.segments.unshift({skipped:!0})}l.segments=((h,T,B)=>{var G=h.slice(),H=T.slice(),se=(B=B||0,[]);let pe;for(let Ce=0;Ce<H.length;Ce++){var ae=G[Ce+B],_e=H[Ce];ae?(pe=ae.map||pe,se.push(Rm(ae,_e))):(pe&&!_e.map&&(_e.map=pe),se.push(_e))}return se})(o.segments,t.segments,t.mediaSequence-o.mediaSequence)}l.segments.forEach(h=>{Sc(h,l.resolvedUri)});for(let h=0;h<a.playlists.length;h++)a.playlists[h].id===t.id&&(a.playlists[h]=l);return a.playlists[t.id]=l,a.playlists[t.uri]=l,Fr(s,(h,T,B,G)=>{if(h.playlists)for(let H=0;H<h.playlists.length;H++)t.id===h.playlists[H].id&&(h.playlists[H]=l)}),a},cl=(s,t)=>{var i=s.segments||[],i=i[i.length-1],a=i&&i.parts&&i.parts[i.parts.length-1],a=a&&a.duration||i&&i.duration;return t&&a?1e3*a:500*(s.partTargetDuration||s.targetDuration||10)},Ec=(s,t,i)=>{if(s){let a=[];return s.forEach(o=>{var l,h,T;o.attributes&&({BANDWIDTH:l,RESOLUTION:h,CODECS:T}=o.attributes,a.push({id:o.id,bandwidth:l,resolution:h,codecs:T}))}),{type:t,isLive:i,renditions:a}}};class Br extends _n{constructor(l,i,a={}){if(super(),!l)throw new Error("A non-empty playlist URL or object is required");this.logger_=un("PlaylistLoader");var{withCredentials:o=!1}=a,l=(this.src=l,this.vhs_=i,this.withCredentials=o,this.addDateRangesToTextTrack_=a.addDateRangesToTextTrack,i.options_);this.customTagParsers=l&&l.customTagParsers||[],this.customTagMappers=l&&l.customTagMappers||[],this.llhls=l&&l.llhls,this.dateRangesStorage_=new _c,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){var t=this.media();t&&(this.dateRangesStorage_.setOffset(t.segments),this.dateRangesStorage_.setPendingDateRanges(t.dateRanges),(t=this.dateRangesStorage_.getDateRangesToProcess()).length)&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state==="HAVE_METADATA"){var t=this.media();let i=en(this.main.uri,t.uri);this.llhls&&(i=((a,o)=>{if(!o.endList&&o.serverControl){let T={};if(o.serverControl.canBlockReload){var l,h=o.preloadSegment;let B=o.mediaSequence+o.segments.length;h&&(h=h.parts||[],-1<(l=uc(o)-1)&&l!=h.length-1&&(T._HLS_part=l),-1<l||h.length)&&B--,T._HLS_msn=B}if(o.serverControl&&o.serverControl.canSkipUntil&&(T._HLS_skip=o.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(T).length){let B=new window.URL(a);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(G){T.hasOwnProperty(G)&&B.searchParams.set(G,T[G])}),a=B.toString()}}return a})(i,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials,requestType:"hls-playlist"},(a,o)=>{if(this.request)return a?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})})}}playlistRequestError(t,o,a){var{uri:o,id:l}=o;this.request=null,a&&(this.state=a),this.error={playlist:this.main.playlists[l],status:t.status,message:`HLS playlist request error at URL: ${o}.`,responseText:t.responseText,code:500<=t.status?4:2,metadata:or({requestType:t.requestType,request:t,error:t.error})},this.trigger("error")}parseManifest_({url:t,manifestString:i}){try{return(({onwarn:a,oninfo:o,manifestString:l,customTagParsers:h=[],customTagMappers:T=[],llhls:B})=>{let G=new cf,H=(a&&G.on("warn",a),o&&G.on("info",o),h.forEach(se=>G.addParser(se)),T.forEach(se=>G.addTagMapper(se)),G.push(l),G.end(),G.manifest);if(B||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(se){H.hasOwnProperty(se)&&delete H[se]}),H.segments&&H.segments.forEach(function(se){["parts","preloadHints"].forEach(function(pe){se.hasOwnProperty(pe)&&delete se[pe]})})),!H.targetDuration){let se=10;H.segments&&H.segments.length&&(se=H.segments.reduce((pe,ae)=>Math.max(pe,ae.duration),0)),a&&a({message:"manifest has no targetDuration defaulting to "+se}),H.targetDuration=se}return o=lc(H),o.length&&!H.partTargetDuration&&(h=o.reduce((se,pe)=>Math.max(se,pe.duration),0),a&&(a({message:"manifest has no partTargetDuration defaulting to "+h}),gc.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),H.partTargetDuration=h),H})({onwarn:({message:a})=>this.logger_(`m3u8-parser warn for ${t}: `+a),oninfo:({message:a})=>this.logger_(`m3u8-parser info for ${t}: `+a),manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(a){this.error=a,this.error.metadata={errorType:He.Error.StreamingHlsPlaylistParserError,error:a}}}haveMetadata({playlistString:T,playlistObject:h,url:a,id:o}){this.request=null,this.state="HAVE_METADATA";var l={playlistInfo:{type:"media",uri:a}},h=(this.trigger({type:"playlistparsestart",metadata:l}),h||this.parseManifest_({url:a,manifestString:T})),T=(h.lastRequest=Date.now(),vc({playlist:h,uri:a,id:o}),dl(this.main,h));this.targetDuration=h.partTargetDuration||h.targetDuration,this.pendingMedia_=null,T?(this.main=T,this.media_=this.main.playlists[o]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(cl(this.media(),!!T)),l.parsedPlaylist=Ec(this.main.playlists,l.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:l}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),window.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new _c,this.off()}stopRequest(){var t;this.request&&(t=this.request,this.request=null,t.onreadystatechange=null,t.abort())}media(t,i){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof t=="string"){if(!this.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.main.playlists[t]}if(window.clearTimeout(this.finalRenditionTimeout),i)i=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3,this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,t,!1),i);else{let o=this.state;var i=!this.media_||t.id!==this.media_.id,a=this.main.playlists[t.id];if(a&&a.endList||t.endList&&t.segments.length)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,i&&(this.trigger("mediachanging"),o==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));else if(this.updateMediaUpdateTimeout_(cl(t,!0)),i){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging");let h={playlistInfo:{type:"media",uri:(this.pendingMedia_=t).uri}};this.trigger({type:"playlistrequeststart",metadata:h}),this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(T,B)=>{if(this.request){if(t.lastRequest=Date.now(),t.resolvedUri=va(t.resolvedUri,B),T)return this.playlistRequestError(this.request,t,o);this.trigger({type:"playlistrequestcomplete",metadata:h}),this.haveMetadata({playlistString:B.responseText,url:t.uri,id:t.id}),o==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}}pause(){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(t){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var i=this.media();t?(t=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},t)):this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(t){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=window.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(t)},t))}start(){if(this.started=!0,typeof this.src=="object")this.src.uri||(this.src.uri=window.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);else{let t={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,a)=>{if(this.request){if(this.request=null,i)return this.error={status:a.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:a.responseText,code:2,metadata:or({requestType:a.requestType,request:a,error:i})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:t}),this.src=va(this.src,a),this.trigger({type:"playlistparsestart",metadata:t}),i=this.parseManifest_({manifestString:a.responseText,url:this.src}),t.parsedPlaylist=Ec(i.playlists,t.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:t}),this.setupInitialPlaylist(i)}})}}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(t){var i,a,o,l;this.state="HAVE_MAIN_MANIFEST",t.playlists?(this.main=t,bc(this.main,this.srcUri()),t.playlists.forEach(h=>{h.segments=Tc(h),h.segments.forEach(T=>{Sc(T,h.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0])):(i=this.srcUri()||window.location.href,this.main=(a=i,o=Ur(0,a),(l={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window.location.href,resolvedUri:window.location.href,playlists:[{uri:a,id:o,resolvedUri:a,attributes:{}}]}).playlists[o]=l.playlists[0],l.playlists[a]=l.playlists[0],l),this.haveMetadata({playlistObject:t,url:i,id:this.main.playlists[0].id}),this.trigger("loadedmetadata"))}updateOrDeleteClone(t,i){var a=this.main,o=t.ID;let l=a.playlists.length;for(;l--;){var h,T,B,G,H,se=a.playlists[l];se.attributes["PATHWAY-ID"]===o&&(h=se.resolvedUri,T=se.id,i?(B=this.createCloneURI_(se.resolvedUri,t),G=Ur(o,B),H=this.createCloneAttributes_(o,se.attributes),se=this.createClonePlaylist_(se,G,t,H),a.playlists[l]=se,a.playlists[G]=se,a.playlists[B]=se):a.playlists.splice(l,1),delete a.playlists[T],delete a.playlists[h])}this.updateOrDeleteCloneMedia(t,i)}updateOrDeleteCloneMedia(t,i){let a=this.main,o=t.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(l=>{if(a.mediaGroups[l]&&a.mediaGroups[l][o]){for(var h in a.mediaGroups[l])if(h===o){for(var T in a.mediaGroups[l][h])a.mediaGroups[l][h][T].playlists.forEach((se,G)=>{var se=a.playlists[se.id],H=se.id,se=se.resolvedUri;delete a.playlists[H],delete a.playlists[se]});delete a.mediaGroups[l][h]}}}),i&&this.createClonedMediaGroups_(t)}addClonePathway(t,B={}){var a=this.main,o=a.playlists.length,l=this.createCloneURI_(B.resolvedUri,t),h=Ur(t.ID,l),T=this.createCloneAttributes_(t.ID,B.attributes),B=this.createClonePlaylist_(B,h,t,T);a.playlists[o]=B,a.playlists[h]=B,a.playlists[l]=B,this.createClonedMediaGroups_(t)}createClonedMediaGroups_(t){let i=t.ID,a=t["BASE-ID"],o=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(l=>{if(o.mediaGroups[l]&&!o.mediaGroups[l][i]){for(var h in o.mediaGroups[l])if(h===a){o.mediaGroups[l][i]={};for(let G in o.mediaGroups[l][h]){var T=o.mediaGroups[l][h][G];o.mediaGroups[l][i][G]=Ii({},T);let H=o.mediaGroups[l][i][G];var B=this.createCloneURI_(T.resolvedUri,t);H.resolvedUri=B,H.uri=B,H.playlists=[],T.playlists.forEach((se,pe)=>{var ae,_e=o.playlists[se.id],Ce=yc(l,i,G),Ce=Ur(i,Ce);_e&&!o.playlists[Ce]&&(ae=(_e=this.createClonePlaylist_(_e,Ce,t)).resolvedUri,o.playlists[Ce]=_e,o.playlists[ae]=_e),H.playlists[pe]=this.createClonePlaylist_(se,Ce,t)})}}}})}createClonePlaylist_(t,i,a,o){return a=this.createCloneURI_(t.resolvedUri,a),a={resolvedUri:a,uri:a,id:i},t.segments&&(a.segments=[]),o&&(a.attributes=o),Qt(t,a)}createCloneURI_(t,i){var a,o=new URL(t),l=(o.hostname=i["URI-REPLACEMENT"].HOST,i["URI-REPLACEMENT"].PARAMS);for(a of Object.keys(l))o.searchParams.set(a,l[a]);return o.href}createCloneAttributes_(t,i){let a={"PATHWAY-ID":t};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(o=>{i[o]&&(a[o]=t)}),a}getKeyIdSet(t){if(t.contentProtection){var i,a=new Set;for(i in t.contentProtection){var o=t.contentProtection[i].attributes.keyId;o&&a.add(o.toLowerCase())}return a}}}function hl(s,t,i,a){var o=s.responseType==="arraybuffer"?s.response:s.responseText;!t&&o&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=o.byteLength||o.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),i.headers&&(s.responseHeaders=i.headers),t&&t.code==="ETIMEDOUT"&&(s.timedout=!0),a(t=t||s.aborted||i.statusCode===200||i.statusCode===206||i.statusCode===0?t:new Error("XHR Failed with a response of: "+(s&&(o||s.responseText))),s)}function Cc(){function s(t,i){t=Qt({timeout:45e3},t);var a=s.beforeRequest||He.Vhs.xhr.beforeRequest,o=s._requestCallbackSet||He.Vhs.xhr._requestCallbackSet||new Set;let l=s._responseCallbackSet||He.Vhs.xhr._responseCallbackSet;a&&typeof a=="function"&&(He.log.warn("beforeRequest is deprecated, use onRequest instead."),o.add(a));var h=(He.Vhs.xhr.original===!0?He:He.Vhs).xhr,T=((H,se)=>{if(H&&H.size){let pe=se;return H.forEach(ae=>{pe=ae(pe)}),pe}})(o,t);o.delete(a);let B=h(T||t,function(H,se){var pe,ae,_e,Ce;return pe=l,ae=B,_e=H,Ce=se,pe&&pe.size&&pe.forEach(Le=>{Le(ae,_e,Ce)}),hl(B,H,se,i)}),G=B.abort;return B.abort=function(){return B.aborted=!0,G.apply(B,arguments)},B.uri=t.uri,B.requestType=t.requestType,B.requestTime=Date.now(),B}return s.original=!0,s}function pl(s){var t={};return s.byterange&&(t.Range=function(i){let a;return"bytes="+i.offset+"-"+(a=typeof i.offset=="bigint"||typeof i.length=="bigint"?window.BigInt(i.offset)+window.BigInt(i.length)-window.BigInt(1):i.offset+i.length-1)}(s.byterange)),t}function Lm(s,t){return s=s.toString(16),"00".substring(0,2-s.length)+s+(t%2?" ":"")}function Mm(s){return 32<=s&&s<126?String.fromCharCode(s):"."}function Ta(s){var t=s.byterange||{length:1/0,offset:0};return[t.length,t.offset,s.resolvedUri].join(",")}function xc(s){return s.resolvedUri}let kc=function(s){let t={};return Object.keys(s).forEach(i=>{var a=s[i];ud(a)?t[i]={bytes:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength}:t[i]=a}),t},Nc=s=>{var t,i,a=Array.prototype.slice.call(s);let o="";for(let l=0;l<a.length/16;l++)t=a.slice(16*l,16*l+16).map(Lm).join(""),i=a.slice(16*l,16*l+16).map(Mm).join(""),o+=t+" "+i+`
`;return o};nr=Object.freeze({__proto__:null,createTransferableMessage:kc,initSegmentId:Ta,segmentKeyId:xc,hexDump:Nc,tagDump:({bytes:s})=>Nc(s),textRanges:s=>{let t="",i;for(i=0;i<s.length;i++)t+=(a=s,o=i,a.start(o)+"-"+a.end(o)+" ");var a,o;return t}});let Ac=.25,Um=s=>s.transmuxedPresentationEnd-s.transmuxedPresentationStart-s.transmuxerPrependedSeconds,Fm=({playlist:s,time:t=void 0,callback:i})=>{var a,o;if(i)return s&&t!==void 0?(s=((l,h)=>{if(!h||!h.segments||h.segments.length===0)return null;let T=0,B;for(let H=0;H<h.segments.length&&(B=h.segments[H],!(l<=(T=B.videoTimingInfo?B.videoTimingInfo.transmuxedPresentationEnd:T+B.duration)));H++);var G=h.segments[h.segments.length-1];if(G.videoTimingInfo&&G.videoTimingInfo.transmuxedPresentationEnd<l)return null;if(l>T){if(l>T+G.duration*Ac)return null;B=G}return{segment:B,estimatedStart:B.videoTimingInfo?B.videoTimingInfo.transmuxedPresentationStart:T-B.duration,type:B.videoTimingInfo?"accurate":"estimate"}})(t,s))?s.type==="estimate"?i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart}):(a={mediaSeconds:t},t=t,(o=(s=s.segment).dateTimeObject?(o=s.videoTimingInfo.transmuxerPrependedSeconds,t=t-(s.videoTimingInfo.transmuxedPresentationStart+o),new Date(s.dateTimeObject.getTime()+1e3*t)):null)&&(a.programDateTime=o.toISOString()),i(null,a)):i({message:"valid programTime was not found"}):i({message:"getProgramTime: playlist and time must be provided"});throw new Error("getProgramTime: callback must be provided")},Ic=({programTime:s,playlist:t,retryCount:i=2,seekTo:a,pauseAfterSeek:o=!0,tech:l,callback:h})=>{var T,B,G;if(h)return typeof s<"u"&&t&&a?t.endList||l.hasStarted_?(H=>{if(!H.segments||H.segments.length===0)return!1;for(let se=0;se<H.segments.length;se++)if(!H.segments[se].dateTimeObject)return!1;return!0})(t)?(G=((Ce,se)=>{let pe;try{pe=new Date(Ce)}catch{return null}if(!se||!se.segments||se.segments.length===0)return null;let ae=se.segments[0];if(pe<new Date(ae.dateTimeObject))return null;for(let Pe=0;Pe<se.segments.length-1;Pe++){ae=se.segments[Pe];var _e=new Date(se.segments[Pe+1].dateTimeObject);if(pe<_e)break}var Ce=se.segments[se.segments.length-1],Le=Ce.dateTimeObject,xe=Ce.videoTimingInfo?Um(Ce.videoTimingInfo):Ce.duration+Ce.duration*Ac,xe=new Date(Le.getTime()+1e3*xe);return pe>xe?null:{segment:ae=pe>new Date(Le)?Ce:ae,estimatedStart:ae.videoTimingInfo?ae.videoTimingInfo.transmuxedPresentationStart:tn.duration(se,se.mediaSequence+se.segments.indexOf(ae)),type:ae.videoTimingInfo?"accurate":"estimate"}})(s,t))?(B=((H,se)=>{let pe,ae;try{pe=new Date(H),ae=new Date(se)}catch{}return H=pe.getTime(),(ae.getTime()-H)/1e3})((T=G.segment).dateTimeObject,s),G.type==="estimate"?i===0?h({message:s+" is not buffered yet. Try again"}):(a(G.estimatedStart+B),void l.one("seeked",()=>{Ic({programTime:s,playlist:t,retryCount:i-1,seekTo:a,pauseAfterSeek:o,tech:l,callback:h})})):(G=T.start+B,l.one("seeked",()=>h(null,l.currentTime())),o&&l.pause(),void a(G))):h({message:s+" was not found in the stream"}):h({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri}):h({message:"player must be playing a live stream to start buffering"}):h({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});throw new Error("seekToProgramTime: callback must be provided")},Bm=(s,t)=>{if(s.readyState===4)return t()},zm=(s,t,i,a)=>{function o(H,se,pe,ae){return se.abort(),B=!0,i(H,se,pe,ae)}function l(H,se){var pe;if(!B)return H?(H.metadata=or({requestType:a,request:se,error:H}),o(H,se,"",h)):(pe=se.responseText.substring(h&&h.byteLength||0,se.responseText.length),h=function(){for(var ae,_e,Ce,Le=arguments.length,xe=new Array(Le),Pe=0;Pe<Le;Pe++)xe[Pe]=arguments[Pe];return(xe=xe.filter(function(Ae){return Ae&&(Ae.byteLength||Ae.length)&&typeof Ae!="string"})).length<=1?wt(xe[0]):(ae=xe.reduce(function(Ae,st,Ue){return Ae+(st.byteLength||st.length)},0),_e=new Uint8Array(ae),Ce=0,xe.forEach(function(Ae){Ae=wt(Ae),_e.set(Ae,Ce),Ce+=Ae.byteLength}),_e)}(h,dd(pe,!0)),T=T||Rr(h),h.length<10||T&&h.length<T+2||(pe=il(h))==="ts"&&h.length<188||!pe&&h.length<376?Bm(se,()=>o(H,se,"",h)):o(null,se,pe,h))}let h=[],T,B=!1,G=t({uri:s,beforeSend(H){H.overrideMimeType("text/plain; charset=x-user-defined"),H.addEventListener("progress",function({}){return hl(H,null,{statusCode:H.status},l)})}},function(H,se){return hl(G,H,se,l)});return G};vi=He.EventTarget;function Oc(s,t){if(!wc(s,t)||s.sidx&&t.sidx&&(s.sidx.offset!==t.sidx.offset||s.sidx.length!==t.sidx.length)||!s.sidx&&t.sidx||s.sidx&&!t.sidx||s.segments&&!t.segments||!s.segments&&t.segments)return!1;if(s.segments||t.segments)for(let o=0;o<s.segments.length;o++){var i=s.segments[o],a=t.segments[o];if(i.uri!==a.uri||(i.byterange||a.byterange)&&(i=i.byterange,a=a.byterange,i&&!a||!i&&a||i.offset!==a.offset||i.length!==a.length))return!1}return!0}let jm=(s,t,i,a)=>`placeholder-uri-${s}-${t}-`+(a.attributes.NAME||i),Hm=({mainXml:s,srcUrl:t,clientOffset:i,sidxMapping:a,previousManifest:o})=>(s=s,i={manifestUri:t,clientOffset:i,sidxMapping:a,previousManifest:o},s=vm(Jd(s),i),a=lm(s.representationInfo),o=Jf({dashPlaylists:a,locations:s.locations,contentSteering:s.contentSteeringInfo,sidxMapping:i.sidxMapping,previousManifest:i.previousManifest,eventStream:s.eventStream}),bc(o,t,jm),o),qm=(s,t,i)=>{let a=!0,o=Qt(s,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let G=0;G<t.playlists.length;G++){var l=t.playlists[G],h=(l.sidx&&(h=fa(l.sidx),i)&&i[h]&&i[h].sidx&&Ko(l,i[h].sidx,l.sidx.resolvedUri),dl(o,l,Oc));h&&(o=h,a=!1)}var T,B;return Fr(t,(G,H,se,pe)=>{var ae,_e;G.playlists&&G.playlists.length&&(ae=G.playlists[0].id,_e=dl(o,G.playlists[0],Oc))&&(pe in(o=_e).mediaGroups[H][se]||(o.mediaGroups[H][se][pe]=G),o.mediaGroups[H][se][pe].playlists[0]=o.playlists[ae],a=!1)}),T=o,B=t,Fr(T,(G,H,se,pe)=>{B.mediaGroups[H][se]&&pe in B.mediaGroups[H][se]||delete T.mediaGroups[H][se][pe]}),(a=t.minimumUpdatePeriod===s.minimumUpdatePeriod&&a)?null:o},Vm=(s,t)=>(!s.map&&!t.map||!!(s.map&&t.map&&s.map.byterange.offset===t.map.byterange.offset&&s.map.byterange.length===t.map.byterange.length))&&s.uri===t.uri&&s.byterange.offset===t.byterange.offset&&s.byterange.length===t.byterange.length,Dc=(s,t)=>{var i,a={};for(i in s){var o=s[i].sidx;if(o){var l=fa(o);if(!t[l])break;var h=t[l].sidxInfo;Vm(h,o)&&(a[l]=t[l])}}return a};class fl extends vi{constructor(t,i,a={},l){super(),this.isPaused_=!0,this.mainPlaylistLoader_=l||this,l||(this.isMain_=!0);var{withCredentials:l=!1}=a;if(this.vhs_=i,this.withCredentials=l,this.addMetadataToTextTrack=a.addMetadataToTextTrack,!t)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=un("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=t,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=t}get isPaused(){return this.isPaused_}requestErrored_(t,i,a){return!this.request||(this.request=null,t?(this.error=typeof t!="object"||t instanceof Error?{status:i.status,message:"DASH request error at URL: "+i.uri,response:i.response,code:2,metadata:t.metadata}:t,a&&(this.state=a),this.trigger("error"),!0):void 0)}addSidxSegments_(t,i,a){let o=t.sidx&&fa(t.sidx);if(t.sidx&&o&&!this.mainPlaylistLoader_.sidxMapping_[o]){let l=va(t.sidx.resolvedUri),h=(T,B)=>{if(!this.requestErrored_(T,B,i)){var T=this.mainPlaylistLoader_.sidxMapping_,G=B.requestType;let se;try{se=Tm(wt(B.response).subarray(8))}catch(pe){return pe.metadata=or({requestType:G,request:B,parseFailure:!0}),void this.requestErrored_(pe,B,i)}return T[o]={sidxInfo:t.sidx,sidx:se},Ko(t,se,t.sidx.resolvedUri),a(!0)}};this.request=zm(l,this.vhs_.xhr,(T,B,G,H)=>{var se,pe;return T?h(T,B):G&&G==="mp4"?({offset:se,length:pe}=t.sidx.byterange,H.length>=pe+se?h(T,{response:H.subarray(se,se+pe),status:B.status,uri:B.uri}):void(this.request=this.vhs_.xhr({uri:l,responseType:"arraybuffer",requestType:"dash-sidx",headers:pl({byterange:t.sidx.byterange})},h))):(T=G||"unknown",h({status:B.status,message:`Unsupported ${T} container type for sidx segment at URL: `+l,response:"",playlist:t,internal:!0,playlistExclusionDuration:1/0,code:2},B))},"dash-sidx")}else window.clearTimeout(this.mediaRequest_),this.mediaRequest_=window.setTimeout(()=>a(!1),0)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window.clearTimeout(this.minimumUpdatePeriodTimeout_),window.clearTimeout(this.mediaRequest_),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){var t;this.request&&(t=this.request,this.request=null,t.onreadystatechange=null,t.abort())}media(t){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);let i=this.state;if(typeof t=="string"){if(!this.mainPlaylistLoader_.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.mainPlaylistLoader_.main.playlists[t]}var a=!this.media_||t.id!==this.media_.id;a&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList?(this.state="HAVE_METADATA",this.media_=t,a&&(this.trigger("mediachanging"),this.trigger("mediachange"))):a&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,i,o=>{this.haveMetadata({startingState:i,playlist:t})}))}haveMetadata({startingState:t,playlist:i}){this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,window.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(i.id),t==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(window.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(t){this.isPaused_=!1,window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var i=this.media();t?(t=i?i.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout(()=>this.load(),t)):this.started?i&&!i.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_((t,i)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])}):(window.clearTimeout(this.mediaRequest_),this.mediaRequest_=window.setTimeout(()=>this.haveMain_(),0))}requestMain_(t){let i={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:i}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(a,o)=>{var l;if(a&&(l=o.requestType,a.metadata=or({requestType:l,request:o,error:a})),this.requestErrored_(a,o))this.state==="HAVE_NOTHING"&&(this.started=!1);else{this.trigger({type:"manifestrequestcomplete",metadata:i});let h=o.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?this.mainLoaded_=Date.parse(o.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=va(this.mainPlaylistLoader_.srcUrl,o),!h)return t(o,h);this.handleMain_(),this.syncClientServerClock_(()=>t(o,h))}})}syncClientServerClock_(t){let i=bm(this.mainPlaylistLoader_.mainXml_);return i===null?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t()):i.method==="DIRECT"?(this.mainPlaylistLoader_.clientOffset_=i.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:en(this.mainPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(a,o)=>{if(this.request){var l;if(a)return l=o.requestType,this.error.metadata=or({requestType:l,request:o,error:a}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t();let h;h=i.method==="HEAD"?o.responseHeaders&&o.responseHeaders.date?Date.parse(o.responseHeaders.date):this.mainLoaded_:Date.parse(o.responseText),this.mainPlaylistLoader_.clientOffset_=h-Date.now(),t()}}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){window.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;var t=this.mainPlaylistLoader_.main,i={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:i});let a;try{a=Hm({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:t})}catch(l){this.error=l,this.error.metadata={errorType:He.Error.StreamingDashManifestParserError,error:l},this.trigger("error")}t&&(a=qm(t,a,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=a||t;var o=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(o&&o!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=o),(!t||a&&a.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(a),a){var{duration:o,endList:t}=a;let T=[];a.playlists.forEach(B=>{T.push({id:B.id,bandwidth:B.attributes.BANDWIDTH,resolution:B.attributes.RESOLUTION,codecs:B.attributes.CODECS})}),o={duration:o,isLive:!t,renditions:T},i.parsedManifest=o,this.trigger({type:"manifestparsecomplete",metadata:i})}return!!a}updateMinimumUpdatePeriodTimeout_(){var t=this.mainPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(window.clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);let i=t.main&&t.main.minimumUpdatePeriod;i===0&&(t.media()?i=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),typeof i!="number"||i<=0?i<0&&this.logger_(`found invalid minimumUpdatePeriod of ${i}, not setting a timeout`):this.createMUPTimeout_(i)}createMUPTimeout_(t){let i=this.mainPlaylistLoader_;i.minimumUpdatePeriodTimeout_=window.setTimeout(()=>{i.minimumUpdatePeriodTimeout_=null,i.trigger("minimumUpdatePeriod"),i.createMUPTimeout_(t)},t)}refreshXml_(){this.requestMain_((t,i)=>{i&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((a,o)=>{let l=Dc(a.playlists,o);return Fr(a,(h,T,B,G)=>{h.playlists&&h.playlists.length&&(h=h.playlists,l=Qt(l,Dc(h,o)))}),l})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,a=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(t){if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();var i=this.mainPlaylistLoader_.main.playlists;let a=!this.media_||this.media_!==i[t];if(a?this.media_=i[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){let o=()=>{this.media().endList||(this.mediaUpdateTimeout=window.setTimeout(()=>{this.trigger("mediaupdatetimeout"),o()},cl(this.media(),!!a)))};o()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(t){t&&this.mainPlaylistLoader_.main.eventStream&&(t=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]})),this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration))}getKeyIdSet(t){if(t.contentProtection){var i,a=new Set;for(i in t.contentProtection){var o=t.contentProtection[i].attributes["cenc:default_KID"];o&&a.add(o.replace(/-/g,"").toLowerCase())}return a}}}var Mi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};function Pc(s){return s.on=s.addEventListener,s.off=s.removeEventListener,s}let Wm=s=>{var t=new Uint8Array(new ArrayBuffer(s.length));for(let i=0;i<s.length;i++)t[i]=s.charCodeAt(i);return t.buffer};function Rc(s){return function(){let t=function(o){try{return URL.createObjectURL(new Blob([o],{type:"application/javascript"}))}catch{var l=new BlobBuilder;return l.append(o),URL.createObjectURL(l.getBlob())}}(s);var i=Pc(new Worker(t));i.objURL=t;let a=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(t),a.call(this)},i}}function Lc(s){return`var browserWorkerPolyFill = ${Pc.toString()};
browserWorkerPolyFill(self);
`+s}function Mc(s){return s.toString().replace(/^function.+?{/,"").slice(0,-1)}var Xm=Rc(Lc(Mc(function(){function s(){this.init=function(){var c={};this.on=function(C,D){c[C]||(c[C]=[]),c[C]=c[C].concat(D)},this.off=function(C,D){return!!c[C]&&(D=c[C].indexOf(D),c[C]=c[C].slice(),c[C].splice(D,1),-1<D)},this.trigger=function(C){var D,L,X,oe=c[C];if(oe)if(arguments.length===2)for(L=oe.length,D=0;D<L;++D)oe[D].call(this,arguments[1]);else{for(X=[],D=arguments.length,D=1;D<arguments.length;++D)X.push(arguments[D]);for(L=oe.length,D=0;D<L;++D)oe[D].apply(this,X)}},this.dispose=function(){c={}}}}var t,i,a,o,l,h,T,B,G,H,se,pe,ae,_e,Ce,Le,xe,Pe,Ae,st,Ue,ft,Et,dt,Ot,Ct,Lt,jt,xt,Zt,Ti,mn,si,lt,ht,Ft,Xt,Ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn=(s.prototype.pipe=function(c){return this.on("data",function(C){c.push(C)}),this.on("done",function(C){c.flush(C)}),this.on("partialdone",function(C){c.partialFlush(C)}),this.on("endedtimeline",function(C){c.endTimeline(C)}),this.on("reset",function(C){c.reset(C)}),c},s.prototype.push=function(c){this.trigger("data",c)},s.prototype.flush=function(c){this.trigger("done",c)},s.prototype.partialFlush=function(c){this.trigger("partialdone",c)},s.prototype.endTimeline=function(c){this.trigger("endedtimeline",c)},s.prototype.reset=function(c){this.trigger("reset",c)},s),Jt=Math.pow(2,32),ji={getUint64:function(D){var C,D=new DataView(D.buffer,D.byteOffset,D.byteLength);return D.getBigUint64?(C=D.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(C):C:D.getUint32(0)*Jt+D.getUint32(4)},MAX_UINT32:Jt},fi=ji.MAX_UINT32;if(Ue={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},typeof Uint8Array<"u"){for(var Wt in Ue)Ue.hasOwnProperty(Wt)&&(Ue[Wt]=[Wt.charCodeAt(0),Wt.charCodeAt(1),Wt.charCodeAt(2),Wt.charCodeAt(3)]);ft=new Uint8Array([105,115,111,109]),dt=new Uint8Array([97,118,99,49]),Et=new Uint8Array([0,0,0,1]),wl=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),El=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Ot={video:wl,audio:El},jt=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Lt=new Uint8Array([0,0,0,0,0,0,0,0]),xt=new Uint8Array([0,0,0,0,0,0,0,0]),Zt=xt,Ti=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),mn=xt,Ct=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}t=function(c){for(var C,D=[],L=0,X=1;X<arguments.length;X++)D.push(arguments[X]);for(X=D.length;X--;)L+=D[X].byteLength;for(C=new Uint8Array(L+8),new DataView(C.buffer,C.byteOffset,C.byteLength).setUint32(0,C.byteLength),C.set(c,4),X=0,L=8;X<D.length;X++)C.set(D[X],L),L+=D[X].byteLength;return C},i=function(){return t(Ue.dinf,t(Ue.dref,jt))},a=function(c){return t(Ue.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,c.audioobjecttype<<3|c.samplingfrequencyindex>>>1,c.samplingfrequencyindex<<7|c.channelcount<<3,6,1,2]))},_e=function(c){return t(Ue.hdlr,Ot[c])},ae=function(c){var C=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,c.duration>>>24&255,c.duration>>>16&255,c.duration>>>8&255,255&c.duration,85,196,0,0]);return c.samplerate&&(C[12]=c.samplerate>>>24&255,C[13]=c.samplerate>>>16&255,C[14]=c.samplerate>>>8&255,C[15]=255&c.samplerate),t(Ue.mdhd,C)},pe=function(c){return t(Ue.mdia,ae(c),_e(c.type),h(c))},l=function(c){return t(Ue.mfhd,new Uint8Array([0,0,0,0,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c]))},h=function(c){return t(Ue.minf,c.type==="video"?t(Ue.vmhd,Ct):t(Ue.smhd,Lt),i(),Le(c))},B=function(c){for(var C=c.length,D=[];C--;)D[C]=Ae(c[C]);return t.apply(null,[Ue.mvex].concat(D))},G=function(c){return c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]),t(Ue.mvhd,c)},Ce=function(c){for(var C,D=c.samples||[],L=new Uint8Array(4+D.length),X=0;X<D.length;X++)C=D[X].flags,L[X+4]=C.dependsOn<<4|C.isDependedOn<<2|C.hasRedundancy;return t(Ue.sdtp,L)},Le=function(c){return t(Ue.stbl,xe(c),t(Ue.stts,mn),t(Ue.stsc,Zt),t(Ue.stsz,Ti),t(Ue.stco,xt))},xe=function(c){return t(Ue.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),(c.type==="video"?si:lt)(c))},si=function(c){for(var C,D,L=c.sps||[],X=c.pps||[],oe=[],ce=[],ge=0;ge<L.length;ge++)oe.push((65280&L[ge].byteLength)>>>8),oe.push(255&L[ge].byteLength),oe=oe.concat(Array.prototype.slice.call(L[ge]));for(ge=0;ge<X.length;ge++)ce.push((65280&X[ge].byteLength)>>>8),ce.push(255&X[ge].byteLength),ce=ce.concat(Array.prototype.slice.call(X[ge]));return C=[Ue.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&c.width)>>8,255&c.width,(65280&c.height)>>8,255&c.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(Ue.avcC,new Uint8Array([1,c.profileIdc,c.profileCompatibility,c.levelIdc,255].concat([L.length],oe,[X.length],ce))),t(Ue.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],c.sarRatio&&(D=c.sarRatio[0],c=c.sarRatio[1],C.push(t(Ue.pasp,new Uint8Array([(4278190080&D)>>24,(16711680&D)>>16,(65280&D)>>8,255&D,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c])))),t.apply(null,C)},lt=function(c){return t(Ue.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&c.channelcount)>>8,255&c.channelcount,(65280&c.samplesize)>>8,255&c.samplesize,0,0,0,0,(65280&c.samplerate)>>8,255&c.samplerate,0,0]),a(c))},se=function(c){return c=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&c.id)>>24,(16711680&c.id)>>16,(65280&c.id)>>8,255&c.id,0,0,0,0,(4278190080&c.duration)>>24,(16711680&c.duration)>>16,(65280&c.duration)>>8,255&c.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&c.width)>>8,255&c.width,0,0,(65280&c.height)>>8,255&c.height,0,0]),t(Ue.tkhd,c)},Pe=function(c){var C,D=t(Ue.tfhd,new Uint8Array([0,0,0,58,(4278190080&c.id)>>24,(16711680&c.id)>>16,(65280&c.id)>>8,255&c.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),X=Math.floor(c.baseMediaDecodeTime/fi),L=Math.floor(c.baseMediaDecodeTime%fi),X=t(Ue.tfdt,new Uint8Array([1,0,0,0,X>>>24&255,X>>>16&255,X>>>8&255,255&X,L>>>24&255,L>>>16&255,L>>>8&255,255&L]));return c.type==="audio"?(C=st(c,92),t(Ue.traf,D,X,C)):(L=Ce(c),C=st(c,L.length+92),t(Ue.traf,D,X,C,L))},H=function(c){return c.duration=c.duration||4294967295,t(Ue.trak,se(c),pe(c))},Ae=function(c){var C=new Uint8Array([0,0,0,0,(4278190080&c.id)>>24,(16711680&c.id)>>16,(65280&c.id)>>8,255&c.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return c.type!=="video"&&(C[C.length-1]=0),t(Ue.trex,C)},ht=function(c,C){var D=0,L=0,X=0,oe=0;return c.length&&(c[0].duration!==void 0&&(D=1),c[0].size!==void 0&&(L=2),c[0].flags!==void 0&&(X=4),c[0].compositionTimeOffset!==void 0)&&(oe=8),[0,0,D|L|X|oe,1,(4278190080&c.length)>>>24,(16711680&c.length)>>>16,(65280&c.length)>>>8,255&c.length,(4278190080&C)>>>24,(16711680&C)>>>16,(65280&C)>>>8,255&C]},Ft=function(c,C){var D,L,X,oe,ce=c.samples||[];for(C+=20+16*ce.length,c=ht(ce,C),(L=new Uint8Array(c.length+16*ce.length)).set(c),D=c.length,oe=0;oe<ce.length;oe++)X=ce[oe],L[D++]=(4278190080&X.duration)>>>24,L[D++]=(16711680&X.duration)>>>16,L[D++]=(65280&X.duration)>>>8,L[D++]=255&X.duration,L[D++]=(4278190080&X.size)>>>24,L[D++]=(16711680&X.size)>>>16,L[D++]=(65280&X.size)>>>8,L[D++]=255&X.size,L[D++]=X.flags.isLeading<<2|X.flags.dependsOn,L[D++]=X.flags.isDependedOn<<6|X.flags.hasRedundancy<<4|X.flags.paddingValue<<1|X.flags.isNonSyncSample,L[D++]=61440&X.flags.degradationPriority,L[D++]=15&X.flags.degradationPriority,L[D++]=(4278190080&X.compositionTimeOffset)>>>24,L[D++]=(16711680&X.compositionTimeOffset)>>>16,L[D++]=(65280&X.compositionTimeOffset)>>>8,L[D++]=255&X.compositionTimeOffset;return t(Ue.trun,L)},Xt=function(c,C){var D,L,X,oe,ce=c.samples||[];for(C+=20+8*ce.length,c=ht(ce,C),(D=new Uint8Array(c.length+8*ce.length)).set(c),L=c.length,oe=0;oe<ce.length;oe++)X=ce[oe],D[L++]=(4278190080&X.duration)>>>24,D[L++]=(16711680&X.duration)>>>16,D[L++]=(65280&X.duration)>>>8,D[L++]=255&X.duration,D[L++]=(4278190080&X.size)>>>24,D[L++]=(16711680&X.size)>>>16,D[L++]=(65280&X.size)>>>8,D[L++]=255&X.size;return t(Ue.trun,D)},st=function(c,C){return(c.type==="audio"?Xt:Ft)(c,C)};function Gt(c,C){var D=Ng();return D.dataOffset=C,D.compositionTimeOffset=c.pts-c.dts,D.duration=c.duration,D.size=4*c.length,D.size+=c.byteLength,c.keyFrame&&(D.flags.dependsOn=2,D.flags.isNonSyncSample=0),D}function Mt(c){for(var C=[];c--;)C.push(0);return C}function Ht(c){c=c||{},Ht.prototype.init.call(this),this.parse708captions_=typeof c.parse708captions!="boolean"||c.parse708captions,this.captionPackets_=[],this.ccStreams_=[new mi(0,0),new mi(0,1),new mi(1,0),new mi(1,1)],this.parse708captions_&&(this.cc708Stream_=new ai({captionServices:c.captionServices})),this.reset(),this.ccStreams_.forEach(function(C){C.on("data",this.trigger.bind(this,"data")),C.on("partialdone",this.trigger.bind(this,"partialdone")),C.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))}function sn(c){return 32<=c&&c<=127||160<=c&&c<=255}function an(c){this.windowNum=c,this.reset()}function Mn(c,C,D){this.serviceNum=c,this.text="",this.currentWindow=new an(-1),this.windows=[],this.stream=D,typeof C=="string"&&this.createTextDecoder(C)}function ur(c){return c===null?"":(c=Dg[c]||c,String.fromCharCode(c))}function li(){for(var c=[],C=Aa+1;C--;)c.push({text:"",indent:0,offset:0});return c}function Vr(c,C){var D=1;for(C<c&&(D=-1);Math.abs(C-c)>Lg;)c+=D*Rg;return c}function Ns(c){var C,D;Ns.prototype.init.call(this),this.type_=c||"shared",this.push=function(L){L.type==="metadata"?this.trigger("data",L):this.type_!=="shared"&&L.type!==this.type_||(D===void 0&&(D=L.dts),L.dts=Vr(L.dts,D),L.pts=Vr(L.pts,D),C=L.dts,this.trigger("data",L))},this.flush=function(){D=C,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){C=D=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}var Wr,wl={ftyp:o=function(){return t(Ue.ftyp,ft,Et,ft,dt)},mdat:function(c){return t(Ue.mdat,c)},moof:function(c,C){for(var D=[],L=C.length;L--;)D[L]=Pe(C[L]);return t.apply(null,[Ue.moof,l(c)].concat(D))},moov:T=function(c){for(var C=c.length,D=[];C--;)D[C]=H(c[C]);return t.apply(null,[Ue.moov,G(4294967295)].concat(D).concat(B(c)))},initSegment:function(D){var C=o(),D=T(D),L=new Uint8Array(C.byteLength+D.byteLength);return L.set(C),L.set(D,C.byteLength),L}},Ng=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},El={groupNalsIntoFrames:function(c){var C,D,L=[],X=[];for(X.byteLength=0,X.nalCount=0,C=L.byteLength=X.duration=0;C<c.length;C++)(D=c[C]).nalUnitType==="access_unit_delimiter_rbsp"?(L.length&&(L.duration=D.dts-L.dts,X.byteLength+=L.byteLength,X.nalCount+=L.length,X.duration+=L.duration,X.push(L)),(L=[D]).byteLength=D.data.byteLength,L.pts=D.pts,L.dts=D.dts):(D.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(L.keyFrame=!0),L.duration=D.dts-L.dts,L.byteLength+=D.data.byteLength,L.push(D));return X.length&&(!L.duration||L.duration<=0)&&(L.duration=X[X.length-1].duration),X.byteLength+=L.byteLength,X.nalCount+=L.length,X.duration+=L.duration,X.push(L),X},groupFramesIntoGops:function(c){var C,D,L=[],X=[];for(L.byteLength=0,L.nalCount=0,L.duration=0,L.pts=c[0].pts,L.dts=c[0].dts,X.byteLength=0,X.nalCount=0,X.duration=0,X.pts=c[0].pts,X.dts=c[0].dts,C=0;C<c.length;C++)(D=c[C]).keyFrame?(L.length&&(X.push(L),X.byteLength+=L.byteLength,X.nalCount+=L.nalCount,X.duration+=L.duration),(L=[D]).nalCount=D.length,L.byteLength=D.byteLength,L.pts=D.pts,L.dts=D.dts,L.duration=D.duration):(L.duration+=D.duration,L.nalCount+=D.length,L.byteLength+=D.byteLength,L.push(D));return X.length&&L.duration<=0&&(L.duration=X[X.length-1].duration),X.byteLength+=L.byteLength,X.nalCount+=L.nalCount,X.duration+=L.duration,X.push(L),X},extendFirstKeyFrame:function(c){var C;return!c[0][0].keyFrame&&1<c.length&&(C=c.shift(),c.byteLength-=C.byteLength,c.nalCount-=C.nalCount,c[0][0].dts=C.dts,c[0][0].pts=C.pts,c[0][0].duration+=C.duration),c},generateSampleTable:function(c,C){for(var D,L,X,oe=C||0,ce=[],ge=0;ge<c.length;ge++)for(L=c[ge],D=0;D<L.length;D++)X=L[D],oe+=(X=Gt(X,oe)).size,ce.push(X);return ce},concatenateNalData:function(c){for(var C,D,L,X,oe,ce=0,ge=c.byteLength,Te=new Uint8Array(ge+4*c.nalCount),Ie=new DataView(Te.buffer),Ge=0;Ge<c.length;Ge++)for(L=c[Ge],C=0;C<L.length;C++)for(X=L[C],D=0;D<X.length;D++)oe=X[D],Ie.setUint32(ce,oe.data.byteLength),Te.set(oe.data,ce+=4),ce+=oe.data.byteLength;return Te},generateSampleTableForFrame:function(L,C){var D=[],L=Gt(L,C||0);return D.push(L),D},concatenateNalDataForFrame:function(c){for(var C,D=0,L=c.byteLength,X=new Uint8Array(L+4*c.length),oe=new DataView(X.buffer),ce=0;ce<c.length;ce++)oe.setUint32(D,(C=c[ce]).data.byteLength),X.set(C.data,D+=4),D+=C.data.byteLength;return X}},Vn=[33,16,5,32,164,27],Cl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Us=function(c){return 9e4*c},$r=function(c,C){return c*C},kh=function(c){return c/9e4},ka=function(c,C){return c/C},di={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:Us,secondsToAudioTs:$r,videoTsToSeconds:kh,audioTsToSeconds:ka,audioTsToVideoTs:function(c,C){return c/C*9e4},videoTsToAudioTs:function(c,C){return c/9e4*C},metadataTsToSeconds:function(c,C,D){return kh(D?c:c-C)}},Ag=function(){var c,C;return Wr||(c={96e3:[Vn,[227,64],Mt(154),[56]],88200:[Vn,[231],Mt(170),[56]],64e3:[Vn,[248,192],Mt(240),[56]],48e3:[Vn,[255,192],Mt(268),[55,148,128],Mt(54),[112]],44100:[Vn,[255,192],Mt(268),[55,163,128],Mt(84),[112]],32e3:[Vn,[255,192],Mt(268),[55,234],Mt(226),[112]],24e3:[Vn,[255,192],Mt(268),[55,255,128],Mt(268),[111,112],Mt(126),[224]],16e3:[Vn,[255,192],Mt(268),[55,255,128],Mt(268),[111,255],Mt(269),[223,108],Mt(195),[1,192]],12e3:[Cl,Mt(268),[3,127,248],Mt(268),[6,255,240],Mt(268),[13,255,224],Mt(268),[27,253,128],Mt(259),[56]],11025:[Cl,Mt(268),[3,127,248],Mt(268),[6,255,240],Mt(268),[13,255,224],Mt(268),[27,255,192],Mt(268),[55,175,128],Mt(108),[112]],8e3:[Cl,Mt(268),[3,121,16],Mt(47),[7]]},C=c,Wr=Object.keys(C).reduce(function(D,L){return D[L]=new Uint8Array(C[L].reduce(function(X,oe){return X.concat(oe)},[])),D},{})),Wr},xa=di,Us={prefixWithSilence:function(c,C,D,L){var X,oe,ce,ge,Te,Ie=0,Ge=0;if(C.length&&(oe=xa.audioTsToVideoTs(c.baseMediaDecodeTime,c.samplerate),X=Math.ceil(xa.ONE_SECOND_IN_TS/(c.samplerate/1024)),D&&L&&(oe=oe-Math.max(D,L),Ge=(Ie=Math.floor(oe/X))*X),!(Ie<1||Ge>xa.ONE_SECOND_IN_TS/2))){for(ce=(ce=Ag()[c.samplerate])||C[0].data,ge=0;ge<Ie;ge++)Te=C[0],C.splice(0,0,{data:ce,dts:Te.dts-X,pts:Te.pts-X});return c.baseMediaDecodeTime-=Math.floor(xa.videoTsToAudioTs(Ge,c.samplerate)),Ge}},trimAdtsFramesByEarliestDts:function(c,C,D){return C.minSegmentDts>=D?c:(C.minSegmentDts=1/0,c.filter(function(L){return L.dts>=D&&(C.minSegmentDts=Math.min(C.minSegmentDts,L.dts),C.minSegmentPts=C.minSegmentDts,!0)}))},generateSampleTable:function(c){for(var C=[],D=0;D<c.length;D++)C.push({size:c[D].data.byteLength,duration:1024});return C},concatenateFrameData:function(c){for(var C,D=0,L=new Uint8Array(function(oe){for(var ce=0,ge=0;ge<oe.length;ge++)ce+=oe[ge].data.byteLength;return ce}(c)),X=0;X<c.length;X++)L.set((C=c[X]).data,D),D+=C.data.byteLength;return L}},Ig=di.ONE_SECOND_IN_TS,$r={clearDtsInfo:function(c){delete c.minSegmentDts,delete c.maxSegmentDts,delete c.minSegmentPts,delete c.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(c,C){var D=c.minSegmentDts;return C||(D-=c.timelineStartInfo.dts),C=c.timelineStartInfo.baseMediaDecodeTime,C+=D,C=Math.max(0,C),c.type==="audio"&&(C*=c.samplerate/Ig,C=Math.floor(C)),C},collectDtsInfo:function(c,C){typeof C.pts=="number"&&(c.timelineStartInfo.pts===void 0&&(c.timelineStartInfo.pts=C.pts),c.minSegmentPts=c.minSegmentPts===void 0?C.pts:Math.min(c.minSegmentPts,C.pts),c.maxSegmentPts=c.maxSegmentPts===void 0?C.pts:Math.max(c.maxSegmentPts,C.pts)),typeof C.dts=="number"&&(c.timelineStartInfo.dts===void 0&&(c.timelineStartInfo.dts=C.dts),c.minSegmentDts=c.minSegmentDts===void 0?C.dts:Math.min(c.minSegmentDts,C.dts),c.maxSegmentDts=c.maxSegmentDts===void 0?C.dts:Math.max(c.maxSegmentDts,C.dts))}},ka={parseSei:function(c){for(var C=0,D={payloadType:-1,payloadSize:0},L=0,X=0;C<c.byteLength&&c[C]!==128;){for(;c[C]===255;)L+=255,C++;for(L+=c[C++];c[C]===255;)X+=255,C++;if(X+=c[C++],!D.payload&&L===4){if(String.fromCharCode(c[C+3],c[C+4],c[C+5],c[C+6])==="GA94"){D.payloadType=L,D.payloadSize=X,D.payload=c.subarray(C,C+X);break}D.payload=void 0}C+=X,X=L=0}return D},parseUserData:function(c){return c.payload[0]!==181||(c.payload[1]<<8|c.payload[2])!=49||String.fromCharCode(c.payload[3],c.payload[4],c.payload[5],c.payload[6])!=="GA94"||c.payload[7]!==3?null:c.payload.subarray(8,c.payload.length-1)},parseCaptionPackets:function(c,C){var D,L,X,oe,ce=[];if(64&C[0])for(L=31&C[0],D=0;D<L;D++)oe={type:3&C[2+(X=3*D)],pts:c},4&C[2+X]&&(oe.ccData=C[3+X]<<8|C[4+X],ce.push(oe));return ce},discardEmulationPreventionBytes:function(c){for(var C=c.byteLength,D=[],L=1;L<C-2;)c[L]===0&&c[L+1]===0&&c[L+2]===3?(D.push(L+2),L+=2):L++;if(D.length===0)return c;for(var X=C-D.length,oe=new Uint8Array(X),ce=0,L=0;L<X;ce++,L++)ce===D[0]&&(ce++,D.shift()),oe[L]=c[ce];return oe},USER_DATA_REGISTERED_ITU_T_T35:4},Xr=cn,Na=ka,Og=((Ht.prototype=new Xr).push=function(c){var C;c.nalUnitType==="sei_rbsp"&&(C=Na.parseSei(c.escapedRBSP)).payload&&C.payloadType===Na.USER_DATA_REGISTERED_ITU_T_T35&&(C=Na.parseUserData(C))&&(c.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:c.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(C=Na.parseCaptionPackets(c.pts,C),this.captionPackets_=this.captionPackets_.concat(C),this.latestDts_!==c.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=c.dts))},Ht.prototype.flushCCStreams=function(c){this.ccStreams_.forEach(function(C){return c==="flush"?C.flush():C.partialFlush()},this)},Ht.prototype.flushStream=function(c){this.captionPackets_.length&&(this.captionPackets_.forEach(function(C,D){C.presortIndex=D}),this.captionPackets_.sort(function(C,D){return C.pts===D.pts?C.presortIndex-D.presortIndex:C.pts-D.pts}),this.captionPackets_.forEach(function(C){C.type<2?this.dispatchCea608Packet(C):this.dispatchCea708Packet(C)},this),this.captionPackets_.length=0),this.flushCCStreams(c)},Ht.prototype.flush=function(){return this.flushStream("flush")},Ht.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ht.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(c){c.reset()})},Ht.prototype.dispatchCea608Packet=function(c){this.setsTextOrXDSActive(c)?this.activeCea608Channel_[c.type]=null:this.setsChannel1Active(c)?this.activeCea608Channel_[c.type]=0:this.setsChannel2Active(c)&&(this.activeCea608Channel_[c.type]=1),this.activeCea608Channel_[c.type]!==null&&this.ccStreams_[(c.type<<1)+this.activeCea608Channel_[c.type]].push(c)},Ht.prototype.setsChannel1Active=function(c){return(30720&c.ccData)==4096},Ht.prototype.setsChannel2Active=function(c){return(30720&c.ccData)==6144},Ht.prototype.setsTextOrXDSActive=function(c){return(28928&c.ccData)==256||(30974&c.ccData)==4138||(30974&c.ccData)==6186},Ht.prototype.dispatchCea708Packet=function(c){this.parse708captions_&&this.cc708Stream_.push(c)},{127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600}),ai=(an.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},an.prototype.getText=function(){return this.rows.join(`
`)},an.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},an.prototype.newLine=function(c){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(c),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},an.prototype.isEmpty=function(){return this.rows.length===0||this.rows.length===1&&this.rows[0]===""},an.prototype.addText=function(c){this.rows[this.rowIdx]+=c},an.prototype.backspace=function(){var c;this.isEmpty()||(c=this.rows[this.rowIdx],this.rows[this.rowIdx]=c.substr(0,c.length-1))},Mn.prototype.init=function(c,C){this.startPts=c;for(var D=0;D<8;D++)this.windows[D]=new an(D),typeof C=="function"&&(this.windows[D].beforeRowOverflow=C)},Mn.prototype.setCurrentWindow=function(c){this.currentWindow=this.windows[c]},Mn.prototype.createTextDecoder=function(c){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(c)}catch(C){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+c+" encoding. "+C})}},function(c){c=c||{},ai.prototype.init.call(this);var C,D=this,L=c.captionServices||{},X={};Object.keys(L).forEach(oe=>{C=L[oe],/^SERVICE/.test(oe)&&(X[oe]=C.encoding)}),this.serviceEncodings=X,this.current708Packet=null,this.services={},this.push=function(oe){(oe.type===3||D.current708Packet===null)&&D.new708Packet(),D.add708Bytes(oe)}}),Dg=(ai.prototype=new Xr,ai.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},ai.prototype.add708Bytes=function(c){var D=c.ccData,C=D>>>8,D=255&D;this.current708Packet.ptsVals.push(c.pts),this.current708Packet.data.push(C),this.current708Packet.data.push(D)},ai.prototype.push708Packet=function(){var c,C=this.current708Packet,D=C.data,L=null,X=0,oe=D[X++];for(C.seq=oe>>6,C.sizeCode=63&oe;X<D.length;X++)c=31&(oe=D[X++]),(L=oe>>5)===7&&0<c&&(L=D[X++]),this.pushServiceBlock(L,X,c),0<c&&(X+=c-1)},ai.prototype.pushServiceBlock=function(c,C,D){for(var L,X=C,oe=this.current708Packet.data,ce=(ce=this.services[c])||this.initService(c,X);X<C+D&&X<oe.length;X++)L=oe[X],sn(L)?X=this.handleText(X,ce):L===24?X=this.multiByteCharacter(X,ce):L===16?X=this.extendedCommands(X,ce):128<=L&&L<=135?X=this.setCurrentWindow(X,ce):152<=L&&L<=159?X=this.defineWindow(X,ce):L===136?X=this.clearWindows(X,ce):L===140?X=this.deleteWindows(X,ce):L===137?X=this.displayWindows(X,ce):L===138?X=this.hideWindows(X,ce):L===139?X=this.toggleWindows(X,ce):L===151?X=this.setWindowAttributes(X,ce):L===144?X=this.setPenAttributes(X,ce):L===145?X=this.setPenColor(X,ce):L===146?X=this.setPenLocation(X,ce):L===143?ce=this.reset(X,ce):L===8?ce.currentWindow.backspace():L===12?ce.currentWindow.clearText():L===13?ce.currentWindow.pendingNewLine=!0:L===14?ce.currentWindow.clearText():L===141&&X++},ai.prototype.extendedCommands=function(c,C){var D=this.current708Packet.data[++c];return c=sn(D)?this.handleText(c,C,{isExtended:!0}):c},ai.prototype.getPts=function(c){return this.current708Packet.ptsVals[Math.floor(c/2)]},ai.prototype.initService=function(c,C){var D,L="SERVICE"+c,X=this;return L in this.serviceEncodings&&(D=this.serviceEncodings[L]),this.services[c]=new Mn(c,D,X),this.services[c].init(this.getPts(C),function(oe){X.flushDisplayed(oe,X.services[c])}),this.services[c]},ai.prototype.handleText=function(c,C,oe){var L,X=oe&&oe.isExtended,oe=oe&&oe.isMultiByte,ce=this.current708Packet.data,ge=X?4096:0,Te=ce[c],Ie=C.currentWindow;return oe?(L=[Te,ce[c+1]],c++):L=[Te],oe=C.textDecoder_&&!X?C.textDecoder_.decode(new Uint8Array(L)):oe?(ce=L.map(Ge=>("0"+(255&Ge).toString(16)).slice(-2)).join(""),String.fromCharCode(parseInt(ce,16))):(C=Og[X=ge|Te]||X,4096&X&&X===C?"":String.fromCharCode(C)),Ie.pendingNewLine&&!Ie.isEmpty()&&Ie.newLine(this.getPts(c)),Ie.pendingNewLine=!1,Ie.addText(oe),c},ai.prototype.multiByteCharacter=function(c,C){var D=this.current708Packet.data,L=D[c+1];return c=sn(L)&&sn(D[c+2])?this.handleText(++c,C,{isMultiByte:!0}):c},ai.prototype.setCurrentWindow=function(c,C){var D=this.current708Packet.data[c];return C.setCurrentWindow(7&D),c},ai.prototype.defineWindow=function(c,L){var D=this.current708Packet.data,X=D[c],L=(L.setCurrentWindow(7&X),L.currentWindow),X=D[++c];return L.visible=(32&X)>>5,L.rowLock=(16&X)>>4,L.columnLock=(8&X)>>3,L.priority=7&X,X=D[++c],L.relativePositioning=(128&X)>>7,L.anchorVertical=127&X,X=D[++c],L.anchorHorizontal=X,X=D[++c],L.anchorPoint=(240&X)>>4,L.rowCount=15&X,X=D[++c],L.columnCount=63&X,X=D[++c],L.windowStyle=(56&X)>>3,L.penStyle=7&X,L.virtualRowCount=L.rowCount+1,c},ai.prototype.setWindowAttributes=function(c,L){var D=this.current708Packet.data,L=(D[c],L.currentWindow.winAttr),X=D[++c];return L.fillOpacity=(192&X)>>6,L.fillRed=(48&X)>>4,L.fillGreen=(12&X)>>2,L.fillBlue=3&X,X=D[++c],L.borderType=(192&X)>>6,L.borderRed=(48&X)>>4,L.borderGreen=(12&X)>>2,L.borderBlue=3&X,X=D[++c],L.borderType+=(128&X)>>5,L.wordWrap=(64&X)>>6,L.printDirection=(48&X)>>4,L.scrollDirection=(12&X)>>2,L.justify=3&X,X=D[++c],L.effectSpeed=(240&X)>>4,L.effectDirection=(12&X)>>2,L.displayEffect=3&X,c},ai.prototype.flushDisplayed=function(c,C){for(var D=[],L=0;L<8;L++)C.windows[L].visible&&!C.windows[L].isEmpty()&&D.push(C.windows[L].getText());C.endPts=c,C.text=D.join(`

`),this.pushCaption(C),C.startPts=c},ai.prototype.pushCaption=function(c){c.text!==""&&(this.trigger("data",{startPts:c.startPts,endPts:c.endPts,text:c.text,stream:"cc708_"+c.serviceNum}),c.text="",c.startPts=c.endPts)},ai.prototype.displayWindows=function(c,C){var D=this.current708Packet.data[++c],L=this.getPts(c);this.flushDisplayed(L,C);for(var X=0;X<8;X++)D&1<<X&&(C.windows[X].visible=1);return c},ai.prototype.hideWindows=function(c,C){var D=this.current708Packet.data[++c],L=this.getPts(c);this.flushDisplayed(L,C);for(var X=0;X<8;X++)D&1<<X&&(C.windows[X].visible=0);return c},ai.prototype.toggleWindows=function(c,C){var D=this.current708Packet.data[++c],L=this.getPts(c);this.flushDisplayed(L,C);for(var X=0;X<8;X++)D&1<<X&&(C.windows[X].visible^=1);return c},ai.prototype.clearWindows=function(c,C){var D=this.current708Packet.data[++c],L=this.getPts(c);this.flushDisplayed(L,C);for(var X=0;X<8;X++)D&1<<X&&C.windows[X].clearText();return c},ai.prototype.deleteWindows=function(c,C){var D=this.current708Packet.data[++c],L=this.getPts(c);this.flushDisplayed(L,C);for(var X=0;X<8;X++)D&1<<X&&C.windows[X].reset();return c},ai.prototype.setPenAttributes=function(c,L){var D=this.current708Packet.data,L=(D[c],L.currentWindow.penAttr),X=D[++c];return L.textTag=(240&X)>>4,L.offset=(12&X)>>2,L.penSize=3&X,X=D[++c],L.italics=(128&X)>>7,L.underline=(64&X)>>6,L.edgeType=(56&X)>>3,L.fontStyle=7&X,c},ai.prototype.setPenColor=function(c,L){var D=this.current708Packet.data,L=(D[c],L.currentWindow.penColor),X=D[++c];return L.fgOpacity=(192&X)>>6,L.fgRed=(48&X)>>4,L.fgGreen=(12&X)>>2,L.fgBlue=3&X,X=D[++c],L.bgOpacity=(192&X)>>6,L.bgRed=(48&X)>>4,L.bgGreen=(12&X)>>2,L.bgBlue=3&X,X=D[++c],L.edgeRed=(48&X)>>4,L.edgeGreen=(12&X)>>2,L.edgeBlue=3&X,c},ai.prototype.setPenLocation=function(c,C){var D=this.current708Packet.data,L=(D[c],C.currentWindow.penLoc);return C.currentWindow.pendingNewLine=!0,C=D[++c],L.row=15&C,C=D[++c],L.column=63&C,c},ai.prototype.reset=function(c,C){var D=this.getPts(c);return this.flushDisplayed(D,C),this.initService(C.serviceNum,c)},{42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496}),Aa=14,Pg=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],mi=function(c,C){mi.prototype.init.call(this),this.field_=c||0,this.dataChannel_=C||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(D){var L,X,oe,ce,ge=32639&D.ccData;ge===this.lastControlCode_?this.lastControlCode_=null:((61440&ge)==4096?this.lastControlCode_=ge:ge!==this.PADDING_&&(this.lastControlCode_=null),L=ge>>>8,X=255&ge,ge!==this.PADDING_&&(ge===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":ge===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(D.pts),this.flushDisplayed(D.pts),ce=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=ce,this.startPts_=D.pts):ge===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(D.pts)):ge===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(D.pts)):ge===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(D.pts)):ge===this.CARRIAGE_RETURN_?(this.clearFormatting(D.pts),this.flushDisplayed(D.pts),this.shiftRowsUp_(),this.startPts_=D.pts):ge===this.BACKSPACE_?this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1):ge===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(D.pts),this.displayed_=li()):ge===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=li():ge===this.RESUME_DIRECT_CAPTIONING_?(this.mode_!=="paintOn"&&(this.flushDisplayed(D.pts),this.displayed_=li()),this.mode_="paintOn",this.startPts_=D.pts):this.isSpecialCharacter(L,X)?(oe=ur((L=(3&L)<<8)|X),this[this.mode_](D.pts,oe),this.column_++):this.isExtCharacter(L,X)?(this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),oe=ur((L=(3&L)<<8)|X),this[this.mode_](D.pts,oe),this.column_++):this.isMidRowCode(L,X)?(this.clearFormatting(D.pts),this[this.mode_](D.pts," "),this.column_++,(14&X)==14&&this.addFormatting(D.pts,["i"]),(1&X)==1&&this.addFormatting(D.pts,["u"])):this.isOffsetControlCode(L,X)?(this.nonDisplayed_[this.row_].offset=ce=3&X,this.column_+=ce):this.isPAC(L,X)?(ce=Pg.indexOf(7968&ge),this.mode_==="rollUp"&&(ce-this.rollUpRows_+1<0&&(ce=this.rollUpRows_-1),this.setRollUp(D.pts,ce)),ce!==this.row_&&0<=ce&&ce<=14&&(this.clearFormatting(D.pts),this.row_=ce),1&X&&this.formatting_.indexOf("u")===-1&&this.addFormatting(D.pts,["u"]),(16&ge)==16&&(this.column_=4*(ce=(14&ge)>>1),this.nonDisplayed_[this.row_].indent+=ce),this.isColorPAC(X)&&(14&X)==14&&this.addFormatting(D.pts,["i"])):this.isNormalChar(L)&&(X===0&&(X=null),oe=ur(L),oe+=ur(X),this[this.mode_](D.pts,oe),this.column_+=oe.length)))}},Xr=(mi.prototype=new Xr,mi.prototype.flushDisplayed=function(c){let C=L=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+L+"."})},D=[];this.displayed_.forEach((L,X)=>{if(L&&L.text&&L.text.length){try{L.text=L.text.trim()}catch{C(X)}L.text.length&&D.push({text:L.text,line:X+1,position:10+Math.min(70,10*L.indent)+2.5*L.offset})}else L==null&&C(X)}),D.length&&this.trigger("data",{startPts:this.startPts_,endPts:c,content:D,stream:this.name_})},mi.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=li(),this.nonDisplayed_=li(),this.lastControlCode_=null,this.column_=0,this.row_=Aa,this.rollUpRows_=2,this.formatting_=[]},mi.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},mi.prototype.isSpecialCharacter=function(c,C){return c===this.EXT_&&48<=C&&C<=63},mi.prototype.isExtCharacter=function(c,C){return(c===this.EXT_+1||c===this.EXT_+2)&&32<=C&&C<=63},mi.prototype.isMidRowCode=function(c,C){return c===this.EXT_&&32<=C&&C<=47},mi.prototype.isOffsetControlCode=function(c,C){return c===this.OFFSET_&&33<=C&&C<=35},mi.prototype.isPAC=function(c,C){return c>=this.BASE_&&c<this.BASE_+8&&64<=C&&C<=127},mi.prototype.isColorPAC=function(c){return 64<=c&&c<=79||96<=c&&c<=127},mi.prototype.isNormalChar=function(c){return 32<=c&&c<=127},mi.prototype.setRollUp=function(c,C){if(this.mode_!=="rollUp"&&(this.row_=Aa,this.mode_="rollUp",this.flushDisplayed(c),this.nonDisplayed_=li(),this.displayed_=li()),C!==void 0&&C!==this.row_)for(var D=0;D<this.rollUpRows_;D++)this.displayed_[C-D]=this.displayed_[this.row_-D],this.displayed_[this.row_-D]={text:"",indent:0,offset:0};C===void 0&&(C=this.row_),this.topRow_=C-this.rollUpRows_+1},mi.prototype.addFormatting=function(c,C){this.formatting_=this.formatting_.concat(C),C=C.reduce(function(D,L){return D+"<"+L+">"},""),this[this.mode_](c,C)},mi.prototype.clearFormatting=function(c){var C;this.formatting_.length&&(C=this.formatting_.reverse().reduce(function(D,L){return D+"</"+L+">"},""),this.formatting_=[],this[this.mode_](c,C))},mi.prototype.popOn=function(c,C){var D=this.nonDisplayed_[this.row_].text;this.nonDisplayed_[this.row_].text=D+=C},mi.prototype.rollUp=function(c,C){var D=this.displayed_[this.row_].text;this.displayed_[this.row_].text=D+=C},mi.prototype.shiftRowsUp_=function(){for(var c=0;c<this.topRow_;c++)this.displayed_[c]={text:"",indent:0,offset:0};for(c=this.row_+1;c<Aa+1;c++)this.displayed_[c]={text:"",indent:0,offset:0};for(c=this.topRow_;c<this.row_;c++)this.displayed_[c]=this.displayed_[c+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},mi.prototype.paintOn=function(c,C){var D=this.displayed_[this.row_].text;this.displayed_[this.row_].text=D+=C},{CaptionStream:Ht,Cea608Stream:mi,Cea708Stream:ai}),Ia={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},An=cn,Rg=8589934592,Lg=4294967296;Ns.prototype=new An;function Nh(c,C,D){for(var L="",X=C;X<D;X++)L+="%"+("00"+c[X].toString(16)).slice(-2);return L}function As(c,C,D){return decodeURIComponent(Nh(c,C,D))}function Is(c,C,D){return unescape(Nh(c,C,D))}function Os(c){return c[0]<<21|c[1]<<14|c[2]<<7|c[3]}var Oa,xl,Da,An=Ns,Mg=Vr,Pa=(c,C,D)=>{if(c){for(var L=D;L<c.length;L++)if(c[L]===C)return L}return-1},Ra=3,Ds={APIC:function(c){var C,D=1;c.data[0]!==Ra||(C=Pa(c.data,0,1))<0||(c.mimeType=Is(c.data,1,C),c.pictureType=c.data[D=C+1],(C=Pa(c.data,0,++D))<0)||(c.description=As(c.data,D,C),D=C+1,c.mimeType==="-->"?c.url=Is(c.data,D,c.data.length):c.pictureData=c.data.subarray(D,c.data.length))},"T*":function(c){c.data[0]===Ra&&(c.value=As(c.data,1,c.data.length).replace(/\0*$/,""),c.values=c.value.split("\0"))},TXXX:function(c){var C;c.data[0]===Ra&&(C=Pa(c.data,0,1))!==-1&&(c.description=As(c.data,1,C),c.value=As(c.data,C+1,c.data.length).replace(/\0*$/,""),c.data=c.value)},"W*":function(c){c.url=Is(c.data,0,c.data.length).replace(/\0.*$/,"")},WXXX:function(c){var C;c.data[0]===Ra&&(C=Pa(c.data,0,1))!==-1&&(c.description=As(c.data,1,C),c.url=Is(c.data,C+1,c.data.length).replace(/\0.*$/,""))},PRIV:function(c){for(var C=0;C<c.data.length;C++)if(c.data[C]===0){c.owner=Is(c.data,0,C);break}c.privateData=c.data.subarray(C+1),c.data=c.privateData}},Ah={parseId3Frames:function(c){var C,D=10,L=0,X=[];if(!(c.length<10||c[0]!==73||c[1]!==68||c[2]!==51)){L=Os(c.subarray(6,10)),L+=10,64&c[5]&&(D=(D+=4)+Os(c.subarray(10,14)),L-=Os(c.subarray(16,20)));do{if((C=Os(c.subarray(D+4,D+8)))<1)break;var oe={id:String.fromCharCode(c[D],c[D+1],c[D+2],c[D+3]),data:c.subarray(D+10,D+C+10)}}while(oe.key=oe.id,Ds[oe.id]?Ds[oe.id](oe):oe.id[0]==="T"?Ds["T*"](oe):oe.id[0]==="W"&&Ds["W*"](oe),X.push(oe),(D=D+10+C)<L);return X}},parseSyncSafeInteger:Os,frameParsers:Ds},Nn=cn,Ug=Ia,Wn=Ah,kl=function(c){var C,D={descriptor:c&&c.descriptor},L=0,X=[],oe=0;if(kl.prototype.init.call(this),this.dispatchType=Ug.METADATA_STREAM_TYPE.toString(16),D.descriptor)for(C=0;C<D.descriptor.length;C++)this.dispatchType+=("00"+D.descriptor[C].toString(16)).slice(-2);this.push=function(ce){var ge,Te,Ie,Ge,it,Tt,Nt;if(ce.type==="timed-metadata"){if(ce.dataAlignmentIndicator&&(oe=0,X.length=0),X.length===0&&(ce.data.length<10||ce.data[0]!==73||ce.data[1]!==68||ce.data[2]!==51))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(X.push(ce),oe+=ce.data.byteLength,X.length===1&&(L=Wn.parseSyncSafeInteger(ce.data.subarray(6,10)),L+=10),!(oe<L)){for(ge={data:new Uint8Array(L),frames:[],pts:X[0].pts,dts:X[0].dts},Ge=0;Ge<L;)ge.data.set(X[0].data.subarray(0,L-Ge),Ge),Ge+=X[0].data.byteLength,oe-=X[0].data.byteLength,X.shift();Te=10,64&ge.data[5]&&(Te=(Te+=4)+Wn.parseSyncSafeInteger(ge.data.subarray(10,14)),L-=Wn.parseSyncSafeInteger(ge.data.subarray(16,20)));do if((Ie=Wn.parseSyncSafeInteger(ge.data.subarray(Te+4,Te+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}while((Nt={id:String.fromCharCode(ge.data[Te],ge.data[Te+1],ge.data[Te+2],ge.data[Te+3]),data:ge.data.subarray(Te+10,Te+Ie+10)}).key=Nt.id,Wn.frameParsers[Nt.id]?Wn.frameParsers[Nt.id](Nt):Nt.id[0]==="T"?Wn.frameParsers["T*"](Nt):Nt.id[0]==="W"&&Wn.frameParsers["W*"](Nt),Nt.owner==="com.apple.streaming.transportStreamTimestamp"&&(Tt=(1&(it=Nt.data)[3])<<30|it[4]<<22|it[5]<<14|it[6]<<6|it[7]>>>2,Nt.timeStamp=Tt=(Tt*=4)+(3&it[7]),ge.pts===void 0&&ge.dts===void 0&&(ge.pts=Nt.timeStamp,ge.dts=Nt.timeStamp),this.trigger("timestamp",Nt)),ge.frames.push(Nt),(Te=Te+10+Ie)<L);this.trigger("data",ge)}}}},Nn=(kl.prototype=new Nn,kl),dr=cn,Gn=Xr,gn=Ia,Nl=function(){var c=new Uint8Array(188),C=0;Nl.prototype.init.call(this),this.push=function(D){var L,X=0,oe=188;for(C?((L=new Uint8Array(D.byteLength+C)).set(c.subarray(0,C)),L.set(D,C),C=0):L=D;oe<L.byteLength;)L[X]===71&&L[oe]===71?(this.trigger("data",L.subarray(X,oe)),X+=188,oe+=188):(X++,oe++);X<L.byteLength&&(c.set(L.subarray(X),0),C=L.byteLength-X)},this.flush=function(){C===188&&c[0]===71&&(this.trigger("data",c),C=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){C=0,this.trigger("reset")}},Ih=(Nl.prototype=new dr,(Oa=function(){var c,C,D,L;Oa.prototype.init.call(this),(L=this).packetsWaitingForPmt=[],this.programMapTable=void 0,c=function(X,oe){var ce=0;oe.payloadUnitStartIndicator&&(ce+=X[ce]+1),(oe.type==="pat"?C:D)(X.subarray(ce),oe)},C=function(X,oe){oe.section_number=X[7],oe.last_section_number=X[8],L.pmtPid=(31&X[10])<<8|X[11],oe.pmtPid=L.pmtPid},D=function(X,oe){var ce,ge;if(1&X[5]){for(L.programMapTable={video:null,audio:null,"timed-metadata":{}},ce=3+((15&X[1])<<8|X[2])-4,ge=12+((15&X[10])<<8|X[11]);ge<ce;){var Te=X[ge],Ie=(31&X[ge+1])<<8|X[ge+2];Te===gn.H264_STREAM_TYPE&&L.programMapTable.video===null?L.programMapTable.video=Ie:Te===gn.ADTS_STREAM_TYPE&&L.programMapTable.audio===null?L.programMapTable.audio=Ie:Te===gn.METADATA_STREAM_TYPE&&(L.programMapTable["timed-metadata"][Ie]=Te),ge+=5+((15&X[ge+3])<<8|X[ge+4])}oe.programMapTable=L.programMapTable}},this.push=function(X){var oe={},ce=4;if(oe.payloadUnitStartIndicator=!!(64&X[1]),oe.pid=31&X[1],oe.pid<<=8,oe.pid|=X[2],1<(48&X[3])>>>4&&(ce+=X[ce]+1),oe.pid===0)oe.type="pat",c(X.subarray(ce),oe),this.trigger("data",oe);else if(oe.pid===this.pmtPid)for(oe.type="pmt",c(X.subarray(ce),oe),this.trigger("data",oe);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([X,ce,oe]):this.processPes_(X,ce,oe)},this.processPes_=function(X,oe,ce){ce.pid===this.programMapTable.video?ce.streamType=gn.H264_STREAM_TYPE:ce.pid===this.programMapTable.audio?ce.streamType=gn.ADTS_STREAM_TYPE:ce.streamType=this.programMapTable["timed-metadata"][ce.pid],ce.type="pes",ce.data=X.subarray(oe),this.trigger("data",ce)}}).prototype=new dr,Oa.STREAM_TYPES={h264:27,adts:15},(xl=function(){function c(Te,Ie,Ge){var it,Tt=new Uint8Array(Te.size),Nt={type:Ie},Dt=0,Di=0;if(Te.data.length&&!(Te.size<9)){for(Nt.trackId=Te.data[0].pid,Dt=0;Dt<Te.data.length;Dt++)it=Te.data[Dt],Tt.set(it.data,Di),Di+=it.data.byteLength;ge(Tt,Nt),Ie=Ie==="video"||Nt.packetLength<=Te.size,(Ge||Ie)&&(Te.size=0,Te.data.length=0),Ie&&D.trigger("data",Nt)}}var C,D=this,L=!1,X={data:[],size:0},oe={data:[],size:0},ce={data:[],size:0},ge=function(Te,Ie){var Ge=Te[0]<<16|Te[1]<<8|Te[2];Ie.data=new Uint8Array,Ge==1&&(Ie.packetLength=6+(Te[4]<<8|Te[5]),Ie.dataAlignmentIndicator=(4&Te[6])!=0,192&(Ge=Te[7])&&(Ie.pts=(14&Te[9])<<27|(255&Te[10])<<20|(254&Te[11])<<12|(255&Te[12])<<5|(254&Te[13])>>>3,Ie.pts*=4,Ie.pts+=(6&Te[13])>>>1,Ie.dts=Ie.pts,64&Ge)&&(Ie.dts=(14&Te[14])<<27|(255&Te[15])<<20|(254&Te[16])<<12|(255&Te[17])<<5|(254&Te[18])>>>3,Ie.dts*=4,Ie.dts+=(6&Te[18])>>>1),Ie.data=Te.subarray(9+Te[8]))};xl.prototype.init.call(this),this.push=function(Te){({pat:function(){},pes:function(){var Ie,Ge;switch(Te.streamType){case gn.H264_STREAM_TYPE:Ie=X,Ge="video";break;case gn.ADTS_STREAM_TYPE:Ie=oe,Ge="audio";break;case gn.METADATA_STREAM_TYPE:Ie=ce,Ge="timed-metadata";break;default:return}Te.payloadUnitStartIndicator&&c(Ie,Ge,!0),Ie.data.push(Te),Ie.size+=Te.data.byteLength},pmt:function(){var Ie={type:"metadata",tracks:[]};(C=Te.programMapTable).video!==null&&Ie.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+C.video,codec:"avc",type:"video"}),C.audio!==null&&Ie.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+C.audio,codec:"adts",type:"audio"}),L=!0,D.trigger("data",Ie)}})[Te.type]()},this.reset=function(){X.size=0,X.data.length=0,oe.size=0,oe.data.length=0,this.trigger("reset")},this.flushStreams_=function(){c(X,"video"),c(oe,"audio"),c(ce,"timed-metadata")},this.flush=function(){var Te;!L&&C&&(Te={type:"metadata",tracks:[]},C.video!==null&&Te.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+C.video,codec:"avc",type:"video"}),C.audio!==null&&Te.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+C.audio,codec:"adts",type:"audio"}),D.trigger("data",Te)),L=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new dr,{PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Nl,TransportParseStream:Oa,ElementaryStream:xl,TimestampRolloverStream:An,CaptionStream:Gn.CaptionStream,Cea608Stream:Gn.Cea608Stream,Cea708Stream:Gn.Cea708Stream,MetadataStream:Nn});for(Da in gn)gn.hasOwnProperty(Da)&&(Ih[Da]=gn[Da]);var Al,Oh,dr=Ih,An=cn,Fg=di.ONE_SECOND_IN_TS,Dh=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Il=function(c){var C,D=0;Il.prototype.init.call(this),this.skipWarn_=function(L,X){this.trigger("log",{level:"warn",message:`adts skiping bytes ${L} to ${X} in frame ${D} outside syncword`})},this.push=function(L){var X,oe,ce,ge,Te,Ie,Ge=0;if(c||(D=0),L.type==="audio"){for(C&&C.length?(ce=C,(C=new Uint8Array(ce.byteLength+L.data.byteLength)).set(ce),C.set(L.data,ce.byteLength)):C=L.data;Ge+7<C.length;)if(C[Ge]!==255||(246&C[Ge+1])!=240)typeof Ie!="number"&&(Ie=Ge),Ge++;else{if(typeof Ie=="number"&&(this.skipWarn_(Ie,Ge),Ie=null),oe=2*(1&~C[Ge+1]),X=(3&C[Ge+3])<<11|C[Ge+4]<<3|(224&C[Ge+5])>>5,Te=(ge=1024*(1+(3&C[Ge+6])))*Fg/Dh[(60&C[Ge+2])>>>2],C.byteLength-Ge<X)break;this.trigger("data",{pts:L.pts+D*Te,dts:L.dts+D*Te,sampleCount:ge,audioobjecttype:1+(C[Ge+2]>>>6&3),channelcount:(1&C[Ge+2])<<2|(192&C[Ge+3])>>>6,samplerate:Dh[(60&C[Ge+2])>>>2],samplingfrequencyindex:(60&C[Ge+2])>>>2,samplesize:16,data:C.subarray(Ge+7+oe,Ge+X)}),D++,Ge+=X}typeof Ie=="number"&&(this.skipWarn_(Ie,Ge),Ie=null),C=C.subarray(Ge)}},this.flush=function(){D=0,this.trigger("done")},this.reset=function(){C=void 0,this.trigger("reset")},this.endTimeline=function(){C=void 0,this.trigger("endedtimeline")}},Gn=(Il.prototype=new An,Il),Nn=cn,Bg=function(c){var C=c.byteLength,D=0,L=0;this.length=function(){return 8*C},this.bitsAvailable=function(){return 8*C+L},this.loadWord=function(){var X=c.byteLength-C,oe=new Uint8Array(4),ce=Math.min(4,C);if(ce===0)throw new Error("no bytes available");oe.set(c.subarray(X,X+ce)),D=new DataView(oe.buffer).getUint32(0),L=8*ce,C-=ce},this.skipBits=function(X){var oe;X<L||(X=(X-=L)-8*(oe=Math.floor(X/8)),C-=oe,this.loadWord()),D<<=X,L-=X},this.readBits=function(X){var oe=Math.min(L,X),ce=D>>>32-oe;return 0<(L-=oe)?D<<=oe:0<C&&this.loadWord(),0<(oe=X-oe)?ce<<oe|this.readBits(oe):ce},this.skipLeadingZeros=function(){for(var X=0;X<L;++X)if(D&2147483648>>>X)return D<<=X,L-=X,X;return this.loadWord(),X+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var X=this.skipLeadingZeros();return this.readBits(X+1)-1},this.readExpGolomb=function(){var X=this.readUnsignedExpGolomb();return 1&X?1+X>>>1:-1*(X>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},Ol=function(){var c,C,D=0;Ol.prototype.init.call(this),this.push=function(L){for(var X,oe=(C=C?((X=new Uint8Array(C.byteLength+L.data.byteLength)).set(C),X.set(L.data,C.byteLength),X):L.data).byteLength;D<oe-3;D++)if(C[D+2]===1){c=D+5;break}for(;c<oe;)switch(C[c]){case 0:if(C[c-1]!==0)c+=2;else if(C[c-2]!==0)c++;else{for(D+3!==c-2&&this.trigger("data",C.subarray(D+3,c-2));C[++c]!==1&&c<oe;);D=c-2,c+=3}break;case 1:C[c-1]!==0||C[c-2]!==0||(this.trigger("data",C.subarray(D+3,c-2)),D=c-2),c+=3;break;default:c+=3}C=C.subarray(D),c-=D,D=0},this.reset=function(){C=null,D=0,this.trigger("reset")},this.flush=function(){C&&3<C.byteLength&&this.trigger("data",C.subarray(D+3)),C=null,D=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};Ol.prototype=new Nn,Oh={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Al=function(){var c,C,D,L,X,oe,ce,ge=new Ol;Al.prototype.init.call(this),(c=this).push=function(Te){Te.type==="video"&&(C=Te.trackId,D=Te.pts,L=Te.dts,ge.push(Te))},ge.on("data",function(Te){var Ie={trackId:C,pts:D,dts:L,data:Te,nalUnitTypeCode:31&Te[0]};switch(Ie.nalUnitTypeCode){case 5:Ie.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Ie.nalUnitType="sei_rbsp",Ie.escapedRBSP=X(Te.subarray(1));break;case 7:Ie.nalUnitType="seq_parameter_set_rbsp",Ie.escapedRBSP=X(Te.subarray(1)),Ie.config=oe(Ie.escapedRBSP);break;case 8:Ie.nalUnitType="pic_parameter_set_rbsp";break;case 9:Ie.nalUnitType="access_unit_delimiter_rbsp"}c.trigger("data",Ie)}),ge.on("done",function(){c.trigger("done")}),ge.on("partialdone",function(){c.trigger("partialdone")}),ge.on("reset",function(){c.trigger("reset")}),ge.on("endedtimeline",function(){c.trigger("endedtimeline")}),this.flush=function(){ge.flush()},this.partialFlush=function(){ge.partialFlush()},this.reset=function(){ge.reset()},this.endTimeline=function(){ge.endTimeline()},ce=function(Te,Ie){for(var Ge=8,it=8,Tt=0;Tt<Te;Tt++)Ge=(it=it!==0?(Ge+Ie.readExpGolomb()+256)%256:it)===0?Ge:it},X=function(Te){for(var Ie=Te.byteLength,Ge=[],it=1;it<Ie-2;)Te[it]===0&&Te[it+1]===0&&Te[it+2]===3?(Ge.push(it+2),it+=2):it++;if(Ge.length===0)return Te;for(var Tt=Ie-Ge.length,Nt=new Uint8Array(Tt),Dt=0,it=0;it<Tt;Dt++,it++)Dt===Ge[0]&&(Dt++,Ge.shift()),Nt[it]=Te[Dt];return Nt},oe=function(Ha){var Ie,Ge,it,Tt,Nt,Dt,Di=0,Fn=0,Kn=0,Zr=0,gi=[1,1],Bt=new Bg(Ha),Ha=Bt.readUnsignedByte(),wy=Bt.readUnsignedByte(),Ey=Bt.readUnsignedByte();if(Bt.skipUnsignedExpGolomb(),Oh[Ha]&&((Ge=Bt.readUnsignedExpGolomb())===3&&Bt.skipBits(1),Bt.skipUnsignedExpGolomb(),Bt.skipUnsignedExpGolomb(),Bt.skipBits(1),Bt.readBoolean()))for(Nt=Ge!==3?8:12,Dt=0;Dt<Nt;Dt++)Bt.readBoolean()&&ce(Dt<6?16:64,Bt);if(Bt.skipUnsignedExpGolomb(),(Ge=Bt.readUnsignedExpGolomb())===0)Bt.readUnsignedExpGolomb();else if(Ge===1)for(Bt.skipBits(1),Bt.skipExpGolomb(),Bt.skipExpGolomb(),Ie=Bt.readUnsignedExpGolomb(),Dt=0;Dt<Ie;Dt++)Bt.skipExpGolomb();if(Bt.skipUnsignedExpGolomb(),Bt.skipBits(1),Ge=Bt.readUnsignedExpGolomb(),it=Bt.readUnsignedExpGolomb(),(Tt=Bt.readBits(1))===0&&Bt.skipBits(1),Bt.skipBits(1),Bt.readBoolean()&&(Di=Bt.readUnsignedExpGolomb(),Fn=Bt.readUnsignedExpGolomb(),Kn=Bt.readUnsignedExpGolomb(),Zr=Bt.readUnsignedExpGolomb()),Bt.readBoolean()&&Bt.readBoolean()){switch(Bt.readUnsignedByte()){case 1:gi=[1,1];break;case 2:gi=[12,11];break;case 3:gi=[10,11];break;case 4:gi=[16,11];break;case 5:gi=[40,33];break;case 6:gi=[24,11];break;case 7:gi=[20,11];break;case 8:gi=[32,11];break;case 9:gi=[80,33];break;case 10:gi=[18,11];break;case 11:gi=[15,11];break;case 12:gi=[64,33];break;case 13:gi=[160,99];break;case 14:gi=[4,3];break;case 15:gi=[3,2];break;case 16:gi=[2,1];break;case 255:gi=[Bt.readUnsignedByte()<<8|Bt.readUnsignedByte(),Bt.readUnsignedByte()<<8|Bt.readUnsignedByte()]}gi&&(gi[0],gi[1])}return{profileIdc:Ha,levelIdc:Ey,profileCompatibility:wy,width:16*(Ge+1)-2*Di-2*Fn,height:(2-Tt)*(it+1)*16-2*Kn-2*Zr,sarRatio:gi}}}).prototype=new Nn;function Ph(c){return c[0]<<21|c[1]<<14|c[2]<<7|c[3]}var An=Al,zg=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Rh=function(c,C){var D=0<=(D=c[C+6]<<21|c[C+7]<<14|c[C+8]<<7|c[C+9])?D:0;return(16&c[C+5])>>4?20+D:10+D},Lh=function(c,C){return c.length-C<10||c[C]!==73||c[C+1]!==68||c[C+2]!==51?C:(C+=Rh(c,C),Lh(c,C))},jg=function(c,C,D){for(var L="",X=C;X<D;X++)L+="%"+("00"+c[X].toString(16)).slice(-2);return L},Nn={isLikelyAacData:function(c){var C=Lh(c,0);return c.length>=C+2&&(255&c[C])==255&&(240&c[C+1])==240&&(22&c[C+1])==16},parseId3TagSize:Rh,parseAdtsSize:function(c,C){var D=(224&c[C+5])>>5;return 6144&c[C+3]|c[C+4]<<3|D},parseType:function(c,C){return c[C]===73&&c[C+1]===68&&c[C+2]===51?"timed-metadata":!0&c[C]&&(240&c[C+1])==240?"audio":null},parseSampleRate:function(c){for(var C=0;C+5<c.length;){if(c[C]===255&&(246&c[C+1])==240)return zg[(60&c[C+2])>>>2];C++}return null},parseAacTimestamp:function(c){var C,D=10;64&c[5]&&(D=(D+=4)+Ph(c.subarray(10,14)));do{if((C=Ph(c.subarray(D+4,D+8)))<1)return null;if(String.fromCharCode(c[D],c[D+1],c[D+2],c[D+3])==="PRIV"){for(var L,X,oe=c.subarray(D+10,D+C+10),ce=0;ce<oe.byteLength;ce++)if(oe[ce]===0){if(unescape(jg(oe,0,ce))==="com.apple.streaming.transportStreamTimestamp")return X=(1&(L=oe.subarray(ce+1))[3])<<30|L[4]<<22|L[5]<<14|L[6]<<6|L[7]>>>2,(X*=4)+(3&L[7]);break}}}while((D=D+10+C)<c.byteLength);return null}},Gr=cn,Mh=Nn,Dl=function(){var c=new Uint8Array,C=0;Dl.prototype.init.call(this),this.setTimestamp=function(D){C=D},this.push=function(D){var L,X,oe=0,ce=0;for(c.length?(X=c.length,(c=new Uint8Array(D.byteLength+X)).set(c.subarray(0,X)),c.set(D,X)):c=D;3<=c.length-ce;)if(c[ce]===73&&c[ce+1]===68&&c[ce+2]===51){if(c.length-ce<10||ce+(oe=Mh.parseId3TagSize(c,ce))>c.length)break;L={type:"timed-metadata",data:c.subarray(ce,ce+oe)},this.trigger("data",L),ce+=oe}else if((255&c[ce])==255&&(240&c[ce+1])==240){if(c.length-ce<7||ce+(oe=Mh.parseAdtsSize(c,ce))>c.length)break;L={type:"audio",data:c.subarray(ce,ce+oe),pts:C,dts:C},this.trigger("data",L),ce+=oe}else ce++;c=0<c.length-ce?c.subarray(ce):new Uint8Array},this.reset=function(){c=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){c=new Uint8Array,this.trigger("endedtimeline")}};Dl.prototype=new Gr;function Uh(c,C){for(var D=Object.keys(C),L=0;L<D.length;L++){var X=D[L];X!=="headOfPipeline"&&C[X].on&&C[X].on("log",Xg.bind(c,X))}}function Fh(c,C){var D;if(c.length===C.length){for(D=0;D<c.length;D++)if(c[D]!==C[D])return;return 1}}function Bh(c,C,D,L,X,oe){return{start:{dts:c,pts:c+(D-C)},end:{dts:c+(L-C),pts:c+(X-D)},prependedContentDuration:oe,baseMediaDecodeTime:c}}var Pl,Rl,Ps,Gr=cn,Rs=wl,Ls=El,La=Us,yn=$r,Un=dr,Ma=di,zh=Gn,Hg=An,qg=Dl,Vg=Nn.isLikelyAacData,Wg=di.ONE_SECOND_IN_TS,jh=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Hh=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Xg=function(c,C){C.stream=c,this.trigger("log",C)},Ua=function(c,C){var D=[],L=0,X=0,oe=1/0,ce=(C=C||{}).firstSequenceNumber||0;Ua.prototype.init.call(this),this.push=function(ge){yn.collectDtsInfo(c,ge),c&&jh.forEach(function(Te){c[Te]=ge[Te]}),D.push(ge)},this.setEarliestDts=function(ge){L=ge},this.setVideoBaseMediaDecodeTime=function(ge){oe=ge},this.setAudioAppendStart=function(ge){X=ge},this.flush=function(){var ge,Te,Ie,Ge,it;D.length!==0&&(ge=La.trimAdtsFramesByEarliestDts(D,c,L),c.baseMediaDecodeTime=yn.calculateTrackBaseMediaDecodeTime(c,C.keepOriginalTimestamps),it=La.prefixWithSilence(c,ge,X,oe),c.samples=La.generateSampleTable(ge),Ie=Rs.mdat(La.concatenateFrameData(ge)),D=[],Ge=Rs.moof(ce,[c]),Te=new Uint8Array(Ge.byteLength+Ie.byteLength),ce++,Te.set(Ge),Te.set(Ie,Ge.byteLength),yn.clearDtsInfo(c),Ie=Math.ceil(1024*Wg/c.samplerate),ge.length&&(Ge=ge.length*Ie,this.trigger("segmentTimingInfo",Bh(Ma.audioTsToVideoTs(c.baseMediaDecodeTime,c.samplerate),ge[0].dts,ge[0].pts,ge[0].dts+Ge,ge[0].pts+Ge,it||0)),this.trigger("timingInfo",{start:ge[0].pts,end:ge[0].pts+Ge})),this.trigger("data",{track:c,boxes:Te})),this.trigger("done","AudioSegmentStream")},this.reset=function(){yn.clearDtsInfo(c),D=[],this.trigger("reset")}};Ua.prototype=new Gr,(Pl=function(c,C){var D,L,X=[],oe=[],ce=(C=C||{}).firstSequenceNumber||0;Pl.prototype.init.call(this),delete c.minPTS,this.gopCache_=[],this.push=function(ge){yn.collectDtsInfo(c,ge),ge.nalUnitType!=="seq_parameter_set_rbsp"||D||(D=ge.config,c.sps=[ge.data],Hh.forEach(function(Te){c[Te]=D[Te]},this)),ge.nalUnitType!=="pic_parameter_set_rbsp"||L||(L=ge.data,c.pps=[ge.data]),X.push(ge)},this.flush=function(){for(var ge,Te,Ie,Ge=0;X.length&&X[0].nalUnitType!=="access_unit_delimiter_rbsp";)X.shift();if(X.length!==0){if(ge=Ls.groupNalsIntoFrames(X),(ge=Ls.groupFramesIntoGops(ge))[0][0].keyFrame||((it=this.getGopForFusion_(X[0],c))?(Ge=it.duration,ge.unshift(it),ge.byteLength+=it.byteLength,ge.nalCount+=it.nalCount,ge.pts=it.pts,ge.dts=it.dts,ge.duration+=it.duration):ge=Ls.extendFirstKeyFrame(ge)),oe.length){var it=C.alignGopsAtEnd?this.alignGopsAtEnd_(ge):this.alignGopsAtStart_(ge);if(!it)return this.gopCache_.unshift({gop:ge.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),X=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");yn.clearDtsInfo(c),ge=it}yn.collectDtsInfo(c,ge),c.samples=Ls.generateSampleTable(ge),it=Rs.mdat(Ls.concatenateNalData(ge)),c.baseMediaDecodeTime=yn.calculateTrackBaseMediaDecodeTime(c,C.keepOriginalTimestamps),this.trigger("processedGopsInfo",ge.map(function(Tt){return{pts:Tt.pts,dts:Tt.dts,byteLength:Tt.byteLength}})),Te=ge[0],Ie=ge[ge.length-1],this.trigger("segmentTimingInfo",Bh(c.baseMediaDecodeTime,Te.dts,Te.pts,Ie.dts+Ie.duration,Ie.pts+Ie.duration,Ge)),this.trigger("timingInfo",{start:ge[0].pts,end:ge[ge.length-1].pts+ge[ge.length-1].duration}),this.gopCache_.unshift({gop:ge.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),X=[],this.trigger("baseMediaDecodeTime",c.baseMediaDecodeTime),this.trigger("timelineStartInfo",c.timelineStartInfo),Te=Rs.moof(ce,[c]),Ie=new Uint8Array(Te.byteLength+it.byteLength),ce++,Ie.set(Te),Ie.set(it,Te.byteLength),this.trigger("data",{track:c,boxes:Ie})}this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),X=[],this.gopCache_.length=0,oe.length=0,this.trigger("reset")},this.resetStream_=function(){yn.clearDtsInfo(c),L=D=void 0},this.getGopForFusion_=function(ge){for(var Te,Ie,Ge,it=1/0,Tt=0;Tt<this.gopCache_.length;Tt++)Ie=(Ge=this.gopCache_[Tt]).gop,c.pps&&Fh(c.pps[0],Ge.pps[0])&&c.sps&&Fh(c.sps[0],Ge.sps[0])&&(Ie.dts<c.timelineStartInfo.dts||-1e4<=(Ie=ge.dts-Ie.dts-Ie.duration)&&Ie<=45e3&&(!Te||Ie<it)&&(Te=Ge,it=Ie));return Te?Te.gop:null},this.alignGopsAtStart_=function(ge){for(var Te,Ie,Ge,it,Tt=ge.byteLength,Nt=ge.nalCount,Dt=ge.duration,Di=Te=0;Di<oe.length&&Te<ge.length&&(Ie=oe[Di],Ge=ge[Te],Ie.pts!==Ge.pts);)Ie.pts<Ge.pts?Di++:(Te++,Tt-=Ge.byteLength,Nt-=Ge.nalCount,Dt-=Ge.duration);return Te===0?ge:Te===ge.length?null:((it=ge.slice(Te)).byteLength=Tt,it.duration=Dt,it.nalCount=Nt,it.pts=it[0].pts,it.dts=it[0].dts,it)},this.alignGopsAtEnd_=function(ge){for(var Te,Ie,Ge,it,Tt=oe.length-1,Nt=ge.length-1,Dt=null,Di=!1;0<=Tt&&0<=Nt;){if(Te=oe[Tt],Ie=ge[Nt],Te.pts===Ie.pts){Di=!0;break}Ie.pts<Te.pts?Tt--:(Tt===oe.length-1&&(Dt=Nt),Nt--)}return Di||Dt!==null?(Ge=Di?Nt:Dt)===0?ge:(it=(Ge=ge.slice(Ge)).reduce(function(Fn,Kn){return Fn.byteLength+=Kn.byteLength,Fn.duration+=Kn.duration,Fn.nalCount+=Kn.nalCount,Fn},{byteLength:0,duration:0,nalCount:0}),Ge.byteLength=it.byteLength,Ge.duration=it.duration,Ge.nalCount=it.nalCount,Ge.pts=Ge[0].pts,Ge.dts=Ge[0].dts,Ge):null},this.alignGopsWith=function(ge){oe=ge}}).prototype=new Gr,((Ps=function(c,C){this.numberOfTracks=0,this.metadataStream=C,typeof(c=c||{}).remux<"u"?this.remuxTracks=!!c.remux:this.remuxTracks=!0,this.keepOriginalTimestamps=typeof c.keepOriginalTimestamps=="boolean"&&c.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ps.prototype.init.call(this),this.push=function(D){return D.content||D.text?this.pendingCaptions.push(D):D.frames?this.pendingMetadata.push(D):(this.pendingTracks.push(D.track),this.pendingBytes+=D.boxes.byteLength,D.track.type==="video"&&(this.videoTrack=D.track,this.pendingBoxes.push(D.boxes)),void(D.track.type==="audio"&&(this.audioTrack=D.track,this.pendingBoxes.unshift(D.boxes))))}}).prototype=new Gr).flush=function(c){var C,D,L,X=0,oe={captions:[],captionStreams:{},metadata:[],info:{}},ce=0;if(this.pendingTracks.length<this.numberOfTracks){if(c!=="VideoSegmentStream"&&c!=="AudioSegmentStream"||this.remuxTracks)return;if(this.pendingTracks.length===0)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(ce=this.videoTrack.timelineStartInfo.pts,Hh.forEach(function(ge){oe.info[ge]=this.videoTrack[ge]},this)):this.audioTrack&&(ce=this.audioTrack.timelineStartInfo.pts,jh.forEach(function(ge){oe.info[ge]=this.audioTrack[ge]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?oe.type=this.pendingTracks[0].type:oe.type="combined",this.emittedTracks+=this.pendingTracks.length,c=Rs.initSegment(this.pendingTracks),oe.initSegment=new Uint8Array(c.byteLength),oe.initSegment.set(c),oe.data=new Uint8Array(this.pendingBytes),L=0;L<this.pendingBoxes.length;L++)oe.data.set(this.pendingBoxes[L],X),X+=this.pendingBoxes[L].byteLength;for(L=0;L<this.pendingCaptions.length;L++)(C=this.pendingCaptions[L]).startTime=Ma.metadataTsToSeconds(C.startPts,ce,this.keepOriginalTimestamps),C.endTime=Ma.metadataTsToSeconds(C.endPts,ce,this.keepOriginalTimestamps),oe.captionStreams[C.stream]=!0,oe.captions.push(C);for(L=0;L<this.pendingMetadata.length;L++)(D=this.pendingMetadata[L]).cueTime=Ma.metadataTsToSeconds(D.pts,ce,this.keepOriginalTimestamps),oe.metadata.push(D);for(oe.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",oe),L=0;L<oe.captions.length;L++)C=oe.captions[L],this.trigger("caption",C);for(L=0;L<oe.metadata.length;L++)D=oe.metadata[L],this.trigger("id3Frame",D)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ps.prototype.setRemux=function(c){this.remuxTracks=c},(Rl=function(c){var C,D,L=this,X=!0;Rl.prototype.init.call(this),c=c||{},this.baseMediaDecodeTime=c.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var oe={};(this.transmuxPipeline_=oe).type="aac",oe.metadataStream=new Un.MetadataStream,oe.aacStream=new qg,oe.audioTimestampRolloverStream=new Un.TimestampRolloverStream("audio"),oe.timedMetadataTimestampRolloverStream=new Un.TimestampRolloverStream("timed-metadata"),oe.adtsStream=new zh,oe.coalesceStream=new Ps(c,oe.metadataStream),oe.headOfPipeline=oe.aacStream,oe.aacStream.pipe(oe.audioTimestampRolloverStream).pipe(oe.adtsStream),oe.aacStream.pipe(oe.timedMetadataTimestampRolloverStream).pipe(oe.metadataStream).pipe(oe.coalesceStream),oe.metadataStream.on("timestamp",function(ce){oe.aacStream.setTimestamp(ce.timeStamp)}),oe.aacStream.on("data",function(ce){ce.type!=="timed-metadata"&&ce.type!=="audio"||oe.audioSegmentStream||(D=D||{timelineStartInfo:{baseMediaDecodeTime:L.baseMediaDecodeTime},codec:"adts",type:"audio"},oe.coalesceStream.numberOfTracks++,oe.audioSegmentStream=new Ua(D,c),oe.audioSegmentStream.on("log",L.getLogTrigger_("audioSegmentStream")),oe.audioSegmentStream.on("timingInfo",L.trigger.bind(L,"audioTimingInfo")),oe.adtsStream.pipe(oe.audioSegmentStream).pipe(oe.coalesceStream),L.trigger("trackinfo",{hasAudio:!!D,hasVideo:!!C}))}),oe.coalesceStream.on("data",this.trigger.bind(this,"data")),oe.coalesceStream.on("done",this.trigger.bind(this,"done")),Uh(this,oe)},this.setupTsPipeline=function(){var oe={};(this.transmuxPipeline_=oe).type="ts",oe.metadataStream=new Un.MetadataStream,oe.packetStream=new Un.TransportPacketStream,oe.parseStream=new Un.TransportParseStream,oe.elementaryStream=new Un.ElementaryStream,oe.timestampRolloverStream=new Un.TimestampRolloverStream,oe.adtsStream=new zh,oe.h264Stream=new Hg,oe.captionStream=new Un.CaptionStream(c),oe.coalesceStream=new Ps(c,oe.metadataStream),oe.headOfPipeline=oe.packetStream,oe.packetStream.pipe(oe.parseStream).pipe(oe.elementaryStream).pipe(oe.timestampRolloverStream),oe.timestampRolloverStream.pipe(oe.h264Stream),oe.timestampRolloverStream.pipe(oe.adtsStream),oe.timestampRolloverStream.pipe(oe.metadataStream).pipe(oe.coalesceStream),oe.h264Stream.pipe(oe.captionStream).pipe(oe.coalesceStream),oe.elementaryStream.on("data",function(ce){var ge;if(ce.type==="metadata"){for(ge=ce.tracks.length;ge--;)C||ce.tracks[ge].type!=="video"?D||ce.tracks[ge].type!=="audio"||((D=ce.tracks[ge]).timelineStartInfo.baseMediaDecodeTime=L.baseMediaDecodeTime):(C=ce.tracks[ge]).timelineStartInfo.baseMediaDecodeTime=L.baseMediaDecodeTime;C&&!oe.videoSegmentStream&&(oe.coalesceStream.numberOfTracks++,oe.videoSegmentStream=new Pl(C,c),oe.videoSegmentStream.on("log",L.getLogTrigger_("videoSegmentStream")),oe.videoSegmentStream.on("timelineStartInfo",function(Te){D&&!c.keepOriginalTimestamps&&(D.timelineStartInfo=Te,oe.audioSegmentStream.setEarliestDts(Te.dts-L.baseMediaDecodeTime))}),oe.videoSegmentStream.on("processedGopsInfo",L.trigger.bind(L,"gopInfo")),oe.videoSegmentStream.on("segmentTimingInfo",L.trigger.bind(L,"videoSegmentTimingInfo")),oe.videoSegmentStream.on("baseMediaDecodeTime",function(Te){D&&oe.audioSegmentStream.setVideoBaseMediaDecodeTime(Te)}),oe.videoSegmentStream.on("timingInfo",L.trigger.bind(L,"videoTimingInfo")),oe.h264Stream.pipe(oe.videoSegmentStream).pipe(oe.coalesceStream)),D&&!oe.audioSegmentStream&&(oe.coalesceStream.numberOfTracks++,oe.audioSegmentStream=new Ua(D,c),oe.audioSegmentStream.on("log",L.getLogTrigger_("audioSegmentStream")),oe.audioSegmentStream.on("timingInfo",L.trigger.bind(L,"audioTimingInfo")),oe.audioSegmentStream.on("segmentTimingInfo",L.trigger.bind(L,"audioSegmentTimingInfo")),oe.adtsStream.pipe(oe.audioSegmentStream).pipe(oe.coalesceStream)),L.trigger("trackinfo",{hasAudio:!!D,hasVideo:!!C})}}),oe.coalesceStream.on("data",this.trigger.bind(this,"data")),oe.coalesceStream.on("id3Frame",function(ce){ce.dispatchType=oe.metadataStream.dispatchType,L.trigger("id3Frame",ce)}),oe.coalesceStream.on("caption",this.trigger.bind(this,"caption")),oe.coalesceStream.on("done",this.trigger.bind(this,"done")),Uh(this,oe)},this.setBaseMediaDecodeTime=function(oe){var ce=this.transmuxPipeline_;c.keepOriginalTimestamps||(this.baseMediaDecodeTime=oe),D&&(D.timelineStartInfo.dts=void 0,D.timelineStartInfo.pts=void 0,yn.clearDtsInfo(D),ce.audioTimestampRolloverStream)&&ce.audioTimestampRolloverStream.discontinuity(),C&&(ce.videoSegmentStream&&(ce.videoSegmentStream.gopCache_=[]),C.timelineStartInfo.dts=void 0,C.timelineStartInfo.pts=void 0,yn.clearDtsInfo(C),ce.captionStream.reset()),ce.timestampRolloverStream&&ce.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(oe){D&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(oe)},this.setRemux=function(oe){var ce=this.transmuxPipeline_;c.remux=oe,ce&&ce.coalesceStream&&ce.coalesceStream.setRemux(oe)},this.alignGopsWith=function(oe){C&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(oe)},this.getLogTrigger_=function(oe){var ce=this;return function(ge){ge.stream=oe,ce.trigger("log",ge)}},this.push=function(oe){var ce;X&&((ce=Vg(oe))&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():ce||this.transmuxPipeline_.type==="ts"||this.setupTsPipeline(),X=!1),this.transmuxPipeline_.headOfPipeline.push(oe)},this.flush=function(){X=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new Gr;function Ll(c){var C="";return(C+=String.fromCharCode(c[0]))+String.fromCharCode(c[1])+String.fromCharCode(c[2])+String.fromCharCode(c[3])}function Ms(c,C){var D,L,X,oe=[];if(!C.length)return null;for(D=0;D<c.byteLength;)L=$g(c[D]<<24|c[D+1]<<16|c[D+2]<<8|c[D+3]),X=Kg(c.subarray(D+4,D+8)),L=1<L?D+L:c.byteLength,X===C[0]&&(C.length===1?oe.push(c.subarray(D+8,L)):(X=Ms(c.subarray(D+8,L),C.slice(1))).length&&(oe=oe.concat(X))),D=L;return oe}function Ml(c){var C={version:c[0],flags:new Uint8Array(c.subarray(1,4))};return C.baseMediaDecodeTime=C.version===1?Zg(c.subarray(4)):Yg(c[4]<<24|c[5]<<16|c[6]<<8|c[7]),C}function Ul(c){var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D=1&(c={version:c[0],flags:new Uint8Array(c.subarray(1,4)),trackId:C.getUint32(4)}).flags[2],L=2&c.flags[2],X=8&c.flags[2],oe=16&c.flags[2],ce=32&c.flags[2],ge=65536&c.flags[0],Te=131072&c.flags[0],Ie=8;return D&&(Ie+=4,c.baseDataOffset=C.getUint32(12),Ie+=4),L&&(c.sampleDescriptionIndex=C.getUint32(Ie),Ie+=4),X&&(c.defaultSampleDuration=C.getUint32(Ie),Ie+=4),oe&&(c.defaultSampleSize=C.getUint32(Ie),Ie+=4),ce&&(c.defaultSampleFlags=C.getUint32(Ie)),ge&&(c.durationIsEmpty=!0),!D&&Te&&(c.baseDataOffsetIsMoof=!0),c}function qh(c){var C,D={version:c[0],flags:new Uint8Array(c.subarray(1,4)),samples:[]},L=new DataView(c.buffer,c.byteOffset,c.byteLength),X=1&D.flags[2],oe=4&D.flags[2],ce=1&D.flags[1],ge=2&D.flags[1],Te=4&D.flags[1],Ie=8&D.flags[1],Ge=L.getUint32(4),it=8;for(X&&(D.dataOffset=L.getInt32(it),it+=4),oe&&Ge&&(C={flags:Wh(c.subarray(it,it+4))},it+=4,ce&&(C.duration=L.getUint32(it),it+=4),ge&&(C.size=L.getUint32(it),it+=4),Ie&&(C.compositionTimeOffset=D.version===1?L.getInt32(it):L.getUint32(it),it+=4),D.samples.push(C),Ge--);Ge--;)C={},ce&&(C.duration=L.getUint32(it),it+=4),ge&&(C.size=L.getUint32(it),it+=4),Te&&(C.flags=Wh(c.subarray(it,it+4)),it+=4),Ie&&(C.compositionTimeOffset=D.version===1?L.getInt32(it):L.getUint32(it),it+=4),D.samples.push(C);return D}function dn(c){return new Date(1e3*c-20828448e5)}var Gg=Rl,cn=function(c){return c>>>0},Us=function(c){return("00"+c.toString(16)).slice(-2)},$g=cn,Kg=Ll,Yg=cn,Zg=ji.getUint64,Vh=ji.getUint64,Wh=function(c){return{isLeading:(12&c[0])>>>2,dependsOn:3&c[0],isDependedOn:(192&c[1])>>>6,hasRedundancy:(48&c[1])>>>4,paddingValue:(14&c[1])>>>1,isNonSyncSample:1&c[1],degradationPriority:c[2]<<8|c[3]}},Xh=ji.getUint64,Fs=Ll,Xn={avc1:function(c){var C=new DataView(c.buffer,c.byteOffset,c.byteLength);return{dataReferenceIndex:C.getUint16(6),width:C.getUint16(24),height:C.getUint16(26),horizresolution:C.getUint16(28)+C.getUint16(30)/16,vertresolution:C.getUint16(32)+C.getUint16(34)/16,frameCount:C.getUint16(40),depth:C.getUint16(74),config:Ki(c.subarray(78,c.byteLength))}},avcC:function(c){for(var C,D,L=new DataView(c.buffer,c.byteOffset,c.byteLength),X={configurationVersion:c[0],avcProfileIndication:c[1],profileCompatibility:c[2],avcLevelIndication:c[3],lengthSizeMinusOne:3&c[4],sps:[],pps:[]},oe=31&c[5],ce=6,ge=0;ge<oe;ge++)D=L.getUint16(ce),ce+=2,X.sps.push(new Uint8Array(c.subarray(ce,ce+D))),ce+=D;for(C=c[ce],ce++,ge=0;ge<C;ge++)D=L.getUint16(ce),ce+=2,X.pps.push(new Uint8Array(c.subarray(ce,ce+D))),ce+=D;return X},btrt:function(c){return c=new DataView(c.buffer,c.byteOffset,c.byteLength),{bufferSizeDB:c.getUint32(0),maxBitrate:c.getUint32(4),avgBitrate:c.getUint32(8)}},edts:function(c){return{boxes:Ki(c)}},elst:function(c){for(var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D={version:C.getUint8(0),flags:new Uint8Array(c.subarray(1,4)),edits:[]},L=C.getUint32(4),X=8;L;L--)D.version===0?(D.edits.push({segmentDuration:C.getUint32(X),mediaTime:C.getInt32(X+4),mediaRate:C.getUint16(X+8)+C.getUint16(X+10)/65536}),X+=12):(D.edits.push({segmentDuration:Xh(c.subarray(X)),mediaTime:Xh(c.subarray(X+8)),mediaRate:C.getUint16(X+16)+C.getUint16(X+18)/65536}),X+=20);return D},esds:function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),esId:c[6]<<8|c[7],streamPriority:31&c[8],decoderConfig:{objectProfileIndication:c[11],streamType:c[12]>>>2&63,bufferSize:c[13]<<16|c[14]<<8|c[15],maxBitrate:c[16]<<24|c[17]<<16|c[18]<<8|c[19],avgBitrate:c[20]<<24|c[21]<<16|c[22]<<8|c[23],decoderConfigDescriptor:{tag:c[24],length:c[25],audioObjectType:c[26]>>>3&31,samplingFrequencyIndex:(7&c[26])<<1|c[27]>>>7&1,channelConfiguration:c[27]>>>3&15}}}},ftyp:function(c){for(var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D={majorBrand:Fs(c.subarray(0,4)),minorVersion:C.getUint32(4),compatibleBrands:[]},L=8;L<c.byteLength;)D.compatibleBrands.push(Fs(c.subarray(L,L+4))),L+=4;return D},dinf:function(c){return{boxes:Ki(c)}},dref:function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),dataReferences:Ki(c.subarray(8))}},hdlr:function(c){for(var C={version:new DataView(c.buffer,c.byteOffset,c.byteLength).getUint8(0),flags:new Uint8Array(c.subarray(1,4)),handlerType:Fs(c.subarray(8,12)),name:""},D=8,D=24;D<c.byteLength;D++){if(c[D]===0){D++;break}C.name+=String.fromCharCode(c[D])}return C.name=decodeURIComponent(escape(C.name)),C},mdat:function(c){return{byteLength:c.byteLength,nals:function(C){for(var D,L=new DataView(C.buffer,C.byteOffset,C.byteLength),X=[],oe=0;oe+4<C.length;oe+=D)if(D=L.getUint32(oe),oe+=4,D<=0)X.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&C[oe]){case 1:X.push("slice_layer_without_partitioning_rbsp");break;case 5:X.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:X.push("sei_rbsp");break;case 7:X.push("seq_parameter_set_rbsp");break;case 8:X.push("pic_parameter_set_rbsp");break;case 9:X.push("access_unit_delimiter_rbsp");break;default:X.push("UNKNOWN NAL - "+C[oe]&31)}return X}(c)}},mdhd:function(L){var C=new DataView(L.buffer,L.byteOffset,L.byteLength),D=4,L={version:C.getUint8(0),flags:new Uint8Array(L.subarray(1,4)),language:""};return L.version===1?(L.creationTime=dn(C.getUint32(D+=4)),L.modificationTime=dn(C.getUint32(D+=8)),L.timescale=C.getUint32(D+=4),L.duration=C.getUint32(D+=8)):(L.creationTime=dn(C.getUint32(D)),L.modificationTime=dn(C.getUint32(D+=4)),L.timescale=C.getUint32(D+=4),L.duration=C.getUint32(D+=4)),C=C.getUint16(D+=4),L.language+=String.fromCharCode(96+(C>>10)),L.language+=String.fromCharCode(96+((992&C)>>5)),L.language+=String.fromCharCode(96+(31&C)),L},mdia:function(c){return{boxes:Ki(c)}},mfhd:function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),sequenceNumber:c[4]<<24|c[5]<<16|c[6]<<8|c[7]}},minf:function(c){return{boxes:Ki(c)}},mp4a:function(c){var C=new DataView(c.buffer,c.byteOffset,c.byteLength),C={dataReferenceIndex:C.getUint16(6),channelcount:C.getUint16(16),samplesize:C.getUint16(18),samplerate:C.getUint16(24)+C.getUint16(26)/65536};return 28<c.byteLength&&(C.streamDescriptor=Ki(c.subarray(28))[0]),C},moof:function(c){return{boxes:Ki(c)}},moov:function(c){return{boxes:Ki(c)}},mvex:function(c){return{boxes:Ki(c)}},mvhd:function(c){var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D=4,L={version:C.getUint8(0),flags:new Uint8Array(c.subarray(1,4))};return L.version===1?(L.creationTime=dn(C.getUint32(D+=4)),L.modificationTime=dn(C.getUint32(D+=8)),L.timescale=C.getUint32(D+=4),L.duration=C.getUint32(D+=8)):(L.creationTime=dn(C.getUint32(D)),L.modificationTime=dn(C.getUint32(D+=4)),L.timescale=C.getUint32(D+=4),L.duration=C.getUint32(D+=4)),L.rate=C.getUint16(D+=4)+C.getUint16(D+2)/16,L.volume=C.getUint8(D+=4)+C.getUint8(D+1)/8,D=(D+=2)+2+8,L.matrix=new Uint32Array(c.subarray(D,D+36)),L.nextTrackId=C.getUint32(D=D+36+24),L},pdin:function(c){var C=new DataView(c.buffer,c.byteOffset,c.byteLength);return{version:C.getUint8(0),flags:new Uint8Array(c.subarray(1,4)),rate:C.getUint32(4),initialDelay:C.getUint32(8)}},sdtp:function(c){for(var C={version:c[0],flags:new Uint8Array(c.subarray(1,4)),samples:[]},D=4;D<c.byteLength;D++)C.samples.push({dependsOn:(48&c[D])>>4,isDependedOn:(12&c[D])>>2,hasRedundancy:3&c[D]});return C},sidx:function(c){var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D={version:c[0],flags:new Uint8Array(c.subarray(1,4)),references:[],referenceId:C.getUint32(4),timescale:C.getUint32(8)},L=12,X=(D.version===0?(D.earliestPresentationTime=C.getUint32(L),D.firstOffset=C.getUint32(L+4),L+=8):(D.earliestPresentationTime=Vh(c.subarray(L)),D.firstOffset=Vh(c.subarray(L+8)),L+=16),C.getUint16(L+=2));for(L+=2;0<X;L+=12,X--)D.references.push({referenceType:(128&c[L])>>>7,referencedSize:2147483647&C.getUint32(L),subsegmentDuration:C.getUint32(L+4),startsWithSap:!!(128&c[L+8]),sapType:(112&c[L+8])>>>4,sapDeltaTime:268435455&C.getUint32(L+8)});return D},smhd:function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),balance:c[4]+c[5]/256}},stbl:function(c){return{boxes:Ki(c)}},ctts:function(c){for(var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D={version:C.getUint8(0),flags:new Uint8Array(c.subarray(1,4)),compositionOffsets:[]},L=C.getUint32(4),X=8;L;X+=8,L--)D.compositionOffsets.push({sampleCount:C.getUint32(X),sampleOffset:C[D.version===0?"getUint32":"getInt32"](X+4)});return D},stss:function(c){for(var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D={version:C.getUint8(0),flags:new Uint8Array(c.subarray(1,4)),syncSamples:[]},L=C.getUint32(4),X=8;L;X+=4,L--)D.syncSamples.push(C.getUint32(X));return D},stco:function(c){for(var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D={version:c[0],flags:new Uint8Array(c.subarray(1,4)),chunkOffsets:[]},L=C.getUint32(4),X=8;L;X+=4,L--)D.chunkOffsets.push(C.getUint32(X));return D},stsc:function(c){for(var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D=C.getUint32(4),L={version:c[0],flags:new Uint8Array(c.subarray(1,4)),sampleToChunks:[]},X=8;D;X+=12,D--)L.sampleToChunks.push({firstChunk:C.getUint32(X),samplesPerChunk:C.getUint32(X+4),sampleDescriptionIndex:C.getUint32(X+8)});return L},stsd:function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),sampleDescriptions:Ki(c.subarray(8))}},stsz:function(c){for(var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D={version:c[0],flags:new Uint8Array(c.subarray(1,4)),sampleSize:C.getUint32(4),entries:[]},L=12;L<c.byteLength;L+=4)D.entries.push(C.getUint32(L));return D},stts:function(c){for(var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D={version:c[0],flags:new Uint8Array(c.subarray(1,4)),timeToSamples:[]},L=C.getUint32(4),X=8;L;X+=8,L--)D.timeToSamples.push({sampleCount:C.getUint32(X),sampleDelta:C.getUint32(X+4)});return D},styp:function(c){return Xn.ftyp(c)},tfdt:Ml,tfhd:Ul,tkhd:function(c){var C=new DataView(c.buffer,c.byteOffset,c.byteLength),D=4,L={version:C.getUint8(0),flags:new Uint8Array(c.subarray(1,4))};return L.version===1?(L.creationTime=dn(C.getUint32(D+=4)),L.modificationTime=dn(C.getUint32(D+=8)),L.trackId=C.getUint32(D+=4),L.duration=C.getUint32(D=D+4+8)):(L.creationTime=dn(C.getUint32(D)),L.modificationTime=dn(C.getUint32(D+=4)),L.trackId=C.getUint32(D+=4),L.duration=C.getUint32(D=D+4+4)),L.layer=C.getUint16(D=D+4+8),L.alternateGroup=C.getUint16(D+=2),L.volume=C.getUint8(D+=2)+C.getUint8(D+1)/8,D=D+2+2,L.matrix=new Uint32Array(c.subarray(D,D+36)),L.width=C.getUint16(D+=36)+C.getUint16(D+2)/65536,L.height=C.getUint16(D+=4)+C.getUint16(D+2)/65536,L},traf:function(c){return{boxes:Ki(c)}},trak:function(c){return{boxes:Ki(c)}},trex:function(c){var C=new DataView(c.buffer,c.byteOffset,c.byteLength);return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),trackId:C.getUint32(4),defaultSampleDescriptionIndex:C.getUint32(8),defaultSampleDuration:C.getUint32(12),defaultSampleSize:C.getUint32(16),sampleDependsOn:3&c[20],sampleIsDependedOn:(192&c[21])>>6,sampleHasRedundancy:(48&c[21])>>4,samplePaddingValue:(14&c[21])>>1,sampleIsDifferenceSample:!!(1&c[21]),sampleDegradationPriority:C.getUint16(22)}},trun:qh,"url ":function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4))}},vmhd:function(c){var C=new DataView(c.buffer,c.byteOffset,c.byteLength);return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),graphicsmode:C.getUint16(4),opcolor:new Uint16Array([C.getUint16(6),C.getUint16(8),C.getUint16(10)])}}},Ki=function(c){for(var C,D,L,X,oe,ce=0,ge=[],Te=new ArrayBuffer(c.length),Ie=new Uint8Array(Te),Ge=0;Ge<c.length;++Ge)Ie[Ge]=c[Ge];for(C=new DataView(Te);ce<c.byteLength;)D=C.getUint32(ce),L=Fs(c.subarray(ce+4,ce+8)),X=1<D?ce+D:c.byteLength,(oe=(Xn[L]||function(it){return{data:it}})(c.subarray(ce+8,X))).size=D,oe.type=L,ge.push(oe),ce=X;return ge},Gh=function(c,C){var D;return C=C||0,D=new Array(2*C+1).join(" "),c.map(function(L,X){return D+L.type+`
`+Object.keys(L).filter(function(oe){return oe!=="type"&&oe!=="boxes"}).map(function(Te){var ce,ge=D+"  "+Te+": ",Te=L[Te];return Te instanceof Uint8Array||Te instanceof Uint32Array?(ce=Array.prototype.slice.call(new Uint8Array(Te.buffer,Te.byteOffset,Te.byteLength)).map(function(Ie){return" "+("00"+Ie.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?ce.length===1?ge+"<"+ce.join("").slice(1)+">":ge+`<
`+ce.map(function(Ie){return D+"  "+Ie}).join(`
`)+`
`+D+"  >":ge+"<>":ge+JSON.stringify(Te,null,2).split(`
`).map(function(Ie,Ge){return Ge===0?Ie:D+"  "+Ie}).join(`
`)}).join(`
`)+(L.boxes?`
`+Gh(L.boxes,C+1):"")}).join(`
`)},$r={inspect:Ki,textify:Gh,parseType:Fs,findBox:Ms,parseTraf:Xn.traf,parseTfdt:Xn.tfdt,parseHdlr:Xn.hdlr,parseTfhd:Xn.tfhd,parseTrun:Xn.trun,parseSidx:Xn.sidx},Fa=function(c){for(var C=0,D=String.fromCharCode(c[C]),L="";D!=="\0";)L+=D,C++,D=String.fromCharCode(c[C]);return L+=D},Qg=ji.getUint64,$h=function(c){return c!==void 0||c!==null},dr=typeof window<"u"?window:typeof Ci<"u"?Ci:typeof self<"u"?self:{},Gn=dr,Ba=cn,Bs=Us,xi=Ms,Kr=Ll,Fl={parseEmsgBox:function(c){var C,D,L,X,oe,ce,ge,Te=4,Ie=c[0],Ge=(Ie===0?(Te=(Te+=(X=Fa(c.subarray(Te))).length)+(oe=Fa(c.subarray(Te))).length,L=(Ge=new DataView(c.buffer)).getUint32(Te),ge=Ge.getUint32(Te+=4),C=Ge.getUint32(Te+=4),D=Ge.getUint32(Te+=4),Te+=4):Ie===1&&(L=(Ge=new DataView(c.buffer)).getUint32(Te),ce=Qg(c.subarray(Te+=4)),C=Ge.getUint32(Te+=8),D=Ge.getUint32(Te+=4),Te=(Te=(Te+=4)+(X=Fa(c.subarray(Te))).length)+(oe=Fa(c.subarray(Te))).length),{scheme_id_uri:X,value:oe,timescale:L||1,presentation_time:ce,presentation_time_delta:ge,event_duration:C,id:D,message_data:new Uint8Array(c.subarray(Te,c.byteLength))});return oe=(X=Ge).scheme_id_uri!=="\0",ce=(L=Ie)===0&&$h(X.presentation_time_delta)&&oe,ge=L===1&&$h(X.presentation_time)&&oe,!(1<L)&&ce||ge?Ge:void 0},scaleTime:function(c,C,D,L){return c||c===0?c/C:L+D/C}},Jg=Ul,ey=qh,ty=Ml,iy=ji.getUint64,Bl=Gn,ny=Ah.parseId3Frames,Kh=function(c){var C=c[0]===0?12:20;return Ba(c[C]<<24|c[1+C]<<16|c[2+C]<<8|c[3+C])},zs={findBox:xi,parseType:Kr,timescale:function(c){return xi(c,["moov","trak"]).reduce(function(C,D){var L,X,oe=xi(D,["tkhd"])[0];return oe&&(L=oe[0],oe=Ba(oe[X=L===0?12:20]<<24|oe[1+X]<<16|oe[2+X]<<8|oe[3+X]),D=xi(D,["mdia","mdhd"])[0])?(L=D[0],C[oe]=Ba(D[X=L===0?12:20]<<24|D[1+X]<<16|D[2+X]<<8|D[3+X]),C):null},{})},startTime:function(c,C){return C=xi(C,["moof","traf"]).reduce(function(D,ce){var X=xi(ce,["tfhd"])[0],X=Ba(X[4]<<24|X[5]<<16|X[6]<<8|X[7]),X=c[X]||9e4,ce=xi(ce,["tfdt"])[0],oe=new DataView(ce.buffer,ce.byteOffset,ce.byteLength),ce=ce[0]===1?iy(ce.subarray(4,12)):oe.getUint32(4);let ge;return typeof ce=="bigint"?ge=ce/Bl.BigInt(X):typeof ce!="number"||isNaN(ce)||(ge=ce/X),D=(ge=ge<Number.MAX_SAFE_INTEGER?Number(ge):ge)<D?ge:D},1/0),typeof C=="bigint"||isFinite(C)?C:0},compositionStartTime:function(c,ce){var D,L,ce=xi(ce,["moof","traf"]),X=0,oe=0,ce=(ce&&ce.length&&(L=xi(ce[0],["tfhd"])[0],ge=xi(ce[0],["trun"])[0],ce=xi(ce[0],["tfdt"])[0],L&&(D=Jg(L).trackId),ce&&(X=ty(ce).baseMediaDecodeTime),ge)&&(L=ey(ge)).samples&&L.samples.length&&(oe=L.samples[0].compositionTimeOffset||0),c[D]||9e4),ge=(typeof X=="bigint"&&(oe=Bl.BigInt(oe),ce=Bl.BigInt(ce)),(X+oe)/ce);return ge=typeof ge=="bigint"&&ge<Number.MAX_SAFE_INTEGER?Number(ge):ge},videoTrackIds:function(C){var C=xi(C,["moov","trak"]),D=[];return C.forEach(function(L){var X=xi(L,["mdia","hdlr"]),oe=xi(L,["tkhd"]);X.forEach(function(Te,Ie){var Te=Kr(Te.subarray(8,12)),Ie=oe[Ie];Te==="vide"&&(Ie=(Te=new DataView(Ie.buffer,Ie.byteOffset,Ie.byteLength)).getUint8(0)===0?Te.getUint32(12):Te.getUint32(20),D.push(Ie))})}),D},tracks:function(C){var C=xi(C,["moov","trak"]),D=[];return C.forEach(function(L){var X,oe={},ge=xi(L,["tkhd"])[0],ce=(ge&&(ce=(ge=new DataView(ge.buffer,ge.byteOffset,ge.byteLength)).getUint8(0),oe.id=ce===0?ge.getUint32(12):ge.getUint32(20)),xi(L,["mdia","hdlr"])[0]),ce=(ce&&(ge=Kr(ce.subarray(8,12)),oe.type=ge==="vide"?"video":ge==="soun"?"audio":ge),xi(L,["mdia","minf","stbl","stsd"])[0]),ge=(ce&&(ge=ce.subarray(8),oe.codec=Kr(ge.subarray(4,8)),ce=xi(ge,[oe.codec])[0])&&(/^[asm]vc[1-9]$/i.test(oe.codec)?(X=ce.subarray(78),Kr(X.subarray(4,8))==="avcC"&&11<X.length?(oe.codec+=".",oe.codec+=Bs(X[9]),oe.codec+=Bs(X[10]),oe.codec+=Bs(X[11])):oe.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(oe.codec)?(X=ce.subarray(28),Kr(X.subarray(4,8))==="esds"&&20<X.length&&X[19]!==0?(oe.codec+="."+Bs(X[19]),oe.codec+="."+Bs(X[20]>>>2&63).replace(/^0/,"")):oe.codec="mp4a.40.2"):oe.codec=oe.codec.toLowerCase()),xi(L,["mdia","mdhd"])[0]);ge&&(oe.timescale=Kh(ge)),D.push(oe)}),D},getTimescaleFromMediaHeader:Kh,getEmsgID3:function(c,C=0){return xi(c,["emsg"]).map(L=>{var L=Fl.parseEmsgBox(new Uint8Array(L)),X=ny(L.message_data);return{cueTime:Fl.scaleTime(L.presentation_time,L.timescale,L.presentation_time_delta,C),duration:Fl.scaleTime(L.event_duration,L.timescale),frames:X}})}};let ry=$r.parseTrun,Yh=zs.findBox;var Zh=Gn,An={getMdatTrafPairs:function(D){var C=Yh(D,["moof","traf"]),D=Yh(D,["mdat"]),L=[];return D.forEach(function(X,oe){oe=C[oe],L.push({mdat:X,traf:oe})}),L},parseSamples:function(c,C,D){var L=C,X=D.defaultSampleDuration||0,oe=D.defaultSampleSize||0,ce=D.trackId,ge=[];return c.forEach(function(Te){Te=ry(Te).samples,Te.forEach(function(Ie){Ie.duration===void 0&&(Ie.duration=X),Ie.size===void 0&&(Ie.size=oe),Ie.trackId=ce,Ie.dts=L,Ie.compositionTimeOffset===void 0&&(Ie.compositionTimeOffset=0),typeof L=="bigint"?(Ie.pts=L+Zh.BigInt(Ie.compositionTimeOffset),L+=Zh.BigInt(Ie.duration)):(Ie.pts=L+Ie.compositionTimeOffset,L+=Ie.duration)}),ge=ge.concat(Te)}),ge}},sy=ka.discardEmulationPreventionBytes,ay=Xr.CaptionStream,zl=Ms,oy=Ml,ly=Ul,{getMdatTrafPairs:uy,parseSamples:dy}=An,cy=function(c,C){for(var D=c,L=0;L<C.length;L++){var X=C[L];if(D<X.size)return X;D-=X.size}return null},hy=function(c,C,D){for(var L,X,oe=new DataView(c.buffer,c.byteOffset,c.byteLength),ce={logs:[],seiNals:[]},ge=0;ge+4<c.length;ge+=L)if(L=oe.getUint32(ge),ge+=4,!(L<=0))switch(31&c[ge]){case 6:var Ie=c.subarray(ge+1,ge+1+L),Te=cy(ge,C),Ie={nalUnitType:"sei_rbsp",size:L,data:Ie,escapedRBSP:sy(Ie),trackId:D};if(Te)Ie.pts=Te.pts,Ie.dts=Te.dts,X=Te;else{if(!X){ce.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+ge+" for trackId "+D+". See mux.js#223."});break}Ie.pts=X.pts,Ie.dts=X.dts}ce.seiNals.push(Ie)}return ce},py=function(c,C){var D={};return uy(c).forEach(function(Te){var X=Te.mdat,Te=Te.traf,oe=zl(Te,["tfhd"]),oe=ly(oe[0]),ce=oe.trackId,ge=zl(Te,["tfdt"]),ge=0<ge.length?oy(ge[0]).baseMediaDecodeTime:0,Te=zl(Te,["trun"]);C===ce&&0<Te.length&&(Te=dy(Te,ge,oe),ge=hy(X,Te,ce),D[ce]||(D[ce]={seiNals:[],logs:[]}),D[ce].seiNals=D[ce].seiNals.concat(ge.seiNals),D[ce].logs=D[ce].logs.concat(ge.logs))}),D},fy=function(){var c,C,D,L,X,oe,ce=!1;this.isInitialized=function(){return ce},this.init=function(ge){c=new ay,ce=!0,oe=!!ge&&ge.isPartial,c.on("data",function(Te){Te.startTime=Te.startPts/L,Te.endTime=Te.endPts/L,X.captions.push(Te),X.captionStreams[Te.stream]=!0}),c.on("log",function(Te){X.logs.push(Te)})},this.isNewInit=function(ge,Te){return!(ge&&ge.length===0||Te&&typeof Te=="object"&&Object.keys(Te).length===0||D===ge[0]&&L===Te[D])},this.parse=function(ge,Te,Ie){var Ge,it;if(!this.isInitialized()||!Te||!Ie)return null;if(this.isNewInit(Te,Ie))D=Te[0],L=Ie[D];else if(D===null||!L)return C.push(ge),null;for(;0<C.length;){var Tt=C.shift();this.parse(Tt,Te,Ie)}return ge=ge,it=L,(Ge=(Ge=D)===null?null:{seiNals:(ge=py(ge,Ge)[Ge]||{}).seiNals,logs:ge.logs,timescale:it})&&Ge.logs&&(X.logs=X.logs.concat(Ge.logs)),Ge!==null&&Ge.seiNals?(this.pushNals(Ge.seiNals),this.flushStream(),X):X.logs.length?{logs:X.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(ge){if(!this.isInitialized()||!ge||ge.length===0)return null;ge.forEach(function(Te){c.push(Te)})},this.flushStream=function(){if(!this.isInitialized())return null;oe?c.partialFlush():c.flush()},this.clearParsedCaptions=function(){X.captions=[],X.captionStreams={},X.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;c.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){C=[],L=D=null,X?this.clearParsedCaptions():X={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()};let my=$r.parseTfdt,$n=Ms,gy=zs.getTimescaleFromMediaHeader,{parseSamples:yy,getMdatTrafPairs:vy}=An;function Qh(c){var C=31&c[1];return C<<8|c[2]}function za(c){return!!(64&c[1])}function ja(c){var C=0;return 1<(48&c[3])>>>4&&(C+=c[4]+1),C}function jl(c){switch(c){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}var Jh=function(){let c=9e4;this.init=function(C){C=$n(C,["moov","trak","mdia","mdhd"])[0],C&&(c=gy(C))},this.parseSegment=function(C){let D=[];C=vy(C);let L=0;return C.forEach(function(Te){let oe=Te.mdat;var Te=Te.traf,ce=$n(Te,["tfdt"])[0],ge=$n(Te,["tfhd"])[0],Te=$n(Te,["trun"]);if(ce&&(ce=my(ce),L=ce.baseMediaDecodeTime),Te.length&&ge){ce=yy(Te,L,ge);let Ie=0;ce.forEach(function(Ge){let it=new TextDecoder("utf-8");var Tt=oe.slice(Ie,Ie+Ge.size);$n(Tt,["vtte"])[0]||$n(Tt,["vttc"]).forEach(function(Di){var Dt=$n(Di,["payl"])[0],Di=$n(Di,["sttg"])[0],Fn=Ge.pts/c,Kn=(Ge.pts+Ge.duration)/c;let Zr,gi;if(Dt)try{Zr=it.decode(Dt)}catch{}if(Di)try{gi=it.decode(Di)}catch{}Ge.duration&&Zr&&D.push({cueText:Zr,start:Fn,end:Kn,settings:gi})}),Ie+=Ge.size})}}),D}},Hl=Ia,ep=Ia,Yr=Mg,ni={},cr=(ni.ts={parseType:function(c,C){return c=Qh(c),c===0?"pat":c===C?"pmt":C?"pes":null},parsePat:function(c){var C=za(c),D=4+ja(c);return C&&(D+=c[D]+1),(31&c[D+10])<<8|c[D+11]},parsePmt:function(c){var C={},D=za(c),L=4+ja(c);if(D&&(L+=c[L]+1),1&c[L+5]){for(var X=3+((15&c[L+1])<<8|c[L+2])-4,oe=12+((15&c[L+10])<<8|c[L+11]);oe<X;){var ce=L+oe;C[(31&c[ce+1])<<8|c[ce+2]]=c[ce],oe+=5+((15&c[ce+3])<<8|c[ce+4])}return C}},parsePayloadUnitStartIndicator:za,parsePesType:function(c,C){switch(C[Qh(c)]){case Hl.H264_STREAM_TYPE:return"video";case Hl.ADTS_STREAM_TYPE:return"audio";case Hl.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(c){var C,D,L;return!za(c)||(C=4+ja(c))>=c.byteLength?null:(D=null,192&(L=c[C+7])&&((D={}).pts=(14&c[C+9])<<27|(255&c[C+10])<<20|(254&c[C+11])<<12|(255&c[C+12])<<5|(254&c[C+13])>>>3,D.pts*=4,D.pts+=(6&c[C+13])>>>1,D.dts=D.pts,64&L)&&(D.dts=(14&c[C+14])<<27|(255&c[C+15])<<20|(254&c[C+16])<<12|(255&c[C+17])<<5|(254&c[C+18])>>>3,D.dts*=4,D.dts+=(6&c[C+18])>>>1),D)},videoPacketContainsKeyFrame:function(c){for(var C=4+ja(c),D=c.subarray(C),L=0,X=0,oe=!1;X<D.byteLength-3;X++)if(D[X+2]===1){L=X+5;break}for(;L<D.byteLength;)switch(D[L]){case 0:if(D[L-1]!==0)L+=2;else if(D[L-2]!==0)L++;else{for(X+3!==L-2&&jl(31&D[X+3])==="slice_layer_without_partitioning_rbsp_idr"&&(oe=!0);D[++L]!==1&&L<D.length;);X=L-2,L+=3}break;case 1:D[L-1]!==0||D[L-2]!==0||(jl(31&D[X+3])==="slice_layer_without_partitioning_rbsp_idr"&&(oe=!0),X=L-2),L+=3;break;default:L+=3}return D=D.subarray(X),L-=X,X=0,oe=D&&3<D.byteLength&&jl(31&D[X+3])==="slice_layer_without_partitioning_rbsp_idr"?!0:oe}},ni.aac=Nn,di.ONE_SECOND_IN_TS),Yi=188,In=71,by=function(c,C){for(var D,L=0,X=Yi;X<c.byteLength;)if(c[L]===In&&c[X]===In){switch(D=c.subarray(L,X),ni.ts.parseType(D,C.pid)){case"pat":C.pid=ni.ts.parsePat(D);break;case"pmt":var oe=ni.ts.parsePmt(D);C.table=C.table||{},Object.keys(oe).forEach(function(ce){C.table[ce]=oe[ce]})}L+=Yi,X+=Yi}else L++,X++},_y=function(c,C,D){for(var L,X,oe,ce,ge=0,Te=Yi,Ie=!1;Te<=c.byteLength;)if(c[ge]!==In||c[Te]!==In&&Te!==c.byteLength)ge++,Te++;else{if(L=c.subarray(ge,Te),ni.ts.parseType(L,C.pid)==="pes"&&(X=ni.ts.parsePesType(L,C.table),oe=ni.ts.parsePayloadUnitStartIndicator(L),X==="audio")&&oe&&(ce=ni.ts.parsePesTime(L))&&(ce.type="audio",D.audio.push(ce),Ie=!0),Ie)break;ge+=Yi,Te+=Yi}for(ge=(Te=c.byteLength)-Yi,Ie=!1;0<=ge;)if(c[ge]!==In||c[Te]!==In&&Te!==c.byteLength)ge--,Te--;else{if(L=c.subarray(ge,Te),ni.ts.parseType(L,C.pid)==="pes"&&(X=ni.ts.parsePesType(L,C.table),oe=ni.ts.parsePayloadUnitStartIndicator(L),X==="audio")&&oe&&(ce=ni.ts.parsePesTime(L))&&(ce.type="audio",D.audio.push(ce),Ie=!0),Ie)break;ge-=Yi,Te-=Yi}},Ty=function(c,C,D){for(var L,X,oe,ce,ge,Te,Ie,Ge,it=0,Tt=Yi,Nt=!1,Dt={data:[],size:0};Tt<c.byteLength;)if(c[it]===In&&c[Tt]===In){if(L=c.subarray(it,Tt),ni.ts.parseType(L,C.pid)==="pes"&&(X=ni.ts.parsePesType(L,C.table),oe=ni.ts.parsePayloadUnitStartIndicator(L),X==="video"&&(oe&&!Nt&&(ce=ni.ts.parsePesTime(L))&&(ce.type="video",D.video.push(ce),Nt=!0),!D.firstKeyFrame))){if(oe&&Dt.size!==0){for(ge=new Uint8Array(Dt.size),Te=0;Dt.data.length;)Ie=Dt.data.shift(),ge.set(Ie,Te),Te+=Ie.byteLength;ni.ts.videoPacketContainsKeyFrame(ge)&&(Ge=ni.ts.parsePesTime(ge))&&(D.firstKeyFrame=Ge,D.firstKeyFrame.type="video"),Dt.size=0}Dt.data.push(L),Dt.size+=L.byteLength}if(Nt&&D.firstKeyFrame)break;it+=Yi,Tt+=Yi}else it++,Tt++;for(it=(Tt=c.byteLength)-Yi,Nt=!1;0<=it;)if(c[it]===In&&c[Tt]===In){if(L=c.subarray(it,Tt),ni.ts.parseType(L,C.pid)==="pes"&&(X=ni.ts.parsePesType(L,C.table),oe=ni.ts.parsePayloadUnitStartIndicator(L),X==="video")&&oe&&(ce=ni.ts.parsePesTime(L))&&(ce.type="video",D.video.push(ce),Nt=!0),Nt)break;it-=Yi,Tt-=Yi}else it--,Tt--},Sy=function(oe,C){var D,L,X,oe=(ni.aac.isLikelyAacData(oe)?function(ce){for(var ge,Te,Ie=!1,Ge=0,it=null,Tt=null,Nt=0,Dt=0;3<=ce.length-Dt;){switch(ni.aac.parseType(ce,Dt)){case"timed-metadata":ce.length-Dt<10||(Nt=ni.aac.parseId3TagSize(ce,Dt))>ce.length?Ie=!0:(Tt===null&&(ge=ce.subarray(Dt,Dt+Nt),Tt=ni.aac.parseAacTimestamp(ge)),Dt+=Nt);break;case"audio":ce.length-Dt<7||(Nt=ni.aac.parseAdtsSize(ce,Dt))>ce.length?Ie=!0:(it===null&&(ge=ce.subarray(Dt,Dt+Nt),it=ni.aac.parseSampleRate(ge)),Ge++,Dt+=Nt);break;default:Dt++}if(Ie)return null}return it===null||Tt===null?null:{audio:[{type:"audio",dts:Tt,pts:Tt},{type:"audio",dts:Tt+1024*Ge*(Te=cr/it),pts:Tt+1024*Ge*Te}]}}:function(ce){var ge,Te={pid:null,table:null},Ie={};for(ge in by(ce,Te),Te.table)if(Te.table.hasOwnProperty(ge))switch(Te.table[ge]){case ep.H264_STREAM_TYPE:Ie.video=[],Ty(ce,Te,Ie),Ie.video.length===0&&delete Ie.video;break;case ep.ADTS_STREAM_TYPE:Ie.audio=[],_y(ce,Te,Ie),Ie.audio.length===0&&delete Ie.audio}return Ie})(oe);return oe&&(oe.audio||oe.video)?(C=C,(D=oe).audio&&D.audio.length&&(typeof(L=C)<"u"&&!isNaN(L)||(L=D.audio[0].dts),D.audio.forEach(function(ce){ce.dts=Yr(ce.dts,L),ce.pts=Yr(ce.pts,L),ce.dtsTime=ce.dts/cr,ce.ptsTime=ce.pts/cr})),D.video&&D.video.length&&(typeof(X=C)<"u"&&!isNaN(X)||(X=D.video[0].dts),D.video.forEach(function(ce){ce.dts=Yr(ce.dts,X),ce.pts=Yr(ce.pts,X),ce.dtsTime=ce.dts/cr,ce.ptsTime=ce.pts/cr}),D.firstKeyFrame)&&((C=D.firstKeyFrame).dts=Yr(C.dts,X),C.pts=Yr(C.pts,X),C.dtsTime=C.dts/cr,C.ptsTime=C.pts/cr),oe):null};class tp{constructor(C,D){this.options=D||{},this.self=C,this.init()}init(){var C,D;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Gg(this.options),C=this.self,(D=this.transmuxer).on("data",function(L){var X=L.initSegment,X=(L.initSegment={data:X.buffer,byteOffset:X.byteOffset,byteLength:X.byteLength},L.data);L.data=X.buffer,C.postMessage({action:"data",segment:L,byteOffset:X.byteOffset,byteLength:X.byteLength},[L.data])}),D.on("done",function(L){C.postMessage({action:"done"})}),D.on("gopInfo",function(L){C.postMessage({action:"gopInfo",gopInfo:L})}),D.on("videoSegmentTimingInfo",function(L){var X={start:{decode:di.videoTsToSeconds(L.start.dts),presentation:di.videoTsToSeconds(L.start.pts)},end:{decode:di.videoTsToSeconds(L.end.dts),presentation:di.videoTsToSeconds(L.end.pts)},baseMediaDecodeTime:di.videoTsToSeconds(L.baseMediaDecodeTime)};L.prependedContentDuration&&(X.prependedContentDuration=di.videoTsToSeconds(L.prependedContentDuration)),C.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:X})}),D.on("audioSegmentTimingInfo",function(L){var X={start:{decode:di.videoTsToSeconds(L.start.dts),presentation:di.videoTsToSeconds(L.start.pts)},end:{decode:di.videoTsToSeconds(L.end.dts),presentation:di.videoTsToSeconds(L.end.pts)},baseMediaDecodeTime:di.videoTsToSeconds(L.baseMediaDecodeTime)};L.prependedContentDuration&&(X.prependedContentDuration=di.videoTsToSeconds(L.prependedContentDuration)),C.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:X})}),D.on("id3Frame",function(L){C.postMessage({action:"id3Frame",id3Frame:L})}),D.on("caption",function(L){C.postMessage({action:"caption",caption:L})}),D.on("trackinfo",function(L){C.postMessage({action:"trackinfo",trackInfo:L})}),D.on("audioTimingInfo",function(L){C.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:di.videoTsToSeconds(L.start),end:di.videoTsToSeconds(L.end)}})}),D.on("videoTimingInfo",function(L){C.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:di.videoTsToSeconds(L.start),end:di.videoTsToSeconds(L.end)}})}),D.on("log",function(L){C.postMessage({action:"log",log:L})})}pushMp4Captions(L){this.captionParser||(this.captionParser=new fy,this.captionParser.init());var D=new Uint8Array(L.data,L.byteOffset,L.byteLength),L=this.captionParser.parse(D,L.trackIds,L.timescales);this.self.postMessage({action:"mp4Captions",captions:L&&L.captions||[],logs:L&&L.logs||[],data:D.buffer},[D.buffer])}initMp4WebVttParser(C){this.webVttParser||(this.webVttParser=new Jh),C=new Uint8Array(C.data,C.byteOffset,C.byteLength),this.webVttParser.init(C)}getMp4WebVttText(D){this.webVttParser||(this.webVttParser=new Jh);var D=new Uint8Array(D.data,D.byteOffset,D.byteLength),L=this.webVttParser.parseSegment(D);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:L||[],data:D.buffer},[D.buffer])}probeMp4StartTime({timescales:C,data:D}){C=zs.startTime(C,D),this.self.postMessage({action:"probeMp4StartTime",startTime:C,data:D},[D.buffer])}probeMp4Tracks({data:C}){var D=zs.tracks(C);this.self.postMessage({action:"probeMp4Tracks",tracks:D,data:C},[C.buffer])}probeEmsgID3({data:C,offset:D}){D=zs.getEmsgID3(C,D),this.self.postMessage({action:"probeEmsgID3",id3Frames:D,emsgData:C},[C.buffer])}probeTs({data:C,baseStartTime:D}){D=typeof D!="number"||isNaN(D)?void 0:D*di.ONE_SECOND_IN_TS,D=Sy(C,D);let L=null;D&&((L={hasVideo:D.video&&D.video.length===2||!1,hasAudio:D.audio&&D.audio.length===2||!1}).hasVideo&&(L.videoStart=D.video[0].ptsTime),L.hasAudio)&&(L.audioStart=D.audio[0].ptsTime),this.self.postMessage({action:"probeTs",result:L,data:C},[C.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(C){C=new Uint8Array(C.data,C.byteOffset,C.byteLength),this.transmuxer.push(C)}reset(){this.transmuxer.reset()}setTimestampOffset(C){C=C.timestampOffset||0,this.transmuxer.setBaseMediaDecodeTime(Math.round(di.secondsToVideoTs(C)))}setAudioAppendStart(C){this.transmuxer.setAudioAppendStart(Math.ceil(di.secondsToVideoTs(C.appendStart)))}setRemux(C){this.transmuxer.setRemux(C.remux)}flush(C){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(C){this.transmuxer.alignGopsWith(C.gopsToAlignWith.slice())}}self.onmessage=function(c){c.data.action==="init"&&c.data.options?this.messageHandlers=new tp(self,c.data.options):(this.messageHandlers||(this.messageHandlers=new tp(self)),c.data&&c.data.action&&c.data.action!=="init"&&this.messageHandlers[c.data.action]&&this.messageHandlers[c.data.action](c.data))}})));let Gm=(s,G,i)=>{var{type:a,initSegment:o,captions:H,captionStreams:l,metadata:h,videoFrameDtsTime:T,videoFramePtsTime:B}=s.data.segment,G=(G.buffer.push({captions:H,captionStreams:l,metadata:h}),s.data.segment.boxes||{data:s.data.segment.data}),H={type:a,data:new Uint8Array(G.data,G.data.byteOffset,G.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};typeof T<"u"&&(H.videoFrameDtsTime=T),typeof B<"u"&&(H.videoFramePtsTime=B),i(H)},$m=({transmuxedData:s,callback:t})=>{s.buffer=[],t(s)},Km=(s,t)=>{t.gopInfo=s.data.gopInfo},Uc=s=>{let{transmuxer:t,bytes:i,audioAppendStart:a,gopsToAlignWith:o,remux:l,onData:h,onTrackInfo:T,onAudioTimingInfo:B,onVideoTimingInfo:G,onVideoSegmentTimingInfo:H,onAudioSegmentTimingInfo:se,onId3:pe,onCaptions:ae,onDone:_e,onEndedTimeline:Ce,onTransmuxerLog:Le,isEndOfTimeline:xe,segment:Pe,triggerSegmentEventFn:Ae}=s,st={buffer:[]},Ue=xe;var ft,Et;t.onmessage=dt=>{t.currentTransmux!==s||(dt.data.action==="data"&&Gm(dt,st,h),dt.data.action==="trackinfo"&&T(dt.data.trackInfo),dt.data.action==="gopInfo"&&Km(dt,st),dt.data.action==="audioTimingInfo"&&B(dt.data.audioTimingInfo),dt.data.action==="videoTimingInfo"&&G(dt.data.videoTimingInfo),dt.data.action==="videoSegmentTimingInfo"&&H(dt.data.videoSegmentTimingInfo),dt.data.action==="audioSegmentTimingInfo"&&se(dt.data.audioSegmentTimingInfo),dt.data.action==="id3Frame"&&pe([dt.data.id3Frame],dt.data.id3Frame.dispatchType),dt.data.action==="caption"&&ae(dt.data.caption),dt.data.action==="endedtimeline"&&(Ue=!1,Ce()),dt.data.action==="log"&&Le(dt.data.log),dt.data.type!=="transmuxed")||Ue||(t.onmessage=null,$m({transmuxedData:st,callback:_e}),Fc(t))},t.onerror=()=>{var dt={message:"Received an error message from the transmuxer worker",metadata:{errorType:He.Error.StreamingFailedToTransmuxSegment,segmentInfo:lr({segment:Pe})}};_e(null,dt)},a&&t.postMessage({action:"setAudioAppendStart",appendStart:a}),Array.isArray(o)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:o}),typeof l<"u"&&t.postMessage({action:"setRemux",remux:l}),i.byteLength&&(ft=i instanceof ArrayBuffer?i:i.buffer,Et=i instanceof ArrayBuffer?0:i.byteOffset,Ae({type:"segmenttransmuxingstart",segment:Pe}),t.postMessage({action:"push",data:ft,byteOffset:Et,byteLength:i.byteLength},[ft])),xe&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Fc=s=>{s.currentTransmux=null,s.transmuxQueue.length&&(s.currentTransmux=s.transmuxQueue.shift(),typeof s.currentTransmux=="function"?s.currentTransmux():Uc(s.currentTransmux))},Bc=(s,t)=>{s.postMessage({action:t}),Fc(s)},Ym=(s,t)=>{t.currentTransmux?t.transmuxQueue.push(Bc.bind(null,t,s)):(t.currentTransmux=s,Bc(t,s))},zc=s=>{s.transmuxer.currentTransmux?s.transmuxer.transmuxQueue.push(s):(s.transmuxer.currentTransmux=s,Uc(s))};var jc=s=>{Ym("reset",s)},Zm=s=>{let t=new Xm,i=(t.currentTransmux=null,t.transmuxQueue=[],t.terminate);return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)),t.postMessage({action:"init",options:s}),t};function Hc(s){let t=0;return s.audio&&t++,s.video&&t++,t}function xs(s,t){var i=t.attributes||{},a=wa(function(o){if(o=o.attributes||{},o.CODECS)return Tn(o.CODECS)}(t)||[]);return!$c(s,t)||a.audio||((o,T)=>{if(!$c(o,T))return!0;var h,T=T.attributes||{},B=o.mediaGroups.AUDIO[T.AUDIO];for(h in B)if(!B[h].uri&&!B[h].playlists)return!0;return!1})(s,t)||(t=wa(function(o,l){if(o.mediaGroups.AUDIO&&l){var h=o.mediaGroups.AUDIO[l];if(h){for(var T in h)if(T=h[T],T.default&&T.playlists)return Tn(T.playlists[0].attributes.CODECS)}}return null}(s,i.AUDIO)||[])).audio&&(a.audio=t.audio),a}function Sa(s,t){return(s=s&&window.getComputedStyle(s))?s[t]:""}function ml(s,t){let i,a;return i=(i=s.attributes.BANDWIDTH?s.attributes.BANDWIDTH:i)||window.Number.MAX_VALUE,a=(a=t.attributes.BANDWIDTH?t.attributes.BANDWIDTH:a)||window.Number.MAX_VALUE,i-a}let zr=function(s){let t=s.transmuxer,i=s.endAction||s.action,a=s.callback;var o,l=Ii({},s,{endAction:null,transmuxer:null,callback:null});let h=T=>{T.data.action===i&&(t.removeEventListener("message",h),T.data.data&&(T.data.data=new Uint8Array(T.data.data,s.byteOffset||0,s.byteLength||T.data.data.byteLength),s.data)&&(s.data=T.data.data),a(T.data))};t.addEventListener("message",h),s.data?(o=s.data instanceof ArrayBuffer,l.byteOffset=o?0:s.data.byteOffset,l.byteLength=s.data.byteLength,o=[o?s.data:s.data.buffer],t.postMessage(l,o)):t.postMessage(l)},xn={FAILURE:2,TIMEOUT:-101,ABORTED:-102},qc="wvtt",gl=s=>{s.forEach(t=>{t.abort()})},Qm=s=>({bandwidth:s.bandwidth,bytesReceived:s.bytesReceived||0,roundTripTime:s.roundTripTime||0}),Jm=s=>{var t=s.target,t={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return t.bytesReceived=s.loaded,t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3),t},yl=(s,t)=>{var i=t.requestType,i=or({requestType:i,request:t,error:s});return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:xn.TIMEOUT,xhr:t,metadata:i}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:xn.ABORTED,xhr:t,metadata:i}:s?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:xn.FAILURE,xhr:t,metadata:i}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:xn.FAILURE,xhr:t,metadata:i}:null},Vc=(s,t,i,a)=>(T,l)=>{var h=l.response,T=yl(T,l);if(T)return i(T,s);if(h.byteLength!==16)return i({status:l.status,message:"Invalid HLS key at URL: "+l.uri,code:xn.FAILURE,xhr:l},s);var T=new DataView(h),B=new Uint32Array([T.getUint32(0),T.getUint32(4),T.getUint32(8),T.getUint32(12)]);for(let G=0;G<t.length;G++)t[G].bytes=B;return h={uri:l.uri},a({type:"segmentkeyloadcomplete",segment:s,keyInfo:h}),i(null,s)},eg=(s,t)=>{t===qc&&s.transmuxer.postMessage({action:"initMp4WebVttParser",data:s.map.bytes})},tg=(s,t,i)=>{t===qc&&zr({action:"getMp4WebVttText",data:s.bytes,transmuxer:s.transmuxer,callback:({data:a,mp4VttCues:o})=>{s.bytes=a,i(null,s,{mp4VttCues:o})}})},Wc=(s,t)=>{var i,a=il(s.map.bytes);if(a!=="mp4")return i=s.map.resolvedUri||s.map.uri,t({internal:!0,message:`Found unsupported ${a=a||"unknown"} container for initialization segment at URL: `+i,code:xn.FAILURE,metadata:{mediaType:a}});zr({action:"probeMp4Tracks",data:s.map.bytes,transmuxer:s.transmuxer,callback:({tracks:o,data:l})=>(s.map.bytes=l,o.forEach(function(h){s.map.tracks=s.map.tracks||{},s.map.tracks[h.type]||(typeof(s.map.tracks[h.type]=h).id=="number"&&h.timescale&&(s.map.timescales=s.map.timescales||{},s.map.timescales[h.id]=h.timescale),h.type==="text"&&eg(s,h.codec))}),t(null))})},ig=({segment:s,bytes:t,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:l,id3Fn:h,captionsFn:T,isEndOfTimeline:B,endedTimelineFn:G,dataFn:H,doneFn:se,onTransmuxerLog:pe,triggerSegmentEventFn:ae})=>{var _e=s.map&&s.map.tracks||{};let Ce=!!(_e.audio&&_e.video),Le=a.bind(null,s,"audio","start"),xe=a.bind(null,s,"audio","end"),Pe=a.bind(null,s,"video","start"),Ae=a.bind(null,s,"video","end");zr({action:"probeTs",transmuxer:s.transmuxer,data:t,baseStartTime:s.baseStartTime,callback:st=>{s.bytes=t=st.data,st=st.result,st&&(i(s,{hasAudio:st.hasAudio,hasVideo:st.hasVideo,isMuxed:Ce}),i=null),zc({bytes:t,transmuxer:s.transmuxer,audioAppendStart:s.audioAppendStart,gopsToAlignWith:s.gopsToAlignWith,remux:Ce,onData:Ue=>{Ue.type=Ue.type==="combined"?"video":Ue.type,H(s,Ue)},onTrackInfo:Ue=>{i&&(Ce&&(Ue.isMuxed=!0),i(s,Ue))},onAudioTimingInfo:Ue=>{Le&&typeof Ue.start<"u"&&(Le(Ue.start),Le=null),xe&&typeof Ue.end<"u"&&xe(Ue.end)},onVideoTimingInfo:Ue=>{Pe&&typeof Ue.start<"u"&&(Pe(Ue.start),Pe=null),Ae&&typeof Ue.end<"u"&&Ae(Ue.end)},onVideoSegmentTimingInfo:Ue=>{var ft={pts:{start:Ue.start.presentation,end:Ue.end.presentation},dts:{start:Ue.start.decode,end:Ue.end.decode}};ae({type:"segmenttransmuxingtiminginfoavailable",segment:s,timingInfo:ft}),o(Ue)},onAudioSegmentTimingInfo:Ue=>{var ft={pts:{start:Ue.start.pts,end:Ue.end.pts},dts:{start:Ue.start.dts,end:Ue.end.dts}};ae({type:"segmenttransmuxingtiminginfoavailable",segment:s,timingInfo:ft}),l(Ue)},onId3:(Ue,ft)=>{h(s,Ue,ft)},onCaptions:Ue=>{T(s,[Ue])},isEndOfTimeline:B,onEndedTimeline:()=>{G()},onTransmuxerLog:pe,onDone:(Ue,ft)=>{se&&(Ue.type=Ue.type==="combined"?"video":Ue.type,ae({type:"segmenttransmuxingcomplete",segment:s}),se(ft,s,Ue))},segment:s,triggerSegmentEventFn:ae})}})},Xc=({segment:s,bytes:t,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:l,id3Fn:h,captionsFn:T,isEndOfTimeline:B,endedTimelineFn:G,dataFn:H,doneFn:se,onTransmuxerLog:pe,triggerSegmentEventFn:ae})=>{let _e=new Uint8Array(t);if(Om(_e)){s.isFmp4=!0;let Ce=s.map.tracks;if(Ce.text&&(!Ce.audio||!Ce.video))return H(s,{data:_e,type:"text"}),void tg(s,Ce.text.codec,se);let Le={isFmp4:!0,hasVideo:!!Ce.video,hasAudio:!!Ce.audio},xe=(Ce.audio&&Ce.audio.codec&&Ce.audio.codec!=="enca"&&(Le.audioCodec=Ce.audio.codec),Ce.video&&Ce.video.codec&&Ce.video.codec!=="encv"&&(Le.videoCodec=Ce.video.codec),Ce.video&&Ce.audio&&(Le.isMuxed=!0),i(s,Le),(Pe,Ae)=>{H(s,{data:_e,type:Le.hasAudio&&!Le.isMuxed?"audio":"video"}),Ae&&Ae.length&&h(s,Ae),Pe&&Pe.length&&T(s,Pe),se(null,s,{})});zr({action:"probeMp4StartTime",timescales:s.map.timescales,data:_e,transmuxer:s.transmuxer,callback:({data:Pe,startTime:Ae})=>{t=Pe.buffer,s.bytes=_e=Pe,Le.hasAudio&&!Le.isMuxed&&a(s,"audio","start",Ae),Le.hasVideo&&a(s,"video","start",Ae),zr({action:"probeEmsgID3",data:_e,transmuxer:s.transmuxer,offset:Ae,callback:({emsgData:st,id3Frames:Ue})=>{t=st.buffer,s.bytes=_e=st,Ce.video&&st.byteLength&&s.transmuxer?zr({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:s.transmuxer,data:_e,timescales:s.map.timescales,trackIds:[Ce.video.id],callback:ft=>{t=ft.data.buffer,s.bytes=_e=ft.data,ft.logs.forEach(function(Et){pe(Qt(Et,{stream:"mp4CaptionParser"}))}),xe(ft.captions,Ue)}}):xe(void 0,Ue)}})}})}else s.transmuxer?(typeof s.container>"u"&&(s.container=il(_e)),s.container!=="ts"&&s.container!=="aac"?(i(s,{hasAudio:!1,hasVideo:!1}),se(null,s,{})):ig({segment:s,bytes:t,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:l,id3Fn:h,captionsFn:T,isEndOfTimeline:B,endedTimelineFn:G,dataFn:H,doneFn:se,onTransmuxerLog:pe,triggerSegmentEventFn:ae})):se(null,s,{})},Gc=function({id:s,key:t,encryptedBytes:i,decryptionWorker:a,segment:o,doneFn:l},h){let T=G=>{G.data.source===s&&(a.removeEventListener("message",T),G=G.data.decrypted,h(new Uint8Array(G.bytes,G.byteOffset,G.byteLength)))};a.onerror=()=>{var H="An error occurred in the decryption worker",G=lr({segment:o}),H={message:H,metadata:{error:new Error(H),errorType:He.Error.StreamingFailedToDecryptSegment,segmentInfo:G,keyInfo:{uri:o.key.resolvedUri||o.map.key.resolvedUri}}};l(H,o)},a.addEventListener("message",T);let B;B=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),a.postMessage(kc({source:s,encrypted:i,key:B,iv:t.iv}),[i.buffer,B.buffer])},ng=({decryptionWorker:s,segment:t,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:l,id3Fn:h,captionsFn:T,isEndOfTimeline:B,endedTimelineFn:G,dataFn:H,doneFn:se,onTransmuxerLog:pe,triggerSegmentEventFn:ae})=>{ae({type:"segmentdecryptionstart"}),Gc({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:s,segment:t,doneFn:se},_e=>{t.bytes=_e,ae({type:"segmentdecryptioncomplete",segment:t}),Xc({segment:t,bytes:t.bytes,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:l,id3Fn:h,captionsFn:T,isEndOfTimeline:B,endedTimelineFn:G,dataFn:H,doneFn:se,onTransmuxerLog:pe,triggerSegmentEventFn:ae})})},rg=({xhr:s,xhrOptions:t,decryptionWorker:jt,segment:a,abortFn:o,progressFn:l,trackInfoFn:Zt,timingInfoFn:Ti,videoSegmentTimingInfoFn:B,audioSegmentTimingInfoFn:G,id3Fn:H,captionsFn:se,isEndOfTimeline:pe,endedTimelineFn:ae,dataFn:_e,doneFn:Ce,onTransmuxerLog:xt,triggerSegmentEventFn:xe})=>{let Pe=[];var Ae,st,Ue,ft,Et,dt,Ot,Ct,Lt,jt=(({activeXhrs:si,decryptionWorker:lt,trackInfoFn:ht,timingInfoFn:Ft,videoSegmentTimingInfoFn:Xt,audioSegmentTimingInfoFn:Ci,id3Fn:Jt,captionsFn:ji,isEndOfTimeline:fi,endedTimelineFn:Wt,dataFn:Gt,doneFn:Mt,onTransmuxerLog:Ht,triggerSegmentEventFn:sn})=>{let an=0,Mn=!1;return(ur,li)=>{if(!Mn){if(ur)return Mn=!0,gl(si),Mt(ur,li);if((an+=1)===si.length){let Vr=function(){if(li.encryptedBytes)return ng({decryptionWorker:lt,segment:li,trackInfoFn:ht,timingInfoFn:Ft,videoSegmentTimingInfoFn:Xt,audioSegmentTimingInfoFn:Ci,id3Fn:Jt,captionsFn:ji,isEndOfTimeline:fi,endedTimelineFn:Wt,dataFn:Gt,doneFn:Mt,onTransmuxerLog:Ht,triggerSegmentEventFn:sn});Xc({segment:li,bytes:li.bytes,trackInfoFn:ht,timingInfoFn:Ft,videoSegmentTimingInfoFn:Xt,audioSegmentTimingInfoFn:Ci,id3Fn:Jt,captionsFn:ji,isEndOfTimeline:fi,endedTimelineFn:Wt,dataFn:Gt,doneFn:Mt,onTransmuxerLog:Ht,triggerSegmentEventFn:sn})};if(li.endOfAllRequests=Date.now(),li.map&&li.map.encryptedBytes&&!li.map.bytes)return sn({type:"segmentdecryptionstart",segment:li}),Gc({decryptionWorker:lt,id:li.requestId+"-init",encryptedBytes:li.map.encryptedBytes,key:li.map.key,segment:li,doneFn:Mt},Ns=>{li.map.bytes=Ns,sn({type:"segmentdecryptioncomplete",segment:li}),Wc(li,Wr=>{if(Wr)return gl(si),Mt(Wr,li);Vr()})});Vr()}}}})({activeXhrs:Pe,decryptionWorker:jt,trackInfoFn:Zt,timingInfoFn:Ti,videoSegmentTimingInfoFn:B,audioSegmentTimingInfoFn:G,id3Fn:H,captionsFn:se,isEndOfTimeline:pe,endedTimelineFn:ae,dataFn:_e,doneFn:Ce,onTransmuxerLog:xt,triggerSegmentEventFn:xe}),xt=(a.key&&!a.key.bytes&&(Zt=[a.key],a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&Zt.push(a.map.key),Ti=Qt(t,{uri:a.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),B=Vc(a,Zt,jt,xe),xe({type:"segmentkeyloadstart",segment:a,keyInfo:{uri:a.key.resolvedUri}}),G=s(Ti,B),Pe.push(G)),a.map&&!a.map.bytes&&(!a.map.key||a.key&&a.key.resolvedUri===a.map.key.resolvedUri||(H=Qt(t,{uri:a.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),se=Vc(a,[a.map.key],jt,xe),xe({type:"segmentkeyloadstart",segment:a,keyInfo:{uri:a.map.key.resolvedUri}}),pe=s(H,se),Pe.push(pe)),ae=Qt(t,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:pl(a.map),requestType:"segment-media-initialization"}),{segment:Ae,finishProcessingFn:st,triggerSegmentEventFn:Ue}=[{segment:a,finishProcessingFn:jt,triggerSegmentEventFn:xe}][0],_e=(ht,lt)=>{var ht=yl(ht,lt);return ht?st(ht,Ae):(ht=new Uint8Array(lt.response),Ue({type:"segmentloaded",segment:Ae}),Ae.map.key?(Ae.map.encryptedBytes=ht,st(null,Ae)):(Ae.map.bytes=ht,void Wc(Ae,function(Ft){if(Ft)return Ft.xhr=lt,Ft.status=lt.status,st(Ft,Ae);st(null,Ae)})))},xe({type:"segmentloadstart",segment:a}),Ce=s(ae,_e),Pe.push(Ce)),Qt(t,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:pl(a),requestType:"segment"})),Zt=({segment:ft,finishProcessingFn:Et,responseType:dt,triggerSegmentEventFn:Ot}=[{segment:a,finishProcessingFn:jt,responseType:xt.responseType,triggerSegmentEventFn:xe}][0],(si,lt)=>(si=yl(si,lt),si?Et(si,ft):(Ot({type:"segmentloaded",segment:ft}),si=dt!=="arraybuffer"&&lt.responseText?Wm(lt.responseText.substring(ft.lastReachedChar||0)):lt.response,ft.stats=Qm(lt),ft.key?ft.encryptedBytes=new Uint8Array(si):ft.bytes=new Uint8Array(si),Et(null,ft)))),Ti=(xe({type:"segmentloadstart",segment:a}),s(xt,Zt));Ti.addEventListener("progress",({segment:Ct,progressFn:Lt}=[{segment:a,progressFn:l}][0],si=>{var lt=si.target;if(!lt.aborted)return Ct.stats=Qt(Ct.stats,Jm(si)),!Ct.stats.firstBytesReceivedAt&&Ct.stats.bytesReceived&&(Ct.stats.firstBytesReceivedAt=Date.now()),Lt(si,Ct)})),Pe.push(Ti);let mn={};return Pe.forEach(si=>{var lt,ht;si.addEventListener("loadend",({loadendState:lt,abortFn:ht}=[{loadendState:mn,abortFn:o}][0],Ft=>{Ft.target.aborted&&ht&&!lt.calledAbortFn&&(ht(),lt.calledAbortFn=!0)}))}),()=>gl(Pe)},sg=un("CodecUtils"),$c=(s,t)=>(t=t.attributes||{},s&&s.mediaGroups&&s.mediaGroups.AUDIO&&t.AUDIO&&s.mediaGroups.AUDIO[t.AUDIO]),wa=function(s){let t={};return s.forEach(({mediaType:i,type:a,details:o})=>{t[i]=t[i]||[],t[i].push(od(""+a+o))}),Object.keys(t).forEach(function(i){1<t[i].length?(sg(`multiple ${i} codecs found as attributes: ${t[i].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),t[i]=null):t[i]=t[i][0]}),t},vl=un("PlaylistSelector"),Kc=function(s){var t;if(s&&s.playlist)return t=s.playlist,JSON.stringify({id:t.id,bandwidth:s.bandwidth,width:s.width,height:s.height,codecs:t.attributes&&t.attributes.CODECS||""})},jr=function(s,t){let i=s.slice();s.sort(function(a,o){var l=t(a,o);return l===0?i.indexOf(a)-i.indexOf(o):l})};function Yc(s,t,i,a,o,l){if(s){var h={bandwidth:t,width:i,height:a,limitRenditionByPlayerDimensions:o};let G=s.playlists,H=(tn.isAudioOnly(s)&&(G=l.getAudioTrackPlaylists_(),h.audioOnly=!0),G.map(ae=>{var _e=ae.attributes&&ae.attributes.RESOLUTION&&ae.attributes.RESOLUTION.width,Ce=ae.attributes&&ae.attributes.RESOLUTION&&ae.attributes.RESOLUTION.height,Le=ae.attributes&&ae.attributes.BANDWIDTH;return{bandwidth:Le||window.Number.MAX_VALUE,width:_e,height:Ce,playlist:ae}})),se=(jr(H,(ae,_e)=>ae.bandwidth-_e.bandwidth),(H=H.filter(ae=>!tn.isIncompatible(ae.playlist))).filter(ae=>tn.isEnabled(ae.playlist)));s=(se=se.length?se:H.filter(ae=>!tn.isDisabled(ae.playlist))).filter(ae=>ae.bandwidth*Mi.BANDWIDTH_VARIANCE<t);let pe=s[s.length-1];var T=s.filter(ae=>ae.bandwidth===pe.bandwidth)[0];if(o===!1){let ae=T||se[0]||H[0];if(ae&&ae.playlist){let _e=T?"bandwidthBestRep":"sortedPlaylistReps";return se[0]&&(_e="enabledPlaylistReps"),vl(`choosing ${Kc(ae)} using ${_e} with options`,h),ae.playlist}}else{var B,o=s.filter(Ae=>Ae.width&&Ae.height),s=(jr(o,(Ae,st)=>Ae.width-st.width),o.filter(Ae=>Ae.width===i&&Ae.height===a)),s=(pe=s[s.length-1],s.filter(Ae=>Ae.bandwidth===pe.bandwidth)[0]);let Ce,Le;s||(B=(Ce=o.filter(Ae=>Ae.width>i||a<Ae.height)).filter(Ae=>Ae.width===Ce[0].width&&Ae.height===Ce[0].height),pe=B[B.length-1],Le=B.filter(Ae=>Ae.bandwidth===pe.bandwidth)[0]);let xe,Pe=(l.leastPixelDiffSelector&&(B=o.map(Ae=>(Ae.pixelDiff=Math.abs(Ae.width-i)+Math.abs(Ae.height-a),Ae)),jr(B,(Ae,st)=>Ae.pixelDiff===st.pixelDiff?st.bandwidth-Ae.bandwidth:Ae.pixelDiff-st.pixelDiff),xe=B[0]),xe||Le||s||T||se[0]||H[0]);if(Pe&&Pe.playlist){let Ae="sortedPlaylistReps";return xe?Ae="leastPixelDiffRep":Le?Ae="resolutionPlusOneRep":s?Ae="resolutionBestRep":T?Ae="bandwidthBestRep":se[0]&&(Ae="enabledPlaylistReps"),vl(`choosing ${Kc(Pe)} using ${Ae} with options`,h),Pe.playlist}}return vl("could not choose a playlist with options",h),null}}function Zc(){let s=this.useDevicePixelRatio&&window.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(s=this.customPixelRatio),Yc(this.playlists.main,this.systemBandwidth,parseInt(Sa(this.tech_.el(),"width"),10)*s,parseInt(Sa(this.tech_.el(),"height"),10)*s,this.limitRenditionByPlayerDimensions,this.playlistController_)}function Qc(s){try{return new URL(s).pathname.split("/").slice(-2).join("/")}catch{return""}}function ks(s,t,i){let a;var o;if(i&&i.cues)for(a=i.cues.length;a--;)(o=i.cues[a]).startTime>=s&&o.endTime<=t&&i.removeCue(o)}let ag=({inbandTextTracks:s,metadataArray:t,timestampOffset:i,videoDuration:a})=>{if(t){let h=window.WebKitDataCue||window.VTTCue,T=s.metadataTrack_;if(T&&(t.forEach(B=>{let G=B.cueTime+i;!(typeof G!="number"||window.isNaN(G)||G<0)&&G<1/0&&B.frames&&B.frames.length&&B.frames.forEach(H=>{var se,pe=new h(G,G,H.value||H.url||H.data||"");pe.frame=H,pe.value=H,se=pe,Object.defineProperties(se.frame,{id:{get(){return He.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),se.value.key}},value:{get(){return He.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),se.value.data}},privateData:{get(){return He.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),se.value.data}}}),T.addCue(pe)})}),T.cues)&&T.cues.length){var o=T.cues,l=[];for(let H=0;H<o.length;H++)o[H]&&l.push(o[H]);let B=l.reduce((H,se)=>{var pe=H[se.startTime]||[];return pe.push(se),H[se.startTime]=pe,H},{}),G=Object.keys(B).sort((H,se)=>Number(H)-Number(se));G.forEach((ae,se)=>{var pe=B[ae],ae=isFinite(a)?a:ae;let _e=Number(G[se+1])||ae;pe.forEach(Ce=>{Ce.endTime=_e})})}}},og={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},lg=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Jc=(s,t,i)=>{s.metadataTrack_||(s.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,He.browser.IS_ANY_SAFARI)||(s.metadataTrack_.inBandMetadataTrackDispatchType=t)},eh=s=>typeof s=="number"&&isFinite(s),Hr=ae=>{var{startOfSegment:t,duration:i,segment:a,part:o,playlist:{mediaSequence:l,id:h,segments:H=[]},mediaIndex:T,partIndex:B,timeline:G}=ae,H=H.length-1;let se="mediaIndex/partIndex increment";ae.getMediaInfoForTime?se=`getMediaInfoForTime (${ae.getMediaInfoForTime})`:ae.isSyncRequest&&(se="getSyncSegmentCandidate (isSyncRequest)"),ae.independent&&(se+=" with independent "+ae.independent);var pe=typeof B=="number",ae=ae.segment.uri?"segment":"pre-segment",_e=pe?uc({preloadSegment:a})-1:0;return ae+` [${l+T}/${l+H}]`+(pe?` part [${B}/${_e}]`:"")+` segment start/end [${a.start} => ${a.end}]`+(pe?` part start/end [${o.start} => ${o.end}]`:"")+` startOfSegment [${t}] duration [${i}] timeline [${G}] selected by [${se}] playlist [${h}]`},th=s=>s+"TimingInfo",bl=({timelineChangeController:s,currentTimeline:t,segmentTimeline:i,loaderType:a,audioDisabled:o})=>!(t===i||(a==="audio"?(t=s.lastTimelineChange({type:"main"}))&&t.to===i:a!=="main"||!o||(t=s.pendingTimelineChange({type:"audio"}))&&t.to===i)),Hn=s=>{var t,i,a,o=s.pendingSegment_;o&&bl({timelineChangeController:s.timelineChangeController_,currentTimeline:s.currentTimeline_,segmentTimeline:o.timeline,loaderType:s.loaderType_,audioDisabled:s.audioDisabled_})&&((o=s.timelineChangeController_)&&(t=o.pendingTimelineChange({type:"audio"}),o=o.pendingTimelineChange({type:"main"}),a=(i=t&&o)&&t.to!==o.to,i)&&t.from!==-1&&o.from!==-1&&a)&&(t=(i=s).timelineChangeController_.pendingTimelineChange({type:"audio"}),i=i.timelineChangeController_.pendingTimelineChange({type:"main"}),t&&i&&t.to<i.to?s.timelineChangeController_.trigger("audioTimelineBehind"):s.timelineChangeController_.trigger("fixBadTimelineChange"))},ih=({segmentDuration:s,maxDuration:t})=>!!s&&Math.round(s)>t+En,ug=(s,t)=>{var i,a,o;return t==="hls"&&(t=(l=>{let h=0;return["video","audio"].forEach(function(T){if(T=l[T+"TimingInfo"],T){var{start:T,end:B}=T;let H;typeof T=="bigint"||typeof B=="bigint"?H=window.BigInt(B)-window.BigInt(T):typeof T=="number"&&typeof B=="number"&&(H=B-T),typeof H<"u"&&H>h&&(h=H)}}),h=typeof h=="bigint"&&h<Number.MAX_SAFE_INTEGER?Number(h):h})({audioTimingInfo:s.audioTimingInfo,videoTimingInfo:s.videoTimingInfo}))&&(i=s.playlist.targetDuration,a=ih({segmentDuration:t,maxDuration:2*i}),o=ih({segmentDuration:t,maxDuration:i}),t=`Segment with index ${s.mediaIndex} from playlist ${s.playlist.id} has a duration of ${t} when the reported duration is ${s.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`,a||o)?{severity:a?"warn":"info",message:t}:null},lr=({type:s,segment:t})=>{var i,a,o;if(t)return i=!!(t.key||t.map&&t.map.ke),a=!!(t.map&&!t.map.bytes),o=t.startOfSegment===void 0?t.start:t.startOfSegment,{type:s||t.type,uri:t.resolvedUri||t.uri,start:o,duration:t.duration,isEncrypted:i,isMediaInitialization:a}};class _l extends He.EventTarget{constructor(t,i=0){if(super(),!t)throw new TypeError("Initialization settings are required");if(typeof t.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.vhs_=t.vhs,this.loaderType_=t.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.sourceType_=t.sourceType,this.sourceUpdater_=t.sourceUpdater,this.inbandTextTracks_=t.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=t.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=t.parse708captions,this.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,this.captionServices_=t.captionServices,this.exactManifestTimings=t.exactManifestTimings,this.addMetadataToTextTrack=t.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=t.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=un(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Hn(this)}),this.sourceUpdater_.on("codecschange",a=>{this.trigger(Ii({type:"codecschange"},a))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Hn(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",a=>{this.trigger(Ii({type:"timelinechange"},a)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Hn(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Hn(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return Zm({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){this.state!=="WAITING"?(this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(t){return this.state!=="APPENDING"||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)}error(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&jc(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return zi();if(this.loaderType_==="main"){var{hasAudio:t,hasVideo:i,isMuxed:a}=t;if(i&&t&&!this.audioDisabled_&&!a)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(t,i=!1){if(!t)return null;var a=Ta(t);let o=this.initSegments_[a];return i&&!o&&t.bytes&&(this.initSegments_[a]=o={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),o||t}segmentKey(t,i=!1){if(!t)return null;var a=xc(t);let o=this.keyCache_[a];return this.cacheEncryptionKeys_&&i&&!o&&t.bytes&&(this.keyCache_[a]=o={resolvedUri:t.resolvedUri,bytes:t.bytes}),i={resolvedUri:(o||t).resolvedUri},o&&(i.bytes=o.bytes),i}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return this.state==="INIT"&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(t,i={}){if(t&&!(this.playlist_&&this.playlist_.endList&&t.endList&&this.playlist_.uri===t.uri)){var a,o=this.playlist_,l=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=i,this.state==="INIT"&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},this.loaderType_==="main")&&this.syncController_.setDateTimeMappingForStart(t);let h=null;if(o&&(o.id?h=o.id:o.uri&&(h=o.uri)),this.logger_(`playlist update [${h} => ${t.id||t.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(t,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${nl(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();o&&o.uri===t.uri?(i=t.mediaSequence-o.mediaSequence,this.logger_(`live window shift [${i}]`),this.mediaIndex!==null&&(this.mediaIndex-=i,this.mediaIndex<0?(this.mediaIndex=null,this.partIndex=null):(a=this.playlist_.segments[this.mediaIndex],!this.partIndex||a.parts&&a.parts.length&&a.parts[this.partIndex]||(a=this.mediaIndex,this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=a))),l&&(l.mediaIndex-=i,l.mediaIndex<0?(l.mediaIndex=null,l.partIndex=null):(0<=l.mediaIndex&&(l.segment=t.segments[l.mediaIndex]),0<=l.partIndex&&l.segment.parts&&(l.part=l.segment.parts[l.partIndex]))),this.syncController_.saveExpiredSegmentInfo(o,t)):(this.mediaIndex!==null&&(!t.endList&&typeof t.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate"))}}pause(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&jc(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;var t=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_!=="hls"||t||(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(t,i,a=()=>{},o=!1){if((i=i===1/0?this.duration_():i)<=t)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){let T=1;var l,h=()=>{--T===0&&a()};for(l in!o&&this.audioDisabled_||(T++,this.sourceUpdater_.removeAudio(t,i,h)),!o&&this.loaderType_!=="main"||(this.gopBuffer_=((B,_e,H,se)=>{var pe=Math.ceil((_e-se)*sr),ae=Math.ceil((H-se)*sr),_e=B.slice();let Ce=B.length;for(;Ce--&&!(B[Ce].pts<=ae););if(Ce!==-1){let Le=Ce+1;for(;Le--&&!(B[Le].pts<=pe););Le=Math.max(Le,0),_e.splice(Le,Ce-Le+1)}return _e})(this.gopBuffer_,t,i,this.timeMapping_),T++,this.sourceUpdater_.removeVideo(t,i,h)),this.inbandTextTracks_)ks(t,i,this.inbandTextTracks_[l]);ks(t,i,this.segmentMetadataTrack_),h()}else this.logger_("skipping remove because no source updater or starting media info")}monitorBuffer_(){this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){var t,i;this.sourceUpdater_.updating()||(t=this.chooseNextRequest_())&&(i={segmentInfo:lr({type:this.loaderType_,segment:t})},this.trigger({type:"segmentselected",metadata:i}),typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}isEndOfStream_(t=this.mediaIndex,i=this.playlist_,a=this.partIndex){var o;return!(!i||!this.mediaSource_)&&(o=typeof t=="number"&&i.segments[t],t=t+1===i.segments.length,a=!o||!o.parts||a+1===o.parts.length,i.endList)&&this.mediaSource_.readyState==="open"&&t&&a}chooseNextRequest_(){var i=this.buffered_(),t=nl(i)||0,i=rl(i,this.currentTime_()),a=!this.hasPlayed_()&&1<=i,o=i>=this.goalBufferLength_(),l=this.playlist_.segments;if(!l.length||a||o)return null;if(this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_),a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_},a.isSyncRequest)a.mediaIndex=function(B,G,H){G=G||[];var se=[];let pe=0;for(let _e=0;_e<G.length;_e++){var ae=G[_e];if(B===ae.timeline&&(se.push(_e),(pe+=ae.duration)>H))return _e}return se.length===0?0:se[se.length-1]}(this.currentTimeline_,l,t),this.logger_("choose next request. Can not find sync point. Fallback to media Index: "+a.mediaIndex);else if(this.mediaIndex!==null){var o=l[this.mediaIndex],h=typeof this.partIndex=="number"?this.partIndex:-1;a.startOfSegment=o.end||t,o.parts&&o.parts[h+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=h+1):a.mediaIndex=this.mediaIndex+1}else{let B,G,H;if(o=this.fetchAtBuffer_?t:this.currentTime_(),this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${o}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){if(h=this.getSyncInfoFromMediaSequenceSync_(o),!h)return this.error({message:t="No sync info found while using media sequence sync",metadata:{errorType:He.Error.StreamingFailedToSelectNextSegment,error:new Error(t)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null;this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${h.start} --> ${h.end})`),B=h.segmentIndex,G=h.partIndex,H=h.start}else this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint."),t=tn.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:o,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),B=t.segmentIndex,G=t.partIndex,H=t.startTime;a.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+o:"currentTime "+o,a.mediaIndex=B,a.startOfSegment=H,a.partIndex=G,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${a.mediaIndex} `)}h=l[a.mediaIndex];let T=h&&typeof a.partIndex=="number"&&h.parts&&h.parts[a.partIndex];return!h||typeof a.partIndex=="number"&&!T?null:(typeof a.partIndex!="number"&&h.parts&&(a.partIndex=0,T=h.parts[0]),t=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments,i||!T||t||T.independent||(a.partIndex===0?(i=(o=l[a.mediaIndex-1]).parts&&o.parts.length&&o.parts[o.parts.length-1])&&i.independent&&(--a.mediaIndex,a.partIndex=o.parts.length-1,a.independent="previous segment"):h.parts[a.partIndex-1].independent&&(--a.partIndex,a.independent="previous part")),t=this.mediaSource_&&this.mediaSource_.readyState==="ended",a.mediaIndex>=l.length-1&&t&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,a.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(a)))}getSyncInfoFromMediaSequenceSync_(t){var i;return this.mediaSequenceSync_&&(t!==(i=Math.max(t,this.mediaSequenceSync_.start))&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${t} to `+i),t=this.mediaSequenceSync_.getSyncInfoForTime(i))?t.isAppended?(i=this.mediaSequenceSync_.getSyncInfoForTime(t.end))?(i.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),i):null:t:null}generateSegmentInfo_(i){var{independent:i,playlist:a,mediaIndex:G,startOfSegment:o,isSyncRequest:se,partIndex:H,forceTimestampOffset:l,getMediaInfoForTime:h}=i,T=a.segments[G],B=typeof H=="number"&&T.parts[H],G={requestId:"segment-loader-"+Math.random(),uri:B&&B.resolvedUri||T.resolvedUri,mediaIndex:G,partIndex:B?H:null,isSyncRequest:se,startOfSegment:o,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:T.timeline,duration:B&&B.duration||T.duration,segment:T,part:B,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:h,independent:i},H=typeof l<"u"?l:this.isPendingTimestampOffset_,se=(G.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:T.timeline,currentTimeline:this.currentTimeline_,startOfSegment:o,buffered:this.buffered_(),overrideCheck:H}),nl(this.sourceUpdater_.audioBuffered()));return typeof se=="number"&&(G.audioAppendStart=se-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(G.gopsToAlignWith=((pe,ae,_e)=>{if(typeof ae>"u"||ae===null||!pe.length)return[];var Ce=Math.ceil((ae-_e+3)*sr);let Le;for(Le=0;Le<pe.length&&!(pe[Le].pts>Ce);Le++);return pe.slice(Le)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),G}timestampOffsetForSegment_(t){return{segmentTimeline:t,currentTimeline:i,startOfSegment:a,buffered:o,overrideCheck:l}=[t][0],l||t!==i?!(t<i)&&o.length?o.end(o.length-1):a:null;var i,a,o,l}earlyAbortWhenNeeded_(t){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var i=this.currentTime_(),a=t.bandwidth,o=this.pendingSegment_.duration,t=tn.estimateSegmentRequestTime(o,a,this.playlist_,t.bytesReceived),l=([l,h,T=1]=[this.buffered_(),i,this.vhs_.tech_.playbackRate()],((l.length?l.end(l.length-1):0)-h)/T-1);if(!(t<=l)){var h=function(Ae){let{main:H,currentTime:se,bandwidth:pe,duration:ae,segmentDuration:_e,timeUntilRebuffer:Ce,currentTimeline:Le,syncController:xe}=Ae;Ae=H.playlists.filter(Ue=>!tn.isIncompatible(Ue));let Pe=Ae.filter(tn.isEnabled);var Ae=(Pe=Pe.length?Pe:Ae.filter(Ue=>!tn.isDisabled(Ue))).filter(tn.hasAttribute.bind(null,"BANDWIDTH")).map(Ue=>{var ft=xe.getSyncPoint(Ue,ae,Le,se)?1:2;return{playlist:Ue,rebufferingImpact:tn.estimateSegmentRequestTime(_e,pe,Ue)*ft-Ce}}),st=Ae.filter(Ue=>Ue.rebufferingImpact<=0);return jr(st,(Ue,ft)=>ml(ft.playlist,Ue.playlist)),st.length?st[0]:(jr(Ae,(Ue,ft)=>Ue.rebufferingImpact-ft.rebufferingImpact),Ae[0]||null)}({main:this.vhs_.playlists.main,currentTime:i,bandwidth:a,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(h){var T=t-l-h.rebufferingImpact;let G=.5;l<=En&&(G=1),!h.playlist||h.playlist.uri===this.playlist_.uri||T<G||(this.bandwidth=h.playlist.attributes.BANDWIDTH*Mi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}}handleAbort_(t){this.logger_("Aborting "+Hr(t)),this.mediaRequestsAborted+=1}handleProgress_(t,i){this.earlyAbortWhenNeeded_(i.stats),this.checkForAbort_(i.requestId)||this.trigger("progress")}handleTrackInfo_(t,i){var{hasAudio:o,hasVideo:a}=i,o={segmentInfo:lr({type:this.loaderType_,segment:t}),trackInfo:{hasAudio:o,hasVideo:a}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:o}),this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.checkForIllegalMediaSwitch(i)||(function(l,h){if(!l&&!h||!l&&h||l&&!h)return!1;if(l!==h){var T=Object.keys(l).sort(),B=Object.keys(h).sort();if(T.length!==B.length)return!1;for(let H=0;H<T.length;H++){var G=T[H];if(G!==B[H]||l[G]!==h[G])return!1}}return!0}(this.currentMediaInfo_,i=i||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=i,this.currentMediaInfo_=i,this.logger_("trackinfo update",i),this.trigger("trackinfo")),this.checkForAbort_(t.requestId))||(this.pendingSegment_.trackInfo=i,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Hn(this))}handleTimingInfo_(t,i,a,o){var l;this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||((t=this.pendingSegment_)[l=th(i)]=t[l]||{},t[l][a]=o,this.logger_(`timinginfo: ${i} - ${a} - `+o),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Hn(this))}handleCaptions_(t,i){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(i.length===0)this.logger_("SegmentLoader received no captions from a caption event");else if(this.pendingSegment_.hasAppendedData_){let a=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),o={};i.forEach(l=>{o[l.stream]=o[l.stream]||{startTime:1/0,captions:[],endTime:0};var h=o[l.stream];h.startTime=Math.min(h.startTime,l.startTime+a),h.endTime=Math.max(h.endTime,l.endTime+a),h.captions.push(l)}),Object.keys(o).forEach(l=>{var{startTime:h,endTime:T,captions:B}=o[l],G=this.inbandTextTracks_;this.logger_(`adding cues from ${h} -> ${T} for `+l),function(H,se,pe){if(!H[pe]){se.trigger({type:"usage",name:"vhs-608"});let _e=pe;/^cc708_/.test(pe)&&(_e="SERVICE"+pe.split("_")[1]);var ae=se.textTracks().getTrackById(_e);if(ae)H[pe]=ae;else{let Ce=pe,Le=pe,xe=!1;ae=(se.options_.vhs&&se.options_.vhs.captionServices||{})[_e],ae&&(Ce=ae.label,Le=ae.language,xe=ae.default),H[pe]=se.addRemoteTextTrack({kind:"captions",id:_e,default:xe,label:Ce,language:Le},!1).track}}}(G,this.vhs_.tech_,l),ks(h,T,G[l]),function({inbandTextTracks:H,captionArray:se,timestampOffset:pe}){if(se){let ae=window.WebKitDataCue||window.VTTCue;se.forEach(_e=>{let Ce=_e.stream;_e.content?_e.content.forEach(Le=>{var xe=new ae(_e.startTime+pe,_e.endTime+pe,Le.text);xe.line=Le.line,xe.align="left",xe.position=Le.position,xe.positionAlign="line-left",H[Ce].addCue(xe)}):H[Ce].addCue(new ae(_e.startTime+pe,_e.endTime+pe,_e.text))})}}({captionArray:B,inbandTextTracks:G,timestampOffset:a})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,i))}handleId3_(t,i,a){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(a,i,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,i,a)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(t=>t()),this.metadataQueue_.caption.forEach(t=>t()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){var t=this.callQueue_;this.callQueue_=[],t.forEach(i=>i())}processLoadQueue_(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach(i=>i())}hasEnoughInfoToLoad_(){var t;return this.loaderType_!=="audio"||!(!(t=this.pendingSegment_)||this.getCurrentMediaInfo_()&&bl({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(t=this.pendingSegment_){return t&&t.trackInfo||this.currentMediaInfo_}getMediaInfo_(t=this.pendingSegment_){return this.getCurrentMediaInfo_(t)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){var t,i,a,o;return!!this.sourceUpdater_.ready()&&!(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_||(t=this.pendingSegment_,i=this.getCurrentMediaInfo_(),!t)||!i||({hasAudio:i,hasVideo:a,isMuxed:o}=i,a&&!t.videoTimingInfo)||i&&!this.audioDisabled_&&!o&&!t.audioTimingInfo||bl({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(t,i){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())Hn(this),this.callQueue_.push(this.handleData_.bind(this,t,i));else{var a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),this.mediaSource_.readyState!=="closed"){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),a.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),a.isFmp4=t.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[th(i.type)].start;else{t=this.getCurrentMediaInfo_(),t=this.loaderType_==="main"&&t&&t.hasVideo;let o;t&&(o=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:t,firstVideoFrameTimeForData:o,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,i.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){if(this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:this.loaderType_==="main"}),t=this.chooseNextRequest_(),t.mediaIndex!==a.mediaIndex||t.partIndex!==a.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,i)}}}updateAppendInitSegmentStatus(t,i){this.loaderType_!=="main"||typeof t.timestampOffset!="number"||t.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[i]!==t.playlist&&(this.appendInitSegment_[i]=!0)}getInitSegmentAndUpdateState_({type:t,initSegment:i,map:a,playlist:o}){if(a){var l=Ta(a);if(this.activeInitSegmentId_===l)return null;i=this.initSegmentForMap(a,!0).bytes,this.activeInitSegmentId_=l}return i&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=o,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,i):null}handleQuotaExceededError_({segmentInfo:t,type:i,bytes:a},o){var l=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered(),T=(1<l.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ar(l).join(", ")),1<h.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ar(h).join(", ")),l.length?l.start(0):0),B=l.length?l.end(l.length-1):0,G=h.length?h.start(0):0,H=h.length?h.end(h.length-1):0;B-T<=1&&H-G<=1?(this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${a.byteLength}, audio buffer: ${ar(l).join(", ")}, video buffer: ${ar(h).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error")):(this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:t,type:i,bytes:a})),B=this.currentTime_()-1,this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+B),this.remove(0,B,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=window.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0))}handleAppendError_({segmentInfo:t,type:i,bytes:a},o){o&&(o.code===22?this.handleQuotaExceededError_({segmentInfo:t,type:i,bytes:a}):(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",o),this.error({message:`${i} append of ${a.length}b failed for segment #${t.mediaIndex} in playlist `+t.playlist.id,metadata:{errorType:He.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")))}appendToSourceBuffer_({segmentInfo:t,type:i,initSegment:a,data:o,bytes:l}){if(!l){var h=[o];let T=o.byteLength;a&&(h.unshift(a),T+=a.byteLength),l=(B=>{let G=0,H;return B.bytes&&(H=new Uint8Array(B.bytes),B.segments.forEach(se=>{H.set(se,G),G+=se.byteLength})),H})({bytes:T,segments:h})}o={segmentInfo:lr({type:this.loaderType_,segment:t})},this.trigger({type:"segmentappendstart",metadata:o}),this.sourceUpdater_.appendBuffer({segmentInfo:t,type:i,bytes:l},this.handleAppendError_.bind(this,{segmentInfo:t,type:i,bytes:l}))}handleSegmentTimingInfo_(t,i,a){this.pendingSegment_&&i===this.pendingSegment_.requestId&&((i=this.pendingSegment_.segment)[t=t+"TimingInfo"]||(i[t]={}),i[t].transmuxerPrependedSeconds=a.prependedContentDuration||0,i[t].transmuxedPresentationStart=a.start.presentation,i[t].transmuxedDecodeStart=a.start.decode,i[t].transmuxedPresentationEnd=a.end.presentation,i[t].transmuxedDecodeEnd=a.end.decode,i[t].baseMediaDecodeTime=a.baseMediaDecodeTime)}appendData_(t,i){var{type:a,data:o}=i;o&&o.byteLength&&(a==="audio"&&this.audioDisabled_||(i=this.getInitSegmentAndUpdateState_({type:a,initSegment:i.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:t,type:a,initSegment:i,data:o})))}loadSegment_(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),typeof t.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):(Hn(this),this.loadQueue_.push(()=>{var i=Ii({},t,{forceTimestampOffset:!0});Ii(t,this.generateSegmentInfo_(i)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(t)}))}updateTransmuxerAndRequestSegment_(t){this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var i=this.createSimplifiedSegmentObj_(t),l=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),a=this.mediaIndex!==null,o=t.timeline!==this.currentTimeline_&&0<t.timeline,l=l||a&&o;this.logger_(`Requesting
${Qc(t.uri)}
`+Hr(t)),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=rg({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:l,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:h,level:T,stream:B})=>{this.logger_(Hr(t)+` logged from transmuxer stream ${B} as a ${T}: `+h)},triggerSegmentEventFn:({type:h,segment:T,keyInfo:B,trackInfo:G,timingInfo:H})=>{T={segmentInfo:lr({segment:T})},B&&(T.keyInfo=B),G&&(T.trackInfo=G),H&&(T.timingInfo=H),this.trigger({type:h,metadata:T})}})}trimBackBuffer_(t){var i=((a,o,l)=>{let h=o-Mi.BACK_BUFFER_LENGTH;return a.length&&(h=Math.max(h,a.start(0))),Math.min(o-l,h)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<i&&this.remove(0,i)}createSimplifiedSegmentObj_(t){var i=t.segment,o=t.part,l=t.segment.key||t.segment.map&&t.segment.map.key,a=t.segment.map&&!t.segment.map.bytes,o={resolvedUri:(o||i).resolvedUri,byterange:(o||i).byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part,type:this.loaderType_,start:t.startOfSegment,duration:t.duration,isEncrypted:l,isMediaInitialization:a},l=t.playlist.segments[t.mediaIndex-1];return l&&l.timeline===i.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),i.key&&(a=i.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]),o.key=this.segmentKey(i.key),o.key.iv=a),i.map&&(o.map=this.initSegmentForMap(i.map)),o}saveTransferStats_(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)}saveBandwidthRelatedStats_(t,i){this.pendingSegment_.byteLength=i.bytesReceived,t<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record "+1/60):(t={bandwidthInfo:{from:this.bandwidth,to:i.bandwidth}},this.trigger({type:"bandwidthupdated",metadata:t}),this.bandwidth=i.bandwidth,this.roundTrip=i.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(t,i,a){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,i,a));else if(this.saveTransferStats_(i.stats),this.pendingSegment_&&i.requestId===this.pendingSegment_.requestId){if(t)return this.pendingSegment_=null,this.state="READY",t.code===xn.ABORTED?void 0:(this.pause(),t.code===xn.TIMEOUT?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));t=this.pendingSegment_,this.saveBandwidthRelatedStats_(t.duration,i.stats),t.endOfAllRequests=i.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=((o,l,h)=>{if(!l.length)return o;if(h)return l.slice();var T=l[0].pts;let B=0;for(B;B<o.length&&!(o[B].pts>=T);B++);return o.slice(0,B).concat(l)})(this.gopBuffer_,a.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(t)}}setTimeMapping_(t){t=this.syncController_.mappingForTimeline(t),t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(t){typeof t.start=="number"&&typeof t.end=="number"?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration}shouldUpdateTransmuxerTimestampOffset_(t){return t!==null&&(this.loaderType_==="main"&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:t,playlist:i,mediaIndex:a,firstVideoFrameTimeForData:o,currentVideoTimestampOffset:l,useVideoTimingInfo:h,videoTimingInfo:T,audioTimingInfo:B}){return typeof t<"u"?t:h?(t=i.segments[a-1],a!==0&&t&&typeof t.start<"u"&&t.end===o+l?T.start:o):B.start}waitForAppendsToComplete_(t){var i,a,o=this.getCurrentMediaInfo_(t);o?({hasAudio:o,hasVideo:a,isMuxed:i}=o,a=this.loaderType_==="main"&&a,o=!this.audioDisabled_&&o&&!i,t.waitingOnAppends=0,t.hasAppendedData_?(a&&t.waitingOnAppends++,o&&t.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))):(t.timingInfo||typeof t.timestampOffset!="number"||(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),this.checkAppendsDone_(t))):(this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error"))}checkAppendsDone_(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,t.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(t){a=this.loaderType_,i=this.getCurrentMediaInfo_(),t=t;var i,a=a==="main"&&i&&t?t.hasAudio||t.hasVideo?i.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null;return!!a&&(this.error({message:a,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(t){if(t.timestampOffset!==null&&typeof t.timingInfo.start=="number"&&!t.changedTimestampOffset&&this.loaderType_==="main"){let i=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),i=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),i=!0),i&&this.trigger("timestampoffset")}}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t,audioTimingInfo:i,timingInfo:a}){return this.useDtsForTimestampOffset_?t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:i&&typeof i.transmuxedDecodeStart=="number"?i.transmuxedDecodeStart:a.start:a.start}updateTimingInfoEnd_(t){t.timingInfo=t.timingInfo||{};var i=this.getMediaInfo_(),i=this.loaderType_==="main"&&i&&i.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;i&&(t.timingInfo.end=typeof i.end=="number"?i.end:i.start+t.duration)}handleAppendsDone_(){var t,i,a;this.pendingSegment_&&(t={segmentInfo:lr({type:this.loaderType_,segment:this.pendingSegment_})},this.trigger({type:"appendsdone",metadata:t})),this.pendingSegment_?((t=this.pendingSegment_).part&&t.part.syncInfo?t.part.syncInfo.markAppended():t.segment.syncInfo&&t.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:this.loaderType_==="main"}),(i=ug(t,this.sourceType_))&&(i.severity==="warn"?He.log.warn(i.message):this.logger_(i.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_)?this.logger_("Throwing away un-appended sync request "+Hr(t)):(this.logger_("Appended "+Hr(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loaderType_!=="main"||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate"),i=t.segment,a=t.part,i=i.end&&this.currentTime_()-i.end>3*t.playlist.targetDuration,a=a&&a.end&&this.currentTime_()-a.end>3*t.playlist.partTargetDuration,i||a?(this.logger_(`bad ${i?"segment":"part"} `+Hr(t)),this.resetEverything()):(this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()))):(this.state="READY",this.paused()||this.monitorBuffer_())}recordThroughput_(t){var i,a;t.duration<1/60?this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record "+1/60):(i=this.throughput.rate,a=Date.now()-t.endOfAllRequests+1,t=Math.floor(t.byteLength/a*8*1e3),this.throughput.rate+=(t-i)/++this.throughput.count)}addSegmentMetadataCue_(t){var i,a,o,l;this.segmentMetadataTrack_&&(i=(l=t.segment).start,a=l.end,eh(i))&&eh(a)&&(ks(i,a,this.segmentMetadataTrack_),o=window.WebKitDataCue||window.VTTCue,l={custom:l.custom,dateTimeObject:l.dateTimeObject,dateTimeString:l.dateTimeString,programDateTime:l.programDateTime,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:i,end:a},(t=new o(i,a,JSON.stringify(l))).value=l,this.segmentMetadataTrack_.addCue(t))}}function Ln(){}function nh(s){return typeof s!="string"?s:s.replace(/./,t=>t.toUpperCase())}let dg=["video","audio"],Tl=(s,t)=>{var i=t[s+"Buffer"];return i&&i.updating||t.queuePending[s]},qr=(s,t)=>{if(t.queue.length!==0){let i=0,a=t.queue[i];if(a.type==="mediaSource")t.updating()||t.mediaSource.readyState==="closed"||(t.queue.shift(),a.action(t),a.doneFn&&a.doneFn(),qr("audio",t),qr("video",t));else if(s!=="mediaSource"&&t.ready()&&t.mediaSource.readyState!=="closed"&&!Tl(s,t)){if(a.type!==s){if((i=((o,l)=>{for(let T=0;T<l.length;T++){var h=l[T];if(h.type==="mediaSource")return null;if(h.type===o)return T}return null})(s,t.queue))===null)return;a=t.queue[i]}t.queue.splice(i,1),(t.queuePending[s]=a).action(s,t),a.doneFn||(t.queuePending[s]=null,qr(s,t))}}},rh=(s,t)=>{var i=t[s+"Buffer"],a=nh(s);i&&(i.removeEventListener("updateend",t[`on${a}UpdateEnd_`]),i.removeEventListener("error",t[`on${a}Error_`]),t.codecs[s]=null,t[s+"Buffer"]=null)},kn=(s,t)=>s&&t&&Array.prototype.indexOf.call(s.sourceBuffers,t)!==-1,nn={appendBuffer:(s,t,i)=>(a,o)=>{var l=o[a+"Buffer"];if(kn(o.mediaSource,l)){o.logger_(`Appending segment ${t.mediaIndex}'s ${s.length} bytes to ${a}Buffer`);try{l.appendBuffer(s)}catch(h){o.logger_(`Error with code ${h.code} `+(h.code===22?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${a}Buffer`),o.queuePending[a]=null,i(h)}}},remove:(s,t)=>(i,a)=>{var o=a[i+"Buffer"];if(kn(a.mediaSource,o)){a.logger_(`Removing ${s} to ${t} from ${i}Buffer`);try{o.remove(s,t)}catch{a.logger_(`Remove ${s} to ${t} from ${i}Buffer failed`)}}},timestampOffset:s=>(t,i)=>{var a=i[t+"Buffer"];kn(i.mediaSource,a)&&(i.logger_(`Setting ${t}timestampOffset to `+s),a.timestampOffset=s)},callback:s=>(t,i)=>{s()},endOfStream:s=>t=>{if(t.mediaSource.readyState==="open"){t.logger_(`Calling mediaSource endOfStream(${s||""})`);try{t.mediaSource.endOfStream(s)}catch(i){He.log.warn("Failed to call media source endOfStream",i)}}},duration:s=>t=>{t.logger_("Setting mediaSource duration to "+s);try{t.mediaSource.duration=s}catch(i){He.log.warn("Failed to set media source duration",i)}},abort:()=>(s,t)=>{if(t.mediaSource.readyState==="open"){var i=t[s+"Buffer"];if(kn(t.mediaSource,i)){t.logger_(`calling abort on ${s}Buffer`);try{i.abort()}catch(a){He.log.warn(`Failed to abort on ${s}Buffer`,a)}}}},addSourceBuffer:(s,t)=>i=>{var a=nh(s),o=Tr(t),o=(i.logger_(`Adding ${s}Buffer with codec ${t} to mediaSource`),i.mediaSource.addSourceBuffer(o));o.addEventListener("updateend",i[`on${a}UpdateEnd_`]),o.addEventListener("error",i[`on${a}Error_`]),i.codecs[s]=t,i[s+"Buffer"]=o},removeSourceBuffer:s=>t=>{var i=t[s+"Buffer"];if(rh(s,t),kn(t.mediaSource,i)){t.logger_(`Removing ${s}Buffer with codec ${t.codecs[s]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(i)}catch(a){He.log.warn(`Failed to removeSourceBuffer ${s}Buffer`,a)}}},changeType:s=>(t,i)=>{var a=i[t+"Buffer"],o=Tr(s);if(kn(i.mediaSource,a)){var l=s.substring(0,s.indexOf(".")),h=i.codecs[t],T=h.substring(0,h.indexOf("."));if(T!==l){T={codecsChangeInfo:{from:h,to:s}},i.trigger({type:"codecschange",metadata:T}),i.logger_(`changing ${t}Buffer codec from ${h} to `+s);try{a.changeType(o),i.codecs[t]=s}catch(B){T.errorType=He.Error.StreamingCodecsChangeError,(T.error=B).metadata=T,i.error_=B,i.trigger("error"),He.log.warn(`Failed to changeType on ${t}Buffer`,B)}}}}},rn=({type:s,sourceUpdater:t,action:i,doneFn:a,name:o})=>{t.queue.push({type:s,action:i,doneFn:a,name:o}),qr(s,t)},sh=(s,t)=>i=>{var a=function(o){if(o.length===0)return"Buffered Ranges are empty";let l=`Buffered Ranges: 
`;for(let B=0;B<o.length;B++){var h=o.start(B),T=o.end(B);l+=h+` --> ${T}. Duration (${T-h})
`}return l}(t[s+"Buffered"]());t.logger_(`received "updateend" event for ${s} Source Buffer: `,a),t.queuePending[s]&&(a=t.queuePending[s].doneFn,t.queuePending[s]=null,a)&&a(t[s+"Error_"]),qr(s,t)};class ah extends He.EventTarget{constructor(t){super(),this.mediaSource=t,this.sourceopenListener_=()=>qr("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=un("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=sh("video",this),this.onAudioUpdateEnd_=sh("audio",this),this.onVideoError_=i=>{this.videoError_=i},this.onAudioError_=i=>{this.audioError_=i},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(t,i){rn({type:"mediaSource",sourceUpdater:this,action:nn.addSourceBuffer(t,i),name:"addSourceBuffer"})}abort(t){rn({type:t,sourceUpdater:this,action:nn.abort(t),name:"abort"})}removeSourceBuffer(t){this.canRemoveSourceBuffer()?rn({type:"mediaSource",sourceUpdater:this,action:nn.removeSourceBuffer(t),name:"removeSourceBuffer"}):He.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!He.browser.IS_FIREFOX&&window.MediaSource&&window.MediaSource.prototype&&typeof window.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return window.SourceBuffer&&window.SourceBuffer.prototype&&typeof window.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(t,i){this.canChangeType()?rn({type:t,sourceUpdater:this,action:nn.changeType(i),name:"changeType"}):He.log.error("changeType is not supported!")}addOrChangeSourceBuffers(t){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(i=>{var a=t[i];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(i,a);this.canChangeType()&&this.changeType(i,a)})}appendBuffer(t,i){var{segmentInfo:a,type:o,bytes:l}=t;this.processedAppend_=!0,o==="audio"&&this.videoBuffer&&!this.videoAppendQueued_?(this.delayedAudioAppendQueue_.push([t,i]),this.logger_(`delayed audio append of ${l.length} until video append`)):(t=i,rn({type:o,sourceUpdater:this,action:nn.appendBuffer(l,a||{mediaIndex:-1},t),doneFn:i,name:"appendBuffer"}),o==="video"&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length)&&(l=this.delayedAudioAppendQueue_.slice(),this.logger_(`queuing delayed audio ${l.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,l.forEach(h=>{this.appendBuffer.apply(this,h)})))}audioBuffered(){return kn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered||zi()}videoBuffered(){return kn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered||zi()}buffered(){var t=kn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,i=kn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return i&&!t?this.audioBuffered():t&&!i?this.videoBuffered():function(a,o){let l=null,h=null,T=0;var B=[],G=[];if(!(a&&a.length&&o&&o.length))return zi();let H=a.length;for(;H--;)B.push({time:a.start(H),type:"start"}),B.push({time:a.end(H),type:"end"});for(H=o.length;H--;)B.push({time:o.start(H),type:"start"}),B.push({time:o.end(H),type:"end"});for(B.sort(function(se,pe){return se.time-pe.time}),H=0;H<B.length;H++)B[H].type==="start"?++T===2&&(l=B[H].time):B[H].type==="end"&&--T===1&&(h=B[H].time),l!==null&&h!==null&&(G.push([l,h]),l=null,h=null);return zi(G)}(this.audioBuffered(),this.videoBuffered())}setDuration(t,i=Ln){rn({type:"mediaSource",sourceUpdater:this,action:nn.duration(t),name:"duration",doneFn:i})}endOfStream(t=null,i=Ln){typeof t!="string"&&(t=void 0),rn({type:"mediaSource",sourceUpdater:this,action:nn.endOfStream(t),name:"endOfStream",doneFn:i})}removeAudio(t,i,a=Ln){this.audioBuffered().length&&this.audioBuffered().end(0)!==0?rn({type:"audio",sourceUpdater:this,action:nn.remove(t,i),doneFn:a,name:"remove"}):a()}removeVideo(t,i,a=Ln){this.videoBuffered().length&&this.videoBuffered().end(0)!==0?rn({type:"video",sourceUpdater:this,action:nn.remove(t,i),doneFn:a,name:"remove"}):a()}updating(){return!(!Tl("audio",this)&&!Tl("video",this))}audioTimestampOffset(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(rn({type:"audio",sourceUpdater:this,action:nn.timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_}videoTimestampOffset(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==t&&(rn({type:"video",sourceUpdater:this,action:nn.timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_}audioQueueCallback(t){this.audioBuffer&&rn({type:"audio",sourceUpdater:this,action:nn.callback(t),name:"callback"})}videoQueueCallback(t){this.videoBuffer&&rn({type:"video",sourceUpdater:this,action:nn.callback(t),name:"callback"})}dispose(){this.trigger("dispose"),dg.forEach(t=>{this.abort(t),this.canRemoveSourceBuffer()?this.removeSourceBuffer(t):this[t+"QueueCallback"](()=>rh(t,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}let oh=s=>decodeURIComponent(escape(String.fromCharCode.apply(null,s))),lh=new Uint8Array(`

`.split("").map(s=>s.charCodeAt(0)));class cg extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class hg extends _l{constructor(t,i={}){super(t,i),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=t.featuresNativeTextTracks,this.loadVttJs=t.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){var t;return this.subtitlesTrack_&&this.subtitlesTrack_.cues&&this.subtitlesTrack_.cues.length?zi([[(t=this.subtitlesTrack_.cues)[0].startTime,t[t.length-1].startTime]]):zi()}initSegmentForMap(t,i=!1){if(!t)return null;var a=Ta(t);let o=this.initSegments_[a];return i&&!o&&t.bytes&&(i=lh.byteLength+t.bytes.byteLength,(i=new Uint8Array(i)).set(t.bytes),i.set(lh,t.bytes.byteLength),this.initSegments_[a]=o={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:i}),o||t}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(t){return typeof t<"u"&&(this.subtitlesTrack_=t,this.state==="INIT"&&this.couldBeginLoading_())&&this.init_(),this.subtitlesTrack_}remove(t,i){ks(t,i,this.subtitlesTrack_)}fillBuffer_(){var t=this.chooseNextRequest_();t&&(this.syncController_.timestampOffsetForTimeline(t.timeline)===null?(this.syncController_.one("timestampoffset",()=>{this.state="READY",this.paused()||this.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(t))}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t}stopForError(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(t,i,a){if(this.subtitlesTrack_)if(this.saveTransferStats_(i.stats),this.pendingSegment_)if(t)t.code===xn.TIMEOUT&&this.handleTimeout_(),t.code===xn.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(t);else{var o=this.pendingSegment_,l=a.mp4VttCues&&a.mp4VttCues.length,h=(l&&(o.mp4VttCues=a.mp4VttCues),this.saveBandwidthRelatedStats_(o.duration,i.stats),i.key&&this.segmentKey(i.key,!0),this.state="APPENDING",this.trigger("appending"),o.segment);if(h.map&&(h.map.bytes=i.map.bytes),o.bytes=i.bytes,typeof window.WebVTT!="function"&&typeof this.loadVttJs=="function")this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(t,i,a),()=>this.stopForError({message:"Error loading vtt.js"}));else{h.requested=!0;try{this.parseVTTCues_(o)}catch(T){return void this.stopForError({message:T.message,metadata:{errorType:He.Error.StreamingVttParserError,error:T}})}l||this.updateTimeMapping_(o,this.syncController_.timelines[o.timeline],this.playlist_),o.cues.length?o.timingInfo={start:o.cues[0].startTime,end:o.cues[o.cues.length-1].endTime}:o.timingInfo={start:o.startOfSegment,end:o.startOfSegment+o.duration},o.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(o.byteLength=o.bytes.byteLength,this.mediaSecondsLoaded+=h.duration,o.cues.forEach(T=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new window.VTTCue(T.startTime,T.endTime,T.text):T)}),function(T){var B=T.cues;if(B){var G={};for(let pe=B.length-1;0<=pe;pe--){var H=B[pe],se=H.startTime+`-${H.endTime}-`+H.text;G[se]?T.removeCue(H):G[se]=H}}}(this.subtitlesTrack_),this.handleAppendsDone_())}}else this.state="READY",this.mediaRequestsAborted+=1;else this.state="READY"}handleData_(t,i){var a=t&&t.type==="vtt",o=i&&i.type==="text";a&&o&&super.handleData_(t,i)}updateTimingInfoEnd_(){}parseMp4VttCues_(t){let i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();t.mp4VttCues.forEach(a=>{var o=a.start+i,l=a.end+i;let h=new window.VTTCue(o,l,a.cueText);a.settings&&a.settings.split(" ").forEach(G=>{var G=G.split(":"),B=G[0],G=G[1];h[B]=isNaN(G)?G:Number(G)}),t.cues.push(h)})}parseVTTCues_(t){let i,a=!1;if(typeof window.WebVTT!="function")throw new cg;if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},t.mp4VttCues)this.parseMp4VttCues_(t);else{typeof window.TextDecoder=="function"?i=new window.TextDecoder("utf8"):(i=window.WebVTT.StringDecoder(),a=!0);var o=new window.WebVTT.Parser(window,window.vttjs,i);if(o.oncue=t.cues.push.bind(t.cues),o.ontimestampmap=h=>{t.timestampmap=h},o.onparsingerror=h=>{He.log.warn("Error encountered when parsing cues: "+h.message)},t.segment.map){let h=t.segment.map.bytes;a&&(h=oh(h)),o.parse(h)}let l=t.bytes;a&&(l=oh(l)),o.parse(l),o.flush()}}updateTimeMapping_(t,i,a){var o=t.segment;if(i)if(t.cues.length){var{MPEGTS:l,LOCAL:h}=t.timestampmap;let T=l/sr-h+i.mapping;t.cues.forEach(B=>{var G=B.endTime-B.startTime,H=this.handleRollover_(B.startTime+T,i.time);B.startTime=Math.max(H,0),B.endTime=Math.max(H+G,0)}),a.syncInfo||(l=t.cues[0].startTime,h=t.cues[t.cues.length-1].startTime,a.syncInfo={mediaSequence:a.mediaSequence+t.mediaIndex,time:Math.min(l,h-o.duration)})}else o.empty=!0}handleRollover_(t,i){if(i===null)return t;let a=t*sr;var o=i*sr;let l;for(l=o<a?-8589934592:8589934592;4294967296<Math.abs(a-o);)a+=l;return a/sr}}class uh{constructor({start:t,end:i,segmentIndex:a,partIndex:o=null,appended:l=!1}){this.start_=t,this.end_=i,this.segmentIndex_=a,this.partIndex_=o,this.appended_=l}isInRange(t){return t>=this.start&&t<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class pg{constructor(t,i=[]){this.segmentSyncInfo_=t,this.partsSyncInfo_=i}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return 0<this.partsSyncInfo_.length}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(t=>t.resetAppendedStatus())}}class dh{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(t=>t.resetAppendStatus())}update(a,i){var{mediaSequence:a,segments:o}=a;if(this.isReliable_=this.isReliablePlaylist_(a,o),this.isReliable_)return this.updateStorage_(o,a,this.calculateBaseTime_(a,o,i))}getSyncInfoForTime(t){for(var{segmentSyncInfo:i,partsSyncInfo:a}of this.storage_.values())if(a.length){for(var o of a)if(o.isInRange(t))return o}else if(i.isInRange(t))return i;return null}getSyncInfoForMediaSequence(t){return this.storage_.get(t)}updateStorage_(t,i,a){let o=new Map,l=`
`,h=a,T=i;this.start_=h,t.forEach((B,G)=>{let H=this.storage_.get(T);var se=h,pe=se+B.duration,ae=!!(H&&H.segmentSyncInfo&&H.segmentSyncInfo.isAppended),_e=new uh({start:se,end:pe,appended:ae,segmentIndex:G});B.syncInfo=_e;let Ce=h;var Le=(B.parts||[]).map((xe,Pe)=>{var Ae=Ce,st=Ce+xe.duration,Ue=!!(H&&H.partsSyncInfo&&H.partsSyncInfo[Pe]&&H.partsSyncInfo[Pe].isAppended),ft=new uh({start:Ae,end:st,appended:Ue,segmentIndex:G,partIndex:Pe});return Ce=st,l+=`Media Sequence: ${T}.${Pe} | Range: ${Ae} --> ${st} | Appended: ${Ue}
`,xe.syncInfo=ft});o.set(T,new pg(_e,Le)),l+=`${Qc(B.resolvedUri)} | Media Sequence: ${T} | Range: ${se} --> ${pe} | Appended: ${ae}
`,T++,h=pe}),this.end_=h,this.storage_=o,this.diagnostics_=l}calculateBaseTime_(t,i,a){if(!this.storage_.size)return 0;if(this.storage_.has(t))return this.storage_.get(t).segmentSyncInfo.start;var o=Math.min(...this.storage_.keys());if(t<o){var l=o-t;let T=this.storage_.get(o).segmentSyncInfo.start;for(let B=0;B<l;B++){var h=i[B];T-=h.duration}return T}return a}isReliablePlaylist_(t,i){return t!=null&&Array.isArray(i)&&i.length}}class ch extends dh{constructor(t){super(),this.parent_=t}calculateBaseTime_(t,i,a){return this.storage_.size?super.calculateBaseTime_(t,i,a):(i=this.parent_.getSyncInfoForMediaSequence(t))?i.segmentSyncInfo.start:0}}let Sl=[{name:"VOD",run:(s,t,i,a,o)=>i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(s,t,i,a,o,l)=>(s=s.getMediaSequenceSync(l),s&&s.isReliable&&(l=s.getSyncInfoForTime(o))?{time:l.start,partIndex:l.partIndex,segmentIndex:l.segmentIndex}:null)},{name:"ProgramDateTime",run:(s,t,i,a,o)=>{if(!Object.keys(s.timelineToDatetimeMappings).length)return null;let l=null,h=null;var T=al(t);o=o||0;for(let se=0;se<T.length;se++){var B=T[t.endList||o===0?se:T.length-(se+1)],G=B.segment,H=s.timelineToDatetimeMappings[G.timeline];if(H&&G.dateTimeObject){let pe=G.dateTimeObject.getTime()/1e3+H;if(G.parts&&typeof B.partIndex=="number")for(let ae=0;ae<B.partIndex;ae++)pe+=G.parts[ae].duration;if(H=Math.abs(o-pe),h!==null&&(H===0||h<H))break;h=H,l={time:pe,segmentIndex:B.segmentIndex,partIndex:B.partIndex}}}return l}},{name:"Segment",run:(s,t,i,a,o)=>{let l=null,h=null;o=o||0;var T=al(t);for(let se=0;se<T.length;se++){var B=T[t.endList||o===0?se:T.length-(se+1)],G=B.segment,H=B.part&&B.part.start||G&&G.start;if(G.timeline===a&&typeof H<"u"){if(G=Math.abs(o-H),h!==null&&h<G)break;(!l||h===null||h>=G)&&(h=G,l={time:H,segmentIndex:B.segmentIndex,partIndex:B.partIndex})}}return l}},{name:"Discontinuity",run:(s,t,i,a,o)=>{let l=null;if(o=o||0,t.discontinuityStarts&&t.discontinuityStarts.length){let G=null;for(let H=0;H<t.discontinuityStarts.length;H++){var h=t.discontinuityStarts[H],T=t.discontinuitySequence+H+1,T=s.discontinuities[T];if(T){var B=Math.abs(o-T.time);if(G!==null&&G<B)break;(!l||G===null||G>=B)&&(G=B,l={time:T.time,segmentIndex:h,partIndex:null})}}}return l}},{name:"Playlist",run:(s,t,i,a,o)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}];class fg extends He.EventTarget{constructor(t=0){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};var i=new dh,a=new ch(i),o=new ch(i);this.mediaSequenceStorage_={main:i,audio:a,vtt:o},this.logger_=un("SyncController")}getMediaSequenceSync(t){return this.mediaSequenceStorage_[t]||null}getSyncPoint(t,T,a,o,l){if(T!==1/0)return Sl.find(({name:ae})=>ae==="VOD").run(this,t,T);var h,T=this.runStrategies_(t,T,a,o,l);if(!T.length)return null;for(h of T){var{syncPoint:B,strategy:G}=h,{segmentIndex:H,time:se}=B;if(!(H<0)){var pe=se+t.segments[H].duration;if(this.logger_(`Strategy: ${G}. Current time: ${o}. selected segment: ${H}. Time: [${se} -> ${pe}]}`),se<=o&&o<pe)return this.logger_("Found sync point with exact match: ",B),B}}return this.selectSyncPoint_(T,{key:"time",value:o})}getExpiredTime(t,i){return t&&t.segments&&(i=this.runStrategies_(t,i,t.discontinuitySequence,0)).length?(0<(i=this.selectSyncPoint_(i,{key:"segmentIndex",value:0})).segmentIndex&&(i.time*=-1),Math.abs(i.time+Es({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:i.segmentIndex,endIndex:0}))):null}runStrategies_(t,i,a,o,l){var h=[];for(let G=0;G<Sl.length;G++){var T=Sl[G],B=T.run(this,t,i,a,o,l);B&&(B.strategy=T.name,h.push({strategy:T.name,syncPoint:B}))}return h}selectSyncPoint_(t,i){let a=t[0].syncPoint,o=Math.abs(t[0].syncPoint[i.key]-i.value),l=t[0].strategy;for(let T=1;T<t.length;T++){var h=Math.abs(t[T].syncPoint[i.key]-i.value);h<o&&(o=h,a=t[T].syncPoint,l=t[T].strategy)}return this.logger_(`syncPoint for [${i.key}: ${i.value}] chosen with strategy [${l}]: [time:${a.time}, segmentIndex:`+a.segmentIndex+(typeof a.partIndex=="number"?",partIndex:"+a.partIndex:"")+"]"),a}saveExpiredSegmentInfo(t,i){var a=i.mediaSequence-t.mediaSequence;if(86400<a)He.log.warn(`Not saving expired segment info. Media sequence gap ${a} is too large.`);else for(let l=a-1;0<=l;l--){var o=t.segments[l];if(o&&typeof o.start<"u"){i.syncInfo={mediaSequence:t.mediaSequence+l,time:o.start},this.logger_(`playlist refresh sync: [time:${i.syncInfo.time}, mediaSequence: ${i.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(t){var i;this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject&&(i=(t=t.segments[0]).dateTimeObject.getTime()/1e3,this.timelineToDatetimeMappings[t.timeline]=-i)}saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:i}){var o=this.calculateSegmentTimeMapping_(t,t.timingInfo,i),a=t.segment,o=(o&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:a.start})),a.dateTimeObject);a.discontinuity&&i&&o&&(this.timelineToDatetimeMappings[a.timeline]=-o.getTime()/1e3)}timestampOffsetForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time}mappingForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping}calculateSegmentTimeMapping_(t,i,a){var o=t.segment,l=t.part;let h=this.timelines[t.timeline],T,B;if(typeof t.timestampOffset=="number")h={time:t.startOfSegment,mapping:t.startOfSegment-i.start},a&&(this.timelines[t.timeline]=h,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${t.timeline}: [time: ${h.time}] [mapping: ${h.mapping}]`)),T=t.startOfSegment;else{if(!h)return!1;T=i.start+h.mapping}return B=i.end+h.mapping,l&&(l.start=T,l.end=B),(!o.start||T<o.start)&&(o.start=T),o.end=B,!0}saveDiscontinuitySyncInfo_(t){var i=t.playlist,a=t.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(let B=0;B<i.discontinuityStarts.length;B++){var o=i.discontinuityStarts[B],l=i.discontinuitySequence+B+1,h=o-t.mediaIndex,T=Math.abs(h);if(!this.discontinuities[l]||this.discontinuities[l].accuracy>T){let G;G=h<0?a.start-Es({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:t.mediaIndex,endIndex:o}):a.end+Es({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:t.mediaIndex+1,endIndex:o}),this.discontinuities[l]={time:G,accuracy:T}}}}dispose(){this.trigger("dispose"),this.off()}}class mg extends He.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:t,from:i,to:a}){return typeof i=="number"&&typeof a=="number"&&(this.pendingTimelineChanges_[t]={type:t,from:i,to:a},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]}lastTimelineChange({type:t,from:i,to:a}){return typeof i=="number"&&typeof a=="number"&&(this.lastTimelineChanges_[t]={type:t,from:i,to:a},delete this.pendingTimelineChanges_[t],this.trigger({type:"timelinechange",metadata:{timelineChangeInfo:{from:i,to:a}}})),this.lastTimelineChanges_[t]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}var gg=Rc(Lc(Mc(function(){var s=function(){function B(){this.listeners={}}var G=B.prototype;return G.on=function(H,se){this.listeners[H]||(this.listeners[H]=[]),this.listeners[H].push(se)},G.off=function(H,se){return!!this.listeners[H]&&(se=this.listeners[H].indexOf(se),this.listeners[H]=this.listeners[H].slice(0),this.listeners[H].splice(se,1),-1<se)},G.trigger=function(H){var se=this.listeners[H];if(se)if(arguments.length===2)for(var pe=se.length,ae=0;ae<pe;++ae)se[ae].call(this,arguments[1]);else for(var _e=Array.prototype.slice.call(arguments,1),Ce=se.length,Le=0;Le<Ce;++Le)se[Le].apply(this,_e)},G.dispose=function(){this.listeners={}},G.pipe=function(H){this.on("data",function(se){H.push(se)})},B}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 *//*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */let t=null;class i{constructor(G){t=t||function(){var Ae=[[[],[],[],[],[]],[[],[],[],[],[]]],st=Ae[0],Ue=Ae[1],ft=st[4],Et=Ue[4];let dt,Ot,Ct;var Lt,jt,xt,Zt,Ti=[],mn=[];let si,lt;for(dt=0;dt<256;dt++)mn[(Ti[dt]=dt<<1^283*(dt>>7))^dt]=dt;for(Ot=Ct=0;!ft[Ot];Ot^=Lt||1,Ct=mn[Ct]||1)for(Zt=(Zt=Ct^Ct<<1^Ct<<2^Ct<<3^Ct<<4)>>8^255&Zt^99,xt=Ti[jt=Ti[Lt=Ti[Et[ft[Ot]=Zt]=Ot]]],lt=16843009*xt^65537*jt^257*Lt^16843008*Ot,si=257*Ti[Zt]^16843008*Zt,dt=0;dt<4;dt++)st[dt][Ot]=si=si<<24^si>>>8,Ue[dt][Zt]=lt=lt<<24^lt>>>8;for(dt=0;dt<5;dt++)st[dt]=st[dt].slice(0),Ue[dt]=Ue[dt].slice(0);return Ae}(),this._tables=[[t[0][0].slice(),t[0][1].slice(),t[0][2].slice(),t[0][3].slice(),t[0][4].slice()],[t[1][0].slice(),t[1][1].slice(),t[1][2].slice(),t[1][3].slice(),t[1][4].slice()]];let H,se,pe;var ae=this._tables[0][4],_e=this._tables[1],Ce=G.length;let Le=1;if(Ce!==4&&Ce!==6&&Ce!==8)throw new Error("Invalid aes key size");var xe=G.slice(0),Pe=[];for(this._key=[xe,Pe],H=Ce;H<4*Ce+28;H++)pe=xe[H-1],(H%Ce==0||Ce===8&&H%Ce==4)&&(pe=ae[pe>>>24]<<24^ae[pe>>16&255]<<16^ae[pe>>8&255]<<8^ae[255&pe],H%Ce==0)&&(pe=pe<<8^pe>>>24^Le<<24,Le=Le<<1^283*(Le>>7)),xe[H]=xe[H-Ce]^pe;for(se=0;H;se++,H--)pe=xe[3&se?H:H-4],H<=4||se<4?Pe[se]=pe:Pe[se]=_e[0][ae[pe>>>24]]^_e[1][ae[pe>>16&255]]^_e[2][ae[pe>>8&255]]^_e[3][ae[255&pe]]}decrypt(Ct,H,se,pe,ae,_e){var Ce,Le,xe=this._key[1];let Pe=Ct^xe[0],Ae=pe^xe[1],st=se^xe[2],Ue=H^xe[3],ft;var Et=xe.length/4-2;let dt,Ot=4;var Ct=this._tables[1],Lt=Ct[0],jt=Ct[1],xt=Ct[2],Zt=Ct[3],Ti=Ct[4];for(dt=0;dt<Et;dt++)ft=Lt[Pe>>>24]^jt[Ae>>16&255]^xt[st>>8&255]^Zt[255&Ue]^xe[Ot],Ce=Lt[Ae>>>24]^jt[st>>16&255]^xt[Ue>>8&255]^Zt[255&Pe]^xe[Ot+1],Le=Lt[st>>>24]^jt[Ue>>16&255]^xt[Pe>>8&255]^Zt[255&Ae]^xe[Ot+2],Ue=Lt[Ue>>>24]^jt[Pe>>16&255]^xt[Ae>>8&255]^Zt[255&st]^xe[Ot+3],Ot+=4,Pe=ft,Ae=Ce,st=Le;for(dt=0;dt<4;dt++)ae[(3&-dt)+_e]=Ti[Pe>>>24]<<24^Ti[Ae>>16&255]<<16^Ti[st>>8&255]<<8^Ti[255&Ue]^xe[Ot++],ft=Pe,Pe=Ae,Ae=st,st=Ue,Ue=ft}}class a extends s{constructor(){super(s),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(G){this.jobs.push(G),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}function o(B){return B<<24|(65280&B)<<8|(16711680&B)>>8|B>>>24}class l{constructor(G,H,se,pe){var ae=l.STEP,_e=new Int32Array(G.buffer);let Ce=new Uint8Array(G.byteLength),Le=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(_e.subarray(Le,Le+ae),H,se,Ce)),Le=ae;Le<_e.length;Le+=ae)se=new Uint32Array([o(_e[Le-4]),o(_e[Le-3]),o(_e[Le-2]),o(_e[Le-1])]),this.asyncStream_.push(this.decryptChunk_(_e.subarray(Le,Le+ae),H,se,Ce));this.asyncStream_.push(function(){var xe;pe(null,(xe=Ce).subarray(0,xe.byteLength-xe[xe.byteLength-1]))})}static get STEP(){return 32e3}decryptChunk_(G,H,se,pe){return function(){var ae=function(_e,Et,Le){var xe,Pe,Ae,st,Ue=new Int32Array(_e.buffer,_e.byteOffset,_e.byteLength>>2),ft=new i(Array.prototype.slice.call(Et)),Et=new Uint8Array(_e.byteLength),dt=new Int32Array(Et.buffer);let Ot,Ct,Lt,jt,xt;for(Ot=Le[0],Ct=Le[1],Lt=Le[2],jt=Le[3],xt=0;xt<Ue.length;xt+=4)xe=o(Ue[xt]),Pe=o(Ue[xt+1]),Ae=o(Ue[xt+2]),st=o(Ue[xt+3]),ft.decrypt(xe,Pe,Ae,st,dt,xt),dt[xt]=o(dt[xt]^Ot),dt[xt+1]=o(dt[xt+1]^Ct),dt[xt+2]=o(dt[xt+2]^Lt),dt[xt+3]=o(dt[xt+3]^jt),Ot=xe,Ct=Pe,Lt=Ae,jt=st;return Et}(G,H,se);pe.set(ae,G.byteOffset)}}}var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h=typeof window<"u"?window:typeof h<"u"?h:typeof self<"u"?self:{},h=h.BigInt||Number;h("0x1"),h("0x100"),h("0x10000"),h("0x1000000"),h("0x100000000"),h("0x10000000000"),h("0x1000000000000"),h("0x100000000000000"),h("0x10000000000000000"),h=new Uint16Array([65484]),(h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength))[0];function T(B){let G={};return Object.keys(B).forEach(H=>{var se,pe=B[H];se=pe,(ArrayBuffer.isView==="function"?ArrayBuffer.isView(se):se&&se.buffer instanceof ArrayBuffer)?G[H]={bytes:pe.buffer,byteOffset:pe.byteOffset,byteLength:pe.byteLength}:G[H]=pe}),G}self.onmessage=function(H){let G=H.data;var H=new Uint8Array(G.encrypted.bytes,G.encrypted.byteOffset,G.encrypted.byteLength),se=new Uint32Array(G.key.bytes,G.key.byteOffset,G.key.byteLength/4),pe=new Uint32Array(G.iv.bytes,G.iv.byteOffset,G.iv.byteLength/4);new l(H,se,pe,function(ae,_e){self.postMessage(T({source:G.source,decrypted:_e}),[_e.buffer])})}})));let hh=(s,t)=>{s.abort(),s.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},ph=(s,t)=>{(t.activePlaylistLoader=s).load()},Ea={AUDIO:(s,t)=>()=>{var{mediaTypes:{[s]:i},excludePlaylist:a}=t,o=i.activeTrack(),l=i.activeGroup(),l=(l.filter(B=>B.default)[0]||l[0]).id,h=i.tracks[l];if(o===h)a({error:{message:"Problem encountered loading the default audio track."}});else{for(var T in He.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[T].enabled=i.tracks[T]===h;i.onTrackChanged()}},SUBTITLES:(s,t)=>()=>{var{[s]:i}=t.mediaTypes,a=(He.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),i.activeTrack());a&&(a.mode="disabled"),i.onTrackChanged()}},fh={AUDIO:(s,t,i)=>{if(!t)return;let{tech:a,requestOptions:o,segmentLoaders:{[s]:l}}=i;t.on("loadedmetadata",()=>{var h=t.media();l.playlist(h,o),(!a.paused()||h.endList&&a.preload()!=="none")&&l.load()}),t.on("loadedplaylist",()=>{l.playlist(t.media(),o),a.paused()||l.load()}),t.on("error",Ea[s](s,i))},SUBTITLES:(s,t,i)=>{let{tech:a,requestOptions:o,segmentLoaders:{[s]:l},mediaTypes:{[s]:h}}=i;t.on("loadedmetadata",()=>{var T=t.media();l.playlist(T,o),l.track(h.activeTrack()),(!a.paused()||T.endList&&a.preload()!=="none")&&l.load()}),t.on("loadedplaylist",()=>{l.playlist(t.media(),o),a.paused()||l.load()}),t.on("error",Ea[s](s,i))}},yg={AUDIO:(s,t)=>{var i,a,{vhs:o,sourceType:l,segmentLoaders:{[s]:h},requestOptions:T,main:{mediaGroups:B},mediaTypes:{[s]:{groups:G,tracks:H,logger_:se}},mainPlaylistLoader:pe}=t,ae=Cs(pe.main);for(i in B[s]&&Object.keys(B[s]).length!==0||(B[s]={main:{default:{default:!0}}},ae&&(B[s].main.default.playlists=pe.main.playlists)),B[s])for(var _e in G[i]||(G[i]=[]),B[s][i]){let Ce=B[s][i][_e],Le;Le=ae?(se(`AUDIO group '${i}' label '${_e}' is a main playlist`),Ce.isMainPlaylist=!0,null):l==="vhs-json"&&Ce.playlists?new Br(Ce.playlists[0],o,T):Ce.resolvedUri?new Br(Ce.resolvedUri,o,T):Ce.playlists&&l==="dash"?new fl(Ce.playlists[0],o,T,pe):null,Ce=Qt({id:_e,playlistLoader:Le},Ce),fh[s](s,Ce.playlistLoader,t),G[i].push(Ce),typeof H[_e]>"u"&&(a=new He.AudioTrack({id:_e,kind:(xe=>{let Pe=xe.default?"main":"alternative";return Pe=xe.characteristics&&0<=xe.characteristics.indexOf("public.accessibility.describes-video")?"main-desc":Pe})(Ce),enabled:!1,language:Ce.language,default:Ce.default,label:_e}),H[_e]=a)}h.on("error",Ea[s](s,t))},SUBTITLES:(s,t)=>{var i,a,{tech:o,vhs:l,sourceType:h,segmentLoaders:{[s]:T},requestOptions:B,main:{mediaGroups:G},mediaTypes:{[s]:{groups:H,tracks:se}},mainPlaylistLoader:pe}=t;for(i in G[s])for(var ae in H[i]||(H[i]=[]),G[s][i])if(l.options_.useForcedSubtitles||!G[s][i][ae].forced){let _e=G[s][i][ae],Ce;if(h==="hls")Ce=new Br(_e.resolvedUri,l,B);else if(h==="dash"){if(!_e.playlists.filter(Le=>Le.excludeUntil!==1/0).length)return;Ce=new fl(_e.playlists[0],l,B,pe)}else h==="vhs-json"&&(Ce=new Br(_e.playlists?_e.playlists[0]:_e.resolvedUri,l,B));_e=Qt({id:ae,playlistLoader:Ce},_e),fh[s](s,_e.playlistLoader,t),H[i].push(_e),typeof se[ae]>"u"&&(a=o.addRemoteTextTrack({id:ae,kind:"subtitles",default:_e.default&&_e.autoselect,language:_e.language,label:ae},!1).track,se[ae]=a)}T.on("error",Ea[s](s,t))},"CLOSED-CAPTIONS":(s,t)=>{var i,{tech:a,main:{mediaGroups:o},mediaTypes:{[s]:{groups:l,tracks:h}}}=t;for(i in o[s])for(var T in l[i]||(l[i]=[]),o[s][i]){var B=o[s][i][T];if(/^(?:CC|SERVICE)/.test(B.instreamId)){var G=a.options_.vhs&&a.options_.vhs.captionServices||{};let H={label:T,language:B.language,instreamId:B.instreamId,default:B.default&&B.autoselect};(H=G[H.instreamId]?Qt(H,G[H.instreamId]):H).default===void 0&&delete H.default,l[i].push(Qt({id:T},B)),typeof h[T]>"u"&&(G=a.addRemoteTextTrack({id:H.instreamId,kind:"captions",default:H.default,language:H.language,label:H.label},!1).track,h[T]=G)}}}},mh=(s,t)=>{for(let i=0;i<s.length;i++)if(ul(t,s[i])||s[i].playlists&&mh(s[i].playlists,t))return!0;return!1},vg={AUDIO:(s,t)=>()=>{var i,{[s]:{tracks:a}}=t.mediaTypes;for(i in a)if(a[i].enabled)return a[i];return null},SUBTITLES:(s,t)=>()=>{var i,{[s]:{tracks:a}}=t.mediaTypes;for(i in a)if(a[i].mode==="showing"||a[i].mode==="hidden")return a[i];return null}},bg=s=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(H=>{yg[H](H,s)});let{mediaTypes:t,mainPlaylistLoader:i,tech:a,vhs:o,segmentLoaders:{AUDIO:l,main:h}}=s;["AUDIO","SUBTITLES"].forEach(H=>{var se,pe,ae,_e,Ce,Le,xe,Pe,Ae,st;t[H].activeGroup=(se=H,pe=s,Ue=>{var{mainPlaylistLoader:ft,mediaTypes:{[se]:{groups:Et}}}=pe,dt=ft.media();if(!dt)return null;let Ot=null;dt.attributes[se]&&(Ot=Et[dt.attributes[se]]);var Ct=Object.keys(Et);if(!Ot)if(se==="AUDIO"&&1<Ct.length&&Cs(pe.main))for(let jt=0;jt<Ct.length;jt++){var Lt=Et[Ct[jt]];if(mh(Lt,dt)){Ot=Lt;break}}else Et.main?Ot=Et.main:Ct.length===1&&(Ot=Et[Ct[0]]);return typeof Ue>"u"?Ot:Ue!==null&&Ot&&Ot.filter(jt=>jt.id===Ue.id)[0]||null}),t[H].activeTrack=vg[H](H,s),t[H].onGroupChanged=(ae=H,_e=s,()=>{var{segmentLoaders:{[ae]:Ue,main:ft},mediaTypes:{[ae]:Et}}=_e,dt=Et.activeTrack(),Ot=Et.getActiveGroup(),Ct=Et.activePlaylistLoader,Lt=Et.lastGroup_;Ot&&Lt&&Ot.id===Lt.id||(Et.lastGroup_=Ot,Et.lastTrack_=dt,hh(Ue,Et),Ot&&!Ot.isMainPlaylist&&(Ot.playlistLoader?(Ue.resyncLoader(),ph(Ot.playlistLoader,Et)):Ct&&ft.resetEverything()))}),t[H].onGroupChanging=(Ce=H,Le=s,()=>{var{segmentLoaders:{[Ce]:Ue},mediaTypes:{[Ce]:ft}}=Le;ft.lastGroup_=null,Ue.abort(),Ue.pause()}),t[H].onTrackChanged=(xe=H,Pe=s,()=>{var Ue,ft,{mainPlaylistLoader:Et,segmentLoaders:{[xe]:dt,main:Ot},mediaTypes:{[xe]:Ct}}=Pe,Lt=Ct.activeTrack(),jt=Ct.getActiveGroup(),xt=Ct.activePlaylistLoader,Zt=Ct.lastTrack_;if((!Zt||!Lt||Zt.id!==Lt.id)&&(Ct.lastGroup_=jt,Ct.lastTrack_=Lt,hh(dt,Ct),jt)){if(jt.isMainPlaylist)return!Lt||!Zt||Lt.id===Zt.id||(ft=(Ue=Pe.vhs.playlistController_).selectPlaylist(),Ue.media()===ft)?void 0:(Ct.logger_(`track change. Switching main audio from ${Zt.id} to `+Lt.id),Et.pause(),Ot.resetEverything(),void Ue.fastQualityChange_(ft));if(xe==="AUDIO"){if(!jt.playlistLoader)return Ot.setAudio(!0),void Ot.resetEverything();dt.setAudio(!0),Ot.setAudio(!1)}xt===jt.playlistLoader||(dt.track&&dt.track(Lt),dt.resetEverything()),ph(jt.playlistLoader,Ct)}}),t[H].getActiveGroup=([Ae,st]=[H,s.mediaTypes],()=>{var Ue=st[Ae].activeTrack();return Ue?st[Ae].activeGroup(Ue):null})});var T,B=t.AUDIO.activeGroup();B&&(B=(B.filter(H=>H.default)[0]||B[0]).id,t.AUDIO.tracks[B].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),(t.AUDIO.getActiveGroup().playlistLoader?(h.setAudio(!1),l):h).setAudio(!0)),i.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(H=>t[H].onGroupChanged())}),i.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(H=>t[H].onGroupChanging())});let G=()=>{t.AUDIO.onTrackChanged(),a.trigger({type:"usage",name:"vhs-audio-change"})};for(T in a.audioTracks().addEventListener("change",G),a.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),o.on("dispose",()=>{a.audioTracks().removeEventListener("change",G),a.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),a.clearTracks("audio"),t.AUDIO.tracks)a.audioTracks().addTrack(t.AUDIO.tracks[T])};class gh{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(t){t===1&&(this.version_=t)}set ttl(t){this.ttl_=t||300}set reloadUri(t){t&&(this.reloadUri_=en(this.reloadUri_,t))}set priority(t){t&&t.length&&(this.priority_=t)}set pathwayClones(t){t&&t.length&&(this.pathwayClones_=new Map(t.map(i=>[i.ID,i])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class _g extends He.EventTarget{constructor(t,i){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new gh,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=un("Content Steering"),this.xhr_=t,this.getBandwidth_=i}assignTagProperties(t,i){this.manifestType_=i.serverUri?"HLS":"DASH";var a=i.serverUri||i.serverURL;a?a.startsWith("data:")?this.decodeDataUriManifest_(a.substring(a.indexOf(",")+1)):(this.steeringManifest.reloadUri=en(t,a),this.defaultPathway=i.pathwayId||i.defaultServiceLocation,this.queryBeforeStart=i.queryBeforeStart,this.proxyServerUrl_=i.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")):(this.logger_(`steering manifest URL is ${a}, cannot request steering manifest.`),this.trigger("error"))}requestSteeringManifest(t){var i=this.steeringManifest.reloadUri;if(i){let a=t?i:this.getRequestURI(i);if(a){let o={contentSteeringInfo:{uri:a}};this.trigger({type:"contentsteeringloadstart",metadata:o}),this.request_=this.xhr_({uri:a,requestType:"content-steering-manifest"},(l,h)=>{if(l)return h.status===410?(this.logger_(`manifest request 410 ${l}.`),this.logger_(`There will be no more content steering requests to ${a} this session.`),void this.excludedSteeringManifestURLs.add(a)):h.status===429?(h=h.responseHeaders["retry-after"],this.logger_(`manifest request 429 ${l}.`),this.logger_(`content steering will retry in ${h} seconds.`),void this.startTTLTimeout_(parseInt(h,10))):(this.logger_(`manifest failed to load ${l}.`),void this.startTTLTimeout_());this.trigger({type:"contentsteeringloadcomplete",metadata:o});let T;try{T=JSON.parse(this.request_.responseText)}catch(B){h={errorType:He.Error.StreamingContentSteeringParserError,error:B},this.trigger({type:"error",metadata:h})}this.assignSteeringProperties_(T),l={contentSteeringInfo:o.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}},this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}else this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose()}}setProxyServerUrl_(i){var i=new window.URL(i),a=new window.URL(this.proxyServerUrl_);return a.searchParams.set("url",encodeURI(i.toString())),this.setSteeringParams_(a.toString())}decodeDataUriManifest_(t){t=JSON.parse(window.atob(t)),this.assignSteeringProperties_(t)}setSteeringParams_(a){var i,a=new window.URL(a),o=this.getPathway(),l=this.getBandwidth_();return o&&(i=`_${this.manifestType_}_pathway`,a.searchParams.set(i,o)),l&&(i=`_${this.manifestType_}_throughput`,a.searchParams.set(i,l)),a.toString()}assignSteeringProperties_(t){var i;this.steeringManifest.version=t.VERSION,this.steeringManifest.version?(this.steeringManifest.ttl=t.TTL,this.steeringManifest.reloadUri=t["RELOAD-URI"],this.steeringManifest.priority=t["PATHWAY-PRIORITY"]||t["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=t["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose()),i=(a=>{for(var o of a)if(this.availablePathways_.has(o))return o;return[...this.availablePathways_][0]})(this.steeringManifest.priority),this.currentPathway!==i&&(this.currentPathway=i,this.trigger("content-steering"))):(this.logger_(`manifest version is ${t.VERSION}, which is not supported.`),this.trigger("error"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(t){if(!t)return null;var i=o=>this.excludedSteeringManifestURLs.has(o);if(this.proxyServerUrl_){var a=this.setProxyServerUrl_(t);if(!i(a))return a}return a=this.setSteeringParams_(t),i(a)?null:a}startTTLTimeout_(t=this.steeringManifest.ttl){this.ttlTimeout_=window.setTimeout(()=>{this.requestSteeringManifest()},1e3*t)}clearTTLTimeout_(){window.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new gh}addAvailablePathway(t){t&&this.availablePathways_.add(t)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(t){return this.availablePathways_.delete(t)}didDASHTagChange(t,i){return!i&&this.steeringManifest.reloadUri||i&&(en(t,i.serverURL)!==this.steeringManifest.reloadUri||i.defaultServiceLocation!==this.defaultPathway||i.queryBeforeStart!==this.queryBeforeStart||i.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let qn,Tg=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"];class Sg extends He.EventTarget{constructor(t){super(),this.fastQualityChange_=((Pe,Ae)=>{let st=null;return(...Ue)=>{clearTimeout(st),st=setTimeout(()=>{Pe.apply(null,Ue)},Ae)}})(this.fastQualityChange_.bind(this),100);let{src:i,withCredentials:a,tech:o,bandwidth:l,externVhs:h,useCueTags:T,playlistExclusionDuration:B,enableLowInitialPlaylist:G,sourceType:H,cacheEncryptionKeys:se,bufferBasedABR:pe,leastPixelDiffSelector:ae,captionServices:_e,experimentalUseMMS:Ce}=t;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");let Le=t.maxPlaylistRetries;Le!==null&&typeof Le<"u"||(Le=1/0),qn=h,this.bufferBasedABR=!!pe,this.leastPixelDiffSelector=!!ae,this.withCredentials=a,this.tech_=o,this.vhs_=o.vhs,this.player_=t.player_,this.sourceType_=H,this.useCueTags_=T,this.playlistExclusionDuration=B,this.maxPlaylistRetries=Le,this.enableLowInitialPlaylist=G,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:a,maxPlaylistRetries:Le,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{let Pe={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(Ae=>{Pe[Ae]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ln,activeTrack:Ln,getActiveGroup:Ln,onGroupChanged:Ln,onTrackChanged:Ln,lastTrack_:null,logger_:un(`MediaGroups[${Ae}]`)}}),Pe})(),Ce&&window.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new window.ManagedMediaSource,this.usingManagedMediaSource_=!0,He.log("Using ManagedMediaSource")):window.MediaSource&&(this.mediaSource=new window.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=zi(),this.hasPlayed_=!1,this.syncController_=new fg(t),this.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new gg,this.sourceUpdater_=new ah(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new mg,this.keyStatusMap_=new Map;var xe={vhs:this.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:_e,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:l,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:se,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:t.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)},xe=(this.mainPlaylistLoader_=this.sourceType_==="dash"?new fl(i,this.vhs_,Qt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Br(i,this.vhs_,Qt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new _l(Qt(xe,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new _l(Qt(xe,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new hg(Qt(xe,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((Pe,Ae)=>{function st(){o.off("vttjserror",Ue),Pe()}function Ue(){o.off("vttjsloaded",st),Ae()}o.one("vttjsloaded",st),o.one("vttjserror",Ue),o.addWebVttScript_()})}),t),this.contentSteeringController_=new _g(this.vhs_.xhr,()=>this.mainSegmentLoader_.bandwidth),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),Tg.forEach(Pe=>{this[Pe+"_"]=(function(Ae){return this.audioSegmentLoader_[Ae]+this.mainSegmentLoader_[Ae]}).bind(this,Pe)}),this.logger_=un("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1,this.tech_.preload()==="none"?"play":"loadstart");this.tech_.one(xe,()=>{let Pe=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-Pe,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){var t=this.mainAppendsToLoadedData_(),i=this.audioAppendsToLoadedData_();return t===-1||i===-1?-1:t+i}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(t="abr"){var i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,t)}switchMedia_(t,i,a){var o=this.media(),o=o&&(o.id||o.uri),l=t&&(t.id||t.uri);o&&o!==l&&(this.logger_(`switch media ${o} -> ${l} from `+i),o={renditionInfo:{id:l,bandwidth:t.attributes.BANDWIDTH,resolution:t.attributes.RESOLUTION,codecs:t.attributes.CODECS},cause:i},this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+i})),this.mainPlaylistLoader_.media(t,a)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{var i=this.mediaTypes_[t],i=i?i.activeGroup():null;let a=this.contentSteeringController_.getPathway();i&&a&&(i=(i.length?i[0]:i).playlists.filter(o=>o.attributes.serviceLocation===a)).length&&this.mediaTypes_[t].activePlaylistLoader.media(i[0])})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=window.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){var t=this.main(),i=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return i;var a=t.mediaGroups.AUDIO,o=Object.keys(a);let l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var h,T=a.main||o.length&&a[o[0]];for(h in T)if(T[h].default){l={label:h};break}}if(!l)return i;var B,G=[];for(B in a)if(a[B][l.label]){var H=a[B][l.label];if(H.playlists&&H.playlists.length)G.push.apply(G,H.playlists);else if(H.uri)G.push(H);else if(t.playlists.length)for(let pe=0;pe<t.playlists.length;pe++){var se=t.playlists[pe];se.attributes&&se.attributes.AUDIO&&se.attributes.AUDIO===B&&G.push(se)}}return G.length?G:i}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{var t=this.mainPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;ll(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),bg({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let i;if(!(i=(i=this.enableLowInitialPlaylist?this.selectInitialPlaylist():i)||this.selectPlaylist())||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{var t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{var t=this.mainPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;ll(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{var t=this.mainPlaylistLoader_.media();t.lastExcludeReason_!=="playlist-unchanged"&&this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,i=>{this.player_.trigger(Ii({},i))})})}handleUpdatedMediaPlaylist(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(h,i){var a=h.mediaGroups||{};let o=!0;var l,h=Object.keys(a.AUDIO);for(l in a.AUDIO)for(var T in a.AUDIO[l])a.AUDIO[l][T].uri||(o=!1);o&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),qn.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),h.length&&1<Object.keys(a.AUDIO[h[0]]).length&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(t){var i=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine();return function({currentPlaylist:h,buffered:T,currentTime:B,nextPlaylist:G,bufferLowWaterLine:H,bufferHighWaterLine:se,duration:pe,bufferBasedABR:ae,log:_e}){if(G){var Ce=`allowing switch ${h&&h.id||"null"} -> `+G.id;if(!h)return _e(Ce+" as current playlist is not set"),!0;if(G.id!==h.id){var Le=!!Mr(T,B).length;if(!h.endList)return Le||typeof h.partTargetDuration!="number"?(_e(Ce+" as current playlist is live"),!0):(_e(`not ${Ce} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);if(Le=rl(T,B),T=ae?Mi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Mi.MAX_BUFFER_LOW_WATER_LINE,pe<T)return _e(Ce+` as duration < max low water line (${pe} < ${T})`),!0;if(B=G.attributes.BANDWIDTH,pe=h.attributes.BANDWIDTH,B<pe&&(!ae||Le<se)){let xe=Ce+` as next bandwidth < current bandwidth (${B} < ${pe})`;return ae&&(xe+=` and forwardBuffer < bufferHighWaterLine (${Le} < ${se})`),_e(xe),!0}if((!ae||pe<B)&&H<=Le){let xe=Ce+` as forwardBuffer >= bufferLowWaterLine (${Le} >= ${H})`;return ae&&(xe+=` and next bandwidth > current bandwidth (${B} > ${pe})`),_e(xe),!0}_e(`not ${Ce} as no switching criteria met`)}}else He.log.warn("We received no playlist to switch to. Please check your stream.");return!1}({buffered:this.tech_.buffered(),currentTime:a,currentPlaylist:i,nextPlaylist:t,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{var i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{var i=this.audioSegmentLoader_.pendingSegment_;i&&i.segment&&i.segment.syncInfo&&(i=i.segment.syncInfo.end+.01,this.tech_.setCurrentTime(i))}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});var t=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();var i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(i=>{this.mainSegmentLoader_.on(i,a=>{this.player_.trigger(Ii({},a))}),this.audioSegmentLoader_.on(i,a=>{this.player_.trigger(Ii({},a))}),this.subtitleSegmentLoader_.on(i,a=>{this.player_.trigger(Ii({},a))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(t=this.selectPlaylist()){t&&t===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(t,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){var t;if(!this.setupFirstPlay())return this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load(),t=this.tech_.seekable(),this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}setupFirstPlay(){var t=this.mainPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList||t.start){var i=this.seekable();if(!i.length)return!1;var a=i.end(0);let o=a;t.start&&(t=t.start.timeOffset,o=t<0?Math.max(a+t,i.start(0)):Math.min(a,t)),this.trigger("firstplay"),this.tech_.setCurrentTime(o)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){var t;this.tryToCreateSourceBuffers_(),this.tech_.autoplay()&&typeof(t=this.tech_.play())<"u"&&typeof t.then=="function"&&t.then(null,i=>{}),this.trigger("sourceopen")}handleSourceEnded_(){var t,i;this.inbandTextTracks_.metadataTrack_&&(t=this.inbandTextTracks_.metadataTrack_.cues)&&t.length&&(i=this.duration(),t[t.length-1].endTime=isNaN(i)||Math.abs(i)===1/0?Number.MAX_VALUE:i)}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let t=this.mainSegmentLoader_.ended_;var i;this.mediaTypes_.AUDIO.activePlaylistLoader&&(i=this.mainSegmentLoader_.getCurrentMediaInfo_(),t=(i&&!i.hasVideo||t)&&this.audioSegmentLoader_.ended_),t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(t){var i,a;return!!this.seekable().length&&(i=this.syncController_.getExpiredTime(t,this.duration()))!==null&&(t=qn.Playlist.playlistEnd(t,i),i=this.tech_.currentTime(),(a=this.tech_.buffered()).length?(a=a.end(a.length-1))-i<=Cn&&t-a<=Cn:t-i<=Cn)}excludePlaylist({playlistToExclude:t=this.mainPlaylistLoader_.media(),error:i={},playlistExclusionDuration:a}){if(t=t||this.mainPlaylistLoader_.media(),a=a||i.playlistExclusionDuration||this.playlistExclusionDuration,t){t.playlistErrors_++;var o=this.mainPlaylistLoader_.main.playlists,l=o.filter(_a),l=l.length===1&&l[0]===t;if(o.length===1&&a!==1/0)return He.log.warn(`Problem encountered with playlist ${t.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(l);if(l){if(this.main().contentSteering){let G=this.pathwayAttribute_(t);var h=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(G),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(G)},h)}let B=!1;o.forEach(G=>{var H;G!==t&&typeof(H=G.excludeUntil)<"u"&&H!==1/0&&(B=!0,delete G.excludeUntil)}),B&&(He.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let T;if(T=t.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*a,t.excludeUntil=T,i.reason&&(t.lastExcludeReason_=i.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"}),h=this.selectPlaylist(),h)return(i.internal?this.logger_:He.log.warn)(`${i.internal?"Internal problem":"Problem"} encountered with playlist ${t.id}.`+(i.message?" "+i.message:"")+` Switching to playlist ${h.id}.`),h.attributes.AUDIO!==t.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),h.attributes.SUBTITLES!==t.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),o=h.targetDuration/2*1e3||5e3,a=typeof h.lastRequest=="number"&&Date.now()-h.lastRequest<=o,this.switchMedia_(h,"exclude",l||a);this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error")}else this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network")}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(t,i){let a=[];var o=t==="all",l=(!o&&t!=="main"||a.push(this.mainPlaylistLoader_),[]);!o&&t!=="audio"||l.push("AUDIO"),!o&&t!=="subtitle"||(l.push("CLOSED-CAPTIONS"),l.push("SUBTITLES")),l.forEach(h=>{h=this.mediaTypes_[h]&&this.mediaTypes_[h].activePlaylistLoader,h&&a.push(h)}),["main","audio","subtitle"].forEach(h=>{var T=this[h+"SegmentLoader_"];!T||t!==h&&t!=="all"||a.push(T)}),a.forEach(h=>i.forEach(T=>{typeof h[T]=="function"&&h[T]()}))}setCurrentTime(t){var i=Mr(this.tech_.buffered(),t);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?i&&i.length?t:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){var t;return this.mainPlaylistLoader_&&(t=this.mainPlaylistLoader_.media())?t.endList?this.mediaSource?this.mediaSource.duration:qn.Playlist.duration(t):1/0:0}seekable(){return this.seekable_}getSeekableRange_(l,i){var a,o,l=l.media();return l?(i=this.syncController_.getMediaSequenceSync(i))&&i.isReliable?(o=i.start,i=i.end,!isFinite(o)||!isFinite(i)||(a=qn.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,l),(i=Math.max(0,i-a))<o)?null:zi([[o,i]])):(a=this.syncController_.getExpiredTime(l,this.duration()))!==null&&(o=qn.Playlist.seekable(l,a,qn.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,l))).length?o:null:null}computeFinalSeekable_(t,i){var a,o,l;return!i||(a=t.start(0),o=t.end(0),l=i.start(0),i=i.end(0),o<l)||i<a?t:zi([[Math.max(a,l),Math.min(o,i)]])}onSyncInfoUpdate_(){if(this.mainPlaylistLoader_){var t,i=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(i){let a;this.mediaTypes_.AUDIO.activePlaylistLoader&&!(a=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"))||(t=this.seekable_,this.seekable_=this.computeFinalSeekable_(i,a),!this.seekable_)||t&&t.length&&this.seekable_.length&&t.start(0)===this.seekable_.start(0)&&t.end(0)===this.seekable_.end(0)||(this.logger_(`seekable updated [${oc(this.seekable_)}]`),i={seekableRanges:this.seekable_},this.trigger({type:"seekablerangeschanged",metadata:i}),this.tech_.trigger("seekablechanged"))}}}updateDuration(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open")this.updateDuration_=this.updateDuration.bind(this,t),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);else{if(t)return(t=this.seekable()).length?void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))):void 0;t=this.tech_.buffered();let i=qn.Playlist.duration(this.mainPlaylistLoader_.media());0<t.length&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(t=>{var i,a=this.mediaTypes_[t].groups;for(i in a)a[i].forEach(o=>{o.playlistLoader&&o.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=!i||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return t&&i}getCodecsOrExclude_(){let t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},i=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;var a=xs(this.main(),i);let o={};var l=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(o.video=a.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(o.video+=","+(a.audio||t.main.audioCodec||ld)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||l)&&(o.audio=a.audio||t.main.audioCodec||t.audio.audioCodec||ld,t.audio.isFmp4=(t.main.hasAudio&&!t.main.isMuxed?t.main:t.audio).isFmp4),o.audio||o.video){let h=(G,H)=>G?us(H,this.usingManagedMediaSource_):Lo(H),T={},B;if(["video","audio"].forEach(function(G){var H;o.hasOwnProperty(G)&&!h(t[G].isFmp4,o[G])&&(H=t[G].isFmp4?"browser":"muxer",T[H]=T[H]||[],T[H].push(o[G]),G==="audio")&&(B=H)}),l&&B&&i.attributes.AUDIO){let G=i.attributes.AUDIO;this.main().playlists.forEach(H=>{(H.attributes&&H.attributes.AUDIO)===G&&H!==i&&(H.excludeUntil=1/0)}),this.logger_(`excluding audio group ${G} as ${B} does not support codec(s): "${o.audio}"`)}if(!Object.keys(T).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){let G=[];if(["video","audio"].forEach(H=>{var se=(Tn(this.sourceUpdater_.codecs[H]||"")[0]||{}).type,pe=(Tn(o[H]||"")[0]||{}).type;se&&pe&&se.toLowerCase()!==pe.toLowerCase()&&G.push(`"${this.sourceUpdater_.codecs[H]}" -> "${o[H]}"`)}),G.length)return void this.excludePlaylist({playlistToExclude:i,error:{message:`Codec switching not supported: ${G.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return o}a=Object.keys(T).reduce((G,H)=>(G&&(G+=", "),G+=`${H} does not support codec(s): "${T[H].join(",")}"`),"")+".",this.excludePlaylist({playlistToExclude:i,error:{internal:!0,message:a},playlistExclusionDuration:1/0})}else this.excludePlaylist({playlistToExclude:i,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0})}tryToCreateSourceBuffers_(){var t;this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||this.areMediaTypesKnown_()&&(t=this.getCodecsOrExclude_())&&(this.sourceUpdater_.createSourceBuffers(t),t=[t.video,t.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(t))}excludeUnsupportedVariants_(){let t=this.main().playlists,i=[];Object.keys(t).forEach(h=>{var o,l,h=t[h];i.indexOf(h.id)===-1&&(i.push(h.id),l=[],!(o=xs(this.main,h)).audio||Lo(o.audio)||us(o.audio,this.usingManagedMediaSource_)||l.push("audio codec "+o.audio),!o.video||Lo(o.video)||us(o.video,this.usingManagedMediaSource_)||l.push("video codec "+o.video),o.text&&o.text==="stpp.ttml.im1t"&&l.push("text codec "+o.text),l.length)&&(h.excludeUntil=1/0,this.logger_(`excluding ${h.id} for unsupported: `+l.join(", ")))})}excludeIncompatibleVariants_(t){let i=[],a=this.main().playlists;t=wa(Tn(t));let o=Hc(t),l=t.video&&Tn(t.video)[0]||null,h=t.audio&&Tn(t.audio)[0]||null;Object.keys(a).forEach(se=>{var B,G,H,se=a[se];i.indexOf(se.id)===-1&&se.excludeUntil!==1/0&&(i.push(se.id),B=[],H=xs(this.mainPlaylistLoader_.main,se),G=Hc(H),H.audio||H.video)&&(G!==o&&B.push(`codec count "${G}" !== "${o}"`),this.sourceUpdater_.canChangeType()||(G=H.video&&Tn(H.video)[0]||null,H=H.audio&&Tn(H.audio)[0]||null,G&&l&&G.type.toLowerCase()!==l.type.toLowerCase()&&B.push(`video codec "${G.type}" !== "${l.type}"`),H&&h&&H.type.toLowerCase()!==h.type.toLowerCase()&&B.push(`audio codec "${H.type}" !== "${h.type}"`)),B.length)&&(se.excludeUntil=1/0,this.logger_(`excluding ${se.id}: `+B.join(" && ")))})}updateAdCues_(t){let i=0;var a=this.seekable();a.length&&(i=a.start(0)),function(o,l,h=0){if(o.segments){let H=h,se;for(let pe=0;pe<o.segments.length;pe++){var T,B,G=o.segments[pe];if(se=se||function(ae,_e){var Ce=ae.cues;for(let xe=0;xe<Ce.length;xe++){var Le=Ce[xe];if(_e>=Le.adStartTime&&_e<=Le.adEndTime)return Le}return null}(l,H+G.duration/2)){if("cueIn"in G){se.endTime=H,se.adEndTime=H,H+=G.duration,se=null;continue}if(H<se.endTime){H+=G.duration;continue}se.endTime+=G.duration}else"cueOut"in G&&((se=new window.VTTCue(H,H+G.duration,G.cueOut)).adStartTime=H,se.adEndTime=H+parseFloat(G.cueOut),l.addCue(se)),"cueOutCont"in G&&([T,B]=G.cueOutCont.split("/").map(parseFloat),(se=new window.VTTCue(H,H+G.duration,"")).adStartTime=H-T,se.adEndTime=se.adStartTime+B,l.addCue(se));H+=G.duration}}}(t,this.cueTagsTrack_,i)}goalBufferLength(){var t=this.tech_.currentTime(),i=Mi.GOAL_BUFFER_LENGTH,a=Mi.GOAL_BUFFER_LENGTH_RATE,o=Math.max(i,Mi.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+t*a,o)}bufferLowWaterLine(){var t=this.tech_.currentTime(),i=Mi.BUFFER_LOW_WATER_LINE,a=Mi.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(i,Mi.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(i,Mi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+t*a,this.bufferBasedABR?l:o)}bufferHighWaterLine(){return Mi.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(t){Jc(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:i,dateRanges:a})=>{let o=i.metadataTrack_;if(o){let l=window.WebKitDataCue||window.VTTCue;a.forEach(h=>{for(var T of Object.keys(h)){var B;lg.has(T)||((B=new l(h.startTime,h.endTime,"")).id=h.id,B.type="com.apple.quicktime.HLS",B.value={key:og[T],data:h[T]},T!=="scte35Out"&&T!=="scte35In"||(B.value.data=new Uint8Array(B.value.data.match(/[\da-f]{2}/gi)).buffer),o.addCue(B))}h.processDateRange()})}})({inbandTextTracks:this.inbandTextTracks_,dateRanges:t})}addMetadataToTextTrack(t,i,a){var o=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();Jc(this.inbandTextTracks_,t,this.tech_),ag({inbandTextTracks:this.inbandTextTracks_,metadataArray:i,timestampOffset:o,videoDuration:a})}pathwayAttribute_(t){return t.attributes["PATHWAY-ID"]||t.attributes.serviceLocation}initContentSteeringController_(){var t=this.main();if(t.contentSteering){for(var i of t.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(i));this.contentSteeringController_.assignTagProperties(t.uri,t.contentSteering),this.contentSteeringController_.queryBeforeStart?this.contentSteeringController_.requestSteeringManifest(!0):this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,i=>{this.trigger(Ii({},i))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{let t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{var i,a=this.contentSteeringController_.getAvailablePathways(),o=[];for(i of t.playlists){var l=i.attributes.serviceLocation;if(l&&(o.push(l),!a.has(l)))return!0}return!(o.length||!a.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){let t=this.contentSteeringController_.getPathway();if(t){this.handlePathwayClones_();let i=this.main().playlists,a=new Set,o=!1;Object.keys(i).forEach(h=>{var h=i[h],T=this.pathwayAttribute_(h),T=T&&t!==T,B=(h.excludeUntil===1/0&&h.lastExcludeReason_==="content-steering"&&!T&&(delete h.excludeUntil,delete h.lastExcludeReason_,o=!0),!h.excludeUntil&&h.excludeUntil!==1/0);!a.has(h.id)&&T&&B&&(a.add(h.id),h.excludeUntil=1/0,h.lastExcludeReason_="content-steering",this.logger_(`excluding ${h.id} for `+h.lastExcludeReason_))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(h=>{var h=this.mediaTypes_[h];h.activePlaylistLoader&&(h=h.activePlaylistLoader.media_)&&h.attributes.serviceLocation!==t&&(o=!0)}),o&&this.changeSegmentPathway_()}}handlePathwayClones_(){var t=this.main().playlists,i=this.contentSteeringController_.currentPathwayClones,a=this.contentSteeringController_.nextPathwayClones;if(i&&i.size||a&&a.size){for(var[o,l]of i.entries())a.get(o)||(this.mainPlaylistLoader_.updateOrDeleteClone(l),this.contentSteeringController_.excludePathway(o));for(let[T,B]of a.entries()){var h=i.get(T);h?this.equalPathwayClones_(h,B)||(this.mainPlaylistLoader_.updateOrDeleteClone(B,!0),this.contentSteeringController_.addAvailablePathway(T)):(t.filter(G=>G.attributes["PATHWAY-ID"]===B["BASE-ID"]).forEach(G=>{this.mainPlaylistLoader_.addClonePathway(B,G)}),this.contentSteeringController_.addAvailablePathway(T))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...a])))}}equalPathwayClones_(t,i){if(t["BASE-ID"]!==i["BASE-ID"]||t.ID!==i.ID||t["URI-REPLACEMENT"].HOST!==i["URI-REPLACEMENT"].HOST)return!1;var a,o,l=t["URI-REPLACEMENT"].PARAMS,h=i["URI-REPLACEMENT"].PARAMS;for(a in l)if(l[a]!==h[a])return!1;for(o in h)if(l[o]!==h[o])return!1;return!0}changeSegmentPathway_(){var t=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(t,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.main){let t=0,i="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(a=>{var o=this.mainPlaylistLoader_.getKeyIdSet(a);o&&o.size&&o.forEach(l=>{var h="usable",h=this.keyStatusMap_.has(l)&&this.keyStatusMap_.get(l)===h,T=a.lastExcludeReason_===i&&a.excludeUntil===1/0;h?T&&(delete a.excludeUntil,delete a.lastExcludeReason_,this.logger_(`enabling playlist ${a.id} because key ID ${l} is usable`)):(a.excludeUntil!==1/0&&a.lastExcludeReason_!==i&&(a.excludeUntil=1/0,a.lastExcludeReason_=i,this.logger_(`excluding playlist ${a.id} because the key ID ${l} doesn't exist in the keyStatusMap or is not usable`)),t++)})}),t>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(a=>{var o=a&&a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height<720,l=a.excludeUntil===1/0&&a.lastExcludeReason_===i;o&&l&&(delete a.excludeUntil,He.log.warn(`enabling non-HD playlist ${a.id} because all playlists were excluded due to ${i} key IDs`))})}}addKeyStatus_(t,i){t=(typeof t=="string"?t:(a=>(a=new Uint8Array(a),Array.from(a).map(o=>o.toString(16).padStart(2,"0")).join("")))(t)).slice(0,32).toLowerCase(),this.logger_(`KeyStatus '${i}' with key ID ${t} added to the keyStatusMap`),this.keyStatusMap_.set(t,i)}updatePlaylistByKeyStatus(t,i){this.addKeyStatus_(t,i),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}class wg{constructor(t,i,a){var o,l,h,T,B=t.playlistController_,G=B.fastQualityChange_.bind(B);i.attributes&&(o=i.attributes.RESOLUTION,this.width=o&&o.width,this.height=o&&o.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]),this.codecs=xs(B.main(),i),this.playlist=i,this.id=a,this.enabled=(l=t.playlists,h=i.id,T=G,H=>{var se=l.main.playlists[h],pe=ol(se),ae=_a(se);if(typeof H>"u")return ae;H?delete se.disabled:se.disabled=!0;var _e={renditionInfo:{id:h,bandwidth:se.attributes.BANDWIDTH,resolution:se.attributes.RESOLUTION,codecs:se.attributes.CODECS},cause:"fast-quality"};return H===ae||pe||(H?(T(se),l.trigger({type:"renditionenabled",metadata:_e})):l.trigger({type:"renditiondisabled",metadata:_e})),H})}}let yh=["seeking","seeked","pause","playing","error"];class Eg extends He.EventTarget{constructor(t){super(),this.playlistController_=t.playlistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=un("PlaybackWatcher"),this.logger_("initialize");let i=()=>this.monitorCurrentTime_(),a=()=>this.monitorCurrentTime_(),o=()=>this.techWaiting_(),l=()=>this.resetTimeUpdate_(),h=this.playlistController_,T=["main","subtitle","audio"],B={},G=(T.forEach(H=>{B[H]={reset:()=>this.resetSegmentDownloads_(H),updateend:()=>this.checkSegmentDownloads_(H)},h[H+"SegmentLoader_"].on("appendsdone",B[H].updateend),h[H+"SegmentLoader_"].on("playlistupdate",B[H].reset),this.tech_.on(["seeked","seeking"],B[H].reset)}),H=>{["main","audio"].forEach(se=>{h[se+"SegmentLoader_"][H]("appended",this.seekingAppendCheck_)})});this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),G("off"))},this.clearSeekingAppendCheck_=()=>G("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),G("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",o),this.tech_.on(yh,l),this.tech_.on("canplay",a),this.tech_.one("play",i),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",o),this.tech_.off(yh,l),this.tech_.off("canplay",a),this.tech_.off("play",i),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),T.forEach(H=>{h[H+"SegmentLoader_"].off("appendsdone",B[H].updateend),h[H+"SegmentLoader_"].off("playlistupdate",B[H].reset),this.tech_.off(["seeked","seeking"],B[H].reset)}),this.checkCurrentTimeTimeout_&&window.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(t){var i=this.playlistController_[t+"SegmentLoader_"];0<this[t+"StalledDownloads_"]&&this.logger_(`resetting possible stalled download count for ${t} loader`),this[t+"StalledDownloads_"]=0,this[t+"Buffered_"]=i.buffered_()}checkSegmentDownloads_(t){var i=this.playlistController_,a=i[t+"SegmentLoader_"],o=a.buffered_(),l=function(h,T){if(h!==T){if(!h&&T||!T&&h||h.length!==T.length)return!0;for(let B=0;B<h.length;B++)if(h.start(B)!==T.start(B)||h.end(B)!==T.end(B))return!0}return!1}(this[t+"Buffered_"],o);this[t+"Buffered_"]=o,l?(i.trigger({type:"bufferedrangeschanged",metadata:{bufferedRanges:o}}),this.resetSegmentDownloads_(t)):(this[t+"StalledDownloads_"]++,this.logger_(`found #${this[t+"StalledDownloads_"]} ${t} appends that did not increase buffer (possible stalled download)`,{playlistId:a.playlist_&&a.playlist_.id,buffered:ar(o)}),this[t+"StalledDownloads_"]<10||(this.logger_(t+" loader stalled download exclusion"),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:`vhs-${t}-download-exclusion`}),t!=="subtitle"&&i.excludePlaylist({error:{message:`Excessive ${t} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){var t,i;if(!this.tech_.paused()&&!this.tech_.seeking())return t=this.tech_.currentTime(),i=this.tech_.buffered(),this.lastRecordedTime===t&&(!i.length||t+Cn>=i.end(i.length-1))?this.techWaiting_():void(5<=this.consecutiveUpdates&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.playedRanges_.push(zi([this.lastRecordedTime,t])),i={playedRanges:this.playedRanges_},this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=t))}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;var t=this.seekable(),i=this.tech_.currentTime();let a;if(this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(l=t.end(t.length-1),a=l),this.beforeSeekableWindow_(t,i)&&(l=t.start(0),a=l+(l===t.end(0)?0:Cn)),typeof a<"u")this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${oc(t)}. Seeking to `+a+".");else{var l=this.playlistController_.sourceUpdater_,t=this.tech_.buffered(),o=l.audioBuffer?l.audioBuffered():null,l=l.videoBuffer?l.videoBuffered():null,h=this.media(),T=h.partTargetDuration||2*(h.targetDuration-En),B=[o,l];for(let H=0;H<B.length;H++)if(B[H]&&rl(B[H],i)<T)return!1;if((h=ba(t,i)).length===0)return!1;a=h.start(0)+Cn,this.logger_(`Buffered region starts (${h.start(0)})  just beyond seek point (${i}). Seeking to ${a}.`)}return this.tech_.setCurrentTime(a),!0}waiting_(){var t,i;this.techWaiting_()||(t=this.tech_.currentTime(),i=this.tech_.buffered(),(i=Mr(i,t)).length&&t+3<=i.end(0)&&(this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.logger_(`Stopped at ${t} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})))}techWaiting_(){var t,i=this.seekable(),a=this.tech_.currentTime();return!!this.tech_.seeking()||(this.beforeSeekableWindow_(i,a)?(i=i.end(i.length-1),this.logger_(`Fell out of live window at time ${a}. Seeking to live point (seekable end) `+i),this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0):(i=this.tech_.vhs.playlistController_.sourceUpdater_,t=this.tech_.buffered(),this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:a})?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0):0<(i=ba(t,a)).length&&(this.logger_(`Stopped at ${a} and seeking to `+i.start(0)),this.resetTimeUpdate_(),this.skipTheGap_(a),!0)))}afterSeekableWindow_(t,i,a,o=!1){if(!t.length)return!1;let l=t.end(t.length-1)+Cn;var h=!a.endList;return i>(l=h&&(typeof a.partTargetDuration=="number"||o)?t.end(t.length-1)+3*a.targetDuration:l)}beforeSeekableWindow_(t,i){return!!(t.length&&0<t.start(0)&&i<t.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:t,audioBuffered:i,currentTime:a}){if(t){let h;var o,l;return t.length&&i.length?(o=Mr(t,a-3),l=Mr(t,a),(i=Mr(i,a)).length&&!l.length&&o.length&&(h={start:o.end(0),end:i.end(0)})):ba(t,a).length||(h=this.gapFromVideoUnderflow_(t,a)),!!h&&(this.logger_(`Encountered a gap in video from ${h.start} to ${h.end}. Seeking to current time `+a),!0)}}skipTheGap_(t){var a=this.tech_.buffered(),i=this.tech_.currentTime(),a=ba(a,i);this.resetTimeUpdate_(),a.length!==0&&i===t&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+En),t={gapInfo:{from:i,to:a.start(0)}},this.playlistController_.trigger({type:"gapjumped",metadata:t}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(t,i){var a=function(h){if(h.length<2)return zi();var T=[];for(let H=1;H<h.length;H++){var B=h.end(H-1),G=h.start(H);T.push([B,G])}return zi(T)}(t);for(let h=0;h<a.length;h++){var o=a.start(h),l=a.end(h);if(i-o<4&&2<i-o)return{start:o,end:l}}return null}}let Cg={errorInterval:30,getSource(s){return s(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},vh=function(s,t){function i(G){G!=null&&(h=s.duration()!==1/0&&s.currentTime()||0,s.one("loadedmetadata",B),s.src(G),s.trigger({type:"usage",name:"vhs-error-reload"}),s.play())}function a(){if(Date.now()-l<1e3*T.errorInterval)s.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(T.getSource&&typeof T.getSource=="function")return l=Date.now(),T.getSource.call(s,i);He.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function o(){s.off("loadedmetadata",B),s.off("error",a),s.off("dispose",o)}let l=0,h=0,T=Qt(Cg,t),B=(s.ready(()=>{s.trigger({type:"usage",name:"vhs-error-reload-initialized"})}),function(){h&&s.currentTime(h)});s.on("error",a),s.on("dispose",o),s.reloadSourceOnError=function(G){o(),vh(s,G)}};function bh(s,t){var i=t.media();let a=-1;for(let o=0;o<s.length;o++)if(s[o].id===i.id){a=o;break}s.selectedIndex_=a,s.trigger({selectedIndex:a,type:"change"})}let bi={PlaylistLoader:Br,Playlist:tn,utils:nr,STANDARD_PLAYLIST_SELECTOR:Zc,INITIAL_PLAYLIST_SELECTOR:function(){var s=this.playlists.main.playlists.filter(tn.isEnabled),s=(jr(s,(t,i)=>ml(t,i)),s.filter(t=>!!xs(this.playlists.main,t).video));return s[0]||null},lastBandwidthSelector:Zc,movingAverageBandwidthSelector:function(s){let t=-1,i=-1;if(s<0||1<s)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let a=this.useDevicePixelRatio&&window.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(a=this.customPixelRatio),t<0&&(t=this.systemBandwidth,i=this.systemBandwidth),0<this.systemBandwidth&&this.systemBandwidth!==i&&(t=s*this.systemBandwidth+(1-s)*t,i=this.systemBandwidth),Yc(this.playlists.main,t,parseInt(Sa(this.tech_.el(),"width"),10)*a,parseInt(Sa(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:ml,comparePlaylistResolution:function(s,t){let i,a;return i=(i=s.attributes.RESOLUTION&&s.attributes.RESOLUTION.width?s.attributes.RESOLUTION.width:i)||window.Number.MAX_VALUE,a=(a=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width?t.attributes.RESOLUTION.width:a)||window.Number.MAX_VALUE,i===a&&s.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?s.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-a},xhr:Cc()},_h=(Object.keys(Mi).forEach(s=>{Object.defineProperty(bi,s,{get(){return He.log.warn(`using Vhs.${s} is UNSAFE be sure you know what you are doing`),Mi[s]},set(t){He.log.warn(`using Vhs.${s} is UNSAFE be sure you know what you are doing`),typeof t!="number"||t<0?He.log.warn(`value of Vhs.${s} must be greater than or equal to 0`):Mi[s]=t}})}),"videojs-vhs"),xg=(bi.canPlaySource=function(){return He.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},({player:s,sourceKeySystems:t,audioMedia:l,mainPlaylists:a})=>{if(!s.eme.initializeMediaKeys)return Promise.resolve();var o,l=l?a.concat([l]):a,l=(a=l,o=Object.keys(t),a.reduce((B,G)=>{var H;return G.contentProtection&&(H=o.reduce((se,pe)=>{var ae=G.contentProtection[pe];return ae&&ae.pssh&&(se[pe]={pssh:ae.pssh}),se},{}),Object.keys(H).length)&&B.push(H),B},[]));let h=[],T=[];return l.forEach(B=>{T.push(new Promise((G,H)=>{s.tech_.one("keysessioncreated",G)})),h.push(new Promise((G,H)=>{s.eme.initializeMediaKeys({keySystems:B},se=>{se?H(se):G()})}))}),Promise.race([Promise.all(h),Promise.race(T)])}),kg=({player:s,sourceKeySystems:t,media:i,audioMedia:a})=>(t=((o,l,h)=>{if(!o)return o;let T={};l&&l.attributes&&l.attributes.CODECS&&(T=wa(Tn(l.attributes.CODECS))),h&&h.attributes&&h.attributes.CODECS&&(T.audio=h.attributes.CODECS);var B,G=Tr(T.video),H=Tr(T.audio),se={};for(B in o)se[B]={},H&&(se[B].audioContentType=H),G&&(se[B].videoContentType=G),l.contentProtection&&l.contentProtection[B]&&l.contentProtection[B].pssh&&(se[B].pssh=l.contentProtection[B].pssh),typeof o[B]=="string"&&(se[B].url=o[B]);return Qt(o,se)})(t,i,a),!(!t||(s.currentSource().keySystems=t)&&!s.eme&&(He.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))),Th=()=>{if(!window.localStorage)return null;var s=window.localStorage.getItem(_h);if(!s)return null;try{return JSON.parse(s)}catch{return null}},Sh=(s,t)=>{s._requestCallbackSet||(s._requestCallbackSet=new Set),s._requestCallbackSet.add(t)},wh=(s,t)=>{s._responseCallbackSet||(s._responseCallbackSet=new Set),s._responseCallbackSet.add(t)},Eh=(s,t)=>{s._requestCallbackSet&&(s._requestCallbackSet.delete(t),s._requestCallbackSet.size||delete s._requestCallbackSet)},Ch=(s,t)=>{s._responseCallbackSet&&(s._responseCallbackSet.delete(t),s._responseCallbackSet.size||delete s._responseCallbackSet)};bi.supportsNativeHls=function(){if(!document||!document.createElement)return!1;let s=document.createElement("video");return!!He.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(s.canPlayType(t))})}(),bi.supportsNativeDash=!!(document&&document.createElement&&He.getTech("Html5").isSupported())&&/maybe|probably/i.test(document.createElement("video").canPlayType("application/dash+xml")),bi.supportsTypeNatively=s=>s==="hls"?bi.supportsNativeHls:s==="dash"&&bi.supportsNativeDash,bi.isSupported=function(){return He.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},bi.xhr.onRequest=function(s){Sh(bi.xhr,s)},bi.xhr.onResponse=function(s){wh(bi.xhr,s)},bi.xhr.offRequest=function(s){Eh(bi.xhr,s)},bi.xhr.offResponse=function(s){Ch(bi.xhr,s)},Me=He.getComponent("Component");class xh extends Me{constructor(t,i,a){if(super(i,a.vhs),typeof a.initialBandwidth=="number"&&(this.options_.bandwidth=a.initialBandwidth),this.logger_=un("VhsHandler"),i.options_&&i.options_.playerId&&(a=He.getPlayer(i.options_.playerId),this.player_=a),this.tech_=i,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(document,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],o=>{var l=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;l&&l.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(t={}){this.options_=Qt(this.options_,t),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage&&((t=Th())&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),t)&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"})),typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Mi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Mi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{typeof this.source_[i]<"u"&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,t=this.options_.customPixelRatio,typeof t=="number"&&0<=t&&(this.customPixelRatio=t)}setOptions(t={}){this.setOptions_(t)}src(t,i){t&&(this.setOptions_(),this.options_.src=(t=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t,this.options_.tech=this.tech_,this.options_.externVhs=bi,this.options_.sourceType=sd(i),this.options_.seekTo=a=>{this.tech_.setCurrentTime(a)},this.options_.player_=this.player_,this.playlistController_=new Sg(this.options_),t=Qt({liveRangeSafeTimeDelta:Cn},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_}),this.playbackWatcher_=new Eg(t),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{var a=He.players[this.tech_.options_.playerId];let o=this.playlistController_.error;typeof o!="object"||o.code?typeof o=="string"&&(o={message:o,code:3}):o.code=3,a.error(o)}),i=this.options_.bufferBasedABR?bi.movingAverageBandwidthSelector(.55):bi.STANDARD_PLAYLIST_SELECTOR,this.playlistController_.selectPlaylist=(this.selectPlaylist||i).bind(this),this.playlistController_.selectInitialPlaylist=bi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(a){this.playlistController_.selectPlaylist=a.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(a){this.playlistController_.mainSegmentLoader_.throughput.rate=a,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let a=this.playlistController_.mainSegmentLoader_.bandwidth;var o=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;return this.options_.useNetworkInformationApi&&o&&(o=1e3*o.downlink*1e3,a=1e7<=o&&1e7<=a?Math.max(a,o):o),a},set(a){this.playlistController_.mainSegmentLoader_.bandwidth=a,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){var a=1/(this.bandwidth||1);let o;return o=0<this.throughput?1/this.throughput:0,Math.floor(1/(a+o))},set(){He.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>ar(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>ar(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{if(this.options_.useBandwidthFromLocalStorage){var a={bandwidth:this.bandwidth,throughput:Math.round(this.throughput)};if(window.localStorage){var o=(o=Th())?Qt(o,a):a;try{window.localStorage.setItem(_h,JSON.stringify(o))}catch{return}}}}),this.playlistController_.on("selectedinitialmedia",()=>{var a;(a=this).representations=()=>{var o=a.playlistController_.main(),o=Cs(o)?a.playlistController_.getAudioTrackPlaylists_():o.playlists;return o?o.filter(l=>!ol(l)).map((l,h)=>new wg(a,l,l.id)):[]}}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el())&&(this.mediaSourceUrl_=window.URL.createObjectURL(this.playlistController_.mediaSource),(He.browser.IS_ANY_SAFARI||He.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){var t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),xg({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(i=>{this.logger_("error while creating EME key session",i),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){var t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=kg({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){var t=He.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{var i,a;i=this.qualityLevels_,(a=this).representations().forEach(o=>{i.addQualityLevel(o)}),bh(i,a.playlists)}),this.playlists.on("mediachange",()=>{bh(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.16.2","mux.js":"7.1.0","mpd-parser":"1.3.1","m3u8-parser":"7.2.0","aes-decrypter":"4.0.2"}}version(){return this.constructor.version()}canChangeType(){return ah.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(t){this.playlistController_.setCurrentTime(t)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&window.URL.revokeObjectURL&&(window.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(t,i){return Fm({playlist:this.playlistController_.media(),time:t,callback:i})}seekToProgramTime(t,i,a=!0,o=2){return Ic({programTime:t,playlist:this.playlistController_.media(),retryCount:o,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}setupXhrHooks_(){this.xhr.onRequest=t=>{Sh(this.xhr,t)},this.xhr.onResponse=t=>{wh(this.xhr,t)},this.xhr.offRequest=t=>{Eh(this.xhr,t)},this.xhr.offResponse=t=>{Ch(this.xhr,t)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.playlistController_.on(t,i=>{this.player_.trigger(Ii({},i))})}),["gapjumped","playedrangeschanged"].forEach(t=>{this.playbackWatcher_.on(t,i=>{this.player_.trigger(Ii({},i))})})}}let Ca={name:"videojs-http-streaming",VERSION:"3.16.2",canHandleSource(s,t={}){return t=Qt(He.options,t),!(!t.vhs.experimentalUseMMS&&!us("avc1.4d400d,mp4a.40.2",!1))&&Ca.canPlayType(s.type,t)},handleSource(s,t,i={}){return i=Qt(He.options,i),t.vhs=new xh(s,t,i),t.vhs.xhr=Cc(),t.vhs.setupXhrHooks_(),t.vhs.src(s.src,s.type),t.vhs},canPlayType(s,t){return s=sd(s),s&&(t=Ca.getOverrideNative(t),!bi.supportsTypeNatively(s)||t)?"maybe":""},getOverrideNative(i={}){var{vhs:i={}}=i,t=!(He.browser.IS_ANY_SAFARI||He.browser.IS_IOS),{overrideNative:i=t}=i;return i}};return us("avc1.4d400d,mp4a.40.2",!0)&&He.getTech("Html5").registerSourceHandler(Ca,0),He.VhsHandler=xh,He.VhsSourceHandler=Ca,He.Vhs=bi,He.use||He.registerComponent("Vhs",bi),He.options.vhs=He.options.vhs||{},He.getPlugin&&He.getPlugin("reloadSourceOnError")||He.registerPlugin("reloadSourceOnError",function(s){vh(this,s)}),He});var webodf_version="0.5.9";function Runtime(){}Runtime.prototype.getVariable=function(A){},Runtime.prototype.toJson=function(A){},Runtime.prototype.fromJson=function(A){},Runtime.prototype.byteArrayFromString=function(A,j){},Runtime.prototype.byteArrayToString=function(A,j){},Runtime.prototype.read=function(A,j,M,w){},Runtime.prototype.readFile=function(A,j,M){},Runtime.prototype.readFileSync=function(A,j){},Runtime.prototype.loadXML=function(A,j){},Runtime.prototype.writeFile=function(A,j,M){},Runtime.prototype.deleteFile=function(A,j){},Runtime.prototype.log=function(A,j){},Runtime.prototype.setTimeout=function(A,j){},Runtime.prototype.clearTimeout=function(A){},Runtime.prototype.libraryPaths=function(){},Runtime.prototype.currentDirectory=function(){},Runtime.prototype.setCurrentDirectory=function(A){},Runtime.prototype.type=function(){},Runtime.prototype.getDOMImplementation=function(){},Runtime.prototype.parseXML=function(A){},Runtime.prototype.exit=function(A){},Runtime.prototype.getWindow=function(){},Runtime.prototype.requestAnimationFrame=function(A){},Runtime.prototype.cancelAnimationFrame=function(A){},Runtime.prototype.assert=function(A,j){};var IS_COMPILED_CODE=!0;Runtime.byteArrayToString=function(A,j){function M(N){var O="",x,I=N.length;for(x=0;x<I;x+=1)O+=String.fromCharCode(N[x]&255);return O}function w(N){var O="",x,I=N.length,_=[],S,u,y,v;for(x=3<=I&&N[0]===239&&N[1]===187&&N[2]===191?3:0;x<I;x+=1)S=N[x],128>S?_.push(S):(x+=1,u=N[x],194<=S&&224>S?_.push((S&31)<<6|u&63):(x+=1,y=N[x],224<=S&&240>S?_.push((S&15)<<12|(u&63)<<6|y&63):(x+=1,v=N[x],240<=S&&245>S&&(S=(S&7)<<18|(u&63)<<12|(y&63)<<6|v&63,S-=65536,_.push((S>>10)+55296,(S&1023)+56320))))),1e3<=_.length&&(O+=String.fromCharCode.apply(null,_),_.length=0);return O+String.fromCharCode.apply(null,_)}var E;return j==="utf8"?E=w(A):(j!=="binary"&&this.log("Unsupported encoding: "+j),E=M(A)),E},Runtime.getVariable=function(g){try{return eval(g)}catch(A){}},Runtime.toJson=function(A){return JSON.stringify(A)},Runtime.fromJson=function(A){return JSON.parse(A)},Runtime.getFunctionName=function(A){return A.name===void 0?(A=/function\s+(\w+)/.exec(A))&&A[1]:A.name},Runtime.assert=function(A,j){if(!A)throw this.log("alert",`ASSERTION FAILED:
`+j),Error(j)};function BrowserRuntime(){function A(I){var _=I.length,S,u,y=0;for(S=0;S<_;S+=1)u=I.charCodeAt(S),y+=1+(128<u)+(2048<u),55040<u&&57344>u&&(y+=1,S+=1);return y}function j(I,_,S){var u=I.length,y,v;for(_=new Uint8Array(new ArrayBuffer(_)),S?(_[0]=239,_[1]=187,_[2]=191,v=3):v=0,S=0;S<u;S+=1)y=I.charCodeAt(S),128>y?(_[v]=y,v+=1):2048>y?(_[v]=192|y>>>6,_[v+1]=128|y&63,v+=2):55040>=y||57344<=y?(_[v]=224|y>>>12&15,_[v+1]=128|y>>>6&63,_[v+2]=128|y&63,v+=3):(S+=1,y=(y-55296<<10|I.charCodeAt(S)-56320)+65536,_[v]=240|y>>>18&7,_[v+1]=128|y>>>12&63,_[v+2]=128|y>>>6&63,_[v+3]=128|y&63,v+=4);return _}function M(I){var _=I.length,S=new Uint8Array(new ArrayBuffer(_)),u;for(u=0;u<_;u+=1)S[u]=I.charCodeAt(u)&255;return S}function w(I,_){var S;_!==void 0?S=I:_=I,console.log(_),x.enableAlerts&&S==="alert"&&alert(_)}function E(I,_,S){if(S.status!==0||S.responseText)if(S.status===200||S.status===0){if(S.response&&typeof S.response!="string")_==="binary"?(S=S.response,S=new Uint8Array(S)):S=String(S.response);else if(_==="binary")if(S.responseBody!==null&&typeof VBArray<"u"){S=new VBArray(S.responseBody).toArray();var u=S.length;for(_=new Uint8Array(new ArrayBuffer(u)),I=0;I<u;I+=1)_[I]=S[I];S=_}else{if((I=S.getResponseHeader("Content-Length"))&&(I=parseInt(I,10)),I&&I!==S.responseText.length)e:{u=S.responseText,_=!1;var y=A(u);if(typeof I=="number"){if(I!==y&&I!==y+3){u=void 0;break e}_=y+3===I,y=I}u=j(u,y,_)}u===void 0&&(u=M(S.responseText)),S=u}else S=S.responseText;S={err:null,data:S}}else S={err:S.responseText||S.statusText,data:null};else S={err:"File "+I+" is empty.",data:null};return S}function N(I,_,S){var u=new XMLHttpRequest;return u.open("GET",I,S),u.overrideMimeType&&(_!=="binary"?u.overrideMimeType("text/plain; charset="+_):u.overrideMimeType("text/plain; charset=x-user-defined")),u}function O(I,_,S){var u=N(I,_,!0);u.onreadystatechange=function(){var y;u.readyState===4&&(y=E(I,_,u),S(y.err,y.data))};try{u.send(null)}catch(y){S(y.message,null)}}var x=this;this.byteArrayFromString=function(I,_){var S;return _==="utf8"?S=j(I,A(I),!1):(_!=="binary"&&x.log("unknown encoding: "+_),S=M(I)),S},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.readFile=O,this.read=function(I,_,S,u){O(I,"binary",function(y,v){var m=null;if(v){if(typeof v=="string")throw"This should not happen.";m=v.subarray(_,_+S)}u(y,m)})},this.readFileSync=function(I,_){var S=N(I,_,!1),u;try{if(S.send(null),u=E(I,_,S),u.err)throw u.err;if(u.data===null)throw"No data read from "+I+"."}catch(y){throw y}return u.data},this.writeFile=function(I,_,S){var u=new XMLHttpRequest,y;u.open("PUT",I,!0),u.onreadystatechange=function(){u.readyState===4&&(u.status!==0||u.responseText?200<=u.status&&300>u.status||u.status===0?S(null):S("Status "+String(u.status)+": "+u.responseText||u.statusText):S("File "+I+" is empty."))},y=_.buffer&&!u.sendAsBinary?_.buffer:x.byteArrayToString(_,"binary");try{u.sendAsBinary?u.sendAsBinary(y):u.send(y)}catch(v){x.log("HUH? "+v+" "+_),S(v.message)}},this.deleteFile=function(I,_){var S=new XMLHttpRequest;S.open("DELETE",I,!0),S.onreadystatechange=function(){S.readyState===4&&(200>S.status&&300<=S.status?_(S.responseText):_(null))},S.send(null)},this.loadXML=function(I,_){var S=new XMLHttpRequest;S.open("GET",I,!0),S.overrideMimeType&&S.overrideMimeType("text/xml"),S.onreadystatechange=function(){S.readyState===4&&(S.status!==0||S.responseText?S.status===200||S.status===0?_(null,S.responseXML):_(S.responseText,null):_("File "+I+" is empty.",null))};try{S.send(null)}catch(u){_(u.message,null)}},this.log=w,this.enableAlerts=!0,this.assert=Runtime.assert,this.setTimeout=function(I,_){return setTimeout(function(){I()},_)},this.clearTimeout=function(I){clearTimeout(I)},this.libraryPaths=function(){return["lib"]},this.setCurrentDirectory=function(){},this.currentDirectory=function(){return""},this.type=function(){return"BrowserRuntime"},this.getDOMImplementation=function(){return window.document.implementation},this.parseXML=function(I){return new DOMParser().parseFromString(I,"text/xml")},this.exit=function(I){w("Calling exit with code "+String(I)+", but exit() is not implemented.")},this.getWindow=function(){return window},this.requestAnimationFrame=function(I){var _=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,S=0;if(_)_.bind(window),S=_(I);else return setTimeout(I,15);return S},this.cancelAnimationFrame=function(I){var _=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;_?(_.bind(window),_(I)):clearTimeout(I)}}function NodeJSRuntime(){function A(I){var _=I.length,S,u=new Uint8Array(new ArrayBuffer(_));for(S=0;S<_;S+=1)u[S]=I[S];return u}function j(I,_,S){function u(y,v){if(y)return S(y,null);if(!v)return S("No data for "+I+".",null);if(typeof v=="string")return S(y,v);S(y,A(v))}I=E.resolve(N,I),_!=="binary"?w.readFile(I,_,u):w.readFile(I,null,u)}var M=this,w=require("fs"),E=require("path"),N="",O,x;this.byteArrayFromString=function(I,_){var S=new Buffer(I,_),u,y=S.length,v=new Uint8Array(new ArrayBuffer(y));for(u=0;u<y;u+=1)v[u]=S[u];return v},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.readFile=j,this.loadXML=function(I,_){j(I,"utf-8",function(S,u){if(S)return _(S,null);if(!u)return _("No data for "+I+".",null);_(null,M.parseXML(u))})},this.writeFile=function(I,_,S){_=new Buffer(_),I=E.resolve(N,I),w.writeFile(I,_,"binary",function(u){S(u||null)})},this.deleteFile=function(I,_){I=E.resolve(N,I),w.unlink(I,_)},this.read=function(I,_,S,u){I=E.resolve(N,I),w.open(I,"r+",666,function(y,v){if(y)u(y,null);else{var m=new Buffer(S);w.read(v,m,0,S,_,function(R){w.close(v),u(R,A(m))})}})},this.readFileSync=function(I,_){var S;if(S=w.readFileSync(I,_==="binary"?null:_),S===null)throw"File "+I+" could not be read.";return _==="binary"&&(S=A(S)),S},this.log=function(I,_){var S;_!==void 0?S=I:_=I,S==="alert"&&process.stderr.write(`
!!!!! ALERT !!!!!
`),process.stderr.write(_+`
`),S==="alert"&&process.stderr.write(`!!!!! ALERT !!!!!
`)},this.assert=Runtime.assert,this.setTimeout=function(I,_){return setTimeout(function(){I()},_)},this.clearTimeout=function(I){clearTimeout(I)},this.libraryPaths=function(){return[__dirname]},this.setCurrentDirectory=function(I){N=I},this.currentDirectory=function(){return N},this.type=function(){return"NodeJSRuntime"},this.getDOMImplementation=function(){return x},this.parseXML=function(I){return O.parseFromString(I,"text/xml")},this.exit=process.exit,this.getWindow=function(){return null},this.requestAnimationFrame=function(I){return setTimeout(I,15)},this.cancelAnimationFrame=function(I){clearTimeout(I)},O=new(require("xmldom")).DOMParser,x=M.parseXML("<a/>").implementation}function RhinoRuntime(){var A=this,j={},M=j.javax.xml.parsers.DocumentBuilderFactory.newInstance(),w,E,N="";M.setValidating(!1),M.setNamespaceAware(!0),M.setExpandEntityReferences(!1),M.setSchema(null),E=j.org.xml.sax.EntityResolver({resolveEntity:function(O,x){var I=new j.java.io.FileReader(x);return new j.org.xml.sax.InputSource(I)}}),w=M.newDocumentBuilder(),w.setEntityResolver(E),this.byteArrayFromString=function(O,x){var I,_=O.length,S=new Uint8Array(new ArrayBuffer(_));for(I=0;I<_;I+=1)S[I]=O.charCodeAt(I)&255;return S},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.loadXML=function(O,x){var I=new j.java.io.File(O),_=null;try{_=w.parse(I)}catch(S){return print(S),x(S,null)}x(null,_)},this.readFile=function(O,x,I){N&&(O=N+"/"+O);var _=new j.java.io.File(O),S=x==="binary"?"latin1":x;_.isFile()?((O=readFile(O,S))&&x==="binary"&&(O=A.byteArrayFromString(O,"binary")),I(null,O)):I(O+" is not a file.",null)},this.writeFile=function(O,x,I){N&&(O=N+"/"+O),O=new j.java.io.FileOutputStream(O);var _,S=x.length;for(_=0;_<S;_+=1)O.write(x[_]);O.close(),I(null)},this.deleteFile=function(O,x){N&&(O=N+"/"+O);var I=new j.java.io.File(O),_=O+Math.random(),_=new j.java.io.File(_);I.rename(_)?(_.deleteOnExit(),x(null)):x("Could not delete "+O)},this.read=function(O,x,I,_){N&&(O=N+"/"+O);var S;S=O;var u="binary";new j.java.io.File(S).isFile()?(u==="binary"&&(u="latin1"),S=readFile(S,u)):S=null,S?_(null,this.byteArrayFromString(S.substring(x,x+I),"binary")):_("Cannot read "+O,null)},this.readFileSync=function(O,x){if(!x)return"";var I=readFile(O,x);if(I===null)throw"File could not be read.";return I},this.log=function(O,x){var I;x!==void 0?I=O:x=O,I==="alert"&&print(`
!!!!! ALERT !!!!!`),print(x),I==="alert"&&print("!!!!! ALERT !!!!!")},this.assert=Runtime.assert,this.setTimeout=function(O){return O(),0},this.clearTimeout=function(){},this.libraryPaths=function(){return["lib"]},this.setCurrentDirectory=function(O){N=O},this.currentDirectory=function(){return N},this.type=function(){return"RhinoRuntime"},this.getDOMImplementation=function(){return w.getDOMImplementation()},this.parseXML=function(O){return O=new j.java.io.StringReader(O),O=new j.org.xml.sax.InputSource(O),w.parse(O)},this.exit=quit,this.getWindow=function(){return null},this.requestAnimationFrame=function(O){return O(),0},this.cancelAnimationFrame=function(){}}Runtime.create=function(){return typeof window<"u"?new BrowserRuntime:typeof require<"u"?new NodeJSRuntime:new RhinoRuntime};var runtime=Runtime.create(),core={},gui={},xmldom={},odf={},ops={},webodf={};(function(){webodf.Version=typeof webodf_version<"u"?webodf_version:"From Source"})(),function(){function g(A,j,M){var w=A+"/manifest.json",E,N;runtime.log("Loading manifest: "+w);try{E=runtime.readFileSync(w,"utf-8")}catch(O){if(M)runtime.log("No loadable manifest found.");else throw console.log(String(O)),O;return}M=JSON.parse(E);for(N in M)M.hasOwnProperty(N)&&(j[N]={dir:A,deps:M[N]})}function k(A,j,M){function w(x){if(!O[x]&&!M(x)){if(N[x])throw"Circular dependency detected for "+x+".";if(N[x]=!0,!j[x])throw"Missing dependency information for class "+x+".";var I=j[x],_=I.deps,S,u=_.length;for(S=0;S<u;S+=1)w(_[S]);N[x]=!1,O[x]=!0,E.push(I.dir+"/"+x.replace(".","/")+".js")}}var E=[],N={},O={};return A.forEach(w),E}function d(A,j){return j+(`
//# sourceURL=`+A)}function b(b){var f,e;for(f=0;f<b.length;f+=1)e=runtime.readFileSync(b[f],"utf-8"),e=d(b[f],e),eval(e)}function f(A){A=A.split(".");var j,M=p,w=A.length;for(j=0;j<w;j+=1){if(!M.hasOwnProperty(A[j]))return!1;M=M[A[j]]}return!0}var n,p={core,gui,xmldom,odf,ops};runtime.loadClasses=function(A,j){if(IS_COMPILED_CODE||A.length===0)return j&&j();var M;if(!(M=n)){M=[];var w=runtime.libraryPaths(),E;for(runtime.currentDirectory()&&w.indexOf(runtime.currentDirectory())===-1&&g(runtime.currentDirectory(),M,!0),E=0;E<w.length;E+=1)g(w[E],M)}if(n=M,A=k(A,n,f),A.length===0)return j&&j();if(runtime.type()==="BrowserRuntime"&&j){M=A,w=document.currentScript||document.documentElement.lastChild,E=document.createDocumentFragment();var N,O;for(O=0;O<M.length;O+=1)N=document.createElement("script"),N.type="text/javascript",N.charset="utf-8",N.async=!1,N.setAttribute("src",M[O]),E.appendChild(N);j&&(N.onload=j),w.parentNode.insertBefore(E,w)}else b(A),j&&j()},runtime.loadClass=function(A,j){runtime.loadClasses([A],j)}}(),function(){var A=function(j){return j};runtime.getTranslator=function(){return A},runtime.setTranslator=function(j){A=j},runtime.tr=function(j){var M=A(j);return M&&typeof M=="string"?M:j}}(),function(g){function k(d){if(d.length){var b=d[0];runtime.readFile(b,"utf8",function(f,n){function g(){var b;(b=eval(k))&&runtime.exit(b)}var r="",r=b.lastIndexOf("/"),k=n,r=r!==-1?b.substring(0,r):".";runtime.setCurrentDirectory(r),f?(runtime.log(f),runtime.exit(1)):k===null?(runtime.log("No code found for "+b),runtime.exit(1)):g.apply(null,d)})}}g=g?Array.prototype.slice.call(g):[],runtime.type()==="NodeJSRuntime"?k(process.argv.slice(2)):runtime.type()==="RhinoRuntime"?k(g):k(g.slice(1))}(typeof arguments<"u"&&arguments),function(){core.Async=function(){return{forEach:function(A,j,M){function w(x){O!==N&&(x?(O=N,M(x)):(O+=1,O===N&&M(null)))}var E,N=A.length,O=0;for(E=0;E<N;E+=1)j(A[E],w)},destroyAll:function(A,j){function M(w,E){E?j(E):w<A.length?A[w](function(N){M(w+1,N)}):j()}M(0,void 0)}}}()}();function makeBase64(){function A(z){var P,Y=z.length,$=new Uint8Array(new ArrayBuffer(Y));for(P=0;P<Y;P+=1)$[P]=z.charCodeAt(P)&255;return $}function j(z){var P,Y="",$,J=z.length-2;for($=0;$<J;$+=3)P=z[$]<<16|z[$+1]<<8|z[$+2],Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[P>>>18],Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[P>>>12&63],Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[P>>>6&63],Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[P&63];return $===J+1?(P=z[$]<<4,Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[P>>>6],Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[P&63],Y+="=="):$===J&&(P=z[$]<<10|z[$+1]<<2,Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[P>>>12],Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[P>>>6&63],Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[P&63],Y+="="),Y}function M(z){z=z.replace(/[^A-Za-z0-9+\/]+/g,"");var P=z.length,Y=new Uint8Array(new ArrayBuffer(3*P)),$=z.length%4,J=0,te,q;for(te=0;te<P;te+=4)q=(m[z.charAt(te)]||0)<<18|(m[z.charAt(te+1)]||0)<<12|(m[z.charAt(te+2)]||0)<<6|(m[z.charAt(te+3)]||0),Y[J]=q>>16,Y[J+1]=q>>8&255,Y[J+2]=q&255,J+=3;return P=3*P-[0,0,2,1][$],Y.subarray(0,P)}function w(z){var P,Y,$=z.length,J=0,te=new Uint8Array(new ArrayBuffer(3*$));for(P=0;P<$;P+=1)Y=z[P],128>Y?te[J++]=Y:(2048>Y?te[J++]=192|Y>>>6:(te[J++]=224|Y>>>12&15,te[J++]=128|Y>>>6&63),te[J++]=128|Y&63);return te.subarray(0,J)}function E(z){var P,Y,$,J,te=z.length,q=new Uint8Array(new ArrayBuffer(te)),K=0;for(P=0;P<te;P+=1)Y=z[P],128>Y?q[K++]=Y:(P+=1,$=z[P],224>Y?q[K++]=(Y&31)<<6|$&63:(P+=1,J=z[P],q[K++]=(Y&15)<<12|($&63)<<6|J&63));return q.subarray(0,K)}function N(z){return j(A(z))}function O(z){return String.fromCharCode.apply(String,M(z))}function x(z){return E(A(z))}function I(z){z=E(z);for(var P="",Y=0;Y<z.length;)P+=String.fromCharCode.apply(String,z.subarray(Y,Y+45e3)),Y+=45e3;return P}function _(z,P,Y){var $,J,te,q="";for(te=P;te<Y;te+=1)P=z.charCodeAt(te)&255,128>P?q+=String.fromCharCode(P):(te+=1,$=z.charCodeAt(te)&255,224>P?q+=String.fromCharCode((P&31)<<6|$&63):(te+=1,J=z.charCodeAt(te)&255,q+=String.fromCharCode((P&15)<<12|($&63)<<6|J&63)));return q}function S(z,P){function Y(){var te=J+1e5;te>z.length&&(te=z.length),$+=_(z,J,te),J=te,te=J===z.length,P($,te)&&!te&&runtime.setTimeout(Y,0)}var $="",J=0;1e5>z.length?P(_(z,0,z.length),!0):(typeof z!="string"&&(z=z.slice()),Y())}function u(z){return w(A(z))}function y(z){return String.fromCharCode.apply(String,w(z))}function v(z){return String.fromCharCode.apply(String,w(A(z)))}var m=function(z){var P={},Y,$;for(Y=0,$=z.length;Y<$;Y+=1)P[z.charAt(Y)]=Y;return P}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),R,V,Z=runtime.getWindow(),ne,ee;return Z&&Z.btoa?(ne=Z.btoa,R=function(z){return ne(v(z))}):(ne=N,R=function(z){return j(u(z))}),Z&&Z.atob?(ee=Z.atob,V=function(z){return z=ee(z),_(z,0,z.length)}):(ee=O,V=function(z){return I(M(z))}),core.Base64=function(){return this.convertByteArrayToBase64=this.convertUTF8ArrayToBase64=j,this.convertBase64ToByteArray=this.convertBase64ToUTF8Array=M,this.convertUTF16ArrayToByteArray=this.convertUTF16ArrayToUTF8Array=w,this.convertByteArrayToUTF16Array=this.convertUTF8ArrayToUTF16Array=E,this.convertUTF8StringToBase64=N,this.convertBase64ToUTF8String=O,this.convertUTF8StringToUTF16Array=x,this.convertByteArrayToUTF16String=this.convertUTF8ArrayToUTF16String=I,this.convertUTF8StringToUTF16String=S,this.convertUTF16StringToByteArray=this.convertUTF16StringToUTF8Array=u,this.convertUTF16ArrayToUTF8String=y,this.convertUTF16StringToUTF8String=v,this.convertUTF16StringToBase64=R,this.convertBase64ToUTF16String=V,this.fromBase64=O,this.toBase64=N,this.atob=ee,this.btoa=ne,this.utob=v,this.btou=S,this.encode=R,this.encodeURI=function(z){return R(z).replace(/[+\/]/g,function(P){return P==="+"?"-":"_"}).replace(/\\=+$/,"")},this.decode=function(z){return V(z.replace(/[\-_]/g,function(P){return P==="-"?"+":"/"}))},this},core.Base64}core.Base64=makeBase64(),core.CSSUnits=function(){var A=this,j={in:1,cm:2.54,mm:25.4,pt:72,pc:12,px:96};this.convert=function(M,w,E){return M*j[E]/j[w]},this.convertMeasure=function(M,w){var E,N;return M&&w&&(E=parseFloat(M),N=M.replace(E.toString(),""),E=A.convert(E,N,w)),E},this.getUnits=function(M){return M.substr(M.length-2,M.length)}},function(){function A(){var w,E,N,O,x,I,_,S,u;return M===void 0&&(E=(w=runtime.getWindow())&&w.document,I=E.documentElement,_=E.body,M={rangeBCRIgnoresElementBCR:!1,unscaledRangeClientRects:!1,elementBCRIgnoresBodyScroll:!1},E&&(O=E.createElement("div"),O.style.position="absolute",O.style.left="-99999px",O.style.transform="scale(2)",O.style["-webkit-transform"]="scale(2)",x=E.createElement("div"),O.appendChild(x),_.appendChild(O),w=E.createRange(),w.selectNode(x),M.rangeBCRIgnoresElementBCR=w.getClientRects().length===0,x.appendChild(E.createTextNode("Rect transform test")),E=x.getBoundingClientRect(),N=w.getBoundingClientRect(),M.unscaledRangeClientRects=2<Math.abs(E.height-N.height),O.style.transform="",O.style["-webkit-transform"]="",E=I.style.overflow,N=_.style.overflow,S=_.style.height,u=_.scrollTop,I.style.overflow="visible",_.style.overflow="visible",_.style.height="200%",_.scrollTop=_.scrollHeight,M.elementBCRIgnoresBodyScroll=w.getBoundingClientRect().top!==x.getBoundingClientRect().top,_.scrollTop=u,_.style.height=S,_.style.overflow=N,I.style.overflow=E,w.detach(),_.removeChild(O),w=Object.keys(M).map(function(y){return y+":"+String(M[y])}).join(", "),runtime.log("Detected browser quirks - "+w))),M}function j(w,E,N){for(w=w?w.firstElementChild:null;w;){if(w.localName===N&&w.namespaceURI===E)return w;w=w.nextElementSibling}return null}var M;core.DomUtilsImpl=function(){function w(v,m){for(var R=0,V;v.parentNode!==m;)runtime.assert(v.parentNode!==null,"parent is null"),v=v.parentNode;for(V=m.firstChild;V!==v;)R+=1,V=V.nextSibling;return R}function E(v,m){return 0>=v.compareBoundaryPoints(Range.START_TO_START,m)&&0<=v.compareBoundaryPoints(Range.END_TO_END,m)}function N(v,m){return 0>=v.compareBoundaryPoints(Range.END_TO_START,m)&&0<=v.compareBoundaryPoints(Range.START_TO_END,m)}function O(v,m){var R=null;return v.nodeType===Node.TEXT_NODE&&(v.length===0?(v.parentNode.removeChild(v),m.nodeType===Node.TEXT_NODE&&(R=m)):(m.nodeType===Node.TEXT_NODE&&(v.appendData(m.data),m.parentNode.removeChild(m)),R=v)),R}function x(v){for(var m=v.parentNode;v.firstChild;)m.insertBefore(v.firstChild,v);return m.removeChild(v),m}function I(v,m){var R=v.parentNode,V=v.firstChild,Z=m(v),ne;if(Z===NodeFilter.FILTER_SKIP)return R;for(;V;)ne=V.nextSibling,I(V,m),V=ne;return R&&Z===NodeFilter.FILTER_REJECT&&x(v),R}function _(v,m){return v===m||!!(v.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)}function S(v,m){return A().unscaledRangeClientRects?v:v/m}function u(v,m,R){Object.keys(m).forEach(function(V){var ee=V.split(":"),Z=ee[1],ne=R(ee[0]),ee=m[V],z=typeof ee;z==="object"?Object.keys(ee).length&&(V=ne?v.getElementsByTagNameNS(ne,Z)[0]||v.ownerDocument.createElementNS(ne,V):v.getElementsByTagName(Z)[0]||v.ownerDocument.createElement(V),v.appendChild(V),u(V,ee,R)):ne&&(runtime.assert(z==="number"||z==="string","attempting to map unsupported type '"+z+"' (key: "+V+")"),v.setAttributeNS(ne,V,String(ee)))})}var y=null;this.splitBoundaries=function(v){var m,R=[],V,Z,ne;if(v.startContainer.nodeType===Node.TEXT_NODE||v.endContainer.nodeType===Node.TEXT_NODE){if(V=v.endContainer,Z=v.endContainer.nodeType!==Node.TEXT_NODE?v.endOffset===v.endContainer.childNodes.length:!1,ne=v.endOffset,m=v.endContainer,ne<m.childNodes.length)for(m=m.childNodes.item(ne),ne=0;m.firstChild;)m=m.firstChild;else for(;m.lastChild;)m=m.lastChild,ne=m.nodeType===Node.TEXT_NODE?m.textContent.length:m.childNodes.length;if(m===V&&(V=null),v.setEnd(m,ne),ne=v.endContainer,v.endOffset!==0&&ne.nodeType===Node.TEXT_NODE&&(m=ne,v.endOffset!==m.length&&(R.push(m.splitText(v.endOffset)),R.push(m))),ne=v.startContainer,v.startOffset!==0&&ne.nodeType===Node.TEXT_NODE&&(m=ne,v.startOffset!==m.length&&(ne=m.splitText(v.startOffset),R.push(m),R.push(ne),v.setStart(ne,0))),V!==null){for(ne=v.endContainer;ne.parentNode&&ne.parentNode!==V;)ne=ne.parentNode;Z=Z?V.childNodes.length:w(ne,V),v.setEnd(V,Z)}}return R},this.containsRange=E,this.rangesIntersect=N,this.rangeIntersection=function(v,m){var R;return N(v,m)&&(R=v.cloneRange(),v.compareBoundaryPoints(Range.START_TO_START,m)===-1&&R.setStart(m.startContainer,m.startOffset),v.compareBoundaryPoints(Range.END_TO_END,m)===1&&R.setEnd(m.endContainer,m.endOffset)),R},this.getNodesInRange=function(v,m,R){var V=[],Z=v.commonAncestorContainer,Z=Z.nodeType===Node.TEXT_NODE?Z.parentNode:Z;R=v.startContainer.ownerDocument.createTreeWalker(Z,R,m,!1);var ne,ee;if(v.endContainer.childNodes[v.endOffset-1]?(ne=v.endContainer.childNodes[v.endOffset-1],ee=Node.DOCUMENT_POSITION_PRECEDING|Node.DOCUMENT_POSITION_CONTAINED_BY):(ne=v.endContainer,ee=Node.DOCUMENT_POSITION_PRECEDING),v.startContainer.childNodes[v.startOffset])v=v.startContainer.childNodes[v.startOffset],R.currentNode=v;else{var z=v.startContainer;v.startOffset===(z.nodeType===Node.TEXT_NODE?z.length:z.childNodes.length)?(v=v.startContainer,R.currentNode=v,R.lastChild(),v=R.nextNode()):(v=v.startContainer,R.currentNode=v)}if(v){if(v=R.currentNode,v!==Z)for(v=v.parentNode;v&&v!==Z;)m(v)===NodeFilter.FILTER_REJECT&&(R.currentNode=v),v=v.parentNode;switch(v=R.currentNode,m(v)){case NodeFilter.FILTER_REJECT:for(v=R.nextSibling();!v&&R.parentNode();)v=R.nextSibling();break;case NodeFilter.FILTER_SKIP:v=R.nextNode()}for(;v&&(m=ne.compareDocumentPosition(v),!(m!==0&&!(m&ee)));)V.push(v),v=R.nextNode()}return V},this.normalizeTextNodes=function(v){v&&v.nextSibling&&(v=O(v,v.nextSibling)),v&&v.previousSibling&&O(v.previousSibling,v)},this.rangeContainsNode=function(v,m){var R=m.ownerDocument.createRange(),V=m.ownerDocument.createRange(),Z;return R.setStart(v.startContainer,v.startOffset),R.setEnd(v.endContainer,v.endOffset),V.selectNodeContents(m),Z=E(R,V),R.detach(),V.detach(),Z},this.mergeIntoParent=x,this.removeUnwantedNodes=I,this.removeAllChildNodes=function(v){for(;v.firstChild;)v.removeChild(v.firstChild)},this.getElementsByTagNameNS=function(v,m,R){var V=[];for(v=v.getElementsByTagNameNS(m,R),V.length=R=v.length,m=0;m<R;m+=1)V[m]=v.item(m);return V},this.getElementsByTagName=function(v,m){var R=[],V,Z,ne;for(V=v.getElementsByTagName(m),R.length=ne=V.length,Z=0;Z<ne;Z+=1)R[Z]=V.item(Z);return R},this.containsNode=function(v,m){return v===m||v.contains(m)},this.comparePoints=function(v,m,R,V){if(v===R)return V-m;var Z=v.compareDocumentPosition(R);return Z===2?Z=-1:Z===4?Z=1:Z===10?(m=w(v,R),Z=m<V?1:-1):(V=w(R,v),Z=V<m?-1:1),Z},this.adaptRangeDifferenceToZoomLevel=S,this.translateRect=function(v,m,R){return{top:S(v.top-m.top,R),left:S(v.left-m.left,R),bottom:S(v.bottom-m.top,R),right:S(v.right-m.left,R),width:S(v.width,R),height:S(v.height,R)}},this.getBoundingClientRect=function(v){var m=v.ownerDocument,R=A(),V=m.body;if((R.unscaledRangeClientRects===!1||R.rangeBCRIgnoresElementBCR)&&v.nodeType===Node.ELEMENT_NODE)return v=v.getBoundingClientRect(),R.elementBCRIgnoresBodyScroll?{left:v.left+V.scrollLeft,right:v.right+V.scrollLeft,top:v.top+V.scrollTop,bottom:v.bottom+V.scrollTop,width:v.width,height:v.height}:v;var Z;return y?Z=y:y=Z=m.createRange(),R=Z,R.selectNode(v),R.getBoundingClientRect()},this.mapKeyValObjOntoNode=function(v,m,R){Object.keys(m).forEach(function(V){var ne=V.split(":"),Z=ne[1],ne=R(ne[0]),ee=m[V];ne?(Z=v.getElementsByTagNameNS(ne,Z)[0],Z||(Z=v.ownerDocument.createElementNS(ne,V),v.appendChild(Z)),Z.textContent=ee):runtime.log("Key ignored: "+V)})},this.removeKeyElementsFromNode=function(v,m,R){m.forEach(function(V){var Z=V.split(":"),ne=Z[1];(Z=R(Z[0]))?(ne=v.getElementsByTagNameNS(Z,ne)[0])?ne.parentNode.removeChild(ne):runtime.log("Element for "+V+" not found."):runtime.log("Property Name ignored: "+V)})},this.getKeyValRepresentationOfNode=function(v,m){for(var R={},V=v.firstElementChild,Z;V;)(Z=m(V.namespaceURI))&&(R[Z+":"+V.localName]=V.textContent),V=V.nextElementSibling;return R},this.mapObjOntoNode=u,this.cloneEvent=function(v){var m=Object.create(null);return Object.keys(v.constructor.prototype).forEach(function(R){m[R]=v[R]}),m.prototype=v.constructor.prototype,m},this.getDirectChild=j,function(v){var m,R;R=runtime.getWindow(),R!==null&&(m=R.navigator.appVersion.toLowerCase(),R=m.indexOf("chrome")===-1&&(m.indexOf("applewebkit")!==-1||m.indexOf("safari")!==-1),m=m.indexOf("msie")!==-1||m.indexOf("trident")!==-1,R||m)&&(v.containsNode=_)}(this)},core.DomUtils=new core.DomUtilsImpl}(),core.Cursor=function(A,j){function M(u){u.parentNode&&(x.push(u.previousSibling),x.push(u.nextSibling),u.parentNode.removeChild(u))}function w(u,y,v){if(y.nodeType===Node.TEXT_NODE){runtime.assert(!!y,"putCursorIntoTextNode: invalid container");var m=y.parentNode;runtime.assert(!!m,"putCursorIntoTextNode: container without parent"),runtime.assert(0<=v&&v<=y.length,"putCursorIntoTextNode: offset is out of bounds"),v===0?m.insertBefore(u,y):(v!==y.length&&y.splitText(v),m.insertBefore(u,y.nextSibling))}else y.nodeType===Node.ELEMENT_NODE&&y.insertBefore(u,y.childNodes.item(v));x.push(u.previousSibling),x.push(u.nextSibling)}var E=A.createElementNS("urn:webodf:names:cursor","cursor"),N=A.createElementNS("urn:webodf:names:cursor","anchor"),O,x=[],I=A.createRange(),_,S=core.DomUtils;this.getNode=function(){return E},this.getAnchorNode=function(){return N.parentNode?N:E},this.getSelectedRange=function(){return _?(I.setStartBefore(E),I.collapse(!0)):(I.setStartAfter(O?N:E),I.setEndBefore(O?E:N)),I},this.setSelectedRange=function(u,y){I&&I!==u&&I.detach(),I=u,O=y!==!1,(_=u.collapsed)?(M(N),M(E),w(E,u.startContainer,u.startOffset)):(M(N),M(E),w(O?E:N,u.endContainer,u.endOffset),w(O?N:E,u.startContainer,u.startOffset)),x.forEach(S.normalizeTextNodes),x.length=0},this.hasForwardSelection=function(){return O},this.remove=function(){M(E),x.forEach(S.normalizeTextNodes),x.length=0},E.setAttributeNS("urn:webodf:names:cursor","memberId",j),N.setAttributeNS("urn:webodf:names:cursor","memberId",j)},core.Destroyable=function(){},core.Destroyable.prototype.destroy=function(A){},core.EventSource=function(){},core.EventSource.prototype.subscribe=function(A,j){},core.EventSource.prototype.unsubscribe=function(A,j){},core.EventNotifier=function(A){function j(w){runtime.assert(!M.hasOwnProperty(w),'Duplicated event ids: "'+w+'" registered more than once.'),M[w]=[]}var M={};this.emit=function(w,E){var N,O;for(runtime.assert(M.hasOwnProperty(w),'unknown event fired "'+w+'"'),O=M[w],N=0;N<O.length;N+=1)O[N](E)},this.subscribe=function(w,E){runtime.assert(M.hasOwnProperty(w),'tried to subscribe to unknown event "'+w+'"'),M[w].push(E)},this.unsubscribe=function(w,E){var N;runtime.assert(M.hasOwnProperty(w),'tried to unsubscribe from unknown event "'+w+'"'),N=M[w].indexOf(E),runtime.assert(N!==-1,'tried to unsubscribe unknown callback from event "'+w+'"'),N!==-1&&M[w].splice(N,1)},this.register=j,A&&A.forEach(j)},core.ScheduledTask=function(A,j,M){function w(){O&&(M(N),O=!1)}function E(){w(),A.apply(void 0,x),x=null}var N,O=!1,x=[],I=!1;this.trigger=function(){runtime.assert(I===!1,"Can't trigger destroyed ScheduledTask instance"),x=Array.prototype.slice.call(arguments),O||(O=!0,N=j(E))},this.triggerImmediate=function(){runtime.assert(I===!1,"Can't trigger destroyed ScheduledTask instance"),x=Array.prototype.slice.call(arguments),E()},this.processRequests=function(){O&&E()},this.cancel=w,this.restart=function(){runtime.assert(I===!1,"Can't trigger destroyed ScheduledTask instance"),w(),O=!0,N=j(E)},this.destroy=function(_){w(),I=!0,_()}},function(){var A;core.Task={},core.Task.SUPPRESS_MANUAL_PROCESSING=!1,core.Task.processTasks=function(){core.Task.SUPPRESS_MANUAL_PROCESSING||A.performRedraw()},core.Task.createRedrawTask=function(j){return new core.ScheduledTask(j,A.requestRedrawTask,A.cancelRedrawTask)},core.Task.createTimeoutTask=function(j,M){return new core.ScheduledTask(j,function(w){return runtime.setTimeout(w,M)},runtime.clearTimeout)},A=new function(){var j={};this.requestRedrawTask=function(M){var w=runtime.requestAnimationFrame(function(){M(),delete j[w]});return j[w]=M,w},this.performRedraw=function(){Object.keys(j).forEach(function(M){j[M](),runtime.cancelAnimationFrame(parseInt(M,10))}),j={}},this.cancelRedrawTask=function(M){runtime.cancelAnimationFrame(M),delete j[M]}}}(),core.EventSubscriptions=function(){function A(O,x,I){O.subscribe(x,I),M.push({eventSource:O,eventid:x,callback:I})}function j(){var O=[];M.forEach(function(x){x.eventSource.unsubscribe(x.eventid,x.callback)}),M.length=0,Object.keys(E).forEach(function(x){E[x].forEach(function(I){O.push(I.task.destroy)}),delete E[x]}),core.Async.destroyAll(O,function(){}),w=new core.EventNotifier}var M=[],w=new core.EventNotifier,E={},N=0;this.addSubscription=A,this.addFrameSubscription=function(O,x,I){var _,S,u,y;for(E.hasOwnProperty(x)||(E[x]=[]),u=E[x],y=0;y<u.length;y+=1)if(u[y].eventSource===O){_=u[y];break}_||(S="s"+N,N+=1,w.register(S),_={frameEventId:S,eventSource:O,task:core.Task.createRedrawTask(function(){w.emit(S,void 0)})},u.push(_),A(O,x,_.task.trigger)),w.subscribe(_.frameEventId,I)},this.unsubscribeAll=j,this.destroy=function(O){j(),O()}},core.LazyProperty=function(A){var j,M=!1;this.value=function(){return M||(j=A(),M=!0),j},this.reset=function(){M=!1}},core.LoopWatchDog=function(A,j){var M=Date.now(),w=0;this.check=function(){var E;if(A&&(E=Date.now(),E-M>A))throw runtime.log("alert","watchdog timeout"),"timeout!";if(0<j&&(w+=1,w>j))throw runtime.log("alert","watchdog loop overflow"),"loop overflow"}},core.NodeFilterChain=function(A){var j=NodeFilter.FILTER_REJECT,M=NodeFilter.FILTER_ACCEPT;this.acceptNode=function(w){var E;for(E=0;E<A.length;E+=1)if(A[E].acceptNode(w)===j)return j;return M}},core.PositionIterator=function(A,j,M,w){function E(){this.acceptNode=function(Z){return!Z||Z.nodeType===v&&Z.length===0?V:R}}function N(Z){this.acceptNode=function(ne){return!ne||ne.nodeType===v&&ne.length===0?V:Z.acceptNode(ne)}}function O(){var Z=S.currentNode,ne=Z.nodeType;u=ne===v?Z.length-1:ne===m?1:0}function x(){if(S.previousSibling()===null){if(!S.parentNode()||S.currentNode===A)return S.firstChild(),!1;u=0}else O();return!0}function I(){var Z=S.currentNode,ne;if(ne=y(Z),Z!==A)for(Z=Z.parentNode;Z&&Z!==A;)y(Z)===V&&(S.currentNode=Z,ne=V),Z=Z.parentNode;return ne===V?(u=S.currentNode.nodeType===v?Z.length:1,Z=_.nextPosition()):Z=ne===R?!0:_.nextPosition(),Z&&runtime.assert(y(S.currentNode)===R,"moveToAcceptedNode did not result in walker being on an accepted node"),Z}var _=this,S,u,y,v=Node.TEXT_NODE,m=Node.ELEMENT_NODE,R=NodeFilter.FILTER_ACCEPT,V=NodeFilter.FILTER_REJECT;this.nextPosition=function(){var Z=S.currentNode,ne=Z.nodeType;if(Z===A)return!1;if(u===0&&ne===m)S.firstChild()===null&&(u=1);else if(ne===v&&u+1<Z.length)u+=1;else if(S.nextSibling()!==null)u=0;else if(S.parentNode())u=1;else return!1;return!0},this.previousPosition=function(){var Z=!0,ne=S.currentNode;return u===0?Z=x():ne.nodeType===v?--u:S.lastChild()!==null?O():ne===A?Z=!1:u=0,Z},this.previousNode=x,this.container=function(){var Z=S.currentNode,ne=Z.nodeType;return u===0&&ne!==v&&(Z=Z.parentNode),Z},this.rightNode=function(){var Z=S.currentNode,ne=Z.nodeType;if(ne===v&&u===Z.length)for(Z=Z.nextSibling;Z&&y(Z)!==R;)Z=Z.nextSibling;else ne===m&&u===1&&(Z=null);return Z},this.leftNode=function(){var Z=S.currentNode;if(u===0)for(Z=Z.previousSibling;Z&&y(Z)!==R;)Z=Z.previousSibling;else if(Z.nodeType===m)for(Z=Z.lastChild;Z&&y(Z)!==R;)Z=Z.previousSibling;return Z},this.getCurrentNode=function(){return S.currentNode},this.unfilteredDomOffset=function(){if(S.currentNode.nodeType===v)return u;for(var Z=0,ne=S.currentNode,ne=u===1?ne.lastChild:ne.previousSibling;ne;)Z+=1,ne=ne.previousSibling;return Z},this.getPreviousSibling=function(){var Z=S.currentNode,ne=S.previousSibling();return S.currentNode=Z,ne},this.getNextSibling=function(){var Z=S.currentNode,ne=S.nextSibling();return S.currentNode=Z,ne},this.setPositionBeforeElement=function(Z){return runtime.assert(!!Z,"setPositionBeforeElement called without element"),S.currentNode=Z,u=0,I()},this.setUnfilteredPosition=function(Z,ne){return runtime.assert(!!Z,"PositionIterator.setUnfilteredPosition called without container"),S.currentNode=Z,Z.nodeType===v?(u=ne,runtime.assert(ne<=Z.length,"Error in setPosition: "+ne+" > "+Z.length),runtime.assert(0<=ne,"Error in setPosition: "+ne+" < 0"),ne===Z.length&&(S.nextSibling()?u=0:S.parentNode()?u=1:runtime.assert(!1,"Error in setUnfilteredPosition: position not valid."))):ne<Z.childNodes.length?(S.currentNode=Z.childNodes.item(ne),u=0):u=1,I()},this.moveToEnd=function(){S.currentNode=A,u=1},this.moveToEndOfNode=function(Z){Z.nodeType===v?_.setUnfilteredPosition(Z,Z.length):(S.currentNode=Z,u=1)},this.isBeforeNode=function(){return u===0},this.getNodeFilter=function(){return y},y=(M?new N(M):new E).acceptNode,y.acceptNode=y,j=j||NodeFilter.SHOW_ALL,runtime.assert(A.nodeType!==Node.TEXT_NODE,"Internet Explorer doesn't allow tree walker roots to be text nodes"),S=A.ownerDocument.createTreeWalker(A,j,y,w),u=0,S.firstChild()===null&&(u=1)},core.PositionFilter=function(){},core.PositionFilter.FilterResult={FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3},core.PositionFilter.prototype.acceptPosition=function(A){},core.PositionFilterChain=function(){var A=[],j=core.PositionFilter.FilterResult.FILTER_ACCEPT,M=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(w){var E;for(E=0;E<A.length;E+=1)if(A[E].acceptPosition(w)===M)return M;return j},this.addFilter=function(w){A.push(w)}},core.StepDirection={PREVIOUS:1,NEXT:2},core.StepIterator=function(A,j){function M(){u=null,v=y=void 0}function w(){return v===void 0&&(v=A.acceptPosition(j)===_),v}function E(m,R){return M(),j.setUnfilteredPosition(m,R)}function N(){return u||(u=j.container()),u}function O(){return y===void 0&&(y=j.unfilteredDomOffset()),y}function x(){for(M();j.nextPosition();)if(M(),w())return!0;return!1}function I(){for(M();j.previousPosition();)if(M(),w())return!0;return!1}var _=core.PositionFilter.FilterResult.FILTER_ACCEPT,S=core.StepDirection.NEXT,u,y,v;this.isStep=w,this.setPosition=E,this.container=N,this.offset=O,this.nextStep=x,this.previousStep=I,this.advanceStep=function(m){return m===S?x():I()},this.roundToClosestStep=function(){var m,R,V=w();return V||(m=N(),R=O(),V=I(),V||(E(m,R),V=x())),V},this.roundToPreviousStep=function(){var m=w();return m||(m=I()),m},this.roundToNextStep=function(){var m=w();return m||(m=x()),m},this.leftNode=function(){return j.leftNode()},this.snapshot=function(){return new core.StepIterator.StepSnapshot(N(),O())},this.restore=function(m){E(m.container,m.offset)}},core.StepIterator.StepSnapshot=function(A,j){this.container=A,this.offset=j},core.Utils=function(){function A(j,M){if(M&&Array.isArray(M)){if(j=j||[],!Array.isArray(j))throw"Destination is not an array.";j=j.concat(M.map(function(w){return A(null,w)}))}else if(M&&typeof M=="object"){if(j=j||{},typeof j!="object")throw"Destination is not an object.";Object.keys(M).forEach(function(w){j[w]=A(j[w],M[w])})}else j=M;return j}this.hashString=function(j){var M=0,w,E;for(w=0,E=j.length;w<E;w+=1)M=(M<<5)-M+j.charCodeAt(w),M|=0;return M},this.mergeObjects=function(j,M){return Object.keys(M).forEach(function(w){j[w]=A(j[w],M[w])}),j}},core.Zip=function(A,j){function M(_,S){var u=x.file(_);u?S(null,u.asUint8Array()):S(_+" not found.",null)}function w(_,S){M(_,function(u,y){if(u||y===null)return S(u,null);var v=runtime.byteArrayToString(y,"utf8");S(null,v)})}function E(_,S){try{_(x.generate({type:"uint8array",compression:"STORE"}))}catch(u){S(u.message)}}function N(_,S){E(function(u){runtime.writeFile(_,u,S)},S)}var O=this,x,I=new core.Base64;this.load=M,this.save=function(_,S,u,y){x.file(_,S,{date:y,compression:u?"DEFLATE":"STORE"})},this.remove=function(_){var S=x.file(_)!==null;return x.remove(_),S},this.write=function(_){N(A,_)},this.writeAs=N,this.createByteArray=E,this.loadContentXmlAsFragments=function(_,S){w(_,function(u,y){if(u)return S.rootElementReady(u);S.rootElementReady(null,y,!0)})},this.loadAsString=w,this.loadAsDOM=function(_,S){w(_,function(u,y){if(u||y===null)S(u,null);else{var v=new DOMParser().parseFromString(y,"text/xml");S(null,v)}})},this.loadAsDataURL=function(_,S,u){M(_,function(y,v){if(y||!v)return u(y,null);var m=0,R;for(S||(S=v[1]===80&&v[2]===78&&v[3]===71?"image/png":v[0]===255&&v[1]===216&&v[2]===255?"image/jpeg":v[0]===71&&v[1]===73&&v[2]===70?"image/gif":""),R="data:"+S+";base64,";m<v.length;)R+=I.convertUTF8ArrayToBase64(v.subarray(m,Math.min(m+45e3,v.length))),m+=45e3;u(null,R)})},this.getEntries=function(){return Object.keys(x.files).map(function(_){return{filename:_,date:x.files[_].date}})},x=new externs.JSZip,j!==null&&runtime.readFile(A,"binary",function(_,S){if(typeof S=="string"&&(_="file was read as a string. Should be Uint8Array."),_||!S||S.length===0)j("File '"+A+"' cannot be read. Err: "+(_||"[none]"),O);else try{x.load(S,{checkCRC32:!1}),j(null,O)}catch(u){j(u.message,O)}})},core.SimpleClientRect=null,gui.CommonConstraints={EDIT:{ANNOTATIONS:{ONLY_DELETE_OWN:"onlyDeleteOwn"},REVIEW_MODE:"reviewMode"}},gui.SessionConstraints=function(){function A(w){j.hasOwnProperty(w)||(j[w]=!1,M.register(w))}var j={},M=new core.EventNotifier;this.registerConstraint=A,this.subscribe=function(w,E){A(w),M.subscribe(w,E)},this.unsubscribe=function(w,E){M.unsubscribe(w,E)},this.setState=function(w,E){runtime.assert(j.hasOwnProperty(w)===!0,"No such constraint"),j[w]!==E&&(j[w]=E,M.emit(w,E))},this.getState=function(w){return runtime.assert(j.hasOwnProperty(w)===!0,"No such constraint"),j[w]}},gui.BlacklistNamespaceNodeFilter=function(A){var j={},M=NodeFilter.FILTER_REJECT,w=NodeFilter.FILTER_ACCEPT;this.acceptNode=function(E){return!E||j.hasOwnProperty(E.namespaceURI)?M:w},function(){A.forEach(function(E){j[E]=!0})}()},odf.Namespaces={namespaceMap:{config:"urn:oasis:names:tc:opendocument:xmlns:config:1.0",db:"urn:oasis:names:tc:opendocument:xmlns:database:1.0",dc:"http://purl.org/dc/elements/1.1/",dr3d:"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",draw:"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",chart:"urn:oasis:names:tc:opendocument:xmlns:chart:1.0",fo:"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",form:"urn:oasis:names:tc:opendocument:xmlns:form:1.0",math:"http://www.w3.org/1998/Math/MathML",meta:"urn:oasis:names:tc:opendocument:xmlns:meta:1.0",number:"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",office:"urn:oasis:names:tc:opendocument:xmlns:office:1.0",presentation:"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",style:"urn:oasis:names:tc:opendocument:xmlns:style:1.0",svg:"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",table:"urn:oasis:names:tc:opendocument:xmlns:table:1.0",text:"urn:oasis:names:tc:opendocument:xmlns:text:1.0",xforms:"http://www.w3.org/2002/xforms",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},prefixMap:{},configns:"urn:oasis:names:tc:opendocument:xmlns:config:1.0",dbns:"urn:oasis:names:tc:opendocument:xmlns:database:1.0",dcns:"http://purl.org/dc/elements/1.1/",dr3dns:"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",drawns:"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",chartns:"urn:oasis:names:tc:opendocument:xmlns:chart:1.0",fons:"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",formns:"urn:oasis:names:tc:opendocument:xmlns:form:1.0",mathns:"http://www.w3.org/1998/Math/MathML",metans:"urn:oasis:names:tc:opendocument:xmlns:meta:1.0",numberns:"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",officens:"urn:oasis:names:tc:opendocument:xmlns:office:1.0",presentationns:"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",stylens:"urn:oasis:names:tc:opendocument:xmlns:style:1.0",svgns:"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",tablens:"urn:oasis:names:tc:opendocument:xmlns:table:1.0",textns:"urn:oasis:names:tc:opendocument:xmlns:text:1.0",xformsns:"http://www.w3.org/2002/xforms",xlinkns:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/XML/1998/namespace"},function(){var A=odf.Namespaces.namespaceMap,j=odf.Namespaces.prefixMap,M;for(M in A)A.hasOwnProperty(M)&&(j[A[M]]=M)}(),odf.Namespaces.forEachPrefix=function(A){var j=odf.Namespaces.namespaceMap,M;for(M in j)j.hasOwnProperty(M)&&A(M,j[M])},odf.Namespaces.lookupNamespaceURI=function(A){var j=null;return odf.Namespaces.namespaceMap.hasOwnProperty(A)&&(j=odf.Namespaces.namespaceMap[A]),j},odf.Namespaces.lookupPrefix=function(A){var j=odf.Namespaces.prefixMap;return j.hasOwnProperty(A)?j[A]:null},odf.Namespaces.lookupNamespaceURI.lookupNamespaceURI=odf.Namespaces.lookupNamespaceURI,function(){odf.OdfSchemaImpl=function(){var A=[["config:config-item","uncategorized"],["form:item","object"],["form:option","uncategorized"],["math:math","field"],["meta:user-defined","uncategorized"],["number:currency-symbol","uncategorized"],["number:embedded-text","uncategorized"],["number:text","uncategorized"],["presentation:date-time-decl","uncategorized"],["presentation:footer-decl","uncategorized"],["presentation:header-decl","uncategorized"],["svg:desc","text"],["svg:title","text"],["table:desc","uncategorized"],["table:title","uncategorized"],["text:a","text"],["text:author-initials","field"],["text:author-name","field"],["text:bibliography-mark","field"],["text:bookmark-ref","field"],["text:chapter","field"],["text:character-count","field"],["text:conditional-text","field"],["text:creation-date","field"],["text:creation-time","field"],["text:creator","field"],["text:database-display","field"],["text:database-name","field"],["text:database-row-number","field"],["text:date","field"],["text:dde-connection","field"],["text:description","field"],["text:editing-cycles","field"],["text:editing-duration","field"],["text:execute-macro","uncategorized"],["text:expression","uncategorized"],["text:file-name","field"],["text:h","text"],["text:hidden-paragraph","text"],["text:hidden-text","text"],["text:image-count","field"],["text:index-entry-span","uncategorized"],["text:index-title-template","uncategorized"],["text:initial-creator","field"],["text:keywords","field"],["text:linenumbering-separator","style"],["text:measure","uncategorized"],["text:meta","uncategorized"],["text:meta-field","uncategorized"],["text:modification-date","field"],["text:modification-time","field"],["text:note-citation","field"],["text:note-continuation-notice-backward","style"],["text:note-continuation-notice-forward","style"],["text:note-ref","field"],["text:object-count","field"],["text:p","text"],["text:page-continuation","uncategorized"],["text:page-count","field"],["text:page-number","field"],["text:page-variable-get","field"],["text:page-variable-set","field"],["text:paragraph-count","field"],["text:placeholder","field"],["text:print-date","field"],["text:print-time","field"],["text:printed-by","field"],["text:reference-ref","field"],["text:ruby-base","text"],["text:ruby-text","text"],["text:script","text"],["text:sender-city","field"],["text:sender-company","field"],["text:sender-country","field"],["text:sender-email","field"],["text:sender-fax","field"],["text:sender-firstname","field"],["text:sender-initials","field"],["text:sender-lastname","field"],["text:sender-phone-private","field"],["text:sender-phone-work","field"],["text:sender-position","field"],["text:sender-postal-code","field"],["text:sender-state-or-province","field"],["text:sender-street","field"],["text:sender-title","field"],["text:sequence","uncategorized"],["text:sequence-ref","uncategorized"],["text:sheet-name","uncategorized"],["text:span","text"],["text:subject","field"],["text:table-count","field"],["text:table-formula","deprecated"],["text:template-name","uncategorized"],["text:text-input","field"],["text:time","field"],["text:title","field"],["text:user-defined","field"],["text:user-field-get","field"],["text:user-field-input","field"],["text:variable-get","field"],["text:variable-input","field"],["text:variable-set","field"],["text:word-count","field"],["xforms:model","uncategorized"]],j={};this.isTextContainer=function(M,w){return j[M+":"+w]==="text"},this.isField=function(M,w){return j[M+":"+w]==="field"},this.getFields=function(){return A.filter(function(M){return M[1]==="field"}).map(function(M){return M[0]})},function(){A.forEach(function(M){var w=M[1],E=M[0].split(":");M=E[0];var E=E[1],N=odf.Namespaces.lookupNamespaceURI(M);N?j[N+":"+E]=w:runtime.log("DEBUG: OdfSchema - unknown prefix '"+M+"'")})}()},odf.OdfSchema=new odf.OdfSchemaImpl}(),odf.OdfUtilsImpl=function(){function A(le){return(le&&le.localName)==="image"&&le.namespaceURI===he}function j(le){return le!==null&&le.nodeType===Node.ELEMENT_NODE&&le.localName==="frame"&&le.namespaceURI===he&&le.getAttributeNS(ie,"anchor-type")==="as-char"}function M(le){var me;return(me=(le&&le.localName)==="annotation"&&le.namespaceURI===odf.Namespaces.officens)||(me=(le&&le.localName)==="div"&&le.className==="annotationWrapper"),me}function w(le){return(le&&le.localName)==="a"&&le.namespaceURI===ie}function E(le){var me=le&&le.localName;return(me==="p"||me==="h")&&le.namespaceURI===ie}function N(le,me){for(le&&me!==void 0&&!E(le)&&le.childNodes.item(me)&&(le=le.childNodes.item(me));le&&!E(le);)le=le.parentNode;return le}function O(le,me){for(;le&&le!==me;){if(le.namespaceURI===odf.Namespaces.officens&&le.localName==="annotation")return le;le=le.parentNode}return null}function x(le){return/^[ \t\r\n]+$/.test(le)}function I(le){if(le===null||le.nodeType!==Node.ELEMENT_NODE)return!1;var me=le.localName;return rt.isTextContainer(le.namespaceURI,me)||me==="span"&&le.className==="webodf-annotationHighlight"}function _(le){return le===null||le.nodeType!==Node.ELEMENT_NODE?!1:rt.isField(le.namespaceURI,le.localName)}function S(le){var me=le&&le.localName,De=!1;return me&&(le=le.namespaceURI,le===ie&&(De=me==="s"||me==="tab"||me==="line-break")),De}function u(le){return S(le)||_(le)||j(le)||M(le)}function y(le){var me=le&&le.localName,De=!1;return me&&(le=le.namespaceURI,le===ie&&(De=me==="s")),De}function v(le){return ze.indexOf(le.namespaceURI)!==-1}function m(le){if(S(le)||_(le))return!1;if(I(le.parentNode)&&le.nodeType===Node.TEXT_NODE)return le.textContent.length===0;for(le=le.firstChild;le;){if(v(le)||!m(le))return!1;le=le.nextSibling}return!0}function R(le){for(;le.firstChild!==null&&I(le);)le=le.firstChild;return le}function V(le){for(;le.lastChild!==null&&I(le);)le=le.lastChild;return le}function Z(le){for(;!E(le)&&le.previousSibling===null;)le=le.parentNode;return E(le)?null:V(le.previousSibling)}function ne(le){for(;!E(le)&&le.nextSibling===null;)le=le.parentNode;return E(le)?null:R(le.nextSibling)}function ee(le){for(var me=!1;le;)if(le.nodeType===Node.TEXT_NODE)if(le.length===0)le=Z(le);else return!x(le.data.substr(le.length-1,1));else u(le)?(me=y(le)===!1,le=null):le=Z(le);return me}function z(le){var me=!1,De;for(le=le&&R(le);le;){if(De=le.nodeType===Node.TEXT_NODE?le.length:0,0<De&&!x(le.data)){me=!0;break}if(u(le)){me=!0;break}le=ne(le)}return me}function P(le,me){return x(le.data.substr(me))?!z(ne(le)):!1}function Y(le,me){var De=le.data,Me;return!x(De[me])||u(le.parentNode)?!1:(0<me?x(De[me-1])||(Me=!0):ee(Z(le))&&(Me=!0),Me===!0?!P(le,me):!1)}function $(le){return(le=/(-?[0-9]*[0-9][0-9]*(\.[0-9]*)?|0+\.[0-9]*[1-9][0-9]*|\.[0-9]*[1-9][0-9]*)((cm)|(mm)|(in)|(pt)|(pc)|(px)|(%))/.exec(le))?{value:parseFloat(le[1]),unit:le[3]}:null}function J(le){return(le=$(le))&&(0>le.value||le.unit==="%")?null:le}function te(le){return(le=$(le))&&le.unit!=="%"?null:le}function q(le){switch(le.namespaceURI){case odf.Namespaces.drawns:case odf.Namespaces.svgns:case odf.Namespaces.dr3dns:return!1;case odf.Namespaces.textns:switch(le.localName){case"note-body":case"ruby-text":return!1}break;case odf.Namespaces.officens:switch(le.localName){case"annotation":case"binary-data":case"event-listeners":return!1}break;default:switch(le.localName){case"cursor":case"editinfo":return!1}}return!0}function K(le){return!!(N(le)&&(!x(le.textContent)||Y(le,0)))}function U(le,me){for(;0<me.length&&!Ne.rangeContainsNode(le,me[0]);)me.shift();for(;0<me.length&&!Ne.rangeContainsNode(le,me[me.length-1]);)me.pop()}function F(le,me,De){var Me;return Me=Ne.getNodesInRange(le,function(Re){var we=NodeFilter.FILTER_REJECT;return S(Re.parentNode)||_(Re.parentNode)||M(Re)?we=NodeFilter.FILTER_REJECT:Re.nodeType===Node.TEXT_NODE?(De||K(Re))&&(we=NodeFilter.FILTER_ACCEPT):u(Re)?we=NodeFilter.FILTER_ACCEPT:(q(Re)||I(Re))&&(we=NodeFilter.FILTER_SKIP),we},NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),me||U(le,Me),Me}function re(le,me,De){for(;le;){if(De(le)){me[0]!==le&&me.unshift(le);break}if(M(le))break;le=le.parentNode}}function W(le,me){var De=le;if(me<De.childNodes.length-1)De=De.childNodes[me+1];else{for(;!De.nextSibling;)De=De.parentNode;De=De.nextSibling}for(;De.firstChild;)De=De.firstChild;return De}var ie=odf.Namespaces.textns,he=odf.Namespaces.drawns,ve=odf.Namespaces.xlinkns,Ne=core.DomUtils,ze=[odf.Namespaces.dbns,odf.Namespaces.dcns,odf.Namespaces.dr3dns,odf.Namespaces.drawns,odf.Namespaces.chartns,odf.Namespaces.formns,odf.Namespaces.numberns,odf.Namespaces.officens,odf.Namespaces.presentationns,odf.Namespaces.stylens,odf.Namespaces.svgns,odf.Namespaces.tablens,odf.Namespaces.textns],rt=odf.OdfSchema;this.isImage=A,this.isCharacterFrame=j,this.isInlineRoot=M,this.isTextSpan=function(le){return(le&&le.localName)==="span"&&le.namespaceURI===ie},this.isHyperlink=w,this.getHyperlinkTarget=function(le){return le.getAttributeNS(ve,"href")||""},this.isParagraph=E,this.getParagraphElement=N,this.getParentAnnotation=O,this.isWithinAnnotation=function(le,me){return!!O(le,me)},this.getAnnotationCreator=function(le){return le.getElementsByTagNameNS(odf.Namespaces.dcns,"creator")[0].textContent},this.isListItem=function(le){return(le&&le.localName)==="list-item"&&le.namespaceURI===ie},this.isLineBreak=function(le){return(le&&le.localName)==="line-break"&&le.namespaceURI===ie},this.isODFWhitespace=x,this.isGroupingElement=I,this.isFieldElement=_,this.isCharacterElement=S,this.isAnchoredAsCharacterElement=u,this.isSpaceElement=y,this.isODFNode=v,this.hasNoODFContent=m,this.firstChild=R,this.lastChild=V,this.previousNode=Z,this.nextNode=ne,this.scanLeftForNonSpace=ee,this.lookLeftForCharacter=function(le){var me,De=me=0;return le.nodeType===Node.TEXT_NODE&&(De=le.length),0<De?(me=le.data,me=x(me.substr(De-1,1))?De===1?ee(Z(le))?2:0:x(me.substr(De-2,1))?0:2:1):u(le)&&(me=1),me},this.lookRightForCharacter=function(le){var me=!1,De=0;return le&&le.nodeType===Node.TEXT_NODE&&(De=le.length),0<De?me=!x(le.data.substr(0,1)):u(le)&&(me=!0),me},this.scanLeftForAnyCharacter=function(le){var me=!1,De;for(le=le&&V(le);le;){if(De=le.nodeType===Node.TEXT_NODE?le.length:0,0<De&&!x(le.data)){me=!0;break}if(u(le)){me=!0;break}le=Z(le)}return me},this.scanRightForAnyCharacter=z,this.isTrailingWhitespace=P,this.isSignificantWhitespace=Y,this.isDowngradableSpaceElement=function(le){return y(le)?ee(Z(le))&&z(ne(le)):!1},this.parseLength=$,this.parseNonNegativeLength=J,this.parseFoFontSize=function(le){var me;return me=(me=$(le))&&(0>=me.value||me.unit==="%")?null:me,me||te(le)},this.parseFoLineHeight=function(le){return J(le)||te(le)},this.isTextContentContainingNode=q,this.getTextNodes=function(le,me){var De;return De=Ne.getNodesInRange(le,function(Me){var Re=NodeFilter.FILTER_REJECT;return Me.nodeType===Node.TEXT_NODE?K(Me)&&(Re=NodeFilter.FILTER_ACCEPT):q(Me)&&(Re=NodeFilter.FILTER_SKIP),Re},NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),me||U(le,De),De},this.getTextElements=F,this.getParagraphElements=function(le){var me;return me=Ne.getNodesInRange(le,function(De){var Me=NodeFilter.FILTER_REJECT;return E(De)?Me=NodeFilter.FILTER_ACCEPT:(q(De)||I(De))&&(Me=NodeFilter.FILTER_SKIP),Me},NodeFilter.SHOW_ELEMENT),re(le.startContainer,me,E),me},this.getImageElements=function(le){var me;return me=Ne.getNodesInRange(le,function(De){var Me=NodeFilter.FILTER_SKIP;return A(De)&&(Me=NodeFilter.FILTER_ACCEPT),Me},NodeFilter.SHOW_ELEMENT),re(le.startContainer,me,A),me},this.getHyperlinkElements=function(le){var me=[],De=le.cloneRange();return le.collapsed&&le.endContainer.nodeType===Node.ELEMENT_NODE&&(le=W(le.endContainer,le.endOffset),le.nodeType===Node.TEXT_NODE&&De.setEnd(le,1)),F(De,!0,!1).forEach(function(Me){for(Me=Me.parentNode;!E(Me);){if(w(Me)&&me.indexOf(Me)===-1){me.push(Me);break}Me=Me.parentNode}}),De.detach(),me},this.getNormalizedFontFamilyName=function(le){return/^(["'])(?:.|[\n\r])*?\1$/.test(le)||(le=le.replace(/^[ \t\r\n\f]*((?:.|[\n\r])*?)[ \t\r\n\f]*$/,"$1"),/[ \t\r\n\f]/.test(le)&&(le="'"+le.replace(/[ \t\r\n\f]+/g," ")+"'")),le}},odf.OdfUtils=new odf.OdfUtilsImpl,gui.OdfTextBodyNodeFilter=function(){var A=odf.OdfUtils,j=Node.TEXT_NODE,M=NodeFilter.FILTER_REJECT,w=NodeFilter.FILTER_ACCEPT,E=odf.Namespaces.textns;this.acceptNode=function(N){if(N.nodeType===j){if(!A.isGroupingElement(N.parentNode))return M}else if(N.namespaceURI===E&&N.localName==="tracked-changes")return M;return w}},xmldom.LSSerializerFilter=function(){},xmldom.LSSerializerFilter.prototype.acceptNode=function(A){},odf.OdfNodeFilter=function(){this.acceptNode=function(A){return A.namespaceURI==="http://www.w3.org/1999/xhtml"?NodeFilter.FILTER_SKIP:A.namespaceURI&&A.namespaceURI.match(/^urn:webodf:/)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},xmldom.XPathIterator=function(){},xmldom.XPathIterator.prototype.next=function(){},xmldom.XPathIterator.prototype.reset=function(){};function createXPathSingleton(){function A(S,u,y){return S!==-1&&(S<u||u===-1)&&(S<y||y===-1)}function j(S){for(var u=[],y=0,v=S.length,m;y<v;){var R=S,V=v,Z=u,ne="",ee=[],z=R.indexOf("[",y),P=R.indexOf("/",y),Y=R.indexOf("=",y);if(A(P,z,Y)?(ne=R.substring(y,P),y=P+1):A(z,P,Y)?(ne=R.substring(y,z),y=_(R,z,ee)):A(Y,P,z)?(ne=R.substring(y,Y),y=Y):(ne=R.substring(y,V),y=V),Z.push({location:ne,predicates:ee}),y<v&&S[y]==="="){if(m=S.substring(y+1,v),2<m.length&&(m[0]==="'"||m[0]==='"'))m=m.slice(1,m.length-1);else try{m=parseInt(m,10)}catch{}y=v}}return{steps:u,value:m}}function M(){var S=null,u=!1;this.setNode=function(y){S=y},this.reset=function(){u=!1},this.next=function(){var y=u?null:S;return u=!0,y}}function w(S,u,y){this.reset=function(){S.reset()},this.next=function(){for(var v=S.next();v&&(v.nodeType===Node.ELEMENT_NODE&&(v=v.getAttributeNodeNS(u,y)),!v);)v=S.next();return v}}function E(S,u){var y=S.next(),v=null;this.reset=function(){S.reset(),y=S.next(),v=null},this.next=function(){for(;y;){if(v)if(u&&v.firstChild)v=v.firstChild;else{for(;!v.nextSibling&&v!==y;)v=v.parentNode;v===y?y=S.next():v=v.nextSibling}else do(v=y.firstChild)||(y=S.next());while(y&&!v);if(v&&v.nodeType===Node.ELEMENT_NODE)return v}return null}}function N(S,u){this.reset=function(){S.reset()},this.next=function(){for(var y=S.next();y&&!u(y);)y=S.next();return y}}function O(S,u,y){u=u.split(":",2);var v=y(u[0]),m=u[1];return new N(S,function(R){return R.localName===m&&R.namespaceURI===v})}function x(S,u,y){var v=new M,m=I(v,u,y),R=u.value;return R===void 0?new N(S,function(V){return v.setNode(V),m.reset(),m.next()!==null}):new N(S,function(V){return v.setNode(V),m.reset(),(V=m.next())?V.nodeValue===R:!1})}var I,_;return _=function(S,u,y){for(var v=u,m=S.length,R=0;v<m;)S[v]==="]"?(--R,0>=R&&y.push(j(S.substring(u,v)))):S[v]==="["&&(0>=R&&(u=v+1),R+=1),v+=1;return v},I=function(S,u,y){var v,m,R,V;for(v=0;v<u.steps.length;v+=1){if(R=u.steps[v],m=R.location,m==="")S=new E(S,!1);else if(m[0]==="@"){if(m=m.substr(1).split(":",2),V=y(m[0]),!V)throw"No namespace associated with the prefix "+m[0];S=new w(S,V,m[1])}else m!=="."&&(S=new E(S,!1),m.indexOf(":")!==-1&&(S=O(S,m,y)));for(m=0;m<R.predicates.length;m+=1)V=R.predicates[m],S=x(S,V,y)}return S},{getODFElementsWithXPath:function(S,u,y){var v=S.ownerDocument,m=[],R=null;if(v&&typeof v.evaluate=="function")for(y=v.evaluate(u,S,y,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null),R=y.iterateNext();R!==null;)R.nodeType===Node.ELEMENT_NODE&&m.push(R),R=y.iterateNext();else{for(m=new M,m.setNode(S),S=j(u),m=I(m,S,y),S=[],y=m.next();y;)S.push(y),y=m.next();m=S}return m}}}xmldom.XPath=createXPathSingleton(),odf.StyleInfo=function(){function A(q,K){var U,F,re,W,ie,he=0;for((U=J[q.localName])&&(re=U[q.namespaceURI])&&(he=re.length),U=0;U<he;U+=1)F=re[U],W=F.ns,ie=F.localname,(F=q.getAttributeNS(W,ie))&&q.setAttributeNS(W,Y[W]+ie,K+F);for(re=q.firstElementChild;re;)A(re,K),re=re.nextElementSibling}function j(q,K){var U,F,re,W,ie,he=0;for((U=J[q.localName])&&(re=U[q.namespaceURI])&&(he=re.length),U=0;U<he;U+=1)F=re[U],W=F.ns,ie=F.localname,(F=q.getAttributeNS(W,ie))&&(F=F.replace(K,""),q.setAttributeNS(W,Y[W]+ie,F));for(re=q.firstElementChild;re;)j(re,K),re=re.nextElementSibling}function M(q,K){var U,F,re,W,ie,he=0;for((U=J[q.localName])&&(re=U[q.namespaceURI])&&(he=re.length),U=0;U<he;U+=1)W=re[U],F=W.ns,ie=W.localname,(F=q.getAttributeNS(F,ie))&&(K=K||{},W=W.keyname,K.hasOwnProperty(W)?K[W][F]=1:(ie={},ie[F]=1,K[W]=ie));return K}function w(q,K){var U,F;for(M(q,K),U=q.firstChild;U;)U.nodeType===Node.ELEMENT_NODE&&(F=U,w(F,K)),U=U.nextSibling}function E(q,K,U){this.key=q,this.name=K,this.family=U,this.requires={}}function N(q,K,U){var F=q+'"'+K,re=U[F];return re||(re=U[F]=new E(F,q,K)),re}function O(q,K,U){var F,re,W,ie,he,ve=0;if(F=q.getAttributeNS(ee,"name"),ie=q.getAttributeNS(ee,"family"),F&&ie&&(K=N(F,ie,U)),K)for((F=J[q.localName])&&(W=F[q.namespaceURI])&&(ve=W.length),F=0;F<ve;F+=1)ie=W[F],re=ie.ns,he=ie.localname,(re=q.getAttributeNS(re,he))&&(ie=ie.keyname,ie=N(re,ie,U),K.requires[ie.key]=ie);for(q=q.firstElementChild;q;)O(q,K,U),q=q.nextElementSibling;return U}function x(q,K){var U=K[q.family];U||(U=K[q.family]={}),U[q.name]=1,Object.keys(q.requires).forEach(function(F){x(q.requires[F],K)})}function I(q,K){var U=O(q,null,{});Object.keys(U).forEach(function(F){F=U[F];var re=K[F.family];re&&re.hasOwnProperty(F.name)&&x(F,K)})}function _(q,K){function U(ie){(ie=W.getAttributeNS(ee,ie))&&(q[ie]=!0)}var F=["font-name","font-name-asian","font-name-complex"],re,W;for(re=K&&K.firstElementChild;re;)W=re,F.forEach(U),_(q,W),re=re.nextElementSibling}function S(q,K){function U(ie){var he=W.getAttributeNS(ee,ie);he&&K.hasOwnProperty(he)&&W.setAttributeNS(ee,"style:"+ie,K[he])}var F=["font-name","font-name-asian","font-name-complex"],re,W;for(re=q&&q.firstElementChild;re;)W=re,F.forEach(U),S(W,K),re=re.nextElementSibling}var u=odf.Namespaces.chartns,y=odf.Namespaces.dbns,v=odf.Namespaces.dr3dns,m=odf.Namespaces.drawns,R=odf.Namespaces.formns,V=odf.Namespaces.numberns,Z=odf.Namespaces.officens,ne=odf.Namespaces.presentationns,ee=odf.Namespaces.stylens,z=odf.Namespaces.tablens,P=odf.Namespaces.textns,Y={"urn:oasis:names:tc:opendocument:xmlns:chart:1.0":"chart:","urn:oasis:names:tc:opendocument:xmlns:database:1.0":"db:","urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0":"dr3d:","urn:oasis:names:tc:opendocument:xmlns:drawing:1.0":"draw:","urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0":"fo:","urn:oasis:names:tc:opendocument:xmlns:form:1.0":"form:","urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":"number:","urn:oasis:names:tc:opendocument:xmlns:office:1.0":"office:","urn:oasis:names:tc:opendocument:xmlns:presentation:1.0":"presentation:","urn:oasis:names:tc:opendocument:xmlns:style:1.0":"style:","urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0":"svg:","urn:oasis:names:tc:opendocument:xmlns:table:1.0":"table:","urn:oasis:names:tc:opendocument:xmlns:text:1.0":"chart:","http://www.w3.org/XML/1998/namespace":"xml:"},$={text:[{ens:ee,en:"tab-stop",ans:ee,a:"leader-text-style"},{ens:ee,en:"drop-cap",ans:ee,a:"style-name"},{ens:P,en:"notes-configuration",ans:P,a:"citation-body-style-name"},{ens:P,en:"notes-configuration",ans:P,a:"citation-style-name"},{ens:P,en:"a",ans:P,a:"style-name"},{ens:P,en:"alphabetical-index",ans:P,a:"style-name"},{ens:P,en:"linenumbering-configuration",ans:P,a:"style-name"},{ens:P,en:"list-level-style-number",ans:P,a:"style-name"},{ens:P,en:"ruby-text",ans:P,a:"style-name"},{ens:P,en:"span",ans:P,a:"style-name"},{ens:P,en:"a",ans:P,a:"visited-style-name"},{ens:ee,en:"text-properties",ans:ee,a:"text-line-through-text-style"},{ens:P,en:"alphabetical-index-source",ans:P,a:"main-entry-style-name"},{ens:P,en:"index-entry-bibliography",ans:P,a:"style-name"},{ens:P,en:"index-entry-chapter",ans:P,a:"style-name"},{ens:P,en:"index-entry-link-end",ans:P,a:"style-name"},{ens:P,en:"index-entry-link-start",ans:P,a:"style-name"},{ens:P,en:"index-entry-page-number",ans:P,a:"style-name"},{ens:P,en:"index-entry-span",ans:P,a:"style-name"},{ens:P,en:"index-entry-tab-stop",ans:P,a:"style-name"},{ens:P,en:"index-entry-text",ans:P,a:"style-name"},{ens:P,en:"index-title-template",ans:P,a:"style-name"},{ens:P,en:"list-level-style-bullet",ans:P,a:"style-name"},{ens:P,en:"outline-level-style",ans:P,a:"style-name"}],paragraph:[{ens:m,en:"caption",ans:m,a:"text-style-name"},{ens:m,en:"circle",ans:m,a:"text-style-name"},{ens:m,en:"connector",ans:m,a:"text-style-name"},{ens:m,en:"control",ans:m,a:"text-style-name"},{ens:m,en:"custom-shape",ans:m,a:"text-style-name"},{ens:m,en:"ellipse",ans:m,a:"text-style-name"},{ens:m,en:"frame",ans:m,a:"text-style-name"},{ens:m,en:"line",ans:m,a:"text-style-name"},{ens:m,en:"measure",ans:m,a:"text-style-name"},{ens:m,en:"path",ans:m,a:"text-style-name"},{ens:m,en:"polygon",ans:m,a:"text-style-name"},{ens:m,en:"polyline",ans:m,a:"text-style-name"},{ens:m,en:"rect",ans:m,a:"text-style-name"},{ens:m,en:"regular-polygon",ans:m,a:"text-style-name"},{ens:Z,en:"annotation",ans:m,a:"text-style-name"},{ens:R,en:"column",ans:R,a:"text-style-name"},{ens:ee,en:"style",ans:ee,a:"next-style-name"},{ens:z,en:"body",ans:z,a:"paragraph-style-name"},{ens:z,en:"even-columns",ans:z,a:"paragraph-style-name"},{ens:z,en:"even-rows",ans:z,a:"paragraph-style-name"},{ens:z,en:"first-column",ans:z,a:"paragraph-style-name"},{ens:z,en:"first-row",ans:z,a:"paragraph-style-name"},{ens:z,en:"last-column",ans:z,a:"paragraph-style-name"},{ens:z,en:"last-row",ans:z,a:"paragraph-style-name"},{ens:z,en:"odd-columns",ans:z,a:"paragraph-style-name"},{ens:z,en:"odd-rows",ans:z,a:"paragraph-style-name"},{ens:P,en:"notes-configuration",ans:P,a:"default-style-name"},{ens:P,en:"alphabetical-index-entry-template",ans:P,a:"style-name"},{ens:P,en:"bibliography-entry-template",ans:P,a:"style-name"},{ens:P,en:"h",ans:P,a:"style-name"},{ens:P,en:"illustration-index-entry-template",ans:P,a:"style-name"},{ens:P,en:"index-source-style",ans:P,a:"style-name"},{ens:P,en:"object-index-entry-template",ans:P,a:"style-name"},{ens:P,en:"p",ans:P,a:"style-name"},{ens:P,en:"table-index-entry-template",ans:P,a:"style-name"},{ens:P,en:"table-of-content-entry-template",ans:P,a:"style-name"},{ens:P,en:"table-index-entry-template",ans:P,a:"style-name"},{ens:P,en:"user-index-entry-template",ans:P,a:"style-name"},{ens:ee,en:"page-layout-properties",ans:ee,a:"register-truth-ref-style-name"}],chart:[{ens:u,en:"axis",ans:u,a:"style-name"},{ens:u,en:"chart",ans:u,a:"style-name"},{ens:u,en:"data-label",ans:u,a:"style-name"},{ens:u,en:"data-point",ans:u,a:"style-name"},{ens:u,en:"equation",ans:u,a:"style-name"},{ens:u,en:"error-indicator",ans:u,a:"style-name"},{ens:u,en:"floor",ans:u,a:"style-name"},{ens:u,en:"footer",ans:u,a:"style-name"},{ens:u,en:"grid",ans:u,a:"style-name"},{ens:u,en:"legend",ans:u,a:"style-name"},{ens:u,en:"mean-value",ans:u,a:"style-name"},{ens:u,en:"plot-area",ans:u,a:"style-name"},{ens:u,en:"regression-curve",ans:u,a:"style-name"},{ens:u,en:"series",ans:u,a:"style-name"},{ens:u,en:"stock-gain-marker",ans:u,a:"style-name"},{ens:u,en:"stock-loss-marker",ans:u,a:"style-name"},{ens:u,en:"stock-range-line",ans:u,a:"style-name"},{ens:u,en:"subtitle",ans:u,a:"style-name"},{ens:u,en:"title",ans:u,a:"style-name"},{ens:u,en:"wall",ans:u,a:"style-name"}],section:[{ens:P,en:"alphabetical-index",ans:P,a:"style-name"},{ens:P,en:"bibliography",ans:P,a:"style-name"},{ens:P,en:"illustration-index",ans:P,a:"style-name"},{ens:P,en:"index-title",ans:P,a:"style-name"},{ens:P,en:"object-index",ans:P,a:"style-name"},{ens:P,en:"section",ans:P,a:"style-name"},{ens:P,en:"table-of-content",ans:P,a:"style-name"},{ens:P,en:"table-index",ans:P,a:"style-name"},{ens:P,en:"user-index",ans:P,a:"style-name"}],ruby:[{ens:P,en:"ruby",ans:P,a:"style-name"}],table:[{ens:y,en:"query",ans:y,a:"style-name"},{ens:y,en:"table-representation",ans:y,a:"style-name"},{ens:z,en:"background",ans:z,a:"style-name"},{ens:z,en:"table",ans:z,a:"style-name"}],"table-column":[{ens:y,en:"column",ans:y,a:"style-name"},{ens:z,en:"table-column",ans:z,a:"style-name"}],"table-row":[{ens:y,en:"query",ans:y,a:"default-row-style-name"},{ens:y,en:"table-representation",ans:y,a:"default-row-style-name"},{ens:z,en:"table-row",ans:z,a:"style-name"}],"table-cell":[{ens:y,en:"column",ans:y,a:"default-cell-style-name"},{ens:z,en:"table-column",ans:z,a:"default-cell-style-name"},{ens:z,en:"table-row",ans:z,a:"default-cell-style-name"},{ens:z,en:"body",ans:z,a:"style-name"},{ens:z,en:"covered-table-cell",ans:z,a:"style-name"},{ens:z,en:"even-columns",ans:z,a:"style-name"},{ens:z,en:"covered-table-cell",ans:z,a:"style-name"},{ens:z,en:"even-columns",ans:z,a:"style-name"},{ens:z,en:"even-rows",ans:z,a:"style-name"},{ens:z,en:"first-column",ans:z,a:"style-name"},{ens:z,en:"first-row",ans:z,a:"style-name"},{ens:z,en:"last-column",ans:z,a:"style-name"},{ens:z,en:"last-row",ans:z,a:"style-name"},{ens:z,en:"odd-columns",ans:z,a:"style-name"},{ens:z,en:"odd-rows",ans:z,a:"style-name"},{ens:z,en:"table-cell",ans:z,a:"style-name"}],graphic:[{ens:v,en:"cube",ans:m,a:"style-name"},{ens:v,en:"extrude",ans:m,a:"style-name"},{ens:v,en:"rotate",ans:m,a:"style-name"},{ens:v,en:"scene",ans:m,a:"style-name"},{ens:v,en:"sphere",ans:m,a:"style-name"},{ens:m,en:"caption",ans:m,a:"style-name"},{ens:m,en:"circle",ans:m,a:"style-name"},{ens:m,en:"connector",ans:m,a:"style-name"},{ens:m,en:"control",ans:m,a:"style-name"},{ens:m,en:"custom-shape",ans:m,a:"style-name"},{ens:m,en:"ellipse",ans:m,a:"style-name"},{ens:m,en:"frame",ans:m,a:"style-name"},{ens:m,en:"g",ans:m,a:"style-name"},{ens:m,en:"line",ans:m,a:"style-name"},{ens:m,en:"measure",ans:m,a:"style-name"},{ens:m,en:"page-thumbnail",ans:m,a:"style-name"},{ens:m,en:"path",ans:m,a:"style-name"},{ens:m,en:"polygon",ans:m,a:"style-name"},{ens:m,en:"polyline",ans:m,a:"style-name"},{ens:m,en:"rect",ans:m,a:"style-name"},{ens:m,en:"regular-polygon",ans:m,a:"style-name"},{ens:Z,en:"annotation",ans:m,a:"style-name"}],presentation:[{ens:v,en:"cube",ans:ne,a:"style-name"},{ens:v,en:"extrude",ans:ne,a:"style-name"},{ens:v,en:"rotate",ans:ne,a:"style-name"},{ens:v,en:"scene",ans:ne,a:"style-name"},{ens:v,en:"sphere",ans:ne,a:"style-name"},{ens:m,en:"caption",ans:ne,a:"style-name"},{ens:m,en:"circle",ans:ne,a:"style-name"},{ens:m,en:"connector",ans:ne,a:"style-name"},{ens:m,en:"control",ans:ne,a:"style-name"},{ens:m,en:"custom-shape",ans:ne,a:"style-name"},{ens:m,en:"ellipse",ans:ne,a:"style-name"},{ens:m,en:"frame",ans:ne,a:"style-name"},{ens:m,en:"g",ans:ne,a:"style-name"},{ens:m,en:"line",ans:ne,a:"style-name"},{ens:m,en:"measure",ans:ne,a:"style-name"},{ens:m,en:"page-thumbnail",ans:ne,a:"style-name"},{ens:m,en:"path",ans:ne,a:"style-name"},{ens:m,en:"polygon",ans:ne,a:"style-name"},{ens:m,en:"polyline",ans:ne,a:"style-name"},{ens:m,en:"rect",ans:ne,a:"style-name"},{ens:m,en:"regular-polygon",ans:ne,a:"style-name"},{ens:Z,en:"annotation",ans:ne,a:"style-name"}],"drawing-page":[{ens:m,en:"page",ans:m,a:"style-name"},{ens:ne,en:"notes",ans:m,a:"style-name"},{ens:ee,en:"handout-master",ans:m,a:"style-name"},{ens:ee,en:"master-page",ans:m,a:"style-name"}],"list-style":[{ens:P,en:"list",ans:P,a:"style-name"},{ens:P,en:"numbered-paragraph",ans:P,a:"style-name"},{ens:P,en:"list-item",ans:P,a:"style-override"},{ens:ee,en:"style",ans:ee,a:"list-style-name"}],data:[{ens:ee,en:"style",ans:ee,a:"data-style-name"},{ens:ee,en:"style",ans:ee,a:"percentage-data-style-name"},{ens:ne,en:"date-time-decl",ans:ee,a:"data-style-name"},{ens:P,en:"creation-date",ans:ee,a:"data-style-name"},{ens:P,en:"creation-time",ans:ee,a:"data-style-name"},{ens:P,en:"database-display",ans:ee,a:"data-style-name"},{ens:P,en:"date",ans:ee,a:"data-style-name"},{ens:P,en:"editing-duration",ans:ee,a:"data-style-name"},{ens:P,en:"expression",ans:ee,a:"data-style-name"},{ens:P,en:"meta-field",ans:ee,a:"data-style-name"},{ens:P,en:"modification-date",ans:ee,a:"data-style-name"},{ens:P,en:"modification-time",ans:ee,a:"data-style-name"},{ens:P,en:"print-date",ans:ee,a:"data-style-name"},{ens:P,en:"print-time",ans:ee,a:"data-style-name"},{ens:P,en:"table-formula",ans:ee,a:"data-style-name"},{ens:P,en:"time",ans:ee,a:"data-style-name"},{ens:P,en:"user-defined",ans:ee,a:"data-style-name"},{ens:P,en:"user-field-get",ans:ee,a:"data-style-name"},{ens:P,en:"user-field-input",ans:ee,a:"data-style-name"},{ens:P,en:"variable-get",ans:ee,a:"data-style-name"},{ens:P,en:"variable-input",ans:ee,a:"data-style-name"},{ens:P,en:"variable-set",ans:ee,a:"data-style-name"}],"page-layout":[{ens:ne,en:"notes",ans:ee,a:"page-layout-name"},{ens:ee,en:"handout-master",ans:ee,a:"page-layout-name"},{ens:ee,en:"master-page",ans:ee,a:"page-layout-name"}]},J,te=xmldom.XPath;this.collectUsedFontFaces=_,this.changeFontFaceNames=S,this.UsedStyleList=function(q,K){var U={};this.uses=function(F){var re=F.localName,W=F.getAttributeNS(m,"name")||F.getAttributeNS(ee,"name");return F=re==="style"?F.getAttributeNS(ee,"family"):F.namespaceURI===V?"data":re,(F=U[F])?0<F[W]:!1},w(q,U),K&&I(K,U)},this.getStyleName=function(q,K){var U,F,re=J[K.localName];if(re&&(re=re[K.namespaceURI])){for(F=0;F<re.length;F+=1)if(re[F].keyname===q&&(re=re[F],K.hasAttributeNS(re.ns,re.localname))){U=K.getAttributeNS(re.ns,re.localname);break}}return U},this.hasDerivedStyles=function(q,K,U){var F=U.getAttributeNS(ee,"name");return U=U.getAttributeNS(ee,"family"),!!te.getODFElementsWithXPath(q,'//style:*[@style:parent-style-name="'+F+'"][@style:family="'+U+'"]',K).length},this.prefixStyleNames=function(q,K,U){var F;if(q){for(F=q.firstChild;F;){if(F.nodeType===Node.ELEMENT_NODE){var re=F,W=K,ie=re.getAttributeNS(m,"name"),he=void 0;ie?he=m:(ie=re.getAttributeNS(ee,"name"))&&(he=ee),he&&re.setAttributeNS(he,Y[he]+"name",W+ie)}F=F.nextSibling}A(q,K),U&&A(U,K)}},this.removePrefixFromStyleNames=function(q,K,U){var F=new RegExp("^"+K);if(q){for(K=q.firstChild;K;){if(K.nodeType===Node.ELEMENT_NODE){var re=K,W=F,ie=re.getAttributeNS(m,"name"),he=void 0;ie?he=m:(ie=re.getAttributeNS(ee,"name"))&&(he=ee),he&&(ie=ie.replace(W,""),re.setAttributeNS(he,Y[he]+"name",ie))}K=K.nextSibling}j(q,F),U&&j(U,F)}},this.determineStylesForNode=M,J=function(){var q,K,U,F,re,W={},ie,he,ve,Ne;for(U in $)if($.hasOwnProperty(U))for(F=$[U],K=F.length,q=0;q<K;q+=1)re=F[q],ve=re.en,Ne=re.ens,W.hasOwnProperty(ve)?ie=W[ve]:W[ve]=ie={},ie.hasOwnProperty(Ne)?he=ie[Ne]:ie[Ne]=he=[],he.push({ns:re.ans,localname:re.a,keyname:U});return W}()},typeof Object.create!="function"&&(Object.create=function(A){var j=function(){};return j.prototype=A,new j}),xmldom.LSSerializer=function(){function A(E){var N=E||{},O=function(S){var u={},y;for(y in S)S.hasOwnProperty(y)&&(u[S[y]]=y);return u}(E),x=[N],I=[O],_=0;this.push=function(){_+=1,N=x[_]=Object.create(N),O=I[_]=Object.create(O)},this.pop=function(){x.pop(),I.pop(),--_,N=x[_],O=I[_]},this.getLocalNamespaceDefinitions=function(){return O},this.getQName=function(S){var u=S.namespaceURI,y=0,v;if(!u)return S.localName;if(v=O[u])return v+":"+S.localName;do{if(v||!S.prefix?(v="ns"+y,y+=1):v=S.prefix,N[v]===u)break;if(!N[v]){N[v]=u,O[u]=v;break}v=null}while(v===null);return v+":"+S.localName}}function j(E){return E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")}function M(E,N){var O="",x=w.filter?w.filter.acceptNode(N):NodeFilter.FILTER_ACCEPT,I;if(x===NodeFilter.FILTER_ACCEPT&&N.nodeType===Node.ELEMENT_NODE){E.push(),I=E.getQName(N);var _,S=N.attributes,u,y,v,m="",R;for(_="<"+I,u=S.length,y=0;y<u;y+=1)v=S.item(y),v.namespaceURI!=="http://www.w3.org/2000/xmlns/"&&(R=w.filter?w.filter.acceptNode(v):NodeFilter.FILTER_ACCEPT,R===NodeFilter.FILTER_ACCEPT&&(R=E.getQName(v),v=typeof v.value=="string"?j(v.value):v.value,m+=" "+(R+'="'+v+'"')));u=E.getLocalNamespaceDefinitions();for(y in u)u.hasOwnProperty(y)&&((S=u[y])?S!=="xmlns"&&(_+=" xmlns:"+u[y]+'="'+y+'"'):_+=' xmlns="'+y+'"');O+=_+(m+">")}if(x===NodeFilter.FILTER_ACCEPT||x===NodeFilter.FILTER_SKIP){for(x=N.firstChild;x;)O+=M(E,x),x=x.nextSibling;N.nodeValue&&(O+=j(N.nodeValue))}return I&&(O+="</"+I+">",E.pop()),O}var w=this;this.filter=null,this.writeToString=function(E,N){if(!E)return"";var O=new A(N);return M(O,E)}},function(){function A(S){var u,y=x.length;for(u=0;u<y;u+=1)if(S.namespaceURI==="urn:oasis:names:tc:opendocument:xmlns:office:1.0"&&S.localName===x[u])return u;return-1}function j(S,u){var y=new E.UsedStyleList(S,u),v=new odf.OdfNodeFilter;this.acceptNode=function(m){var R=v.acceptNode(m);return R===NodeFilter.FILTER_ACCEPT&&m.parentNode===u&&m.nodeType===Node.ELEMENT_NODE&&(R=y.uses(m)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT),R}}function M(S,u){var y=new j(S,u);this.acceptNode=function(v){var m=y.acceptNode(v);return m!==NodeFilter.FILTER_ACCEPT||!v.parentNode||v.parentNode.namespaceURI!==odf.Namespaces.textns||v.parentNode.localName!=="s"&&v.parentNode.localName!=="tab"||(m=NodeFilter.FILTER_REJECT),m}}function w(S,u){if(u){var y=A(u),v,m=S.firstChild;if(y!==-1){for(;m&&(v=A(m),!(v!==-1&&v>y));)m=m.nextSibling;S.insertBefore(u,m)}}}var E=new odf.StyleInfo,N=core.DomUtils,O=odf.Namespaces.stylens,x="meta settings scripts font-face-decls styles automatic-styles master-styles body".split(" "),I=Date.now()+"_webodf_",_=new core.Base64;odf.ODFElement=function(){},odf.ODFDocumentElement=function(){},odf.ODFDocumentElement.prototype=new odf.ODFElement,odf.ODFDocumentElement.prototype.constructor=odf.ODFDocumentElement,odf.ODFDocumentElement.prototype.fontFaceDecls=null,odf.ODFDocumentElement.prototype.manifest=null,odf.ODFDocumentElement.prototype.settings=null,odf.ODFDocumentElement.namespaceURI="urn:oasis:names:tc:opendocument:xmlns:office:1.0",odf.ODFDocumentElement.localName="document",odf.AnnotationElement=function(){},odf.OdfPart=function(S,u,y,v){var m=this;this.size=0,this.type=null,this.name=S,this.container=y,this.url=null,this.mimetype=u,this.onstatereadychange=this.document=null,this.EMPTY=0,this.LOADING=1,this.DONE=2,this.state=this.EMPTY,this.data="",this.load=function(){v!==null&&(this.mimetype=u,v.loadAsDataURL(S,u,function(R,V){R&&runtime.log(R),m.url=V,m.onchange&&m.onchange(m),m.onstatereadychange&&m.onstatereadychange(m)}))}},odf.OdfPart.prototype.load=function(){},odf.OdfPart.prototype.getUrl=function(){return this.data?"data:;base64,"+_.toBase64(this.data):null},odf.OdfContainer=function S(u,y){function v(ue){for(var Se=ue.firstChild,be;Se;)be=Se.nextSibling,Se.nodeType===Node.ELEMENT_NODE?v(Se):Se.nodeType===Node.PROCESSING_INSTRUCTION_NODE&&ue.removeChild(Se),Se=be}function m(ue){var Se={},be,Fe,ut=ue.ownerDocument.createNodeIterator(ue,NodeFilter.SHOW_ELEMENT,null,!1);for(ue=ut.nextNode();ue;)ue.namespaceURI==="urn:oasis:names:tc:opendocument:xmlns:office:1.0"&&(ue.localName==="annotation"?(be=ue.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","name"))&&(Se.hasOwnProperty(be)?runtime.log("Warning: annotation name used more than once with <office:annotation/>: '"+be+"'"):Se[be]=ue):ue.localName==="annotation-end"&&((be=ue.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","name"))?Se.hasOwnProperty(be)?(Fe=Se[be],Fe.annotationEndElement?runtime.log("Warning: annotation name used more than once with <office:annotation-end/>: '"+be+"'"):Fe.annotationEndElement=ue):runtime.log("Warning: annotation end without an annotation start, name: '"+be+"'"):runtime.log("Warning: annotation end without a name found"))),ue=ut.nextNode()}function R(ue,Se){for(var be=ue&&ue.firstChild;be;)be.nodeType===Node.ELEMENT_NODE&&be.setAttributeNS("urn:webodf:names:scope","scope",Se),be=be.nextSibling}function V(ue,Se){for(var be=we.rootElement.meta,be=be&&be.firstChild;be&&(be.namespaceURI!==ue||be.localName!==Se);)be=be.nextSibling;for(be=be&&be.firstChild;be&&be.nodeType!==Node.TEXT_NODE;)be=be.nextSibling;return be?be.data:null}function Z(ue){var Se={},be;for(ue=ue.firstChild;ue;)ue.nodeType===Node.ELEMENT_NODE&&ue.namespaceURI===O&&ue.localName==="font-face"&&(be=ue.getAttributeNS(O,"name"),Se[be]=ue),ue=ue.nextSibling;return Se}function ne(ue,Se){var be=null,Fe,ut,Pt;if(ue)for(be=ue.cloneNode(!0),Fe=be.firstElementChild;Fe;)ut=Fe.nextElementSibling,(Pt=Fe.getAttributeNS("urn:webodf:names:scope","scope"))&&Pt!==Se&&be.removeChild(Fe),Fe=ut;return be}function ee(ue,Se){var be,Fe,ut,Pt=null,yt={};if(ue)for(Se.forEach(function(At){E.collectUsedFontFaces(yt,At)}),Pt=ue.cloneNode(!0),be=Pt.firstElementChild;be;)Fe=be.nextElementSibling,ut=be.getAttributeNS(O,"name"),yt[ut]||Pt.removeChild(be),be=Fe;return Pt}function z(ue){var Se=we.rootElement.ownerDocument,be;if(ue){v(ue.documentElement);try{be=Se.importNode(ue.documentElement,!0)}catch{}}return be}function P(ue){we.state=ue,we.onchange&&we.onchange(we),we.onstatereadychange&&we.onstatereadychange(we)}function Y(ue){We=null,we.rootElement=ue,ue.fontFaceDecls=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),ue.styles=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),ue.automaticStyles=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),ue.masterStyles=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),ue.body=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","body"),ue.meta=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),ue.settings=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","settings"),ue.scripts=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","scripts"),m(ue)}function $(ue){var Se=z(ue),be=we.rootElement,Fe;Se&&Se.localName==="document-styles"&&Se.namespaceURI==="urn:oasis:names:tc:opendocument:xmlns:office:1.0"?(be.fontFaceDecls=N.getDirectChild(Se,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),w(be,be.fontFaceDecls),Fe=N.getDirectChild(Se,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),be.styles=Fe||ue.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),w(be,be.styles),Fe=N.getDirectChild(Se,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),be.automaticStyles=Fe||ue.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),R(be.automaticStyles,"document-styles"),w(be,be.automaticStyles),Se=N.getDirectChild(Se,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),be.masterStyles=Se||ue.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),w(be,be.masterStyles),E.prefixStyleNames(be.automaticStyles,I,be.masterStyles)):P(S.INVALID)}function J(ue){ue=z(ue);var Se,be,Fe,ut;if(ue&&ue.localName==="document-content"&&ue.namespaceURI==="urn:oasis:names:tc:opendocument:xmlns:office:1.0"){if(Se=we.rootElement,Fe=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),Se.fontFaceDecls&&Fe){ut=Se.fontFaceDecls;var Pt,yt,At,ri,$t={};for(be=Z(ut),ri=Z(Fe),Fe=Fe.firstElementChild;Fe;){if(Pt=Fe.nextElementSibling,Fe.namespaceURI===O&&Fe.localName==="font-face")if(yt=Fe.getAttributeNS(O,"name"),be.hasOwnProperty(yt)){if(!Fe.isEqualNode(be[yt])){At=yt;for(var Rt=be,zt=ri,et=0,ct=void 0,ct=At=At.replace(/\d+$/,"");Rt.hasOwnProperty(ct)||zt.hasOwnProperty(ct);)et+=1,ct=At+et;At=ct,Fe.setAttributeNS(O,"style:name",At),ut.appendChild(Fe),be[At]=Fe,delete ri[yt],$t[yt]=At}}else ut.appendChild(Fe),be[yt]=Fe,delete ri[yt];Fe=Pt}ut=$t}else Fe&&(Se.fontFaceDecls=Fe,w(Se,Fe));if(be=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),R(be,"document-content"),ut&&E.changeFontFaceNames(be,ut),Se.automaticStyles&&be)for(ut=be.firstChild;ut;)Se.automaticStyles.appendChild(ut),ut=be.firstChild;else be&&(Se.automaticStyles=be,w(Se,be));if(ue=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","body"),ue===null)throw"<office:body/> tag is mising.";Se.body=ue,w(Se,Se.body)}else P(S.INVALID)}function te(ue){ue=z(ue);var Se;ue&&ue.localName==="document-meta"&&ue.namespaceURI==="urn:oasis:names:tc:opendocument:xmlns:office:1.0"&&(Se=we.rootElement,Se.meta=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),w(Se,Se.meta))}function q(ue){ue=z(ue);var Se;ue&&ue.localName==="document-settings"&&ue.namespaceURI==="urn:oasis:names:tc:opendocument:xmlns:office:1.0"&&(Se=we.rootElement,Se.settings=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","settings"),w(Se,Se.settings))}function K(ue){ue=z(ue);var Se;if(ue&&ue.localName==="manifest"&&ue.namespaceURI==="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0")for(Se=we.rootElement,Se.manifest=ue,ue=Se.manifest.firstElementChild;ue;)ue.localName==="file-entry"&&ue.namespaceURI==="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0"&&(Ve[ue.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","full-path")]=ue.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","media-type")),ue=ue.nextElementSibling}function U(ue,Se,be){ue=N.getElementsByTagName(ue,Se);var Fe;for(Fe=0;Fe<ue.length;Fe+=1)Se=ue[Fe],be.hasOwnProperty(Se.namespaceURI)||Se.parentNode.removeChild(Se)}function F(ue){U(ue,"script",{"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:office:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:table:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:text:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0":!0}),U(ue,"style",{"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:style:1.0":!0})}function re(ue){var Se=ue.firstElementChild,be=[],Fe,ut,Pt,yt=ue.attributes,At=yt.length;for(Fe=0;Fe<At;Fe+=1)Pt=yt.item(Fe),ut=Pt.localName.substr(0,2).toLowerCase(),Pt.namespaceURI===null&&ut==="on"&&be.push(Pt);for(At=be.length,Fe=0;Fe<At;Fe+=1)ue.removeAttributeNode(be[Fe]);for(;Se;)re(Se),Se=Se.nextElementSibling}function W(ue){var Se=ue.shift();Se?ke.loadAsDOM(Se.path,function(be,Fe){Fe&&(F(Fe),re(Fe.documentElement)),Se.handler(Fe),we.state===S.INVALID?be?runtime.log("ERROR: Unable to load "+Se.path+" - "+be):runtime.log("ERROR: Unable to load "+Se.path):(be&&runtime.log("DEBUG: Unable to load "+Se.path+" - "+be),W(ue))}):(m(we.rootElement),P(S.DONE))}function ie(ue){var Se="";return odf.Namespaces.forEachPrefix(function(be,Fe){Se+=" xmlns:"+be+'="'+Fe+'"'}),'<?xml version="1.0" encoding="UTF-8"?><office:'+ue+" "+Se+' office:version="1.2">'}function he(){var ue=new xmldom.LSSerializer,Se=ie("document-meta");return ue.filter=new odf.OdfNodeFilter,Se+=ue.writeToString(we.rootElement.meta,odf.Namespaces.namespaceMap),Se+"</office:document-meta>"}function ve(ue,Se){var be=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:file-entry");return be.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:full-path",ue),be.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:media-type",Se),be}function Ne(){var ue=runtime.parseXML('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2"></manifest:manifest>'),Se=ue.documentElement,be=new xmldom.LSSerializer,Fe;for(Fe in Ve)Ve.hasOwnProperty(Fe)&&Se.appendChild(ve(Fe,Ve[Fe]));return be.filter=new odf.OdfNodeFilter,`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
`+be.writeToString(ue,odf.Namespaces.namespaceMap)}function ze(){var ue,Se,be,Fe=odf.Namespaces.namespaceMap,ut=new xmldom.LSSerializer,Pt=ie("document-styles");return Se=ne(we.rootElement.automaticStyles,"document-styles"),be=we.rootElement.masterStyles.cloneNode(!0),ue=ee(we.rootElement.fontFaceDecls,[be,we.rootElement.styles,Se]),E.removePrefixFromStyleNames(Se,I,be),ut.filter=new j(be,Se),Pt+=ut.writeToString(ue,Fe),Pt+=ut.writeToString(we.rootElement.styles,Fe),Pt+=ut.writeToString(Se,Fe),Pt+=ut.writeToString(be,Fe),Pt+"</office:document-styles>"}function rt(){var ue,Se,be=odf.Namespaces.namespaceMap,Fe=new xmldom.LSSerializer,ut=ie("document-content");return Se=ne(we.rootElement.automaticStyles,"document-content"),ue=ee(we.rootElement.fontFaceDecls,[Se]),Fe.filter=new M(we.rootElement.body,Se),ut+=Fe.writeToString(ue,be),ut+=Fe.writeToString(Se,be),ut+=Fe.writeToString(we.rootElement.body,be),ut+"</office:document-content>"}function le(ue,Se){runtime.loadXML(ue,function(be,Fe){if(be)Se(be);else if(Fe){F(Fe),re(Fe.documentElement);var ut=z(Fe);ut&&ut.localName==="document"&&ut.namespaceURI==="urn:oasis:names:tc:opendocument:xmlns:office:1.0"?(Y(ut),P(S.DONE)):P(S.INVALID)}else Se("No DOM was loaded.")})}function me(ue,Se){var be;be=we.rootElement;var Fe=be.meta;Fe||(be.meta=Fe=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),w(be,Fe)),be=Fe,ue&&N.mapKeyValObjOntoNode(be,ue,odf.Namespaces.lookupNamespaceURI),Se&&N.removeKeyElementsFromNode(be,Se,odf.Namespaces.lookupNamespaceURI)}function De(ue,Se){function be(ri,$t){var Rt;$t||($t=ri),Rt=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0",$t),yt[ri]=Rt,yt.appendChild(Rt)}var Fe=new core.Zip("",null),ut="application/vnd.oasis.opendocument."+ue+(Se===!0?"-template":""),Pt=runtime.byteArrayFromString(ut,"utf8"),yt=we.rootElement,At=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0",ue);return Fe.save("mimetype",Pt,!1,new Date),be("meta"),be("settings"),be("scripts"),be("fontFaceDecls","font-face-decls"),be("styles"),be("automaticStyles","automatic-styles"),be("masterStyles","master-styles"),be("body"),yt.body.appendChild(At),Ve["/"]=ut,Ve["settings.xml"]="text/xml",Ve["meta.xml"]="text/xml",Ve["styles.xml"]="text/xml",Ve["content.xml"]="text/xml",P(S.DONE),Fe}function Me(){var ue,Se=new Date,be="";we.rootElement.settings&&we.rootElement.settings.firstElementChild&&(ue=new xmldom.LSSerializer,be=ie("document-settings"),ue.filter=new odf.OdfNodeFilter,be+=ue.writeToString(we.rootElement.settings,odf.Namespaces.namespaceMap),be+="</office:document-settings>"),(ue=be)?(ue=runtime.byteArrayFromString(ue,"utf8"),ke.save("settings.xml",ue,!0,Se)):ke.remove("settings.xml"),be=runtime.getWindow(),ue="WebODF/"+webodf.Version,be&&(ue=ue+" "+be.navigator.userAgent),me({"meta:generator":ue},null),ue=runtime.byteArrayFromString(he(),"utf8"),ke.save("meta.xml",ue,!0,Se),ue=runtime.byteArrayFromString(ze(),"utf8"),ke.save("styles.xml",ue,!0,Se),ue=runtime.byteArrayFromString(rt(),"utf8"),ke.save("content.xml",ue,!0,Se),ue=runtime.byteArrayFromString(Ne(),"utf8"),ke.save("META-INF/manifest.xml",ue,!0,Se)}function Re(ue,Se){Me(),ke.writeAs(ue,function(be){Se(be)})}var we=this,ke,Ve={},We,$e="";this.onstatereadychange=y,this.state=this.onchange=null,this.getMetadata=V,this.setRootElement=Y,this.getContentElement=function(){var ue;if(We||(ue=we.rootElement.body,We=N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","text")||N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","presentation")||N.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","spreadsheet")),!We)throw"Could not find content element in <office:body/>.";return We},this.getDocumentType=function(){var ue=we.getContentElement();return ue&&ue.localName},this.isTemplate=function(){return Ve["/"].substr(-9)==="-template"},this.setIsTemplate=function(ue){var Se=Ve["/"],be=Se.substr(-9)==="-template";ue!==be&&(Se=ue?Se+"-template":Se.substr(0,Se.length-9),Ve["/"]=Se,ue=runtime.byteArrayFromString(Se,"utf8"),ke.save("mimetype",ue,!1,new Date))},this.getPart=function(ue){return new odf.OdfPart(ue,Ve[ue],we,ke)},this.getPartData=function(ue,Se){ke.load(ue,Se)},this.setMetadata=me,this.incrementEditingCycles=function(){var ue=V(odf.Namespaces.metans,"editing-cycles"),ue=ue?parseInt(ue,10):0;return isNaN(ue)&&(ue=0),me({"meta:editing-cycles":ue+1},null),ue+1},this.createByteArray=function(ue,Se){Me(),ke.createByteArray(ue,Se)},this.saveAs=Re,this.save=function(ue){Re($e,ue)},this.getUrl=function(){return $e},this.setBlob=function(ue,Se,be){be=_.convertBase64ToByteArray(be),ke.save(ue,be,!1,new Date),Ve.hasOwnProperty(ue)&&runtime.log(ue+" has been overwritten."),Ve[ue]=Se},this.removeBlob=function(ue){var Se=ke.remove(ue);runtime.assert(Se,"file is not found: "+ue),delete Ve[ue]},this.state=S.LOADING,this.rootElement=function(ue){var Se=document.createElementNS(ue.namespaceURI,ue.localName),be;ue=new ue.Type;for(be in ue)ue.hasOwnProperty(be)&&(Se[be]=ue[be]);return Se}({Type:odf.ODFDocumentElement,namespaceURI:odf.ODFDocumentElement.namespaceURI,localName:odf.ODFDocumentElement.localName}),u===odf.OdfContainer.DocumentType.TEXT?ke=De("text"):u===odf.OdfContainer.DocumentType.TEXT_TEMPLATE?ke=De("text",!0):u===odf.OdfContainer.DocumentType.PRESENTATION?ke=De("presentation"):u===odf.OdfContainer.DocumentType.PRESENTATION_TEMPLATE?ke=De("presentation",!0):u===odf.OdfContainer.DocumentType.SPREADSHEET?ke=De("spreadsheet"):u===odf.OdfContainer.DocumentType.SPREADSHEET_TEMPLATE?ke=De("spreadsheet",!0):($e=u,ke=new core.Zip($e,function(ue,Se){ke=Se,ue?le($e,function(be){ue&&(ke.error=ue+`
`+be,P(S.INVALID))}):W([{path:"styles.xml",handler:$},{path:"content.xml",handler:J},{path:"meta.xml",handler:te},{path:"settings.xml",handler:q},{path:"META-INF/manifest.xml",handler:K}])}))},odf.OdfContainer.EMPTY=0,odf.OdfContainer.LOADING=1,odf.OdfContainer.DONE=2,odf.OdfContainer.INVALID=3,odf.OdfContainer.SAVING=4,odf.OdfContainer.MODIFIED=5,odf.OdfContainer.getContainer=function(S){return new odf.OdfContainer(S,null)}}(),odf.OdfContainer.DocumentType={TEXT:1,TEXT_TEMPLATE:2,PRESENTATION:3,PRESENTATION_TEMPLATE:4,SPREADSHEET:5,SPREADSHEET_TEMPLATE:6},gui.AnnotatableCanvas=function(){},gui.AnnotatableCanvas.prototype.refreshSize=function(){},gui.AnnotatableCanvas.prototype.getZoomLevel=function(){},gui.AnnotatableCanvas.prototype.getSizer=function(){},gui.AnnotationViewManager=function(A,j,M,w){function E(v){var m=v.annotationEndElement,R=S.createRange(),V=v.getAttributeNS(odf.Namespaces.officens,"name");m&&(R.setStart(v,v.childNodes.length),R.setEnd(m,0),v=u.getTextNodes(R,!1),v.forEach(function(Z){var ne;e:{for(ne=Z.parentNode;ne.namespaceURI!==odf.Namespaces.officens||ne.localName!=="body";){if(ne.namespaceURI==="http://www.w3.org/1999/xhtml"&&ne.className==="webodf-annotationHighlight"&&ne.getAttribute("annotation")===V){ne=!0;break e}ne=ne.parentNode}ne=!1}ne||(ne=S.createElement("span"),ne.className="webodf-annotationHighlight",ne.setAttribute("annotation",V),Z.parentNode.replaceChild(ne,Z),ne.appendChild(Z))})),R.detach()}function N(v){var m=A.getSizer();v?(M.style.display="inline-block",m.style.paddingRight=y.getComputedStyle(M).width):(M.style.display="none",m.style.paddingRight=0),A.refreshSize()}function O(){_.sort(function(v,m){return v.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1})}function x(){var v;for(v=0;v<_.length;v+=1){var V=_[v],m=V.parentNode,Z=m.nextElementSibling,R=Z.nextElementSibling,$=m.parentNode,ne=0,ne=_[_.indexOf(V)-1],ee=void 0,V=A.getZoomLevel();m.style.left=(M.getBoundingClientRect().left-$.getBoundingClientRect().left)/V+"px",m.style.width=M.getBoundingClientRect().width/V+"px",Z.style.width=parseFloat(m.style.left)-30+"px",ne?(ee=ne.parentNode.getBoundingClientRect(),20>=($.getBoundingClientRect().top-ee.bottom)/V?m.style.top=Math.abs($.getBoundingClientRect().top-ee.bottom)/V+20+"px":m.style.top="0px"):m.style.top="0px",R.style.left=Z.getBoundingClientRect().width/V+"px";var Z=R.style,$=R.getBoundingClientRect().left/V,ne=R.getBoundingClientRect().top/V,ee=m.getBoundingClientRect().left/V,z=m.getBoundingClientRect().top/V,P=0,Y=0,P=ee-$,P=P*P,Y=z-ne,Y=Y*Y,$=Math.sqrt(P+Y);Z.width=$+"px",ne=Math.asin((m.getBoundingClientRect().top-R.getBoundingClientRect().top)/(V*parseFloat(R.style.width))),R.style.transform="rotate("+ne+"rad)",R.style.MozTransform="rotate("+ne+"rad)",R.style.WebkitTransform="rotate("+ne+"rad)",R.style.msTransform="rotate("+ne+"rad)"}}function I(v){var m=_.indexOf(v),R=v.parentNode.parentNode;R.localName==="div"&&(R.parentNode.insertBefore(v,R),R.parentNode.removeChild(R)),v=v.getAttributeNS(odf.Namespaces.officens,"name"),v=S.querySelectorAll('span.webodf-annotationHighlight[annotation="'+v+'"]');for(var V,R=0;R<v.length;R+=1){for(V=v.item(R);V.firstChild;)V.parentNode.insertBefore(V.firstChild,V);V.parentNode.removeChild(V)}m!==-1&&_.splice(m,1),_.length===0&&N(!1)}var _=[],S=j.ownerDocument,u=odf.OdfUtils,y=runtime.getWindow();runtime.assert(!!y,"Expected to be run in an environment which has a global window, like a browser."),this.rerenderAnnotations=x,this.rehighlightAnnotations=function(){_.forEach(function(v){E(v)})},this.getMinimumHeightForAnnotationPane=function(){return M.style.display!=="none"&&0<_.length?(_[_.length-1].parentNode.getBoundingClientRect().bottom-M.getBoundingClientRect().top)/A.getZoomLevel()+"px":null},this.addAnnotations=function(v){v.length!==0&&(N(!0),v.forEach(function(m){_.push(m);var R=S.createElement("div"),V=S.createElement("div"),Z=S.createElement("div"),ne=S.createElement("div"),ee;R.className="annotationWrapper",R.setAttribute("creator",u.getAnnotationCreator(m)),m.parentNode.insertBefore(R,m),V.className="annotationNote",V.appendChild(m),w&&(ee=S.createElement("div"),ee.className="annotationRemoveButton",V.appendChild(ee)),Z.className="annotationConnector horizontal",ne.className="annotationConnector angular",R.appendChild(V),R.appendChild(Z),R.appendChild(ne),m.annotationEndElement&&E(m)}),O(),x())},this.forgetAnnotation=I,this.forgetAnnotations=function(){for(;_.length;)I(_[0])}},gui.Viewport=function(){},gui.Viewport.prototype.scrollIntoView=function(A,j){},gui.SingleScrollViewport=function(A){this.scrollIntoView=function(j,M){var w,E,N,O;O=A.offsetHeight-A.clientHeight,N=A.offsetWidth-A.clientWidth;var x=A.getBoundingClientRect();j&&x&&(w=x.left+5,E=x.top+5,N=x.right-(N+5),O=x.bottom-(O+5),M||j.top<E?A.scrollTop-=E-j.top:(j.top>O||j.bottom>O)&&(A.scrollTop=j.bottom-j.top<=O-E?A.scrollTop+(j.bottom-O):A.scrollTop+(j.top-E)),j.left<w?A.scrollLeft-=w-j.left:j.right>N&&(A.scrollLeft=j.right-j.left<=N-w?A.scrollLeft+(j.right-N):A.scrollLeft-(w-j.left)))}},function(){function A(E,N,O,x,I){var _,S=0,u;for(u in E)if(E.hasOwnProperty(u)){if(S===O){_=u;break}S+=1}_?N.getPartData(E[_].href,function(y,v){if(y)runtime.log(y);else if(v){var m="@font-face { font-family: "+(E[_].family||_)+"; src: url(data:application/x-font-ttf;charset=binary;base64,"+w.convertUTF8ArrayToBase64(v)+') format("truetype"); }';try{x.insertRule(m,x.cssRules.length)}catch(R){runtime.log("Problem inserting rule in CSS: "+runtime.toJson(R)+`
Rule: `+m)}}else runtime.log("missing font data for "+E[_].href);A(E,N,O+1,x,I)}):I&&I()}var j=xmldom.XPath,M=odf.OdfUtils,w=new core.Base64;odf.FontLoader=function(){this.loadFonts=function(E,N){for(var O=E.rootElement.fontFaceDecls;N.cssRules.length;)N.deleteRule(N.cssRules.length-1);if(O){var x={},I,_,S,u;if(O)for(O=j.getODFElementsWithXPath(O,"style:font-face[svg:font-face-src]",odf.Namespaces.lookupNamespaceURI),I=0;I<O.length;I+=1)_=O[I],S=_.getAttributeNS(odf.Namespaces.stylens,"name"),u=M.getNormalizedFontFamilyName(_.getAttributeNS(odf.Namespaces.svgns,"font-family")),_=j.getODFElementsWithXPath(_,"svg:font-face-src/svg:font-face-uri",odf.Namespaces.lookupNamespaceURI),0<_.length&&(_=_[0].getAttributeNS(odf.Namespaces.xlinkns,"href"),x[S]={href:_,family:u});A(x,E,0,N)}}}}(),odf.Formatting=function(){function A($){return($=Y[$])?z.mergeObjects({},$):{}}function j(){for(var q=u.rootElement.fontFaceDecls,$={},J,te,q=q&&q.firstElementChild;q;)(J=q.getAttributeNS(m,"name"))&&((te=q.getAttributeNS(v,"font-family"))||0<q.getElementsByTagNameNS(v,"font-face-uri").length)&&($[J]=te),q=q.nextElementSibling;return $}function M($){for(var J=u.rootElement.styles.firstElementChild;J;){if(J.namespaceURI===m&&J.localName==="default-style"&&J.getAttributeNS(m,"family")===$)return J;J=J.nextElementSibling}return null}function w($,J,te){var q,K,U;for(te=te||[u.rootElement.automaticStyles,u.rootElement.styles],U=0;U<te.length;U+=1)for(q=te[U],q=q.firstElementChild;q;){if(K=q.getAttributeNS(m,"name"),q.namespaceURI===m&&q.localName==="style"&&q.getAttributeNS(m,"family")===J&&K===$||J==="list-style"&&q.namespaceURI===R&&q.localName==="list-style"&&K===$||J==="data"&&q.namespaceURI===V&&K===$)return q;q=q.nextElementSibling}return null}function E($){for(var J,te,q,K,U={},F=$.firstElementChild;F;){if(F.namespaceURI===m)for(q=U[F.nodeName]={},te=F.attributes,J=0;J<te.length;J+=1)K=te.item(J),q[K.name]=K.value;F=F.nextElementSibling}for(te=$.attributes,J=0;J<te.length;J+=1)K=te.item(J),U[K.name]=K.value;return U}function N($,J){for(var te=u.rootElement.styles,q,K={},U=$.getAttributeNS(m,"family"),F=$;F;)q=E(F),K=z.mergeObjects(q,K),F=(q=F.getAttributeNS(m,"parent-style-name"))?w(q,U,[te]):null;return(F=M(U))&&(q=E(F),K=z.mergeObjects(q,K)),J!==!1&&(q=A(U),K=z.mergeObjects(q,K)),K}function O($,J){function te(W){Object.keys(W).forEach(function(ie){Object.keys(W[ie]).forEach(function(he){F+="|"+ie+":"+he+"|"})})}for(var q=$.nodeType===Node.TEXT_NODE?$.parentNode:$,K,U=[],F="",re=!1;q&&!ne.isInlineRoot(q)&&q.parentNode!==u.rootElement;)!re&&ne.isGroupingElement(q)&&(re=!0),(K=y.determineStylesForNode(q))&&U.push(K),q=q.parentNode;return re&&(U.forEach(te),J&&(J[F]=U)),re?U:void 0}function x($){var J={orderedStyles:[],styleProperties:{}};return $.forEach(function(te){Object.keys(te).forEach(function(q){var K=Object.keys(te[q])[0],U={name:K,family:q,displayName:void 0,isCommonStyle:!1},F;(F=w(K,q))?(q=N(F),J.styleProperties=z.mergeObjects(q,J.styleProperties),U.displayName=F.getAttributeNS(m,"display-name")||void 0,U.isCommonStyle=F.parentNode===u.rootElement.styles):runtime.log("No style element found for '"+K+"' of family '"+q+"'"),J.orderedStyles.push(U)})}),J}function I($,J){var te={},q=[];return J||(J={}),$.forEach(function(K){O(K,te)}),Object.keys(te).forEach(function(K){J[K]||(J[K]=x(te[K])),q.push(J[K])}),q}function _($){for(var J=u.rootElement.masterStyles.firstElementChild;J&&(J.namespaceURI!==m||J.localName!=="master-page"||J.getAttributeNS(m,"name")!==$);)J=J.nextElementSibling;return J}function S($,J){var te;return $&&(te=P.convertMeasure($,"px")),te===void 0&&J&&(te=P.convertMeasure(J,"px")),te}var u,y=new odf.StyleInfo,v=odf.Namespaces.svgns,m=odf.Namespaces.stylens,R=odf.Namespaces.textns,V=odf.Namespaces.numberns,Z=odf.Namespaces.fons,ne=odf.OdfUtils,ee=core.DomUtils,z=new core.Utils,P=new core.CSSUnits,Y={paragraph:{"style:paragraph-properties":{"fo:text-align":"left"}}};this.getSystemDefaultStyleAttributes=A,this.setOdfContainer=function($){u=$},this.getFontMap=j,this.getAvailableParagraphStyles=function(){for(var q=u.rootElement.styles,$,J,te=[],q=q&&q.firstElementChild;q;)q.localName==="style"&&q.namespaceURI===m&&($=q.getAttributeNS(m,"family"),$==="paragraph"&&($=q.getAttributeNS(m,"name"),J=q.getAttributeNS(m,"display-name")||$,$&&J&&te.push({name:$,displayName:J}))),q=q.nextElementSibling;return te},this.isStyleUsed=function($){var J,te=u.rootElement;return J=y.hasDerivedStyles(te,odf.Namespaces.lookupNamespaceURI,$),$=new y.UsedStyleList(te.styles).uses($)||new y.UsedStyleList(te.automaticStyles).uses($)||new y.UsedStyleList(te.body).uses($),J||$},this.getDefaultStyleElement=M,this.getStyleElement=w,this.getStyleAttributes=E,this.getInheritedStyleAttributes=N,this.getFirstCommonParentStyleNameOrSelf=function($){var J=u.rootElement.styles,te;return(te=w($,"paragraph",[u.rootElement.automaticStyles]))&&($=te.getAttributeNS(m,"parent-style-name"),!$)?null:(te=w($,"paragraph",[J]))?$:null},this.hasParagraphStyle=function($){return!!w($,"paragraph")},this.getAppliedStyles=I,this.getAppliedStylesForElement=function($,J){return I([$],J)[0]},this.updateStyle=function($,J){var te,q;ee.mapObjOntoNode($,J,odf.Namespaces.lookupNamespaceURI),(te=(te=J["style:text-properties"])&&te["style:font-name"])&&!j().hasOwnProperty(te)&&(q=$.ownerDocument.createElementNS(m,"style:font-face"),q.setAttributeNS(m,"style:name",te),q.setAttributeNS(v,"svg:font-family",te),u.rootElement.fontFaceDecls.appendChild(q))},this.createDerivedStyleObject=function($,J,te){var q=w($,J);return runtime.assert(!!q,"No style element found for '"+$+"' of family '"+J+"'"),$=q.parentNode===u.rootElement.styles?{"style:parent-style-name":$}:E(q),$["style:family"]=J,z.mergeObjects($,te),$},this.getDefaultTabStopDistance=function(){for(var $=M("paragraph"),$=$&&$.firstElementChild,J;$;)$.namespaceURI===m&&$.localName==="paragraph-properties"&&(J=$.getAttributeNS(m,"tab-stop-distance")),$=$.nextElementSibling;return J||(J="1.25cm"),ne.parseNonNegativeLength(J)},this.getMasterPageElement=_,this.getContentSize=function($,J){var te,q,K,U,F,re,W,ie,he,ve;e:{if(q=w($,J),runtime.assert(J==="paragraph"||J==="table","styleFamily must be either paragraph or table"),q&&((q=q.getAttributeNS(m,"master-page-name"))&&((te=_(q))||runtime.log("WARN: No master page definition found for "+q)),te||(te=_("Standard")),te||(te=u.rootElement.masterStyles.getElementsByTagNameNS(m,"master-page")[0])||runtime.log("WARN: Document has no master pages defined"),te)){for(q=te.getAttributeNS(m,"page-layout-name"),K=u.rootElement.automaticStyles.getElementsByTagNameNS(m,"page-layout"),U=0;U<K.length;U+=1)if(te=K.item(U),te.getAttributeNS(m,"name")===q)break e}te=null}return te||(te=ee.getDirectChild(u.rootElement.styles,m,"default-page-layout")),(te=ee.getDirectChild(te,m,"page-layout-properties"))?(te.getAttributeNS(m,"print-orientation")==="landscape"?(q="29.7cm",K="21.001cm"):(q="21.001cm",K="29.7cm"),q=S(te.getAttributeNS(Z,"page-width"),q),K=S(te.getAttributeNS(Z,"page-height"),K),U=S(te.getAttributeNS(Z,"margin")),U===void 0?(U=S(te.getAttributeNS(Z,"margin-left"),"2cm"),F=S(te.getAttributeNS(Z,"margin-right"),"2cm"),re=S(te.getAttributeNS(Z,"margin-top"),"2cm"),W=S(te.getAttributeNS(Z,"margin-bottom"),"2cm")):U=F=re=W=U,ie=S(te.getAttributeNS(Z,"padding")),ie===void 0?(ie=S(te.getAttributeNS(Z,"padding-left"),"0cm"),he=S(te.getAttributeNS(Z,"padding-right"),"0cm"),ve=S(te.getAttributeNS(Z,"padding-top"),"0cm"),te=S(te.getAttributeNS(Z,"padding-bottom"),"0cm")):ie=he=ve=te=ie):(q=S("21.001cm"),K=S("29.7cm"),U=F=re=W=U=S("2cm"),ie=he=ve=te=ie=S("0cm")),{width:q-U-F-ie-he,height:K-re-W-ve-te}}},function(){var A=odf.Namespaces.stylens,j=odf.Namespaces.textns,M={graphic:"draw","drawing-page":"draw",paragraph:"text",presentation:"presentation",ruby:"text",section:"text",table:"table","table-cell":"table","table-column":"table","table-row":"table",text:"text",list:"text",page:"office"};odf.StyleTreeNode=function(w){this.derivedStyles={},this.element=w},odf.StyleTree=function(w,E){function N(S){var u,y,v,m={};if(!S)return m;for(S=S.firstElementChild;S;)(y=S.namespaceURI!==A||S.localName!=="style"&&S.localName!=="default-style"?S.namespaceURI===j&&S.localName==="list-style"?"list":S.namespaceURI!==A||S.localName!=="page-layout"&&S.localName!=="default-page-layout"?void 0:"page":S.getAttributeNS(A,"family"))&&((u=S.getAttributeNS(A,"name"))||(u=""),m.hasOwnProperty(y)?v=m[y]:m[y]=v={},v[u]=S),S=S.nextElementSibling;return m}function O(S,u){if(S.hasOwnProperty(u))return S[u];var y=null,v=Object.keys(S),m;for(m=0;m<v.length&&!(y=O(S[v[m]].derivedStyles,u));m+=1);return y}function x(S,u,y){var v,m,R;return u.hasOwnProperty(S)?(v=new odf.StyleTreeNode(u[S]),m=v.element.getAttributeNS(A,"parent-style-name"),R=null,m&&(R=O(y,m)||x(m,u,y)),R?R.derivedStyles[S]=v:y[S]=v,delete u[S],v):null}function I(S,u){S&&Object.keys(S).forEach(function(y){x(y,S,u)})}var _={};this.getStyleTree=function(){return _},function(){var S,u,y;u=N(w),y=N(E),Object.keys(M).forEach(function(v){S=_[v]={},I(u[v],S),I(y[v],S)})}()}}(),function(){function A(I,_){try{I.insertRule(_,I.cssRules.length)}catch(S){runtime.log("cannot load rule: "+_+" - "+S)}}function j(I,_){this.listCounterCount=0,this.contentRules=I,this.counterIdStack=[],this.continuedCounterIdStack=_}function M(I){function _(v,m,R,V){var Z=m.namespaceURI===N&&m.localName==="list",ne=m.namespaceURI===N&&m.localName==="list-item";if(Z||ne){if(Z){var Z=R+=1,ee,z,P;for(V.listCounterCount+=1,ne=v+"-level"+Z+"-"+V.listCounterCount,m.setAttributeNS("urn:webodf:names:helper","counter-id",ne),ee=V.continuedCounterIdStack.shift(),ee||(ee=ne,u+=ne+" 1 ",z='text|list[webodfhelper|counter-id="'+ne+'"] > text|list-item:first-child > :not(text|list):first-child:before',z+="{",z+="counter-increment: "+ee+" 0;",z+="}",A(I,z));V.counterIdStack.length>=Z;)V.counterIdStack.pop();for(V.counterIdStack.push(ee),P=V.contentRules[Z.toString()]||"",z=1;z<=Z;z+=1)P=P.replace(z+"webodf-listLevel",V.counterIdStack[z-1]);z='text|list[webodfhelper|counter-id="'+ne+'"] > text|list-item > :not(text|list):first-child:before',z+="{",z+=P,z+="counter-increment: "+ee+";",z+="}",A(I,z)}for(m=m.firstElementChild;m;)_(v,m,R,V),m=m.nextElementSibling}else V.continuedCounterIdStack=[]}var S=0,u="",y={};this.createCounterRules=function(v,m,R){var V=m.getAttributeNS(O,"id"),Z=[];R&&(R=R.getAttributeNS("urn:webodf:names:helper","counter-id"),Z=y[R].slice(0)),v=new j(v,Z),V?V="Y"+V:(S+=1,V="X"+S),_(V,m,0,v),y[V+"-level1-1"]=v.counterIdStack},this.initialiseCreatedCounters=function(){var v;v="office|document{"+("counter-reset: "+u+";"),v+="}",A(I,v)}}var w=odf.Namespaces.fons,E=odf.Namespaces.stylens,N=odf.Namespaces.textns,O=odf.Namespaces.xmlns,x={1:"decimal",a:"lower-latin",A:"upper-latin",i:"lower-roman",I:"upper-roman"};odf.ListStyleToCss=function(){function I(m){var R=v.parseLength(m);return R?y.convert(R.value,R.unit,"px"):(runtime.log("Could not parse value '"+m+"'."),0)}function _(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function S(m,R){var V;return m&&(V=m.getAttributeNS(N,"style-name")),V===R}function u(m,R,V){R=R.getElementsByTagNameNS(N,"list"),m=new M(m);var Z,ne,ee,z,P,Y,$={},J;for(J=0;J<R.length;J+=1)if(Z=R.item(J),Y=Z.getAttributeNS(N,"style-name")){ee=Z.getAttributeNS(N,"continue-numbering"),z=Z.getAttributeNS(N,"continue-list"),(P=Z.getAttributeNS(O,"id"))&&($[P]=Z),P=V[Y].element.firstElementChild;for(var te=void 0,q={};P;){var te=(te=P.getAttributeNS(N,"level"))&&parseInt(te,10),K=P,U="",F=void 0,re=void 0,W=F=void 0;if(K.localName==="list-level-style-number"){var ve=K,U=ve.getAttributeNS(E,"num-format"),F=ve.getAttributeNS(E,"num-suffix")||"",re=ve.getAttributeNS(E,"num-prefix")||"",ie="",he=ve.getAttributeNS(N,"level"),ve=ve.getAttributeNS(N,"display-levels");if(re&&(ie+='"'+_(re)+`"
`),x.hasOwnProperty(U))for(he=he?parseInt(he,10):1,ve=ve?parseInt(ve,10):1;0<ve;)ie+=" counter("+(he-ve+1)+"webodf-listLevel,"+x[U]+")",1<ve&&(ie+='"."'),--ve;else ie=U?ie+(' "'+U+'"'):ie+' ""';U="content:"+ie+' "'+_(F)+'"'}else K.localName==="list-level-style-image"?U="content: none":K.localName==="list-level-style-bullet"&&(U=K.getAttributeNS(N,"bullet-char"),U='content: "'+_(U)+'"');(F=K.getElementsByTagNameNS(E,"list-level-properties")[0])&&(re=F.getAttributeNS(N,"list-level-position-and-space-mode"),re==="label-alignment"&&((F=F.getElementsByTagNameNS(E,"list-level-label-alignment")[0])&&(W=F.getAttributeNS(N,"label-followed-by")),W==="space"&&(U+=' "\\a0"'))),q[te]=`
`+U+`;
`,P=P.nextElementSibling}P=q,ee&&!z&&S(ne,Y)?m.createCounterRules(P,Z,ne):z&&S($[z],Y)?m.createCounterRules(P,Z,$[z]):m.createCounterRules(P,Z),ne=Z}m.initialiseCreatedCounters()}var y=new core.CSSUnits,v=odf.OdfUtils;this.applyListStyles=function(m,R,V){var Z,ne;(Z=R.list)&&Object.keys(Z).forEach(function(ee){ne=Z[ee];for(var z=ne.element.firstElementChild;z;){if(z.namespaceURI===N){for(var P=m,Y=z,$='text|list[text|style-name="'+ee+'"]',J=Y.getAttributeNS(N,"level"),he=void 0,te=void 0,W=te=void 0,ie=void 0,q=void 0,K=he=void 0,U=void 0,F=void 0,re=void 0,ie=void 0,W=(te=Y.getElementsByTagNameNS(E,"list-level-properties")[0])&&te.getAttributeNS(N,"list-level-position-and-space-mode"),ie=te&&te.getElementsByTagNameNS(E,"list-level-label-alignment")[0],he=J=J&&parseInt(J,10);1<he;)$+=" > text|list-item > text|list",--he;switch(he=te&&te.getAttributeNS(w,"text-align")||"left",he){case"end":he="right";break;case"start":he="left"}W==="label-alignment"?(q=ie&&ie.getAttributeNS(w,"margin-left")||"0px",F=ie&&ie.getAttributeNS(w,"text-indent")||"0px",re=ie&&ie.getAttributeNS(N,"label-followed-by"),ie=I(q)):(q=te&&te.getAttributeNS(N,"space-before")||"0px",K=te&&te.getAttributeNS(N,"min-label-width")||"0px",U=te&&te.getAttributeNS(N,"min-label-distance")||"0px",ie=I(q)+I(K)),te=$+" > text|list-item",te+="{",te+="margin-left: "+ie+"px;",te+="}",A(P,te),te=$+" > text|list-item > text|list",te+="{",te+="margin-left: "+-ie+"px;",te+="}",A(P,te),te=$+" > text|list-item > :not(text|list):first-child:before",te+="{",te+="text-align: "+he+";",te+="display: inline-block;",W==="label-alignment"?(te+="margin-left: "+F+";",re==="listtab"&&(te+="padding-right: 0.2cm;")):(te+="min-width: "+K+";",te+="margin-left: "+(parseFloat(K)===0?"":"-")+K+";",te+="padding-right: "+U+";"),te+="}",A(P,te)}z=z.nextElementSibling}}),u(m,V,Z)}}}(),odf.LazyStyleProperties=function(A,j){var M={};this.value=function(w){var E;return M.hasOwnProperty(w)?E=M[w]:(E=j[w](),E===void 0&&A&&(E=A.value(w)),M[w]=E),E},this.reset=function(w){A=w,M={}}},odf.StyleParseUtils=function(){function A(M){var w,E;return M=(M=/(-?[0-9]*[0-9][0-9]*(\.[0-9]*)?|0+\.[0-9]*[1-9][0-9]*|\.[0-9]*[1-9][0-9]*)((cm)|(mm)|(in)|(pt)|(pc)|(px))/.exec(M))?{value:parseFloat(M[1]),unit:M[3]}:null,E=M&&M.unit,E==="px"?w=M.value:E==="cm"?w=M.value/2.54*96:E==="mm"?w=M.value/25.4*96:E==="in"?w=96*M.value:E==="pt"?w=M.value/.75:E==="pc"&&(w=16*M.value),w}var j=odf.Namespaces.stylens;this.parseLength=A,this.parsePositiveLengthOrPercent=function(M,w,E){var N;M&&(N=parseFloat(M.substr(0,M.indexOf("%"))),isNaN(N)&&(N=void 0));var O;return N!==void 0?(E&&(O=E.value(w)),N=O===void 0?void 0:O/100*N):N=A(M),N},this.getPropertiesElement=function(M,w,E){for(w=E?E.nextElementSibling:w.firstElementChild;w!==null&&(w.localName!==M||w.namespaceURI!==j);)w=w.nextElementSibling;return w},this.parseAttributeList=function(M){return M&&(M=M.replace(/^\s*(.*?)\s*$/g,"$1")),M&&0<M.length?M.split(/\s+/):[]}},odf.Style2CSS=function(){function A(le,me,De){var Me=[];De=De.derivedStyles;var Re,we=Z[le],ke;we===void 0?me=null:(ke=me?"["+we+'|style-name="'+me+'"]':"",we==="presentation"&&(we="draw",ke=me?'[presentation|style-name="'+me+'"]':""),me=we+"|"+ne[le].join(ke+","+we+"|")+ke),me!==null&&Me.push(me);for(Re in De)De.hasOwnProperty(Re)&&(me=A(le,Re,De[Re]),Me=Me.concat(me));return Me}function j(le){var De="",me="",De=null;return le.localName==="default-style"?null:(De=le.getAttributeNS(S,"parent-style-name"),me=le.getAttributeNS(S,"family"),De=ze.getODFElementsWithXPath(ve,De?"//style:*[@style:name='"+De+"'][@style:family='"+me+"']":"//style:default-style[@style:family='"+me+"']",odf.Namespaces.lookupNamespaceURI)[0])}function M(le,me){var De="",Me,Re,we;for(Me=0;Me<me.length;Me+=1)if(Re=me[Me],we=le.getAttributeNS(Re[0],Re[1])){if(we=we.trim(),F.hasOwnProperty(Re[1])){var ke=we,Ve=ke.indexOf(" "),We=void 0;we=void 0,Ve!==-1?(We=ke.substring(0,Ve),we=ke.substring(Ve)):(We=ke,we=""),(We=ie.parseLength(We))&&We.unit==="pt"&&.75>We.value&&(ke="0.75pt"+we),we=ke}else if(re.hasOwnProperty(Re[1])){var ke=le,Ve=Re[0],We=Re[1],$e=ie.parseLength(we),ue=void 0,Se=void 0,Fe=void 0,be=void 0,Fe=void 0;if($e&&$e.unit==="%"){for(ue=$e.value/100,Se=j(ke.parentNode),be="0";Se;){if((Fe=R.getDirectChild(Se,S,"paragraph-properties"))&&(Fe=ie.parseLength(Fe.getAttributeNS(Ve,We)))){if(Fe.unit!=="%"){be=Fe.value*ue+Fe.unit;break}ue*=Fe.value/100}Se=j(Se)}we=be}}Re[2]&&(De+=Re[2]+":"+we+";")}return De}function w(le,me,De,Me){return me+me+De+De+Me+Me}function E(le,me){var De=[le],Me=me.derivedStyles;return Object.keys(Me).forEach(function(Re){Re=E(Re,Me[Re]),De=De.concat(Re)}),De}function N(le,me,De,Me){function Re(We,$e){var ue=[],Se;We.forEach(function(be){we.forEach(function(Fe){ue.push('draw|page[webodfhelper|page-style-name="'+Fe+'"] draw|frame[presentation|class="'+be+'"]')})}),0<ue.length&&(Se=ue.join(",")+"{visibility:"+$e+";}",le.insertRule(Se,le.cssRules.length))}var we=E(me,Me),ke=[],Ve=[];["page-number","date-time","header","footer"].forEach(function(We){var $e;$e=De.getAttributeNS(m,"display-"+We),$e==="true"?ke.push(We):$e==="false"&&Ve.push(We)}),Re(ke,"visible"),Re(Ve,"hidden")}function O(le,me,De,Me){var Re,we;if(me==="page"){var ke=Me.element,Ve="",We,$e;$e=We="",De=R.getDirectChild(ke,S,"page-layout-properties");var ue;if(De)if(ue=ke.getAttributeNS(S,"name"),Ve+=M(De,K),(We=R.getDirectChild(De,S,"background-image"))&&($e=We.getAttributeNS(v,"href"))&&(Ve=Ve+("background-image: url('odfkit:"+$e+"');")+M(We,z)),he==="presentation")for(ke=(ke=R.getDirectChild(ke.parentNode.parentNode,_,"master-styles"))&&ke.firstElementChild;ke;)ke.namespaceURI===S&&ke.localName==="master-page"&&ke.getAttributeNS(S,"page-layout-name")===ue&&($e=ke.getAttributeNS(S,"name"),We='draw|page[draw|master-page-name="'+$e+'"] {'+Ve+"}",$e='office|body, draw|page[draw|master-page-name="'+$e+'"] {'+M(De,U)+" }",le.insertRule(We,le.cssRules.length),le.insertRule($e,le.cssRules.length)),ke=ke.nextElementSibling;else he==="text"&&(We="office|text {"+Ve+"}",$e="office|body {width: "+De.getAttributeNS(I,"page-width")+";}",le.insertRule(We,le.cssRules.length),le.insertRule($e,le.cssRules.length))}else{if(Ve=A(me,De,Me).join(","),ue="",ke=R.getDirectChild(Me.element,S,"text-properties")){var Se=ke,be=we="";switch(We="",$e=1,ke=""+M(Se,ee),Re=Se.getAttributeNS(S,"text-underline-style"),Re==="solid"&&(we+=" underline"),Re=Se.getAttributeNS(S,"text-line-through-style"),Re==="solid"&&(we+=" line-through"),we.length&&(ke=ke+("text-decoration:"+we+`;
`)+("text-decoration-line:"+we+`;
`),ke+="-moz-text-decoration-line:"+we+`;
`),Re=Se.getAttributeNS(S,"text-line-through-type"),Re){case"double":be+=" double";break;case"single":be+=" single"}if(be&&(ke+="text-decoration-style:"+be+`;
`,ke+="-moz-text-decoration-style:"+be+`;
`),(we=Se.getAttributeNS(S,"font-name")||Se.getAttributeNS(I,"font-family"))&&(Re=W[we],ke+="font-family: "+(Re||we)+";"),(Re=Se.getAttributeNS(S,"text-position"))&&(we=V.parseAttributeList(Re),Re=we[0],we=we[1],ke+="vertical-align: "+Re+`
; `,we&&($e=parseFloat(we)/100)),Se.hasAttributeNS(I,"font-size")||$e!==1){for(Se=Se.parentNode;Se;){if(Re=(Re=R.getDirectChild(Se,S,"text-properties"))?ie.parseFoFontSize(Re.getAttributeNS(I,"font-size")):null){if(Re.unit!=="%"){We="font-size: "+Re.value*$e+Re.unit+";";break}$e*=Re.value/100}Se=j(Se)}We||(We="font-size: "+parseFloat(Ne)*$e+rt.getUnits(Ne)+";")}ke+=We,ue+=ke}(ke=R.getDirectChild(Me.element,S,"paragraph-properties"))&&(We=ke,ke=""+M(We,P),($e=R.getDirectChild(We,S,"background-image"))&&(Se=$e.getAttributeNS(v,"href"))&&(ke=ke+("background-image: url('odfkit:"+Se+"');")+M($e,z)),(We=We.getAttributeNS(I,"line-height"))&&We!=="normal"&&(We=ie.parseFoLineHeight(We),ke=We.unit!=="%"?ke+("line-height: "+We.value+We.unit+";"):ke+("line-height: "+We.value/100+";")),ue+=ke),(ke=R.getDirectChild(Me.element,S,"graphic-properties"))&&(Se=ke,ke=""+M(Se,Y),We=Se.getAttributeNS(x,"opacity"),$e=Se.getAttributeNS(x,"fill"),Se=Se.getAttributeNS(x,"fill-color"),$e==="solid"||$e==="hatch"?Se&&Se!=="none"?(We=isNaN(parseFloat(We))?1:parseFloat(We)/100,$e=Se.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,w),(Se=($e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec($e))?{r:parseInt($e[1],16),g:parseInt($e[2],16),b:parseInt($e[3],16)}:null)&&(ke+="background-color: rgba("+Se.r+","+Se.g+","+Se.b+","+We+");")):ke+="background: none;":$e==="none"&&(ke+="background: none;"),ue+=ke),(ke=R.getDirectChild(Me.element,S,"drawing-page-properties"))&&(We=ke,$e=""+M(We,Y),We.getAttributeNS(m,"background-visible")==="true"&&($e+="background: none;"),ue+=$e,N(le,De,ke,Me)),(ke=R.getDirectChild(Me.element,S,"table-cell-properties"))&&(De=ue,ue=""+M(ke,$),ue=De+ue),(ke=R.getDirectChild(Me.element,S,"table-row-properties"))&&(De=ue,ue=""+M(ke,te),ue=De+ue),(ke=R.getDirectChild(Me.element,S,"table-column-properties"))&&(De=ue,ue=""+M(ke,J),ue=De+ue),(ke=R.getDirectChild(Me.element,S,"table-properties"))&&(De=ue,ue=""+M(ke,q),ke=ke.getAttributeNS(y,"border-model"),ke==="collapsing"?ue+="border-collapse:collapse;":ke==="separating"&&(ue+="border-collapse:separate;"),ue=De+ue),ue.length!==0&&le.insertRule(Ve+"{"+ue+"}",le.cssRules.length)}for(var Fe in Me.derivedStyles)Me.derivedStyles.hasOwnProperty(Fe)&&O(le,me,Fe,Me.derivedStyles[Fe])}var x=odf.Namespaces.drawns,I=odf.Namespaces.fons,_=odf.Namespaces.officens,S=odf.Namespaces.stylens,u=odf.Namespaces.svgns,y=odf.Namespaces.tablens,v=odf.Namespaces.xlinkns,m=odf.Namespaces.presentationns,R=core.DomUtils,V=new odf.StyleParseUtils,Z={graphic:"draw","drawing-page":"draw",paragraph:"text",presentation:"presentation",ruby:"text",section:"text",table:"table","table-cell":"table","table-column":"table","table-row":"table",text:"text",list:"text",page:"office"},ne={graphic:"circle connected control custom-shape ellipse frame g line measure page page-thumbnail path polygon polyline rect regular-polygon".split(" "),paragraph:"alphabetical-index-entry-template h illustration-index-entry-template index-source-style object-index-entry-template p table-index-entry-template table-of-content-entry-template user-index-entry-template".split(" "),presentation:"caption circle connector control custom-shape ellipse frame g line measure page-thumbnail path polygon polyline rect regular-polygon".split(" "),"drawing-page":"caption circle connector control page custom-shape ellipse frame g line measure page-thumbnail path polygon polyline rect regular-polygon".split(" "),ruby:["ruby","ruby-text"],section:"alphabetical-index bibliography illustration-index index-title object-index section table-of-content table-index user-index".split(" "),table:["background","table"],"table-cell":"body covered-table-cell even-columns even-rows first-column first-row last-column last-row odd-columns odd-rows table-cell".split(" "),"table-column":["table-column"],"table-row":["table-row"],text:"a index-entry-chapter index-entry-link-end index-entry-link-start index-entry-page-number index-entry-span index-entry-tab-stop index-entry-text index-title-template linenumbering-configuration list-level-style-number list-level-style-bullet outline-level-style span".split(" "),list:["list-item"]},ee=[[I,"color","color"],[I,"background-color","background-color"],[I,"font-weight","font-weight"],[I,"font-style","font-style"]],z=[[S,"repeat","background-repeat"]],P=[[I,"background-color","background-color"],[I,"text-align","text-align"],[I,"text-indent","text-indent"],[I,"padding","padding"],[I,"padding-left","padding-left"],[I,"padding-right","padding-right"],[I,"padding-top","padding-top"],[I,"padding-bottom","padding-bottom"],[I,"border-left","border-left"],[I,"border-right","border-right"],[I,"border-top","border-top"],[I,"border-bottom","border-bottom"],[I,"margin","margin"],[I,"margin-left","margin-left"],[I,"margin-right","margin-right"],[I,"margin-top","margin-top"],[I,"margin-bottom","margin-bottom"],[I,"border","border"]],Y=[[I,"background-color","background-color"],[I,"min-height","min-height"],[x,"stroke","border"],[u,"stroke-color","border-color"],[u,"stroke-width","border-width"],[I,"border","border"],[I,"border-left","border-left"],[I,"border-right","border-right"],[I,"border-top","border-top"],[I,"border-bottom","border-bottom"]],$=[[I,"background-color","background-color"],[I,"border-left","border-left"],[I,"border-right","border-right"],[I,"border-top","border-top"],[I,"border-bottom","border-bottom"],[I,"border","border"]],J=[[S,"column-width","width"]],te=[[S,"row-height","height"],[I,"keep-together",null]],q=[[S,"width","width"],[I,"margin-left","margin-left"],[I,"margin-right","margin-right"],[I,"margin-top","margin-top"],[I,"margin-bottom","margin-bottom"]],K=[[I,"background-color","background-color"],[I,"padding","padding"],[I,"padding-left","padding-left"],[I,"padding-right","padding-right"],[I,"padding-top","padding-top"],[I,"padding-bottom","padding-bottom"],[I,"border","border"],[I,"border-left","border-left"],[I,"border-right","border-right"],[I,"border-top","border-top"],[I,"border-bottom","border-bottom"],[I,"margin","margin"],[I,"margin-left","margin-left"],[I,"margin-right","margin-right"],[I,"margin-top","margin-top"],[I,"margin-bottom","margin-bottom"]],U=[[I,"page-width","width"],[I,"page-height","height"]],F={border:!0,"border-left":!0,"border-right":!0,"border-top":!0,"border-bottom":!0,"stroke-width":!0},re={margin:!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"margin-bottom":!0},W={},ie=odf.OdfUtils,he,ve,Ne,ze=xmldom.XPath,rt=new core.CSSUnits;this.style2css=function(le,me,De,Me,Re){function we($e,ue){ke="@namespace "+$e+" url("+ue+");";try{De.insertRule(ke,De.cssRules.length)}catch{}}var ke,Ve,We;for(ve=me;De.cssRules.length;)De.deleteRule(De.cssRules.length-1);odf.Namespaces.forEachPrefix(we),we("webodfhelper","urn:webodf:names:helper"),W=Me,he=le,Ne=runtime.getWindow().getComputedStyle(document.body,null).getPropertyValue("font-size")||"12pt";for(We in Z)if(Z.hasOwnProperty(We))for(Ve in le=Re[We],le)le.hasOwnProperty(Ve)&&O(De,We,Ve,le[Ve])}},function(){function A(j,M){var w=this;this.getDistance=function(E){var N=w.x-E.x;return E=w.y-E.y,Math.sqrt(N*N+E*E)},this.getCenter=function(E){return new A((w.x+E.x)/2,(w.y+E.y)/2)},w.x=j,w.y=M}gui.ZoomHelper=function(){function j(te,q,K,U){te=U?"translate3d("+te+"px, "+q+"px, 0) scale3d("+K+", "+K+", 1)":"translate("+te+"px, "+q+"px) scale("+K+")",y.style.WebkitTransform=te,y.style.MozTransform=te,y.style.msTransform=te,y.style.OTransform=te,y.style.transform=te}function M(te){te?j(-v.x,-v.y,V,!0):(j(0,0,V,!0),j(0,0,V,!1))}function w(te){if(ne&&$){var q=ne.style.overflow,K=ne.classList.contains("webodf-customScrollbars");te&&K||!te&&!K||(te?(ne.classList.add("webodf-customScrollbars"),ne.style.overflow="hidden",runtime.requestAnimationFrame(function(){ne.style.overflow=q})):ne.classList.remove("webodf-customScrollbars"))}}function E(){j(-v.x,-v.y,V,!0),ne.scrollLeft=0,ne.scrollTop=0,J=ee.style.overflow,ee.style.overflow="visible",w(!1)}function N(){j(0,0,V,!0),ne.scrollLeft=v.x,ne.scrollTop=v.y,ee.style.overflow=J||"",w(!0)}function O(te){return new A(te.pageX-y.offsetLeft,te.pageY-y.offsetTop)}function x(te){if(m){v.x-=te.x-m.x,v.y-=te.y-m.y;var q=v;v=new A(Math.min(Math.max(q.x,y.offsetLeft),(y.offsetLeft+y.offsetWidth)*V-ne.clientWidth),Math.min(Math.max(q.y,y.offsetTop),(y.offsetTop+y.offsetHeight)*V-ne.clientHeight))}m=te}function I(te){var q=te.touches.length,K=0<q?O(te.touches[0]):null;te=1<q?O(te.touches[1]):null,K&&te?(R=K.getDistance(te),Z=V,m=K.getCenter(te),E(),Y=P.PINCH):K&&(m=K,Y=P.SCROLL)}function _(te){var K=te.touches.length,q=0<K?O(te.touches[0]):null,K=1<K?O(te.touches[1]):null;if(q&&K)if(te.preventDefault(),Y===P.SCROLL)Y=P.PINCH,E(),R=q.getDistance(K);else{te=q.getCenter(K),q=q.getDistance(K)/R,x(te);var K=V,U=Math.min(4,y.offsetParent.clientWidth/y.offsetWidth);V=Z*q,V=Math.min(Math.max(V,U),4),q=V/K,v.x+=(q-1)*(te.x+v.x),v.y+=(q-1)*(te.y+v.y),M(!0)}else q&&(Y===P.PINCH?(Y=P.SCROLL,N()):x(q))}function S(){Y===P.PINCH&&(z.emit(gui.ZoomHelper.signalZoomChanged,V),N(),M(!1)),Y=P.NONE}function u(){ne&&(ne.removeEventListener("touchstart",I,!1),ne.removeEventListener("touchmove",_,!1),ne.removeEventListener("touchend",S,!1))}var y,v,m,R,V,Z,ne,ee,z=new core.EventNotifier([gui.ZoomHelper.signalZoomChanged]),P={NONE:0,SCROLL:1,PINCH:2},Y=P.NONE,$=runtime.getWindow().hasOwnProperty("ontouchstart"),J="";this.subscribe=function(te,q){z.subscribe(te,q)},this.unsubscribe=function(te,q){z.unsubscribe(te,q)},this.getZoomLevel=function(){return V},this.setZoomLevel=function(te){y&&(V=te,M(!1),z.emit(gui.ZoomHelper.signalZoomChanged,V))},this.destroy=function(te){u(),w(!1),te()},this.setZoomableElement=function(te){u(),y=te,ne=y.offsetParent,ee=y.parentNode,M(!1),ne&&(ne.addEventListener("touchstart",I,!1),ne.addEventListener("touchmove",_,!1),ne.addEventListener("touchend",S,!1)),w(!0)},Z=V=1,v=new A(0,0)},gui.ZoomHelper.signalZoomChanged="zoomChanged"}(),ops.Canvas=function(){},ops.Canvas.prototype.getZoomLevel=function(){},ops.Canvas.prototype.getElement=function(){},ops.Canvas.prototype.getSizer=function(){},ops.Canvas.prototype.getZoomHelper=function(){},function(){function A(){function U(W){re=!0,runtime.setTimeout(function(){try{W()}catch(ie){runtime.log(String(ie)+`
`+ie.stack)}re=!1,0<F.length&&U(F.pop())},10)}var F=[],re=!1;this.clearQueue=function(){F.length=0},this.addToQueue=function(W){if(F.length===0&&!re)return U(W);F.push(W)}}function j(U){function F(){for(;0<re.cssRules.length;)re.deleteRule(0);re.insertRule("#shadowContent draw|page {display:none;}",0),re.insertRule("office|presentation draw|page {display:none;}",1),re.insertRule("#shadowContent draw|page:nth-of-type("+W+") {display:block;}",2),re.insertRule("office|presentation draw|page:nth-of-type("+W+") {display:block;}",3)}var re=U.sheet,W=1;this.showFirstPage=function(){W=1,F()},this.showNextPage=function(){W+=1,F()},this.showPreviousPage=function(){1<W&&(--W,F())},this.showPage=function(ie){0<ie&&(W=ie,F())},this.css=U,this.destroy=function(ie){U.parentNode.removeChild(U),ie()}}function M(U){U=U.sheet;for(var F=U.cssRules;F.length;)U.deleteRule(F.length-1)}function w(U,F,re){var W=new odf.Style2CSS,ie=new odf.ListStyleToCss;re=re.sheet;var he=new odf.StyleTree(U.rootElement.styles,U.rootElement.automaticStyles).getStyleTree();W.style2css(U.getDocumentType(),U.rootElement,re,F.getFontMap(),he),ie.applyListStyles(re,he,U.rootElement.body)}function E(U,F){new odf.FontLoader().loadFonts(U,F.sheet)}function N(U,F,re){var W=null;U=U.rootElement.body.getElementsByTagNameNS(te,re+"-decl"),re=F.getAttributeNS(te,"use-"+re+"-name");var ie;if(re&&0<U.length){for(F=0;F<U.length;F+=1)if(ie=U[F],ie.getAttributeNS(te,"name")===re){W=ie.textContent;break}}return W}function O(U,F,re,W){var ie=U.ownerDocument;for(F=K.getElementsByTagNameNS(U,F,re),U=0;U<F.length;U+=1)K.removeAllChildNodes(F[U]),W&&(re=F[U],re.appendChild(ie.createTextNode(W)))}function x(U,F,re){F.setAttributeNS("urn:webodf:names:helper","styleid",U);var W,ie=F.getAttributeNS($,"anchor-type"),he=F.getAttributeNS(P,"x"),ve=F.getAttributeNS(P,"y"),Ne=F.getAttributeNS(P,"width"),ze=F.getAttributeNS(P,"height"),rt=F.getAttributeNS(ne,"min-height"),le=F.getAttributeNS(ne,"min-width");ie==="as-char"?W="display: inline-block;":ie||he||ve?W="position: absolute;":(Ne||ze||rt||le)&&(W="display: block;"),he&&(W+="left: "+he+";"),ve&&(W+="top: "+ve+";"),Ne&&(W+="width: "+Ne+";"),ze&&(W+="height: "+ze+";"),rt&&(W+="min-height: "+rt+";"),le&&(W+="min-width: "+le+";"),W&&(W="draw|"+F.localName+'[webodfhelper|styleid="'+U+'"] {'+W+"}",re.insertRule(W,re.cssRules.length))}function I(U){for(U=U.firstChild;U;){if(U.namespaceURI===ee&&U.localName==="binary-data")return"data:image/png;base64,"+U.textContent.replace(/[\r\n\s]/g,"");U=U.nextSibling}return""}function _(U,F,re,W){function ie(ze){ze&&(ze='draw|image[webodfhelper|styleid="'+U+'"] {'+("background-image: url("+ze+");")+"}",W.insertRule(ze,W.cssRules.length))}function he(ze){ie(ze.url)}re.setAttributeNS("urn:webodf:names:helper","styleid",U);var ve=re.getAttributeNS(J,"href"),Ne;if(ve)try{Ne=F.getPart(ve),Ne.onchange=he,Ne.load()}catch(ze){runtime.log("slight problem: "+String(ze))}else ve=I(re),ie(ve)}function S(U){var F=U.ownerDocument;K.getElementsByTagNameNS(U,$,"line-break").forEach(function(re){re.hasChildNodes()||re.appendChild(F.createElement("br"))})}function u(U){var F=U.ownerDocument;K.getElementsByTagNameNS(U,$,"s").forEach(function(re){var W,ie;if(K.removeAllChildNodes(re),re.appendChild(F.createTextNode(" ")),ie=parseInt(re.getAttributeNS($,"c"),10),1<ie)for(re.removeAttributeNS($,"c"),W=1;W<ie;W+=1)re.parentNode.insertBefore(re.cloneNode(!0),re)})}function y(U){K.getElementsByTagNameNS(U,$,"tab").forEach(function(F){F.textContent="	"})}function v(U,F){function re(rt,le){var me=Ne.documentElement.namespaceURI;le.substr(0,6)==="video/"?(ie=Ne.createElementNS(me,"video"),ie.setAttribute("controls","controls"),he=Ne.createElementNS(me,"source"),rt&&he.setAttribute("src",rt),he.setAttribute("type",le),ie.appendChild(he),F.parentNode.appendChild(ie)):F.innerHtml="Unrecognised Plugin"}function W(rt){re(rt.url,rt.mimetype)}var ie,he,ve,Ne=F.ownerDocument,ze;if(ve=F.getAttributeNS(J,"href"))try{ze=U.getPart(ve),ze.onchange=W,ze.load()}catch(rt){runtime.log("slight problem: "+String(rt))}else runtime.log("using MP4 data fallback"),ve=I(F),re(ve,"video/mp4")}function m(U){var F=U.getElementsByTagName("head")[0],re,W;for(re=U.styleSheets.length,W=F.firstElementChild;W&&(W.localName!=="style"||!W.hasAttribute("webodfcss"));)W=W.nextElementSibling;return W?(re=parseInt(W.getAttribute("webodfcss"),10),W.setAttribute("webodfcss",re+1),W):(typeof webodf_css=="string"?re=webodf_css:(W="webodf.css",runtime.currentDirectory&&(W=runtime.currentDirectory(),0<W.length&&W.substr(-1)!=="/"&&(W+="/"),W+="../webodf.css"),re=runtime.readFileSync(W,"utf-8")),W=U.createElementNS(F.namespaceURI,"style"),W.setAttribute("media","screen, print, handheld, projection"),W.setAttribute("type","text/css"),W.setAttribute("webodfcss","1"),W.appendChild(U.createTextNode(re)),F.appendChild(W),W)}function R(U){var F=parseInt(U.getAttribute("webodfcss"),10);F===1?U.parentNode.removeChild(U):U.setAttribute("count",F-1)}function V(U){var F=U.getElementsByTagName("head")[0],re=U.createElementNS(F.namespaceURI,"style"),W="";return re.setAttribute("type","text/css"),re.setAttribute("media","screen, print, handheld, projection"),odf.Namespaces.forEachPrefix(function(ie,he){W+="@namespace "+ie+" url("+he+`);
`}),W+=`@namespace webodfhelper url(urn:webodf:names:helper);
`,re.appendChild(U.createTextNode(W)),F.appendChild(re),re}var Z=odf.Namespaces.drawns,ne=odf.Namespaces.fons,ee=odf.Namespaces.officens,z=odf.Namespaces.stylens,P=odf.Namespaces.svgns,Y=odf.Namespaces.tablens,$=odf.Namespaces.textns,J=odf.Namespaces.xlinkns,te=odf.Namespaces.presentationns,q=xmldom.XPath,K=core.DomUtils;odf.OdfCanvas=function(U,F){function re(et,ct,It){function at(Je,ei,ki,ti){$t.addToQueue(function(){_(Je,ei,ki,ti)})}var vt,Ke;for(vt=ct.getElementsByTagNameNS(Z,"image"),ct=0;ct<vt.length;ct+=1)Ke=vt.item(ct),at("image"+String(ct),et,Ke,It)}function W(et,ct){function It(Je,ei){$t.addToQueue(function(){v(Je,ei)})}var at,vt,Ke;for(vt=ct.getElementsByTagNameNS(Z,"plugin"),at=0;at<vt.length;at+=1)Ke=vt.item(at),It(et,Ke)}function ie(){var et;et=Re.firstChild;var ct=Rt.getZoomLevel();et&&(Re.style.WebkitTransformOrigin="0% 0%",Re.style.MozTransformOrigin="0% 0%",Re.style.msTransformOrigin="0% 0%",Re.style.OTransformOrigin="0% 0%",Re.style.transformOrigin="0% 0%",We&&((et=We.getMinimumHeightForAnnotationPane())?Re.style.minHeight=et:Re.style.removeProperty("min-height")),U.style.width=Math.round(ct*Re.offsetWidth)+"px",U.style.height=Math.round(ct*Re.offsetHeight)+"px",U.style.display="inline-block")}function he(et,ct){var It=be.sheet;K.removeAllChildNodes(U),Re=le.createElementNS(U.namespaceURI,"div"),Re.style.display="inline-block",Re.style.background="white",Re.style.setProperty("float","left","important"),Re.appendChild(ct),U.appendChild(Re),we=le.createElementNS(U.namespaceURI,"div"),we.id="annotationsPane",Fe=le.createElementNS(U.namespaceURI,"div"),Fe.id="shadowContent",Fe.style.position="absolute",Fe.style.top=0,Fe.style.left=0,et.getContentElement().appendChild(Fe);var at=ct.body,vt,Ke=[],Je;for(vt=at.firstElementChild;vt&&vt!==at;)if(vt.namespaceURI===Z&&(Ke[Ke.length]=vt),vt.firstElementChild)vt=vt.firstElementChild;else{for(;vt&&vt!==at&&!vt.nextElementSibling;)vt=vt.parentNode;vt&&vt.nextElementSibling&&(vt=vt.nextElementSibling)}for(Je=0;Je<Ke.length;Je+=1)vt=Ke[Je],x("frame"+String(Je),vt,It);for(Ke=q.getODFElementsWithXPath(at,".//*[*[@text:anchor-type='paragraph']]",odf.Namespaces.lookupNamespaceURI),vt=0;vt<Ke.length;vt+=1)at=Ke[vt],at.setAttributeNS&&at.setAttributeNS("urn:webodf:names:helper","containsparagraphanchor",!0);at=De,vt=Fe;var ei,ki,ti,je,Xe=0,_t;if(Je=et.rootElement.ownerDocument,(Ke=ct.body.firstElementChild)&&Ke.namespaceURI===ee&&(Ke.localName==="presentation"||Ke.localName==="drawing"))for(Ke=Ke.firstElementChild;Ke;){if(ei=(ei=Ke.getAttributeNS(Z,"master-page-name"))?at.getMasterPageElement(ei):null){for(ki=Ke.getAttributeNS("urn:webodf:names:helper","styleid"),ti=Je.createElementNS(Z,"draw:page"),_t=ei.firstElementChild,Xe=0;_t;)_t.getAttributeNS(te,"placeholder")!=="true"&&(je=_t.cloneNode(!0),ti.appendChild(je)),_t=_t.nextElementSibling,Xe+=1;_t=je=Xe=void 0;for(var fe=K.getElementsByTagNameNS(ti,Z,"frame"),Xe=0;Xe<fe.length;Xe+=1)je=fe[Xe],(_t=je.getAttributeNS(te,"class"))&&!/^(date-time|footer|header|page-number)$/.test(_t)&&je.parentNode.removeChild(je);for(je=K.getElementsByTagNameNS(ti,Z,"*"),Xe=0;Xe<je.length;Xe+=1)x(ki+"_"+Xe,je[Xe],It);vt.appendChild(ti),Xe=String(vt.getElementsByTagNameNS(Z,"page").length),O(ti,$,"page-number",Xe),O(ti,te,"header",N(et,Ke,"header")),O(ti,te,"footer",N(et,Ke,"footer")),x(ki,ti,It),ti.setAttributeNS("urn:webodf:names:helper","page-style-name",Ke.getAttributeNS(Z,"style-name")),ti.setAttributeNS(Z,"draw:master-page-name",ei.getAttributeNS(z,"name"))}Ke=Ke.nextElementSibling}for(at=U.namespaceURI,Ke=K.getElementsByTagNameNS(ct.body,Y,"table-cell"),vt=0;vt<Ke.length;vt+=1)Je=Ke[vt],Je.hasAttributeNS(Y,"number-columns-spanned")&&Je.setAttributeNS(at,"colspan",Je.getAttributeNS(Y,"number-columns-spanned")),Je.hasAttributeNS(Y,"number-rows-spanned")&&Je.setAttributeNS(at,"rowspan",Je.getAttributeNS(Y,"number-rows-spanned"));S(ct.body),u(ct.body),y(ct.body),re(et,ct.body,It),W(et,ct.body),Re.insertBefore(Fe,Re.firstChild),Rt.setZoomableElement(Re)}function ve(et){ke?(we.parentNode||Re.appendChild(we),We&&We.forgetAnnotations(),We=new gui.AnnotationViewManager(rt,et.body,we,Ve),et=K.getElementsByTagNameNS(et.body,ee,"annotation"),We.addAnnotations(et),ie()):we.parentNode&&(Re.removeChild(we),We.forgetAnnotations(),ie())}function Ne(et){function ct(){M(ue),M(Se),M(be),K.removeAllChildNodes(U),U.style.display="inline-block";var It=me.rootElement;U.ownerDocument.importNode(It,!0),De.setOdfContainer(me),E(me,ue),w(me,De,Se),he(me,It),ve(It),et||$t.addToQueue(function(){var at=[me];if(ut.hasOwnProperty("statereadychange")){var vt=ut.statereadychange,Ke;for(Ke=0;Ke<vt.length;Ke+=1)vt[Ke].apply(null,at)}})}me.state===odf.OdfContainer.DONE?ct():(runtime.log("WARNING: refreshOdf called but ODF was not DONE."),Pt=runtime.setTimeout(function It(){me.state===odf.OdfContainer.DONE?ct():(runtime.log("will be back later..."),Pt=runtime.setTimeout(It,500))},100))}function ze(et){$t.clearQueue(),K.removeAllChildNodes(U),U.appendChild(U.ownerDocument.createTextNode(runtime.tr("Loading")+et+"...")),U.removeAttribute("style"),me=new odf.OdfContainer(et,function(ct){me=ct,Ne(!1)})}runtime.assert(U!=null,"odf.OdfCanvas constructor needs DOM element"),runtime.assert(U.ownerDocument!==null&&U.ownerDocument!==void 0,"odf.OdfCanvas constructor needs DOM");var rt=this,le=U.ownerDocument,me,De=new odf.Formatting,Me,Re=null,we=null,ke=!1,Ve=!1,We=null,$e,ue,Se,be,Fe,ut={},Pt,yt,At=!1,ri=!1,$t=new A,Rt=new gui.ZoomHelper,zt=F||new gui.SingleScrollViewport(U.parentNode);this.refreshCSS=function(){At=!0,yt.trigger()},this.refreshSize=function(){yt.trigger()},this.odfContainer=function(){return me},this.setOdfContainer=function(et,ct){me=et,Ne(ct===!0)},this.load=this.load=ze,this.save=function(et){me.save(et)},this.addListener=function(et,ct){switch(et){case"click":var It=et;U.addEventListener?U.addEventListener(It,ct,!1):U.attachEvent?U.attachEvent("on"+It,ct):U["on"+It]=ct;break;default:It=ut.hasOwnProperty(et)?ut[et]:ut[et]=[],ct&&It.indexOf(ct)===-1&&It.push(ct)}},this.getFormatting=function(){return De},this.getAnnotationViewManager=function(){return We},this.refreshAnnotations=function(){ve(me.rootElement)},this.rerenderAnnotations=function(){We&&(ri=!0,yt.trigger())},this.getSizer=function(){return Re},this.enableAnnotations=function(et,ct){et!==ke&&(ke=et,Ve=ct,me&&ve(me.rootElement))},this.addAnnotation=function(et){We&&(We.addAnnotations([et]),ie())},this.forgetAnnotation=function(et){We&&(We.forgetAnnotation(et),ie())},this.getZoomHelper=function(){return Rt},this.setZoomLevel=function(et){Rt.setZoomLevel(et)},this.getZoomLevel=function(){return Rt.getZoomLevel()},this.fitToContainingElement=function(et,ct){var at=Rt.getZoomLevel(),It=U.offsetHeight/at,at=et/(U.offsetWidth/at);ct/It<at&&(at=ct/It),Rt.setZoomLevel(at)},this.fitToWidth=function(et){var ct=U.offsetWidth/Rt.getZoomLevel();Rt.setZoomLevel(et/ct)},this.fitSmart=function(et,ct){var It,at;at=Rt.getZoomLevel(),It=U.offsetWidth/at,at=U.offsetHeight/at,It=et/It,ct!==void 0&&ct/at<It&&(It=ct/at),Rt.setZoomLevel(Math.min(1,It))},this.fitToHeight=function(et){var ct=U.offsetHeight/Rt.getZoomLevel();Rt.setZoomLevel(et/ct)},this.showFirstPage=function(){Me.showFirstPage()},this.showNextPage=function(){Me.showNextPage()},this.showPreviousPage=function(){Me.showPreviousPage()},this.showPage=function(et){Me.showPage(et),ie()},this.getElement=function(){return U},this.getViewport=function(){return zt},this.addCssForFrameWithImage=function(et){var ct=et.getAttributeNS(Z,"name"),It=et.firstElementChild;x(ct,et,be.sheet),It&&_(ct+"img",me,It,be.sheet)},this.destroy=function(et){var ct=le.getElementsByTagName("head")[0],It=[Me.destroy,yt.destroy];runtime.clearTimeout(Pt),we&&we.parentNode&&we.parentNode.removeChild(we),Rt.destroy(function(){Re&&(U.removeChild(Re),Re=null)}),R($e),ct.removeChild(ue),ct.removeChild(Se),ct.removeChild(be),core.Async.destroyAll(It,et)},$e=m(le),Me=new j(V(le)),ue=V(le),Se=V(le),be=V(le),yt=core.Task.createRedrawTask(function(){At&&(w(me,De,Se),At=!1),ri&&(We&&We.rerenderAnnotations(),ri=!1),ie()}),Rt.subscribe(gui.ZoomHelper.signalZoomChanged,ie)}}(),odf.StepUtils=function(){this.getContentBounds=function(A){var j=A.container(),M,w;return runtime.assert(A.isStep(),"Step iterator must be on a step"),j.nodeType===Node.TEXT_NODE&&0<A.offset()?M=A.offset():(j=A.leftNode())&&j.nodeType===Node.TEXT_NODE&&(M=j.length),j&&(j.nodeType===Node.TEXT_NODE?(runtime.assert(0<M,"Empty text node found"),w={container:j,startOffset:M-1,endOffset:M}):w={container:j,startOffset:0,endOffset:j.childNodes.length}),w}},ops.MemberProperties=function(){},ops.Member=function(A,j){var M=new ops.MemberProperties;this.getMemberId=function(){return A},this.getProperties=function(){return M},this.setProperties=function(w){Object.keys(w).forEach(function(E){M[E]=w[E]})},this.removeProperties=function(w){Object.keys(w).forEach(function(E){E!=="fullName"&&E!=="color"&&E!=="imageUrl"&&M.hasOwnProperty(E)&&delete M[E]})},runtime.assert(!!A,"No memberId was supplied!"),j.fullName||(j.fullName=runtime.tr("Unknown Author")),j.color||(j.color="black"),j.imageUrl||(j.imageUrl="avatar-joe.png"),M=j},ops.Document=function(){},ops.Document.prototype.getMemberIds=function(){},ops.Document.prototype.removeCursor=function(A){},ops.Document.prototype.getDocumentElement=function(){},ops.Document.prototype.getRootNode=function(){},ops.Document.prototype.getDOMDocument=function(){},ops.Document.prototype.cloneDocumentElement=function(){},ops.Document.prototype.setDocumentElement=function(A){},ops.Document.prototype.subscribe=function(A,j){},ops.Document.prototype.unsubscribe=function(A,j){},ops.Document.prototype.getCanvas=function(){},ops.Document.prototype.createRootFilter=function(A){},ops.Document.prototype.createPositionIterator=function(A){},ops.Document.prototype.hasCursor=function(A){},ops.Document.signalCursorAdded="cursor/added",ops.Document.signalCursorRemoved="cursor/removed",ops.Document.signalCursorMoved="cursor/moved",ops.Document.signalMemberAdded="member/added",ops.Document.signalMemberUpdated="member/updated",ops.Document.signalMemberRemoved="member/removed",ops.OdtCursor=function(A,j){var M=this,w={},E,N,O=new core.EventNotifier([ops.OdtCursor.signalCursorUpdated]);this.removeFromDocument=function(){N.remove()},this.subscribe=function(x,I){O.subscribe(x,I)},this.unsubscribe=function(x,I){O.unsubscribe(x,I)},this.getMemberId=function(){return A},this.getNode=function(){return N.getNode()},this.getAnchorNode=function(){return N.getAnchorNode()},this.getSelectedRange=function(){return N.getSelectedRange()},this.setSelectedRange=function(x,I){N.setSelectedRange(x,I),O.emit(ops.OdtCursor.signalCursorUpdated,M)},this.hasForwardSelection=function(){return N.hasForwardSelection()},this.getDocument=function(){return j},this.getSelectionType=function(){return E},this.setSelectionType=function(x){w.hasOwnProperty(x)?E=x:runtime.log("Invalid selection type: "+x)},this.resetSelectionType=function(){M.setSelectionType(ops.OdtCursor.RangeSelection)},N=new core.Cursor(j.getDOMDocument(),A),w[ops.OdtCursor.RangeSelection]=!0,w[ops.OdtCursor.RegionSelection]=!0,M.resetSelectionType()},ops.OdtCursor.RangeSelection="Range",ops.OdtCursor.RegionSelection="Region",ops.OdtCursor.signalCursorUpdated="cursorUpdated",function(){var A=0;ops.StepsCache=function(j,M,w){function E(z,P){var Y=this;this.nodeId=z,this.steps=-1,this.node=P,this.previousBookmark=this.nextBookmark=null,this.setIteratorPosition=function($){$.setPositionBeforeElement(P),w(Y.steps,$)}}function N(z,P,Y){var $=this;this.nodeId=z,this.steps=P,this.node=Y,this.previousBookmark=this.nextBookmark=null,this.setIteratorPosition=function(J){J.setUnfilteredPosition(Y,0),w($.steps,J)}}function O(z,P){var Y="["+z.nodeId;return P&&(Y+=" => "+P.nodeId),Y+"]"}function x(){if(ops.StepsCache.ENABLE_CACHE_VERIFICATION===!0){for(var z=V,P,Y,$,J=new core.LoopWatchDog(0,1e5),te={};z;)J.check(),(P=z.previousBookmark)?runtime.assert(P.nextBookmark===z,"Broken bookmark link to previous @"+O(P,z)):(runtime.assert(z===V,"Broken bookmark link @"+O(z)),runtime.assert(Z===void 0||V===V||V.steps<=Z,"Base point is damaged @"+O(z))),(Y=z.nextBookmark)&&runtime.assert(Y.previousBookmark===z,"Broken bookmark link to next @"+O(z,Y)),(Z===void 0||z===V||z.steps<=Z)&&(runtime.assert(R.containsNode(j,z.node),"Disconnected node is being reported as undamaged @"+O(z)),P&&($=z.node.compareDocumentPosition(P.node),runtime.assert($===0||($&ee)!==0,"Bookmark order with previous does not reflect DOM order @"+O(P,z))),Y&&R.containsNode(j,Y.node)&&($=z.node.compareDocumentPosition(Y.node),runtime.assert($===0||($&ne)!==0,"Bookmark order with next does not reflect DOM order @"+O(z,Y)))),z=z.nextBookmark;Object.keys(v).forEach(function(q){var K=v[q];(Z===void 0||q<=Z)&&runtime.assert(K.steps<=q,"Bookmark step of "+K.steps+" exceeds cached step lookup for "+q+" @"+O(K)),runtime.assert(te.hasOwnProperty(K.nodeId)===!1,"Bookmark "+O(K)+" appears twice in cached step lookup at steps "+te[K.nodeId]+" and "+q),te[K.nodeId]=q})}}function I(z){var P="";return z.nodeType===Node.ELEMENT_NODE&&(P=z.getAttributeNS("urn:webodf:names:steps","nodeId")||""),P}function _(z){var P=A.toString();return z.setAttributeNS("urn:webodf:names:steps","nodeId",P),A+=1,P}function S(z){var P,Y,$=new core.LoopWatchDog(0,1e4);for(Z!==void 0&&z>Z&&(z=Z),P=Math.floor(z/M)*M;!Y&&0<=P;)Y=v[P],P-=M;for(Y=Y||V;Y.nextBookmark&&Y.nextBookmark.steps<=z;)$.check(),Y=Y.nextBookmark;return runtime.assert(z===-1||Y.steps<=z,"Bookmark @"+O(Y)+" at step "+Y.steps+" exceeds requested step of "+z),Y}function u(z){z.previousBookmark&&(z.previousBookmark.nextBookmark=z.nextBookmark),z.nextBookmark&&(z.nextBookmark.previousBookmark=z.previousBookmark)}function y(z){for(var P,Y=null;!Y&&z&&z!==j;)(P=I(z))&&(Y=m[P])&&Y.node!==z&&(runtime.log("Cloned node detected. Creating new bookmark"),Y=null,z.removeAttributeNS("urn:webodf:names:steps","nodeId")),z=z.parentNode;return Y}var v={},m={},R=core.DomUtils,V,Z,ne=Node.DOCUMENT_POSITION_FOLLOWING,ee=Node.DOCUMENT_POSITION_PRECEDING;this.updateBookmark=function(z,P){var Y,$=Math.ceil(z/M)*M,J,te,q;if(Z!==void 0&&Z<z){for(J=S(Z),te=J.nextBookmark;te&&te.steps<=z;)Y=te.nextBookmark,q=Math.ceil(te.steps/M)*M,v[q]===te&&delete v[q],R.containsNode(j,te.node)?te.steps=z+1:(u(te),delete m[te.nodeId]),te=Y;Z=z}else J=S(z);if(te=I(P)||_(P),Y=m[te],Y?Y.node!==P&&(runtime.log("Cloned node detected. Creating new bookmark"),te=_(P),Y=m[te]=new E(te,P)):Y=m[te]=new E(te,P),te=Y,te.steps!==z&&(Y=Math.ceil(te.steps/M)*M,Y!==$&&v[Y]===te&&delete v[Y],te.steps=z),J!==te&&J.nextBookmark!==te){if(J.steps===te.steps)for(;te.node.compareDocumentPosition(J.node)&ne&&J!==V;)J=J.previousBookmark;J!==te&&J.nextBookmark!==te&&(u(te),Y=J.nextBookmark,te.nextBookmark=J.nextBookmark,te.previousBookmark=J,J.nextBookmark=te,Y&&(Y.previousBookmark=te))}J=v[$],(!J||te.steps>J.steps)&&(v[$]=te),x()},this.setToClosestStep=function(z,P){var Y;return x(),Y=S(z),Y.setIteratorPosition(P),Y.steps},this.setToClosestDomPoint=function(z,P,Y){var $,J;if(x(),z===j&&P===0)$=V;else if(z===j&&P===j.childNodes.length)for(J in $=V,v)v.hasOwnProperty(J)&&(z=v[J],z.steps>$.steps&&($=z));else if($=y(z.childNodes.item(P)||z),!$)for(Y.setUnfilteredPosition(z,P);!$&&Y.previousNode();)$=y(Y.getCurrentNode());return $=$||V,Z!==void 0&&$.steps>Z&&($=S(Z)),$.setIteratorPosition(Y),$.steps},this.damageCacheAfterStep=function(z){0>z&&(z=-1),(Z===void 0||z<Z)&&(Z=z),x()},function(){var z=I(j)||_(j);V=new N(z,0,j)}()},ops.StepsCache.ENABLE_CACHE_VERIFICATION=!1,ops.StepsCache.Bookmark=function(){},ops.StepsCache.Bookmark.prototype.setIteratorPosition=function(j){}}(),function(){ops.OdtStepsTranslator=function(A,j,M,w){function E(y,v,m){var R=v.getCurrentNode();v.isBeforeNode()&&x.isParagraph(R)&&(m||(y+=1),O.updateBookmark(y,R))}function N(y,v){if(!v||M.acceptPosition(y)===_)return!0;for(;y.previousPosition();)if(M.acceptPosition(y)===_){if(v(S,y.container(),y.unfilteredDomOffset()))return!0;break}for(;y.nextPosition();)if(M.acceptPosition(y)===_){if(v(u,y.container(),y.unfilteredDomOffset()))return!0;break}return!1}var O,x=odf.OdfUtils,I=core.DomUtils,_=core.PositionFilter.FilterResult.FILTER_ACCEPT,S=core.StepDirection.PREVIOUS,u=core.StepDirection.NEXT;this.convertStepsToDomPoint=function(y){var v,m;if(isNaN(y))throw new TypeError("Requested steps is not numeric ("+y+")");if(0>y)throw new RangeError("Requested steps is negative ("+y+")");for(v=O.setToClosestStep(y,j);v<y&&j.nextPosition();)(m=M.acceptPosition(j)===_)&&(v+=1),E(v,j,m);if(v!==y)throw new RangeError("Requested steps ("+y+") exceeds available steps ("+v+")");return{node:j.container(),offset:j.unfilteredDomOffset()}},this.convertDomPointToSteps=function(y,v,m){var R;if(I.containsNode(A,y)||(v=0>I.comparePoints(A,0,y,v),y=A,v=v?0:A.childNodes.length),j.setUnfilteredPosition(y,v),N(j,m)||j.setUnfilteredPosition(y,v),m=j.container(),v=j.unfilteredDomOffset(),y=O.setToClosestDomPoint(m,v,j),0>I.comparePoints(j.container(),j.unfilteredDomOffset(),m,v))return 0<y?y-1:y;for(;(j.container()!==m||j.unfilteredDomOffset()!==v)&&j.nextPosition();)(R=M.acceptPosition(j)===_)&&(y+=1),E(y,j,R);return y+0},this.prime=function(){var y,v;for(y=O.setToClosestStep(0,j);j.nextPosition();)(v=M.acceptPosition(j)===_)&&(y+=1),E(y,j,v)},this.handleStepsInserted=function(y){O.damageCacheAfterStep(y.position)},this.handleStepsRemoved=function(y){O.damageCacheAfterStep(y.position-1)},O=new ops.StepsCache(A,w,function(y,v){do{if(M.acceptPosition(v)===_){E(y,v,!0);break}E(y-1,v,!1)}while(v.nextPosition())})}}(),ops.Operation=function(){},ops.Operation.prototype.init=function(A){},ops.Operation.prototype.execute=function(A){},ops.Operation.prototype.spec=function(){},ops.TextPositionFilter=function(){function A(x,I){for(;x&&I(x)!==N;)x=x.previousSibling;return x}function j(x,I,_,S){var u;if(I){if(M.isInlineRoot(I)&&M.isGroupingElement(_))return O;if(S=M.lookLeftForCharacter(I),S===1||S===2&&(M.scanRightForAnyCharacter(_)||M.scanRightForAnyCharacter(M.nextNode(x))))return N}else if(M.isGroupingElement(x)&&M.isInlineRoot(A(x.previousSibling,S)))return N;return S=I===null&&M.isParagraph(x),u=M.lookRightForCharacter(_),S?u?N:M.scanRightForAnyCharacter(_)?O:N:u?(I=I||M.previousNode(x),M.scanLeftForAnyCharacter(I)?O:N):O}var M=odf.OdfUtils,w=Node.ELEMENT_NODE,E=Node.TEXT_NODE,N=core.PositionFilter.FilterResult.FILTER_ACCEPT,O=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(x){var I=x.container(),_=I.nodeType,S,u,y;if(_!==w&&_!==E)return O;if(_===E){if(_=x.unfilteredDomOffset(),S=I.data,runtime.assert(_!==S.length,"Unexpected offset."),0<_){if(x=S[_-1],!M.isODFWhitespace(x))return N;if(1<_){if(x=S[_-2],!M.isODFWhitespace(x))y=N;else if(!M.isODFWhitespace(S.substr(0,_)))return O}else u=M.previousNode(I),M.scanLeftForNonSpace(u)&&(y=N);return y===N?M.isTrailingWhitespace(I,_)?O:N:(x=S[_],M.isODFWhitespace(x)||M.scanLeftForAnyCharacter(M.previousNode(I))?O:N)}u=x.leftNode(),y=I,I=I.parentNode,y=j(I,u,y,x.getNodeFilter())}else M.isGroupingElement(I)?(u=x.leftNode(),y=x.rightNode(),y=j(I,u,y,x.getNodeFilter())):y=O;return y}};function RootFilter(A,j,M){var w=core.PositionFilter.FilterResult.FILTER_ACCEPT,E=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(N){N=N.container();var O;return O=typeof A=="string"?j[A].getNode():A,M(N)===M(O)?w:E}}ops.OdtDocument=function(A){function j(q){return new core.PositionIterator(q,Y,te,!1)}function M(){var q=A.odfContainer().getContentElement(),K=q&&q.localName;return runtime.assert(K==="text","Unsupported content element type '"+K+"' for OdtDocument"),q}function w(){return u.getDocumentElement().ownerDocument}function E(q){for(;q&&!(q.namespaceURI===odf.Namespaces.officens&&q.localName==="text"||q.namespaceURI===odf.Namespaces.officens&&q.localName==="annotation");)q=q.parentNode;return q}function N(q,K,U,F){F=j(F);var re;return U.length===1?re=U[0]:(re=new core.PositionFilterChain,U.forEach(re.addFilter)),U=new core.StepIterator(re,F),U.setPosition(q,K),U}function O(q){var K=j(M());return q=z.convertStepsToDomPoint(q),K.setUnfilteredPosition(q.node,q.offset),K}function x(q){return q===ne}function I(q){var F=q.spec(),K=F.memberid,U=new Date(F.timestamp).toISOString(),F=A.odfContainer();q.isEdit&&(K=u.getMember(K).getProperties().fullName,F.setMetadata({"dc:creator":K,"dc:date":U},null),K={setProperties:{"dc:creator":K,"dc:date":U},removedProperties:[]},P||(K.setProperties["meta:editing-cycles"]=F.incrementEditingCycles(),F.setMetadata(null,["meta:editing-duration","meta:document-statistic"])),P=q,u.emit(ops.OdtDocument.signalMetadataUpdated,K))}function _(q){var K,U=[],F,re=2;runtime.assert(q.isStep(),"positionIterator is not at a step");do{if((K=y.getContentBounds(q))&&(K=K.container,v.isDowngradableSpaceElement(K))){for(F=K.lastChild;K.firstChild;)U.push(K.firstChild),K.parentNode.insertBefore(K.firstChild,K);K.parentNode.removeChild(K),q.setPosition(F,F.nodeType===Node.TEXT_NODE?F.length:F.childNodes.length),q.roundToPreviousStep()}--re}while(0<re&&q.nextStep());U.forEach(m.normalizeTextNodes)}function S(q,K,U){return q=q.childNodes.item(K)||q,(q=v.getParagraphElement(q))&&m.containsNode(U,q)?q:U}var u=this,y,v=odf.OdfUtils,m=core.DomUtils,R={},V={},Z=new core.EventNotifier([ops.Document.signalMemberAdded,ops.Document.signalMemberUpdated,ops.Document.signalMemberRemoved,ops.Document.signalCursorAdded,ops.Document.signalCursorRemoved,ops.Document.signalCursorMoved,ops.OdtDocument.signalParagraphChanged,ops.OdtDocument.signalParagraphStyleModified,ops.OdtDocument.signalCommonStyleCreated,ops.OdtDocument.signalCommonStyleDeleted,ops.OdtDocument.signalTableAdded,ops.OdtDocument.signalOperationStart,ops.OdtDocument.signalOperationEnd,ops.OdtDocument.signalProcessingBatchStart,ops.OdtDocument.signalProcessingBatchEnd,ops.OdtDocument.signalUndoStackChanged,ops.OdtDocument.signalStepsInserted,ops.OdtDocument.signalStepsRemoved,ops.OdtDocument.signalMetadataUpdated,ops.OdtDocument.signalAnnotationAdded]),ne=core.StepDirection.NEXT,ee,z,P,Y=NodeFilter.SHOW_ALL,$=new gui.BlacklistNamespaceNodeFilter(["urn:webodf:names:cursor","urn:webodf:names:editinfo"]),J=new gui.OdfTextBodyNodeFilter,te=new core.NodeFilterChain([$,J]);this.createPositionIterator=j,this.getDocumentElement=function(){return A.odfContainer().rootElement},this.cloneDocumentElement=function(){var q=u.getDocumentElement(),K=A.getAnnotationViewManager();return K&&K.forgetAnnotations(),q=q.cloneNode(!0),A.refreshAnnotations(),u.fixCursorPositions(),q},this.setDocumentElement=function(q){var K=A.odfContainer();Z.unsubscribe(ops.OdtDocument.signalStepsInserted,z.handleStepsInserted),Z.unsubscribe(ops.OdtDocument.signalStepsRemoved,z.handleStepsRemoved),K.setRootElement(q),A.setOdfContainer(K,!0),A.refreshCSS(),q=M(),z=new ops.OdtStepsTranslator(q,j(q),ee,500),Z.subscribe(ops.OdtDocument.signalStepsInserted,z.handleStepsInserted),Z.subscribe(ops.OdtDocument.signalStepsRemoved,z.handleStepsRemoved)},this.getDOMDocument=w,this.getRootElement=E,this.createStepIterator=N,this.getIteratorAtPosition=O,this.convertCursorStepToDomPoint=function(q){return z.convertStepsToDomPoint(q)},this.convertDomPointToCursorStep=function(q,K,U){var F;return U===ne&&(F=x),z.convertDomPointToSteps(q,K,F)},this.convertDomToCursorRange=function(q){var K;return K=z.convertDomPointToSteps(q.anchorNode,q.anchorOffset),q=q.anchorNode===q.focusNode&&q.anchorOffset===q.focusOffset?K:z.convertDomPointToSteps(q.focusNode,q.focusOffset),{position:K,length:q-K}},this.convertCursorToDomRange=function(q,K){var U=w().createRange(),F,re;return F=z.convertStepsToDomPoint(q),K?(re=z.convertStepsToDomPoint(q+K),0<K?(U.setStart(F.node,F.offset),U.setEnd(re.node,re.offset)):(U.setStart(re.node,re.offset),U.setEnd(F.node,F.offset))):U.setStart(F.node,F.offset),U},this.upgradeWhitespacesAtPosition=function(q){var K=O(q),K=new core.StepIterator(ee,K),U,F=2;runtime.assert(K.isStep(),"positionIterator is not at a step (requested step: "+q+")");do{if((U=y.getContentBounds(K))&&(q=U.container,U=U.startOffset,q.nodeType===Node.TEXT_NODE&&v.isSignificantWhitespace(q,U))){runtime.assert(q.data[U]===" ","upgradeWhitespaceToElement: textNode.data[offset] should be a literal space");var re=q.ownerDocument.createElementNS(odf.Namespaces.textns,"text:s"),W=q.parentNode,ie=q;re.appendChild(q.ownerDocument.createTextNode(" ")),q.length===1?W.replaceChild(re,q):(q.deleteData(U,1),0<U&&(U<q.length&&q.splitText(U),ie=q.nextSibling),W.insertBefore(re,ie)),q=re,K.setPosition(q,q.childNodes.length),K.roundToPreviousStep()}--F}while(0<F&&K.nextStep())},this.downgradeWhitespaces=_,this.downgradeWhitespacesAtPosition=function(q){q=O(q),q=new core.StepIterator(ee,q),_(q)},this.getTextNodeAtStep=function(q,K){var U=O(q),F=U.container(),re,W=0,ie=null;if(F.nodeType===Node.TEXT_NODE?(re=F,W=U.unfilteredDomOffset(),0<re.length&&(0<W&&(re=re.splitText(W)),re.parentNode.insertBefore(w().createTextNode(""),re),re=re.previousSibling,W=0)):(re=w().createTextNode(""),W=0,F.insertBefore(re,U.rightNode())),K){if(R[K]&&u.getCursorPosition(K)===q){for(ie=R[K].getNode();ie.nextSibling&&ie.nextSibling.localName==="cursor";)ie.parentNode.insertBefore(ie.nextSibling,ie);0<re.length&&re.nextSibling!==ie&&(re=w().createTextNode(""),W=0),ie.parentNode.insertBefore(re,ie)}}else for(;re.nextSibling&&re.nextSibling.localName==="cursor";)re.parentNode.insertBefore(re.nextSibling,re);for(;re.previousSibling&&re.previousSibling.nodeType===Node.TEXT_NODE;)U=re.previousSibling,U.appendData(re.data),W=U.length,re=U,re.parentNode.removeChild(re.nextSibling);for(;re.nextSibling&&re.nextSibling.nodeType===Node.TEXT_NODE;)U=re.nextSibling,re.appendData(U.data),re.parentNode.removeChild(U);return{textNode:re,offset:W}},this.fixCursorPositions=function(){Object.keys(R).forEach(function(q){var K=R[q],U=E(K.getNode()),F=u.createRootFilter(U),re,W,ie,he=!1;ie=K.getSelectedRange(),re=S(ie.startContainer,ie.startOffset,U),W=N(ie.startContainer,ie.startOffset,[ee,F],re),ie.collapsed?U=W:(re=S(ie.endContainer,ie.endOffset,U),U=N(ie.endContainer,ie.endOffset,[ee,F],re)),W.isStep()&&U.isStep()?W.container()!==U.container()||W.offset()!==U.offset()||ie.collapsed&&K.getAnchorNode()===K.getNode()||(he=!0,ie.setStart(W.container(),W.offset()),ie.collapse(!0)):(he=!0,runtime.assert(W.roundToClosestStep(),"No walkable step found for cursor owned by "+q),ie.setStart(W.container(),W.offset()),runtime.assert(U.roundToClosestStep(),"No walkable step found for cursor owned by "+q),ie.setEnd(U.container(),U.offset())),he&&(K.setSelectedRange(ie,K.hasForwardSelection()),u.emit(ops.Document.signalCursorMoved,K))})},this.getCursorPosition=function(q){return(q=R[q])?z.convertDomPointToSteps(q.getNode(),0):0},this.getCursorSelection=function(q){q=R[q];var K=0,U=0;return q&&(K=z.convertDomPointToSteps(q.getNode(),0),U=z.convertDomPointToSteps(q.getAnchorNode(),0)),{position:U,length:K-U}},this.getPositionFilter=function(){return ee},this.getOdfCanvas=function(){return A},this.getCanvas=function(){return A},this.getRootNode=M,this.addMember=function(q){runtime.assert(V[q.getMemberId()]===void 0,"This member already exists"),V[q.getMemberId()]=q},this.getMember=function(q){return V.hasOwnProperty(q)?V[q]:null},this.removeMember=function(q){delete V[q]},this.getCursor=function(q){return R[q]},this.hasCursor=function(q){return R.hasOwnProperty(q)},this.getMemberIds=function(){return Object.keys(V)},this.addCursor=function(q){runtime.assert(!!q,"OdtDocument::addCursor without cursor");var K=q.getMemberId(),U=u.convertCursorToDomRange(0,0);runtime.assert(typeof K=="string","OdtDocument::addCursor has cursor without memberid"),runtime.assert(!R[K],"OdtDocument::addCursor is adding a duplicate cursor with memberid "+K),q.setSelectedRange(U,!0),R[K]=q},this.removeCursor=function(q){var K=R[q];return K?(K.removeFromDocument(),delete R[q],u.emit(ops.Document.signalCursorRemoved,q),!0):!1},this.moveCursor=function(q,K,U,F){q=R[q],K=u.convertCursorToDomRange(K,U),q&&(q.setSelectedRange(K,0<=U),q.setSelectionType(F||ops.OdtCursor.RangeSelection))},this.getFormatting=function(){return A.getFormatting()},this.emit=function(q,K){Z.emit(q,K)},this.subscribe=function(q,K){Z.subscribe(q,K)},this.unsubscribe=function(q,K){Z.unsubscribe(q,K)},this.createRootFilter=function(q){return new RootFilter(q,R,E)},this.close=function(q){q()},this.destroy=function(q){q()},function(){var q=M();ee=new ops.TextPositionFilter,y=new odf.StepUtils,z=new ops.OdtStepsTranslator(q,j(q),ee,500),Z.subscribe(ops.OdtDocument.signalStepsInserted,z.handleStepsInserted),Z.subscribe(ops.OdtDocument.signalStepsRemoved,z.handleStepsRemoved),Z.subscribe(ops.OdtDocument.signalOperationEnd,I),Z.subscribe(ops.OdtDocument.signalProcessingBatchEnd,core.Task.processTasks)}()},ops.OdtDocument.signalParagraphChanged="paragraph/changed",ops.OdtDocument.signalTableAdded="table/added",ops.OdtDocument.signalCommonStyleCreated="style/created",ops.OdtDocument.signalCommonStyleDeleted="style/deleted",ops.OdtDocument.signalParagraphStyleModified="paragraphstyle/modified",ops.OdtDocument.signalOperationStart="operation/start",ops.OdtDocument.signalOperationEnd="operation/end",ops.OdtDocument.signalProcessingBatchStart="router/batchstart",ops.OdtDocument.signalProcessingBatchEnd="router/batchend",ops.OdtDocument.signalUndoStackChanged="undo/changed",ops.OdtDocument.signalStepsInserted="steps/inserted",ops.OdtDocument.signalStepsRemoved="steps/removed",ops.OdtDocument.signalMetadataUpdated="metadata/updated",ops.OdtDocument.signalAnnotationAdded="annotation/added",ops.OpAddAnnotation=function(){function A(x,I,_){var S=x.getTextNodeAtStep(_,j);S&&(x=S.textNode,_=x.parentNode,S.offset!==x.length&&x.splitText(S.offset),_.insertBefore(I,x.nextSibling),x.length===0&&_.removeChild(x))}var j,M,w,E,N,O;this.init=function(x){j=x.memberid,M=parseInt(x.timestamp,10),w=parseInt(x.position,10),E=x.length!==void 0?parseInt(x.length,10)||0:void 0,N=x.name},this.isEdit=!0,this.group=void 0,this.execute=function(x){var I=x.getCursor(j),_,S;O=x.getDOMDocument();var u=new Date(M),y,v,m;return y=O.createElementNS(odf.Namespaces.officens,"office:annotation"),y.setAttributeNS(odf.Namespaces.officens,"office:name",N),_=O.createElementNS(odf.Namespaces.dcns,"dc:creator"),_.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",j),_.textContent=x.getMember(j).getProperties().fullName,S=O.createElementNS(odf.Namespaces.dcns,"dc:date"),S.appendChild(O.createTextNode(u.toISOString())),u=O.createElementNS(odf.Namespaces.textns,"text:list"),v=O.createElementNS(odf.Namespaces.textns,"text:list-item"),m=O.createElementNS(odf.Namespaces.textns,"text:p"),v.appendChild(m),u.appendChild(v),y.appendChild(_),y.appendChild(S),y.appendChild(u),E!==void 0&&(_=O.createElementNS(odf.Namespaces.officens,"office:annotation-end"),_.setAttributeNS(odf.Namespaces.officens,"office:name",N),y.annotationEndElement=_,A(x,_,w+E)),A(x,y,w),x.emit(ops.OdtDocument.signalStepsInserted,{position:w}),I&&(_=O.createRange(),S=y.getElementsByTagNameNS(odf.Namespaces.textns,"p")[0],_.selectNodeContents(S),I.setSelectedRange(_,!1),I.setSelectionType(ops.OdtCursor.RangeSelection),x.emit(ops.Document.signalCursorMoved,I)),x.getOdfCanvas().addAnnotation(y),x.fixCursorPositions(),x.emit(ops.OdtDocument.signalAnnotationAdded,{memberId:j,annotation:y}),!0},this.spec=function(){return{optype:"AddAnnotation",memberid:j,timestamp:M,position:w,length:E,name:N}}},ops.OpAddCursor=function(){var A,j;this.init=function(M){A=M.memberid,j=M.timestamp},this.isEdit=!1,this.group=void 0,this.execute=function(M){var w=M.getCursor(A);return w?!1:(w=new ops.OdtCursor(A,M),M.addCursor(w),M.emit(ops.Document.signalCursorAdded,w),!0)},this.spec=function(){return{optype:"AddCursor",memberid:A,timestamp:j}}},ops.OpAddMember=function(){var A,j,M;this.init=function(w){A=w.memberid,j=parseInt(w.timestamp,10),M=w.setProperties},this.isEdit=!1,this.group=void 0,this.execute=function(w){var E;return w.getMember(A)?!1:(E=new ops.Member(A,M),w.addMember(E),w.emit(ops.Document.signalMemberAdded,E),!0)},this.spec=function(){return{optype:"AddMember",memberid:A,timestamp:j,setProperties:M}}},ops.OpAddStyle=function(){var A,j,M,w,E,N,O=odf.Namespaces.stylens;this.init=function(x){A=x.memberid,j=x.timestamp,M=x.styleName,w=x.styleFamily,E=x.isAutomaticStyle==="true"||x.isAutomaticStyle===!0,N=x.setProperties},this.isEdit=!0,this.group=void 0,this.execute=function(x){var I=x.getOdfCanvas().odfContainer(),_=x.getFormatting(),S=x.getDOMDocument().createElementNS(O,"style:style");return S?(N&&_.updateStyle(S,N),S.setAttributeNS(O,"style:family",w),S.setAttributeNS(O,"style:name",M),E?I.rootElement.automaticStyles.appendChild(S):I.rootElement.styles.appendChild(S),x.getOdfCanvas().refreshCSS(),E||x.emit(ops.OdtDocument.signalCommonStyleCreated,{name:M,family:w}),!0):!1},this.spec=function(){return{optype:"AddStyle",memberid:A,timestamp:j,styleName:M,styleFamily:w,isAutomaticStyle:E,setProperties:N}}},odf.ObjectNameGenerator=function(A,j){function M(v,m){var R={};this.generateName=function(){var V=m(),Z=0,ne;do ne=v+Z,Z+=1;while(R[ne]||V[ne]);return R[ne]=!0,ne}}function w(){var v={};return[A.rootElement.automaticStyles,A.rootElement.styles].forEach(function(m){for(m=m.firstElementChild;m;)m.namespaceURI===E&&m.localName==="style"&&(v[m.getAttributeNS(E,"name")]=!0),m=m.nextElementSibling}),v}var E=odf.Namespaces.stylens,N=odf.Namespaces.drawns,O=odf.Namespaces.xlinkns,x=new core.Utils().hashString(j),I=null,_=null,S=null,u={},y={};this.generateStyleName=function(){return I===null&&(I=new M("auto"+x+"_",function(){return w()})),I.generateName()},this.generateFrameName=function(){var v,m,R;if(_===null){for(m=A.rootElement.body.getElementsByTagNameNS(N,"frame"),v=0;v<m.length;v+=1)R=m.item(v),u[R.getAttributeNS(N,"name")]=!0;_=new M("fr"+x+"_",function(){return u})}return _.generateName()},this.generateImageName=function(){var v,m,R;if(S===null){for(R=A.rootElement.body.getElementsByTagNameNS(N,"image"),v=0;v<R.length;v+=1)m=R.item(v),m=m.getAttributeNS(O,"href"),m=m.substring(9,m.lastIndexOf(".")),y[m]=!0;S=new M("img"+x+"_",function(){return y})}return S.generateName()}},odf.TextStyleApplicator=function(A,j,M){function w(_){function S(y,v){return typeof y=="object"&&typeof v=="object"?Object.keys(y).every(function(m){return S(y[m],v[m])}):y===v}var u={};this.isStyleApplied=function(y){return y=j.getAppliedStylesForElement(y,u).styleProperties,S(_,y)}}function E(_){var S={};this.applyStyleToContainer=function(u){var y;y=u.getAttributeNS(x,"style-name");var v=u.ownerDocument;if(y=y||"",!S.hasOwnProperty(y)){var m=y,R;R=y?j.createDerivedStyleObject(y,"text",_):_,v=v.createElementNS(I,"style:style"),j.updateStyle(v,R),v.setAttributeNS(I,"style:name",A.generateStyleName()),v.setAttributeNS(I,"style:family","text"),v.setAttributeNS("urn:webodf:names:scope","scope","document-content"),M.appendChild(v),S[m]=v}y=S[y].getAttributeNS(I,"name"),u.setAttributeNS(x,"text:style-name",y)}}function N(_,S){var u=_.ownerDocument,y=_.parentNode,v,m,R,V=new core.LoopWatchDog(1e4);for(m=[],m.push(_),R=_.nextSibling;R&&O.rangeContainsNode(S,R);)V.check(),m.push(R),R=R.nextSibling;if(y.localName!=="span"||y.namespaceURI!==x?(v=u.createElementNS(x,"text:span"),y.insertBefore(v,_),u=!1):(_.previousSibling&&!O.rangeContainsNode(S,y.firstChild)?(v=y.cloneNode(!1),y.parentNode.insertBefore(v,y.nextSibling)):v=y,u=!0),m.forEach(function(Z){Z.parentNode!==v&&v.appendChild(Z)}),R&&u)for(m=v.cloneNode(!1),v.parentNode.insertBefore(m,v.nextSibling);R;)V.check(),u=R.nextSibling,m.appendChild(R),R=u;return v}var O=core.DomUtils,x=odf.Namespaces.textns,I=odf.Namespaces.stylens;this.applyStyle=function(_,S,u){var y={},v,m,R,V;runtime.assert(u&&u.hasOwnProperty("style:text-properties"),"applyStyle without any text properties"),y["style:text-properties"]=u["style:text-properties"],R=new E(y),V=new w(y),_.forEach(function(Z){v=V.isStyleApplied(Z),v===!1&&(m=N(Z,S),R.applyStyleToContainer(m))})}},ops.OpApplyDirectStyling=function(){function A(I,_,S){var u=I.getOdfCanvas().odfContainer(),y=x.splitBoundaries(_),v=O.getTextNodes(_,!1);new odf.TextStyleApplicator(new odf.ObjectNameGenerator(u,j),I.getFormatting(),u.rootElement.automaticStyles).applyStyle(v,_,S),y.forEach(x.normalizeTextNodes)}var j,M,w,E,N,O=odf.OdfUtils,x=core.DomUtils;this.init=function(I){j=I.memberid,M=I.timestamp,w=parseInt(I.position,10),E=parseInt(I.length,10),N=I.setProperties},this.isEdit=!0,this.group=void 0,this.execute=function(I){var _=I.convertCursorToDomRange(w,E),S=O.getParagraphElements(_);return A(I,_,N),_.detach(),I.getOdfCanvas().refreshCSS(),I.fixCursorPositions(),S.forEach(function(u){I.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:u,memberId:j,timeStamp:M})}),I.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"ApplyDirectStyling",memberid:j,timestamp:M,position:w,length:E,setProperties:N}}},ops.OpApplyHyperlink=function(){function A(I){for(;I;){if(x.isHyperlink(I))return!0;I=I.parentNode}return!1}var j,M,w,E,N,O=core.DomUtils,x=odf.OdfUtils;this.init=function(I){j=I.memberid,M=I.timestamp,w=I.position,E=I.length,N=I.hyperlink},this.isEdit=!0,this.group=void 0,this.execute=function(I){var _=I.getDOMDocument(),S=I.convertCursorToDomRange(w,E),u=O.splitBoundaries(S),y=[],v=x.getTextNodes(S,!1);return v.length===0?!1:(v.forEach(function(m){var R=x.getParagraphElement(m);runtime.assert(A(m)===!1,"The given range should not contain any link.");var V=N,Z=_.createElementNS(odf.Namespaces.textns,"text:a");Z.setAttributeNS(odf.Namespaces.xlinkns,"xlink:type","simple"),Z.setAttributeNS(odf.Namespaces.xlinkns,"xlink:href",V),m.parentNode.insertBefore(Z,m),Z.appendChild(m),y.indexOf(R)===-1&&y.push(R)}),u.forEach(O.normalizeTextNodes),S.detach(),I.fixCursorPositions(),I.getOdfCanvas().refreshSize(),I.getOdfCanvas().rerenderAnnotations(),y.forEach(function(m){I.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:m,memberId:j,timeStamp:M})}),!0)},this.spec=function(){return{optype:"ApplyHyperlink",memberid:j,timestamp:M,position:w,length:E,hyperlink:N}}},ops.OpInsertImage=function(){var A,j,M,w,E,N,O,x,I=odf.Namespaces.drawns,_=odf.Namespaces.svgns,S=odf.Namespaces.textns,u=odf.Namespaces.xlinkns,y=odf.OdfUtils;this.init=function(v){A=v.memberid,j=v.timestamp,M=v.position,w=v.filename,E=v.frameWidth,N=v.frameHeight,O=v.frameStyleName,x=v.frameName},this.isEdit=!0,this.group=void 0,this.execute=function(v){var m=v.getOdfCanvas(),Z=v.getTextNodeAtStep(M,A),R,V;if(!Z)return!1;R=Z.textNode,V=y.getParagraphElement(R);var Z=Z.offset!==R.length?R.splitText(Z.offset):R.nextSibling,ee=v.getDOMDocument(),ne=ee.createElementNS(I,"draw:image"),ee=ee.createElementNS(I,"draw:frame");return ne.setAttributeNS(u,"xlink:href",w),ne.setAttributeNS(u,"xlink:type","simple"),ne.setAttributeNS(u,"xlink:show","embed"),ne.setAttributeNS(u,"xlink:actuate","onLoad"),ee.setAttributeNS(I,"draw:style-name",O),ee.setAttributeNS(I,"draw:name",x),ee.setAttributeNS(S,"text:anchor-type","as-char"),ee.setAttributeNS(_,"svg:width",E),ee.setAttributeNS(_,"svg:height",N),ee.appendChild(ne),R.parentNode.insertBefore(ee,Z),v.emit(ops.OdtDocument.signalStepsInserted,{position:M}),R.length===0&&R.parentNode.removeChild(R),m.addCssForFrameWithImage(ee),m.refreshCSS(),v.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:V,memberId:A,timeStamp:j}),m.rerenderAnnotations(),!0},this.spec=function(){return{optype:"InsertImage",memberid:A,timestamp:j,filename:w,position:M,frameWidth:E,frameHeight:N,frameStyleName:O,frameName:x}}},ops.OpInsertTable=function(){function A(u,y){var v;if(_.length===1)v=_[0];else if(_.length===3)switch(u){case 0:v=_[0];break;case w-1:v=_[2];break;default:v=_[1]}else v=_[u];if(v.length===1)return v[0];if(v.length===3)switch(y){case 0:return v[0];case E-1:return v[2];default:return v[1]}return v[y]}var j,M,w,E,N,O,x,I,_,S=odf.OdfUtils;this.init=function(u){j=u.memberid,M=u.timestamp,N=u.position,w=u.initialRows,E=u.initialColumns,O=u.tableName,x=u.tableStyleName,I=u.tableColumnStyleName,_=u.tableCellStyleMatrix},this.isEdit=!0,this.group=void 0,this.execute=function(u){var y=u.getTextNodeAtStep(N),v=u.getRootNode();if(y){var m=u.getDOMDocument(),R=m.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table"),V=m.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-column"),Z,ne,ee,z;for(x&&R.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",x),O&&R.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:name",O),V.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:number-columns-repeated",E),I&&V.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",I),R.appendChild(V),ee=0;ee<w;ee+=1){for(V=m.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-row"),z=0;z<E;z+=1)Z=m.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-cell"),(ne=A(ee,z))&&Z.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",ne),ne=m.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:p"),Z.appendChild(ne),V.appendChild(Z);R.appendChild(V)}return y=S.getParagraphElement(y.textNode),v.insertBefore(R,y.nextSibling),u.emit(ops.OdtDocument.signalStepsInserted,{position:N}),u.getOdfCanvas().refreshSize(),u.emit(ops.OdtDocument.signalTableAdded,{tableElement:R,memberId:j,timeStamp:M}),u.getOdfCanvas().rerenderAnnotations(),!0}return!1},this.spec=function(){return{optype:"InsertTable",memberid:j,timestamp:M,position:N,initialRows:w,initialColumns:E,tableName:O,tableStyleName:x,tableColumnStyleName:I,tableCellStyleMatrix:_}}},ops.OpInsertText=function(){function A(x){return x!=="	"&&O.isODFWhitespace(x)}var j,M,w,E,N,O=odf.OdfUtils;this.init=function(x){j=x.memberid,M=x.timestamp,w=x.position,N=x.text,E=x.moveCursor==="true"||x.moveCursor===!0},this.isEdit=!0,this.group=void 0,this.execute=function(x){var I,_,S,u=null,y=x.getDOMDocument(),v,m=0,R,V=x.getCursor(j),Z;if(x.upgradeWhitespacesAtPosition(w),I=x.getTextNodeAtStep(w)){for(_=I.textNode,u=_.nextSibling,S=_.parentNode,v=O.getParagraphElement(_),Z=0;Z<N.length;Z+=1){if(!(R=N[Z]==="	")){R=N;var ne=Z;R=A(R[ne])&&(ne===0||ne===R.length-1||A(R[ne-1]))}R&&(m===0?(I.offset!==_.length&&(u=_.splitText(I.offset)),0<Z&&_.appendData(N.substring(0,Z))):m<Z&&(m=N.substring(m,Z),S.insertBefore(y.createTextNode(m),u)),m=Z+1,N[Z]==="	"?(R=y.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:tab"),R.appendChild(y.createTextNode("	"))):(N[Z]!==" "&&runtime.log("WARN: InsertText operation contains non-tab, non-space whitespace character (character code "+N.charCodeAt(Z)+")"),R=y.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:s"),R.appendChild(y.createTextNode(" "))),S.insertBefore(R,u))}return m===0?_.insertData(I.offset,N):m<N.length&&(I=N.substring(m),S.insertBefore(y.createTextNode(I),u)),S=_.parentNode,u=_.nextSibling,S.removeChild(_),S.insertBefore(_,u),_.length===0&&_.parentNode.removeChild(_),x.emit(ops.OdtDocument.signalStepsInserted,{position:w}),V&&E&&(x.moveCursor(j,w+N.length,0),x.emit(ops.Document.signalCursorMoved,V)),x.downgradeWhitespacesAtPosition(w),x.downgradeWhitespacesAtPosition(w+N.length),x.getOdfCanvas().refreshSize(),x.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:v,memberId:j,timeStamp:M}),x.getOdfCanvas().rerenderAnnotations(),!0}return!1},this.spec=function(){return{optype:"InsertText",memberid:j,timestamp:M,position:w,text:N,moveCursor:E}}},odf.CollapsingRules=function(A){function j(N){return w.isODFNode(N)||N.localName==="br"&&w.isLineBreak(N.parentNode)||N.nodeType===Node.TEXT_NODE&&w.isODFNode(N.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}function M(N){var O;return N.nodeType===Node.TEXT_NODE?(O=N.parentNode,O.removeChild(N)):O=E.removeUnwantedNodes(N,j),(N=O)&&(N=O,N=!w.isParagraph(N)&&N!==A&&w.hasNoODFContent(N)),N?M(O):O}var w=odf.OdfUtils,E=core.DomUtils;this.mergeChildrenIntoParent=M},ops.OpMergeParagraph=function(){function A(v){return odf.OdfUtils.isInlineRoot(v)?NodeFilter.FILTER_SKIP:S.isGroupingElement(v)&&S.hasNoODFContent(v)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}function j(v){if(v.nodeType===Node.TEXT_NODE){if(v.length===0)return runtime.log("WARN: Empty text node found during merge operation"),!0;if(S.isODFWhitespace(v.data)&&S.isSignificantWhitespace(v,0)===!1)return!0;v="#text"}else v=(v.prefix?v.prefix+":":"")+v.localName;return runtime.log("WARN: Unexpected text element found near paragraph boundary ["+v+"]"),!1}function M(v){v.collapsed||(u.splitBoundaries(v),v=S.getTextElements(v,!1,!0).filter(j),v.forEach(function(m){m.parentNode.removeChild(m)}))}function w(v,m,R){v=v.convertCursorStepToDomPoint(m);var V=S.getParagraphElement(v.node,v.offset);return runtime.assert(!!V,"Paragraph not found at step "+m),R&&R.setPosition(v.node,v.offset),V}var E,N,O,x,I,_,S=odf.OdfUtils,u=core.DomUtils,y=odf.Namespaces.textns;this.init=function(v){E=v.memberid,N=v.timestamp,O=v.moveCursor,x=v.paragraphStyleName,I=parseInt(v.sourceStartPosition,10),_=parseInt(v.destinationStartPosition,10)},this.isEdit=!0,this.group=void 0,this.execute=function(v){var m,R,V=v.getCursor(E);m=v.getRootNode();var Z=new odf.CollapsingRules(m),ne=v.createStepIterator(m,0,[v.getPositionFilter()],m),ee;runtime.assert(_<I,"Destination paragraph ("+_+") must be before source paragraph ("+I+")"),R=w(v,_),m=w(v,I,ne),ne.previousStep(),runtime.assert(u.containsNode(R,ne.container()),"Destination paragraph must be adjacent to the source paragraph"),ee=R.ownerDocument.createRange(),ne.setPosition(R,R.childNodes.length),ne.roundToPreviousStep(),ee.setStart(ne.container(),ne.offset()),ee.setEnd(R,R.childNodes.length),M(ee),ee=R.childNodes.length;var z=m.ownerDocument.createRange();for(ne.setPosition(m,0),ne.roundToNextStep(),z.setStart(m,0),z.setEnd(ne.container(),ne.offset()),M(z),z=m.firstChild;z;)z.localName==="editinfo"?m.removeChild(z):(R.appendChild(z),u.removeUnwantedNodes(z,A)),z=m.firstChild;return runtime.assert(m.childNodes.length===0,"Source paragraph should be empty before it is removed"),Z.mergeChildrenIntoParent(m),v.emit(ops.OdtDocument.signalStepsRemoved,{position:I-1}),ne.setPosition(R,ee),ne.roundToClosestStep(),ne.previousStep()||ne.roundToNextStep(),v.downgradeWhitespaces(ne),x?R.setAttributeNS(y,"text:style-name",x):R.removeAttributeNS(y,"style-name"),V&&O&&(v.moveCursor(E,I-1,0),v.emit(ops.Document.signalCursorMoved,V)),v.fixCursorPositions(),v.getOdfCanvas().refreshSize(),v.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:R,memberId:E,timeStamp:N}),v.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"MergeParagraph",memberid:E,timestamp:N,moveCursor:O,paragraphStyleName:x,sourceStartPosition:I,destinationStartPosition:_}}},ops.OpMoveCursor=function(){var A,j,M,w,E;this.init=function(N){A=N.memberid,j=N.timestamp,M=N.position,w=N.length||0,E=N.selectionType||ops.OdtCursor.RangeSelection},this.isEdit=!1,this.group=void 0,this.execute=function(N){var O=N.getCursor(A),x;return O?(x=N.convertCursorToDomRange(M,w),O.setSelectedRange(x,0<=w),O.setSelectionType(E),N.emit(ops.Document.signalCursorMoved,O),!0):!1},this.spec=function(){return{optype:"MoveCursor",memberid:A,timestamp:j,position:M,length:w,selectionType:E}}},ops.OpRemoveAnnotation=function(){var A,j,M,w,E=core.DomUtils;this.init=function(N){A=N.memberid,j=N.timestamp,M=parseInt(N.position,10),w=parseInt(N.length,10)},this.isEdit=!0,this.group=void 0,this.execute=function(N){function O(_){I.parentNode.insertBefore(_,I)}for(var x=N.getIteratorAtPosition(M).container(),I;x.namespaceURI!==odf.Namespaces.officens||x.localName!=="annotation";)x=x.parentNode;return x===null?!1:(I=x,x=I.annotationEndElement,N.getOdfCanvas().forgetAnnotation(I),E.getElementsByTagNameNS(I,"urn:webodf:names:cursor","cursor").forEach(O),E.getElementsByTagNameNS(I,"urn:webodf:names:cursor","anchor").forEach(O),I.parentNode.removeChild(I),x&&x.parentNode.removeChild(x),N.emit(ops.OdtDocument.signalStepsRemoved,{position:0<M?M-1:M}),N.getOdfCanvas().rerenderAnnotations(),N.fixCursorPositions(),!0)},this.spec=function(){return{optype:"RemoveAnnotation",memberid:A,timestamp:j,position:M,length:w}}},ops.OpRemoveBlob=function(){var A,j,M;this.init=function(w){A=w.memberid,j=w.timestamp,M=w.filename},this.isEdit=!0,this.group=void 0,this.execute=function(w){return w.getOdfCanvas().odfContainer().removeBlob(M),!0},this.spec=function(){return{optype:"RemoveBlob",memberid:A,timestamp:j,filename:M}}},ops.OpRemoveCursor=function(){var A,j;this.init=function(M){A=M.memberid,j=M.timestamp},this.isEdit=!1,this.group=void 0,this.execute=function(M){return!!M.removeCursor(A)},this.spec=function(){return{optype:"RemoveCursor",memberid:A,timestamp:j}}},ops.OpRemoveHyperlink=function(){var A,j,M,w,E=core.DomUtils,N=odf.OdfUtils;this.init=function(O){A=O.memberid,j=O.timestamp,M=O.position,w=O.length},this.isEdit=!0,this.group=void 0,this.execute=function(O){var x=O.convertCursorToDomRange(M,w),I=N.getHyperlinkElements(x);return runtime.assert(I.length===1,"The given range should only contain a single link."),I=E.mergeIntoParent(I[0]),x.detach(),O.fixCursorPositions(),O.getOdfCanvas().refreshSize(),O.getOdfCanvas().rerenderAnnotations(),O.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:N.getParagraphElement(I),memberId:A,timeStamp:j}),!0},this.spec=function(){return{optype:"RemoveHyperlink",memberid:A,timestamp:j,position:M,length:w}}},ops.OpRemoveMember=function(){var A,j;this.init=function(M){A=M.memberid,j=parseInt(M.timestamp,10)},this.isEdit=!1,this.group=void 0,this.execute=function(M){return M.getMember(A)?(M.removeMember(A),M.emit(ops.Document.signalMemberRemoved,A),!0):!1},this.spec=function(){return{optype:"RemoveMember",memberid:A,timestamp:j}}},ops.OpRemoveStyle=function(){var A,j,M,w;this.init=function(E){A=E.memberid,j=E.timestamp,M=E.styleName,w=E.styleFamily},this.isEdit=!0,this.group=void 0,this.execute=function(E){var N=E.getFormatting().getStyleElement(M,w);return N?(N.parentNode.removeChild(N),E.getOdfCanvas().refreshCSS(),E.emit(ops.OdtDocument.signalCommonStyleDeleted,{name:M,family:w}),!0):!1},this.spec=function(){return{optype:"RemoveStyle",memberid:A,timestamp:j,styleName:M,styleFamily:w}}},ops.OpRemoveText=function(){var A,j,M,w,E=odf.OdfUtils,N=core.DomUtils;this.init=function(O){runtime.assert(0<=O.length,"OpRemoveText only supports positive lengths"),A=O.memberid,j=O.timestamp,M=parseInt(O.position,10),w=parseInt(O.length,10)},this.isEdit=!0,this.group=void 0,this.execute=function(O){var x,I,_,S=O.getCursor(A),u=new odf.CollapsingRules(O.getRootNode());return O.upgradeWhitespacesAtPosition(M),O.upgradeWhitespacesAtPosition(M+w),x=O.convertCursorToDomRange(M,w),N.splitBoundaries(x),I=E.getTextElements(x,!1,!0),_=E.getParagraphElement(x.startContainer,x.startOffset),runtime.assert(_!==void 0,"Attempting to remove text outside a paragraph element"),x.detach(),I.forEach(function(y){y.parentNode?(runtime.assert(N.containsNode(_,y),"RemoveText only supports removing elements within the same paragraph"),u.mergeChildrenIntoParent(y)):runtime.log("WARN: text element has already been removed from it's container")}),O.emit(ops.OdtDocument.signalStepsRemoved,{position:M}),O.downgradeWhitespacesAtPosition(M),O.fixCursorPositions(),O.getOdfCanvas().refreshSize(),O.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:_,memberId:A,timeStamp:j}),S&&(S.resetSelectionType(),O.emit(ops.Document.signalCursorMoved,S)),O.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"RemoveText",memberid:A,timestamp:j,position:M,length:w}}},ops.OpSetBlob=function(){var A,j,M,w,E;this.init=function(N){A=N.memberid,j=N.timestamp,M=N.filename,w=N.mimetype,E=N.content},this.isEdit=!0,this.group=void 0,this.execute=function(N){return N.getOdfCanvas().odfContainer().setBlob(M,w,E),!0},this.spec=function(){return{optype:"SetBlob",memberid:A,timestamp:j,filename:M,mimetype:w,content:E}}},ops.OpSetParagraphStyle=function(){function A(O,x,I){var _=[O.getPositionFilter()],S=I.container();return I=I.unfilteredDomOffset(),O.createStepIterator(S,I,_,x).previousStep()===!1}var j,M,w,E,N=odf.OdfUtils;this.init=function(O){j=O.memberid,M=O.timestamp,w=O.position,E=O.styleName},this.isEdit=!0,this.group=void 0,this.execute=function(O){var x,I;return x=O.getIteratorAtPosition(w),(I=N.getParagraphElement(x.container()))?(runtime.assert(A(O,I,x),"SetParagraphStyle position should be the first position in the paragraph"),E?I.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:style-name",E):I.removeAttributeNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","style-name"),O.getOdfCanvas().refreshSize(),O.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:I,timeStamp:M,memberId:j}),O.getOdfCanvas().rerenderAnnotations(),!0):!1},this.spec=function(){return{optype:"SetParagraphStyle",memberid:j,timestamp:M,position:w,styleName:E}}},ops.OpSplitParagraph=function(){var A,j,M,w,E,N,O=odf.OdfUtils,x=odf.Namespaces.textns;this.init=function(I){A=I.memberid,j=I.timestamp,w=I.position,M=I.sourceParagraphPosition,N=I.paragraphStyleName,E=I.moveCursor==="true"||I.moveCursor===!0},this.isEdit=!0,this.group=void 0,this.execute=function(I){var _,S,u,y,v,m,R,V=I.getCursor(A);if(I.upgradeWhitespacesAtPosition(w),_=I.getTextNodeAtStep(w),!_||(S=O.getParagraphElement(_.textNode),!S))return!1;for(u=O.isListItem(S.parentNode)?S.parentNode:S,_.offset===0?(R=_.textNode.previousSibling,m=null):(R=_.textNode,m=_.offset>=_.textNode.length?null:_.textNode.splitText(_.offset)),y=_.textNode;y!==u;){if(y=y.parentNode,v=y.cloneNode(!1),m&&v.appendChild(m),R)for(;R&&R.nextSibling;)v.appendChild(R.nextSibling);else for(;y.firstChild;)v.appendChild(y.firstChild);y.parentNode.insertBefore(v,y.nextSibling),R=y,m=v}return O.isListItem(m)&&(m=m.childNodes.item(0)),N?m.setAttributeNS(x,"text:style-name",N):m.removeAttributeNS(x,"style-name"),_.textNode.length===0&&_.textNode.parentNode.removeChild(_.textNode),I.emit(ops.OdtDocument.signalStepsInserted,{position:w}),V&&E&&(I.moveCursor(A,w+1,0),I.emit(ops.Document.signalCursorMoved,V)),I.fixCursorPositions(),I.getOdfCanvas().refreshSize(),I.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:S,memberId:A,timeStamp:j}),I.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:m,memberId:A,timeStamp:j}),I.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"SplitParagraph",memberid:A,timestamp:j,position:w,sourceParagraphPosition:M,paragraphStyleName:N,moveCursor:E}}},ops.OpUpdateMember=function(){function A(N){var O="//dc:creator[@editinfo:memberid='"+j+"']";for(N=xmldom.XPath.getODFElementsWithXPath(N.getRootNode(),O,function(x){return x==="editinfo"?"urn:webodf:names:editinfo":odf.Namespaces.lookupNamespaceURI(x)}),O=0;O<N.length;O+=1)N[O].textContent=w.fullName}var j,M,w,E;this.init=function(N){j=N.memberid,M=parseInt(N.timestamp,10),w=N.setProperties,E=N.removedProperties},this.isEdit=!1,this.group=void 0,this.execute=function(N){var O=N.getMember(j);return O?(E&&O.removeProperties(E),w&&(O.setProperties(w),w.fullName&&A(N)),N.emit(ops.Document.signalMemberUpdated,O),!0):!1},this.spec=function(){return{optype:"UpdateMember",memberid:j,timestamp:M,setProperties:w,removedProperties:E}}},ops.OpUpdateMetadata=function(){var A,j,M,w;this.init=function(E){A=E.memberid,j=parseInt(E.timestamp,10),M=E.setProperties,w=E.removedProperties},this.isEdit=!0,this.group=void 0,this.execute=function(E){var N=E.getOdfCanvas().odfContainer(),O=null;return w&&(O=w.attributes.split(",")),N.setMetadata(M,O),E.emit(ops.OdtDocument.signalMetadataUpdated,{setProperties:M!==null?M:{},removedProperties:O!==null?O:[]}),!0},this.spec=function(){return{optype:"UpdateMetadata",memberid:A,timestamp:j,setProperties:M,removedProperties:w}}},ops.OpUpdateParagraphStyle=function(){function A(x,I){var _,S,u=I?I.split(","):[];for(_=0;_<u.length;_+=1)S=u[_].split(":"),x.removeAttributeNS(odf.Namespaces.lookupNamespaceURI(S[0]),S[1])}var j,M,w,E,N,O=odf.Namespaces.stylens;this.init=function(x){j=x.memberid,M=x.timestamp,w=x.styleName,E=x.setProperties,N=x.removedProperties},this.isEdit=!0,this.group=void 0,this.execute=function(x){var I=x.getFormatting(),_,S,u;return(_=w!==""?I.getStyleElement(w,"paragraph"):I.getDefaultStyleElement("paragraph"))?(S=_.getElementsByTagNameNS(O,"paragraph-properties").item(0),u=_.getElementsByTagNameNS(O,"text-properties").item(0),E&&I.updateStyle(_,E),N&&(I=N["style:paragraph-properties"],S&&I&&(A(S,I.attributes),S.attributes.length===0&&_.removeChild(S)),I=N["style:text-properties"],u&&I&&(A(u,I.attributes),u.attributes.length===0&&_.removeChild(u)),A(_,N.attributes)),x.getOdfCanvas().refreshCSS(),x.emit(ops.OdtDocument.signalParagraphStyleModified,w),x.getOdfCanvas().rerenderAnnotations(),!0):!1},this.spec=function(){return{optype:"UpdateParagraphStyle",memberid:j,timestamp:M,styleName:w,setProperties:E,removedProperties:N}}},ops.OperationFactory=function(){function A(M){return function(w){return new M}}var j;this.register=function(M,w){j[M]=w},this.create=function(M){var w=null,E=j[M.optype];return E&&(w=E(M),w.init(M)),w},j={AddMember:A(ops.OpAddMember),UpdateMember:A(ops.OpUpdateMember),RemoveMember:A(ops.OpRemoveMember),AddCursor:A(ops.OpAddCursor),ApplyDirectStyling:A(ops.OpApplyDirectStyling),SetBlob:A(ops.OpSetBlob),RemoveBlob:A(ops.OpRemoveBlob),InsertImage:A(ops.OpInsertImage),InsertTable:A(ops.OpInsertTable),InsertText:A(ops.OpInsertText),RemoveText:A(ops.OpRemoveText),MergeParagraph:A(ops.OpMergeParagraph),SplitParagraph:A(ops.OpSplitParagraph),SetParagraphStyle:A(ops.OpSetParagraphStyle),UpdateParagraphStyle:A(ops.OpUpdateParagraphStyle),AddStyle:A(ops.OpAddStyle),RemoveStyle:A(ops.OpRemoveStyle),MoveCursor:A(ops.OpMoveCursor),RemoveCursor:A(ops.OpRemoveCursor),AddAnnotation:A(ops.OpAddAnnotation),RemoveAnnotation:A(ops.OpRemoveAnnotation),UpdateMetadata:A(ops.OpUpdateMetadata),ApplyHyperlink:A(ops.OpApplyHyperlink),RemoveHyperlink:A(ops.OpRemoveHyperlink)}},ops.OperationRouter=function(){},ops.OperationRouter.prototype.setOperationFactory=function(A){},ops.OperationRouter.prototype.setPlaybackFunction=function(A){},ops.OperationRouter.prototype.push=function(A){},ops.OperationRouter.prototype.close=function(A){},ops.OperationRouter.prototype.subscribe=function(A,j){},ops.OperationRouter.prototype.unsubscribe=function(A,j){},ops.OperationRouter.prototype.hasLocalUnsyncedOps=function(){},ops.OperationRouter.prototype.hasSessionHostConnection=function(){},ops.OperationRouter.signalProcessingBatchStart="router/batchstart",ops.OperationRouter.signalProcessingBatchEnd="router/batchend",ops.TrivialOperationRouter=function(){var A=new core.EventNotifier([ops.OperationRouter.signalProcessingBatchStart,ops.OperationRouter.signalProcessingBatchEnd]),j,M,w=0;this.setOperationFactory=function(E){j=E},this.setPlaybackFunction=function(E){M=E},this.push=function(E){w+=1,A.emit(ops.OperationRouter.signalProcessingBatchStart,{}),E.forEach(function(N){N=N.spec(),N.timestamp=Date.now(),N=j.create(N),N.group="g"+w,M(N)}),A.emit(ops.OperationRouter.signalProcessingBatchEnd,{})},this.close=function(E){E()},this.subscribe=function(E,N){A.subscribe(E,N)},this.unsubscribe=function(E,N){A.unsubscribe(E,N)},this.hasLocalUnsyncedOps=function(){return!1},this.hasSessionHostConnection=function(){return!0}},ops.Session=function(A){function j(O){E.emit(ops.OdtDocument.signalProcessingBatchStart,O)}function M(O){E.emit(ops.OdtDocument.signalProcessingBatchEnd,O)}var w=new ops.OperationFactory,E=new ops.OdtDocument(A),N=null;this.setOperationFactory=function(O){w=O,N&&N.setOperationFactory(w)},this.setOperationRouter=function(O){N&&(N.unsubscribe(ops.OperationRouter.signalProcessingBatchStart,j),N.unsubscribe(ops.OperationRouter.signalProcessingBatchEnd,M)),N=O,N.subscribe(ops.OperationRouter.signalProcessingBatchStart,j),N.subscribe(ops.OperationRouter.signalProcessingBatchEnd,M),O.setPlaybackFunction(function(x){return E.emit(ops.OdtDocument.signalOperationStart,x),x.execute(E)?(E.emit(ops.OdtDocument.signalOperationEnd,x),!0):!1}),O.setOperationFactory(w)},this.getOperationFactory=function(){return w},this.getOdtDocument=function(){return E},this.enqueue=function(O){N.push(O)},this.close=function(O){N.close(function(x){x?O(x):E.close(O)})},this.destroy=function(O){E.destroy(O)},this.setOperationRouter(new ops.TrivialOperationRouter)},gui.AnnotationController=function(A,j,M){function w(){var y=x.getCursor(M),y=y&&y.getNode(),v=!1;y&&(v=!S.isWithinAnnotation(y,x.getRootNode())),v!==I&&(I=v,_.emit(gui.AnnotationController.annotatableChanged,I))}function E(y){y.getMemberId()===M&&w()}function N(y){y===M&&w()}function O(y){y.getMemberId()===M&&w()}var x=A.getOdtDocument(),I=!1,_=new core.EventNotifier([gui.AnnotationController.annotatableChanged]),S=odf.OdfUtils,u=core.StepDirection.NEXT;this.isAnnotatable=function(){return I},this.addAnnotation=function(){var y=new ops.OpAddAnnotation,m=x.getCursorSelection(M),v=m.length,m=m.position;I&&(v===0?v=void 0:(m=0<=v?m:m+v,v=Math.abs(v)),y.init({memberid:M,position:m,length:v,name:M+Date.now()}),A.enqueue([y]))},this.removeAnnotation=function(y){var v,m;v=x.getMember(M).getProperties().fullName,(j.getState(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN)!==!0||v===S.getAnnotationCreator(y))&&(v=x.convertDomPointToCursorStep(y,0,u),m=x.convertDomPointToCursorStep(y,y.childNodes.length),y=new ops.OpRemoveAnnotation,y.init({memberid:M,position:v,length:m-v}),m=new ops.OpMoveCursor,m.init({memberid:M,position:0<v?v-1:v,length:0}),A.enqueue([y,m]))},this.subscribe=function(y,v){_.subscribe(y,v)},this.unsubscribe=function(y,v){_.unsubscribe(y,v)},this.destroy=function(y){x.unsubscribe(ops.Document.signalCursorAdded,E),x.unsubscribe(ops.Document.signalCursorRemoved,N),x.unsubscribe(ops.Document.signalCursorMoved,O),y()},j.registerConstraint(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN),x.subscribe(ops.Document.signalCursorAdded,E),x.subscribe(ops.Document.signalCursorRemoved,N),x.subscribe(ops.Document.signalCursorMoved,O),w()},gui.AnnotationController.annotatableChanged="annotatable/changed",gui.Avatar=function(A,j){var M=this,w,E,N;this.setColor=function(O){E.style.borderColor=O},this.setImageUrl=function(O){M.isVisible()?E.src=O:N=O},this.isVisible=function(){return w.style.display==="block"},this.show=function(){N&&(E.src=N,N=void 0),w.style.display="block"},this.hide=function(){w.style.display="none"},this.markAsFocussed=function(O){O?w.classList.add("active"):w.classList.remove("active")},this.destroy=function(O){A.removeChild(w),O()},function(){var O=A.ownerDocument;w=O.createElement("div"),E=O.createElement("img"),w.appendChild(E),w.style.display=j?"block":"none",w.className="handle",A.appendChild(w)}()},gui.StepInfo=function(){},gui.StepInfo.VisualDirection={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1},gui.StepInfo.prototype.container=function(){},gui.StepInfo.prototype.offset=function(){},gui.VisualStepScanner=function(){},gui.VisualStepScanner.prototype.process=function(A,j,M){},gui.GuiStepUtils=function(){function A(x){x=M.getContentBounds(x);var I,_=null;return x&&(x.container.nodeType===Node.TEXT_NODE?(I=x.container.ownerDocument.createRange(),I.setStart(x.container,x.startOffset),I.setEnd(x.container,x.endOffset),(_=0<I.getClientRects().length?I.getBoundingClientRect():null)&&x.container.data.substring(x.startOffset,x.endOffset)===" "&&1>=_.width&&(_=null),I.detach()):(j.isCharacterElement(x.container)||j.isCharacterFrame(x.container))&&(_=w.getBoundingClientRect(x.container))),_}var j=odf.OdfUtils,M=new odf.StepUtils,w=core.DomUtils,E=core.StepDirection.NEXT,N=gui.StepInfo.VisualDirection.LEFT_TO_RIGHT,O=gui.StepInfo.VisualDirection.RIGHT_TO_LEFT;this.getContentRect=A,this.moveToFilteredStep=function(x,I,_){function S(ee,z){return z.process(ne,m,R)&&(ee=!0,!V&&z.token&&(V=z.token)),ee}var u=I===E,y,v,m,R,V,Z=x.snapshot();y=!1;var ne;do y=A(x),ne={token:x.snapshot(),container:x.container,offset:x.offset,direction:I,visualDirection:I===E?N:O},v=x.nextStep()?A(x):null,x.restore(ne.token),u?(m=y,R=v):(m=v,R=y),y=_.reduce(S,!1);while(!y&&x.advanceStep(I));return y||_.forEach(function(ee){!V&&ee.token&&(V=ee.token)}),x.restore(V||Z),!!V}},gui.Caret=function(A,j,M,w){function E(){u.style.opacity=u.style.opacity==="0"?"1":"0",P.trigger()}function N(){return R.selectNodeContents(m),R.getBoundingClientRect()}function O(K){return q[K]!==te[K]}function x(){Object.keys(te).forEach(function(K){q[K]=te[K]})}function I(){if(te.isShown===!1||A.getSelectionType()!==ops.OdtCursor.RangeSelection||!w&&!A.getSelectedRange().collapsed?(te.visibility="hidden",u.style.visibility="hidden",P.cancel()):(te.visibility="visible",u.style.visibility="visible",te.isFocused===!1?(u.style.opacity="1",P.cancel()):((Y||O("visibility"))&&(u.style.opacity="1",P.cancel()),P.trigger())),J||$){var K;K=A.getNode();var U,F,re=Z.getBoundingClientRect(V.getSizer()),W=!1,ie=0;if(K.removeAttributeNS("urn:webodf:names:cursor","caret-sizer-active"),0<K.getClientRects().length)F=N(),ie=F.left-Z.getBoundingClientRect(K).left,W=!0;else if(ee.setPosition(K,0),F=ne.getContentRect(ee),!F&&ee.nextStep()&&(U=ne.getContentRect(ee))&&(F=U,W=!0),F||(K.setAttributeNS("urn:webodf:names:cursor","caret-sizer-active","true"),F=N(),W=!0),!F)for(runtime.log("WARN: No suitable client rectangle found for visual caret for "+A.getMemberId());K;){if(0<K.getClientRects().length){F=Z.getBoundingClientRect(K),W=!0;break}K=K.parentNode}F=Z.translateRect(F,re,V.getZoomLevel()),K={top:F.top,height:F.height,right:W?F.left:F.right,width:Z.adaptRangeDifferenceToZoomLevel(ie,V.getZoomLevel())},8>K.height&&(K={top:K.top-(8-K.height)/2,height:8,right:K.right}),S.style.height=K.height+"px",S.style.top=K.top+"px",S.style.left=K.right-K.width+"px",S.style.width=K.width?K.width+"px":"",v&&(K=runtime.getWindow().getComputedStyle(A.getNode(),null),K.font?v.style.font=K.font:(v.style.fontStyle=K.fontStyle,v.style.fontVariant=K.fontVariant,v.style.fontWeight=K.fontWeight,v.style.fontSize=K.fontSize,v.style.lineHeight=K.lineHeight,v.style.fontFamily=K.fontFamily))}te.isShown&&$&&j.scrollIntoView(u.getBoundingClientRect()),O("isFocused")&&y.markAsFocussed(te.isFocused),x(),J=$=Y=!1}function _(K){S.parentNode.removeChild(S),m.parentNode.removeChild(m),K()}var S,u,y,v,m,R,V=A.getDocument().getCanvas(),Z=core.DomUtils,ne=new gui.GuiStepUtils,ee,z,P,Y=!1,$=!1,J=!1,te={isFocused:!1,isShown:!0,visibility:"hidden"},q={isFocused:!te.isFocused,isShown:!te.isShown,visibility:"hidden"};this.handleUpdate=function(){J=!0,z.trigger()},this.refreshCursorBlinking=function(){Y=!0,z.trigger()},this.setFocus=function(){te.isFocused=!0,z.trigger()},this.removeFocus=function(){te.isFocused=!1,z.trigger()},this.show=function(){te.isShown=!0,z.trigger()},this.hide=function(){te.isShown=!1,z.trigger()},this.setAvatarImageUrl=function(K){y.setImageUrl(K)},this.setColor=function(K){u.style.borderColor=K,y.setColor(K)},this.getCursor=function(){return A},this.getFocusElement=function(){return u},this.toggleHandleVisibility=function(){y.isVisible()?y.hide():y.show()},this.showHandle=function(){y.show()},this.hideHandle=function(){y.hide()},this.setOverlayElement=function(K){v=K,S.appendChild(K),J=!0,z.trigger()},this.ensureVisible=function(){$=!0,z.trigger()},this.getBoundingClientRect=function(){return Z.getBoundingClientRect(S)},this.destroy=function(K){core.Async.destroyAll([z.destroy,P.destroy,y.destroy,_],K)},function(){var K=A.getDocument(),U=[K.createRootFilter(A.getMemberId()),K.getPositionFilter()],F=K.getDOMDocument();R=F.createRange(),m=F.createElement("span"),m.className="webodf-caretSizer",m.textContent="|",A.getNode().appendChild(m),S=F.createElement("div"),S.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",A.getMemberId()),S.className="webodf-caretOverlay",u=F.createElement("div"),u.className="caret",S.appendChild(u),y=new gui.Avatar(S,M),V.getSizer().appendChild(S),ee=K.createStepIterator(A.getNode(),0,U,K.getRootNode()),z=core.Task.createRedrawTask(I),P=core.Task.createTimeoutTask(E,500),z.triggerImmediate()}()},odf.TextSerializer=function(){function A(w){var E="",N=j.filter?j.filter.acceptNode(w):NodeFilter.FILTER_ACCEPT,O=w.nodeType,x;if((N===NodeFilter.FILTER_ACCEPT||N===NodeFilter.FILTER_SKIP)&&M.isTextContentContainingNode(w))for(x=w.firstChild;x;)E+=A(x),x=x.nextSibling;return N===NodeFilter.FILTER_ACCEPT&&(O===Node.ELEMENT_NODE&&M.isParagraph(w)?E+=`
`:O===Node.TEXT_NODE&&w.textContent&&(E+=w.textContent)),E}var j=this,M=odf.OdfUtils;this.filter=null,this.writeToString=function(w){return w?(w=A(w),w[w.length-1]===`
`&&(w=w.substr(0,w.length-1)),w):""}},gui.MimeDataExporter=function(){var A;this.exportRangeToDataTransfer=function(j,M){var w;w=M.startContainer.ownerDocument.createElement("span"),w.appendChild(M.cloneContents()),w=A.writeToString(w);try{j.setData("text/plain",w)}catch{j.setData("Text",w)}},A=new odf.TextSerializer,A.filter=new odf.OdfNodeFilter},gui.Clipboard=function(A){this.setDataFromRange=function(j,M){var w,E=j.clipboardData;return w=runtime.getWindow(),!E&&w&&(E=w.clipboardData),E?(w=!0,A.exportRangeToDataTransfer(E,M),j.preventDefault()):w=!1,w}},gui.SessionContext=function(A,j){var M=A.getOdtDocument(),w=odf.OdfUtils;this.isLocalCursorWithinOwnAnnotation=function(){var E=M.getCursor(j),N;return E?(N=E&&E.getNode(),E=M.getMember(j).getProperties().fullName,!!((N=w.getParentAnnotation(N,M.getRootNode()))&&w.getAnnotationCreator(N)===E)):!1}},gui.StyleSummary=function(A){function j(N,O){var x=N+"|"+O,I;return E.hasOwnProperty(x)||(I=[],A.forEach(function(_){_=(_=_.styleProperties[N])&&_[O],I.indexOf(_)===-1&&I.push(_)}),E[x]=I),E[x]}function M(N,O,x){return function(){var I=j(N,O);return x.length>=I.length&&I.every(function(_){return x.indexOf(_)!==-1})}}function w(N,O){var x=j(N,O);return x.length===1?x[0]:void 0}var E={};this.getPropertyValues=j,this.getCommonValue=w,this.isBold=M("style:text-properties","fo:font-weight",["bold"]),this.isItalic=M("style:text-properties","fo:font-style",["italic"]),this.hasUnderline=M("style:text-properties","style:text-underline-style",["solid"]),this.hasStrikeThrough=M("style:text-properties","style:text-line-through-style",["solid"]),this.fontSize=function(){var N=w("style:text-properties","fo:font-size");return N&&parseFloat(N)},this.fontName=function(){return w("style:text-properties","style:font-name")},this.isAlignedLeft=M("style:paragraph-properties","fo:text-align",["left","start"]),this.isAlignedCenter=M("style:paragraph-properties","fo:text-align",["center"]),this.isAlignedRight=M("style:paragraph-properties","fo:text-align",["right","end"]),this.isAlignedJustified=M("style:paragraph-properties","fo:text-align",["justify"]),this.text={isBold:this.isBold,isItalic:this.isItalic,hasUnderline:this.hasUnderline,hasStrikeThrough:this.hasStrikeThrough,fontSize:this.fontSize,fontName:this.fontName},this.paragraph={isAlignedLeft:this.isAlignedLeft,isAlignedCenter:this.isAlignedCenter,isAlignedRight:this.isAlignedRight,isAlignedJustified:this.isAlignedJustified}},gui.DirectFormattingController=function(A,j,M,w,E,N,O){function x(){return Re.value().styleSummary}function I(){return Re.value().enabledFeatures}function _(we){var ke;return we.collapsed?(ke=we.startContainer,ke.hasChildNodes()&&we.startOffset<ke.childNodes.length&&(ke=ke.childNodes.item(we.startOffset)),we=[ke]):we=ze.getTextElements(we,!0,!1),we}function S(){var we=ve.getCursor(w),ke=we&&we.getSelectedRange(),Ve=[],Ve=[],We=!0,$e={directTextStyling:!0,directParagraphStyling:!0};return ke&&(Ve=_(ke),Ve.length===0&&(Ve=[ke.startContainer,ke.endContainer],We=!1),Ve=ve.getFormatting().getAppliedStyles(Ve)),Ve[0]!==void 0&&De&&(Ve[0].styleProperties=Ne.mergeObjects(Ve[0].styleProperties,De)),j.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)===!0&&($e.directTextStyling=$e.directParagraphStyling=M.isLocalCursorWithinOwnAnnotation()),$e.directTextStyling&&($e.directTextStyling=We&&we!==void 0&&we.getSelectionType()===ops.OdtCursor.RangeSelection),{enabledFeatures:$e,appliedStyles:Ve,styleSummary:new gui.StyleSummary(Ve)}}function u(we,ke){var Ve={};return Object.keys(we).forEach(function(We){var $e=we[We](),ue=ke[We]();$e!==ue&&(Ve[We]=ue)}),Ve}function y(){var we,ke;ke=Me.styleSummary;var Ve=Re.value(),We=Ve.styleSummary,$e=Me.enabledFeatures,ue=Ve.enabledFeatures;we=u(ke.text,We.text),ke=u(ke.paragraph,We.paragraph),$e=!(ue.directTextStyling===$e.directTextStyling&&ue.directParagraphStyling===$e.directParagraphStyling),Me=Ve,$e&&rt.emit(gui.DirectFormattingController.enabledChanged,ue),0<Object.keys(we).length&&rt.emit(gui.DirectFormattingController.textStylingChanged,we),0<Object.keys(ke).length&&rt.emit(gui.DirectFormattingController.paragraphStylingChanged,ke)}function v(){Re.reset(),y()}function m(we){(typeof we=="string"?we:we.getMemberId())===w&&Re.reset()}function R(){Re.reset()}function V(we){var ke=ve.getCursor(w);we=we.paragraphElement,ke&&ze.getParagraphElement(ke.getNode())===we&&Re.reset()}function Z(we,ke){return ke(!we()),!0}function ne(we){if(I().directTextStyling){var ke=ve.getCursorSelection(w),Ve={"style:text-properties":we};ke.length!==0?(we=new ops.OpApplyDirectStyling,we.init({memberid:w,position:ke.position,length:ke.length,setProperties:Ve}),A.enqueue([we])):(De=Ne.mergeObjects(De||{},Ve),Re.reset())}}function ee(we,ke){var Ve={};Ve[we]=ke,ne(Ve)}function z(we){we=we.spec(),De&&we.memberid===w&&we.optype!=="SplitParagraph"&&(De=null,Re.reset())}function P(we){ee("fo:font-weight",we?"bold":"normal")}function Y(we){ee("fo:font-style",we?"italic":"normal")}function $(we){ee("style:text-underline-style",we?"solid":"none")}function J(we){ee("style:text-line-through-style",we?"solid":"none")}function te(we){if(I().directParagraphStyling){var ke=ve.getCursor(w).getSelectedRange(),ke=ze.getParagraphElements(ke),Ve=ve.getFormatting(),We=[],$e={},ue;ke.forEach(function(Se){var be=ve.convertDomPointToCursorStep(Se,0,me),Fe=Se.getAttributeNS(odf.Namespaces.textns,"style-name"),ut;Se=Fe?$e.hasOwnProperty(Fe)?$e[Fe]:void 0:ue,Se||(Se=E.generateStyleName(),Fe?($e[Fe]=Se,ut=Ve.createDerivedStyleObject(Fe,"paragraph",{})):(ue=Se,ut={}),ut=we(ut),Fe=new ops.OpAddStyle,Fe.init({memberid:w,styleName:Se.toString(),styleFamily:"paragraph",isAutomaticStyle:!0,setProperties:ut}),We.push(Fe)),Fe=new ops.OpSetParagraphStyle,Fe.init({memberid:w,styleName:Se.toString(),position:be}),We.push(Fe)}),A.enqueue(We)}}function q(we){te(function(ke){return Ne.mergeObjects(ke,we)})}function K(we){q({"style:paragraph-properties":{"fo:text-align":we}})}function U(we,ke){var Ve=ve.getFormatting().getDefaultTabStopDistance(),We=ke["style:paragraph-properties"],$e;return We&&(We=We["fo:margin-left"],$e=ze.parseLength(We)),Ne.mergeObjects(ke,{"style:paragraph-properties":{"fo:margin-left":$e&&$e.unit===Ve.unit?$e.value+we*Ve.value+$e.unit:we*Ve.value+Ve.unit}})}function F(we,ke){var Ve=_(we),Ve=Ve.length===0?[we.startContainer]:Ve,Ve=ve.getFormatting().getAppliedStyles(Ve),We=0<Ve.length?Ve[0].styleProperties:void 0,$e=ve.getFormatting().getAppliedStylesForElement(ke).styleProperties;return!We||We["style:family"]!=="text"||!We["style:text-properties"]?!1:!$e||!$e["style:text-properties"]?!0:(We=We["style:text-properties"],$e=$e["style:text-properties"],!Object.keys(We).every(function(ue){return We[ue]===$e[ue]}))}function re(){}function W(){return!1}function ie(){return!1}var he=this,ve=A.getOdtDocument(),Ne=new core.Utils,ze=odf.OdfUtils,rt=new core.EventNotifier([gui.DirectFormattingController.enabledChanged,gui.DirectFormattingController.textStylingChanged,gui.DirectFormattingController.paragraphStylingChanged]),le=odf.Namespaces.textns,me=core.StepDirection.NEXT,De=null,Me,Re;this.enabledFeatures=I,this.formatTextSelection=ne,this.createCursorStyleOp=function(we,ke,Ve){var We=null,$e=De;return Ve&&($e=(Ve=Re.value().appliedStyles[0])&&Ve.styleProperties),$e&&$e["style:text-properties"]&&(We=new ops.OpApplyDirectStyling,We.init({memberid:w,position:we,length:ke,setProperties:{"style:text-properties":$e["style:text-properties"]}}),De=null,Re.reset()),We},this.setBold=P,this.setItalic=Y,this.setHasUnderline=$,this.setHasStrikethrough=J,this.setFontSize=function(we){ee("fo:font-size",we+"pt")},this.setFontName=function(we){ee("style:font-name",we)},this.getAppliedStyles=function(){return Re.value().appliedStyles},this.toggleBold=Z.bind(he,function(){return x().isBold()},P),this.toggleItalic=Z.bind(he,function(){return x().isItalic()},Y),this.toggleUnderline=Z.bind(he,function(){return x().hasUnderline()},$),this.toggleStrikethrough=Z.bind(he,function(){return x().hasStrikeThrough()},J),this.isBold=function(){return x().isBold()},this.isItalic=function(){return x().isItalic()},this.hasUnderline=function(){return x().hasUnderline()},this.hasStrikeThrough=function(){return x().hasStrikeThrough()},this.fontSize=function(){return x().fontSize()},this.fontName=function(){return x().fontName()},this.isAlignedLeft=function(){return x().isAlignedLeft()},this.isAlignedCenter=function(){return x().isAlignedCenter()},this.isAlignedRight=function(){return x().isAlignedRight()},this.isAlignedJustified=function(){return x().isAlignedJustified()},this.alignParagraphLeft=function(){return K("left"),!0},this.alignParagraphCenter=function(){return K("center"),!0},this.alignParagraphRight=function(){return K("right"),!0},this.alignParagraphJustified=function(){return K("justify"),!0},this.indent=function(){return te(U.bind(null,1)),!0},this.outdent=function(){return te(U.bind(null,-1)),!0},this.createParagraphStyleOps=function(we){if(!I().directParagraphStyling)return[];var ke=ve.getCursor(w),Ve=ke.getSelectedRange(),We=[],$e,ue;ke.hasForwardSelection()?($e=ke.getAnchorNode(),ue=ke.getNode()):($e=ke.getNode(),ue=ke.getAnchorNode()),ke=ze.getParagraphElement(ue),runtime.assert(!!ke,"DirectFormattingController: Cursor outside paragraph");var Se=ke,be=[ve.getPositionFilter(),ve.createRootFilter(w)];return ve.createStepIterator(Ve.endContainer,Ve.endOffset,be,Se).nextStep()!==!1||(ue!==$e&&(ke=ze.getParagraphElement($e)),!De&&!F(Ve,ke))||(Ve=(Ve=Re.value().appliedStyles[0])&&Ve.styleProperties,!Ve)||((ke=ke.getAttributeNS(le,"style-name"))&&(Ve={"style:text-properties":Ve["style:text-properties"]},Ve=ve.getFormatting().createDerivedStyleObject(ke,"paragraph",Ve)),$e=E.generateStyleName(),ke=new ops.OpAddStyle,ke.init({memberid:w,styleName:$e,styleFamily:"paragraph",isAutomaticStyle:!0,setProperties:Ve}),We.push(ke),ke=new ops.OpSetParagraphStyle,ke.init({memberid:w,styleName:$e,position:we}),We.push(ke)),We},this.subscribe=function(we,ke){rt.subscribe(we,ke)},this.unsubscribe=function(we,ke){rt.unsubscribe(we,ke)},this.destroy=function(we){ve.unsubscribe(ops.Document.signalCursorAdded,m),ve.unsubscribe(ops.Document.signalCursorRemoved,m),ve.unsubscribe(ops.Document.signalCursorMoved,m),ve.unsubscribe(ops.OdtDocument.signalParagraphStyleModified,R),ve.unsubscribe(ops.OdtDocument.signalParagraphChanged,V),ve.unsubscribe(ops.OdtDocument.signalOperationEnd,z),ve.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,y),j.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,v),we()},function(){ve.subscribe(ops.Document.signalCursorAdded,m),ve.subscribe(ops.Document.signalCursorRemoved,m),ve.subscribe(ops.Document.signalCursorMoved,m),ve.subscribe(ops.OdtDocument.signalParagraphStyleModified,R),ve.subscribe(ops.OdtDocument.signalParagraphChanged,V),ve.subscribe(ops.OdtDocument.signalOperationEnd,z),ve.subscribe(ops.OdtDocument.signalProcessingBatchEnd,y),j.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,v),Re=new core.LazyProperty(S),Me=Re.value(),N||(he.formatTextSelection=re,he.setBold=re,he.setItalic=re,he.setHasUnderline=re,he.setHasStrikethrough=re,he.setFontSize=re,he.setFontName=re,he.toggleBold=ie,he.toggleItalic=ie,he.toggleUnderline=ie,he.toggleStrikethrough=ie),O||(he.alignParagraphCenter=W,he.alignParagraphJustified=W,he.alignParagraphLeft=W,he.alignParagraphRight=W,he.createParagraphStyleOps=function(){return[]},he.indent=W,he.outdent=W)}()},gui.DirectFormattingController.enabledChanged="enabled/changed",gui.DirectFormattingController.textStylingChanged="textStyling/changed",gui.DirectFormattingController.paragraphStylingChanged="paragraphStyling/changed",gui.DirectFormattingController.SelectionInfo=function(){},gui.KeyboardHandler=function(){function A(E,N){switch(N||(N=j.None),E){case gui.KeyboardHandler.KeyCode.LeftMeta:case gui.KeyboardHandler.KeyCode.RightMeta:case gui.KeyboardHandler.KeyCode.MetaInMozilla:N|=j.Meta;break;case gui.KeyboardHandler.KeyCode.Ctrl:N|=j.Ctrl;break;case gui.KeyboardHandler.KeyCode.Alt:N|=j.Alt;break;case gui.KeyboardHandler.KeyCode.Shift:N|=j.Shift}return E+":"+N}var j=gui.KeyboardHandler.Modifier,M=null,w={};this.setDefault=function(E){M=E},this.bind=function(E,N,O,x){E=A(E,N),runtime.assert(x||w.hasOwnProperty(E)===!1,"tried to overwrite the callback handler of key combo: "+E),w[E]=O},this.unbind=function(E,N){var O=A(E,N);delete w[O]},this.reset=function(){M=null,w={}},this.handleEvent=function(E){var N=E.keyCode,O=j.None;E.metaKey&&(O|=j.Meta),E.ctrlKey&&(O|=j.Ctrl),E.altKey&&(O|=j.Alt),E.shiftKey&&(O|=j.Shift),N=A(N,O),N=w[N],O=!1,N?O=N():M!==null&&(O=M(E)),O&&(E.preventDefault?E.preventDefault():E.returnValue=!1)}},gui.KeyboardHandler.Modifier={None:0,Meta:1,Ctrl:2,Alt:4,CtrlAlt:6,Shift:8,MetaShift:9,CtrlShift:10,AltShift:12},gui.KeyboardHandler.KeyCode={Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Ctrl:17,Alt:18,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Delete:46,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LeftMeta:91,RightMeta:93,MetaInMozilla:224},gui.HyperlinkClickHandler=function(A,j,M){function w(){var m=A();runtime.assert(!!m.classList,"Document container has no classList element"),m.classList.remove("webodf-inactiveLinks")}function E(){var m=A();runtime.assert(!!m.classList,"Document container has no classList element"),m.classList.add("webodf-inactiveLinks")}function N(){u.removeEventListener("focus",E,!1),v.forEach(function(m){j.unbind(m.keyCode,m.modifier),M.unbind(m.keyCode,m.modifier)}),v.length=0}function O(m){if(N(),m!==x.None){switch(u.addEventListener("focus",E,!1),m){case x.Ctrl:v.push({keyCode:I.Ctrl,modifier:x.None});break;case x.Meta:v.push({keyCode:I.LeftMeta,modifier:x.None}),v.push({keyCode:I.RightMeta,modifier:x.None}),v.push({keyCode:I.MetaInMozilla,modifier:x.None})}v.forEach(function(R){j.bind(R.keyCode,R.modifier,w),M.bind(R.keyCode,R.modifier,E)})}}var x=gui.KeyboardHandler.Modifier,I=gui.KeyboardHandler.KeyCode,_=xmldom.XPath,S=odf.OdfUtils,u=runtime.getWindow(),y=x.None,v=[];runtime.assert(u!==null,"Expected to be run in an environment which has a global window, like a browser."),this.handleClick=function(m){var R=m.target||m.srcElement,V,Z;if(m.ctrlKey?V=x.Ctrl:m.metaKey&&(V=x.Meta),y===x.None||y===V){e:{for(;R!==null;){if(S.isHyperlink(R))break e;if(S.isParagraph(R))break;R=R.parentNode}R=null}R&&(R=S.getHyperlinkTarget(R),R!==""&&(R[0]==="#"?(R=R.substring(1),V=A(),Z=_.getODFElementsWithXPath(V,"//text:bookmark-start[@text:name='"+R+"']",odf.Namespaces.lookupNamespaceURI),Z.length===0&&(Z=_.getODFElementsWithXPath(V,"//text:bookmark[@text:name='"+R+"']",odf.Namespaces.lookupNamespaceURI)),0<Z.length&&Z[0].scrollIntoView(!0)):/^\s*(javascript|data):/.test(R)?runtime.log("WARN:","potentially malicious URL ignored"):u.open(R),m.preventDefault?m.preventDefault():m.returnValue=!1))}},this.setModifier=function(m){y!==m&&(runtime.assert(m===x.None||m===x.Ctrl||m===x.Meta,"Unsupported KeyboardHandler.Modifier value: "+m),y=m,y!==x.None?E():w(),O(y))},this.getModifier=function(){return y},this.destroy=function(m){E(),N(),m()}},gui.EventManager=function(A){function j(U){function F(Ne,ze,rt){var le,me=!1;le="on"+ze,Ne.attachEvent&&(Ne.attachEvent(le,rt),me=!0),!me&&Ne.addEventListener&&(Ne.addEventListener(ze,rt,!1),me=!0),me&&!z[ze]||!Ne.hasOwnProperty(le)||(Ne[le]=rt)}function re(Ne,ze,rt){var le="on"+ze;Ne.detachEvent&&Ne.detachEvent(le,rt),Ne.removeEventListener&&Ne.removeEventListener(ze,rt,!1),Ne[le]===rt&&(Ne[le]=null)}function W(Ne){if(he.indexOf(Ne)===-1){if(he.push(Ne),ie.filters.every(function(ze){return ze(Ne)}))try{ve.emit(U,Ne)}catch(ze){runtime.log("Error occurred while processing "+U+`:
`+ze.message+`
`+ze.stack)}runtime.setTimeout(function(){he.splice(he.indexOf(Ne),1)},0)}}var ie=this,he=[],ve=new core.EventNotifier([U]);this.filters=[],this.subscribe=function(Ne){ve.subscribe(U,Ne)},this.unsubscribe=function(Ne){ve.unsubscribe(U,Ne)},this.destroy=function(){re(ee,U,W),re(J,U,W),re(te,U,W)},P[U]&&F(ee,U,W),F(J,U,W),F(te,U,W)}function M(U,F,re){function W(ve){re(ve,ie,function(Ne){Ne.type=U,he.emit(U,Ne)})}var ie={},he=new core.EventNotifier([U]);this.subscribe=function(ve){he.subscribe(U,ve)},this.unsubscribe=function(ve){he.unsubscribe(U,ve)},this.destroy=function(){F.forEach(function(ve){q.unsubscribe(ve,W)})},function(){F.forEach(function(ve){q.subscribe(ve,W)})}()}function w(U){runtime.clearTimeout(U),delete K[U]}function E(U,F){var re=runtime.setTimeout(function(){U(),w(re)},F);return K[re]=!0,re}function N(U,F,re){var W=U.touches.length,ie=U.touches[0],he=F.timer;U.type==="touchmove"||U.type==="touchend"?he&&w(he):U.type==="touchstart"&&(W!==1?runtime.clearTimeout(he):he=E(function(){re({clientX:ie.clientX,clientY:ie.clientY,pageX:ie.pageX,pageY:ie.pageY,target:U.target||U.srcElement||null,detail:1})},400)),F.timer=he}function O(U,F,re){var W=U.touches[0],ie=U.target||U.srcElement||null,he=F.target;U.touches.length!==1||U.type==="touchend"?he=null:U.type==="touchstart"&&ie.getAttribute("class")==="webodf-draggable"?he=ie:U.type==="touchmove"&&he&&(U.preventDefault(),U.stopPropagation(),re({clientX:W.clientX,clientY:W.clientY,pageX:W.pageX,pageY:W.pageY,target:he,detail:1})),F.target=he}function x(U,F,re){var W=U.target||U.srcElement||null,ie=F.dragging;U.type==="drag"?ie=!0:U.type==="touchend"&&ie&&(ie=!1,U=U.changedTouches[0],re({clientX:U.clientX,clientY:U.clientY,pageX:U.pageX,pageY:U.pageY,target:W,detail:1})),F.dragging=ie}function I(){te.classList.add("webodf-touchEnabled"),q.unsubscribe("touchstart",I)}function _(U){var F=U.scrollX,re=U.scrollY;this.restore=function(){U.scrollX===F&&U.scrollY===re||U.scrollTo(F,re)}}function S(U){var F=U.scrollTop,re=U.scrollLeft;this.restore=function(){(U.scrollTop!==F||U.scrollLeft!==re)&&(U.scrollTop=F,U.scrollLeft=re)}}function u(U,F){var re=$[U]||Y[U]||null;return!re&&F&&(re=$[U]=new j(U)),re}function y(U,F){u(U,!0).subscribe(F)}function v(U,F){var re=u(U,!1);re&&re.unsubscribe(F)}function m(){return A.getDOMDocument().activeElement===J}function R(){m()&&J.blur(),J.setAttribute("disabled","true")}function V(){J.removeAttribute("disabled")}function Z(U){for(var F=[];U;)(U.scrollWidth>U.clientWidth||U.scrollHeight>U.clientHeight)&&F.push(new S(U)),U=U.parentNode;return F.push(new _(ee)),F}function ne(){var U;m()||(U=Z(J),V(),J.focus(),U.forEach(function(F){F.restore()}))}var ee=runtime.getWindow(),z={beforecut:!0,beforepaste:!0,longpress:!0,drag:!0,dragstop:!0},P={mousedown:!0,mouseup:!0,focus:!0},Y={},$={},J,te=A.getCanvas().getElement(),q=this,K={};this.addFilter=function(U,F){u(U,!0).filters.push(F)},this.removeFilter=function(U,F){var re=u(U,!0),W=re.filters.indexOf(F);W!==-1&&re.filters.splice(W,1)},this.subscribe=y,this.unsubscribe=v,this.hasFocus=m,this.focus=ne,this.getEventTrap=function(){return J},this.setEditing=function(U){var F=m();F&&J.blur(),U?J.removeAttribute("readOnly"):J.setAttribute("readOnly","true"),F&&ne()},this.destroy=function(U){v("touchstart",I),Object.keys(K).forEach(function(F){w(parseInt(F,10))}),K.length=0,Object.keys(Y).forEach(function(F){Y[F].destroy()}),Y={},v("mousedown",R),v("mouseup",V),v("contextmenu",V),Object.keys($).forEach(function(F){$[F].destroy()}),$={},J.parentNode.removeChild(J),U()},function(){var U=A.getOdfCanvas().getSizer(),F=U.ownerDocument;runtime.assert(!!ee,"EventManager requires a window object to operate correctly"),J=F.createElement("textarea"),J.id="eventTrap",J.setAttribute("tabindex","-1"),J.setAttribute("readOnly","true"),J.setAttribute("rows","1"),U.appendChild(J),y("mousedown",R),y("mouseup",V),y("contextmenu",V),Y.longpress=new M("longpress",["touchstart","touchmove","touchend"],N),Y.drag=new M("drag",["touchstart","touchmove","touchend"],O),Y.dragstop=new M("dragstop",["drag","touchend"],x),y("touchstart",I)}()},gui.IOSSafariSupport=function(A){function j(){M.innerHeight!==M.outerHeight&&(w.style.display="none",runtime.requestAnimationFrame(function(){w.style.display="block"}))}var M=runtime.getWindow(),w=A.getEventTrap();this.destroy=function(E){A.unsubscribe("focus",j),w.removeAttribute("autocapitalize"),w.style.WebkitTransform="",E()},A.subscribe("focus",j),w.setAttribute("autocapitalize","off"),w.style.WebkitTransform="translateX(-10000px)"},gui.HyperlinkController=function(A,j,M,w){function E(){var S=!0;j.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)===!0&&(S=M.isLocalCursorWithinOwnAnnotation()),S!==_&&(_=S,I.emit(gui.HyperlinkController.enabledChanged,_))}function N(S){S.getMemberId()===w&&E()}var O=odf.OdfUtils,x=A.getOdtDocument(),I=new core.EventNotifier([gui.HyperlinkController.enabledChanged]),_=!1;this.isEnabled=function(){return _},this.subscribe=function(S,u){I.subscribe(S,u)},this.unsubscribe=function(S,u){I.unsubscribe(S,u)},this.addHyperlink=function(S,u){if(_){var y=x.getCursorSelection(w),v=new ops.OpApplyHyperlink,m=[];(y.length===0||u)&&(u=u||S,v=new ops.OpInsertText,v.init({memberid:w,position:y.position,text:u}),y.length=u.length,m.push(v)),v=new ops.OpApplyHyperlink,v.init({memberid:w,position:y.position,length:y.length,hyperlink:S}),m.push(v),A.enqueue(m)}},this.removeHyperlinks=function(){if(_){var S=x.createPositionIterator(x.getRootNode()),u=x.getCursor(w).getSelectedRange(),y=O.getHyperlinkElements(u),v=u.collapsed&&y.length===1,m=x.getDOMDocument().createRange(),R=[],V,Z;y.length!==0&&(y.forEach(function(ne){m.selectNodeContents(ne),V=x.convertDomToCursorRange({anchorNode:m.startContainer,anchorOffset:m.startOffset,focusNode:m.endContainer,focusOffset:m.endOffset}),Z=new ops.OpRemoveHyperlink,Z.init({memberid:w,position:V.position,length:V.length}),R.push(Z)}),v||(v=y[0],u.comparePoint(v,0)===-1&&(m.setStart(v,0),m.setEnd(u.startContainer,u.startOffset),V=x.convertDomToCursorRange({anchorNode:m.startContainer,anchorOffset:m.startOffset,focusNode:m.endContainer,focusOffset:m.endOffset}),0<V.length&&(Z=new ops.OpApplyHyperlink,Z.init({memberid:w,position:V.position,length:V.length,hyperlink:O.getHyperlinkTarget(v)}),R.push(Z))),y=y[y.length-1],S.moveToEndOfNode(y),S=S.unfilteredDomOffset(),u.comparePoint(y,S)===1&&(m.setStart(u.endContainer,u.endOffset),m.setEnd(y,S),V=x.convertDomToCursorRange({anchorNode:m.startContainer,anchorOffset:m.startOffset,focusNode:m.endContainer,focusOffset:m.endOffset}),0<V.length&&(Z=new ops.OpApplyHyperlink,Z.init({memberid:w,position:V.position,length:V.length,hyperlink:O.getHyperlinkTarget(y)}),R.push(Z)))),A.enqueue(R),m.detach())}},this.destroy=function(S){x.unsubscribe(ops.Document.signalCursorMoved,N),j.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,E),S()},x.subscribe(ops.Document.signalCursorMoved,N),j.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,E),E()},gui.HyperlinkController.enabledChanged="enabled/changed",gui.ImageController=function(A,j,M,w,E){function N(){var m=!0;j.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)===!0&&(m=M.isLocalCursorWithinOwnAnnotation()),m!==v&&(v=m,y.emit(gui.ImageController.enabledChanged,v))}function O(m){m.getMemberId()===w&&N()}var x={"image/gif":".gif","image/jpeg":".jpg","image/png":".png"},I=odf.Namespaces.textns,_=A.getOdtDocument(),S=odf.OdfUtils,u=_.getFormatting(),y=new core.EventNotifier([gui.HyperlinkController.enabledChanged]),v=!1;this.isEnabled=function(){return v},this.subscribe=function(m,R){y.subscribe(m,R)},this.unsubscribe=function(m,R){y.unsubscribe(m,R)},this.insertImage=function(m,R,V,Z){if(v){var ne=new core.CSSUnits;if(runtime.assert(0<V&&0<Z,"Both width and height of the image should be greater than 0px."),Z={width:V,height:Z},V=S.getParagraphElement(_.getCursor(w).getNode()).getAttributeNS(I,"style-name")){V=u.getContentSize(V,"paragraph");var z=1,ee=1;Z.width>V.width&&(z=V.width/Z.width),Z.height>V.height&&(ee=V.height/Z.height),V=Math.min(z,ee),Z={width:Z.width*V,height:Z.height*V}}V=ne.convert(Z.width,"px","cm")+"cm",ne=ne.convert(Z.height,"px","cm")+"cm",ee=_.getOdfCanvas().odfContainer().rootElement.styles,Z=m.toLowerCase();var z=x.hasOwnProperty(Z)?x[Z]:null,P;Z=[],runtime.assert(z!==null,"Image type is not supported: "+m),z="Pictures/"+E.generateImageName()+z,P=new ops.OpSetBlob,P.init({memberid:w,filename:z,mimetype:m,content:R}),Z.push(P),u.getStyleElement("Graphics","graphic",[ee])||(m=new ops.OpAddStyle,m.init({memberid:w,styleName:"Graphics",styleFamily:"graphic",isAutomaticStyle:!1,setProperties:{"style:graphic-properties":{"text:anchor-type":"paragraph","svg:x":"0cm","svg:y":"0cm","style:wrap":"dynamic","style:number-wrapped-paragraphs":"no-limit","style:wrap-contour":"false","style:vertical-pos":"top","style:vertical-rel":"paragraph","style:horizontal-pos":"center","style:horizontal-rel":"paragraph"}}}),Z.push(m)),m=E.generateStyleName(),R=new ops.OpAddStyle,R.init({memberid:w,styleName:m,styleFamily:"graphic",isAutomaticStyle:!0,setProperties:{"style:parent-style-name":"Graphics","style:graphic-properties":{"style:vertical-pos":"top","style:vertical-rel":"baseline","style:horizontal-pos":"center","style:horizontal-rel":"paragraph","fo:background-color":"transparent","style:background-transparency":"100%","style:shadow":"none","style:mirror":"none","fo:clip":"rect(0cm, 0cm, 0cm, 0cm)","draw:luminance":"0%","draw:contrast":"0%","draw:red":"0%","draw:green":"0%","draw:blue":"0%","draw:gamma":"100%","draw:color-inversion":"false","draw:image-opacity":"100%","draw:color-mode":"standard"}}}),Z.push(R),P=new ops.OpInsertImage,P.init({memberid:w,position:_.getCursorPosition(w),filename:z,frameWidth:V,frameHeight:ne,frameStyleName:m,frameName:E.generateFrameName()}),Z.push(P),A.enqueue(Z)}},this.destroy=function(m){_.unsubscribe(ops.Document.signalCursorMoved,O),j.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,N),m()},_.subscribe(ops.Document.signalCursorMoved,O),j.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,N),N()},gui.ImageController.enabledChanged="enabled/changed",gui.ImageSelector=function(A){function j(){var O=A.getSizer(),x=E.createElement("div");return x.id="imageSelector",x.style.borderWidth="1px",O.appendChild(x),w.forEach(function(I){var _=E.createElement("div");_.className=I,x.appendChild(_)}),x}var M=odf.Namespaces.svgns,w="topLeft topRight bottomRight bottomLeft topMiddle rightMiddle bottomMiddle leftMiddle".split(" "),E=A.getElement().ownerDocument,N=!1;this.select=function(O){var x,I,_=E.getElementById("imageSelector");_||(_=j()),N=!0,x=_.parentNode,I=O.getBoundingClientRect();var S=x.getBoundingClientRect(),u=A.getZoomLevel();x=(I.left-S.left)/u-1,I=(I.top-S.top)/u-1,_.style.display="block",_.style.left=x+"px",_.style.top=I+"px",_.style.width=O.getAttributeNS(M,"width"),_.style.height=O.getAttributeNS(M,"height")},this.clearSelection=function(){var O;N&&(O=E.getElementById("imageSelector"))&&(O.style.display="none"),N=!1},this.isSelectorElement=function(O){var x=E.getElementById("imageSelector");return x?O===x||O.parentNode===x:!1}},function(){function A(j){function M(x){return O=x.which&&String.fromCharCode(x.which)===N,N=void 0,O===!1}function w(){O=!1}function E(x){N=x.data,O=!1}var N,O=!1;this.destroy=function(x){j.unsubscribe("textInput",w),j.unsubscribe("compositionend",E),j.removeFilter("keypress",M),x()},j.subscribe("textInput",w),j.subscribe("compositionend",E),j.addFilter("keypress",M)}gui.InputMethodEditor=function(j,M){function w(J){u&&(J?u.getNode().setAttributeNS("urn:webodf:names:cursor","composing","true"):(u.getNode().removeAttributeNS("urn:webodf:names:cursor","composing"),m.textContent=""))}function E(){V&&(V=!1,w(!1),ne.emit(gui.InputMethodEditor.signalCompositionEnd,{data:Z}),Z="")}function N(){$||($=!0,E(),u&&u.getSelectedRange().collapsed?y.value="":y.value=z.writeToString(u.getSelectedRange().cloneContents()),y.setSelectionRange(0,y.value.length),$=!1)}function O(){M.hasFocus()&&R.trigger()}function x(){ee=void 0,R.cancel(),w(!0),V||ne.emit(gui.InputMethodEditor.signalCompositionStart,{data:""})}function I(J){J=ee=J.data,V=!0,Z+=J,R.trigger()}function _(J){J.data!==ee&&(J=J.data,V=!0,Z+=J,R.trigger()),ee=void 0}function S(){m.textContent=y.value}var u=null,y=M.getEventTrap(),v=y.ownerDocument,m,R,V=!1,Z="",ne=new core.EventNotifier([gui.InputMethodEditor.signalCompositionStart,gui.InputMethodEditor.signalCompositionEnd]),ee,z,P=[],Y,$=!1;this.subscribe=ne.subscribe,this.unsubscribe=ne.unsubscribe,this.registerCursor=function(J){J.getMemberId()===j&&(u=J,u.getNode().appendChild(m),J.subscribe(ops.OdtCursor.signalCursorUpdated,O),M.subscribe("input",S),M.subscribe("compositionupdate",S))},this.removeCursor=function(J){u&&J===j&&(u.getNode().removeChild(m),u.unsubscribe(ops.OdtCursor.signalCursorUpdated,O),M.unsubscribe("input",S),M.unsubscribe("compositionupdate",S),u=null)},this.destroy=function(J){M.unsubscribe("compositionstart",x),M.unsubscribe("compositionend",I),M.unsubscribe("textInput",_),M.unsubscribe("keypress",E),M.unsubscribe("focus",N),core.Async.destroyAll(Y,J)},function(){z=new odf.TextSerializer,z.filter=new odf.OdfNodeFilter,M.subscribe("compositionstart",x),M.subscribe("compositionend",I),M.subscribe("textInput",_),M.subscribe("keypress",E),M.subscribe("focus",N),P.push(new A(M)),Y=P.map(function(J){return J.destroy}),m=v.createElement("span"),m.setAttribute("id","composer"),R=core.Task.createTimeoutTask(N,1),Y.push(R.destroy)}()},gui.InputMethodEditor.signalCompositionStart="input/compositionstart",gui.InputMethodEditor.signalCompositionEnd="input/compositionend"}(),gui.MetadataController=function(A,j){function M(x){N.emit(gui.MetadataController.signalMetadataChanged,x)}function w(x){var I=O.indexOf(x)===-1;return I||runtime.log("Setting "+x+" is restricted."),I}var E=A.getOdtDocument(),N=new core.EventNotifier([gui.MetadataController.signalMetadataChanged]),O=["dc:creator","dc:date","meta:editing-cycles","meta:editing-duration","meta:document-statistic"];this.setMetadata=function(x,I){var _={},S="",u;x&&Object.keys(x).filter(w).forEach(function(y){_[y]=x[y]}),I&&(S=I.filter(w).join(",")),(0<S.length||0<Object.keys(_).length)&&(u=new ops.OpUpdateMetadata,u.init({memberid:j,setProperties:_,removedProperties:0<S.length?{attributes:S}:null}),A.enqueue([u]))},this.getMetadata=function(x){var I;return runtime.assert(typeof x=="string","Property must be a string"),I=x.split(":"),runtime.assert(I.length===2,"Property must be a namespace-prefixed string"),x=odf.Namespaces.lookupNamespaceURI(I[0]),runtime.assert(!!x,"Prefix must be for an ODF namespace."),E.getOdfCanvas().odfContainer().getMetadata(x,I[1])},this.subscribe=function(x,I){N.subscribe(x,I)},this.unsubscribe=function(x,I){N.unsubscribe(x,I)},this.destroy=function(x){E.unsubscribe(ops.OdtDocument.signalMetadataUpdated,M),x()},E.subscribe(ops.OdtDocument.signalMetadataUpdated,M)},gui.MetadataController.signalMetadataChanged="metadata/changed",gui.PasteController=function(A,j,M,w){function E(){x=j.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)===!0?M.isLocalCursorWithinOwnAnnotation():!0}function N(u){u.getMemberId()===w&&E()}var O=A.getOdtDocument(),x=!1,I=odf.Namespaces.textns,_=core.StepDirection.NEXT,S=odf.OdfUtils;this.isEnabled=function(){return x},this.paste=function(u){if(x){var y=O.getCursorPosition(w),v=O.getCursor(w).getNode(),v=S.getParagraphElement(v),m=v.getAttributeNS(I,"style-name")||"",R=y,V=[],Z=O.convertDomPointToCursorStep(v,0,_);u.replace(/\r/g,"").split(`
`).forEach(function(ne){var ee=new ops.OpInsertText,z=new ops.OpSplitParagraph;ee.init({memberid:w,position:R,text:ne,moveCursor:!0}),V.push(ee),R+=ne.length,z.init({memberid:w,position:R,paragraphStyleName:m,sourceParagraphPosition:Z,moveCursor:!0}),V.push(z),Z=R+=1}),V.pop(),A.enqueue(V)}},this.destroy=function(u){O.unsubscribe(ops.Document.signalCursorMoved,N),j.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,E),u()},O.subscribe(ops.Document.signalCursorMoved,N),j.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,E),E()},gui.ClosestXOffsetScanner=function(A){function j(O){return O!==null&&E!==void 0?Math.abs(O-A)>E:!1}function M(O){O!==null&&j(O)===!1&&(E=Math.abs(O-A))}var w=this,E,N=gui.StepInfo.VisualDirection.LEFT_TO_RIGHT;this.token=void 0,this.process=function(O,x,I){var _,S;return O.visualDirection===N?(_=x&&x.right,S=I&&I.left):(_=x&&x.left,S=I&&I.right),j(_)||j(S)?!0:((x||I)&&(M(_),M(S),w.token=O.token),!1)}},gui.LineBoundaryScanner=function(){var A=this,j=null;this.token=void 0,this.process=function(M,w,E){var N;if(N=E)if(j){var x=j;N=Math.min(x.bottom-x.top,E.bottom-E.top);var O=Math.max(x.top,E.top),x=Math.min(x.bottom,E.bottom)-O;N=.4>=(0<N?x/N:0)}else N=!1;return!w||E&&!N||(A.token=M.token),N?!0:(j=(M=j)&&w?{left:Math.min(M.left,w.left),right:Math.max(M.right,w.right),top:Math.min(M.top,w.top),bottom:Math.min(M.bottom,w.bottom)}:M||w,!1)}},gui.ParagraphBoundaryScanner=function(){var A=this,j=!1,M,w=odf.OdfUtils;this.token=void 0,this.process=function(E){var N=w.getParagraphElement(E.container());return j||(M=N,j=!0),M!==N?!0:(A.token=E.token,!1)}},odf.WordBoundaryFilter=function(A,j){function M(m,R,V){for(var Z=null,ne=A.getRootNode(),ee;m!==ne&&m!==null&&Z===null;)ee=0>R?m.previousSibling:m.nextSibling,V(ee)===NodeFilter.FILTER_ACCEPT&&(Z=ee),m=m.parentNode;return Z}function w(m,R){var V;return m===null?v.NO_NEIGHBOUR:O.isCharacterElement(m)?v.SPACE_CHAR:m.nodeType===E||O.isTextSpan(m)||O.isHyperlink(m)?(V=m.textContent.charAt(R()),I.test(V)?v.SPACE_CHAR:x.test(V)?v.PUNCTUATION_CHAR:v.WORD_CHAR):v.OTHER}var E=Node.TEXT_NODE,N=Node.ELEMENT_NODE,O=odf.OdfUtils,x=/[!-#%-*,-\/:-;?-@\[-\]_{}\u00a1\u00ab\u00b7\u00bb\u00bf;\u00b7\u055a-\u055f\u0589-\u058a\u05be\u05c0\u05c3\u05c6\u05f3-\u05f4\u0609-\u060a\u060c-\u060d\u061b\u061e-\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0964-\u0965\u0970\u0df4\u0e4f\u0e5a-\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u104a-\u104f\u10fb\u1361-\u1368\u166d-\u166e\u169b-\u169c\u16eb-\u16ed\u1735-\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944-\u1945\u19de-\u19df\u1a1e-\u1a1f\u1b5a-\u1b60\u1c3b-\u1c3f\u1c7e-\u1c7f\u2000-\u206e\u207d-\u207e\u208d-\u208e\u3008-\u3009\u2768-\u2775\u27c5-\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc-\u29fd\u2cf9-\u2cfc\u2cfe-\u2cff\u2e00-\u2e7e\u3000-\u303f\u30a0\u30fb\ua60d-\ua60f\ua673\ua67e\ua874-\ua877\ua8ce-\ua8cf\ua92e-\ua92f\ua95f\uaa5c-\uaa5f\ufd3e-\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a-\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a-\uff1b\uff1f-\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]|\ud800[\udd00-\udd01\udf9f\udfd0]|\ud802[\udd1f\udd3f\ude50-\ude58]|\ud809[\udc00-\udc7e]/,I=/\s/,_=core.PositionFilter.FilterResult.FILTER_ACCEPT,S=core.PositionFilter.FilterResult.FILTER_REJECT,u=odf.WordBoundaryFilter.IncludeWhitespace.TRAILING,y=odf.WordBoundaryFilter.IncludeWhitespace.LEADING,v={NO_NEIGHBOUR:0,SPACE_CHAR:1,PUNCTUATION_CHAR:2,WORD_CHAR:3,OTHER:4};this.acceptPosition=function(m){var R=m.container(),V=m.leftNode(),Z=m.rightNode(),ne=m.unfilteredDomOffset,ee=function(){return m.unfilteredDomOffset()-1};return R.nodeType===N&&(Z===null&&(Z=M(R,1,m.getNodeFilter())),V===null&&(V=M(R,-1,m.getNodeFilter()))),R!==Z&&(ne=function(){return 0}),R!==V&&V!==null&&(ee=function(){return V.textContent.length-1}),R=w(V,ee),Z=w(Z,ne),R===v.WORD_CHAR&&Z===v.WORD_CHAR||R===v.PUNCTUATION_CHAR&&Z===v.PUNCTUATION_CHAR||j===u&&R!==v.NO_NEIGHBOUR&&Z===v.SPACE_CHAR||j===y&&R===v.SPACE_CHAR&&Z!==v.NO_NEIGHBOUR?S:_}},odf.WordBoundaryFilter.IncludeWhitespace={None:0,TRAILING:1,LEADING:2},gui.SelectionController=function(A,j){function M(F){var re=F.spec();(F.isEdit||re.memberid===j)&&($=void 0,J.cancel())}function w(){var F=V.getCursor(j).getNode();return V.createStepIterator(F,0,[ee,P],V.getRootElement(F))}function E(F,re,W){W=new odf.WordBoundaryFilter(V,W);var ie=V.getRootElement(F)||V.getRootNode(),he=V.createRootFilter(ie);return V.createStepIterator(F,re,[ee,he,W],ie)}function N(F,re){return re?{anchorNode:F.startContainer,anchorOffset:F.startOffset,focusNode:F.endContainer,focusOffset:F.endOffset}:{anchorNode:F.endContainer,anchorOffset:F.endOffset,focusNode:F.startContainer,focusOffset:F.startOffset}}function O(F,re,W){var ie=new ops.OpMoveCursor;return ie.init({memberid:j,position:F,length:re||0,selectionType:W}),ie}function x(F,re,W){var ie;ie=V.getCursor(j),ie=N(ie.getSelectedRange(),ie.hasForwardSelection()),ie.focusNode=F,ie.focusOffset=re,W||(ie.anchorNode=ie.focusNode,ie.anchorOffset=ie.focusOffset),F=V.convertDomToCursorRange(ie),A.enqueue([O(F.position,F.length)])}function I(F){var re;re=E(F.startContainer,F.startOffset,te),re.roundToPreviousStep()&&F.setStart(re.container(),re.offset()),re=E(F.endContainer,F.endOffset,q),re.roundToNextStep()&&F.setEnd(re.container(),re.offset())}function _(F){var W=ne.getParagraphElements(F),re=W[0],W=W[W.length-1];re&&F.setStart(re,0),W&&(ne.isParagraph(F.endContainer)&&F.endOffset===0?F.setEndBefore(W):F.setEnd(W,W.childNodes.length))}function S(F,re,W,ie){var he,ve;ie?(he=W.startContainer,ve=W.startOffset):(he=W.endContainer,ve=W.endOffset),Z.containsNode(F,he)||(ve=0>Z.comparePoints(F,0,he,ve)?0:F.childNodes.length,he=F),F=V.createStepIterator(he,ve,re,ne.getParagraphElement(he)||F),F.roundToClosestStep()||runtime.assert(!1,"No step found in requested range"),ie?W.setStart(F.container(),F.offset()):W.setEnd(F.container(),F.offset())}function u(F,re){var W=w();W.advanceStep(F)&&x(W.container(),W.offset(),re)}function y(F,re){var W,ie=$,he=[new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner];ie===void 0&&Y&&(ie=Y()),isNaN(ie)||(W=w(),z.moveToFilteredStep(W,F,he)&&W.advanceStep(F)&&(he=[new gui.ClosestXOffsetScanner(ie),new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner],z.moveToFilteredStep(W,F,he)&&(x(W.container(),W.offset(),re),$=ie,J.restart())))}function v(F,re){var W=w(),ie=[new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner];z.moveToFilteredStep(W,F,ie)&&x(W.container(),W.offset(),re)}function m(F,re){var W=V.getCursor(j),W=N(W.getSelectedRange(),W.hasForwardSelection()),W=E(W.focusNode,W.focusOffset,te);W.advanceStep(F)&&x(W.container(),W.offset(),re)}function R(F,re,W){var he=!1,ie=V.getCursor(j),ie=N(ie.getSelectedRange(),ie.hasForwardSelection()),he=V.getRootElement(ie.focusNode);runtime.assert(!!he,"SelectionController: Cursor outside root"),ie=V.createStepIterator(ie.focusNode,ie.focusOffset,[ee,P],he),ie.roundToClosestStep(),ie.advanceStep(F)&&(W=W(ie.container()))&&(F===K?(ie.setPosition(W,0),he=ie.roundToNextStep()):(ie.setPosition(W,W.childNodes.length),he=ie.roundToPreviousStep()),he&&x(ie.container(),ie.offset(),re))}var V=A.getOdtDocument(),Z=core.DomUtils,ne=odf.OdfUtils,ee=V.getPositionFilter(),z=new gui.GuiStepUtils,P=V.createRootFilter(j),Y=null,$,J,te=odf.WordBoundaryFilter.IncludeWhitespace.TRAILING,q=odf.WordBoundaryFilter.IncludeWhitespace.LEADING,K=core.StepDirection.PREVIOUS,U=core.StepDirection.NEXT;this.selectionToRange=function(F){var re=0<=Z.comparePoints(F.anchorNode,F.anchorOffset,F.focusNode,F.focusOffset),W=F.focusNode.ownerDocument.createRange();return re?(W.setStart(F.anchorNode,F.anchorOffset),W.setEnd(F.focusNode,F.focusOffset)):(W.setStart(F.focusNode,F.focusOffset),W.setEnd(F.anchorNode,F.anchorOffset)),{range:W,hasForwardSelection:re}},this.rangeToSelection=N,this.selectImage=function(F){var W=V.getRootElement(F),re=V.createRootFilter(W),W=V.createStepIterator(F,0,[re,V.getPositionFilter()],W),ie;W.roundToPreviousStep()||runtime.assert(!1,"No walkable position before frame"),re=W.container(),ie=W.offset(),W.setPosition(F,F.childNodes.length),W.roundToNextStep()||runtime.assert(!1,"No walkable position after frame"),F=V.convertDomToCursorRange({anchorNode:re,anchorOffset:ie,focusNode:W.container(),focusOffset:W.offset()}),F=O(F.position,F.length,ops.OdtCursor.RegionSelection),A.enqueue([F])},this.expandToWordBoundaries=I,this.expandToParagraphBoundaries=_,this.selectRange=function(F,re,W){var ie=V.getOdfCanvas().getElement(),he,ve=[ee];he=Z.containsNode(ie,F.startContainer),ie=Z.containsNode(ie,F.endContainer),(he||ie)&&(he&&ie&&(W===2?I(F):3<=W&&_(F)),(W=re?V.getRootElement(F.startContainer):V.getRootElement(F.endContainer))||(W=V.getRootNode()),ve.push(V.createRootFilter(W)),S(W,ve,F,!0),S(W,ve,F,!1),F=N(F,re),re=V.convertDomToCursorRange(F),F=V.getCursorSelection(j),(re.position!==F.position||re.length!==F.length)&&(F=O(re.position,re.length,ops.OdtCursor.RangeSelection),A.enqueue([F])))},this.moveCursorToLeft=function(){return u(K,!1),!0},this.moveCursorToRight=function(){return u(U,!1),!0},this.extendSelectionToLeft=function(){return u(K,!0),!0},this.extendSelectionToRight=function(){return u(U,!0),!0},this.setCaretXPositionLocator=function(F){Y=F},this.moveCursorUp=function(){return y(K,!1),!0},this.moveCursorDown=function(){return y(U,!1),!0},this.extendSelectionUp=function(){return y(K,!0),!0},this.extendSelectionDown=function(){return y(U,!0),!0},this.moveCursorBeforeWord=function(){return m(K,!1),!0},this.moveCursorPastWord=function(){return m(U,!1),!0},this.extendSelectionBeforeWord=function(){return m(K,!0),!0},this.extendSelectionPastWord=function(){return m(U,!0),!0},this.moveCursorToLineStart=function(){return v(K,!1),!0},this.moveCursorToLineEnd=function(){return v(U,!1),!0},this.extendSelectionToLineStart=function(){return v(K,!0),!0},this.extendSelectionToLineEnd=function(){return v(U,!0),!0},this.extendSelectionToParagraphStart=function(){return R(K,!0,ne.getParagraphElement),!0},this.extendSelectionToParagraphEnd=function(){return R(U,!0,ne.getParagraphElement),!0},this.moveCursorToParagraphStart=function(){return R(K,!1,ne.getParagraphElement),!0},this.moveCursorToParagraphEnd=function(){return R(U,!1,ne.getParagraphElement),!0},this.moveCursorToDocumentStart=function(){return R(K,!1,V.getRootElement),!0},this.moveCursorToDocumentEnd=function(){return R(U,!1,V.getRootElement),!0},this.extendSelectionToDocumentStart=function(){return R(K,!0,V.getRootElement),!0},this.extendSelectionToDocumentEnd=function(){return R(U,!0,V.getRootElement),!0},this.extendSelectionToEntireDocument=function(){var F=V.getCursor(j),F=V.getRootElement(F.getNode()),re,W,ie;return runtime.assert(!!F,"SelectionController: Cursor outside root"),ie=V.createStepIterator(F,0,[ee,P],F),ie.roundToClosestStep(),re=ie.container(),W=ie.offset(),ie.setPosition(F,F.childNodes.length),ie.roundToClosestStep(),F=V.convertDomToCursorRange({anchorNode:re,anchorOffset:W,focusNode:ie.container(),focusOffset:ie.offset()}),A.enqueue([O(F.position,F.length)]),!0},this.destroy=function(F){V.unsubscribe(ops.OdtDocument.signalOperationStart,M),core.Async.destroyAll([J.destroy],F)},function(){J=core.Task.createTimeoutTask(function(){$=void 0},2e3),V.subscribe(ops.OdtDocument.signalOperationStart,M)}()},gui.TextController=function(A,j,M,w,E,N){function O(){R=j.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)===!0?M.isLocalCursorWithinOwnAnnotation():!0}function x(ne){ne.getMemberId()===w&&O()}function I(ne,ee,z){var P=[y.getPositionFilter()];return z&&P.push(y.createRootFilter(ne.startContainer)),z=y.createStepIterator(ne.startContainer,ne.startOffset,P,ee),z.roundToClosestStep()||runtime.assert(!1,"No walkable step found in paragraph element at range start"),ee=y.convertDomPointToCursorStep(z.container(),z.offset()),ne.collapsed?ne=ee:(z.setPosition(ne.endContainer,ne.endOffset),z.roundToClosestStep()||runtime.assert(!1,"No walkable step found in paragraph element at range end"),ne=y.convertDomPointToCursorStep(z.container(),z.offset())),{position:ee,length:ne-ee}}function _(ne){var ee,z,P,Y=v.getParagraphElements(ne),$=ne.cloneRange(),J=[];return ee=Y[0],1<Y.length&&(v.hasNoODFContent(ee)&&(ee=Y[Y.length-1]),z=ee.getAttributeNS(odf.Namespaces.textns,"style-name")||""),Y.forEach(function(te,q){var K,U;$.setStart(te,0),$.collapse(!0),K=I($,te,!1).position,0<q&&(U=new ops.OpMergeParagraph,U.init({memberid:w,paragraphStyleName:z,destinationStartPosition:P,sourceStartPosition:K,moveCursor:q===1}),J.unshift(U)),P=K,$.selectNodeContents(te),(K=m.rangeIntersection($,ne))&&(K=I(K,te,!0),0<K.length&&(U=new ops.OpRemoveText,U.init({memberid:w,position:K.position,length:K.length}),J.unshift(U)))}),J}function S(ne){return 0>ne.length&&(ne.position+=ne.length,ne.length=-ne.length),ne}function u(ne){if(!R)return!1;var ee,z=y.getCursor(w).getSelectedRange().cloneRange(),P=S(y.getCursorSelection(w)),Y;if(P.length===0){P=void 0,ee=y.getCursor(w).getNode(),Y=y.getRootElement(ee);var $=[y.getPositionFilter(),y.createRootFilter(Y)];Y=y.createStepIterator(ee,0,$,Y),Y.roundToClosestStep()&&(ne?Y.nextStep():Y.previousStep())&&(P=S(y.convertDomToCursorRange({anchorNode:ee,anchorOffset:0,focusNode:Y.container(),focusOffset:Y.offset()})),ne?(z.setStart(ee,0),z.setEnd(Y.container(),Y.offset())):(z.setStart(Y.container(),Y.offset()),z.setEnd(ee,0)))}return P&&A.enqueue(_(z)),P!==void 0}var y=A.getOdtDocument(),v=odf.OdfUtils,m=core.DomUtils,R=!1,V=odf.Namespaces.textns,Z=core.StepDirection.NEXT;this.isEnabled=function(){return R},this.enqueueParagraphSplittingOps=function(){if(!R)return!1;var P=y.getCursor(w),ne=P.getSelectedRange(),ee=S(y.getCursorSelection(w)),z=[],P=v.getParagraphElement(P.getNode()),Y=P.getAttributeNS(V,"style-name")||"";return 0<ee.length&&(z=z.concat(_(ne))),ne=new ops.OpSplitParagraph,ne.init({memberid:w,position:ee.position,paragraphStyleName:Y,sourceParagraphPosition:y.convertDomPointToCursorStep(P,0,Z),moveCursor:!0}),z.push(ne),N&&(ee=N(ee.position+1),z=z.concat(ee)),A.enqueue(z),!0},this.removeTextByBackspaceKey=function(){return u(!1)},this.removeTextByDeleteKey=function(){return u(!0)},this.removeCurrentSelection=function(){if(!R)return!1;var ne=y.getCursor(w).getSelectedRange();return A.enqueue(_(ne)),!0},this.insertText=function(ne){if(R){var ee=y.getCursor(w).getSelectedRange(),z=S(y.getCursorSelection(w)),P=[],Y=!1;0<z.length&&(P=P.concat(_(ee)),Y=!0),ee=new ops.OpInsertText,ee.init({memberid:w,position:z.position,text:ne,moveCursor:!0}),P.push(ee),E&&(ne=E(z.position,ne.length,Y))&&P.push(ne),A.enqueue(P)}},this.destroy=function(ne){y.unsubscribe(ops.Document.signalCursorMoved,x),j.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,O),ne()},y.subscribe(ops.Document.signalCursorMoved,x),j.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,O),O()},gui.UndoManager=function(){},gui.UndoManager.prototype.subscribe=function(A,j){},gui.UndoManager.prototype.unsubscribe=function(A,j){},gui.UndoManager.prototype.setDocument=function(A){},gui.UndoManager.prototype.setInitialState=function(){},gui.UndoManager.prototype.initialize=function(){},gui.UndoManager.prototype.purgeInitialState=function(){},gui.UndoManager.prototype.setPlaybackFunction=function(A){},gui.UndoManager.prototype.hasUndoStates=function(){},gui.UndoManager.prototype.hasRedoStates=function(){},gui.UndoManager.prototype.moveForward=function(A){},gui.UndoManager.prototype.moveBackward=function(A){},gui.UndoManager.prototype.onOperationExecuted=function(A){},gui.UndoManager.prototype.isDocumentModified=function(){},gui.UndoManager.prototype.setDocumentModified=function(A){},gui.UndoManager.signalUndoStackChanged="undoStackChanged",gui.UndoManager.signalUndoStateCreated="undoStateCreated",gui.UndoManager.signalUndoStateModified="undoStateModified",gui.UndoManager.signalDocumentModifiedChanged="documentModifiedChanged",gui.SessionControllerOptions=function(){this.annotationsEnabled=this.directParagraphStylingEnabled=this.directTextStylingEnabled=!1},function(){var A=core.PositionFilter.FilterResult.FILTER_ACCEPT;gui.SessionController=function(j,M,w,E){function N(je,Xe){var _t=ie.getDOMDocument(),fe=null;return _t.caretRangeFromPoint?(_t=_t.caretRangeFromPoint(je,Xe),fe={container:_t.startContainer,offset:_t.startOffset}):_t.caretPositionFromPoint&&(_t=_t.caretPositionFromPoint(je,Xe))&&_t.offsetNode&&(fe={container:_t.offsetNode,offset:_t.offset}),fe}function O(je){var Xe=ie.getCursor(M).getSelectedRange();Xe.collapsed?je.preventDefault():le.setDataFromRange(je,Xe)?ut.removeCurrentSelection():runtime.log("Cut operation failed")}function x(){return ie.getCursor(M).getSelectedRange().collapsed!==!1}function I(je){var Xe=ie.getCursor(M).getSelectedRange();Xe.collapsed?je.preventDefault():le.setDataFromRange(je,Xe)||runtime.log("Copy operation failed")}function _(je){var Xe;W.clipboardData&&W.clipboardData.getData?Xe=W.clipboardData.getData("Text"):je.clipboardData&&je.clipboardData.getData&&(Xe=je.clipboardData.getData("text/plain")),Xe&&(ut.removeCurrentSelection(),Rt.paste(Xe)),je.preventDefault?je.preventDefault():je.returnValue=!1}function S(){return!1}function u(je){$e&&$e.onOperationExecuted(je)}function y(je){ie.emit(ops.OdtDocument.signalUndoStackChanged,je)}function v(){var je;return $e?(je=ue.hasFocus(),$e.moveBackward(1),je&&ue.focus(),!0):!1}function m(){var je;return $e?(je=ue.hasFocus(),$e.moveForward(1),je&&ue.focus(),!0):!1}function R(je){var Xe=ie.getCursor(M).getSelectedRange(),_t=(je.target||je.srcElement||null).getAttribute("end");Xe&&_t&&(je=N(je.clientX,je.clientY))&&(At.setUnfilteredPosition(je.container,je.offset),Ve.acceptPosition(At)===A&&(Xe=Xe.cloneRange(),_t==="left"?Xe.setStart(At.container(),At.unfilteredDomOffset()):Xe.setEnd(At.container(),At.unfilteredDomOffset()),w.setSelectedRange(Xe,_t==="right"),ie.emit(ops.Document.signalCursorMoved,w)))}function V(){at.selectRange(w.getSelectedRange(),w.hasForwardSelection(),1)}function Z(){var je=W.getSelection(),Xe=0<je.rangeCount&&at.selectionToRange(je);Re&&Xe&&(ke=!0,yt.clearSelection(),At.setUnfilteredPosition(je.focusNode,je.focusOffset),Ve.acceptPosition(At)===A&&(et===2?at.expandToWordBoundaries(Xe.range):3<=et&&at.expandToParagraphBoundaries(Xe.range),w.setSelectedRange(Xe.range,Xe.hasForwardSelection),ie.emit(ops.Document.signalCursorMoved,w)))}function ne(je){var Xe=je.target||je.srcElement||null,_t=ie.getCursor(M);(Re=Xe!==null&&Ne.containsNode(ie.getOdfCanvas().getElement(),Xe))&&(ke=!1,Xe=ie.getRootElement(Xe)||ie.getRootNode(),Ve=ie.createRootFilter(Xe),et=je.button===0?je.detail:0,_t&&je.shiftKey?W.getSelection().collapse(_t.getAnchorNode(),0):(je=W.getSelection(),Xe=_t.getSelectedRange(),je.extend?_t.hasForwardSelection()?(je.collapse(Xe.startContainer,Xe.startOffset),je.extend(Xe.endContainer,Xe.endOffset)):(je.collapse(Xe.endContainer,Xe.endOffset),je.extend(Xe.startContainer,Xe.startOffset)):(je.removeAllRanges(),je.addRange(Xe.cloneRange()))),1<et&&Z())}function ee(je){var _t=ie.getRootElement(je),Xe=ie.createRootFilter(_t),_t=ie.createStepIterator(je,0,[Xe,ie.getPositionFilter()],_t);return _t.setPosition(je,je.childNodes.length),_t.roundToNextStep()?{container:_t.container(),offset:_t.offset()}:null}function z(je){var Xe;Xe=(Xe=W.getSelection())?{anchorNode:Xe.anchorNode,anchorOffset:Xe.anchorOffset,focusNode:Xe.focusNode,focusOffset:Xe.focusOffset}:null;var _t=W.getSelection().isCollapsed,fe,tt;Xe.anchorNode||Xe.focusNode||!(fe=N(je.clientX,je.clientY))||(Xe.anchorNode=fe.container,Xe.anchorOffset=fe.offset,Xe.focusNode=Xe.anchorNode,Xe.focusOffset=Xe.anchorOffset),ze.isImage(Xe.focusNode)&&Xe.focusOffset===0&&ze.isCharacterFrame(Xe.focusNode.parentNode)?(tt=Xe.focusNode.parentNode,fe=tt.getBoundingClientRect(),je.clientX>fe.left&&(fe=ee(tt))&&(Xe.focusNode=fe.container,Xe.focusOffset=fe.offset,_t&&(Xe.anchorNode=Xe.focusNode,Xe.anchorOffset=Xe.focusOffset))):ze.isImage(Xe.focusNode.firstChild)&&Xe.focusOffset===1&&ze.isCharacterFrame(Xe.focusNode)&&(fe=ee(Xe.focusNode))&&(Xe.anchorNode=Xe.focusNode=fe.container,Xe.anchorOffset=Xe.focusOffset=fe.offset),Xe.anchorNode&&Xe.focusNode&&(Xe=at.selectionToRange(Xe),at.selectRange(Xe.range,Xe.hasForwardSelection,je.button===0?je.detail:0)),ue.focus()}function P(je){var Xe;(Xe=N(je.clientX,je.clientY))&&(je=Xe.container,Xe=Xe.offset,je={anchorNode:je,anchorOffset:Xe,focusNode:je,focusOffset:Xe},je=at.selectionToRange(je),at.selectRange(je.range,je.hasForwardSelection,2),ue.focus())}function Y(je){var Xe=je.target||je.srcElement||null,_t,fe,tt;ri.processRequests(),Re&&(ze.isImage(Xe)&&ze.isCharacterFrame(Xe.parentNode)&&W.getSelection().isCollapsed?(at.selectImage(Xe.parentNode),ue.focus()):yt.isSelectorElement(Xe)?ue.focus():ke?(Xe=w.getSelectedRange(),fe=Xe.collapsed,ze.isImage(Xe.endContainer)&&Xe.endOffset===0&&ze.isCharacterFrame(Xe.endContainer.parentNode)&&(tt=Xe.endContainer.parentNode,tt=ee(tt))&&(Xe.setEnd(tt.container,tt.offset),fe&&Xe.collapse(!1)),at.selectRange(Xe,w.hasForwardSelection(),je.button===0?je.detail:0),ue.focus()):ki?z(je):(_t=Ne.cloneEvent(je),We=runtime.setTimeout(function(){z(_t)},0)),et=0,ke=Re=!1)}function $(je){var Xe=ie.getCursor(M).getSelectedRange();Xe.collapsed||rt.exportRangeToDataTransfer(je.dataTransfer,Xe)}function J(){Re&&ue.focus(),et=0,ke=Re=!1}function te(je){Y(je)}function q(je){var Xe=je.target||je.srcElement||null,_t=null;Xe.className==="annotationRemoveButton"?(runtime.assert(Se,"Remove buttons are displayed on annotations while annotation editing is disabled in the controller."),_t=Xe.parentNode.getElementsByTagNameNS(odf.Namespaces.officens,"annotation").item(0),be.removeAnnotation(_t),ue.focus()):Xe.getAttribute("class")!=="webodf-draggable"&&Y(je)}function K(je){(je=je.data)&&(je.indexOf(`
`)===-1?ut.insertText(je):Rt.paste(je))}function U(je){return function(){return je(),!0}}function F(je){return function(Xe){return ie.getCursor(M).getSelectionType()===ops.OdtCursor.RangeSelection?je(Xe):!0}}function re(je){ue.unsubscribe("keydown",me.handleEvent),ue.unsubscribe("keypress",De.handleEvent),ue.unsubscribe("keyup",Me.handleEvent),ue.unsubscribe("copy",I),ue.unsubscribe("mousedown",ne),ue.unsubscribe("mousemove",ri.trigger),ue.unsubscribe("mouseup",q),ue.unsubscribe("contextmenu",te),ue.unsubscribe("dragstart",$),ue.unsubscribe("dragend",J),ue.unsubscribe("click",ct.handleClick),ue.unsubscribe("longpress",P),ue.unsubscribe("drag",R),ue.unsubscribe("dragstop",V),ie.unsubscribe(ops.OdtDocument.signalOperationEnd,$t.trigger),ie.unsubscribe(ops.Document.signalCursorAdded,zt.registerCursor),ie.unsubscribe(ops.Document.signalCursorRemoved,zt.removeCursor),ie.unsubscribe(ops.OdtDocument.signalOperationEnd,u),je()}var W=runtime.getWindow(),ie=j.getOdtDocument(),he=new gui.SessionConstraints,ve=new gui.SessionContext(j,M),Ne=core.DomUtils,ze=odf.OdfUtils,rt=new gui.MimeDataExporter,le=new gui.Clipboard(rt),me=new gui.KeyboardHandler,De=new gui.KeyboardHandler,Me=new gui.KeyboardHandler,Re=!1,we=new odf.ObjectNameGenerator(ie.getOdfCanvas().odfContainer(),M),ke=!1,Ve=null,We,$e=null,ue=new gui.EventManager(ie),Se=E.annotationsEnabled,be=new gui.AnnotationController(j,he,M),Fe=new gui.DirectFormattingController(j,he,ve,M,we,E.directTextStylingEnabled,E.directParagraphStylingEnabled),ut=new gui.TextController(j,he,ve,M,Fe.createCursorStyleOp,Fe.createParagraphStyleOps),Pt=new gui.ImageController(j,he,ve,M,we),yt=new gui.ImageSelector(ie.getOdfCanvas()),At=ie.createPositionIterator(ie.getRootNode()),ri,$t,Rt=new gui.PasteController(j,he,ve,M),zt=new gui.InputMethodEditor(M,ue),et=0,ct=new gui.HyperlinkClickHandler(ie.getOdfCanvas().getElement,me,Me),It=new gui.HyperlinkController(j,he,ve,M),at=new gui.SelectionController(j,M),vt=new gui.MetadataController(j,M),Ke=gui.KeyboardHandler.Modifier,Je=gui.KeyboardHandler.KeyCode,ei=W.navigator.appVersion.toLowerCase().indexOf("mac")!==-1,ki=["iPad","iPod","iPhone"].indexOf(W.navigator.platform)!==-1,ti;runtime.assert(W!==null,"Expected to be run in an environment which has a global window, like a browser."),this.undo=v,this.redo=m,this.insertLocalCursor=function(){runtime.assert(j.getOdtDocument().getCursor(M)===void 0,"Inserting local cursor a second time.");var je=new ops.OpAddCursor;je.init({memberid:M}),j.enqueue([je]),ue.focus()},this.removeLocalCursor=function(){runtime.assert(j.getOdtDocument().getCursor(M)!==void 0,"Removing local cursor without inserting before.");var je=new ops.OpRemoveCursor;je.init({memberid:M}),j.enqueue([je])},this.startEditing=function(){zt.subscribe(gui.InputMethodEditor.signalCompositionStart,ut.removeCurrentSelection),zt.subscribe(gui.InputMethodEditor.signalCompositionEnd,K),ue.subscribe("beforecut",x),ue.subscribe("cut",O),ue.subscribe("beforepaste",S),ue.subscribe("paste",_),$e&&$e.initialize(),ue.setEditing(!0),ct.setModifier(ei?Ke.Meta:Ke.Ctrl),me.bind(Je.Backspace,Ke.None,U(ut.removeTextByBackspaceKey),!0),me.bind(Je.Delete,Ke.None,ut.removeTextByDeleteKey),me.bind(Je.Tab,Ke.None,F(function(){return ut.insertText("	"),!0})),ei?(me.bind(Je.Clear,Ke.None,ut.removeCurrentSelection),me.bind(Je.B,Ke.Meta,F(Fe.toggleBold)),me.bind(Je.I,Ke.Meta,F(Fe.toggleItalic)),me.bind(Je.U,Ke.Meta,F(Fe.toggleUnderline)),me.bind(Je.L,Ke.MetaShift,F(Fe.alignParagraphLeft)),me.bind(Je.E,Ke.MetaShift,F(Fe.alignParagraphCenter)),me.bind(Je.R,Ke.MetaShift,F(Fe.alignParagraphRight)),me.bind(Je.J,Ke.MetaShift,F(Fe.alignParagraphJustified)),Se&&me.bind(Je.C,Ke.MetaShift,be.addAnnotation),me.bind(Je.Z,Ke.Meta,v),me.bind(Je.Z,Ke.MetaShift,m)):(me.bind(Je.B,Ke.Ctrl,F(Fe.toggleBold)),me.bind(Je.I,Ke.Ctrl,F(Fe.toggleItalic)),me.bind(Je.U,Ke.Ctrl,F(Fe.toggleUnderline)),me.bind(Je.L,Ke.CtrlShift,F(Fe.alignParagraphLeft)),me.bind(Je.E,Ke.CtrlShift,F(Fe.alignParagraphCenter)),me.bind(Je.R,Ke.CtrlShift,F(Fe.alignParagraphRight)),me.bind(Je.J,Ke.CtrlShift,F(Fe.alignParagraphJustified)),Se&&me.bind(Je.C,Ke.CtrlAlt,be.addAnnotation),me.bind(Je.Z,Ke.Ctrl,v),me.bind(Je.Z,Ke.CtrlShift,m)),De.setDefault(F(function(je){var Xe;return Xe=je.which===null||je.which===void 0?String.fromCharCode(je.keyCode):je.which!==0&&je.charCode!==0?String.fromCharCode(je.which):null,!Xe||je.altKey||je.ctrlKey||je.metaKey?!1:(ut.insertText(Xe),!0)})),De.bind(Je.Enter,Ke.None,F(ut.enqueueParagraphSplittingOps))},this.endEditing=function(){zt.unsubscribe(gui.InputMethodEditor.signalCompositionStart,ut.removeCurrentSelection),zt.unsubscribe(gui.InputMethodEditor.signalCompositionEnd,K),ue.unsubscribe("cut",O),ue.unsubscribe("beforecut",x),ue.unsubscribe("paste",_),ue.unsubscribe("beforepaste",S),ue.setEditing(!1),ct.setModifier(Ke.None),me.bind(Je.Backspace,Ke.None,function(){return!0},!0),me.unbind(Je.Delete,Ke.None),me.unbind(Je.Tab,Ke.None),ei?(me.unbind(Je.Clear,Ke.None),me.unbind(Je.B,Ke.Meta),me.unbind(Je.I,Ke.Meta),me.unbind(Je.U,Ke.Meta),me.unbind(Je.L,Ke.MetaShift),me.unbind(Je.E,Ke.MetaShift),me.unbind(Je.R,Ke.MetaShift),me.unbind(Je.J,Ke.MetaShift),Se&&me.unbind(Je.C,Ke.MetaShift),me.unbind(Je.Z,Ke.Meta),me.unbind(Je.Z,Ke.MetaShift)):(me.unbind(Je.B,Ke.Ctrl),me.unbind(Je.I,Ke.Ctrl),me.unbind(Je.U,Ke.Ctrl),me.unbind(Je.L,Ke.CtrlShift),me.unbind(Je.E,Ke.CtrlShift),me.unbind(Je.R,Ke.CtrlShift),me.unbind(Je.J,Ke.CtrlShift),Se&&me.unbind(Je.C,Ke.CtrlAlt),me.unbind(Je.Z,Ke.Ctrl),me.unbind(Je.Z,Ke.CtrlShift)),De.setDefault(null),De.unbind(Je.Enter,Ke.None)},this.getInputMemberId=function(){return M},this.getSession=function(){return j},this.getSessionConstraints=function(){return he},this.setUndoManager=function(je){$e&&$e.unsubscribe(gui.UndoManager.signalUndoStackChanged,y),($e=je)&&($e.setDocument(ie),$e.setPlaybackFunction(j.enqueue),$e.subscribe(gui.UndoManager.signalUndoStackChanged,y))},this.getUndoManager=function(){return $e},this.getMetadataController=function(){return vt},this.getAnnotationController=function(){return be},this.getDirectFormattingController=function(){return Fe},this.getHyperlinkClickHandler=function(){return ct},this.getHyperlinkController=function(){return It},this.getImageController=function(){return Pt},this.getSelectionController=function(){return at},this.getTextController=function(){return ut},this.getEventManager=function(){return ue},this.getKeyboardHandlers=function(){return{keydown:me,keypress:De}},this.destroy=function(je){var Xe=[ri.destroy,$t.destroy,Fe.destroy,zt.destroy,ue.destroy,ct.destroy,It.destroy,vt.destroy,at.destroy,ut.destroy,re];ti&&Xe.unshift(ti.destroy),runtime.clearTimeout(We),core.Async.destroyAll(Xe,je)},ri=core.Task.createRedrawTask(Z),$t=core.Task.createRedrawTask(function(){var je=ie.getCursor(M);if(je&&je.getSelectionType()===ops.OdtCursor.RegionSelection&&(je=ze.getImageElements(je.getSelectedRange())[0])){yt.select(je.parentNode);return}yt.clearSelection()}),me.bind(Je.Left,Ke.None,F(at.moveCursorToLeft)),me.bind(Je.Right,Ke.None,F(at.moveCursorToRight)),me.bind(Je.Up,Ke.None,F(at.moveCursorUp)),me.bind(Je.Down,Ke.None,F(at.moveCursorDown)),me.bind(Je.Left,Ke.Shift,F(at.extendSelectionToLeft)),me.bind(Je.Right,Ke.Shift,F(at.extendSelectionToRight)),me.bind(Je.Up,Ke.Shift,F(at.extendSelectionUp)),me.bind(Je.Down,Ke.Shift,F(at.extendSelectionDown)),me.bind(Je.Home,Ke.None,F(at.moveCursorToLineStart)),me.bind(Je.End,Ke.None,F(at.moveCursorToLineEnd)),me.bind(Je.Home,Ke.Ctrl,F(at.moveCursorToDocumentStart)),me.bind(Je.End,Ke.Ctrl,F(at.moveCursorToDocumentEnd)),me.bind(Je.Home,Ke.Shift,F(at.extendSelectionToLineStart)),me.bind(Je.End,Ke.Shift,F(at.extendSelectionToLineEnd)),me.bind(Je.Up,Ke.CtrlShift,F(at.extendSelectionToParagraphStart)),me.bind(Je.Down,Ke.CtrlShift,F(at.extendSelectionToParagraphEnd)),me.bind(Je.Home,Ke.CtrlShift,F(at.extendSelectionToDocumentStart)),me.bind(Je.End,Ke.CtrlShift,F(at.extendSelectionToDocumentEnd)),ei?(me.bind(Je.Left,Ke.Alt,F(at.moveCursorBeforeWord)),me.bind(Je.Right,Ke.Alt,F(at.moveCursorPastWord)),me.bind(Je.Left,Ke.Meta,F(at.moveCursorToLineStart)),me.bind(Je.Right,Ke.Meta,F(at.moveCursorToLineEnd)),me.bind(Je.Home,Ke.Meta,F(at.moveCursorToDocumentStart)),me.bind(Je.End,Ke.Meta,F(at.moveCursorToDocumentEnd)),me.bind(Je.Left,Ke.AltShift,F(at.extendSelectionBeforeWord)),me.bind(Je.Right,Ke.AltShift,F(at.extendSelectionPastWord)),me.bind(Je.Left,Ke.MetaShift,F(at.extendSelectionToLineStart)),me.bind(Je.Right,Ke.MetaShift,F(at.extendSelectionToLineEnd)),me.bind(Je.Up,Ke.AltShift,F(at.extendSelectionToParagraphStart)),me.bind(Je.Down,Ke.AltShift,F(at.extendSelectionToParagraphEnd)),me.bind(Je.Up,Ke.MetaShift,F(at.extendSelectionToDocumentStart)),me.bind(Je.Down,Ke.MetaShift,F(at.extendSelectionToDocumentEnd)),me.bind(Je.A,Ke.Meta,F(at.extendSelectionToEntireDocument))):(me.bind(Je.Left,Ke.Ctrl,F(at.moveCursorBeforeWord)),me.bind(Je.Right,Ke.Ctrl,F(at.moveCursorPastWord)),me.bind(Je.Left,Ke.CtrlShift,F(at.extendSelectionBeforeWord)),me.bind(Je.Right,Ke.CtrlShift,F(at.extendSelectionPastWord)),me.bind(Je.A,Ke.Ctrl,F(at.extendSelectionToEntireDocument))),ki&&(ti=new gui.IOSSafariSupport(ue)),ue.subscribe("keydown",me.handleEvent),ue.subscribe("keypress",De.handleEvent),ue.subscribe("keyup",Me.handleEvent),ue.subscribe("copy",I),ue.subscribe("mousedown",ne),ue.subscribe("mousemove",ri.trigger),ue.subscribe("mouseup",q),ue.subscribe("contextmenu",te),ue.subscribe("dragstart",$),ue.subscribe("dragend",J),ue.subscribe("click",ct.handleClick),ue.subscribe("longpress",P),ue.subscribe("drag",R),ue.subscribe("dragstop",V),ie.subscribe(ops.OdtDocument.signalOperationEnd,$t.trigger),ie.subscribe(ops.Document.signalCursorAdded,zt.registerCursor),ie.subscribe(ops.Document.signalCursorRemoved,zt.removeCursor),ie.subscribe(ops.OdtDocument.signalOperationEnd,u)}}(),gui.CaretManager=function(A,j){function M(_){return N.hasOwnProperty(_)?N[_]:null}function w(){return Object.keys(N).map(function(_){return N[_]})}function E(_){var S=N[_];S&&(delete N[_],_===A.getInputMemberId()?(x.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,S.ensureVisible),x.unsubscribe(ops.Document.signalCursorMoved,S.refreshCursorBlinking),I.unsubscribe("compositionupdate",S.handleUpdate),I.unsubscribe("compositionend",S.handleUpdate),I.unsubscribe("focus",S.setFocus),I.unsubscribe("blur",S.removeFocus),O.removeEventListener("focus",S.show,!1),O.removeEventListener("blur",S.hide,!1)):x.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,S.handleUpdate),S.destroy(function(){}))}var N={},O=runtime.getWindow(),x=A.getSession().getOdtDocument(),I=A.getEventManager();this.registerCursor=function(_,S,u){var y=_.getMemberId();return _=new gui.Caret(_,j,S,u),N[y]=_,y===A.getInputMemberId()?(runtime.log("Starting to track input on new cursor of "+y),x.subscribe(ops.OdtDocument.signalProcessingBatchEnd,_.ensureVisible),x.subscribe(ops.Document.signalCursorMoved,_.refreshCursorBlinking),I.subscribe("compositionupdate",_.handleUpdate),I.subscribe("compositionend",_.handleUpdate),I.subscribe("focus",_.setFocus),I.subscribe("blur",_.removeFocus),O.addEventListener("focus",_.show,!1),O.addEventListener("blur",_.hide,!1),_.setOverlayElement(I.getEventTrap())):x.subscribe(ops.OdtDocument.signalProcessingBatchEnd,_.handleUpdate),_},this.getCaret=M,this.getCarets=w,this.destroy=function(_){var S=w().map(function(u){return u.destroy});A.getSelectionController().setCaretXPositionLocator(null),x.unsubscribe(ops.Document.signalCursorRemoved,E),N={},core.Async.destroyAll(S,_)},A.getSelectionController().setCaretXPositionLocator(function(){var _=M(A.getInputMemberId()),S;return _&&(S=_.getBoundingClientRect()),S?S.right:void 0}),x.subscribe(ops.Document.signalCursorRemoved,E)},gui.EditInfoHandle=function(A){var j=[],M,w=A.ownerDocument,E=w.documentElement.namespaceURI;this.setEdits=function(N){j=N;var O,x,I,_;for(core.DomUtils.removeAllChildNodes(M),N=0;N<j.length;N+=1)O=w.createElementNS(E,"div"),O.className="editInfo",x=w.createElementNS(E,"span"),x.className="editInfoColor",x.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",j[N].memberid),I=w.createElementNS(E,"span"),I.className="editInfoAuthor",I.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",j[N].memberid),_=w.createElementNS(E,"span"),_.className="editInfoTime",_.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",j[N].memberid),_.appendChild(w.createTextNode(j[N].time.toString())),O.appendChild(x),O.appendChild(I),O.appendChild(_),M.appendChild(O)},this.show=function(){M.style.display="block"},this.hide=function(){M.style.display="none"},this.destroy=function(N){A.removeChild(M),N()},M=w.createElementNS(E,"div"),M.setAttribute("class","editInfoHandle"),M.style.display="none",A.appendChild(M)},ops.EditInfo=function(A,j){function M(){var N=[],O;for(O in E)E.hasOwnProperty(O)&&N.push({memberid:O,time:E[O].time});return N.sort(function(x,I){return x.time-I.time}),N}var w,E={};this.getNode=function(){return w},this.getOdtDocument=function(){return j},this.getEdits=function(){return E},this.getSortedEdits=function(){return M()},this.addEdit=function(N,O){E[N]={time:O}},this.clearEdits=function(){E={}},this.destroy=function(N){A.parentNode&&A.removeChild(w),N()},w=j.getDOMDocument().createElementNS("urn:webodf:names:editinfo","editinfo"),A.insertBefore(w,A.firstChild)},gui.EditInfoMarker=function(A,j){function M(S,u){return runtime.setTimeout(function(){O.style.opacity=S},u)}var w=this,E,N,O,x,I,_;this.addEdit=function(S,u){var y=Date.now()-u;A.addEdit(S,u),N.setEdits(A.getSortedEdits()),O.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",S),runtime.clearTimeout(I),runtime.clearTimeout(_),1e4>y?(x=M(1,0),I=M(.5,1e4-y),_=M(.2,2e4-y)):1e4<=y&&2e4>y?(x=M(.5,0),_=M(.2,2e4-y)):x=M(.2,0)},this.getEdits=function(){return A.getEdits()},this.clearEdits=function(){A.clearEdits(),N.setEdits([]),O.hasAttributeNS("urn:webodf:names:editinfo","editinfo:memberid")&&O.removeAttributeNS("urn:webodf:names:editinfo","editinfo:memberid")},this.getEditInfo=function(){return A},this.show=function(){O.style.display="block"},this.hide=function(){w.hideHandle(),O.style.display="none"},this.showHandle=function(){N.show()},this.hideHandle=function(){N.hide()},this.destroy=function(S){runtime.clearTimeout(x),runtime.clearTimeout(I),runtime.clearTimeout(_),E.removeChild(O),N.destroy(function(u){u?S(u):A.destroy(S)})},function(){var S=A.getOdtDocument().getDOMDocument();O=S.createElementNS(S.documentElement.namespaceURI,"div"),O.setAttribute("class","editInfoMarker"),O.onmouseover=function(){w.showHandle()},O.onmouseout=function(){w.hideHandle()},E=A.getNode(),E.appendChild(O),N=new gui.EditInfoHandle(E),j||w.hide()}()},gui.HyperlinkTooltipView=function(A,j){var M=core.DomUtils,w=odf.OdfUtils,E=runtime.getWindow(),N,O,x;runtime.assert(E!==null,"Expected to be run in an environment which has a global window, like a browser."),this.showTooltip=function(I){var _=I.target||I.srcElement,S=A.getSizer(),u=A.getZoomLevel(),y;e:{for(;_;){if(w.isHyperlink(_))break e;if(w.isParagraph(_)||w.isInlineRoot(_))break;_=_.parentNode}_=null}if(_){M.containsNode(S,x)||S.appendChild(x),y=O;var v;switch(j()){case gui.KeyboardHandler.Modifier.Ctrl:v=runtime.tr("Ctrl-click to follow link");break;case gui.KeyboardHandler.Modifier.Meta:v=runtime.tr("\u2318-click to follow link");break;default:v=""}y.textContent=v,N.textContent=w.getHyperlinkTarget(_),x.style.display="block",y=E.innerWidth-x.offsetWidth-15,_=I.clientX>y?y:I.clientX+15,y=E.innerHeight-x.offsetHeight-10,I=I.clientY>y?y:I.clientY+10,S=S.getBoundingClientRect(),_=(_-S.left)/u,I=(I-S.top)/u,x.style.left=_+"px",x.style.top=I+"px"}},this.hideTooltip=function(){x.style.display="none"},this.destroy=function(I){x.parentNode&&x.parentNode.removeChild(x),I()},function(){var I=A.getElement().ownerDocument;N=I.createElement("span"),O=I.createElement("span"),N.className="webodf-hyperlinkTooltipLink",O.className="webodf-hyperlinkTooltipText",x=I.createElement("div"),x.className="webodf-hyperlinkTooltip",x.appendChild(N),x.appendChild(O),A.getElement().appendChild(x)}()},gui.OdfFieldView=function(A){function j(){var N=odf.OdfSchema.getFields().map(function(O){return O.replace(":","|")}),E=N.join(`,
`)+`
{ background-color: #D0D0D0; }
`,N=N.map(function(O){return O+":empty::after"}).join(`,
`)+`
{ content:' '; white-space: pre; }
`;return E+`
`+N}var M,w=A.getElement().ownerDocument;this.showFieldHighlight=function(){M.appendChild(w.createTextNode(j()))},this.hideFieldHighlight=function(){for(var E=M.sheet,N=E.cssRules;N.length;)E.deleteRule(N.length-1)},this.destroy=function(E){M.parentNode&&M.parentNode.removeChild(M),E()},M=function(){var E=w.getElementsByTagName("head").item(0),N=w.createElement("style"),O="";return N.type="text/css",N.media="screen, print, handheld, projection",odf.Namespaces.forEachPrefix(function(x,I){O+="@namespace "+x+" url("+I+`);
`}),N.appendChild(w.createTextNode(O)),E.appendChild(N),N}()},gui.ShadowCursor=function(A){var j=A.getDOMDocument().createRange(),M=!0;this.removeFromDocument=function(){},this.getMemberId=function(){return gui.ShadowCursor.ShadowCursorMemberId},this.getSelectedRange=function(){return j},this.setSelectedRange=function(w,E){j=w,M=E!==!1},this.hasForwardSelection=function(){return M},this.getDocument=function(){return A},this.getSelectionType=function(){return ops.OdtCursor.RangeSelection},j.setStart(A.getRootNode(),0)},gui.ShadowCursor.ShadowCursorMemberId="",gui.SelectionView=function(A){},gui.SelectionView.prototype.rerender=function(){},gui.SelectionView.prototype.show=function(){},gui.SelectionView.prototype.hide=function(){},gui.SelectionView.prototype.destroy=function(A){},gui.SelectionViewManager=function(A){function j(){return Object.keys(M).map(function(w){return M[w]})}var M={};this.getSelectionView=function(w){return M.hasOwnProperty(w)?M[w]:null},this.getSelectionViews=j,this.removeSelectionView=function(w){M.hasOwnProperty(w)&&(M[w].destroy(function(){}),delete M[w])},this.hideSelectionView=function(w){M.hasOwnProperty(w)&&M[w].hide()},this.showSelectionView=function(w){M.hasOwnProperty(w)&&M[w].show()},this.rerenderSelectionViews=function(){Object.keys(M).forEach(function(w){M[w].rerender()})},this.registerCursor=function(w,E){var N=w.getMemberId(),O=new A(w);return E?O.show():O.hide(),M[N]=O},this.destroy=function(w){function E(O,x){x?w(x):O<N.length?N[O].destroy(function(I){E(O+1,I)}):w()}var N=j();E(0,void 0)}},gui.SessionViewOptions=function(){this.caretBlinksOnRangeSelect=this.caretAvatarsInitiallyVisible=this.editInfoMarkersInitiallyVisible=!0},function(){function A(j,M){return j!==void 0?!!j:M}gui.SessionView=function(j,M,w,E,N,O){function x(U){U.memberId===M&&$.getViewport().scrollIntoView(U.annotation.getBoundingClientRect())}function I(){var U=document.getElementsByTagName("head").item(0),F=document.createElement("style");return F.type="text/css",F.media="screen, print, handheld, projection",U.appendChild(F),F}function _(U,F,re){function W(ie,he,ve){he=ie+'[editinfo|memberid="'+U+'"]'+ve+he;e:{var Ne=ee.firstChild;for(ie=ie+'[editinfo|memberid="'+U+'"]'+ve+"{";Ne;){if(Ne.nodeType===Node.TEXT_NODE&&Ne.data.indexOf(ie)===0){ie=Ne;break e}Ne=Ne.nextSibling}ie=null}ie?ie.data=he:ee.appendChild(document.createTextNode(he))}W("div.editInfoMarker","{ background-color: "+re+"; }",""),W("span.editInfoColor","{ background-color: "+re+"; }",""),W("span.editInfoAuthor",'{ content: "'+F+'"; }',":before"),W("dc|creator","{ background-color: "+re+"; }",""),W(".webodf-selectionOverlay","{ fill: "+re+"; stroke: "+re+";}",""),U===M&&(W(".webodf-touchEnabled .webodf-selectionOverlay","{ display: block; }"," > .webodf-draggable"),U=gui.ShadowCursor.ShadowCursorMemberId,W(".webodf-selectionOverlay","{ fill: "+re+"; stroke: "+re+";}",""),W(".webodf-touchEnabled .webodf-selectionOverlay","{ display: block; }"," > .webodf-draggable"))}function S(U){var F,re;for(re in P)P.hasOwnProperty(re)&&(F=P[re],U?F.show():F.hide())}function u(U){N.getCarets().forEach(function(F){U?F.showHandle():F.hideHandle()})}function y(U){var F=U.getMemberId();U=U.getProperties(),_(F,U.fullName,U.color)}function v(U){var F=U.getMemberId(),re=w.getOdtDocument().getMember(F).getProperties();N.registerCursor(U,q,K),O.registerCursor(U,!0),(U=N.getCaret(F))&&(U.setAvatarImageUrl(re.imageUrl),U.setColor(re.color)),runtime.log("+++ View here +++ eagerly created an Caret for '"+F+"'! +++")}function m(U){U=U.getMemberId();var F=O.getSelectionView(M),re=O.getSelectionView(gui.ShadowCursor.ShadowCursorMemberId),W=N.getCaret(M);U===M?(re.hide(),F&&F.show(),W&&W.show()):U===gui.ShadowCursor.ShadowCursorMemberId&&(re.show(),F&&F.hide(),W&&W.hide())}function R(U){O.removeSelectionView(U)}function V(U){var F=U.paragraphElement,re=U.memberId;U=U.timeStamp;var W,ie="",he=F.getElementsByTagNameNS("urn:webodf:names:editinfo","editinfo").item(0);he?(ie=he.getAttributeNS("urn:webodf:names:editinfo","id"),W=P[ie]):(ie=Math.random().toString(),W=new ops.EditInfo(F,w.getOdtDocument()),W=new gui.EditInfoMarker(W,te),he=F.getElementsByTagNameNS("urn:webodf:names:editinfo","editinfo").item(0),he.setAttributeNS("urn:webodf:names:editinfo","id",ie),P[ie]=W),W.addEdit(re,new Date(U)),J.trigger()}function Z(){var U;z.hasChildNodes()&&core.DomUtils.removeAllChildNodes(z),E.getState(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN)===!0&&(U=w.getOdtDocument().getMember(M))&&(U=U.getProperties().fullName,z.appendChild(document.createTextNode(".annotationWrapper:not([creator = '"+U+"']) .annotationRemoveButton { display: none; }")))}function ne(U){var F=Object.keys(P).map(function(re){return P[re]});Y.unsubscribe(ops.Document.signalMemberAdded,y),Y.unsubscribe(ops.Document.signalMemberUpdated,y),Y.unsubscribe(ops.Document.signalCursorAdded,v),Y.unsubscribe(ops.Document.signalCursorRemoved,R),Y.unsubscribe(ops.OdtDocument.signalParagraphChanged,V),Y.unsubscribe(ops.Document.signalCursorMoved,m),Y.unsubscribe(ops.OdtDocument.signalParagraphChanged,O.rerenderSelectionViews),Y.unsubscribe(ops.OdtDocument.signalTableAdded,O.rerenderSelectionViews),Y.unsubscribe(ops.OdtDocument.signalParagraphStyleModified,O.rerenderSelectionViews),E.unsubscribe(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN,Z),Y.unsubscribe(ops.Document.signalMemberAdded,Z),Y.unsubscribe(ops.Document.signalMemberUpdated,Z),ee.parentNode.removeChild(ee),z.parentNode.removeChild(z),function re(W,ie){ie?U(ie):W<F.length?F[W].destroy(function(he){re(W+1,he)}):U()}(0,void 0)}var ee,z,P={},Y,$,J,te=A(j.editInfoMarkersInitiallyVisible,!0),q=A(j.caretAvatarsInitiallyVisible,!0),K=A(j.caretBlinksOnRangeSelect,!0);this.showEditInfoMarkers=function(){te||(te=!0,S(te))},this.hideEditInfoMarkers=function(){te&&(te=!1,S(te))},this.showCaretAvatars=function(){q||(q=!0,u(q))},this.hideCaretAvatars=function(){q&&(q=!1,u(q))},this.getSession=function(){return w},this.getCaret=function(U){return N.getCaret(U)},this.destroy=function(U){var F=[J.destroy,ne];Y.unsubscribe(ops.OdtDocument.signalAnnotationAdded,x),core.Async.destroyAll(F,U)},Y=w.getOdtDocument(),$=Y.getOdfCanvas(),Y.subscribe(ops.OdtDocument.signalAnnotationAdded,x),Y.subscribe(ops.Document.signalMemberAdded,y),Y.subscribe(ops.Document.signalMemberUpdated,y),Y.subscribe(ops.Document.signalCursorAdded,v),Y.subscribe(ops.Document.signalCursorRemoved,R),Y.subscribe(ops.OdtDocument.signalParagraphChanged,V),Y.subscribe(ops.Document.signalCursorMoved,m),Y.subscribe(ops.OdtDocument.signalParagraphChanged,O.rerenderSelectionViews),Y.subscribe(ops.OdtDocument.signalTableAdded,O.rerenderSelectionViews),Y.subscribe(ops.OdtDocument.signalParagraphStyleModified,O.rerenderSelectionViews),E.subscribe(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN,Z),Y.subscribe(ops.Document.signalMemberAdded,Z),Y.subscribe(ops.Document.signalMemberUpdated,Z),ee=I(),ee.appendChild(document.createTextNode("@namespace editinfo url(urn:webodf:names:editinfo);")),ee.appendChild(document.createTextNode("@namespace dc url(http://purl.org/dc/elements/1.1/);")),z=I(),Z(),J=core.Task.createRedrawTask(function(){var U=$.getAnnotationViewManager();U&&(U.rehighlightAnnotations(),Y.fixCursorPositions())})}}(),gui.SvgSelectionView=function(A){function j(){var U=y.getRootNode();v!==U&&(v=U,m=y.getCanvas().getSizer(),m.appendChild(V),V.setAttribute("class","webodf-selectionOverlay"),ne.setAttribute("class","webodf-draggable"),ee.setAttribute("class","webodf-draggable"),ne.setAttribute("end","left"),ee.setAttribute("end","right"),ne.setAttribute("r",8),ee.setAttribute("r",8),V.appendChild(Z),V.appendChild(ne),V.appendChild(ee))}function M(U){return U=U.getBoundingClientRect(),!!(U&&U.height!==0)}function w(U){var F=z.getTextElements(U,!0,!1),re=U.cloneRange(),W=U.cloneRange();if(U=U.cloneRange(),!F.length)return null;var ie;e:{ie=0;var he=F[ie],ve=re.startContainer===he?re.startOffset:0,Ne=ve;for(re.setStart(he,ve),re.setEnd(he,Ne);!M(re);){if(he.nodeType===Node.ELEMENT_NODE&&Ne<he.childNodes.length)Ne=he.childNodes.length;else if(he.nodeType===Node.TEXT_NODE&&Ne<he.length)Ne+=1;else if(F[ie])he=F[ie],ie+=1,ve=Ne=0;else{ie=!1;break e}re.setStart(he,ve),re.setEnd(he,Ne)}ie=!0}if(!ie)return null;e:{for(ie=F.length-1,he=F[ie],Ne=ve=W.endContainer===he?W.endOffset:he.nodeType===Node.TEXT_NODE?he.length:he.childNodes.length,W.setStart(he,ve),W.setEnd(he,Ne);!M(W);){if(he.nodeType===Node.ELEMENT_NODE&&0<ve)ve=0;else if(he.nodeType===Node.TEXT_NODE&&0<ve)--ve;else if(F[ie])he=F[ie],--ie,ve=Ne=he.length||he.childNodes.length;else{F=!1;break e}W.setStart(he,ve),W.setEnd(he,Ne)}F=!0}return F?(U.setStart(re.startContainer,re.startOffset),U.setEnd(W.endContainer,W.endOffset),{firstRange:re,lastRange:W,fillerRange:U}):null}function E(U,F){var re={};return re.top=Math.min(U.top,F.top),re.left=Math.min(U.left,F.left),re.right=Math.max(U.right,F.right),re.bottom=Math.max(U.bottom,F.bottom),re.width=re.right-re.left,re.height=re.bottom-re.top,re}function N(U,F){return F&&0<F.width&&0<F.height&&(U=U?E(U,F):F),U}function O(U){function F(ke){return J.setUnfilteredPosition(ke,0),Re.acceptNode(ke)===te&&Me.acceptPosition(J)===te?te:q}function re(ke){var Ve=null;return F(ke)===te&&(Ve=P.getBoundingClientRect(ke)),Ve}var W=U.commonAncestorContainer,ie=U.startContainer,he=U.endContainer,ve=U.startOffset,Ne=U.endOffset,ze,rt,le=null,me,De=R.createRange(),Me,Re=new odf.OdfNodeFilter,we;if(ie===W||he===W)return De=U.cloneRange(),le=De.getBoundingClientRect(),De.detach(),le;for(U=ie;U.parentNode!==W;)U=U.parentNode;for(rt=he;rt.parentNode!==W;)rt=rt.parentNode;for(Me=y.createRootFilter(ie),W=U.nextSibling;W&&W!==rt;)me=re(W),le=N(le,me),W=W.nextSibling;if(z.isParagraph(U))le=N(le,P.getBoundingClientRect(U));else if(U.nodeType===Node.TEXT_NODE)W=U,De.setStart(W,ve),De.setEnd(W,W===rt?Ne:W.length),me=De.getBoundingClientRect(),le=N(le,me);else for(we=R.createTreeWalker(U,NodeFilter.SHOW_TEXT,F,!1),W=we.currentNode=ie;W&&W!==he;)De.setStart(W,ve),De.setEnd(W,W.length),me=De.getBoundingClientRect(),le=N(le,me),ze=W,ve=0,W=we.nextNode();if(ze||(ze=ie),z.isParagraph(rt))le=N(le,P.getBoundingClientRect(rt));else if(rt.nodeType===Node.TEXT_NODE)W=rt,De.setStart(W,W===U?ve:0),De.setEnd(W,Ne),me=De.getBoundingClientRect(),le=N(le,me);else for(we=R.createTreeWalker(rt,NodeFilter.SHOW_TEXT,F,!1),W=we.currentNode=he;W&&W!==ze;)De.setStart(W,0),De.setEnd(W,Ne),me=De.getBoundingClientRect(),le=N(le,me),(W=we.previousNode())&&(Ne=W.length);return le}function x(U,F){var re=U.getBoundingClientRect(),W={width:0};return W.top=re.top,W.bottom=re.bottom,W.height=re.height,W.left=W.right=F?re.right:re.left,W}function I(){var U=A.getSelectedRange(),F;if(F=$&&A.getSelectionType()===ops.OdtCursor.RangeSelection&&!U.collapsed){j();var re=P.getBoundingClientRect(m),W=Y.getZoomLevel(),U=w(U),ie,he,ve,Ne,ze,rt;if(U){F=U.firstRange,ie=U.lastRange,he=U.fillerRange,ve=P.translateRect(x(F,!1),re,W),ze=P.translateRect(x(ie,!0),re,W),Ne=(Ne=O(he))?P.translateRect(Ne,re,W):E(ve,ze),rt=Ne.left,Ne=ve.left+Math.max(0,Ne.width-(ve.left-Ne.left)),re=Math.min(ve.top,ze.top),W=ze.top+ze.height,rt=[{x:ve.left,y:re+ve.height},{x:ve.left,y:re},{x:Ne,y:re},{x:Ne,y:W-ze.height},{x:ze.right,y:W-ze.height},{x:ze.right,y:W},{x:rt,y:W},{x:rt,y:re+ve.height},{x:ve.left,y:re+ve.height}],Ne="";var le;for(le=0;le<rt.length;le+=1)Ne+=rt[le].x+","+rt[le].y+" ";Z.setAttribute("points",Ne),ne.setAttribute("cx",ve.left),ne.setAttribute("cy",re+ve.height/2),ee.setAttribute("cx",ze.right),ee.setAttribute("cy",W-ze.height/2),F.detach(),ie.detach(),he.detach()}F=!!U}V.style.display=F?"block":"none"}function _(U){$&&U===A&&K.trigger()}function S(U){U=8/U,ne.setAttribute("r",U),ee.setAttribute("r",U)}function u(U){m.removeChild(V),m.classList.remove("webodf-virtualSelections"),A.getDocument().unsubscribe(ops.Document.signalCursorMoved,_),Y.unsubscribe(gui.ZoomHelper.signalZoomChanged,S),U()}var y=A.getDocument(),v,m,R=y.getDOMDocument(),V=R.createElementNS("http://www.w3.org/2000/svg","svg"),Z=R.createElementNS("http://www.w3.org/2000/svg","polygon"),ne=R.createElementNS("http://www.w3.org/2000/svg","circle"),ee=R.createElementNS("http://www.w3.org/2000/svg","circle"),z=odf.OdfUtils,P=core.DomUtils,Y=y.getCanvas().getZoomHelper(),$=!0,J=A.getDocument().createPositionIterator(y.getRootNode()),te=NodeFilter.FILTER_ACCEPT,q=NodeFilter.FILTER_REJECT,K;this.rerender=function(){$&&K.trigger()},this.show=function(){$=!0,K.trigger()},this.hide=function(){$=!1,K.trigger()},this.destroy=function(U){core.Async.destroyAll([K.destroy,u],U)},function(){var U=A.getMemberId();K=core.Task.createRedrawTask(I),j(),V.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",U),m.classList.add("webodf-virtualSelections"),A.getDocument().subscribe(ops.Document.signalCursorMoved,_),Y.subscribe(gui.ZoomHelper.signalZoomChanged,S),S(Y.getZoomLevel())}()},gui.UndoStateRules=function(){function A(E,N){var O=E.length;this.previous=function(){for(--O;0<=O;--O)if(N(E[O]))return E[O];return null}}function j(E){E=E.spec();var N;return E.hasOwnProperty("position")&&(N=E.position),N}function M(E){return E.isEdit}function w(E,N,O){return O?(E=j(E),N=j(N),O=j(O),E-N===N-O):(O=j(E)-j(N),O===0||Math.abs(O)===1)}this.isEditOperation=M,this.isPartOfOperationSet=function(E,N){var O=E.group!==void 0,x;if(!E.isEdit||N.length===0||(x=N[N.length-1],O&&E.group===x.group))return!0;e:switch(E.spec().optype){case"RemoveText":case"InsertText":x=!0;break e;default:x=!1}if(x&&N.some(M)){if(O){var I;O=E.spec().optype,x=new A(N,M);var _=x.previous(),S=null,u,y;for(runtime.assert(!!_,"No edit operations found in state"),y=_.group,runtime.assert(y!==void 0,"Operation has no group"),u=1;_&&_.group===y;){if(O===_.spec().optype){I=_;break}_=x.previous()}if(I){for(_=x.previous();_;){if(_.group!==y){if(u===2)break;y=_.group,u+=1}if(O===_.spec().optype){S=_;break}_=x.previous()}I=w(E,I,S)}else I=!1;return I}return I=E.spec().optype,O=new A(N,M),x=O.previous(),runtime.assert(!!x,"No edit operations found in state"),I=I===x.spec().optype?w(E,x,O.previous()):!1,I}return!1}},function(){function A(w,E){this.mainId=w!==void 0?w:-1,this.subId=E!==void 0?E:-1}function j(w,E,N){function O(S,u){return S+(w.isEditOperation(u)?1:0)}var x,I,_;this.addOperation=function(S){w.isEditOperation(S)&&(_+=1),I.push(S)},this.isNextStateId=function(S){return S.mainId===x&&S.subId===_},this.getNextStateId=function(){return new A(x,_)},this.getOperations=function(){return I},x=M+=1,I=E||[],_=E&&N?E.reduce(O,0):0}var M=0;gui.TrivialUndoManager=function(w){function E(){return z.isNextStateId(ee)!==!0}function N(q){q=q.getOperations(),0<q.length&&(te=!0,Z(q),te=!1)}function O(){$.emit(gui.UndoManager.signalUndoStackChanged,{undoAvailable:v.hasUndoStates(),redoAvailable:v.hasRedoStates()})}function x(q){var K=E();q!==K&&$.emit(gui.UndoManager.signalDocumentModifiedChanged,K)}function I(){z!==V&&z!==P[P.length-1]&&P.push(z)}function _(q){var K=q.previousSibling||q.nextSibling;q.parentNode.removeChild(q),m.normalizeTextNodes(K)}function S(q){return Object.keys(q).map(function(K){return q[K]})}function u(q){function K(he){var ve=he.spec();if(re[ve.memberid])switch(ve.optype){case"AddCursor":U[ve.memberid]||(U[ve.memberid]=he,delete re[ve.memberid],--W);break;case"MoveCursor":F[ve.memberid]||(F[ve.memberid]=he)}}var U={},F={},re={},W,ie;for(ie=q.pop(),ne.getMemberIds().forEach(function(he){re[he]=!0}),W=Object.keys(re).length;ie&&0<W;)ie=ie.getOperations(),ie.reverse(),ie.forEach(K),ie=q.pop();return new j(J,S(U).concat(S(F)))}function y(){var q=E(),K=R=ne.cloneDocumentElement();m.getElementsByTagNameNS(K,"urn:webodf:names:cursor","cursor").forEach(_),m.getElementsByTagNameNS(K,"urn:webodf:names:cursor","anchor").forEach(_),I(),z=V=u([V].concat(P)),P.length=0,Y.length=0,q||(ee=z.getNextStateId()),O(),x(q)}var v=this,m=core.DomUtils,R,V,Z,ne,ee,z,P=[],Y=[],$=new core.EventNotifier([gui.UndoManager.signalUndoStackChanged,gui.UndoManager.signalUndoStateCreated,gui.UndoManager.signalUndoStateModified,gui.UndoManager.signalDocumentModifiedChanged,gui.TrivialUndoManager.signalDocumentRootReplaced]),J=w||new gui.UndoStateRules,te=!1;this.subscribe=function(q,K){$.subscribe(q,K)},this.unsubscribe=function(q,K){$.unsubscribe(q,K)},this.isDocumentModified=E,this.setDocumentModified=function(q){E()!==q&&(ee=q?new A:z.getNextStateId(),$.emit(gui.UndoManager.signalDocumentModifiedChanged,q))},this.hasUndoStates=function(){return 0<P.length},this.hasRedoStates=function(){return 0<Y.length},this.setDocument=function(q){ne=q},this.purgeInitialState=function(){var q=E();P.length=0,Y.length=0,z=V=new j(J),ee=z.getNextStateId(),R=null,O(),x(q)},this.setInitialState=y,this.initialize=function(){R||y()},this.setPlaybackFunction=function(q){Z=q},this.onOperationExecuted=function(q){if(!te){var K=E();J.isEditOperation(q)&&(z===V||0<Y.length)||!J.isPartOfOperationSet(q,z.getOperations())?(Y.length=0,I(),z=new j(J,[q],!0),P.push(z),$.emit(gui.UndoManager.signalUndoStateCreated,{operations:z.getOperations()}),O()):(z.addOperation(q),$.emit(gui.UndoManager.signalUndoStateModified,{operations:z.getOperations()})),x(K)}},this.moveForward=function(q){for(var K=0,U=E(),F;q&&Y.length;)F=Y.pop(),P.push(F),N(F),--q,K+=1;return K&&(z=P[P.length-1],O(),x(U)),K},this.moveBackward=function(q){for(var K=0,U=E();q&&P.length;)Y.push(P.pop()),--q,K+=1;return K&&(ne.getMemberIds().forEach(function(F){ne.hasCursor(F)&&ne.removeCursor(F)}),ne.setDocumentElement(R.cloneNode(!0)),$.emit(gui.TrivialUndoManager.signalDocumentRootReplaced,{}),N(V),P.forEach(N),z=P[P.length-1]||V,O(),x(U)),K},z=V=new j(J),ee=z.getNextStateId()},gui.TrivialUndoManager.signalDocumentRootReplaced="documentRootReplaced"}(),odf.GraphicProperties=function(A,j,M){var w=this,E=odf.Namespaces.stylens,N=odf.Namespaces.svgns;this.verticalPos=function(){return w.data.value("verticalPos")},this.verticalRel=function(){return w.data.value("verticalRel")},this.horizontalPos=function(){return w.data.value("horizontalPos")},this.horizontalRel=function(){return w.data.value("horizontalRel")},this.strokeWidth=function(){return w.data.value("strokeWidth")},w.data=new odf.LazyStyleProperties(M===void 0?void 0:M.data,{verticalPos:function(){var O=A.getAttributeNS(E,"vertical-pos");return O===""?void 0:O},verticalRel:function(){var O=A.getAttributeNS(E,"vertical-rel");return O===""?void 0:O},horizontalPos:function(){var O=A.getAttributeNS(E,"horizontal-pos");return O===""?void 0:O},horizontalRel:function(){var O=A.getAttributeNS(E,"horizontal-rel");return O===""?void 0:O},strokeWidth:function(){var O=A.getAttributeNS(N,"stroke-width");return j.parseLength(O)}})},odf.ComputedGraphicProperties=function(){var A;this.setGraphicProperties=function(j){A=j},this.verticalPos=function(){return A&&A.verticalPos()||"from-top"},this.verticalRel=function(){return A&&A.verticalRel()||"page"},this.horizontalPos=function(){return A&&A.horizontalPos()||"from-left"},this.horizontalRel=function(){return A&&A.horizontalRel()||"page"}},odf.PageLayoutProperties=function(A,j,M){var w=this,E=odf.Namespaces.fons;this.pageHeight=function(){return w.data.value("pageHeight")||1123},this.pageWidth=function(){return w.data.value("pageWidth")||794},w.data=new odf.LazyStyleProperties(M===void 0?void 0:M.data,{pageHeight:function(){var N;return A&&(N=A.getAttributeNS(E,"page-height"),N=j.parseLength(N)),N},pageWidth:function(){var N;return A&&(N=A.getAttributeNS(E,"page-width"),N=j.parseLength(N)),N}})},odf.PageLayout=function(A,j,M){var w=null;A&&(w=j.getPropertiesElement("page-layout-properties",A)),this.pageLayout=new odf.PageLayoutProperties(w,j,M&&M.pageLayout)},odf.PageLayoutCache=function(){},odf.PageLayoutCache.prototype.getPageLayout=function(A){},odf.PageLayoutCache.prototype.getDefaultPageLayout=function(){},odf.ParagraphProperties=function(A,j,M){var w=this,E=odf.Namespaces.fons;this.marginTop=function(){return w.data.value("marginTop")},w.data=new odf.LazyStyleProperties(M===void 0?void 0:M.data,{marginTop:function(){var N=A.getAttributeNS(E,"margin-top");return j.parsePositiveLengthOrPercent(N,"marginTop",M&&M.data)}})},odf.ComputedParagraphProperties=function(){var A={},j=[];this.setStyleChain=function(M){j=M,A={}},this.marginTop=function(){var M,w;if(A.hasOwnProperty("marginTop"))M=A.marginTop;else{for(w=0;M===void 0&&w<j.length;w+=1)M=j[w].marginTop();A.marginTop=M}return M||0}},odf.TextProperties=function(A,j,M){var w=this,E=odf.Namespaces.fons;this.fontSize=function(){return w.data.value("fontSize")},w.data=new odf.LazyStyleProperties(M===void 0?void 0:M.data,{fontSize:function(){var N=A.getAttributeNS(E,"font-size");return j.parsePositiveLengthOrPercent(N,"fontSize",M&&M.data)}})},odf.ComputedTextProperties=function(){var A={},j=[];this.setStyleChain=function(M){j=M,A={}},this.fontSize=function(){var M,w;if(A.hasOwnProperty("fontSize"))M=A.fontSize;else{for(w=0;M===void 0&&w<j.length;w+=1)M=j[w].fontSize();A.fontSize=M}return M||12}},odf.MasterPage=function(A,j){var M;A?(M=A.getAttributeNS(odf.Namespaces.stylens,"page-layout-name"),this.pageLayout=j.getPageLayout(M)):this.pageLayout=j.getDefaultPageLayout()},odf.MasterPageCache=function(){},odf.MasterPageCache.prototype.getMasterPage=function(A){},odf.StylePileEntry=function(A,j,M,w){this.masterPage=function(){var E=A.getAttributeNS(odf.Namespaces.stylens,"master-page-name"),N=null;return E&&(N=M.getMasterPage(E)),N},function(E){var N=A.getAttributeNS(odf.Namespaces.stylens,"family"),O=null;(N==="graphic"||N==="chart")&&(E.graphic=w===void 0?void 0:w.graphic,O=j.getPropertiesElement("graphic-properties",A,O),O!==null&&(E.graphic=new odf.GraphicProperties(O,j,E.graphic))),(N==="paragraph"||N==="table-cell"||N==="graphic"||N==="presentation"||N==="chart")&&(E.paragraph=w===void 0?void 0:w.paragraph,O=j.getPropertiesElement("paragraph-properties",A,O),O!==null&&(E.paragraph=new odf.ParagraphProperties(O,j,E.paragraph))),(N==="text"||N==="paragraph"||N==="table-cell"||N==="graphic"||N==="presentation"||N==="chart")&&(E.text=w===void 0?void 0:w.text,O=j.getPropertiesElement("text-properties",A,O),O!==null&&(E.text=new odf.TextProperties(O,j,E.text)))}(this)},odf.StylePile=function(A,j){function M(S,u){var y,v;return S.hasAttributeNS(w,"parent-style-name")&&(v=S.getAttributeNS(w,"parent-style-name"),u.indexOf(v)===-1&&(y=_(v,u))),new odf.StylePileEntry(S,A,j,y)}var w=odf.Namespaces.stylens,E={},N={},O,x={},I={},_;_=function(S,u){var y=x[S],v;return!y&&(v=E[S])&&(u.push(S),y=M(v,u),x[S]=y),y},this.getStyle=function(S){var u=I[S]||x[S],y,v=[];return u||(y=N[S],y||(y=E[S])&&v.push(S),y&&(u=M(y,v))),u},this.addCommonStyle=function(S){var u;S.hasAttributeNS(w,"name")&&(u=S.getAttributeNS(w,"name"),E.hasOwnProperty(u)||(E[u]=S))},this.addAutomaticStyle=function(S){var u;S.hasAttributeNS(w,"name")&&(u=S.getAttributeNS(w,"name"),N.hasOwnProperty(u)||(N[u]=S))},this.setDefaultStyle=function(S){O===void 0&&(O=M(S,[]))},this.getDefaultStyle=function(){return O}},odf.ComputedGraphicStyle=function(){this.text=new odf.ComputedTextProperties,this.paragraph=new odf.ComputedParagraphProperties,this.graphic=new odf.ComputedGraphicProperties},odf.ComputedParagraphStyle=function(){this.text=new odf.ComputedTextProperties,this.paragraph=new odf.ComputedParagraphProperties},odf.ComputedTextStyle=function(){this.text=new odf.ComputedTextProperties},odf.StyleCache=function(A){function j(J,te,q,K){te=q.getAttributeNS(te,"class-names");var U;if(te)for(te=te.split(" "),U=0;U<te.length;U+=1)(q=te[U])&&(K.push(J),K.push(q))}function M(J,te){var q=V.getStyleName("paragraph",J);return q!==void 0&&(te.push("paragraph"),te.push(q)),J.namespaceURI!==m||J.localName!=="h"&&J.localName!=="p"||j("paragraph",m,J,te),te}function w(J,te,q){var K=[],U,F,re,W;for(U=0;U<J.length;U+=2)re=J[U],W=J[U+1],re=x[re],W=re.getStyle(W),W!==void 0&&(W=W[te],W!==void 0&&W!==F&&(K.push(W),F=W));return re=x[q],(W=re.getDefaultStyle())&&(W=W[te],W!==void 0&&W!==F&&K.push(W)),K}function E(J,te){var q=V.getStyleName("text",J),K=J.parentNode;return q!==void 0&&(te.push("text"),te.push(q)),J.localName==="span"&&J.namespaceURI===m&&j("text",m,J,te),!K||K===A||(K.namespaceURI!==m||K.localName!=="p"&&K.localName!=="h"?E(K,te):M(K,te)),te}function N(J){return J=J.getAttributeNS(R,"family"),x[J]}var O=this,x,I,_,S,u,y,v,m=odf.Namespaces.textns,R=odf.Namespaces.stylens,V=new odf.StyleInfo,Z=new odf.StyleParseUtils,ne,ee,z,P,Y,$;this.getComputedGraphicStyle=function(J){var te=[];J=V.getStyleName("graphic",J),J!==void 0&&(te.push("graphic"),te.push(J)),J=te.join("/");var q=S[J];return runtime.assert(te.length%2===0,"Invalid style chain."),q===void 0&&(q=new odf.ComputedGraphicStyle,q.graphic.setGraphicProperties(w(te,"graphic","graphic")[0]),q.text.setStyleChain(w(te,"text","graphic")),q.paragraph.setStyleChain(w(te,"paragraph","graphic")),S[J]=q),q},this.getComputedParagraphStyle=function(J){J=M(J,[]);var te=J.join("/"),q=_[te];return runtime.assert(J.length%2===0,"Invalid style chain."),q===void 0&&(q=new odf.ComputedParagraphStyle,q.text.setStyleChain(w(J,"text","paragraph")),q.paragraph.setStyleChain(w(J,"paragraph","paragraph")),_[te]=q),q},this.getComputedTextStyle=function(J){J=E(J,[]);var te=J.join("/"),q=I[te];return runtime.assert(J.length%2===0,"Invalid style chain."),q===void 0&&(q=new odf.ComputedTextStyle,q.text.setStyleChain(w(J,"text","text")),I[te]=q),q},this.getPageLayout=function(J){var te=$[J];return te||((te=Y[J])?(te=new odf.PageLayout(te,Z,P),$[J]=te):te=P),te},this.getDefaultPageLayout=function(){return P},this.getMasterPage=function(J){var te=ee[J];return te===void 0&&((te=ne[J])?(te=new odf.MasterPage(te,O),ee[J]=te):te=null),te},this.getDefaultMasterPage=function(){return z},this.update=function(){var J,te,q=null,K=null;for(I={},_={},S={},ne={},ee={},$={},Y={},u=new odf.StylePile(Z,O),y=new odf.StylePile(Z,O),v=new odf.StylePile(Z,O),x={text:u,paragraph:y,graphic:v},J=A.styles.firstElementChild;J;)J.namespaceURI===R&&((te=N(J))?J.localName==="style"?te.addCommonStyle(J):J.localName==="default-style"&&te.setDefaultStyle(J):J.localName==="default-page-layout"&&(q=J)),J=J.nextElementSibling;for(P=new odf.PageLayout(q,Z),J=A.automaticStyles.firstElementChild;J;)J.namespaceURI===R&&((te=N(J))&&J.localName==="style"?te.addAutomaticStyle(J):J.localName==="page-layout"&&(Y[J.getAttributeNS(R,"name")]=J)),J=J.nextElementSibling;for(J=A.masterStyles.firstElementChild;J;)J.namespaceURI===R&&J.localName==="master-page"&&(K=K||J,te=J,q=te.getAttributeNS(R,"name"),0<q.length&&!ne.hasOwnProperty(q)&&(ne[q]=te)),J=J.nextElementSibling;z=new odf.MasterPage(K,O)}},ops.OperationTransformMatrix=function(){function A(u){u.position+=u.length,u.length*=-1}function j(u){var y=0>u.length;return y&&A(u),y}function M(u,y){function v(R){u[R]===y&&m.push(R)}var m=[];return u&&["style:parent-style-name","style:next-style-name"].forEach(v),m}function w(u,y){function v(m){u[m]===y&&delete u[m]}u&&["style:parent-style-name","style:next-style-name"].forEach(v)}function E(u){var y={};return Object.keys(u).forEach(function(v){y[v]=typeof u[v]=="object"?E(u[v]):u[v]}),y}function N(u,y,v,m){var R,V=!1,Z=!1,ne,ee=[];if(m&&m.attributes&&(ee=m.attributes.split(",")),u&&(v||0<ee.length)&&Object.keys(u).forEach(function(z){var P=u[z],Y;typeof P!="object"&&(v&&(Y=v[z]),Y!==void 0?(delete u[z],Z=!0,Y===P&&(delete v[z],V=!0)):ee.indexOf(z)!==-1&&(delete u[z],Z=!0))}),y&&y.attributes&&(v||0<ee.length)){for(ne=y.attributes.split(","),m=0;m<ne.length;m+=1)R=ne[m],(v&&v[R]!==void 0||ee&&ee.indexOf(R)!==-1)&&(ne.splice(m,1),--m,Z=!0);0<ne.length?y.attributes=ne.join(","):delete y.attributes}return{majorChanged:V,minorChanged:Z}}function O(u){for(var y in u)if(u.hasOwnProperty(y))return!0;return!1}function x(u){for(var y in u)if(u.hasOwnProperty(y)&&(y!=="attributes"||0<u.attributes.length))return!0;return!1}function I(u,y,v,m,R){var V=u?u[R]:null,Z=y?y[R]:null,ne=v?v[R]:null,ee=m?m[R]:null,z;return z=N(V,Z,ne,ee),V&&!O(V)&&delete u[R],Z&&!x(Z)&&delete y[R],ne&&!O(ne)&&delete v[R],ee&&!x(ee)&&delete m[R],z}function _(u,y){return{opSpecsA:[u],opSpecsB:[y]}}var S;S={AddAnnotation:{AddAnnotation:function(u,y,v){var m;return u.position<y.position?(m=u,v=y):y.position<u.position?(m=y,v=u):(m=v?u:y,v=v?y:u),v.position<m.position+m.length&&(m.length+=2),v.position+=2,{opSpecsA:[u],opSpecsB:[y]}},AddCursor:_,AddMember:_,AddStyle:_,ApplyDirectStyling:function(u,y){return u.position<=y.position?y.position+=2:u.position<=y.position+y.length&&(y.length+=2),{opSpecsA:[u],opSpecsB:[y]}},InsertText:function(u,y){return y.position<=u.position?u.position+=y.text.length:(u.length!==void 0&&y.position<=u.position+u.length&&(u.length+=y.text.length),y.position+=2),{opSpecsA:[u],opSpecsB:[y]}},MergeParagraph:function(u,y){return y.sourceStartPosition<=u.position?--u.position:(u.length!==void 0&&y.sourceStartPosition<=u.position+u.length&&--u.length,y.sourceStartPosition+=2,u.position<y.destinationStartPosition&&(y.destinationStartPosition+=2)),{opSpecsA:[u],opSpecsB:[y]}},MoveCursor:function(u,y){var v=j(y);return u.position<y.position?y.position+=2:u.position<y.position+y.length&&(y.length+=2),v&&A(y),{opSpecsA:[u],opSpecsB:[y]}},RemoveAnnotation:function(u,y){return u.position<y.position?(y.position<u.position+u.length&&(u.length-=y.length+2),y.position+=2):u.position-=y.length+2,{opSpecsA:[u],opSpecsB:[y]}},RemoveCursor:_,RemoveMember:_,RemoveStyle:_,RemoveText:function(u,y){var v=y.position,m=y.position+y.length,R,V=[u],Z=[y];return u.position<=y.position?y.position+=2:u.position<m&&(y.length=u.position-y.position,R={optype:"RemoveText",memberid:y.memberid,timestamp:y.timestamp,position:u.position+2,length:m-u.position},Z.unshift(R)),y.position+y.length<=u.position?(u.position-=y.length,u.length!==void 0&&R&&(u.length=R.length>=u.length?0:u.length-R.length)):u.length!==void 0&&(R=u.position+u.length,m<=R?u.length-=y.length:v<R&&(u.length=v-u.position)),{opSpecsA:V,opSpecsB:Z}},SetParagraphStyle:function(u,y){return u.position<y.position&&(y.position+=2),{opSpecsA:[u],opSpecsB:[y]}},SplitParagraph:function(u,y){return u.position<y.sourceParagraphPosition&&(y.sourceParagraphPosition+=2),y.position<=u.position?u.position+=1:(u.length!==void 0&&y.position<=u.position+u.length&&(u.length+=1),y.position+=2),{opSpecsA:[u],opSpecsB:[y]}},UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},AddCursor:{AddCursor:_,AddMember:_,AddStyle:_,ApplyDirectStyling:_,InsertText:_,MergeParagraph:_,MoveCursor:_,RemoveAnnotation:_,RemoveCursor:_,RemoveMember:_,RemoveStyle:_,RemoveText:_,SetParagraphStyle:_,SplitParagraph:_,UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},AddMember:{AddStyle:_,ApplyDirectStyling:_,InsertText:_,MergeParagraph:_,MoveCursor:_,RemoveAnnotation:_,RemoveCursor:_,RemoveStyle:_,RemoveText:_,SetParagraphStyle:_,SplitParagraph:_,UpdateMetadata:_,UpdateParagraphStyle:_},AddStyle:{AddStyle:_,ApplyDirectStyling:_,InsertText:_,MergeParagraph:_,MoveCursor:_,RemoveAnnotation:_,RemoveCursor:_,RemoveMember:_,RemoveStyle:function(u,y){var v,m=[u],R=[y];return u.styleFamily===y.styleFamily&&(v=M(u.setProperties,y.styleName),0<v.length&&(v={optype:"UpdateParagraphStyle",memberid:y.memberid,timestamp:y.timestamp,styleName:u.styleName,removedProperties:{attributes:v.join(",")}},R.unshift(v)),w(u.setProperties,y.styleName)),{opSpecsA:m,opSpecsB:R}},RemoveText:_,SetParagraphStyle:_,SplitParagraph:_,UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},ApplyDirectStyling:{ApplyDirectStyling:function(u,y,v){var m,R,V,Z,ne,ee,z,P;return Z=[u],V=[y],u.position+u.length<=y.position||u.position>=y.position+y.length||(m=v?u:y,R=v?y:u,(u.position!==y.position||u.length!==y.length)&&(ee=E(m),z=E(R)),y=I(R.setProperties,null,m.setProperties,null,"style:text-properties"),(y.majorChanged||y.minorChanged)&&(V=[],u=[],Z=m.position+m.length,ne=R.position+R.length,R.position<m.position?y.minorChanged&&(P=E(z),P.length=m.position-R.position,u.push(P),R.position=m.position,R.length=ne-R.position):m.position<R.position&&y.majorChanged&&(P=E(ee),P.length=R.position-m.position,V.push(P),m.position=R.position,m.length=Z-m.position),ne>Z?y.minorChanged&&(ee=z,ee.position=Z,ee.length=ne-Z,u.push(ee),R.length=Z-R.position):Z>ne&&y.majorChanged&&(ee.position=ne,ee.length=Z-ne,V.push(ee),m.length=ne-m.position),m.setProperties&&O(m.setProperties)&&V.push(m),R.setProperties&&O(R.setProperties)&&u.push(R),v?(Z=V,V=u):Z=u)),{opSpecsA:Z,opSpecsB:V}},InsertText:function(u,y){return y.position<=u.position?u.position+=y.text.length:y.position<=u.position+u.length&&(u.length+=y.text.length),{opSpecsA:[u],opSpecsB:[y]}},MergeParagraph:function(u,y){var v=u.position,m=u.position+u.length;return v>=y.sourceStartPosition&&--v,m>=y.sourceStartPosition&&--m,u.position=v,u.length=m-v,{opSpecsA:[u],opSpecsB:[y]}},MoveCursor:_,RemoveAnnotation:function(u,y){var v=u.position,m=u.position+u.length,R=y.position+y.length,V=[u],Z=[y];return y.position<=v&&m<=R?V=[]:(R<v&&(v-=y.length+2),R<m&&(m-=y.length+2),u.position=v,u.length=m-v),{opSpecsA:V,opSpecsB:Z}},RemoveCursor:_,RemoveMember:_,RemoveStyle:_,RemoveText:function(u,y){var v=u.position+u.length,m=y.position+y.length,R=[u],V=[y];return m<=u.position?u.position-=y.length:y.position<v&&(u.position<y.position?u.length=m<v?u.length-y.length:y.position-u.position:(u.position=y.position,m<v?u.length=v-m:R=[])),{opSpecsA:R,opSpecsB:V}},SetParagraphStyle:_,SplitParagraph:function(u,y){return y.position<u.position?u.position+=1:y.position<u.position+u.length&&(u.length+=1),{opSpecsA:[u],opSpecsB:[y]}},UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},InsertText:{InsertText:function(u,y,v){return u.position<y.position?y.position+=u.text.length:u.position>y.position?u.position+=y.text.length:v?y.position+=u.text.length:u.position+=y.text.length,{opSpecsA:[u],opSpecsB:[y]}},MergeParagraph:function(u,y){return u.position>=y.sourceStartPosition?--u.position:(u.position<y.sourceStartPosition&&(y.sourceStartPosition+=u.text.length),u.position<y.destinationStartPosition&&(y.destinationStartPosition+=u.text.length)),{opSpecsA:[u],opSpecsB:[y]}},MoveCursor:function(u,y){var v=j(y);return u.position<y.position?y.position+=u.text.length:u.position<y.position+y.length&&(y.length+=u.text.length),v&&A(y),{opSpecsA:[u],opSpecsB:[y]}},RemoveAnnotation:function(u,y){var v=u.position,m=y.position+y.length,R=[u],V=[y];return y.position<=v&&v<=m?(R=[],y.length+=u.text.length):m<u.position?u.position-=y.length+2:y.position+=u.text.length,{opSpecsA:R,opSpecsB:V}},RemoveCursor:_,RemoveMember:_,RemoveStyle:_,RemoveText:function(u,y){var v;v=y.position+y.length;var m=[u],R=[y];return v<=u.position?u.position-=y.length:u.position<=y.position?y.position+=u.text.length:(y.length=u.position-y.position,v={optype:"RemoveText",memberid:y.memberid,timestamp:y.timestamp,position:u.position+u.text.length,length:v-u.position},R.unshift(v),u.position=y.position),{opSpecsA:m,opSpecsB:R}},SetParagraphStyle:function(u,y){return y.position>u.position&&(y.position+=u.text.length),{opSpecsA:[u],opSpecsB:[y]}},SplitParagraph:function(u,y){return u.position<y.sourceParagraphPosition&&(y.sourceParagraphPosition+=u.text.length),u.position<=y.position?y.position+=u.text.length:u.position+=1,{opSpecsA:[u],opSpecsB:[y]}},UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},MergeParagraph:{MergeParagraph:function(u,y,v){var m=[u],R=[y],V;return u.destinationStartPosition===y.destinationStartPosition?(m=[],R=[],u.moveCursor&&(V={optype:"MoveCursor",memberid:u.memberid,timestamp:u.timestamp,position:u.sourceStartPosition-1},m.push(V)),y.moveCursor&&(V={optype:"MoveCursor",memberid:y.memberid,timestamp:y.timestamp,position:y.sourceStartPosition-1},R.push(V)),u=v?u:y,u={optype:"SetParagraphStyle",memberid:u.memberid,timestamp:u.timestamp,position:u.destinationStartPosition,styleName:u.paragraphStyleName},v?m.push(u):R.push(u)):y.sourceStartPosition===u.destinationStartPosition?(u.destinationStartPosition=y.destinationStartPosition,--u.sourceStartPosition,u.paragraphStyleName=y.paragraphStyleName):u.sourceStartPosition===y.destinationStartPosition?(y.destinationStartPosition=u.destinationStartPosition,--y.sourceStartPosition,y.paragraphStyleName=u.paragraphStyleName):u.destinationStartPosition<y.destinationStartPosition?(--y.destinationStartPosition,--y.sourceStartPosition):(--u.destinationStartPosition,--u.sourceStartPosition),{opSpecsA:m,opSpecsB:R}},MoveCursor:function(u,y){var R=y.position,v=y.position+y.length,m=Math.min(R,v),R=Math.max(R,v);return m>=u.sourceStartPosition&&--m,R>=u.sourceStartPosition&&--R,0<=y.length?(y.position=m,y.length=R-m):(y.position=R,y.length=m-R),{opSpecsA:[u],opSpecsB:[y]}},RemoveAnnotation:function(u,y){var v=y.position+y.length,m=[u],R=[y];return y.position<=u.destinationStartPosition&&u.sourceStartPosition<=v?(m=[],--y.length):u.sourceStartPosition<y.position?--y.position:(v<u.destinationStartPosition&&(u.destinationStartPosition-=y.length+2),v<u.sourceStartPosition&&(u.sourceStartPosition-=y.length+2)),{opSpecsA:m,opSpecsB:R}},RemoveCursor:_,RemoveMember:_,RemoveStyle:_,RemoveText:function(u,y){return y.position>=u.sourceStartPosition?--y.position:(y.position<u.destinationStartPosition&&(u.destinationStartPosition-=y.length),y.position<u.sourceStartPosition&&(u.sourceStartPosition-=y.length)),{opSpecsA:[u],opSpecsB:[y]}},SetParagraphStyle:function(u,y){var v=[u],m=[y];return y.position>u.sourceStartPosition?--y.position:(y.position===u.destinationStartPosition||y.position===u.sourceStartPosition)&&(y.position=u.destinationStartPosition,u.paragraphStyleName=y.styleName),{opSpecsA:v,opSpecsB:m}},SplitParagraph:function(u,y){var v,m=[u],R=[y];return y.position<u.destinationStartPosition?(u.destinationStartPosition+=1,u.sourceStartPosition+=1):y.position>=u.destinationStartPosition&&y.position<u.sourceStartPosition?(y.paragraphStyleName=u.paragraphStyleName,v={optype:"SetParagraphStyle",memberid:u.memberid,timestamp:u.timestamp,position:u.destinationStartPosition,styleName:u.paragraphStyleName},m.push(v),y.position===u.sourceStartPosition-1&&u.moveCursor&&(v={optype:"MoveCursor",memberid:u.memberid,timestamp:u.timestamp,position:y.position,length:0},m.push(v)),u.destinationStartPosition=y.position+1,u.sourceStartPosition+=1):y.position>=u.sourceStartPosition&&(--y.position,--y.sourceParagraphPosition),{opSpecsA:m,opSpecsB:R}},UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},MoveCursor:{MoveCursor:_,RemoveAnnotation:function(u,y){var v=j(u),m=u.position+u.length,R=y.position+y.length;return y.position<=u.position&&m<=R?(u.position=y.position-1,u.length=0):(R<u.position?u.position-=y.length+2:R<m&&(u.length-=y.length+2),v&&A(u)),{opSpecsA:[u],opSpecsB:[y]}},RemoveCursor:function(u,y){return{opSpecsA:u.memberid===y.memberid?[]:[u],opSpecsB:[y]}},RemoveMember:_,RemoveStyle:_,RemoveText:function(u,y){var v=j(u),m=u.position+u.length,R=y.position+y.length;return R<=u.position?u.position-=y.length:y.position<m&&(u.position<y.position?u.length=R<m?u.length-y.length:y.position-u.position:(u.position=y.position,u.length=R<m?m-R:0)),v&&A(u),{opSpecsA:[u],opSpecsB:[y]}},SetParagraphStyle:_,SplitParagraph:function(u,y){var v=j(u);return y.position<u.position?u.position+=1:y.position<u.position+u.length&&(u.length+=1),v&&A(u),{opSpecsA:[u],opSpecsB:[y]}},UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},RemoveAnnotation:{RemoveAnnotation:function(u,y){var v=[u],m=[y];return u.position===y.position&&u.length===y.length?(v=[],m=[]):u.position<y.position?y.position-=u.length+2:u.position-=y.length+2,{opSpecsA:v,opSpecsB:m}},RemoveCursor:_,RemoveMember:_,RemoveStyle:_,RemoveText:function(u,y){var v=u.position+u.length,m=y.position+y.length,R=[u],V=[y];return u.position<=y.position&&m<=v?(V=[],u.length-=y.length):m<u.position?u.position-=y.length:y.position<u.position?(u.position=y.position+1,y.length-=u.length+2):y.position-=u.length+2,{opSpecsA:R,opSpecsB:V}},SetParagraphStyle:function(u,y){var v=y.position,m=u.position+u.length,R=[u],V=[y];return u.position<=v&&v<=m?V=[]:m<v&&(y.position-=u.length+2),{opSpecsA:R,opSpecsB:V}},SplitParagraph:function(u,y){var v=y.position,m=u.position+u.length,R=[u],V=[y];return u.position<=v&&v<=m?(V=[],u.length+=1):(m<y.sourceParagraphPosition&&(y.sourceParagraphPosition-=u.length+2),m<v?y.position-=u.length+2:u.position+=1),{opSpecsA:R,opSpecsB:V}},UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},RemoveCursor:{RemoveCursor:function(u,y){var v=u.memberid===y.memberid;return{opSpecsA:v?[]:[u],opSpecsB:v?[]:[y]}},RemoveMember:_,RemoveStyle:_,RemoveText:_,SetParagraphStyle:_,SplitParagraph:_,UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},RemoveMember:{RemoveStyle:_,RemoveText:_,SetParagraphStyle:_,SplitParagraph:_,UpdateMetadata:_,UpdateParagraphStyle:_},RemoveStyle:{RemoveStyle:function(u,y){var v=u.styleName===y.styleName&&u.styleFamily===y.styleFamily;return{opSpecsA:v?[]:[u],opSpecsB:v?[]:[y]}},RemoveText:_,SetParagraphStyle:function(u,y){var v,m=[u],R=[y];return u.styleFamily==="paragraph"&&u.styleName===y.styleName&&(v={optype:"SetParagraphStyle",memberid:u.memberid,timestamp:u.timestamp,position:y.position,styleName:""},m.unshift(v),y.styleName=""),{opSpecsA:m,opSpecsB:R}},SplitParagraph:_,UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:function(u,y){var v,m=[u],R=[y];return u.styleFamily==="paragraph"&&(v=M(y.setProperties,u.styleName),0<v.length&&(v={optype:"UpdateParagraphStyle",memberid:u.memberid,timestamp:u.timestamp,styleName:y.styleName,removedProperties:{attributes:v.join(",")}},m.unshift(v)),u.styleName===y.styleName?R=[]:w(y.setProperties,u.styleName)),{opSpecsA:m,opSpecsB:R}}},RemoveText:{RemoveText:function(u,y){var v=u.position+u.length,m=y.position+y.length,R=[u],V=[y];return m<=u.position?u.position-=y.length:v<=y.position?y.position-=u.length:y.position<v&&(u.position<y.position?(u.length=m<v?u.length-y.length:y.position-u.position,v<m?(y.position=u.position,y.length=m-v):V=[]):(v<m?y.length-=u.length:y.position<u.position?y.length=u.position-y.position:V=[],m<v?(u.position=y.position,u.length=v-m):R=[])),{opSpecsA:R,opSpecsB:V}},SetParagraphStyle:function(u,y){return u.position<y.position&&(y.position-=u.length),{opSpecsA:[u],opSpecsB:[y]}},SplitParagraph:function(u,y){var v=u.position+u.length,m=[u],R=[y];return y.position<=u.position?u.position+=1:y.position<v&&(u.length=y.position-u.position,v={optype:"RemoveText",memberid:u.memberid,timestamp:u.timestamp,position:y.position+1,length:v-y.position},m.unshift(v)),u.position+u.length<=y.position?y.position-=u.length:u.position<y.position&&(y.position=u.position),u.position+u.length<y.sourceParagraphPosition&&(y.sourceParagraphPosition-=u.length),{opSpecsA:m,opSpecsB:R}},UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},SetParagraphStyle:{SetParagraphStyle:function(u,y,v){return u.position===y.position&&(v?y.styleName=u.styleName:u.styleName=y.styleName),{opSpecsA:[u],opSpecsB:[y]}},SplitParagraph:function(u,y){var v=[u],m=[y],R;return u.position>y.position?u.position+=1:u.position===y.sourceParagraphPosition&&(y.paragraphStyleName=u.styleName,R=E(u),R.position=y.position+1,v.push(R)),{opSpecsA:v,opSpecsB:m}},UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},SplitParagraph:{SplitParagraph:function(u,y,v){var m,R;return u.position<y.position?m=!0:y.position<u.position?R=!0:u.position===y.position&&(v?m=!0:R=!0),m?(y.position+=1,y.sourceParagraphPosition=u.position<y.sourceParagraphPosition?y.sourceParagraphPosition+1:u.position+1):R&&(u.position+=1,u.sourceParagraphPosition=y.position<y.sourceParagraphPosition?u.sourceParagraphPosition+1:y.position+1),{opSpecsA:[u],opSpecsB:[y]}},UpdateMember:_,UpdateMetadata:_,UpdateParagraphStyle:_},UpdateMember:{UpdateMetadata:_,UpdateParagraphStyle:_},UpdateMetadata:{UpdateMetadata:function(u,y,v){var m,R=[u],V=[y];return m=v?u:y,u=v?y:u,N(u.setProperties||null,u.removedProperties||null,m.setProperties||null,m.removedProperties||null),m.setProperties&&O(m.setProperties)||m.removedProperties&&x(m.removedProperties)||(v?R=[]:V=[]),u.setProperties&&O(u.setProperties)||u.removedProperties&&x(u.removedProperties)||(v?V=[]:R=[]),{opSpecsA:R,opSpecsB:V}},UpdateParagraphStyle:_},UpdateParagraphStyle:{UpdateParagraphStyle:function(u,y,v){var m,R=[u],V=[y];return u.styleName===y.styleName&&(m=v?u:y,u=v?y:u,I(u.setProperties,u.removedProperties,m.setProperties,m.removedProperties,"style:paragraph-properties"),I(u.setProperties,u.removedProperties,m.setProperties,m.removedProperties,"style:text-properties"),N(u.setProperties||null,u.removedProperties||null,m.setProperties||null,m.removedProperties||null),m.setProperties&&O(m.setProperties)||m.removedProperties&&x(m.removedProperties)||(v?R=[]:V=[]),u.setProperties&&O(u.setProperties)||u.removedProperties&&x(u.removedProperties)||(v?V=[]:R=[])),{opSpecsA:R,opSpecsB:V}}}},this.passUnchanged=_,this.extendTransformations=function(u){Object.keys(u).forEach(function(y){var v=u[y],m,R=S.hasOwnProperty(y);runtime.log((R?"Extending":"Adding")+" map for optypeA: "+y),R||(S[y]={}),m=S[y],Object.keys(v).forEach(function(V){var Z=m.hasOwnProperty(V);runtime.assert(y<=V,"Wrong order:"+y+", "+V),runtime.log("  "+(Z?"Overwriting":"Adding")+" entry for optypeB: "+V),m[V]=v[V]})})},this.transformOpspecVsOpspec=function(u,y){var v=u.optype<=y.optype,m;return runtime.log("Crosstransforming:"),runtime.log(runtime.toJson(u)),runtime.log(runtime.toJson(y)),v||(m=u,u=y,y=m),(m=(m=S[u.optype])&&m[y.optype])?(m=m(u,y,!v),v||m===null||(m={opSpecsA:m.opSpecsB,opSpecsB:m.opSpecsA})):m=null,runtime.log("result:"),m?(runtime.log(runtime.toJson(m.opSpecsA)),runtime.log(runtime.toJson(m.opSpecsB))):runtime.log("null"),m}},ops.OperationTransformer=function(){function A(M,w){for(var E,N,O=[],x=[];0<M.length&&w;){if(E=M.shift(),E=j.transformOpspecVsOpspec(E,w),!E)return null;if(O=O.concat(E.opSpecsA),E.opSpecsB.length===0){O=O.concat(M),w=null;break}for(;1<E.opSpecsB.length;){if(N=A(M,E.opSpecsB.shift()),!N)return null;x=x.concat(N.opSpecsB),M=N.opSpecsA}w=E.opSpecsB.pop()}return w&&x.push(w),{opSpecsA:O,opSpecsB:x}}var j=new ops.OperationTransformMatrix;this.getOperationTransformMatrix=function(){return j},this.transform=function(M,w){for(var E,N=[];0<w.length;){if(E=A(M,w.shift()),!E)return null;M=E.opSpecsA,N=N.concat(E.opSpecsB)}return{opSpecsA:M,opSpecsB:N}}};var webodf_css='@namespace draw url(urn:oasis:names:tc:opendocument:xmlns:drawing:1.0);@namespace fo url(urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0);@namespace office url(urn:oasis:names:tc:opendocument:xmlns:office:1.0);@namespace presentation url(urn:oasis:names:tc:opendocument:xmlns:presentation:1.0);@namespace style url(urn:oasis:names:tc:opendocument:xmlns:style:1.0);@namespace svg url(urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0);@namespace table url(urn:oasis:names:tc:opendocument:xmlns:table:1.0);@namespace text url(urn:oasis:names:tc:opendocument:xmlns:text:1.0);@namespace webodfhelper url(urn:webodf:names:helper);@namespace cursor url(urn:webodf:names:cursor);@namespace editinfo url(urn:webodf:names:editinfo);@namespace annotation url(urn:webodf:names:annotation);@namespace dc url(http://purl.org/dc/elements/1.1/);@namespace svgns url(http://www.w3.org/2000/svg);office|document > *, office|document-content > * {display: none;}office|body, office|document {display: inline-block;position: relative;}text|p, text|h {display: block;padding: 0;margin: 0;line-height: normal;position: relative;}text|p::after, text|h::after {content: "\\200B";white-space: pre;}*[webodfhelper|containsparagraphanchor] {position: relative;}text|s {white-space: pre;}text|tab {display: inline;white-space: pre;}text|tracked-changes {display: none;}office|binary-data {display: none;}office|text {display: block;text-align: left;overflow: visible;word-wrap: break-word;}office|text::selection {background: transparent;}.webodf-virtualSelections *::selection {background: transparent;}.webodf-virtualSelections *::-moz-selection {background: transparent;}office|text * draw|text-box {display: block;border: 1px solid #d3d3d3;}office|text draw|frame {z-index: 1;}office|spreadsheet {display: block;border-collapse: collapse;empty-cells: show;font-family: sans-serif;font-size: 10pt;text-align: left;page-break-inside: avoid;overflow: hidden;}office|presentation {display: inline-block;text-align: left;}#shadowContent {display: inline-block;text-align: left;}draw|page {display: block;position: relative;overflow: hidden;}presentation|notes, presentation|footer-decl, presentation|date-time-decl {display: none;}@media print {draw|page {border: 1pt solid black;page-break-inside: avoid;}presentation|notes {}}office|spreadsheet text|p {border: 0px;padding: 1px;margin: 0px;}office|spreadsheet table|table {margin: 3px;}office|spreadsheet table|table:after {}office|spreadsheet table|table-row {counter-increment: row;}office|spreadsheet table|table-row:before {width: 3em;background: #cccccc;border: 1px solid black;text-align: center;content: counter(row);display: table-cell;}office|spreadsheet table|table-cell {border: 1px solid #cccccc;}table|table {display: table;}draw|frame table|table {width: 100%;height: 100%;background: white;}table|table-header-rows {display: table-header-group;}table|table-row {display: table-row;}table|table-column {display: table-column;}table|table-cell {width: 0.889in;display: table-cell;word-break: break-all;}draw|frame {display: block;}draw|image {display: block;width: 100%;height: 100%;top: 0px;left: 0px;background-repeat: no-repeat;background-size: 100% 100%;-moz-background-size: 100% 100%;}draw|frame > draw|image:nth-of-type(n+2) {display: none;}text|list:before {display: none;content:"";}text|list {display: block;}text|list-item {display: block;}text|number {display:none;}text|a {color: blue;text-decoration: underline;cursor: pointer;}.webodf-inactiveLinks text|a {cursor: text;}text|note-citation {vertical-align: super;font-size: smaller;}text|note-body {display: none;}text|note:hover text|note-citation {background: #dddddd;}text|note:hover text|note-body {display: block;left:1em;max-width: 80%;position: absolute;background: #ffffaa;}text|bibliography-source {display: none;}svg|title, svg|desc {display: none;}video {width: 100%;height: 100%}cursor|anchor {display: none;}cursor|cursor {display: none;}.webodf-caretOverlay {position: absolute;top: 5%;height: 1em;z-index: 10;padding-left: 1px;pointer-events: none;}.webodf-caretOverlay .caret {position: absolute;border-left: 2px solid black;top: 0;bottom: 0;right: 0;}.webodf-caretOverlay .handle {position: absolute;margin-top: 5px;padding-top: 3px;margin-left: auto;margin-right: auto;width: 64px;height: 68px;border-radius: 5px;opacity: 0.3;text-align: center;background-color: black;box-shadow: 0px 0px 5px rgb(90, 90, 90);border: 1px solid black;top: -85px;right: -32px;}.webodf-caretOverlay .handle > img {box-shadow: 0px 0px 5px rgb(90, 90, 90) inset;background-color: rgb(200, 200, 200);border-radius: 5px;border: 2px solid;height: 60px;width: 60px;display: block;margin: auto;}.webodf-caretOverlay .handle.active {opacity: 0.8;}.webodf-caretOverlay .handle:after {content: " ";position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: black transparent transparent transparent;top: 100%;left: 43%;}.webodf-caretSizer {display: inline-block;width: 0;visibility: hidden;}#eventTrap {display: block;position: absolute;bottom: 0;left: 0;outline: none;opacity: 0;color: rgba(255, 255, 255, 0);pointer-events: none;white-space: pre;overflow: hidden;}cursor|cursor > #composer {text-decoration: underline;}cursor|cursor[cursor|caret-sizer-active="true"],cursor|cursor[cursor|composing="true"] {display: inline;}editinfo|editinfo {display: inline-block;}.editInfoMarker {position: absolute;width: 10px;height: 100%;left: -20px;opacity: 0.8;top: 0;border-radius: 5px;background-color: transparent;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);}.editInfoMarker:hover {box-shadow: 0px 0px 8px rgba(0, 0, 0, 1);}.editInfoHandle {position: absolute;background-color: black;padding: 5px;border-radius: 5px;opacity: 0.8;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);bottom: 100%;margin-bottom: 10px;z-index: 3;left: -25px;}.editInfoHandle:after {content: " ";position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: black transparent transparent transparent;top: 100%;left: 5px;}.editInfo {font-family: sans-serif;font-weight: normal;font-style: normal;text-decoration: none;color: white;width: 100%;height: 12pt;}.editInfoColor {float: left;width: 10pt;height: 10pt;border: 1px solid white;}.editInfoAuthor {float: left;margin-left: 5pt;font-size: 10pt;text-align: left;height: 12pt;line-height: 12pt;}.editInfoTime {float: right;margin-left: 30pt;font-size: 8pt;font-style: italic;color: yellow;height: 12pt;line-height: 12pt;}.annotationWrapper {display: inline;position: relative;}.annotationRemoveButton:before {content: "\xD7";color: white;padding: 5px;line-height: 1em;}.annotationRemoveButton {width: 20px;height: 20px;border-radius: 10px;background-color: black;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);position: absolute;top: -10px;left: -10px;z-index: 3;text-align: center;font-family: sans-serif;font-style: normal;font-weight: normal;text-decoration: none;font-size: 15px;}.annotationRemoveButton:hover {cursor: pointer;box-shadow: 0px 0px 5px rgba(0, 0, 0, 1);}.annotationNote {width: 4cm;position: absolute;display: inline;z-index: 10;top: 0;}.annotationNote > office|annotation {display: block;text-align: left;}.annotationConnector {position: absolute;display: inline;top: 0;z-index: 2;border-top: 1px dashed brown;}.annotationConnector.angular {-moz-transform-origin: left top;-webkit-transform-origin: left top;-ms-transform-origin: left top;transform-origin: left top;}.annotationConnector.horizontal {left: 0;}.annotationConnector.horizontal:before {content: "";display: inline;position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: brown transparent transparent transparent;top: -1px;left: -5px;}office|annotation {width: 100%;height: 100%;display: none;background: rgb(198, 238, 184);background: -moz-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -webkit-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -o-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -ms-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: linear-gradient(180deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);box-shadow: 0 3px 4px -3px #ccc;}office|annotation > dc|creator {display: block;font-size: 10pt;font-weight: normal;font-style: normal;font-family: sans-serif;color: white;background-color: brown;padding: 4px;}office|annotation > dc|date {display: block;font-size: 10pt;font-weight: normal;font-style: normal;font-family: sans-serif;border: 4px solid transparent;color: black;}office|annotation > text|list {display: block;padding: 5px;}office|annotation text|p {font-size: 10pt;color: black;font-weight: normal;font-style: normal;text-decoration: none;font-family: sans-serif;}#annotationsPane {background-color: #EAEAEA;width: 4cm;height: 100%;display: none;position: absolute;outline: 1px solid #ccc;}.webodf-annotationHighlight {background-color: yellow;position: relative;}.webodf-selectionOverlay {position: absolute;pointer-events: none;top: 0;left: 0;top: 0;left: 0;width: 100%;height: 100%;z-index: 15;}.webodf-selectionOverlay > polygon {fill-opacity: 0.3;stroke-opacity: 0.8;stroke-width: 1;fill-rule: evenodd;}.webodf-selectionOverlay > .webodf-draggable {fill-opacity: 0.8;stroke-opacity: 0;stroke-width: 8;pointer-events: all;display: none;-moz-transform-origin: center center;-webkit-transform-origin: center center;-ms-transform-origin: center center;transform-origin: center center;}#imageSelector {display: none;position: absolute;border-style: solid;border-color: black;}#imageSelector > div {width: 5px;height: 5px;display: block;position: absolute;border: 1px solid black;background-color: #ffffff;}#imageSelector > .topLeft {top: -4px;left: -4px;}#imageSelector > .topRight {top: -4px;right: -4px;}#imageSelector > .bottomRight {right: -4px;bottom: -4px;}#imageSelector > .bottomLeft {bottom: -4px;left: -4px;}#imageSelector > .topMiddle {top: -4px;left: 50%;margin-left: -2.5px;}#imageSelector > .rightMiddle {top: 50%;right: -4px;margin-top: -2.5px;}#imageSelector > .bottomMiddle {bottom: -4px;left: 50%;margin-left: -2.5px;}#imageSelector > .leftMiddle {top: 50%;left: -4px;margin-top: -2.5px;}div.webodf-customScrollbars::-webkit-scrollbar{width: 8px;height: 8px;background-color: transparent;}div.webodf-customScrollbars::-webkit-scrollbar-track{background-color: transparent;}div.webodf-customScrollbars::-webkit-scrollbar-thumb{background-color: #444;border-radius: 4px;}.webodf-hyperlinkTooltip {display: none;color: white;background-color: black;border-radius: 5px;box-shadow: 2px 2px 5px gray;padding: 3px;position: absolute;max-width: 210px;text-align: left;word-break: break-all;z-index: 16;}.webodf-hyperlinkTooltipText {display: block;font-weight: bold;}';(function(A){var j=typeof window<"u"?window:typeof global<"u"?global:{},M=j.externs||(j.externs={});M.JSZip=A()})(function(){var A,j,M;return function w(E,N,O){function x(S,u){if(!N[S]){if(!E[S]){var y=typeof require=="function"&&require;if(!u&&y)return y(S,!0);if(I)return I(S,!0);throw new Error("Cannot find module '"+S+"'")}var v=N[S]={exports:{}};E[S][0].call(v.exports,function(m){var R=E[S][1][m];return x(R||m)},v,v.exports,w,E,N,O)}return N[S].exports}for(var I=typeof require=="function"&&require,_=0;_<O.length;_++)x(O[_]);return x}({1:[function(w,E,N){var O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";N.encode=function(x,I){for(var _="",S,u,y,v,m,R,V,Z=0;Z<x.length;)S=x.charCodeAt(Z++),u=x.charCodeAt(Z++),y=x.charCodeAt(Z++),v=S>>2,m=(S&3)<<4|u>>4,R=(u&15)<<2|y>>6,V=y&63,isNaN(u)?R=V=64:isNaN(y)&&(V=64),_=_+O.charAt(v)+O.charAt(m)+O.charAt(R)+O.charAt(V);return _},N.decode=function(x,I){var _="",S,u,y,v,m,R,V,Z=0;for(x=x.replace(/[^A-Za-z0-9\+\/\=]/g,"");Z<x.length;)v=O.indexOf(x.charAt(Z++)),m=O.indexOf(x.charAt(Z++)),R=O.indexOf(x.charAt(Z++)),V=O.indexOf(x.charAt(Z++)),S=v<<2|m>>4,u=(m&15)<<4|R>>2,y=(R&3)<<6|V,_=_+String.fromCharCode(S),R!=64&&(_=_+String.fromCharCode(u)),V!=64&&(_=_+String.fromCharCode(y));return _}},{}],2:[function(w,E,N){function O(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}O.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},E.exports=O},{}],3:[function(w,E,N){N.STORE={magic:"\0\0",compress:function(O){return O},uncompress:function(O){return O},compressInputType:null,uncompressInputType:null},N.DEFLATE=w("./flate")},{"./flate":8}],4:[function(w,E,N){var O=w("./utils"),x=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];E.exports=function(_,S){if(typeof _>"u"||!_.length)return 0;var u=O.getTypeOf(_)!=="string";typeof S>"u"&&(S=0);var y=0,v=0,m=0;S=S^-1;for(var R=0,V=_.length;R<V;R++)m=u?_[R]:_.charCodeAt(R),v=(S^m)&255,y=x[v],S=S>>>8^y;return S^-1}},{"./utils":21}],5:[function(w,E,N){var O=w("./utils");function x(I){this.data=null,this.length=0,this.index=0}x.prototype={checkOffset:function(I){this.checkIndex(this.index+I)},checkIndex:function(I){if(this.length<I||I<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+I+"). Corrupted zip ?")},setIndex:function(I){this.checkIndex(I),this.index=I},skip:function(I){this.setIndex(this.index+I)},byteAt:function(I){},readInt:function(I){var _=0,S;for(this.checkOffset(I),S=this.index+I-1;S>=this.index;S--)_=(_<<8)+this.byteAt(S);return this.index+=I,_},readString:function(I){return O.transformTo("string",this.readData(I))},readData:function(I){},lastIndexOfSignature:function(I){},readDate:function(){var I=this.readInt(4);return new Date((I>>25&127)+1980,(I>>21&15)-1,I>>16&31,I>>11&31,I>>5&63,(I&31)<<1)}},E.exports=x},{"./utils":21}],6:[function(w,E,N){N.base64=!1,N.binary=!1,N.dir=!1,N.createFolders=!1,N.date=null,N.compression=null,N.comment=null},{}],7:[function(w,E,N){var O=w("./utils");N.string2binary=function(x){return O.string2binary(x)},N.string2Uint8Array=function(x){return O.transformTo("uint8array",x)},N.uint8Array2String=function(x){return O.transformTo("string",x)},N.string2Blob=function(x){var I=O.transformTo("arraybuffer",x);return O.arrayBuffer2Blob(I)},N.arrayBuffer2Blob=function(x){return O.arrayBuffer2Blob(x)},N.transformTo=function(x,I){return O.transformTo(x,I)},N.getTypeOf=function(x){return O.getTypeOf(x)},N.checkSupport=function(x){return O.checkSupport(x)},N.MAX_VALUE_16BITS=O.MAX_VALUE_16BITS,N.MAX_VALUE_32BITS=O.MAX_VALUE_32BITS,N.pretty=function(x){return O.pretty(x)},N.findCompression=function(x){return O.findCompression(x)},N.isRegExp=function(x){return O.isRegExp(x)}},{"./utils":21}],8:[function(w,E,N){var O=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",x=w("pako");N.uncompressInputType=O?"uint8array":"array",N.compressInputType=O?"uint8array":"array",N.magic="\b\0",N.compress=function(I){return x.deflateRaw(I)},N.uncompress=function(I){return x.inflateRaw(I)}},{pako:24}],9:[function(w,E,N){var O=w("./base64");function x(I,_){if(!(this instanceof x))return new x(I,_);this.files={},this.comment=null,this.root="",I&&this.load(I,_),this.clone=function(){var S=new x;for(var u in this)typeof this[u]!="function"&&(S[u]=this[u]);return S}}x.prototype=w("./object"),x.prototype.load=w("./load"),x.support=w("./support"),x.defaults=w("./defaults"),x.utils=w("./deprecatedPublicUtils"),x.base64={encode:function(I){return O.encode(I)},decode:function(I){return O.decode(I)}},x.compressions=w("./compressions"),E.exports=x},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(w,E,N){var O=w("./base64"),x=w("./zipEntries");E.exports=function(I,_){var S,u,y,v;for(_=_||{},_.base64&&(I=O.decode(I)),u=new x(I,_),S=u.files,y=0;y<S.length;y++)v=S[y],this.file(v.fileName,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileComment.length?v.fileComment:null,createFolders:_.createFolders});return u.zipComment.length&&(this.comment=u.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(w,E,N){(function(O){E.exports=function(x,I){return new O(x,I)},E.exports.test=function(x){return O.isBuffer(x)}}).call(this,typeof Buffer<"u"?Buffer:void 0)},{}],12:[function(w,E,N){var O=w("./uint8ArrayReader");function x(I){this.data=I,this.length=this.data.length,this.index=0}x.prototype=new O,x.prototype.readData=function(I){this.checkOffset(I);var _=this.data.slice(this.index,this.index+I);return this.index+=I,_},E.exports=x},{"./uint8ArrayReader":18}],13:[function(w,E,N){var O=w("./support"),x=w("./utils"),I=w("./crc32"),_=w("./signature"),S=w("./defaults"),u=w("./base64"),y=w("./compressions"),v=w("./compressedObject"),m=w("./nodeBuffer"),R=w("./utf8"),V=w("./stringWriter"),Z=w("./uint8ArrayWriter"),ne=function(W){if(W._data instanceof v&&(W._data=W._data.getContent(),W.options.binary=!0,W.options.base64=!1,x.getTypeOf(W._data)==="uint8array")){var ie=W._data;W._data=new Uint8Array(ie.length),ie.length!==0&&W._data.set(ie,0)}return W._data},ee=function(W){var ie=ne(W),he=x.getTypeOf(ie);return he==="string"?!W.options.binary&&O.nodebuffer?m(ie,"utf-8"):W.asBinary():ie},z=function(W){var ie=ne(this);return ie===null||typeof ie>"u"?"":(this.options.base64&&(ie=u.decode(ie)),W&&this.options.binary?ie=re.utf8decode(ie):ie=x.transformTo("string",ie),!W&&!this.options.binary&&(ie=x.transformTo("string",re.utf8encode(ie))),ie)},P=function(W,ie,he){this.name=W,this.dir=he.dir,this.date=he.date,this.comment=he.comment,this._data=ie,this.options=he,this._initialMetadata={dir:he.dir,date:he.date}};P.prototype={asText:function(){return z.call(this,!0)},asBinary:function(){return z.call(this,!1)},asNodeBuffer:function(){var W=ee(this);return x.transformTo("nodebuffer",W)},asUint8Array:function(){var W=ee(this);return x.transformTo("uint8array",W)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var Y=function(W,ie){var he="",ve;for(ve=0;ve<ie;ve++)he+=String.fromCharCode(W&255),W=W>>>8;return he},$=function(){var W={},ie,he;for(ie=0;ie<arguments.length;ie++)for(he in arguments[ie])arguments[ie].hasOwnProperty(he)&&typeof W[he]>"u"&&(W[he]=arguments[ie][he]);return W},J=function(W){return W=W||{},W.base64===!0&&(W.binary===null||W.binary===void 0)&&(W.binary=!0),W=$(W,S),W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),W},te=function(W,ie,he){var ve=x.getTypeOf(ie),Ne;if(he=J(he),he.createFolders&&(Ne=q(W))&&K.call(this,Ne,!0),he.dir||ie===null||typeof ie>"u")he.base64=!1,he.binary=!1,ie=null;else if(ve==="string")he.binary&&!he.base64&&he.optimizedBinaryString!==!0&&(ie=x.string2binary(ie));else{if(he.base64=!1,he.binary=!0,!ve&&!(ie instanceof v))throw new Error("The data of '"+W+"' is in an unsupported format !");ve==="arraybuffer"&&(ie=x.transformTo("uint8array",ie))}var ze=new P(W,ie,he);return this.files[W]=ze,ze},q=function(W){W.slice(-1)=="/"&&(W=W.substring(0,W.length-1));var ie=W.lastIndexOf("/");return ie>0?W.substring(0,ie):""},K=function(W,ie){return W.slice(-1)!="/"&&(W+="/"),ie=typeof ie<"u"?ie:!1,this.files[W]||te.call(this,W,null,{dir:!0,createFolders:ie}),this.files[W]},U=function(W,ie){var he=new v,ve;return W._data instanceof v?(he.uncompressedSize=W._data.uncompressedSize,he.crc32=W._data.crc32,he.uncompressedSize===0||W.dir?(ie=y.STORE,he.compressedContent="",he.crc32=0):W._data.compressionMethod===ie.magic?he.compressedContent=W._data.getCompressedContent():(ve=W._data.getContent(),he.compressedContent=ie.compress(x.transformTo(ie.compressInputType,ve)))):(ve=ee(W),(!ve||ve.length===0||W.dir)&&(ie=y.STORE,ve=""),he.uncompressedSize=ve.length,he.crc32=I(ve),he.compressedContent=ie.compress(x.transformTo(ie.compressInputType,ve))),he.compressedSize=he.compressedContent.length,he.compressionMethod=ie.magic,he},F=function(W,ie,he,ve){var Ne=he.compressedContent,ze=x.transformTo("string",R.utf8encode(ie.name)),rt=ie.comment||"",le=x.transformTo("string",R.utf8encode(rt)),me=ze.length!==ie.name.length,De=le.length!==rt.length,Me=ie.options,Re,we,ke="",Ve="",We="",$e,ue;ie._initialMetadata.dir!==ie.dir?$e=ie.dir:$e=Me.dir,ie._initialMetadata.date!==ie.date?ue=ie.date:ue=Me.date,Re=ue.getHours(),Re=Re<<6,Re=Re|ue.getMinutes(),Re=Re<<5,Re=Re|ue.getSeconds()/2,we=ue.getFullYear()-1980,we=we<<4,we=we|ue.getMonth()+1,we=we<<5,we=we|ue.getDate(),me&&(Ve=Y(1,1)+Y(I(ze),4)+ze,ke+="up"+Y(Ve.length,2)+Ve),De&&(We=Y(1,1)+Y(this.crc32(le),4)+le,ke+="uc"+Y(We.length,2)+We);var Se="";Se+=`
\0`,Se+=me||De?"\0\b":"\0\0",Se+=he.compressionMethod,Se+=Y(Re,2),Se+=Y(we,2),Se+=Y(he.crc32,4),Se+=Y(he.compressedSize,4),Se+=Y(he.uncompressedSize,4),Se+=Y(ze.length,2),Se+=Y(ke.length,2);var be=_.LOCAL_FILE_HEADER+Se+ze+ke,Fe=_.CENTRAL_FILE_HEADER+"\0"+Se+Y(le.length,2)+"\0\0\0\0"+($e===!0?"\0\0\0":"\0\0\0\0")+Y(ve,4)+ze+ke+le;return{fileRecord:be,dirRecord:Fe,compressedObject:he}},re={load:function(W,ie){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(W){var ie=[],he,ve,Ne,ze;for(he in this.files)this.files.hasOwnProperty(he)&&(Ne=this.files[he],ze=new P(Ne.name,Ne._data,$(Ne.options)),ve=he.slice(this.root.length,he.length),he.slice(0,this.root.length)===this.root&&W(ve,ze)&&ie.push(ze));return ie},file:function(W,ie,he){if(arguments.length===1)if(x.isRegExp(W)){var ve=W;return this.filter(function(Ne,ze){return!ze.dir&&ve.test(Ne)})}else return this.filter(function(Ne,ze){return!ze.dir&&Ne===W})[0]||null;else W=this.root+W,te.call(this,W,ie,he);return this},folder:function(W){if(!W)return this;if(x.isRegExp(W))return this.filter(function(Ne,ze){return ze.dir&&W.test(Ne)});var ie=this.root+W,he=K.call(this,ie),ve=this.clone();return ve.root=he.name,ve},remove:function(W){W=this.root+W;var ie=this.files[W];if(ie||(W.slice(-1)!="/"&&(W+="/"),ie=this.files[W]),ie&&!ie.dir)delete this.files[W];else for(var he=this.filter(function(Ne,ze){return ze.name.slice(0,W.length)===W}),ve=0;ve<he.length;ve++)delete this.files[he[ve].name];return this},generate:function(W){W=$(W||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),x.checkSupport(W.type);var ie=[],he=0,ve=0,Ne,ze,rt=x.transformTo("string",this.utf8encode(W.comment||this.comment||""));for(var le in this.files)if(this.files.hasOwnProperty(le)){var me=this.files[le],De=me.options.compression||W.compression.toUpperCase(),Me=y[De];if(!Me)throw new Error(De+" is not a valid compression method !");var Re=U.call(this,me,Me),we=F.call(this,le,me,Re,he);he+=we.fileRecord.length+Re.compressedSize,ve+=we.dirRecord.length,ie.push(we)}var ke="";ke=_.CENTRAL_DIRECTORY_END+"\0\0\0\0"+Y(ie.length,2)+Y(ie.length,2)+Y(ve,4)+Y(he,4)+Y(rt.length,2)+rt;var Ve=W.type.toLowerCase();for(Ve==="uint8array"||Ve==="arraybuffer"||Ve==="blob"||Ve==="nodebuffer"?Ne=new Z(he+ve+ke.length):Ne=new V(he+ve+ke.length),ze=0;ze<ie.length;ze++)Ne.append(ie[ze].fileRecord),Ne.append(ie[ze].compressedObject.compressedContent);for(ze=0;ze<ie.length;ze++)Ne.append(ie[ze].dirRecord);Ne.append(ke);var We=Ne.finalize();switch(W.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return x.transformTo(W.type.toLowerCase(),We);case"blob":return x.arrayBuffer2Blob(x.transformTo("arraybuffer",We));case"base64":return W.base64?u.encode(We):We;default:return We}},crc32:function(W,ie){return I(W,ie)},utf8encode:function(W){return x.transformTo("string",R.utf8encode(W))},utf8decode:function(W){return R.utf8decode(W)}};E.exports=re},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(w,E,N){N.LOCAL_FILE_HEADER="PK",N.CENTRAL_FILE_HEADER="PK",N.CENTRAL_DIRECTORY_END="PK",N.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",N.ZIP64_CENTRAL_DIRECTORY_END="PK",N.DATA_DESCRIPTOR="PK\x07\b"},{}],15:[function(w,E,N){var O=w("./dataReader"),x=w("./utils");function I(_,S){this.data=_,S||(this.data=x.string2binary(this.data)),this.length=this.data.length,this.index=0}I.prototype=new O,I.prototype.byteAt=function(_){return this.data.charCodeAt(_)},I.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)},I.prototype.readData=function(_){this.checkOffset(_);var S=this.data.slice(this.index,this.index+_);return this.index+=_,S},E.exports=I},{"./dataReader":5,"./utils":21}],16:[function(w,E,N){var O=w("./utils"),x=function(){this.data=[]};x.prototype={append:function(I){I=O.transformTo("string",I),this.data.push(I)},finalize:function(){return this.data.join("")}},E.exports=x},{"./utils":21}],17:[function(w,E,N){(function(O){if(N.base64=!0,N.array=!0,N.string=!0,N.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",N.nodebuffer=typeof O<"u",N.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")N.blob=!1;else{var x=new ArrayBuffer(0);try{N.blob=new Blob([x],{type:"application/zip"}).size===0}catch{try{var I=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,_=new I;_.append(x),N.blob=_.getBlob("application/zip").size===0}catch{N.blob=!1}}}}).call(this,typeof Buffer<"u"?Buffer:void 0)},{}],18:[function(w,E,N){var O=w("./dataReader");function x(I){I&&(this.data=I,this.length=this.data.length,this.index=0)}x.prototype=new O,x.prototype.byteAt=function(I){return this.data[I]},x.prototype.lastIndexOfSignature=function(I){for(var _=I.charCodeAt(0),S=I.charCodeAt(1),u=I.charCodeAt(2),y=I.charCodeAt(3),v=this.length-4;v>=0;--v)if(this.data[v]===_&&this.data[v+1]===S&&this.data[v+2]===u&&this.data[v+3]===y)return v;return-1},x.prototype.readData=function(I){if(this.checkOffset(I),I===0)return new Uint8Array(0);var _=this.data.subarray(this.index,this.index+I);return this.index+=I,_},E.exports=x},{"./dataReader":5}],19:[function(w,E,N){var O=w("./utils"),x=function(I){this.data=new Uint8Array(I),this.index=0};x.prototype={append:function(I){I.length!==0&&(I=O.transformTo("uint8array",I),this.data.set(I,this.index),this.index+=I.length)},finalize:function(){return this.data}},E.exports=x},{"./utils":21}],20:[function(w,E,N){for(var O=w("./utils"),x=w("./support"),I=w("./nodeBuffer"),_=new Array(256),S=0;S<256;S++)_[S]=S>=252?6:S>=248?5:S>=240?4:S>=224?3:S>=192?2:1;_[254]=_[254]=1;var u=function(m){var R,V,Z,ne,ee,z=m.length,P=0;for(ne=0;ne<z;ne++)V=m.charCodeAt(ne),(V&64512)===55296&&ne+1<z&&(Z=m.charCodeAt(ne+1),(Z&64512)===56320&&(V=65536+(V-55296<<10)+(Z-56320),ne++)),P+=V<128?1:V<2048?2:V<65536?3:4;for(x.uint8array?R=new Uint8Array(P):R=new Array(P),ee=0,ne=0;ee<P;ne++)V=m.charCodeAt(ne),(V&64512)===55296&&ne+1<z&&(Z=m.charCodeAt(ne+1),(Z&64512)===56320&&(V=65536+(V-55296<<10)+(Z-56320),ne++)),V<128?R[ee++]=V:V<2048?(R[ee++]=192|V>>>6,R[ee++]=128|V&63):V<65536?(R[ee++]=224|V>>>12,R[ee++]=128|V>>>6&63,R[ee++]=128|V&63):(R[ee++]=240|V>>>18,R[ee++]=128|V>>>12&63,R[ee++]=128|V>>>6&63,R[ee++]=128|V&63);return R},y=function(m,R){var V;for(R=R||m.length,R>m.length&&(R=m.length),V=R-1;V>=0&&(m[V]&192)===128;)V--;return V<0||V===0?R:V+_[m[V]]>R?V:R},v=function(m){var R,V,Z,ne,ee,z=m.length,P=new Array(z*2);for(Z=0,V=0;V<z;){if(ne=m[V++],ne<128){P[Z++]=ne;continue}if(ee=_[ne],ee>4){P[Z++]=65533,V+=ee-1;continue}for(ne&=ee===2?31:ee===3?15:7;ee>1&&V<z;)ne=ne<<6|m[V++]&63,ee--;if(ee>1){P[Z++]=65533;continue}ne<65536?P[Z++]=ne:(ne-=65536,P[Z++]=55296|ne>>10&1023,P[Z++]=56320|ne&1023)}return P.length!==Z&&(P.subarray?P=P.subarray(0,Z):P.length=Z),O.applyFromCharCode(P)};N.utf8encode=function(R){return x.nodebuffer?I(R,"utf-8"):u(R)},N.utf8decode=function(R){if(x.nodebuffer)return O.transformTo("nodebuffer",R).toString("utf-8");R=O.transformTo(x.uint8array?"uint8array":"array",R);for(var V=[],Z=0,ne=R.length,ee=65536;Z<ne;){var z=y(R,Math.min(Z+ee,ne));x.uint8array?V.push(v(R.subarray(Z,z))):V.push(v(R.slice(Z,z))),Z=z}return V.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(w,E,N){var O=w("./support"),x=w("./compressions"),I=w("./nodeBuffer");N.string2binary=function(m){for(var R="",V=0;V<m.length;V++)R+=String.fromCharCode(m.charCodeAt(V)&255);return R},N.arrayBuffer2Blob=function(m){N.checkSupport("blob");try{return new Blob([m],{type:"application/zip"})}catch{try{var R=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,V=new R;return V.append(m),V.getBlob("application/zip")}catch{throw new Error("Bug : can't construct the Blob.")}}};function _(m){return m}function S(m,R){for(var V=0;V<m.length;++V)R[V]=m.charCodeAt(V)&255;return R}function u(m){var R=65536,V=[],Z=m.length,ne=N.getTypeOf(m),ee=0,z=!0;try{switch(ne){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,I(0));break}}catch{z=!1}if(!z){for(var P="",Y=0;Y<m.length;Y++)P+=String.fromCharCode(m[Y]);return P}for(;ee<Z&&R>1;)try{ne==="array"||ne==="nodebuffer"?V.push(String.fromCharCode.apply(null,m.slice(ee,Math.min(ee+R,Z)))):V.push(String.fromCharCode.apply(null,m.subarray(ee,Math.min(ee+R,Z)))),ee+=R}catch{R=Math.floor(R/2)}return V.join("")}N.applyFromCharCode=u;function y(m,R){for(var V=0;V<m.length;V++)R[V]=m[V];return R}var v={};v.string={string:_,array:function(m){return S(m,new Array(m.length))},arraybuffer:function(m){return v.string.uint8array(m).buffer},uint8array:function(m){return S(m,new Uint8Array(m.length))},nodebuffer:function(m){return S(m,I(m.length))}},v.array={string:u,array:_,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return I(m)}},v.arraybuffer={string:function(m){return u(new Uint8Array(m))},array:function(m){return y(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:_,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return I(new Uint8Array(m))}},v.uint8array={string:u,array:function(m){return y(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:_,nodebuffer:function(m){return I(m)}},v.nodebuffer={string:u,array:function(m){return y(m,new Array(m.length))},arraybuffer:function(m){return v.nodebuffer.uint8array(m).buffer},uint8array:function(m){return y(m,new Uint8Array(m.length))},nodebuffer:_},N.transformTo=function(m,R){if(R||(R=""),!m)return R;N.checkSupport(m);var V=N.getTypeOf(R),Z=v[V][m](R);return Z},N.getTypeOf=function(m){if(typeof m=="string")return"string";if(Object.prototype.toString.call(m)==="[object Array]")return"array";if(O.nodebuffer&&I.test(m))return"nodebuffer";if(O.uint8array&&m instanceof Uint8Array)return"uint8array";if(O.arraybuffer&&m instanceof ArrayBuffer)return"arraybuffer"},N.checkSupport=function(m){var R=O[m.toLowerCase()];if(!R)throw new Error(m+" is not supported by this browser")},N.MAX_VALUE_16BITS=65535,N.MAX_VALUE_32BITS=-1,N.pretty=function(m){var R="",V,Z;for(Z=0;Z<(m||"").length;Z++)V=m.charCodeAt(Z),R+="\\x"+(V<16?"0":"")+V.toString(16).toUpperCase();return R},N.findCompression=function(m){for(var R in x)if(x.hasOwnProperty(R)&&x[R].magic===m)return x[R];return null},N.isRegExp=function(m){return Object.prototype.toString.call(m)==="[object RegExp]"}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(w,E,N){var O=w("./stringReader"),x=w("./nodeBufferReader"),I=w("./uint8ArrayReader"),_=w("./utils"),S=w("./signature"),u=w("./zipEntry"),y=w("./support"),v=w("./object");function m(R,V){this.files=[],this.loadOptions=V,R&&this.load(R)}m.prototype={checkSignature:function(R){var V=this.reader.readString(4);if(V!==R)throw new Error("Corrupted zip or bug : unexpected signature ("+_.pretty(V)+", expected "+_.pretty(R)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=v.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var R=this.zip64EndOfCentralSize-44,V=0,Z,ne,ee;V<R;)Z=this.reader.readInt(2),ne=this.reader.readInt(4),ee=this.reader.readString(ne),this.zip64ExtensibleData[Z]={id:Z,length:ne,value:ee}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var R,V;for(R=0;R<this.files.length;R++)V=this.files[R],this.reader.setIndex(V.localHeaderOffset),this.checkSignature(S.LOCAL_FILE_HEADER),V.readLocalPart(this.reader),V.handleUTF8()},readCentralDir:function(){var R;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===S.CENTRAL_FILE_HEADER;)R=new u({zip64:this.zip64},this.loadOptions),R.readCentralPart(this.reader),this.files.push(R)},readEndOfCentral:function(){var R=this.reader.lastIndexOfSignature(S.CENTRAL_DIRECTORY_END);if(R===-1)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(R),this.checkSignature(S.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===_.MAX_VALUE_16BITS||this.diskWithCentralDirStart===_.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===_.MAX_VALUE_16BITS||this.centralDirRecords===_.MAX_VALUE_16BITS||this.centralDirSize===_.MAX_VALUE_32BITS||this.centralDirOffset===_.MAX_VALUE_32BITS){if(this.zip64=!0,R=this.reader.lastIndexOfSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR),R===-1)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(R),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(R){var V=_.getTypeOf(R);V==="string"&&!y.uint8array?this.reader=new O(R,this.loadOptions.optimizedBinaryString):V==="nodebuffer"?this.reader=new x(R):this.reader=new I(_.transformTo("uint8array",R))},load:function(R){this.prepareReader(R),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},E.exports=m},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(w,E,N){var O=w("./stringReader"),x=w("./utils"),I=w("./compressedObject"),_=w("./object");function S(u,y){this.options=u,this.loadOptions=y}S.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},prepareCompressedContent:function(u,y,v){return function(){var m=u.index;u.setIndex(y);var R=u.readData(v);return u.setIndex(m),R}},prepareContent:function(u,y,v,m,R){return function(){var V=x.transformTo(m.uncompressInputType,this.getCompressedContent()),Z=m.uncompress(V);if(Z.length!==R)throw new Error("Bug : uncompressed data size mismatch");return Z}},readLocalPart:function(u){var y,v;if(u.skip(22),this.fileNameLength=u.readInt(2),v=u.readInt(2),this.fileName=u.readString(this.fileNameLength),u.skip(v),this.compressedSize==-1||this.uncompressedSize==-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(y=x.findCompression(this.compressionMethod),y===null)throw new Error("Corrupted zip : compression "+x.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new I,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(u,u.index,this.compressedSize,y),this.decompressed.getContent=this.prepareContent(u,u.index,this.compressedSize,y,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=x.transformTo("string",this.decompressed.getContent()),_.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(u){if(this.versionMadeBy=u.readString(2),this.versionNeeded=u.readInt(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4),this.fileNameLength=u.readInt(2),this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=u.readString(this.fileNameLength),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readString(this.fileCommentLength),this.dir=!!(this.externalFileAttributes&16)},parseZIP64ExtraField:function(u){if(this.extraFields[1]){var y=new O(this.extraFields[1].value);this.uncompressedSize===x.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===x.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===x.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===x.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(u){var y=u.index,v,m,R;for(this.extraFields=this.extraFields||{};u.index<y+this.extraFieldsLength;)v=u.readInt(2),m=u.readInt(2),R=u.readString(m),this.extraFields[v]={id:v,length:m,value:R}},handleUTF8:function(){if(this.useUTF8())this.fileName=_.utf8decode(this.fileName),this.fileComment=_.utf8decode(this.fileComment);else{var u=this.findExtraFieldUnicodePath();u!==null&&(this.fileName=u);var y=this.findExtraFieldUnicodeComment();y!==null&&(this.fileComment=y)}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var y=new O(u.value);return y.readInt(1)!==1||_.crc32(this.fileName)!==y.readInt(4)?null:_.utf8decode(y.readString(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var y=new O(u.value);return y.readInt(1)!==1||_.crc32(this.fileComment)!==y.readInt(4)?null:_.utf8decode(y.readString(u.length-5))}return null}},E.exports=S},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(w,E,N){var O=w("./lib/utils/common").assign,x=w("./lib/deflate"),I=w("./lib/inflate"),_=w("./lib/zlib/constants"),S={};O(S,x,I,_),E.exports=S},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(w,E,N){var O=w("./zlib/deflate.js"),x=w("./utils/common"),I=w("./utils/strings"),_=w("./zlib/messages"),S=w("./zlib/zstream"),u=0,y=4,v=0,m=1,R=-1,V=0,Z=8,ne=function(Y){this.options=x.assign({level:R,method:Z,chunkSize:16384,windowBits:15,memLevel:8,strategy:V,to:""},Y||{});var $=this.options;$.raw&&$.windowBits>0?$.windowBits=-$.windowBits:$.gzip&&$.windowBits>0&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var J=O.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(J!==v)throw new Error(_[J]);$.header&&O.deflateSetHeader(this.strm,$.header)};ne.prototype.push=function(Y,$){var J=this.strm,te=this.options.chunkSize,q,K;if(this.ended)return!1;K=$===~~$?$:$===!0?y:u,typeof Y=="string"?J.input=I.string2buf(Y):J.input=Y,J.next_in=0,J.avail_in=J.input.length;do{if(J.avail_out===0&&(J.output=new x.Buf8(te),J.next_out=0,J.avail_out=te),q=O.deflate(J,K),q!==m&&q!==v)return this.onEnd(q),this.ended=!0,!1;(J.avail_out===0||J.avail_in===0&&K===y)&&(this.options.to==="string"?this.onData(I.buf2binstring(x.shrinkBuf(J.output,J.next_out))):this.onData(x.shrinkBuf(J.output,J.next_out)))}while((J.avail_in>0||J.avail_out===0)&&q!==m);return K===y?(q=O.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===v):!0},ne.prototype.onData=function(Y){this.chunks.push(Y)},ne.prototype.onEnd=function(Y){Y===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=x.flattenChunks(this.chunks)),this.chunks=[],this.err=Y,this.msg=this.strm.msg};function ee(Y,$){var J=new ne($);if(J.push(Y,!0),J.err)throw J.msg;return J.result}function z(Y,$){return $=$||{},$.raw=!0,ee(Y,$)}function P(Y,$){return $=$||{},$.gzip=!0,ee(Y,$)}N.Deflate=ne,N.deflate=ee,N.deflateRaw=z,N.gzip=P},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(w,E,N){var O=w("./zlib/inflate.js"),x=w("./utils/common"),I=w("./utils/strings"),_=w("./zlib/constants"),S=w("./zlib/messages"),u=w("./zlib/zstream"),y=w("./zlib/gzheader"),v=function(V){this.options=x.assign({chunkSize:16384,windowBits:0,to:""},V||{});var Z=this.options;Z.raw&&Z.windowBits>=0&&Z.windowBits<16&&(Z.windowBits=-Z.windowBits,Z.windowBits===0&&(Z.windowBits=-15)),Z.windowBits>=0&&Z.windowBits<16&&!(V&&V.windowBits)&&(Z.windowBits+=32),Z.windowBits>15&&Z.windowBits<48&&(Z.windowBits&15||(Z.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var ne=O.inflateInit2(this.strm,Z.windowBits);if(ne!==_.Z_OK)throw new Error(S[ne]);this.header=new y,O.inflateGetHeader(this.strm,this.header)};v.prototype.push=function(V,Z){var ne=this.strm,ee=this.options.chunkSize,z,P,Y,$,J;if(this.ended)return!1;P=Z===~~Z?Z:Z===!0?_.Z_FINISH:_.Z_NO_FLUSH,typeof V=="string"?ne.input=I.binstring2buf(V):ne.input=V,ne.next_in=0,ne.avail_in=ne.input.length;do{if(ne.avail_out===0&&(ne.output=new x.Buf8(ee),ne.next_out=0,ne.avail_out=ee),z=O.inflate(ne,_.Z_NO_FLUSH),z!==_.Z_STREAM_END&&z!==_.Z_OK)return this.onEnd(z),this.ended=!0,!1;ne.next_out&&(ne.avail_out===0||z===_.Z_STREAM_END||ne.avail_in===0&&P===_.Z_FINISH)&&(this.options.to==="string"?(Y=I.utf8border(ne.output,ne.next_out),$=ne.next_out-Y,J=I.buf2string(ne.output,Y),ne.next_out=$,ne.avail_out=ee-$,$&&x.arraySet(ne.output,ne.output,Y,$,0),this.onData(J)):this.onData(x.shrinkBuf(ne.output,ne.next_out)))}while(ne.avail_in>0&&z!==_.Z_STREAM_END);return z===_.Z_STREAM_END&&(P=_.Z_FINISH),P===_.Z_FINISH?(z=O.inflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===_.Z_OK):!0},v.prototype.onData=function(V){this.chunks.push(V)},v.prototype.onEnd=function(V){V===_.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=x.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg};function m(V,Z){var ne=new v(Z);if(ne.push(V,!0),ne.err)throw ne.msg;return ne.result}function R(V,Z){return Z=Z||{},Z.raw=!0,m(V,Z)}N.Inflate=v,N.inflate=m,N.inflateRaw=R,N.ungzip=m},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(w,E,N){var O=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";N.assign=function(_){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var u=S.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var y in u)u.hasOwnProperty(y)&&(_[y]=u[y])}}return _},N.shrinkBuf=function(_,S){return _.length===S?_:_.subarray?_.subarray(0,S):(_.length=S,_)};var x={arraySet:function(_,S,u,y,v){if(S.subarray&&_.subarray){_.set(S.subarray(u,u+y),v);return}for(var m=0;m<y;m++)_[v+m]=S[u+m]},flattenChunks:function(_){var S,u,y,v,m,R;for(y=0,S=0,u=_.length;S<u;S++)y+=_[S].length;for(R=new Uint8Array(y),v=0,S=0,u=_.length;S<u;S++)m=_[S],R.set(m,v),v+=m.length;return R}},I={arraySet:function(_,S,u,y,v){for(var m=0;m<y;m++)_[v+m]=S[u+m]},flattenChunks:function(_){return[].concat.apply([],_)}};N.setTyped=function(_){_?(N.Buf8=Uint8Array,N.Buf16=Uint16Array,N.Buf32=Int32Array,N.assign(N,x)):(N.Buf8=Array,N.Buf16=Array,N.Buf32=Array,N.assign(N,I))},N.setTyped(O)},{}],28:[function(w,E,N){var O=w("./common"),x=!0,I=!0;try{String.fromCharCode.apply(null,[0])}catch{x=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{I=!1}for(var _=new O.Buf8(256),S=0;S<256;S++)_[S]=S>=252?6:S>=248?5:S>=240?4:S>=224?3:S>=192?2:1;_[254]=_[254]=1,N.string2buf=function(y){var v,m,R,V,Z,ne=y.length,ee=0;for(V=0;V<ne;V++)m=y.charCodeAt(V),(m&64512)===55296&&V+1<ne&&(R=y.charCodeAt(V+1),(R&64512)===56320&&(m=65536+(m-55296<<10)+(R-56320),V++)),ee+=m<128?1:m<2048?2:m<65536?3:4;for(v=new O.Buf8(ee),Z=0,V=0;Z<ee;V++)m=y.charCodeAt(V),(m&64512)===55296&&V+1<ne&&(R=y.charCodeAt(V+1),(R&64512)===56320&&(m=65536+(m-55296<<10)+(R-56320),V++)),m<128?v[Z++]=m:m<2048?(v[Z++]=192|m>>>6,v[Z++]=128|m&63):m<65536?(v[Z++]=224|m>>>12,v[Z++]=128|m>>>6&63,v[Z++]=128|m&63):(v[Z++]=240|m>>>18,v[Z++]=128|m>>>12&63,v[Z++]=128|m>>>6&63,v[Z++]=128|m&63);return v};function u(y,v){if(v<65537&&(y.subarray&&I||!y.subarray&&x))return String.fromCharCode.apply(null,O.shrinkBuf(y,v));for(var m="",R=0;R<v;R++)m+=String.fromCharCode(y[R]);return m}N.buf2binstring=function(y){return u(y,y.length)},N.binstring2buf=function(y){for(var v=new O.Buf8(y.length),m=0,R=v.length;m<R;m++)v[m]=y.charCodeAt(m);return v},N.buf2string=function(y,v){var m,R,V,Z,ne=v||y.length,ee=new Array(ne*2);for(R=0,m=0;m<ne;){if(V=y[m++],V<128){ee[R++]=V;continue}if(Z=_[V],Z>4){ee[R++]=65533,m+=Z-1;continue}for(V&=Z===2?31:Z===3?15:7;Z>1&&m<ne;)V=V<<6|y[m++]&63,Z--;if(Z>1){ee[R++]=65533;continue}V<65536?ee[R++]=V:(V-=65536,ee[R++]=55296|V>>10&1023,ee[R++]=56320|V&1023)}return u(ee,R)},N.utf8border=function(y,v){var m;for(v=v||y.length,v>y.length&&(v=y.length),m=v-1;m>=0&&(y[m]&192)===128;)m--;return m<0||m===0?v:m+_[y[m]]>v?m:v}},{"./common":27}],29:[function(w,E,N){function O(x,I,_,S){for(var u=x&65535|0,y=x>>>16&65535|0,v=0;_!==0;){v=_>2e3?2e3:_,_-=v;do u=u+I[S++]|0,y=y+u|0;while(--v);u%=65521,y%=65521}return u|y<<16|0}E.exports=O},{}],30:[function(w,E,N){E.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(w,E,N){function O(){for(var _,S=[],u=0;u<256;u++){_=u;for(var y=0;y<8;y++)_=_&1?3988292384^_>>>1:_>>>1;S[u]=_}return S}var x=O();function I(_,S,u,y){var v=x,m=y+u;_=_^-1;for(var R=y;R<m;R++)_=_>>>8^v[(_^S[R])&255];return _^-1}E.exports=I},{}],32:[function(w,E,N){var O=w("../utils/common"),x=w("./trees"),I=w("./adler32"),_=w("./crc32"),S=w("./messages"),u=0,y=1,v=3,m=4,R=5,V=0,Z=1,ne=-2,ee=-3,z=-5,P=-1,Y=1,$=2,J=3,te=4,q=0,K=2,U=8,F=9,re=15,W=8,ie=29,he=256,ve=he+1+ie,Ne=30,ze=19,rt=2*ve+1,le=15,me=3,De=258,Me=De+me+1,Re=32,we=42,ke=69,Ve=73,We=91,$e=103,ue=113,Se=666,be=1,Fe=2,ut=3,Pt=4,yt=3;function At(Q,qe){return Q.msg=S[qe],qe}function ri(Q){return(Q<<1)-(Q>4?9:0)}function $t(Q){for(var qe=Q.length;--qe>=0;)Q[qe]=0}function Rt(Q){var qe=Q.state,Ye=qe.pending;Ye>Q.avail_out&&(Ye=Q.avail_out),Ye!==0&&(O.arraySet(Q.output,qe.pending_buf,qe.pending_out,Ye,Q.next_out),Q.next_out+=Ye,qe.pending_out+=Ye,Q.total_out+=Ye,Q.avail_out-=Ye,qe.pending-=Ye,qe.pending===0&&(qe.pending_out=0))}function zt(Q,qe){x._tr_flush_block(Q,Q.block_start>=0?Q.block_start:-1,Q.strstart-Q.block_start,qe),Q.block_start=Q.strstart,Rt(Q.strm)}function et(Q,qe){Q.pending_buf[Q.pending++]=qe}function ct(Q,qe){Q.pending_buf[Q.pending++]=qe>>>8&255,Q.pending_buf[Q.pending++]=qe&255}function It(Q,qe,Ye,ye){var Ee=Q.avail_in;return Ee>ye&&(Ee=ye),Ee===0?0:(Q.avail_in-=Ee,O.arraySet(qe,Q.input,Q.next_in,Ee,Ye),Q.state.wrap===1?Q.adler=I(Q.adler,qe,Ee,Ye):Q.state.wrap===2&&(Q.adler=_(Q.adler,qe,Ee,Ye)),Q.next_in+=Ee,Q.total_in+=Ee,Ee)}function at(Q,qe){var Ye=Q.max_chain_length,ye=Q.strstart,Ee,Be,St=Q.prev_length,pt=Q.nice_match,gt=Q.strstart>Q.w_size-Me?Q.strstart-(Q.w_size-Me):0,qt=Q.window,Yn=Q.w_mask,Vt=Q.prev,kt=Q.strstart+De,oi=qt[ye+St-1],Si=qt[ye+St];Q.prev_length>=Q.good_match&&(Ye>>=2),pt>Q.lookahead&&(pt=Q.lookahead);do if(Ee=qe,!(qt[Ee+St]!==Si||qt[Ee+St-1]!==oi||qt[Ee]!==qt[ye]||qt[++Ee]!==qt[ye+1])){ye+=2,Ee++;do;while(qt[++ye]===qt[++Ee]&&qt[++ye]===qt[++Ee]&&qt[++ye]===qt[++Ee]&&qt[++ye]===qt[++Ee]&&qt[++ye]===qt[++Ee]&&qt[++ye]===qt[++Ee]&&qt[++ye]===qt[++Ee]&&qt[++ye]===qt[++Ee]&&ye<kt);if(Be=De-(kt-ye),ye=kt-De,Be>St){if(Q.match_start=qe,St=Be,Be>=pt)break;oi=qt[ye+St-1],Si=qt[ye+St]}}while((qe=Vt[qe&Yn])>gt&&--Ye!==0);return St<=Q.lookahead?St:Q.lookahead}function vt(Q){var qe=Q.w_size,Ye,ye,Ee,Be,St;do{if(Be=Q.window_size-Q.lookahead-Q.strstart,Q.strstart>=qe+(qe-Me)){O.arraySet(Q.window,Q.window,qe,qe,0),Q.match_start-=qe,Q.strstart-=qe,Q.block_start-=qe,ye=Q.hash_size,Ye=ye;do Ee=Q.head[--Ye],Q.head[Ye]=Ee>=qe?Ee-qe:0;while(--ye);ye=qe,Ye=ye;do Ee=Q.prev[--Ye],Q.prev[Ye]=Ee>=qe?Ee-qe:0;while(--ye);Be+=qe}if(Q.strm.avail_in===0)break;if(ye=It(Q.strm,Q.window,Q.strstart+Q.lookahead,Be),Q.lookahead+=ye,Q.lookahead+Q.insert>=me)for(St=Q.strstart-Q.insert,Q.ins_h=Q.window[St],Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[St+1])&Q.hash_mask;Q.insert&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[St+me-1])&Q.hash_mask,Q.prev[St&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=St,St++,Q.insert--,!(Q.lookahead+Q.insert<me)););}while(Q.lookahead<Me&&Q.strm.avail_in!==0)}function Ke(Q,qe){var Ye=65535;for(Ye>Q.pending_buf_size-5&&(Ye=Q.pending_buf_size-5);;){if(Q.lookahead<=1){if(vt(Q),Q.lookahead===0&&qe===u)return be;if(Q.lookahead===0)break}Q.strstart+=Q.lookahead,Q.lookahead=0;var ye=Q.block_start+Ye;if((Q.strstart===0||Q.strstart>=ye)&&(Q.lookahead=Q.strstart-ye,Q.strstart=ye,zt(Q,!1),Q.strm.avail_out===0)||Q.strstart-Q.block_start>=Q.w_size-Me&&(zt(Q,!1),Q.strm.avail_out===0))return be}return Q.insert=0,qe===m?(zt(Q,!0),Q.strm.avail_out===0?ut:Pt):(Q.strstart>Q.block_start&&(zt(Q,!1),Q.strm.avail_out===0),be)}function Je(Q,qe){for(var Ye,ye;;){if(Q.lookahead<Me){if(vt(Q),Q.lookahead<Me&&qe===u)return be;if(Q.lookahead===0)break}if(Ye=0,Q.lookahead>=me&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+me-1])&Q.hash_mask,Ye=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart),Ye!==0&&Q.strstart-Ye<=Q.w_size-Me&&(Q.match_length=at(Q,Ye)),Q.match_length>=me)if(ye=x._tr_tally(Q,Q.strstart-Q.match_start,Q.match_length-me),Q.lookahead-=Q.match_length,Q.match_length<=Q.max_lazy_match&&Q.lookahead>=me){Q.match_length--;do Q.strstart++,Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+me-1])&Q.hash_mask,Ye=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart;while(--Q.match_length!==0);Q.strstart++}else Q.strstart+=Q.match_length,Q.match_length=0,Q.ins_h=Q.window[Q.strstart],Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+1])&Q.hash_mask;else ye=x._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++;if(ye&&(zt(Q,!1),Q.strm.avail_out===0))return be}return Q.insert=Q.strstart<me-1?Q.strstart:me-1,qe===m?(zt(Q,!0),Q.strm.avail_out===0?ut:Pt):Q.last_lit&&(zt(Q,!1),Q.strm.avail_out===0)?be:Fe}function ei(Q,qe){for(var Ye,ye,Ee;;){if(Q.lookahead<Me){if(vt(Q),Q.lookahead<Me&&qe===u)return be;if(Q.lookahead===0)break}if(Ye=0,Q.lookahead>=me&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+me-1])&Q.hash_mask,Ye=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart),Q.prev_length=Q.match_length,Q.prev_match=Q.match_start,Q.match_length=me-1,Ye!==0&&Q.prev_length<Q.max_lazy_match&&Q.strstart-Ye<=Q.w_size-Me&&(Q.match_length=at(Q,Ye),Q.match_length<=5&&(Q.strategy===Y||Q.match_length===me&&Q.strstart-Q.match_start>4096)&&(Q.match_length=me-1)),Q.prev_length>=me&&Q.match_length<=Q.prev_length){Ee=Q.strstart+Q.lookahead-me,ye=x._tr_tally(Q,Q.strstart-1-Q.prev_match,Q.prev_length-me),Q.lookahead-=Q.prev_length-1,Q.prev_length-=2;do++Q.strstart<=Ee&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+me-1])&Q.hash_mask,Ye=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart);while(--Q.prev_length!==0);if(Q.match_available=0,Q.match_length=me-1,Q.strstart++,ye&&(zt(Q,!1),Q.strm.avail_out===0))return be}else if(Q.match_available){if(ye=x._tr_tally(Q,0,Q.window[Q.strstart-1]),ye&&zt(Q,!1),Q.strstart++,Q.lookahead--,Q.strm.avail_out===0)return be}else Q.match_available=1,Q.strstart++,Q.lookahead--}return Q.match_available&&(ye=x._tr_tally(Q,0,Q.window[Q.strstart-1]),Q.match_available=0),Q.insert=Q.strstart<me-1?Q.strstart:me-1,qe===m?(zt(Q,!0),Q.strm.avail_out===0?ut:Pt):Q.last_lit&&(zt(Q,!1),Q.strm.avail_out===0)?be:Fe}function ki(Q,qe){for(var Ye,ye,Ee,Be,St=Q.window;;){if(Q.lookahead<=De){if(vt(Q),Q.lookahead<=De&&qe===u)return be;if(Q.lookahead===0)break}if(Q.match_length=0,Q.lookahead>=me&&Q.strstart>0&&(Ee=Q.strstart-1,ye=St[Ee],ye===St[++Ee]&&ye===St[++Ee]&&ye===St[++Ee])){Be=Q.strstart+De;do;while(ye===St[++Ee]&&ye===St[++Ee]&&ye===St[++Ee]&&ye===St[++Ee]&&ye===St[++Ee]&&ye===St[++Ee]&&ye===St[++Ee]&&ye===St[++Ee]&&Ee<Be);Q.match_length=De-(Be-Ee),Q.match_length>Q.lookahead&&(Q.match_length=Q.lookahead)}if(Q.match_length>=me?(Ye=x._tr_tally(Q,1,Q.match_length-me),Q.lookahead-=Q.match_length,Q.strstart+=Q.match_length,Q.match_length=0):(Ye=x._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++),Ye&&(zt(Q,!1),Q.strm.avail_out===0))return be}return Q.insert=0,qe===m?(zt(Q,!0),Q.strm.avail_out===0?ut:Pt):Q.last_lit&&(zt(Q,!1),Q.strm.avail_out===0)?be:Fe}function ti(Q,qe){for(var Ye;;){if(Q.lookahead===0&&(vt(Q),Q.lookahead===0)){if(qe===u)return be;break}if(Q.match_length=0,Ye=x._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++,Ye&&(zt(Q,!1),Q.strm.avail_out===0))return be}return Q.insert=0,qe===m?(zt(Q,!0),Q.strm.avail_out===0?ut:Pt):Q.last_lit&&(zt(Q,!1),Q.strm.avail_out===0)?be:Fe}var je=function(Q,qe,Ye,ye,Ee){this.good_length=Q,this.max_lazy=qe,this.nice_length=Ye,this.max_chain=ye,this.func=Ee},Xe;Xe=[new je(0,0,0,0,Ke),new je(4,4,8,4,Je),new je(4,5,16,8,Je),new je(4,6,32,32,Je),new je(4,4,16,16,ei),new je(8,16,32,32,ei),new je(8,16,128,128,ei),new je(8,32,128,256,ei),new je(32,128,258,1024,ei),new je(32,258,258,4096,ei)];function _t(Q){Q.window_size=2*Q.w_size,$t(Q.head),Q.max_lazy_match=Xe[Q.level].max_lazy,Q.good_match=Xe[Q.level].good_length,Q.nice_match=Xe[Q.level].nice_length,Q.max_chain_length=Xe[Q.level].max_chain,Q.strstart=0,Q.block_start=0,Q.lookahead=0,Q.insert=0,Q.match_length=Q.prev_length=me-1,Q.match_available=0,Q.ins_h=0}function fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=U,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(rt*2),this.dyn_dtree=new O.Buf16((2*Ne+1)*2),this.bl_tree=new O.Buf16((2*ze+1)*2),$t(this.dyn_ltree),$t(this.dyn_dtree),$t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(le+1),this.heap=new O.Buf16(2*ve+1),$t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*ve+1),$t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function tt(Q){var qe;return!Q||!Q.state?At(Q,ne):(Q.total_in=Q.total_out=0,Q.data_type=K,qe=Q.state,qe.pending=0,qe.pending_out=0,qe.wrap<0&&(qe.wrap=-qe.wrap),qe.status=qe.wrap?we:ue,Q.adler=qe.wrap===2?0:1,qe.last_flush=u,x._tr_init(qe),V)}function ot(Q){var qe=tt(Q);return qe===V&&_t(Q.state),qe}function Oe(Q,qe){return!Q||!Q.state||Q.state.wrap!==2?ne:(Q.state.gzhead=qe,V)}function Qe(Q,qe,Ye,ye,Ee,Be){if(!Q)return ne;var St=1;if(qe===P&&(qe=6),ye<0?(St=0,ye=-ye):ye>15&&(St=2,ye-=16),Ee<1||Ee>F||Ye!==U||ye<8||ye>15||qe<0||qe>9||Be<0||Be>te)return At(Q,ne);ye===8&&(ye=9);var pt=new fe;return Q.state=pt,pt.strm=Q,pt.wrap=St,pt.gzhead=null,pt.w_bits=ye,pt.w_size=1<<pt.w_bits,pt.w_mask=pt.w_size-1,pt.hash_bits=Ee+7,pt.hash_size=1<<pt.hash_bits,pt.hash_mask=pt.hash_size-1,pt.hash_shift=~~((pt.hash_bits+me-1)/me),pt.window=new O.Buf8(pt.w_size*2),pt.head=new O.Buf16(pt.hash_size),pt.prev=new O.Buf16(pt.w_size),pt.lit_bufsize=1<<Ee+6,pt.pending_buf_size=pt.lit_bufsize*4,pt.pending_buf=new O.Buf8(pt.pending_buf_size),pt.d_buf=pt.lit_bufsize>>1,pt.l_buf=3*pt.lit_bufsize,pt.level=qe,pt.strategy=Be,pt.method=Ye,ot(Q)}function de(Q,qe){return Qe(Q,qe,U,re,W,q)}function nt(Q,qe){var Ye,ye,Ee,Be;if(!Q||!Q.state||qe>R||qe<0)return Q?At(Q,ne):ne;if(ye=Q.state,!Q.output||!Q.input&&Q.avail_in!==0||ye.status===Se&&qe!==m)return At(Q,Q.avail_out===0?z:ne);if(ye.strm=Q,Ye=ye.last_flush,ye.last_flush=qe,ye.status===we)if(ye.wrap===2)Q.adler=0,et(ye,31),et(ye,139),et(ye,8),ye.gzhead?(et(ye,(ye.gzhead.text?1:0)+(ye.gzhead.hcrc?2:0)+(ye.gzhead.extra?4:0)+(ye.gzhead.name?8:0)+(ye.gzhead.comment?16:0)),et(ye,ye.gzhead.time&255),et(ye,ye.gzhead.time>>8&255),et(ye,ye.gzhead.time>>16&255),et(ye,ye.gzhead.time>>24&255),et(ye,ye.level===9?2:ye.strategy>=$||ye.level<2?4:0),et(ye,ye.gzhead.os&255),ye.gzhead.extra&&ye.gzhead.extra.length&&(et(ye,ye.gzhead.extra.length&255),et(ye,ye.gzhead.extra.length>>8&255)),ye.gzhead.hcrc&&(Q.adler=_(Q.adler,ye.pending_buf,ye.pending,0)),ye.gzindex=0,ye.status=ke):(et(ye,0),et(ye,0),et(ye,0),et(ye,0),et(ye,0),et(ye,ye.level===9?2:ye.strategy>=$||ye.level<2?4:0),et(ye,yt),ye.status=ue);else{var St=U+(ye.w_bits-8<<4)<<8,pt=-1;ye.strategy>=$||ye.level<2?pt=0:ye.level<6?pt=1:ye.level===6?pt=2:pt=3,St|=pt<<6,ye.strstart!==0&&(St|=Re),St+=31-St%31,ye.status=ue,ct(ye,St),ye.strstart!==0&&(ct(ye,Q.adler>>>16),ct(ye,Q.adler&65535)),Q.adler=1}if(ye.status===ke)if(ye.gzhead.extra){for(Ee=ye.pending;ye.gzindex<(ye.gzhead.extra.length&65535)&&!(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Ee&&(Q.adler=_(Q.adler,ye.pending_buf,ye.pending-Ee,Ee)),Rt(Q),Ee=ye.pending,ye.pending===ye.pending_buf_size));)et(ye,ye.gzhead.extra[ye.gzindex]&255),ye.gzindex++;ye.gzhead.hcrc&&ye.pending>Ee&&(Q.adler=_(Q.adler,ye.pending_buf,ye.pending-Ee,Ee)),ye.gzindex===ye.gzhead.extra.length&&(ye.gzindex=0,ye.status=Ve)}else ye.status=Ve;if(ye.status===Ve)if(ye.gzhead.name){Ee=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Ee&&(Q.adler=_(Q.adler,ye.pending_buf,ye.pending-Ee,Ee)),Rt(Q),Ee=ye.pending,ye.pending===ye.pending_buf_size)){Be=1;break}ye.gzindex<ye.gzhead.name.length?Be=ye.gzhead.name.charCodeAt(ye.gzindex++)&255:Be=0,et(ye,Be)}while(Be!==0);ye.gzhead.hcrc&&ye.pending>Ee&&(Q.adler=_(Q.adler,ye.pending_buf,ye.pending-Ee,Ee)),Be===0&&(ye.gzindex=0,ye.status=We)}else ye.status=We;if(ye.status===We)if(ye.gzhead.comment){Ee=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Ee&&(Q.adler=_(Q.adler,ye.pending_buf,ye.pending-Ee,Ee)),Rt(Q),Ee=ye.pending,ye.pending===ye.pending_buf_size)){Be=1;break}ye.gzindex<ye.gzhead.comment.length?Be=ye.gzhead.comment.charCodeAt(ye.gzindex++)&255:Be=0,et(ye,Be)}while(Be!==0);ye.gzhead.hcrc&&ye.pending>Ee&&(Q.adler=_(Q.adler,ye.pending_buf,ye.pending-Ee,Ee)),Be===0&&(ye.status=$e)}else ye.status=$e;if(ye.status===$e&&(ye.gzhead.hcrc?(ye.pending+2>ye.pending_buf_size&&Rt(Q),ye.pending+2<=ye.pending_buf_size&&(et(ye,Q.adler&255),et(ye,Q.adler>>8&255),Q.adler=0,ye.status=ue)):ye.status=ue),ye.pending!==0){if(Rt(Q),Q.avail_out===0)return ye.last_flush=-1,V}else if(Q.avail_in===0&&ri(qe)<=ri(Ye)&&qe!==m)return At(Q,z);if(ye.status===Se&&Q.avail_in!==0)return At(Q,z);if(Q.avail_in!==0||ye.lookahead!==0||qe!==u&&ye.status!==Se){var gt=ye.strategy===$?ti(ye,qe):ye.strategy===J?ki(ye,qe):Xe[ye.level].func(ye,qe);if((gt===ut||gt===Pt)&&(ye.status=Se),gt===be||gt===ut)return Q.avail_out===0&&(ye.last_flush=-1),V;if(gt===Fe&&(qe===y?x._tr_align(ye):qe!==R&&(x._tr_stored_block(ye,0,0,!1),qe===v&&($t(ye.head),ye.lookahead===0&&(ye.strstart=0,ye.block_start=0,ye.insert=0))),Rt(Q),Q.avail_out===0))return ye.last_flush=-1,V}return qe!==m?V:ye.wrap<=0?Z:(ye.wrap===2?(et(ye,Q.adler&255),et(ye,Q.adler>>8&255),et(ye,Q.adler>>16&255),et(ye,Q.adler>>24&255),et(ye,Q.total_in&255),et(ye,Q.total_in>>8&255),et(ye,Q.total_in>>16&255),et(ye,Q.total_in>>24&255)):(ct(ye,Q.adler>>>16),ct(ye,Q.adler&65535)),Rt(Q),ye.wrap>0&&(ye.wrap=-ye.wrap),ye.pending!==0?V:Z)}function bt(Q){var qe;return!Q||!Q.state?ne:(qe=Q.state.status,qe!==we&&qe!==ke&&qe!==Ve&&qe!==We&&qe!==$e&&qe!==ue&&qe!==Se?At(Q,ne):(Q.state=null,qe===ue?At(Q,ee):V))}N.deflateInit=de,N.deflateInit2=Qe,N.deflateReset=ot,N.deflateResetKeep=tt,N.deflateSetHeader=Oe,N.deflate=nt,N.deflateEnd=bt,N.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(w,E,N){function O(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}E.exports=O},{}],34:[function(w,E,N){var O=30,x=12;E.exports=function(_,S){var u,y,v,m,R,V,Z,ne,ee,z,P,Y,$,J,te,q,K,U,F,re,W,ie,he,ve,Ne;u=_.state,y=_.next_in,ve=_.input,v=y+(_.avail_in-5),m=_.next_out,Ne=_.output,R=m-(S-_.avail_out),V=m+(_.avail_out-257),Z=u.dmax,ne=u.wsize,ee=u.whave,z=u.wnext,P=u.window,Y=u.hold,$=u.bits,J=u.lencode,te=u.distcode,q=(1<<u.lenbits)-1,K=(1<<u.distbits)-1;e:do{$<15&&(Y+=ve[y++]<<$,$+=8,Y+=ve[y++]<<$,$+=8),U=J[Y&q];t:for(;;){if(F=U>>>24,Y>>>=F,$-=F,F=U>>>16&255,F===0)Ne[m++]=U&65535;else if(F&16){re=U&65535,F&=15,F&&($<F&&(Y+=ve[y++]<<$,$+=8),re+=Y&(1<<F)-1,Y>>>=F,$-=F),$<15&&(Y+=ve[y++]<<$,$+=8,Y+=ve[y++]<<$,$+=8),U=te[Y&K];i:for(;;){if(F=U>>>24,Y>>>=F,$-=F,F=U>>>16&255,F&16){if(W=U&65535,F&=15,$<F&&(Y+=ve[y++]<<$,$+=8,$<F&&(Y+=ve[y++]<<$,$+=8)),W+=Y&(1<<F)-1,W>Z){_.msg="invalid distance too far back",u.mode=O;break e}if(Y>>>=F,$-=F,F=m-R,W>F){if(F=W-F,F>ee&&u.sane){_.msg="invalid distance too far back",u.mode=O;break e}if(ie=0,he=P,z===0){if(ie+=ne-F,F<re){re-=F;do Ne[m++]=P[ie++];while(--F);ie=m-W,he=Ne}}else if(z<F){if(ie+=ne+z-F,F-=z,F<re){re-=F;do Ne[m++]=P[ie++];while(--F);if(ie=0,z<re){F=z,re-=F;do Ne[m++]=P[ie++];while(--F);ie=m-W,he=Ne}}}else if(ie+=z-F,F<re){re-=F;do Ne[m++]=P[ie++];while(--F);ie=m-W,he=Ne}for(;re>2;)Ne[m++]=he[ie++],Ne[m++]=he[ie++],Ne[m++]=he[ie++],re-=3;re&&(Ne[m++]=he[ie++],re>1&&(Ne[m++]=he[ie++]))}else{ie=m-W;do Ne[m++]=Ne[ie++],Ne[m++]=Ne[ie++],Ne[m++]=Ne[ie++],re-=3;while(re>2);re&&(Ne[m++]=Ne[ie++],re>1&&(Ne[m++]=Ne[ie++]))}}else if(F&64){_.msg="invalid distance code",u.mode=O;break e}else{U=te[(U&65535)+(Y&(1<<F)-1)];continue i}break}}else if(F&64)if(F&32){u.mode=x;break e}else{_.msg="invalid literal/length code",u.mode=O;break e}else{U=J[(U&65535)+(Y&(1<<F)-1)];continue t}break}}while(y<v&&m<V);re=$>>3,y-=re,$-=re<<3,Y&=(1<<$)-1,_.next_in=y,_.next_out=m,_.avail_in=y<v?5+(v-y):5-(y-v),_.avail_out=m<V?257+(V-m):257-(m-V),u.hold=Y,u.bits=$}},{}],35:[function(w,E,N){var O=w("../utils/common"),x=w("./adler32"),I=w("./crc32"),_=w("./inffast"),S=w("./inftrees"),u=0,y=1,v=2,m=4,R=5,V=6,Z=0,ne=1,ee=2,z=-2,P=-3,Y=-4,$=-5,J=8,te=1,q=2,K=3,U=4,F=5,re=6,W=7,ie=8,he=9,ve=10,Ne=11,ze=12,rt=13,le=14,me=15,De=16,Me=17,Re=18,we=19,ke=20,Ve=21,We=22,$e=23,ue=24,Se=25,be=26,Fe=27,ut=28,Pt=29,yt=30,At=31,ri=32,$t=852,Rt=592,zt=15,et=zt;function ct(Oe){return(Oe>>>24&255)+(Oe>>>8&65280)+((Oe&65280)<<8)+((Oe&255)<<24)}function It(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new O.Buf16(320),this.work=new O.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function at(Oe){var Qe;return!Oe||!Oe.state?z:(Qe=Oe.state,Oe.total_in=Oe.total_out=Qe.total=0,Oe.msg="",Qe.wrap&&(Oe.adler=Qe.wrap&1),Qe.mode=te,Qe.last=0,Qe.havedict=0,Qe.dmax=32768,Qe.head=null,Qe.hold=0,Qe.bits=0,Qe.lencode=Qe.lendyn=new O.Buf32($t),Qe.distcode=Qe.distdyn=new O.Buf32(Rt),Qe.sane=1,Qe.back=-1,Z)}function vt(Oe){var Qe;return!Oe||!Oe.state?z:(Qe=Oe.state,Qe.wsize=0,Qe.whave=0,Qe.wnext=0,at(Oe))}function Ke(Oe,Qe){var de,nt;return!Oe||!Oe.state||(nt=Oe.state,Qe<0?(de=0,Qe=-Qe):(de=(Qe>>4)+1,Qe<48&&(Qe&=15)),Qe&&(Qe<8||Qe>15))?z:(nt.window!==null&&nt.wbits!==Qe&&(nt.window=null),nt.wrap=de,nt.wbits=Qe,vt(Oe))}function Je(Oe,Qe){var de,nt;return Oe?(nt=new It,Oe.state=nt,nt.window=null,de=Ke(Oe,Qe),de!==Z&&(Oe.state=null),de):z}function ei(Oe){return Je(Oe,et)}var ki=!0,ti,je;function Xe(Oe){if(ki){var Qe;for(ti=new O.Buf32(512),je=new O.Buf32(32),Qe=0;Qe<144;)Oe.lens[Qe++]=8;for(;Qe<256;)Oe.lens[Qe++]=9;for(;Qe<280;)Oe.lens[Qe++]=7;for(;Qe<288;)Oe.lens[Qe++]=8;for(S(y,Oe.lens,0,288,ti,0,Oe.work,{bits:9}),Qe=0;Qe<32;)Oe.lens[Qe++]=5;S(v,Oe.lens,0,32,je,0,Oe.work,{bits:5}),ki=!1}Oe.lencode=ti,Oe.lenbits=9,Oe.distcode=je,Oe.distbits=5}function _t(Oe,Qe,de,nt){var bt,Q=Oe.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new O.Buf8(Q.wsize)),nt>=Q.wsize?(O.arraySet(Q.window,Qe,de-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(bt=Q.wsize-Q.wnext,bt>nt&&(bt=nt),O.arraySet(Q.window,Qe,de-nt,bt,Q.wnext),nt-=bt,nt?(O.arraySet(Q.window,Qe,de-nt,nt,0),Q.wnext=nt,Q.whave=Q.wsize):(Q.wnext+=bt,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=bt))),0}function fe(Oe,Qe){var de,nt,bt,Q,qe,Ye,ye,Ee,Be,St,pt,gt,qt,Yn,Vt=0,kt,oi,Si,Pi,hr,Kt,Yt,Hi,Ai=new O.Buf8(4),qi,ci,Zn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Oe||!Oe.state||!Oe.output||!Oe.input&&Oe.avail_in!==0)return z;de=Oe.state,de.mode===ze&&(de.mode=rt),qe=Oe.next_out,bt=Oe.output,ye=Oe.avail_out,Q=Oe.next_in,nt=Oe.input,Ye=Oe.avail_in,Ee=de.hold,Be=de.bits,St=Ye,pt=ye,Hi=Z;e:for(;;)switch(de.mode){case te:if(de.wrap===0){de.mode=rt;break}for(;Be<16;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if(de.wrap&2&&Ee===35615){de.check=0,Ai[0]=Ee&255,Ai[1]=Ee>>>8&255,de.check=I(de.check,Ai,2,0),Ee=0,Be=0,de.mode=q;break}if(de.flags=0,de.head&&(de.head.done=!1),!(de.wrap&1)||(((Ee&255)<<8)+(Ee>>8))%31){Oe.msg="incorrect header check",de.mode=yt;break}if((Ee&15)!==J){Oe.msg="unknown compression method",de.mode=yt;break}if(Ee>>>=4,Be-=4,Yt=(Ee&15)+8,de.wbits===0)de.wbits=Yt;else if(Yt>de.wbits){Oe.msg="invalid window size",de.mode=yt;break}de.dmax=1<<Yt,Oe.adler=de.check=1,de.mode=Ee&512?ve:ze,Ee=0,Be=0;break;case q:for(;Be<16;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if(de.flags=Ee,(de.flags&255)!==J){Oe.msg="unknown compression method",de.mode=yt;break}if(de.flags&57344){Oe.msg="unknown header flags set",de.mode=yt;break}de.head&&(de.head.text=Ee>>8&1),de.flags&512&&(Ai[0]=Ee&255,Ai[1]=Ee>>>8&255,de.check=I(de.check,Ai,2,0)),Ee=0,Be=0,de.mode=K;case K:for(;Be<32;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}de.head&&(de.head.time=Ee),de.flags&512&&(Ai[0]=Ee&255,Ai[1]=Ee>>>8&255,Ai[2]=Ee>>>16&255,Ai[3]=Ee>>>24&255,de.check=I(de.check,Ai,4,0)),Ee=0,Be=0,de.mode=U;case U:for(;Be<16;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}de.head&&(de.head.xflags=Ee&255,de.head.os=Ee>>8),de.flags&512&&(Ai[0]=Ee&255,Ai[1]=Ee>>>8&255,de.check=I(de.check,Ai,2,0)),Ee=0,Be=0,de.mode=F;case F:if(de.flags&1024){for(;Be<16;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}de.length=Ee,de.head&&(de.head.extra_len=Ee),de.flags&512&&(Ai[0]=Ee&255,Ai[1]=Ee>>>8&255,de.check=I(de.check,Ai,2,0)),Ee=0,Be=0}else de.head&&(de.head.extra=null);de.mode=re;case re:if(de.flags&1024&&(gt=de.length,gt>Ye&&(gt=Ye),gt&&(de.head&&(Yt=de.head.extra_len-de.length,de.head.extra||(de.head.extra=new Array(de.head.extra_len)),O.arraySet(de.head.extra,nt,Q,gt,Yt)),de.flags&512&&(de.check=I(de.check,nt,gt,Q)),Ye-=gt,Q+=gt,de.length-=gt),de.length))break e;de.length=0,de.mode=W;case W:if(de.flags&2048){if(Ye===0)break e;gt=0;do Yt=nt[Q+gt++],de.head&&Yt&&de.length<65536&&(de.head.name+=String.fromCharCode(Yt));while(Yt&&gt<Ye);if(de.flags&512&&(de.check=I(de.check,nt,gt,Q)),Ye-=gt,Q+=gt,Yt)break e}else de.head&&(de.head.name=null);de.length=0,de.mode=ie;case ie:if(de.flags&4096){if(Ye===0)break e;gt=0;do Yt=nt[Q+gt++],de.head&&Yt&&de.length<65536&&(de.head.comment+=String.fromCharCode(Yt));while(Yt&&gt<Ye);if(de.flags&512&&(de.check=I(de.check,nt,gt,Q)),Ye-=gt,Q+=gt,Yt)break e}else de.head&&(de.head.comment=null);de.mode=he;case he:if(de.flags&512){for(;Be<16;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if(Ee!==(de.check&65535)){Oe.msg="header crc mismatch",de.mode=yt;break}Ee=0,Be=0}de.head&&(de.head.hcrc=de.flags>>9&1,de.head.done=!0),Oe.adler=de.check=0,de.mode=ze;break;case ve:for(;Be<32;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}Oe.adler=de.check=ct(Ee),Ee=0,Be=0,de.mode=Ne;case Ne:if(de.havedict===0)return Oe.next_out=qe,Oe.avail_out=ye,Oe.next_in=Q,Oe.avail_in=Ye,de.hold=Ee,de.bits=Be,ee;Oe.adler=de.check=1,de.mode=ze;case ze:if(Qe===R||Qe===V)break e;case rt:if(de.last){Ee>>>=Be&7,Be-=Be&7,de.mode=Fe;break}for(;Be<3;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}switch(de.last=Ee&1,Ee>>>=1,Be-=1,Ee&3){case 0:de.mode=le;break;case 1:if(Xe(de),de.mode=ke,Qe===V){Ee>>>=2,Be-=2;break e}break;case 2:de.mode=Me;break;case 3:Oe.msg="invalid block type",de.mode=yt}Ee>>>=2,Be-=2;break;case le:for(Ee>>>=Be&7,Be-=Be&7;Be<32;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if((Ee&65535)!==(Ee>>>16^65535)){Oe.msg="invalid stored block lengths",de.mode=yt;break}if(de.length=Ee&65535,Ee=0,Be=0,de.mode=me,Qe===V)break e;case me:de.mode=De;case De:if(gt=de.length,gt){if(gt>Ye&&(gt=Ye),gt>ye&&(gt=ye),gt===0)break e;O.arraySet(bt,nt,Q,gt,qe),Ye-=gt,Q+=gt,ye-=gt,qe+=gt,de.length-=gt;break}de.mode=ze;break;case Me:for(;Be<14;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if(de.nlen=(Ee&31)+257,Ee>>>=5,Be-=5,de.ndist=(Ee&31)+1,Ee>>>=5,Be-=5,de.ncode=(Ee&15)+4,Ee>>>=4,Be-=4,de.nlen>286||de.ndist>30){Oe.msg="too many length or distance symbols",de.mode=yt;break}de.have=0,de.mode=Re;case Re:for(;de.have<de.ncode;){for(;Be<3;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}de.lens[Zn[de.have++]]=Ee&7,Ee>>>=3,Be-=3}for(;de.have<19;)de.lens[Zn[de.have++]]=0;if(de.lencode=de.lendyn,de.lenbits=7,qi={bits:de.lenbits},Hi=S(u,de.lens,0,19,de.lencode,0,de.work,qi),de.lenbits=qi.bits,Hi){Oe.msg="invalid code lengths set",de.mode=yt;break}de.have=0,de.mode=we;case we:for(;de.have<de.nlen+de.ndist;){for(;Vt=de.lencode[Ee&(1<<de.lenbits)-1],kt=Vt>>>24,oi=Vt>>>16&255,Si=Vt&65535,!(kt<=Be);){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if(Si<16)Ee>>>=kt,Be-=kt,de.lens[de.have++]=Si;else{if(Si===16){for(ci=kt+2;Be<ci;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if(Ee>>>=kt,Be-=kt,de.have===0){Oe.msg="invalid bit length repeat",de.mode=yt;break}Yt=de.lens[de.have-1],gt=3+(Ee&3),Ee>>>=2,Be-=2}else if(Si===17){for(ci=kt+3;Be<ci;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}Ee>>>=kt,Be-=kt,Yt=0,gt=3+(Ee&7),Ee>>>=3,Be-=3}else{for(ci=kt+7;Be<ci;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}Ee>>>=kt,Be-=kt,Yt=0,gt=11+(Ee&127),Ee>>>=7,Be-=7}if(de.have+gt>de.nlen+de.ndist){Oe.msg="invalid bit length repeat",de.mode=yt;break}for(;gt--;)de.lens[de.have++]=Yt}}if(de.mode===yt)break;if(de.lens[256]===0){Oe.msg="invalid code -- missing end-of-block",de.mode=yt;break}if(de.lenbits=9,qi={bits:de.lenbits},Hi=S(y,de.lens,0,de.nlen,de.lencode,0,de.work,qi),de.lenbits=qi.bits,Hi){Oe.msg="invalid literal/lengths set",de.mode=yt;break}if(de.distbits=6,de.distcode=de.distdyn,qi={bits:de.distbits},Hi=S(v,de.lens,de.nlen,de.ndist,de.distcode,0,de.work,qi),de.distbits=qi.bits,Hi){Oe.msg="invalid distances set",de.mode=yt;break}if(de.mode=ke,Qe===V)break e;case ke:de.mode=Ve;case Ve:if(Ye>=6&&ye>=258){Oe.next_out=qe,Oe.avail_out=ye,Oe.next_in=Q,Oe.avail_in=Ye,de.hold=Ee,de.bits=Be,_(Oe,pt),qe=Oe.next_out,bt=Oe.output,ye=Oe.avail_out,Q=Oe.next_in,nt=Oe.input,Ye=Oe.avail_in,Ee=de.hold,Be=de.bits,de.mode===ze&&(de.back=-1);break}for(de.back=0;Vt=de.lencode[Ee&(1<<de.lenbits)-1],kt=Vt>>>24,oi=Vt>>>16&255,Si=Vt&65535,!(kt<=Be);){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if(oi&&!(oi&240)){for(Pi=kt,hr=oi,Kt=Si;Vt=de.lencode[Kt+((Ee&(1<<Pi+hr)-1)>>Pi)],kt=Vt>>>24,oi=Vt>>>16&255,Si=Vt&65535,!(Pi+kt<=Be);){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}Ee>>>=Pi,Be-=Pi,de.back+=Pi}if(Ee>>>=kt,Be-=kt,de.back+=kt,de.length=Si,oi===0){de.mode=be;break}if(oi&32){de.back=-1,de.mode=ze;break}if(oi&64){Oe.msg="invalid literal/length code",de.mode=yt;break}de.extra=oi&15,de.mode=We;case We:if(de.extra){for(ci=de.extra;Be<ci;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}de.length+=Ee&(1<<de.extra)-1,Ee>>>=de.extra,Be-=de.extra,de.back+=de.extra}de.was=de.length,de.mode=$e;case $e:for(;Vt=de.distcode[Ee&(1<<de.distbits)-1],kt=Vt>>>24,oi=Vt>>>16&255,Si=Vt&65535,!(kt<=Be);){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if(!(oi&240)){for(Pi=kt,hr=oi,Kt=Si;Vt=de.distcode[Kt+((Ee&(1<<Pi+hr)-1)>>Pi)],kt=Vt>>>24,oi=Vt>>>16&255,Si=Vt&65535,!(Pi+kt<=Be);){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}Ee>>>=Pi,Be-=Pi,de.back+=Pi}if(Ee>>>=kt,Be-=kt,de.back+=kt,oi&64){Oe.msg="invalid distance code",de.mode=yt;break}de.offset=Si,de.extra=oi&15,de.mode=ue;case ue:if(de.extra){for(ci=de.extra;Be<ci;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}de.offset+=Ee&(1<<de.extra)-1,Ee>>>=de.extra,Be-=de.extra,de.back+=de.extra}if(de.offset>de.dmax){Oe.msg="invalid distance too far back",de.mode=yt;break}de.mode=Se;case Se:if(ye===0)break e;if(gt=pt-ye,de.offset>gt){if(gt=de.offset-gt,gt>de.whave&&de.sane){Oe.msg="invalid distance too far back",de.mode=yt;break}gt>de.wnext?(gt-=de.wnext,qt=de.wsize-gt):qt=de.wnext-gt,gt>de.length&&(gt=de.length),Yn=de.window}else Yn=bt,qt=qe-de.offset,gt=de.length;gt>ye&&(gt=ye),ye-=gt,de.length-=gt;do bt[qe++]=Yn[qt++];while(--gt);de.length===0&&(de.mode=Ve);break;case be:if(ye===0)break e;bt[qe++]=de.length,ye--,de.mode=Ve;break;case Fe:if(de.wrap){for(;Be<32;){if(Ye===0)break e;Ye--,Ee|=nt[Q++]<<Be,Be+=8}if(pt-=ye,Oe.total_out+=pt,de.total+=pt,pt&&(Oe.adler=de.check=de.flags?I(de.check,bt,pt,qe-pt):x(de.check,bt,pt,qe-pt)),pt=ye,(de.flags?Ee:ct(Ee))!==de.check){Oe.msg="incorrect data check",de.mode=yt;break}Ee=0,Be=0}de.mode=ut;case ut:if(de.wrap&&de.flags){for(;Be<32;){if(Ye===0)break e;Ye--,Ee+=nt[Q++]<<Be,Be+=8}if(Ee!==(de.total&4294967295)){Oe.msg="incorrect length check",de.mode=yt;break}Ee=0,Be=0}de.mode=Pt;case Pt:Hi=ne;break e;case yt:Hi=P;break e;case At:return Y;case ri:default:return z}return Oe.next_out=qe,Oe.avail_out=ye,Oe.next_in=Q,Oe.avail_in=Ye,de.hold=Ee,de.bits=Be,(de.wsize||pt!==Oe.avail_out&&de.mode<yt&&(de.mode<Fe||Qe!==m))&&_t(Oe,Oe.output,Oe.next_out,pt-Oe.avail_out)?(de.mode=At,Y):(St-=Oe.avail_in,pt-=Oe.avail_out,Oe.total_in+=St,Oe.total_out+=pt,de.total+=pt,de.wrap&&pt&&(Oe.adler=de.check=de.flags?I(de.check,bt,pt,Oe.next_out-pt):x(de.check,bt,pt,Oe.next_out-pt)),Oe.data_type=de.bits+(de.last?64:0)+(de.mode===ze?128:0)+(de.mode===ke||de.mode===me?256:0),(St===0&&pt===0||Qe===m)&&Hi===Z&&(Hi=$),Hi)}function tt(Oe){if(!Oe||!Oe.state)return z;var Qe=Oe.state;return Qe.window&&(Qe.window=null),Oe.state=null,Z}function ot(Oe,Qe){var de;return!Oe||!Oe.state||(de=Oe.state,!(de.wrap&2))?z:(de.head=Qe,Qe.done=!1,Z)}N.inflateReset=vt,N.inflateReset2=Ke,N.inflateResetKeep=at,N.inflateInit=ei,N.inflateInit2=Je,N.inflate=fe,N.inflateEnd=tt,N.inflateGetHeader=ot,N.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(w,E,N){var O=w("../utils/common"),x=15,I=852,_=592,S=0,u=1,y=2,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],m=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],R=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],V=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];E.exports=function(ne,ee,z,P,Y,$,J,te){var q=te.bits,K=0,U=0,F=0,re=0,W=0,ie=0,he=0,ve=0,Ne=0,ze=0,rt,le,me,De,Me,Re=null,we=0,ke,Ve=new O.Buf16(x+1),We=new O.Buf16(x+1),$e=null,ue=0,Se,be,Fe;for(K=0;K<=x;K++)Ve[K]=0;for(U=0;U<P;U++)Ve[ee[z+U]]++;for(W=q,re=x;re>=1&&Ve[re]===0;re--);if(W>re&&(W=re),re===0)return Y[$++]=1<<24|64<<16|0,Y[$++]=1<<24|64<<16|0,te.bits=1,0;for(F=1;F<re&&Ve[F]===0;F++);for(W<F&&(W=F),ve=1,K=1;K<=x;K++)if(ve<<=1,ve-=Ve[K],ve<0)return-1;if(ve>0&&(ne===S||re!==1))return-1;for(We[1]=0,K=1;K<x;K++)We[K+1]=We[K]+Ve[K];for(U=0;U<P;U++)ee[z+U]!==0&&(J[We[ee[z+U]]++]=U);if(ne===S?(Re=$e=J,ke=19):ne===u?(Re=v,we-=257,$e=m,ue-=257,ke=256):(Re=R,$e=V,ke=-1),ze=0,U=0,K=F,Me=$,ie=W,he=0,me=-1,Ne=1<<W,De=Ne-1,ne===u&&Ne>I||ne===y&&Ne>_)return 1;for(var ut=0;;){ut++,Se=K-he,J[U]<ke?(be=0,Fe=J[U]):J[U]>ke?(be=$e[ue+J[U]],Fe=Re[we+J[U]]):(be=96,Fe=0),rt=1<<K-he,le=1<<ie,F=le;do le-=rt,Y[Me+(ze>>he)+le]=Se<<24|be<<16|Fe|0;while(le!==0);for(rt=1<<K-1;ze&rt;)rt>>=1;if(rt!==0?(ze&=rt-1,ze+=rt):ze=0,U++,--Ve[K]===0){if(K===re)break;K=ee[z+J[U]]}if(K>W&&(ze&De)!==me){for(he===0&&(he=W),Me+=F,ie=K-he,ve=1<<ie;ie+he<re&&(ve-=Ve[ie+he],!(ve<=0));)ie++,ve<<=1;if(Ne+=1<<ie,ne===u&&Ne>I||ne===y&&Ne>_)return 1;me=ze&De,Y[me]=W<<24|ie<<16|Me-$|0}}return ze!==0&&(Y[Me+ze]=K-he<<24|64<<16|0),te.bits=W,0}},{"../utils/common":27}],37:[function(w,E,N){E.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(w,E,N){var O=w("../utils/common"),x=4,I=0,_=1,S=2;function u(fe){for(var tt=fe.length;--tt>=0;)fe[tt]=0}var y=0,v=1,m=2,R=3,V=258,Z=29,ne=256,ee=ne+1+Z,z=30,P=19,Y=2*ee+1,$=15,J=16,te=7,q=256,K=16,U=17,F=18,re=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ie=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ve=512,Ne=new Array((ee+2)*2);u(Ne);var ze=new Array(z*2);u(ze);var rt=new Array(ve);u(rt);var le=new Array(V-R+1);u(le);var me=new Array(Z);u(me);var De=new Array(z);u(De);var Me=function(fe,tt,ot,Oe,Qe){this.static_tree=fe,this.extra_bits=tt,this.extra_base=ot,this.elems=Oe,this.max_length=Qe,this.has_stree=fe&&fe.length},Re,we,ke,Ve=function(fe,tt){this.dyn_tree=fe,this.max_code=0,this.stat_desc=tt};function We(fe){return fe<256?rt[fe]:rt[256+(fe>>>7)]}function $e(fe,tt){fe.pending_buf[fe.pending++]=tt&255,fe.pending_buf[fe.pending++]=tt>>>8&255}function ue(fe,tt,ot){fe.bi_valid>J-ot?(fe.bi_buf|=tt<<fe.bi_valid&65535,$e(fe,fe.bi_buf),fe.bi_buf=tt>>J-fe.bi_valid,fe.bi_valid+=ot-J):(fe.bi_buf|=tt<<fe.bi_valid&65535,fe.bi_valid+=ot)}function Se(fe,tt,ot){ue(fe,ot[tt*2],ot[tt*2+1])}function be(fe,tt){var ot=0;do ot|=fe&1,fe>>>=1,ot<<=1;while(--tt>0);return ot>>>1}function Fe(fe){fe.bi_valid===16?($e(fe,fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0):fe.bi_valid>=8&&(fe.pending_buf[fe.pending++]=fe.bi_buf&255,fe.bi_buf>>=8,fe.bi_valid-=8)}function ut(fe,tt){var ot=tt.dyn_tree,Oe=tt.max_code,Qe=tt.stat_desc.static_tree,de=tt.stat_desc.has_stree,nt=tt.stat_desc.extra_bits,bt=tt.stat_desc.extra_base,Q=tt.stat_desc.max_length,qe,Ye,ye,Ee,Be,St,pt=0;for(Ee=0;Ee<=$;Ee++)fe.bl_count[Ee]=0;for(ot[fe.heap[fe.heap_max]*2+1]=0,qe=fe.heap_max+1;qe<Y;qe++)Ye=fe.heap[qe],Ee=ot[ot[Ye*2+1]*2+1]+1,Ee>Q&&(Ee=Q,pt++),ot[Ye*2+1]=Ee,!(Ye>Oe)&&(fe.bl_count[Ee]++,Be=0,Ye>=bt&&(Be=nt[Ye-bt]),St=ot[Ye*2],fe.opt_len+=St*(Ee+Be),de&&(fe.static_len+=St*(Qe[Ye*2+1]+Be)));if(pt!==0){do{for(Ee=Q-1;fe.bl_count[Ee]===0;)Ee--;fe.bl_count[Ee]--,fe.bl_count[Ee+1]+=2,fe.bl_count[Q]--,pt-=2}while(pt>0);for(Ee=Q;Ee!==0;Ee--)for(Ye=fe.bl_count[Ee];Ye!==0;)ye=fe.heap[--qe],!(ye>Oe)&&(ot[ye*2+1]!==Ee&&(fe.opt_len+=(Ee-ot[ye*2+1])*ot[ye*2],ot[ye*2+1]=Ee),Ye--)}}function Pt(fe,tt,ot){var Oe=new Array($+1),Qe=0,de,nt;for(de=1;de<=$;de++)Oe[de]=Qe=Qe+ot[de-1]<<1;for(nt=0;nt<=tt;nt++){var bt=fe[nt*2+1];bt!==0&&(fe[nt*2]=be(Oe[bt]++,bt))}}function yt(){var fe,tt,ot,Oe,Qe,de=new Array($+1);for(ot=0,Oe=0;Oe<Z-1;Oe++)for(me[Oe]=ot,fe=0;fe<1<<re[Oe];fe++)le[ot++]=Oe;for(le[ot-1]=Oe,Qe=0,Oe=0;Oe<16;Oe++)for(De[Oe]=Qe,fe=0;fe<1<<W[Oe];fe++)rt[Qe++]=Oe;for(Qe>>=7;Oe<z;Oe++)for(De[Oe]=Qe<<7,fe=0;fe<1<<W[Oe]-7;fe++)rt[256+Qe++]=Oe;for(tt=0;tt<=$;tt++)de[tt]=0;for(fe=0;fe<=143;)Ne[fe*2+1]=8,fe++,de[8]++;for(;fe<=255;)Ne[fe*2+1]=9,fe++,de[9]++;for(;fe<=279;)Ne[fe*2+1]=7,fe++,de[7]++;for(;fe<=287;)Ne[fe*2+1]=8,fe++,de[8]++;for(Pt(Ne,ee+1,de),fe=0;fe<z;fe++)ze[fe*2+1]=5,ze[fe*2]=be(fe,5);Re=new Me(Ne,re,ne+1,ee,$),we=new Me(ze,W,0,z,$),ke=new Me(new Array(0),ie,0,P,te)}function At(fe){var tt;for(tt=0;tt<ee;tt++)fe.dyn_ltree[tt*2]=0;for(tt=0;tt<z;tt++)fe.dyn_dtree[tt*2]=0;for(tt=0;tt<P;tt++)fe.bl_tree[tt*2]=0;fe.dyn_ltree[q*2]=1,fe.opt_len=fe.static_len=0,fe.last_lit=fe.matches=0}function ri(fe){fe.bi_valid>8?$e(fe,fe.bi_buf):fe.bi_valid>0&&(fe.pending_buf[fe.pending++]=fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0}function $t(fe,tt,ot,Oe){ri(fe),Oe&&($e(fe,ot),$e(fe,~ot)),O.arraySet(fe.pending_buf,fe.window,tt,ot,fe.pending),fe.pending+=ot}function Rt(fe,tt,ot,Oe){var Qe=tt*2,de=ot*2;return fe[Qe]<fe[de]||fe[Qe]===fe[de]&&Oe[tt]<=Oe[ot]}function zt(fe,tt,ot){for(var Oe=fe.heap[ot],Qe=ot<<1;Qe<=fe.heap_len&&(Qe<fe.heap_len&&Rt(tt,fe.heap[Qe+1],fe.heap[Qe],fe.depth)&&Qe++,!Rt(tt,Oe,fe.heap[Qe],fe.depth));)fe.heap[ot]=fe.heap[Qe],ot=Qe,Qe<<=1;fe.heap[ot]=Oe}function et(fe,tt,ot){var Oe,Qe,de=0,nt,bt;if(fe.last_lit!==0)do Oe=fe.pending_buf[fe.d_buf+de*2]<<8|fe.pending_buf[fe.d_buf+de*2+1],Qe=fe.pending_buf[fe.l_buf+de],de++,Oe===0?Se(fe,Qe,tt):(nt=le[Qe],Se(fe,nt+ne+1,tt),bt=re[nt],bt!==0&&(Qe-=me[nt],ue(fe,Qe,bt)),Oe--,nt=We(Oe),Se(fe,nt,ot),bt=W[nt],bt!==0&&(Oe-=De[nt],ue(fe,Oe,bt)));while(de<fe.last_lit);Se(fe,q,tt)}function ct(fe,tt){var ot=tt.dyn_tree,Oe=tt.stat_desc.static_tree,Qe=tt.stat_desc.has_stree,de=tt.stat_desc.elems,nt,bt,Q=-1,qe;for(fe.heap_len=0,fe.heap_max=Y,nt=0;nt<de;nt++)ot[nt*2]!==0?(fe.heap[++fe.heap_len]=Q=nt,fe.depth[nt]=0):ot[nt*2+1]=0;for(;fe.heap_len<2;)qe=fe.heap[++fe.heap_len]=Q<2?++Q:0,ot[qe*2]=1,fe.depth[qe]=0,fe.opt_len--,Qe&&(fe.static_len-=Oe[qe*2+1]);for(tt.max_code=Q,nt=fe.heap_len>>1;nt>=1;nt--)zt(fe,ot,nt);qe=de;do nt=fe.heap[1],fe.heap[1]=fe.heap[fe.heap_len--],zt(fe,ot,1),bt=fe.heap[1],fe.heap[--fe.heap_max]=nt,fe.heap[--fe.heap_max]=bt,ot[qe*2]=ot[nt*2]+ot[bt*2],fe.depth[qe]=(fe.depth[nt]>=fe.depth[bt]?fe.depth[nt]:fe.depth[bt])+1,ot[nt*2+1]=ot[bt*2+1]=qe,fe.heap[1]=qe++,zt(fe,ot,1);while(fe.heap_len>=2);fe.heap[--fe.heap_max]=fe.heap[1],ut(fe,tt),Pt(ot,Q,fe.bl_count)}function It(fe,tt,ot){var Oe,Qe=-1,de,nt=tt[0*2+1],bt=0,Q=7,qe=4;for(nt===0&&(Q=138,qe=3),tt[(ot+1)*2+1]=65535,Oe=0;Oe<=ot;Oe++)de=nt,nt=tt[(Oe+1)*2+1],!(++bt<Q&&de===nt)&&(bt<qe?fe.bl_tree[de*2]+=bt:de!==0?(de!==Qe&&fe.bl_tree[de*2]++,fe.bl_tree[K*2]++):bt<=10?fe.bl_tree[U*2]++:fe.bl_tree[F*2]++,bt=0,Qe=de,nt===0?(Q=138,qe=3):de===nt?(Q=6,qe=3):(Q=7,qe=4))}function at(fe,tt,ot){var Oe,Qe=-1,de,nt=tt[0*2+1],bt=0,Q=7,qe=4;for(nt===0&&(Q=138,qe=3),Oe=0;Oe<=ot;Oe++)if(de=nt,nt=tt[(Oe+1)*2+1],!(++bt<Q&&de===nt)){if(bt<qe)do Se(fe,de,fe.bl_tree);while(--bt!==0);else de!==0?(de!==Qe&&(Se(fe,de,fe.bl_tree),bt--),Se(fe,K,fe.bl_tree),ue(fe,bt-3,2)):bt<=10?(Se(fe,U,fe.bl_tree),ue(fe,bt-3,3)):(Se(fe,F,fe.bl_tree),ue(fe,bt-11,7));bt=0,Qe=de,nt===0?(Q=138,qe=3):de===nt?(Q=6,qe=3):(Q=7,qe=4)}}function vt(fe){var tt;for(It(fe,fe.dyn_ltree,fe.l_desc.max_code),It(fe,fe.dyn_dtree,fe.d_desc.max_code),ct(fe,fe.bl_desc),tt=P-1;tt>=3&&fe.bl_tree[he[tt]*2+1]===0;tt--);return fe.opt_len+=3*(tt+1)+5+5+4,tt}function Ke(fe,tt,ot,Oe){var Qe;for(ue(fe,tt-257,5),ue(fe,ot-1,5),ue(fe,Oe-4,4),Qe=0;Qe<Oe;Qe++)ue(fe,fe.bl_tree[he[Qe]*2+1],3);at(fe,fe.dyn_ltree,tt-1),at(fe,fe.dyn_dtree,ot-1)}function Je(fe){var tt=4093624447,ot;for(ot=0;ot<=31;ot++,tt>>>=1)if(tt&1&&fe.dyn_ltree[ot*2]!==0)return I;if(fe.dyn_ltree[9*2]!==0||fe.dyn_ltree[10*2]!==0||fe.dyn_ltree[13*2]!==0)return _;for(ot=32;ot<ne;ot++)if(fe.dyn_ltree[ot*2]!==0)return _;return I}var ei=!1;function ki(fe){ei||(yt(),ei=!0),fe.l_desc=new Ve(fe.dyn_ltree,Re),fe.d_desc=new Ve(fe.dyn_dtree,we),fe.bl_desc=new Ve(fe.bl_tree,ke),fe.bi_buf=0,fe.bi_valid=0,At(fe)}function ti(fe,tt,ot,Oe){ue(fe,(y<<1)+(Oe?1:0),3),$t(fe,tt,ot,!0)}function je(fe){ue(fe,v<<1,3),Se(fe,q,Ne),Fe(fe)}function Xe(fe,tt,ot,Oe){var Qe,de,nt=0;fe.level>0?(fe.strm.data_type===S&&(fe.strm.data_type=Je(fe)),ct(fe,fe.l_desc),ct(fe,fe.d_desc),nt=vt(fe),Qe=fe.opt_len+3+7>>>3,de=fe.static_len+3+7>>>3,de<=Qe&&(Qe=de)):Qe=de=ot+5,ot+4<=Qe&&tt!==-1?ti(fe,tt,ot,Oe):fe.strategy===x||de===Qe?(ue(fe,(v<<1)+(Oe?1:0),3),et(fe,Ne,ze)):(ue(fe,(m<<1)+(Oe?1:0),3),Ke(fe,fe.l_desc.max_code+1,fe.d_desc.max_code+1,nt+1),et(fe,fe.dyn_ltree,fe.dyn_dtree)),At(fe),Oe&&ri(fe)}function _t(fe,tt,ot){return fe.pending_buf[fe.d_buf+fe.last_lit*2]=tt>>>8&255,fe.pending_buf[fe.d_buf+fe.last_lit*2+1]=tt&255,fe.pending_buf[fe.l_buf+fe.last_lit]=ot&255,fe.last_lit++,tt===0?fe.dyn_ltree[ot*2]++:(fe.matches++,tt--,fe.dyn_ltree[(le[ot]+ne+1)*2]++,fe.dyn_dtree[We(tt)*2]++),fe.last_lit===fe.lit_bufsize-1}N._tr_init=ki,N._tr_stored_block=ti,N._tr_flush_block=Xe,N._tr_tally=_t,N._tr_align=je},{"../utils/common":27}],39:[function(w,E,N){function O(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}E.exports=O},{}]},{},[9])(9)});/**
 * videojs-http-source-selector-contrib-quality-levels
 * Original source https://github.com/jfujita/videojs-http-source-selector 1.1.6 by jfujita
 * rewritten to work with videojs-http-source-selector ^8.0
 * @author https://github.com/csgultekin
 * for Ozet Akademi
 * @link https://github.com/OzetAkademi/videojs-http-source-selector
 * @version 1.1.7
 * @license Apache-2.0
 */(function(A,j){typeof exports=="object"&&typeof module<"u"?module.exports=j(require("video.js")):typeof define=="function"&&define.amd?define(["video.js"],j):(A=A||self,A["videojs-http-source-selector"]=j(A.videojs))})(this,function(A){A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A;var j=A.getComponent("MenuButton"),M=A.getComponent("MenuItem"),w="1.1.7";class E extends M{constructor(u,y){super(u,y)}handleClick(u){for(var y=this.el_.parentNode.children,v=this.options_,m=this.player().qualityLevels(),R=0;R<y.length;R++)y[R].classList.remove("vjs-selected");for(var V=0;V<m.length;V++)m[V].enabled_(!1),(v.index==m.length||v.index==V)&&m[V].enabled_(!0);super.handleClick(u)}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}}class N extends j{createEl(){return A.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})}buildCSSClass(){return j.prototype.buildCSSClass.call(this)+" vjs-icon-cog"}update=function(){return j.prototype.update.call(this)};createItems(){this.options_.selectable=!0,this.options_.multiSelectable=!1;var u=this.player().qualityLevels();if(this.options_&&this.options_.default){if(this.options_.default=="low")for(var y=0;y<u.length;y++)u[y].enabled=y==0;else if(this.options_.default="high")for(var y=0;y<u.length;y++)u[y].enabled=y==u.length-1}for(var v=[],m=this.player().qualityLevels(),R=[],y=0;y<m.length;y++){var V=m.length-(y+1),Z=V===m.selectedIndex,ne=""+V,ee=V;m[V].height?(ne=m[V].height+"p",ee=parseInt(m[V].height,10)):m[V].bitrate&&(ne=Math.floor(m[V].bitrate/1e3)+" kbps",ee=parseInt(m[V].bitrate,10)),!(R.indexOf(ne)>=0)&&(R.push(ne),v.push(new E(this.player_,{label:ne,index:V,selected:Z,sortVal:ee,selectable:!0,multiSelectable:!1})))}return m.length>1&&v.push(new E(this.player_,{label:"Auto",index:m.length,selected:!1,sortVal:99999,selectable:!0,multiSelectable:!1})),v.sort(function(z,P){return z.options_.sortVal<P.options_.sortVal?1:z.options_.sortVal>P.options_.sortVal?-1:0}),v}}var O={},x=A.registerPlugin||A.plugin,I=function(u,y){if(u.addClass("vjs-http-source-selector"),A.log("videojs-http-source-selector-http-source-selector initialized!"),A.log("player.techName_:"+u.techName_),u.techName_!="Html5")return!1;u.on(["loadedmetadata"],function(v){var m=u.qualityLevels();if(A.log("loadmetadata event"),u.videojs_http_source_selector_initialized=="undefined"||u.videojs_http_source_selector_initialized==!0)A.log("player.videojs_http_source_selector_initialized == true");else{A.log("player.videojs_http_source_selector_initialized == false"),u.videojs_http_source_selector_initialized=!0;var R=u.controlBar,V=R.getChild("fullscreenToggle").el();R.addChild("SourceMenuButton",{})}})},_=function(u){var y=this;this.ready(function(){I(y,A.mergeOptions(O,u))}),A.registerComponent("SourceMenuButton",N),A.registerComponent("SourceMenuItem",E)};return x("httpSourceSelector",_),_.VERSION=w,_});
  </script>
  <script type="module">
   import{a as pi,b as hi,c as dl}from"./chunk-P43LDTDV.js";import{b as cl}from"./chunk-J6IC2M6B.js";import{a as Qs}from"./chunk-7CSBEB3V.js";import{a as Rt,c as ol}from"./chunk-E5ZA5763.js";import{a as sl}from"./chunk-VA3ZEK2O.js";import{a as al}from"./chunk-YWOUMLOF.js";import"./chunk-P77SXUYR.js";import{b as ll}from"./chunk-W6INLPM7.js";import{a as ys}from"./chunk-DNXLOF7Z.js";import{a as vs,c as U}from"./chunk-7Q7YRLBY.js";import{a as qs}from"./chunk-CSFKHO73.js";import{a as Ns}from"./chunk-QLI6JPR7.js";import{a as tr}from"./chunk-T7U2BLZ6.js";import{$ as Zi,$a as S,$m as Os,A as aa,Aa as Ur,Ab as N,Ae as Bn,An as Vs,B as sa,Ba as Oe,Bb as ft,Bc as wt,Bd as Ln,Bn as js,C as Yi,Ca as E,Cb as ya,Cc as Dn,Cd as Ua,Cl as ps,Cm as Ts,Cn as zs,D as ke,Da as ga,Dl as Bi,Dm as Ms,Dn as sn,E as la,Ea as Mn,Ec as Zt,Eh as Ot,Ek as ms,Em as Qe,En as er,F as ca,Fa as _e,Fb as ba,Fc as ut,Fe as za,Fm as Wn,Fn as Hs,G as da,Gb as C,Gh as ai,Gm as Ps,H as ge,Hb as x,Hc as ka,He as Vn,Hm as Ze,Hn as Gs,Ia as c,Ib as me,Ie as vt,Im as Ti,In as $s,Ja as jt,Jb as Pn,Jc as Fn,Jd as jr,Jg as Ie,Jj as ls,Jm as Re,Jn as Ks,K as ua,Ka as va,Kg as Kt,Kj as cs,Km as se,Lb as Te,Lg as $a,Ll as hs,Lm as Jn,M as We,Ma as qe,Mb as Lr,Mc as Rn,Mg as Ka,Mj as ds,Ml as Z,Mm as As,Nb as Fi,Nc as Oa,Ng as Qa,Ni as si,Nl as Dt,Nm as be,O as q,Oc as Da,Of as Ga,Oj as us,Ol as fs,Om as pe,Pl as zr,Q as ne,Qb as $t,Qc as Fa,Ql as gs,Rb as Ca,Rg as Wa,Rl as xi,Rm as Is,Rq as Ws,S as he,Sb as Sa,Sc as Nn,Sd as La,Sl as $n,Sm as mi,T as Se,Ta as a,Tb as An,Tj as Hn,Tl as qr,Tm as ws,U as Be,Ua as s,Ub as xa,Ul as Vi,V as X,Va as g,Vb as oe,Vl as Hr,W as I,Wa as le,Wb as Ee,Wg as Ja,Wl as Kn,X as bn,Xa as ce,Xb as G,Xg as Xa,Xk as ci,Y as Dr,Yc as Ra,Yg as ni,Yl as _s,Ym as ks,Z as Cn,Za as L,Zc as Na,_ as Fr,_a,_d as Ba,_g as qn,a as J,aa as D,ab as h,ac as Je,ah as ye,an as Xn,ar as Js,b as Ue,ba as F,bd as ei,bh as Ya,c as yn,cd as kt,cf as jn,cm as ui,cn as Ds,d as hd,da as Sn,db as zt,dd as Ni,df as qa,dm as Fe,dn as Fs,e as na,ea as ma,eb as it,ec as In,ed as Un,ef as zn,em as Es,er as Xs,f as kr,fa as bi,fb as nt,fd as Q,ff as V,fh as Za,fm as Ft,g as ra,ga as Ci,gc as Ta,gd as ae,gh as es,gm as Ve,h as Tt,ha as en,hc as rn,hm as bs,hn as Rs,hr as Ys,hs as mt,ia as tn,id as Br,ih as ts,ja as nn,jb as qt,jd as De,je as an,ka as Rr,kb as Ht,kc as Ma,kh as is,kr as Zs,l as ze,la as Nr,lb as Gt,lc as Pa,lh as ns,ln as Yn,m as Di,ma as ue,mb as re,mc as Aa,md as gt,mf as Ha,mh as rs,mn as Us,n as Or,na as ve,nb as u,nc as Ia,nd as Vr,nn as Ls,o as Le,ob as k,oc as wn,oe as Va,oh as os,pa as xn,pb as H,pc as kn,pd as Y,ph as ri,pr as el,q as Ke,qa as pa,qb as Ea,qc as wa,qd as b,qe as we,qh as oi,ql as di,qm as Cs,r as oa,ra as l,re as Li,rh as M,rr as tl,s as ct,sc as fd,se as ii,sh as as,sr as il,ta as ha,td as O,th as ss,tm as Ss,ua as fa,ub as Mt,uc as On,uh as Xe,uk as Qt,ur as nl,va as Tn,vb as Pt,vc as Yt,vk as li,vm as Qn,vn as Bs,w as tt,wa as v,wb as At,wc as Ri,wd as on,xd as Si,xm as xs,ya as w,yc as It,yd as Ui,yk as Gn,ym as Ye,yn as Zn,yr as rl,z as ie,za as xe,zb as K,zc as dt,zd as ti,ze as ja,zm as _t,zn as ji}from"./chunk-V2WYJ35H.js";var ud=hd((ST,Yo)=>{"use strict";var st=new function(){var t=this;this.version="3.3.55npm",this.vsakt={c:"130",f:"131",s:"17.6",e:"130",i:"12",ios:"17.6",samsung:"27",o:"114",e_a:"129",o_a:"84",y:"24.7.8",v:"6.9",uc:"13.7.8"},this.vsinsecure_below={c:"126",f:"126",s:"11.1.1",e:"119",i:11,ios:"16.5",samsung:12,o:62,o_a:78,y:"20",v:"6.0",uc:"13.4"},this.vsdefault={c:-3,f:-3,s:-2,e:17,i:11,ios:12,samsung:-3,o:-3,o_a:-3,y:-1,v:-1,uc:-.2,a:535},this.names={c:"Chrome",f:"Firefox",s:"Safari",e:"Edge",i:"Internet Explorer",ios:"iOS",samsung:"Samsung Internet",o:"Opera",o_a:"Opera",e_a:"Edge",y:"Yandex Browser",v:"Vivaldi",uc:"UC Browser",a:"Android Browser",x:"Other",silk:"Silk"},this.get_browser=function(n){var e,n=(n||navigator.userAgent).replace("_","."),r={n:"x",v:0,t:"other browser",age_years:void 0,no_device_update:!1,available:t.vsakt};function o(P,A){return new RegExp(A,"i").test(n)?P:!1}r.other=o("bot","Pagespeed|pingdom|Preview|ktxn|dynatrace|Ruxit|PhantomJS|Headless|Lighthouse|bot|spider|archiver|transcoder|crawl|checker|monitoring|prerender|screenshot|python-|php|uptime|validator|fetcher|facebook|slurp|google|yahoo|node|mail.ru|github|cloudflare|addthis|thumb|proxy|feed|fetch|favicon|link|http|scrape|seo|page|search console|AOLBuild|Teoma|Expeditor")||o("TV","SMART-TV|SmartTV")||o("niche browser","motorola edge|Comodo.Dragon|OculusBrowser|Falkon|Brave|Classic Browser|Dorado|LBBROWSER|Focus|waterfox|Firefox/56.2|Firefox/56.3|Whale|MIDP|k-meleon|sparrow|wii|Chromium|Puffin|Opera Mini|maxthon|maxton|dolfin|dolphin|seamonkey|opera mini|netfront|moblin|maemo|arora|kazehakase|epiphany|konqueror|rekonq|symbian|webos|PaleMoon|Basilisk|QupZilla|Otter|Midori|qutebrowser|slimjet")||o("mobile without upgrade path or landing page","OPR/44.12.2246|cros|kindle|tizen|silk|blackberry|bb10|RIM|PlayBook|meego|nokia|ucweb|ZuneWP7|537.85.10"),r.embedded=/"QtWebEngine|Teams|Electron/i.test(n),r.mobile=/iphone|ipod|ipad|android|mobile|phone|ios|iemobile/i.test(n),r.discontinued=/netscape|greenbrowser|camino|flot|fennec|galeon|coolnovo/i.test(n);for(var d=[["CriOS.VV","c","ios"],["FxiOS.VV","f","ios"],["Trident.*rv:VV","i","i"],["Trident.VV","i","i"],["UCBrowser.VV","uc","c"],["MSIE.VV","i","i"],["Edge.VV","e","e"],["Edg.VV","e","c"],["EdgA.VV","e_a","c"],["Vivaldi.VV","v","c"],["Android.*OPR.VV","o_a","c"],["OPR.VV","o","c"],["YaBrowser.VV","y","c"],["SamsungBrowser.VV","samsung","c"],["Silk.VV","silk","c"],["Chrome.VV","c","c"],["Firefox.VV","f","f"],[" OS.VV.*Safari","ios","ios"],["Version.VV.*Safari","s","s"],["Safari.VV","s","s"],["Opera.*Version.VV","o"],["Opera.VV","o"]],m="(\\d+\\.?\\d+\\.?\\d*\\.?\\d*)",p=0;p<d.length;p++)if(n.match(new RegExp(d[p][0].replace("VV",m),"i"))){r.n=d[p][1],r.engine=d[p][2];break}if(r.fullv=RegExp.$1,r.v=parseFloat(r.fullv),/windows.nt.5|windows.nt.4|windows.nt.6.0|windows.95|windows.98|os x 10.2|os x 10.3|os x 10.4|os x 10.5/i.test(n)&&(r.no_device_update=!0,r.available={}),navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1&&(r.n="ios",r.engine="ios",r.fullv=r.v=13,r.no_device_update=!0),/iphone|ipod|ipad|ios/i.test(n)){n.match(new RegExp("OS."+m,"i")),r.n="ios",r.fullv=RegExp.$1,r.v=parseFloat(r.fullv),r.engine="ios";var f=t.available_ios(n,r.v);f<12&&Math.round(r.v)===11&&(f=12),r.available={ios:f},parseFloat(r.available.ios)<15&&(r.no_device_update=!0)}if(/windows.nt.5.1|windows.nt.5.2|windows.nt.6.0/i.test(n)&&(r.available={c:49.9,f:52.9},r.no_device_update=!0),/os x 10.6/i.test(n)&&(r.available={s:"5.1.10",c:49.9,f:48},r.no_device_update=!0),/os x 10.7|os x 10.8/i.test(n)&&(r.available={s:"6.2.8",c:49.9,f:48},r.no_device_update=!0),/os x 10.9/i.test(n)&&(r.available.s="9.1.3"),/os x 10.10/i.test(n)&&(r.available.s="10.1.2"),n.indexOf("Android")>-1&&r.n==="s"){var _=parseInt((/WebKit\/([0-9]+)/i.exec(n)||0)[1],10)||2e3;_<=534&&(r.n="a",r.fullv=r.v=_,r.is_insecure=!0)}r.t=t.names[r.n]+" "+r.v,r.is_supported=r.is_latest=t.vsakt[r.n]?t.less(r.fullv,t.vsakt[r.n])<=0:void 0,r.vmaj=Math.round(r.v),r.is_insecure=r.is_insecure||!t.vsinsecure_below[r.n]?void 0:t.less(r.fullv,t.vsinsecure_below[r.n])===1,(r.n==="f"&&(r.vmaj===115||r.vmaj===128)||r.n==="c"&&r.vmaj===120)&&(r.is_supported=!0,r.is_insecure=!1,r.n==="f"&&(r.esr=!0)),r.n==="ios"&&r.v>=15&&(r.is_supported=!0),(r.n==="a"||r.n==="x")&&(r.t=t.names[r.n]),r.n==="e"&&(r.t=t.names[r.n]+" "+r.vmaj,r.is_supported=t.less(r.fullv,"18.15063")!=1),r.n in["c","f","o","e"]&&t.less(r.fullv,parseFloat(t.vsakt[r.n])-1)<=0&&(r.is_supported=!0);var y={f:7,c:8,o:8,i:1,e:1,s:1};y[r.n]&&(r.age_years=Math.round((t.vsakt[r.n]-r.v)/y[r.n]*10)/10||0);var T={e:"Edge.VV",c:"Chrome.VV",f:"Firefox.VV",s:"Version.VV",i:"MSIE.VV",ios:" OS.VV"};return r.engine&&(n.match(new RegExp(T[r.engine].replace("VV",m),"i")),r.engine_version=parseFloat(RegExp.$1)),r},this.semver=function(i){if(i instanceof Array)return i;var e=(i+".0.0.0").split(".");return[parseInt(e[0])||0,parseInt(e[1])||0,parseInt(e[2])||0,parseInt(e[3])||0]},this.less=function(i,e){i=t.semver(i),e=t.semver(e);for(var n=0;;n++){if(n>=i.length)return n>=e.length?0:1;if(n>=e.length)return-1;var r=e[n]-i[n];if(r)return r>0?1:-1}},this.available_ios=function(i,e){var n=Math.max(window.screen.height,window.screen.width),r=window.devicePixelRatio;return/ipad/i.test(i)?n==1024&&r==2?10:n==1112||n==1366?15:n==1024&&e<6?5:9:r==1?6:r==3||n==812||n==736||n==667?15:n==568?10:n==480?7:6}};window.$bu_getBrowser=st.get_browser;var Ov=function(t,i){var e=window.navigator,n;t=window._buorgres=t||{};var r=t.l||(e.languages?e.languages[0]:null)||e.language||e.browserLanguage||e.userLanguage||document.documentElement.getAttribute("lang")||"en";t.llfull=r.replace("_","-").toLowerCase().substr(0,5),t.ll=t.llfull.substr(0,2),t.domain=t.domain!==void 0?t.domain:(/file:/.test(location.href)?"https:":"")+"//browser-update.org",t.apiver=t.api||t.c||-1,t.jsv=st.version;var o=t.apiver<2018&&{i:10,f:11,o:21,s:8,c:30}||{},d=t.notify||t.vs||{};d.e!==0&&(d.e=d.e||d.i),d.i=d.i||d.e;var m=t.required||{};m.e!==0&&(m.e=m.e||m.i),m.i||(m.i=m.e,st.vsakt.i=st.vsakt.e);for(n in st.vsdefault)d[n]&&(st.less(d[n],0)>=0?m[n]=parseFloat(st.vsakt[n])+parseFloat(d[n])+.01:m[n]=parseFloat(d[n])+.01),(!(n in m)||m[n]==null)&&(m[n]=st.vsdefault[n]),st.less(m[n],0)>=0&&(m[n]=parseFloat(st.vsakt[n])+parseFloat(m[n])),o[n]&&st.less(m[n],o[n])===1&&(m[n]=o[n]);m.ios=m.ios||m.s,m.i<79&&m.i>65&&(m.i=m.i-60),m.e<79&&m.e>65&&(m.e=m.e-60),t.required=m,t.reminder=t.reminder<.1?0:t.reminder||24*7,t.reminderClosed=t.reminderClosed<1?0:t.reminderClosed||24*7,t.onshow=t.onshow||function(f){},t.onclick=t.onclick||function(f){},t.onclose=t.onclose||function(f){},t.pageurl=t.pageurl||location.hostname||"x",t.newwindow=t.newwindow!==!1,t.test=i||t.test||location.hash==="#test-bu"||!1,t.ignorecookie=t.ignorecookie||location.hash==="#ignorecookie-bu",t.reasons=[],t.hide_reasons=[];function p(f){var _=f.browser=st.get_browser(f.override_ua);return f.is_below_required=m[_.n]&&st.less(_.fullv,m[_.n])===1,_.other!==!1&&f.hide_reasons.push("is other browser:"+_.other),_.embedded!==!1&&f.hide_reasons.push("is embedded browser:"+_.embedded),_.esr&&!f.notify_esr&&f.hide_reasons.push("Extended support (ESR)"),_.mobile&&f.mobile===!1&&f.hide_reasons.push("do not notify mobile"),_.is_latest&&f.hide_reasons.push("is latest version of the browser"),_.no_device_update&&f.hide_reasons.push("no device update"),f.is_below_required&&f.reasons.push("below required"),(f.insecure||f.unsecure)&&_.is_insecure&&f.reasons.push("insecure"),f.unsupported&&!_.is_supported&&f.reasons.push("no vendor support"),f.hide_reasons.length>0?!1:f.reasons.length>0}if(t.notified=p(t),t.already_shown=document.cookie.indexOf("browserupdateorg=pause")>-1&&!t.ignorecookie,!(!t.test&&(!t.notified||t.already_shown))){if(t.setCookie=function(f){document.cookie="browserupdateorg=pause; expires="+new Date(new Date().getTime()+36e5*f).toGMTString()+"; path=/; SameSite=Lax"+(/https:/.test(location.href)?"; Secure":"")},t.already_shown&&(t.ignorecookie||t.test)&&t.setCookie(-10),t.reminder>0&&t.setCookie(t.reminder),t.nomessage){t.onshow(t);return}Dv()}};typeof Yo<"u"&&(Yo.exports=Ov);var Dv=function(){var t=window._buorgres,i=$bu_getBrowser(),e=t.burl||"http"+(/MSIE/i.test(navigator.userAgent)?"":"s")+"://browser-update.org/";t.url||(t.url=e+(t.l&&t.l+"/"||"")+"update-browser.html"+(t.test?"?force_outdated=true":"")+"#"+t.jsv+":"+t.pageurl),t.url_permanent_hide=t.url_permanent_hide||e+"block-ignore-browser-update-warning.html";function n(){for(var ee=arguments,fe=ee[0],Ae=1;Ae<ee.length;++Ae)fe=fe.replace(/%s/,ee[Ae]);return fe}var r={},o;r.en={msg:"Your web browser ({brow_name}) is out of date.",msgmore:"Update your browser for more security, speed and the best experience on this site.",bupdate:"Update browser",bignore:"Ignore",remind:"You will be reminded in {days} days.",bnever:"Never show again",insecure:"Your web browser ({brow_name}) has a serious security vulnerability!"},r.ar={msg:"\u0645\u062A\u0635\u0641\u062D \u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A \u0627\u0644\u062E\u0627\u0635 \u0628\u0643 ({brow_name}) \u063A\u064A\u0631 \u0645\u064F\u062D\u062F\u0651\u062B.",msgmore:"\u0642\u0645 \u0628\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u062A\u0635\u0641\u062D \u0627\u0644\u062E\u0627\u0635 \u0628\u0643 \u0644\u0645\u0632\u064A\u062F \u0645\u0646 \u0627\u0644\u0623\u0645\u0627\u0646 \u0648\u0627\u0644\u0633\u0631\u0639\u0629 \u0648\u0644\u0623\u0641\u0636\u0644 \u062A\u062C\u0631\u0628\u0629 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0642\u0639.",bupdate:"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u062A\u0635\u0641\u062D",bignore:"\u062A\u062C\u0627\u0647\u0644",remind:"\u0633\u064A\u062A\u0645 \u062A\u0630\u0643\u064A\u0631\u0643 \u0641\u064A \u063A\u0636\u0648\u0646 {days} \u0623\u064A\u0627\u0645.",bnever:"\u0644\u0627 \u062A\u0638\u0647\u0631 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649"},r.bg={msg:"\u0412\u0430\u0448\u0438\u044F\u0442 \u0443\u0435\u0431 \u0431\u0440\u0430\u0443\u0437\u044A\u0440 ({brow_name}) \u0435 \u043E\u0441\u0442\u0430\u0440\u044F\u043B.",msgmore:"\u0410\u043A\u0442\u0443\u0430\u043B\u0438\u0437\u0438\u0440\u0430\u0439\u0442\u0435 \u0431\u0440\u0430\u0443\u0437\u044A\u0440\u0430 \u0441\u0438 \u0437\u0430 \u043F\u043E\u0432\u0435\u0447\u0435 \u0441\u0438\u0433\u0443\u0440\u043D\u043E\u0441\u0442, \u0431\u044A\u0440\u0437\u0438\u043D\u0430 \u0438 \u043D\u0430\u0439-\u0434\u043E\u0431\u0440\u043E\u0442\u043E \u0438\u0437\u0436\u0438\u0432\u044F\u0432\u0430\u043D\u0435 \u043D\u0430 \u0442\u043E\u0437\u0438 \u0441\u0430\u0439\u0442.",bupdate:"\u0410\u043A\u0442\u0443\u0430\u043B\u0438\u0437\u0438\u0440\u0430\u043D\u0435 \u043D\u0430 \u0431\u0440\u0430\u0443\u0437\u044A\u0440\u0430",bignore:"\u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0430\u0439",remind:"\u0429\u0435 \u0432\u0438 \u0431\u044A\u0434\u0435 \u043D\u0430\u043F\u043E\u043C\u043D\u0435\u043D\u043E \u0441\u043B\u0435\u0434 {days} \u0434\u043D\u0438.",bnever:"\u041D\u0438\u043A\u043E\u0433\u0430 \u043F\u043E\u0432\u0435\u0447\u0435 \u0434\u0430 \u043D\u0435 \u0441\u0435 \u043F\u043E\u043A\u0430\u0437\u0432\u0430"},r.ca={msg:"El teu navegador ({brow_name}) est\xE0 desactualitzat.",msgmore:"Actualitzeu el vostre navegador per obtenir m\xE9s seguretat, velocitat i una millor experi\xE8ncia en aquest lloc.",bupdate:"Actualitza el navegador",bignore:"Ignorar",remind:"T'ho recordarem d'aqu\xED a {days} dies.",bnever:"No ho tornis a mostrar"},r.cs={msg:"V\xE1\u0161 prohl\xED\u017Ee\u010D ({brow_name}) je zastaral\xFD.",msgmore:"Aktualizujte prohl\xED\u017Ee\u010D pro lep\u0161\xED zabezpe\u010Den\xED, rychlost a nejlep\u0161\xED z\xE1\u017Eitek z tohoto webu.",bupdate:"Aktualizovat prohl\xED\u017Ee\u010D",bignore:"Ignorovat",remind:"Znovu budete upozorn\u011Bni za {days} dn\u016F.",bnever:"Ji\u017E nezobrazovat"},r.cy={msg:"Mae eich porwr gwe ({brow_name}) angen ei ddiweddaru.",msgmore:"Diweddarwch eich porwr i gael mwy o ddiogelwch, cyflymder a'r profiad gorau ar y safle hwn.",bupdate:"Diweddaru porwr",bignore:"Anwybyddu",remind:"Byddwn yn eich atgoffa mewn {days} diwrnod.",bnever:"Peidiwch \xE2 dangos eto"},r.da={msg:"Din web browser ({brow_name}) er for\xE6ldet",msgmore:"Opdater din browser for mere sikkerhed, hastighed og den bedste oplevelse p\xE5 denne side.",bupdate:"Opdater browser",bignore:"Ignorer",remind:"Du vil blive p\xE5mindet om {days} dage.",bnever:"Vis aldrig igen"},r.de={msg:"Ihr Webbrowser ({brow_name}) ist veraltet.",msgmore:"Aktualisieren Sie Ihren Browser f\xFCr mehr Sicherheit, Geschwindigkeit und den besten Komfort auf dieser Seite.",bupdate:"Browser aktualisieren",bignore:"Ignorieren",remind:"Sie werden in {days} Tagen wieder erinnert.",bnever:"Nie wieder anzeigen",insecure:"Ihr Webbrowser ({brow_name}) hat eine ernsthafte Sicherheitsl\xFCcke!"},r.el={msg:"\u03A4\u03BF \u03C0\u03C1\u03CC\u03B3\u03C1\u03B1\u03BC\u03BC\u03B1 \u03C0\u03B5\u03C1\u03B9\u03AE\u03B3\u03B7\u03C3\u03AE\u03C2 \u03C3\u03B1\u03C2 ({brow_name}) \u03B5\u03AF\u03BD\u03B1\u03B9 \u03B1\u03C0\u03B1\u03C1\u03C7\u03B1\u03B9\u03C9\u03BC\u03AD\u03BD\u03BF.",msgmore:"\u0395\u03BD\u03B7\u03BC\u03B5\u03C1\u03CE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CC\u03B3\u03C1\u03B1\u03BC\u03BC\u03B1 \u03C0\u03B5\u03C1\u03B9\u03AE\u03B3\u03B7\u03C3\u03AE\u03C2 \u03C3\u03B1\u03C2 \u03B3\u03B9\u03B1 \u03C0\u03B5\u03C1\u03B9\u03C3\u03C3\u03CC\u03C4\u03B5\u03C1\u03B7 \u03B1\u03C3\u03C6\u03AC\u03BB\u03B5\u03B9\u03B1, \u03C4\u03B1\u03C7\u03CD\u03C4\u03B7\u03C4\u03B1 \u03BA\u03B1\u03B9 \u03C4\u03B7\u03BD \u03BA\u03B1\u03BB\u03CD\u03C4\u03B5\u03C1\u03B7 \u03B5\u03BC\u03C0\u03B5\u03B9\u03C1\u03AF\u03B1 \u03C3' \u03B1\u03C5\u03C4\u03CC\u03BD \u03C4\u03BF\u03BD \u03B9\u03C3\u03C4\u03CC\u03C4\u03BF\u03C0\u03BF.",bupdate:"\u0395\u03BD\u03B7\u03BC\u03B5\u03C1\u03CE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CC\u03B3\u03C1\u03B1\u03BC\u03BC\u03B1 \u03C0\u03B5\u03C1\u03B9\u03AE\u03B3\u03B7\u03C3\u03B7\u03C2",bignore:"\u0391\u03B3\u03BD\u03BF\u03AE\u03C3\u03C4\u03B5",remind:"\u0398\u03B1 \u03C3\u03B1\u03C2 \u03C4\u03BF \u03C5\u03C0\u03B5\u03BD\u03B8\u03C5\u03BC\u03AF\u03C3\u03BF\u03C5\u03BC\u03B5 \u03C3\u03B5 {days} \u03B7\u03BC\u03AD\u03C1\u03B5\u03C2.",bnever:"\u039D\u03B1 \u03BC\u03B7\u03BD \u03B5\u03BC\u03C6\u03B1\u03BD\u03B9\u03C3\u03C4\u03B5\u03AF \u03BE\u03B1\u03BD\u03AC"},r.es={msg:"Su navegador web ({brow_name}) est\xE1 desactualizado.",msgmore:"Actualice su navegador para obtener m\xE1s seguridad, velocidad y para disfrutar de la mejor experiencia en este sitio.",bupdate:"Actualizar navegador",bignore:"Ignorar",remind:"Se le recordar\xE1 en {days} d\xEDas.",bnever:"No mostrar de nuevo"},r.et={msg:"Teie veebilehitseja ({brow_name}) on vananenud.",msgmore:"Veebilehitseja uuendamisega kaasneb nii parem turvalisus, kiirus kui ka kasutusmugavus.",bupdate:"Uuenda veebilehitsejat",bignore:"Eira",remind:"Uus meeldetuletus {days} p\xE4eva p\xE4rast.",bnever:"\xC4ra kunagi enam n\xE4ita"},r.fa={msg:"\u0645\u0631\u0648\u0631\u06AF\u0631 \u0634\u0645\u0627 ({brow_name}) \u0642\u062F\u06CC\u0645\u06CC \u0627\u0633\u062A.",msgmore:"\u0628\u0631\u0627\u06CC \u0627\u06CC\u0645\u0646\u06CC\u060C \u0633\u0631\u0639\u062A \u0648 \u062A\u062C\u0631\u0628\u0647 \u0628\u0647\u062A\u0631 \u0645\u0631\u0648\u0631\u06AF\u0631 \u062E\u0648\u062F \u0631\u0627 \u0628\u0647\u200C\u0631\u0648\u0632 \u06A9\u0646\u06CC\u062F.",bupdate:"\u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0645\u0631\u0648\u0631\u06AF\u0631",bignore:"\u0646\u0627\u062F\u06CC\u062F\u0647 \u06AF\u0631\u0641\u062A\u0646",remind:"\u0628\u0647 \u0634\u0645\u0627 \u062A\u0627 {days} \u0631\u0648\u0632 \u062F\u06CC\u06AF\u0631 \u062F\u0648\u0628\u0627\u0631\u0647 \u06CC\u0627\u062F\u200C\u0622\u0648\u0631\u06CC \u062E\u0648\u0627\u0647\u062F \u0634\u062F.",bnever:"\u0647\u0631\u06AF\u0632 \u0646\u0645\u0627\u06CC\u0634 \u0646\u062F\u0647"},r.fi={msg:"Selaimesi ({brow_name}) on vanhentunut.",msgmore:"P\xE4ivit\xE4 selaimesi saadaksesi tietoturvap\xE4ivityksi\xE4, nopeutta sek\xE4 parhaan k\xE4ytt\xF6kokemuksen sivustolla.",bupdate:"P\xE4ivit\xE4 selain",bignore:"Ohita",remind:"Saat uuden muistutuksen {days} p\xE4iv\xE4n p\xE4\xE4st\xE4.",bnever:"\xC4l\xE4 n\xE4yt\xE4 uudestaan"},r.fr={msg:"Votre navigateur Web ({brow_name}) n'est pas \xE0 jour.",msgmore:"Mettez \xE0 jour votre navigateur pour plus de s\xE9curit\xE9 et de rapidit\xE9 et une meilleure exp\xE9rience sur ce site.",bupdate:"Mettre \xE0 jour le navigateur",bignore:"Ignorer",remind:"Vous serez rappel\xE9 dans {days} jours.",bnever:"Ne plus afficher"},r.gl={msg:"T\xE1 an l\xEDonl\xE9itheoir agat ({brow_name}) as d\xE1ta.",msgmore:"Actualiza o teu navegador para obter m\xE1is seguridade, rapidez e mellor experiencia neste sitio.",bupdate:"Actualizar navegador web",bignore:"Ignorar",remind:"Lembraralle en {days} d\xEDas.",bnever:"Non volver mostrar m\xE1is"},r.he={msg:"\u05D3\u05E4\u05D3\u05E4\u05DF ({brow_name}) \u05E9\u05DC\u05DA \u05D0\u05D9\u05E0\u05D5 \u05DE\u05E2\u05D5\u05D3\u05DB\u05DF.",msgmore:"\u05E2\u05D3\u05DB\u05DF/\u05D9 \u05D0\u05EA \u05D4\u05D3\u05E4\u05D3\u05E4\u05DF \u05E9\u05DC\u05DA \u05DC\u05E9\u05D9\u05E4\u05D5\u05E8 \u05D4\u05D0\u05D1\u05D8\u05D7\u05D4 \u05D5\u05D4\u05DE\u05D4\u05D9\u05E8\u05D5\u05EA \u05D5\u05DB\u05D3\u05D9 \u05DC\u05D9\u05D4\u05E0\u05D5\u05EA \u05DE\u05D4\u05D7\u05D5\u05D5\u05D9\u05D4 \u05D4\u05D8\u05D5\u05D1\u05D4 \u05D1\u05D9\u05D5\u05EA\u05E8 \u05D1\u05D0\u05EA\u05E8 \u05D6\u05D4.",bupdate:"\u05E2\u05D3\u05DB\u05DF \u05D3\u05E4\u05D3\u05E4\u05DF",bignore:"\u05D4\u05EA\u05E2\u05DC\u05DD",remind:"\u05EA\u05E7\u05D1\u05DC/\u05D9 \u05EA\u05D6\u05DB\u05D5\u05E8\u05EA \u05D1\u05E2\u05D5\u05D3  {days} \u05D9\u05DE\u05D9\u05DD.",bnever:"\u05D0\u05DC \u05EA\u05E6\u05D9\u05D2 \u05E9\u05D5\u05D1"},r.hi={msg:"\u0906\u092A\u0915\u093E \u0935\u0947\u092C \u092C\u094D\u0930\u093E\u0909\u091C\u093C\u0930 ({brow_name}) \u092A\u0941\u0930\u093E\u0928\u093E \u0939\u0948\u0964",msgmore:"\u0907\u0938 \u0938\u093E\u0907\u091F \u092A\u0930 \u0905\u0927\u093F\u0915 \u0938\u0941\u0930\u0915\u094D\u0937\u093E, \u0917\u0924\u093F \u0914\u0930 \u0938\u0930\u094D\u0935\u094B\u0924\u094D\u0924\u092E \u0905\u0928\u0941\u092D\u0935 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F \u0905\u092A\u0928\u0947 \u092C\u094D\u0930\u093E\u0909\u095B\u0930 \u0915\u094B \u0905\u092A\u0921\u0947\u091F \u0915\u0930\u0947\u0902 \u0964",bupdate:"\u092C\u094D\u0930\u093E\u0909\u091C\u093C\u0930 \u0905\u092A\u0921\u0947\u091F \u0915\u0930\u0947\u0902",bignore:"\u0928\u091C\u0930\u0905\u0902\u0926\u093E\u091C \u0915\u0930\u0947\u0902",remind:"\u0906\u092A\u0915\u094B {days} \u0926\u093F\u0928\u094B\u0902 \u092E\u0947\u0902 \u092F\u093E\u0926 \u0926\u093F\u0932\u093E\u092F\u093E \u091C\u093E\u090F\u0917\u093E\u0964",bnever:"\u092B\u093F\u0930 \u0915\u092D\u0940 \u092E\u0924 \u0926\u093F\u0916\u093E\u0928\u093E"},r.hu={msg:"Az \xD6n webb\xF6ng\xE9sz\u0151je ({brow_name}) elavult.",msgmore:"Friss\xEDtse b\xF6ng\xE9sz\u0151j\xE9t a nagyobb biztons\xE1g, sebess\xE9g \xE9s \xE9lm\xE9ny \xE9rdek\xE9ben!",bupdate:"B\xF6ng\xE9sz\u0151 friss\xEDt\xE9se",bignore:"Mell\u0151z\xE9s",remind:"\xDAjra eml\xE9keztet\xFCnk {days} napon bel\xFCl.",bnever:"Ne mutassa t\xF6bbet"},r.id={msg:"Peramban web ({brow_name}) Anda sudah usang.",msgmore:"Perbarui peramban Anda untuk pengalaman terbaik, lebih aman, dan cepat di situs ini.",bupdate:"Perbarui peramban",bignore:"Abaikan",remind:"Anda akan diingatkan kembali dalam {days} hari.",bnever:"Jangan pernah tampilkan lagi"},r.it={msg:"Il tuo browser ({brow_name}) non \xE8 aggiornato.",msgmore:"Aggiorna il browser per una maggiore sicurezza, velocit\xE0 e la migliore esperienza su questo sito.",bupdate:"Aggiorna browser",bignore:"Ignora",remind:"Riceverai un promemoria tra {days} giorni.",bnever:"Non mostrare di nuovo"},r.ja={msg:"\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6\uFF08{brow_name}\uFF09\u306F\u6700\u65B0\u7248\u3067\u306F\u3042\u308A\u307E\u305B\u3093\u3002",msgmore:"\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u3001\u30B9\u30D4\u30FC\u30C9\u3001\u305D\u3057\u3066\u3053\u306E\u30B5\u30A4\u30C8\u3067\u306E\u6700\u826F\u306E\u4F53\u9A13\u306E\u305F\u3081\u306B\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6\u3092\u66F4\u65B0\u3057\u3066\u304F\u3060\u3055\u3044\u3002",bupdate:"\u30D6\u30E9\u30A6\u30B6\u3092\u66F4\u65B0\u3059\u308B",bignore:"\u7121\u8996\u3059\u308B",remind:"{days} \u65E5\u5F8C\u306B\u3082\u3046\u4E00\u5EA6\u304A\u77E5\u3089\u305B\u3057\u307E\u3059\u3002",bnever:"\u6B21\u56DE\u304B\u3089\u8868\u793A\u3057\u306A\u3044"},r.ko={msg:"\uADC0\uD558\uC758 \uC6F9 \uBE0C\uB77C\uC6B0\uC800({brow_name})\uB294 \uC624\uB798\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",msgmore:"\uC774 \uC0AC\uC774\uD2B8\uC5D0\uC11C \uBCF4\uC548, \uC18D\uB3C4\uC640 \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC744 \uC5BB\uC73C\uB824\uBA74 \uBE0C\uB77C\uC6B0\uC800\uB97C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624.",bupdate:"\uBE0C\uB77C\uC6B0\uC800 \uC5C5\uB370\uC774\uD2B8\uD558\uAE30",bignore:"\uBB34\uC2DC\uD558\uAE30",remind:"{days}\uC77C \uD6C4\uC5D0 \uC54C\uB824 \uB4DC\uB9BD\uB2C8\uB2E4.",bnever:"\uB2E4\uC2DC \uD45C\uC2DC\uD558\uC9C0 \uC54A\uAE30"},r.lt={msg:"J\u016Bs\u0173 nar\u0161ykl\u0117 ({brow_name}) yra pasenusi.",msgmore:"Atsinaujinkite savo nar\u0161ykl\u0119 nor\u0117dami gauti daugiau saugumo, grei\u010Dio ir pa\u010Di\u0173 geriausi\u0173 patir\u010Di\u0173 \u0161ioje svetain\u0117je.",bupdate:"Atnaujinti nar\u0161ykl\u0119",bignore:"Nepaisyti",remind:"Jums bus priminta po {days} dien\u0173.",bnever:"Daugiau niekada nerodyti"},r.lv={msg:"J\u016Bsu p\u0101rl\u016Bkprogramma ({brow_name}) ir novecojusi.",msgmore:"Atjaunojiet savu p\u0101rl\u016Bkprogrammu liel\u0101kai dro\u0161\u012Bbai, \u0101trumam un lab\u0101kai pieredzei ar \u0161o vietni.",bupdate:"Atjaunin\u0101t p\u0101rl\u016Bkprogrammu",bignore:"Ignor\u0113t",remind:"Jums tiks par\u0101d\u012Bts atg\u0101din\u0101jums p\u0113c {days} dien\u0101m.",bnever:"Vairs ner\u0101d\u012Bt"},r.ms={msg:"Pelayar web anda ({brow_name}) sudah lapuk.",msgmore:"Kemas kini pelayar anda untuk lebih keselamatan, kelajuan dan pengalaman terbaik di laman web ini.",bupdate:"Kemas kini pelayar",bignore:"Abaikan",remind:"Anda akan diingatkan dalam {days} hari.",bnever:"Jangan tunjukkan lagi"},r.nl={msg:"Uw webbrowser ({brow_name}) is verouderd.",msgmore:"Update uw browser voor meer veiligheid, snelheid en om deze site optimaal te kunnen gebruiken.",bupdate:"Browser updaten",bignore:"Negeren",remind:"We zullen u er in {days} dagen aan herinneren.",bnever:"Nooit meer tonen"},r.no=r.nn=r.nb={msg:"Nettleseren din ({brow_name}) er utdatert.",msgmore:"Oppdater nettleseren din for \xF8kt sikkerhet, hastighet og den beste opplevelsen p\xE5 dette nettstedet.",bupdate:"Oppdater nettleser",bignore:"Ignorer",remind:"Du vil f\xE5 en p\xE5minnelse om {days} dager.",bnever:"Aldri vis igjen"},r.pl={msg:"Twoja przegl\u0105darka ({brow_name}) jest nieaktualna.",msgmore:"Zaktualizuj przegl\u0105dark\u0119, by korzysta\u0107 z tej strony bezpieczniej, szybciej i po prostu sprawniej.",bupdate:"Aktualizuj przegl\u0105dark\u0119",bignore:"Ignoruj",remind:"Przypomnimy o tym za {days} dni.",bnever:"Nie pokazuj wi\u0119cej"},r.pt={msg:"Seu navegador da web ({brow_name}) est\xE1 desatualizado.",msgmore:"Atualize seu navegador para ter mais seguran\xE7a e velocidade, al\xE9m da melhor experi\xEAncia neste site.",bupdate:"Atualizar navegador",bignore:"Ignorar",remind:"Voc\xEA ser\xE1 relembrado em {days} dias.",bnever:"N\xE3o mostrar novamente"},r.ro={msg:"Browserul t\u0103u ({brow_name}) nu este actualizat.",msgmore:"Actualizeaz\u0103 browserul pentru o mai mare siguran\u021B\u0103, vitez\u0103 \u0219i cea mai bun\u0103 experien\u021B\u0103 pe acest site.",bupdate:"Actualizeaz\u0103 browser",bignore:"Ignor\u0103",remind:"\u021Ai se va reaminti peste {days} zile.",bnever:"Nu mai ar\u0103ta"},r.ru={msg:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 ({brow_name}) \u0443\u0441\u0442\u0430\u0440\u0435\u043B.",msgmore:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u0435 \u0432\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0434\u043B\u044F \u043F\u043E\u0432\u044B\u0448\u0435\u043D\u0438\u044F \u0443\u0440\u043E\u0432\u043D\u044F \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438, \u0441\u043A\u043E\u0440\u043E\u0441\u0442\u0438 \u0438 \u043A\u043E\u043C\u0444\u043E\u0440\u0442\u0430 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u044D\u0442\u043E\u0433\u043E \u0441\u0430\u0439\u0442\u0430.",bupdate:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0431\u0440\u0430\u0443\u0437\u0435\u0440",bignore:"\u0418\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C",remind:"\u0412\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u0435 \u043D\u0430\u043F\u043E\u043C\u0438\u043D\u0430\u043D\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 {days} \u0434\u043D\u0435\u0439.",bnever:"\u0411\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C "},r.sk={msg:"V\xE1\u0161 internetov\xFD prehliada\u010D ({brow_name}) je zastaran\xFD.",msgmore:"Pre v\xE4\u010D\u0161iu bezpe\u010Dnos\u0165, r\xFDchlos\u0165 a lep\u0161iu sk\xFAsenos\u0165 s touto str\xE1nkou si aktualizujte svoj prehliada\u010D.",bupdate:"Aktualizova\u0165 prehliada\u010D",bignore:"Ignorova\u0165",remind:"Bude v\xE1m to pripomenut\xE9 o {days} dn\xED.",bnever:"U\u017E nikdy viac neukazova\u0165"},r.sl={msg:"Va\u0161 spletni brskalnik ({brow_name}) je zastarel.",msgmore:"Posodobite svoj brskalnik za dodatno varnost, hitrost in najbolj\u0161o izku\u0161njo na tem spletnem mestu.",bupdate:"Posodobi brskalnik",bignore:"Prezri",remind:"Opomnik boste prejeli \u010Dez toliko dni: {days}.",bnever:"Ne prika\u017Ei ve\u010D"},r.sq={msg:"Shfletuesi juaj ({brow_name}) \xEBsht\xEB i vjetruar.",msgmore:"P\xEBrdit\xEBsoni shfletuesin tuaj p\xEBr m\xEB tep\xEBr siguri, shpejt\xEBsi dhe p\xEBr m\xEB t\xEB mirin e funksionimeve n\xEB k\xEBt\xEB sajt.",bupdate:"P\xEBrdit\xEBso shfletuesin",bignore:"Shp\xEBrfille",remind:"Do t\u2019ju rikujtohet pas {days} dit\xEBsh.",bnever:"Mos e shfaq kurr\xEB m\xEB"},r.sr={msg:"Va\u0161 pretra\u017Eiva\u010D ({brow_name}) je zastareo.",msgmore:"Ima poznate sigurnosne probleme i najverovatnije ne\u0107e prikazati sve funkcionalnisti ovog i drugih sajtova.",bupdate:"Nadogradi pretra\u017Eiva\u010D",bignore:"Ignorisi",remind:"Zaboravic\u0301ete za {days} dana.",bnever:"Ne prikazuj opet"},r.sv={msg:"Din webbl\xE4sare ({brow_name}) \xE4r f\xF6r\xE5ldrad. ",msgmore:"Uppdatera din webbl\xE4sare f\xF6r mer s\xE4kerhet, hastighet och den b\xE4sta upplevelsen p\xE5 den h\xE4r sajten. ",bupdate:"Uppdatera webbl\xE4saren",bignore:"Ignorera",remind:"Du f\xE5r en p\xE5minnelse om {days} dagar.",bnever:"Visa aldrig igen"},r.th={msg:"\u0E40\u0E27\u0E47\u0E1A\u0E40\u0E1A\u0E23\u0E32\u0E27\u0E4C\u0E40\u0E0B\u0E2D\u0E23\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13 ({brow_name}) \u0E25\u0E49\u0E32\u0E2A\u0E21\u0E31\u0E22\u0E41\u0E25\u0E49\u0E27",msgmore:"\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E17\u0E40\u0E1A\u0E23\u0E32\u0E27\u0E4C\u0E40\u0E0B\u0E2D\u0E23\u0E4C\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E27\u0E32\u0E21\u0E1B\u0E25\u0E2D\u0E14\u0E20\u0E31\u0E22, \u0E04\u0E27\u0E32\u0E21\u0E40\u0E23\u0E47\u0E27 \u0E41\u0E25\u0E30\u0E1B\u0E23\u0E30\u0E2A\u0E1A\u0E01\u0E32\u0E23\u0E13\u0E4C\u0E17\u0E35\u0E48\u0E14\u0E35\u0E17\u0E35\u0E48\u0E2A\u0E38\u0E14\u0E1A\u0E19\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E19\u0E35\u0E49",bupdate:"\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E17\u0E40\u0E1A\u0E23\u0E32\u0E27\u0E4C\u0E40\u0E0B\u0E2D\u0E23\u0E4C",bignore:"\u0E02\u0E49\u0E32\u0E21",remind:"\u0E04\u0E38\u0E13\u0E08\u0E30\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E41\u0E08\u0E49\u0E07\u0E40\u0E15\u0E37\u0E2D\u0E19\u0E43\u0E19 {days} \u0E27\u0E31\u0E19",bnever:"\u0E44\u0E21\u0E48\u0E15\u0E49\u0E2D\u0E07\u0E41\u0E2A\u0E14\u0E07\u0E2D\u0E35\u0E01"},r.tr={msg:"Web taray\u0131c\u0131n\u0131z ({brow_name}) g\xFCncel de\u011Fil.",msgmore:"Daha fazla g\xFCvenlik ve h\u0131z ile bu sitede en iyi deneyim i\xE7in taray\u0131c\u0131n\u0131z\u0131 g\xFCncelleyin.",bupdate:"Taray\u0131c\u0131y\u0131 g\xFCncelle",bignore:"Yok say",remind:"{days} g\xFCn sonra bir hat\u0131rlatma alacaks\u0131n\u0131z.",bnever:"Bir daha g\xF6sterme"},r.uk={msg:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 ({brow_name}) \u0437\u0430\u0441\u0442\u0430\u0440\u0456\u043B\u0438\u0439.",msgmore:"\u041E\u043D\u043E\u0432\u0456\u0442\u044C \u0441\u0432\u0456\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0434\u043B\u044F \u0431\u0456\u043B\u044C\u0448\u043E\u0457 \u0431\u0435\u0437\u043F\u0435\u043A\u0438, \u0448\u0432\u0438\u0434\u043A\u043E\u0441\u0442\u0456 \u0442\u0430 \u043F\u043E\u0432\u043D\u043E\u0446\u0456\u043D\u043D\u043E\u0457 \u0440\u043E\u0431\u043E\u0442\u0438 \u0446\u044C\u043E\u0433\u043E \u0441\u0430\u0439\u0442\u0443.",bupdate:"\u041E\u043D\u043E\u0432\u0438\u0442\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440",bignore:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u0438",remind:"\u0412\u0438 \u043E\u0442\u0440\u0438\u043C\u0430\u0454\u0442\u0435 \u043D\u0430\u0433\u0430\u0434\u0443\u0432\u0430\u043D\u043D\u044F \u0447\u0435\u0440\u0435\u0437 {days} \u0434\u043D\u0456\u0432.",bnever:"\u0411\u0456\u043B\u044C\u0448\u0435 \u043D\u0435 \u043F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438"},r.uz={msg:"Sizning ({brow_name}) veb-brauzeringiz eskirgan",msgmore:"Xavfsizlik, tezkorlik va ushbu sayt imkoniyatlaridan to`liq foydalanish uchun brauzeringizni yangilang.",bupdate:"Brauzeringizni yangilang",bignore:"E\u2019tibor bermaslik",remind:"Sizga {days} kundan so`ng eslatammiz.",bnever:"Hech qachon qayta ko'rsatmang"},r.vi={msg:"Tr\xECnh duy\u1EC7t web c\u1EE7a b\u1EA1n ({brow_name}) \u0111\xE3 l\u1ED7i th\u1EDDi.",msgmore:"C\u1EADp nh\u1EADt tr\xECnh duy\u1EC7t c\u1EE7a b\u1EA1n \u0111\u1EC3 c\xF3 th\xEAm b\u1EA3o m\u1EADt, t\u1ED1c \u0111\u1ED9 v\xE0 tr\u1EA3i nghi\u1EC7m t\u1ED1t nh\u1EA5t tr\xEAn trang web n\xE0y.",bupdate:"C\u1EADp nh\u1EADt tr\xECnh duy\u1EC7t",bignore:"B\u1ECF qua",remind:"B\u1EA1n s\u1EBD \u0111\u01B0\u1EE3c nh\u1EAFc nh\u1EDF sau {days} ng\xE0y.",bnever:"Kh\xF4ng bao gi\u1EDD hi\u1EC3n th\u1ECB l\u1EA1i"},r.zh={msg:"\u60A8\u7684\u7F51\u9875\u6D4F\u89C8\u5668\uFF08{brow_name}\uFF09\u5DF2\u8FC7\u671F\u3002",msgmore:"\u66F4\u65B0\u60A8\u7684\u6D4F\u89C8\u5668\uFF0C\u4EE5\u4FBF\u5728\u8BE5\u7F51\u7AD9\u4E0A\u83B7\u5F97\u66F4\u5B89\u5168\u3001\u66F4\u5FEB\u901F\u548C\u6700\u597D\u7684\u4F53\u9A8C\u3002",bupdate:"\u66F4\u65B0\u6D4F\u89C8\u5668",bignore:"\u5FFD\u7565",remind:"\u4F1A\u5728{days}\u5929\u540E\u63D0\u9192\u60A8\u3002",bnever:"\u4E0D\u518D\u663E\u793A"},r["zh-tw"]=r["zh-hans-cn"]={msg:"\u60A8\u7684\u7DB2\u8DEF\u700F\u89BD\u5668\uFF08{brow_name}\uFF09\u5DF2\u904E\u820A\u3002",msgmore:"\u66F4\u65B0\u60A8\u7684\u700F\u89BD\u5668\u4EE5\u7372\u5F97\u66F4\u4F73\u7684\u5B89\u5168\u6027\u3001\u901F\u5EA6\u4EE5\u53CA\u5728\u6B64\u7DB2\u7AD9\u7684\u6700\u4F73\u9AD4\u9A57\u3002",bupdate:"\u66F4\u65B0\u700F\u89BD\u5668",bignore:"\u5FFD\u7565",remind:"\u60A8\u5C07\u5728 {days} \u5929\u5F8C\u6536\u5230\u63D0\u9192\u3002",bnever:"\u4E0D\u8981\u518D\u986F\u793A"};var d=t["text_for_"+i.n+"_in_"+t.ll]||t["text_for_"+i.n]||t["text_"+t.llfull]||t["text_in_"+t.ll]||t["text_"+t.ll]||t.text;if(r=o=r[t.llfull]||r[t.ll]||r.en,d)if(typeof d=="string")r=o=d;else for(var m in d)o[m]=d[m];t.browser.is_insecure&&o.insecure&&(o.msg=o.insecure),o.msg&&(r='<b class="buorg-mainmsg">'+r.msg+'</b> <span class="buorg-moremsg">'+r.msgmore+'</span> <span class="buorg-buttons"><a{up_but}>'+r.bupdate+"</a> <a{ignore_but}>"+r.bignore+"</a></span>");var p="";t.newwindow&&(p=' target="_blank" rel="noopener"');var f=t.div=document.createElement("div");f.id=f.className="buorg";var _="<style>.buorg-icon {width: 22px; height: 16px; vertical-align: middle; position: relative; top: -0.05em; display: inline-block; background: no-repeat 0px center url(https://browser-update.org/static/img/small/"+i.n+".png);}</style>",y="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:center;  color:#000; background-color: #fff8ea; font: 18px Calibri,Helvetica,sans-serif; box-shadow: 0 0 5px rgba(0,0,0,0.2);animation: buorgfly 1s ease-out 0s;}.buorg-pad { padding: 9px;  line-height: 1.7em; }.buorg-buttons { display: block; text-align: center; }#buorgig,#buorgul,#buorgpermanent { color: #fff; text-decoration: none; cursor:pointer; box-shadow: 0 0 2px rgba(0,0,0,0.4); padding: 1px 10px; border-radius: 4px; font-weight: normal; background: #5ab400;    white-space: nowrap;    margin: 0 2px; display: inline-block;}#buorgig { background-color: #edbc68;}@media only screen and (max-width: 700px){.buorg div { padding:5px 12px 5px 9px; line-height: 1.3em;}}@keyframes buorgfly {from {opacity:0;transform:translateY(-50px)} to {opacity:1;transform:translateY(0px)}}.buorg-fadeout {transition: visibility 0s 8.5s, opacity 8s ease-out .5s;}</style>";o.msg&&(t.ll=="ar"||t.ll=="he"||t.ll=="fa")&&(y+="<style>.buorg {direction:RTL; unicode-bidi:embed;}</style>"),!o.msg&&r.indexOf&&r.indexOf("%s")!==-1?(r=n(r,i.t,' id="buorgul" href="'+t.url+'"'+p),_+="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:left; cursor:pointer; color:#000; font: 13px Arial,sans-serif;color:#000;}.buorg div { padding:5px 36px 5px 40px; }.buorg>div>a,.buorg>div>a:visited{color:#E25600; text-decoration: underline;}#buorgclose{position:absolute;right:6px;top:0px;height:20px;width:12px;font:18px bold;padding:0;}#buorga{display:block;}@media only screen and (max-width: 700px){.buorg div { padding:5px 15px 5px 9px; }}</style>",f.innerHTML="<div>"+r+'<div id="buorgclose"><a id="buorga">&times;</a></div></div>'+_,t.addmargin=!0):(t.style==="bottom"?y+="<style>.buorg {bottom:0; top:auto; border-top:1px solid #A29330; } @keyframes buorgfly {from {opacity:0;transform:translateY(50px)} to {opacity:1;transform:translateY(0px)}}</style>":t.style==="corner"?y+="<style> .buorg { text-align: left; width:300px; top:50px; right:50px; left:auto; border:1px solid #A29330; } .buorg-buttons, .buorg-mainmsg, .buorg-moremsg { display: block; } .buorg-buttons a {margin: 4px 2px;} .buorg-icon {display: none;}</style>":t.addmargin=!0,r=r.replace("{brow_name}",i.t).replace("{up_but}",' id="buorgul" href="'+t.url+'"'+p).replace("{ignore_but}",' id="buorgig" role="button" tabindex="0"'),f.innerHTML='<div class="buorg-pad" role="status" aria-live="polite"><span class="buorg-icon"> </span>'+r+"</div>"+_+y),t.text=r,t.container?(t.container.appendChild(f),t.addmargin=!1):document.body.insertBefore(f,document.body.firstChild);var T=document.getElementById("buorgul");if(T&&(T.onclick=function(ee){f.onclick=null,t.onclick(t),!t.noclose&&(t.setCookie(t.reminderClosed),t.noclose||(f.style.display="none",t.addmargin&&t.shift_page_down!==!1&&(P.style.marginTop=t.bodymt)))}),d||(f.style.cursor="pointer",f.onclick=function(){t.newwindow?window.open(t.url,"_blank"):window.location.href=t.url,t.setCookie(t.reminderClosed),t.onclick(t)}),t.addmargin&&t.shift_page_down!==!1){var P=document.getElementsByTagName("html")[0]||document.body;t.bodymt=P.style.marginTop,P.style.marginTop=f.clientHeight+"px"}var A=document.getElementById("buorga")||document.getElementById("buorgig");if(A&&(A.onclick=function(ee){return f.onclick=null,t.onclose(t),t.addmargin&&t.shift_page_down!==!1&&(P.style.marginTop=t.bodymt),t.setCookie(t.reminderClosed),!t.no_permanent_hide&&o.bnever&&o.remind?(t.div.innerHTML='<div class="buorg-pad"><span class="buorg-moremsg">'+(t.reminderClosed>24?o.remind.replace("{days}",Math.round(t.reminderClosed/24)):"")+'</span> <span class="buorg-buttons"><a id="buorgpermanent" role="button" tabindex="0" href="'+t.url_permanent_hide+'"'+p+">"+o.bnever+"</a></span></div>"+_+y,f.className="buorg buorg-fadeout",document.getElementById("buorgpermanent").onclick=function(fe){t.setCookie(24*365),t.div.style.display="none"},t.div.style.opacity=0,t.div.style.visibility="hidden",!1):(t.div.style.display="none",!1)},(t.noclose||t.reminderClosed==0)&&A.parentNode.removeChild(A)),t.onshow(t),t.test&&!t.dont_show_debuginfo){var j=document.createElement("script");j.src=t.domain+"/update.test.js",document.body.appendChild(j)}}});function ul(t){return new ne(3e3,!1)}function gd(){return new ne(3100,!1)}function vd(){return new ne(3101,!1)}function _d(t){return new ne(3001,!1)}function Ed(t){return new ne(3003,!1)}function yd(t){return new ne(3004,!1)}function bd(t,i){return new ne(3005,!1)}function Cd(){return new ne(3006,!1)}function Sd(){return new ne(3007,!1)}function xd(t,i){return new ne(3008,!1)}function Td(t){return new ne(3002,!1)}function Md(t,i,e,n,r){return new ne(3010,!1)}function Pd(){return new ne(3011,!1)}function Ad(){return new ne(3012,!1)}function Id(){return new ne(3200,!1)}function wd(){return new ne(3202,!1)}function kd(){return new ne(3013,!1)}function Od(t){return new ne(3014,!1)}function Dd(t){return new ne(3015,!1)}function Fd(t){return new ne(3016,!1)}function Rd(t,i){return new ne(3404,!1)}function Nd(t){return new ne(3502,!1)}function Ud(t){return new ne(3503,!1)}function Ld(){return new ne(3300,!1)}function Bd(t){return new ne(3504,!1)}function Vd(t){return new ne(3301,!1)}function jd(t,i){return new ne(3302,!1)}function zd(t){return new ne(3303,!1)}function qd(t,i){return new ne(3400,!1)}function Hd(t){return new ne(3401,!1)}function Gd(t){return new ne(3402,!1)}function $d(t,i){return new ne(3505,!1)}function fi(t){switch(t.length){case 0:return new Vi;case 1:return t[0];default:return new Hr(t)}}function Tl(t,i,e=new Map,n=new Map){let r=[],o=[],d=-1,m=null;if(i.forEach(p=>{let f=p.get("offset"),_=f==d,y=_&&m||new Map;p.forEach((T,P)=>{let A=P,j=T;if(P!=="offset")switch(A=t.normalizePropertyName(A,r),j){case Kn:j=e.get(P);break;case Dt:j=n.get(P);break;default:j=t.normalizeStyleValue(P,A,j,r);break}y.set(A,j)}),_||o.push(y),m=y,d=f}),r.length)throw Nd(r);return o}function po(t,i,e,n){switch(i){case"start":t.onStart(()=>n(e&&Gr(e,"start",t)));break;case"done":t.onDone(()=>n(e&&Gr(e,"done",t)));break;case"destroy":t.onDestroy(()=>n(e&&Gr(e,"destroy",t)));break}}function Gr(t,i,e){let n=e.totalTime,r=!!e.disabled,o=ho(t.element,t.triggerName,t.fromState,t.toState,i||t.phaseName,n??t.totalTime,r),d=t._data;return d!=null&&(o._data=d),o}function ho(t,i,e,n,r="",o=0,d){return{element:t,triggerName:i,fromState:e,toState:n,phaseName:r,totalTime:o,disabled:!!d}}function ot(t,i,e){let n=t.get(i);return n||t.set(i,n=e),n}function ml(t){let i=t.indexOf(":"),e=t.substring(1,i),n=t.slice(i+1);return[e,n]}var Kd=typeof document>"u"?null:document.documentElement;function fo(t){let i=t.parentNode||t.host||null;return i===Kd?null:i}function Qd(t){return t.substring(1,6)=="ebkit"}var Mi=null,pl=!1;function Wd(t){Mi||(Mi=Jd()||{},pl=Mi.style?"WebkitAppearance"in Mi.style:!1);let i=!0;return Mi.style&&!Qd(t)&&(i=t in Mi.style,!i&&pl&&(i="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Mi.style)),i}function Jd(){return typeof document<"u"?document.body:null}function Ml(t,i){for(;i;){if(i===t)return!0;i=fo(i)}return!1}function Pl(t,i,e){if(e)return Array.from(t.querySelectorAll(i));let n=t.querySelector(i);return n?[n]:[]}var go=(()=>{class t{validateStyleProperty(e){return Wd(e)}containsElement(e,n){return Ml(e,n)}getParentElement(e){return fo(e)}query(e,n,r){return Pl(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,o,d,m=[],p){return new Vi(r,o)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=he({token:t,factory:t.\u0275fac})}return t})(),Ii=class{static NOOP=new go},wi=class{};var Xd=1e3,Al="{{",Yd="}}",Il="ng-enter",Xr="ng-leave",ir="ng-trigger",sr=".ng-trigger",hl="ng-animating",Yr=".ng-animating";function Wt(t){if(typeof t=="number")return t;let i=t.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:Zr(parseFloat(i[1]),i[2])}function Zr(t,i){switch(i){case"s":return t*Xd;default:return t}}function lr(t,i,e){return t.hasOwnProperty("duration")?t:Zd(t,i,e)}function Zd(t,i,e){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,d="";if(typeof t=="string"){let m=t.match(n);if(m===null)return i.push(ul(t)),{duration:0,delay:0,easing:""};r=Zr(parseFloat(m[1]),m[2]);let p=m[3];p!=null&&(o=Zr(parseFloat(p),m[4]));let f=m[5];f&&(d=f)}else r=t;if(!e){let m=!1,p=i.length;r<0&&(i.push(gd()),m=!0),o<0&&(i.push(vd()),m=!0),m&&i.splice(p,0,ul(t))}return{duration:r,delay:o,easing:d}}function eu(t){return t.length?t[0]instanceof Map?t:t.map(i=>new Map(Object.entries(i))):[]}function Nt(t,i,e){i.forEach((n,r)=>{let o=vo(r);e&&!e.has(r)&&e.set(r,t.style[o]),t.style[o]=n})}function Ai(t,i){i.forEach((e,n)=>{let r=vo(n);t.style[r]=""})}function ln(t){return Array.isArray(t)?t.length==1?t[0]:gs(t):t}function tu(t,i,e){let n=i.params||{},r=wl(t);r.length&&r.forEach(o=>{n.hasOwnProperty(o)||e.push(_d(o))})}var eo=new RegExp(`${Al}\\s*(.+?)\\s*${Yd}`,"g");function wl(t){let i=[];if(typeof t=="string"){let e;for(;e=eo.exec(t);)i.push(e[1]);eo.lastIndex=0}return i}function dn(t,i,e){let n=`${t}`,r=n.replace(eo,(o,d)=>{let m=i[d];return m==null&&(e.push(Ed(d)),m=""),m.toString()});return r==n?t:r}var iu=/-+([a-z0-9])/g;function vo(t){return t.replace(iu,(...i)=>i[1].toUpperCase())}function nu(t,i){return t===0||i===0}function ru(t,i,e){if(e.size&&i.length){let n=i[0],r=[];if(e.forEach((o,d)=>{n.has(d)||r.push(d),n.set(d,o)}),r.length)for(let o=1;o<i.length;o++){let d=i[o];r.forEach(m=>d.set(m,_o(t,m)))}}return i}function rt(t,i,e){switch(i.type){case Z.Trigger:return t.visitTrigger(i,e);case Z.State:return t.visitState(i,e);case Z.Transition:return t.visitTransition(i,e);case Z.Sequence:return t.visitSequence(i,e);case Z.Group:return t.visitGroup(i,e);case Z.Animate:return t.visitAnimate(i,e);case Z.Keyframes:return t.visitKeyframes(i,e);case Z.Style:return t.visitStyle(i,e);case Z.Reference:return t.visitReference(i,e);case Z.AnimateChild:return t.visitAnimateChild(i,e);case Z.AnimateRef:return t.visitAnimateRef(i,e);case Z.Query:return t.visitQuery(i,e);case Z.Stagger:return t.visitStagger(i,e);default:throw yd(i.type)}}function _o(t,i){return window.getComputedStyle(t)[i]}var ou=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),cr=class extends wi{normalizePropertyName(i,e){return vo(i)}normalizeStyleValue(i,e,n,r){let o="",d=n.toString().trim();if(ou.has(e)&&n!==0&&n!=="0")if(typeof n=="number")o="px";else{let m=n.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&m[1].length==0&&r.push(bd(i,n))}return d+o}};var dr="*";function au(t,i){let e=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(n=>su(n,e,i)):e.push(t),e}function su(t,i,e){if(t[0]==":"){let p=lu(t,e);if(typeof p=="function"){i.push(p);return}t=p}let n=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return e.push(Dd(t)),i;let r=n[1],o=n[2],d=n[3];i.push(fl(r,d));let m=r==dr&&d==dr;o[0]=="<"&&!m&&i.push(fl(d,r))}function lu(t,i){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return i.push(Fd(t)),"* => *"}}var nr=new Set(["true","1"]),rr=new Set(["false","0"]);function fl(t,i){let e=nr.has(t)||rr.has(t),n=nr.has(i)||rr.has(i);return(r,o)=>{let d=t==dr||t==r,m=i==dr||i==o;return!d&&e&&typeof r=="boolean"&&(d=r?nr.has(t):rr.has(t)),!m&&n&&typeof o=="boolean"&&(m=o?nr.has(i):rr.has(i)),d&&m}}var kl=":self",cu=new RegExp(`s*${kl}s*,?`,"g");function Ol(t,i,e,n){return new to(t).build(i,e,n)}var gl="",to=class{_driver;constructor(i){this._driver=i}build(i,e,n){let r=new io(e);return this._resetContextStyleTimingState(r),rt(this,ln(i),r)}_resetContextStyleTimingState(i){i.currentQuerySelector=gl,i.collectedStyles=new Map,i.collectedStyles.set(gl,new Map),i.currentTime=0}visitTrigger(i,e){let n=e.queryCount=0,r=e.depCount=0,o=[],d=[];return i.name.charAt(0)=="@"&&e.errors.push(Cd()),i.definitions.forEach(m=>{if(this._resetContextStyleTimingState(e),m.type==Z.State){let p=m,f=p.name;f.toString().split(/\s*,\s*/).forEach(_=>{p.name=_,o.push(this.visitState(p,e))}),p.name=f}else if(m.type==Z.Transition){let p=this.visitTransition(m,e);n+=p.queryCount,r+=p.depCount,d.push(p)}else e.errors.push(Sd())}),{type:Z.Trigger,name:i.name,states:o,transitions:d,queryCount:n,depCount:r,options:null}}visitState(i,e){let n=this.visitStyle(i.styles,e),r=i.options&&i.options.params||null;if(n.containsDynamicStyles){let o=new Set,d=r||{};n.styles.forEach(m=>{m instanceof Map&&m.forEach(p=>{wl(p).forEach(f=>{d.hasOwnProperty(f)||o.add(f)})})}),o.size&&e.errors.push(xd(i.name,[...o.values()]))}return{type:Z.State,name:i.name,style:n,options:r?{params:r}:null}}visitTransition(i,e){e.queryCount=0,e.depCount=0;let n=rt(this,ln(i.animation),e),r=au(i.expr,e.errors);return{type:Z.Transition,matchers:r,animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Pi(i.options)}}visitSequence(i,e){return{type:Z.Sequence,steps:i.steps.map(n=>rt(this,n,e)),options:Pi(i.options)}}visitGroup(i,e){let n=e.currentTime,r=0,o=i.steps.map(d=>{e.currentTime=n;let m=rt(this,d,e);return r=Math.max(r,e.currentTime),m});return e.currentTime=r,{type:Z.Group,steps:o,options:Pi(i.options)}}visitAnimate(i,e){let n=pu(i.timings,e.errors);e.currentAnimateTimings=n;let r,o=i.styles?i.styles:xi({});if(o.type==Z.Keyframes)r=this.visitKeyframes(o,e);else{let d=i.styles,m=!1;if(!d){m=!0;let f={};n.easing&&(f.easing=n.easing),d=xi(f)}e.currentTime+=n.duration+n.delay;let p=this.visitStyle(d,e);p.isEmptyStep=m,r=p}return e.currentAnimateTimings=null,{type:Z.Animate,timings:n,style:r,options:null}}visitStyle(i,e){let n=this._makeStyleAst(i,e);return this._validateStyleAst(n,e),n}_makeStyleAst(i,e){let n=[],r=Array.isArray(i.styles)?i.styles:[i.styles];for(let m of r)typeof m=="string"?m===Dt?n.push(m):e.errors.push(Td(m)):n.push(new Map(Object.entries(m)));let o=!1,d=null;return n.forEach(m=>{if(m instanceof Map&&(m.has("easing")&&(d=m.get("easing"),m.delete("easing")),!o)){for(let p of m.values())if(p.toString().indexOf(Al)>=0){o=!0;break}}}),{type:Z.Style,styles:n,easing:d,offset:i.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(i,e){let n=e.currentAnimateTimings,r=e.currentTime,o=e.currentTime;n&&o>0&&(o-=n.duration+n.delay),i.styles.forEach(d=>{typeof d!="string"&&d.forEach((m,p)=>{let f=e.collectedStyles.get(e.currentQuerySelector),_=f.get(p),y=!0;_&&(o!=r&&o>=_.startTime&&r<=_.endTime&&(e.errors.push(Md(p,_.startTime,_.endTime,o,r)),y=!1),o=_.startTime),y&&f.set(p,{startTime:o,endTime:r}),e.options&&tu(m,e.options,e.errors)})})}visitKeyframes(i,e){let n={type:Z.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(Pd()),n;let r=1,o=0,d=[],m=!1,p=!1,f=0,_=i.steps.map(fe=>{let Ae=this._makeStyleAst(fe,e),Ge=Ae.offset!=null?Ae.offset:mu(Ae.styles),je=0;return Ge!=null&&(o++,je=Ae.offset=Ge),p=p||je<0||je>1,m=m||je<f,f=je,d.push(je),Ae});p&&e.errors.push(Ad()),m&&e.errors.push(Id());let y=i.steps.length,T=0;o>0&&o<y?e.errors.push(wd()):o==0&&(T=r/(y-1));let P=y-1,A=e.currentTime,j=e.currentAnimateTimings,ee=j.duration;return _.forEach((fe,Ae)=>{let Ge=T>0?Ae==P?1:T*Ae:d[Ae],je=Ge*ee;e.currentTime=A+j.delay+je,j.duration=je,this._validateStyleAst(fe,e),fe.offset=Ge,n.styles.push(fe)}),n}visitReference(i,e){return{type:Z.Reference,animation:rt(this,ln(i.animation),e),options:Pi(i.options)}}visitAnimateChild(i,e){return e.depCount++,{type:Z.AnimateChild,options:Pi(i.options)}}visitAnimateRef(i,e){return{type:Z.AnimateRef,animation:this.visitReference(i.animation,e),options:Pi(i.options)}}visitQuery(i,e){let n=e.currentQuerySelector,r=i.options||{};e.queryCount++,e.currentQuery=i;let[o,d]=du(i.selector);e.currentQuerySelector=n.length?n+" "+o:o,ot(e.collectedStyles,e.currentQuerySelector,new Map);let m=rt(this,ln(i.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:Z.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:d,animation:m,originalSelector:i.selector,options:Pi(i.options)}}visitStagger(i,e){e.currentQuery||e.errors.push(kd());let n=i.timings==="full"?{duration:0,delay:0,easing:"full"}:lr(i.timings,e.errors,!0);return{type:Z.Stagger,animation:rt(this,ln(i.animation),e),timings:n,options:null}}};function du(t){let i=!!t.split(/\s*,\s*/).find(e=>e==kl);return i&&(t=t.replace(cu,"")),t=t.replace(/@\*/g,sr).replace(/@\w+/g,e=>sr+"-"+e.slice(1)).replace(/:animating/g,Yr),[t,i]}function uu(t){return t?J({},t):null}var io=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(i){this.errors=i}};function mu(t){if(typeof t=="string")return null;let i=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){let n=e;i=parseFloat(n.get("offset")),n.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let e=t;i=parseFloat(e.get("offset")),e.delete("offset")}return i}function pu(t,i){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let o=lr(t,i).duration;return $r(o,0,"")}let e=t;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=$r(0,0,"");return o.dynamic=!0,o.strValue=e,o}let r=lr(e,i);return $r(r.duration,r.delay,r.easing)}function Pi(t){return t?(t=J({},t),t.params&&(t.params=uu(t.params))):t={},t}function $r(t,i,e){return{duration:t,delay:i,easing:e}}function Eo(t,i,e,n,r,o,d=null,m=!1){return{type:1,element:t,keyframes:i,preStyleProps:e,postStyleProps:n,duration:r,delay:o,totalTime:r+o,easing:d,subTimeline:m}}var un=class{_map=new Map;get(i){return this._map.get(i)||[]}append(i,e){let n=this._map.get(i);n||this._map.set(i,n=[]),n.push(...e)}has(i){return this._map.has(i)}clear(){this._map.clear()}},hu=1,fu=":enter",gu=new RegExp(fu,"g"),vu=":leave",_u=new RegExp(vu,"g");function Dl(t,i,e,n,r,o=new Map,d=new Map,m,p,f=[]){return new no().buildKeyframes(t,i,e,n,r,o,d,m,p,f)}var no=class{buildKeyframes(i,e,n,r,o,d,m,p,f,_=[]){f=f||new un;let y=new ro(i,e,f,r,o,_,[]);y.options=p;let T=p.delay?Wt(p.delay):0;y.currentTimeline.delayNextStep(T),y.currentTimeline.setStyles([d],null,y.errors,p),rt(this,n,y);let P=y.timelines.filter(A=>A.containsAnimation());if(P.length&&m.size){let A;for(let j=P.length-1;j>=0;j--){let ee=P[j];if(ee.element===e){A=ee;break}}A&&!A.allowOnlyTimelineStyles()&&A.setStyles([m],null,y.errors,p)}return P.length?P.map(A=>A.buildKeyframes()):[Eo(e,[],[],[],0,T,"",!1)]}visitTrigger(i,e){}visitState(i,e){}visitTransition(i,e){}visitAnimateChild(i,e){let n=e.subInstructions.get(e.element);if(n){let r=e.createSubContext(i.options),o=e.currentTimeline.currentTime,d=this._visitSubInstructions(n,r,r.options);o!=d&&e.transformIntoNewTimeline(d)}e.previousNode=i}visitAnimateRef(i,e){let n=e.createSubContext(i.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([i.options,i.animation.options],e,n),this.visitReference(i.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=i}_applyAnimationRefDelays(i,e,n){for(let r of i){let o=r==null?void 0:r.delay;if(o){let d=typeof o=="number"?o:Wt(dn(o,(r==null?void 0:r.params)??{},e.errors));n.delayNextStep(d)}}}_visitSubInstructions(i,e,n){let o=e.currentTimeline.currentTime,d=n.duration!=null?Wt(n.duration):null,m=n.delay!=null?Wt(n.delay):null;return d!==0&&i.forEach(p=>{let f=e.appendInstructionToTimeline(p,d,m);o=Math.max(o,f.duration+f.delay)}),o}visitReference(i,e){e.updateOptions(i.options,!0),rt(this,i.animation,e),e.previousNode=i}visitSequence(i,e){let n=e.subContextCount,r=e,o=i.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==Z.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ur);let d=Wt(o.delay);r.delayNextStep(d)}i.steps.length&&(i.steps.forEach(d=>rt(this,d,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=i}visitGroup(i,e){let n=[],r=e.currentTimeline.currentTime,o=i.options&&i.options.delay?Wt(i.options.delay):0;i.steps.forEach(d=>{let m=e.createSubContext(i.options);o&&m.delayNextStep(o),rt(this,d,m),r=Math.max(r,m.currentTimeline.currentTime),n.push(m.currentTimeline)}),n.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(r),e.previousNode=i}_visitTiming(i,e){if(i.dynamic){let n=i.strValue,r=e.params?dn(n,e.params,e.errors):n;return lr(r,e.errors)}else return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,e){let n=e.currentAnimateTimings=this._visitTiming(i.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());let o=i.style;o.type==Z.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(n.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=i}visitStyle(i,e){let n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();let o=r&&r.easing||i.easing;i.isEmptyStep?n.applyEmptyStep(o):n.setStyles(i.styles,o,e.errors,e.options),e.previousNode=i}visitKeyframes(i,e){let n=e.currentAnimateTimings,r=e.currentTimeline.duration,o=n.duration,m=e.createSubContext().currentTimeline;m.easing=n.easing,i.styles.forEach(p=>{let f=p.offset||0;m.forwardTime(f*o),m.setStyles(p.styles,p.easing,e.errors,e.options),m.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(m),e.transformIntoNewTimeline(r+o),e.previousNode=i}visitQuery(i,e){let n=e.currentTimeline.currentTime,r=i.options||{},o=r.delay?Wt(r.delay):0;o&&(e.previousNode.type===Z.Style||n==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ur);let d=n,m=e.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=m.length;let p=null;m.forEach((f,_)=>{e.currentQueryIndex=_;let y=e.createSubContext(i.options,f);o&&y.delayNextStep(o),f===e.element&&(p=y.currentTimeline),rt(this,i.animation,y),y.currentTimeline.applyStylesToKeyframe();let T=y.currentTimeline.currentTime;d=Math.max(d,T)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=i}visitStagger(i,e){let n=e.parentContext,r=e.currentTimeline,o=i.timings,d=Math.abs(o.duration),m=d*(e.currentQueryTotal-1),p=d*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":p=m-p;break;case"full":p=n.currentStaggerTime;break}let _=e.currentTimeline;p&&_.delayNextStep(p);let y=_.currentTime;rt(this,i.animation,e),e.previousNode=i,n.currentStaggerTime=r.currentTime-y+(r.startTime-n.currentTimeline.startTime)}},ur={},ro=class t{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=ur;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(i,e,n,r,o,d,m,p){this._driver=i,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=o,this.errors=d,this.timelines=m,this.currentTimeline=p||new mr(this._driver,e,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,e){if(!i)return;let n=i,r=this.options;n.duration!=null&&(r.duration=Wt(n.duration)),n.delay!=null&&(r.delay=Wt(n.delay));let o=n.params;if(o){let d=r.params;d||(d=this.options.params={}),Object.keys(o).forEach(m=>{(!e||!d.hasOwnProperty(m))&&(d[m]=dn(o[m],d,this.errors))})}}_copyOptions(){let i={};if(this.options){let e=this.options.params;if(e){let n=i.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return i}createSubContext(i=null,e,n){let r=e||this.element,o=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(i),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(i){return this.previousNode=ur,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,e,n){let r={duration:e??i.duration,delay:this.currentTimeline.currentTime+(n??0)+i.delay,easing:""},o=new oo(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,r,i.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,e,n,r,o,d){let m=[];if(r&&m.push(this.element),i.length>0){i=i.replace(gu,"."+this._enterClassName),i=i.replace(_u,"."+this._leaveClassName);let p=n!=1,f=this._driver.query(this.element,i,p);n!==0&&(f=n<0?f.slice(f.length+n,f.length):f.slice(0,n)),m.push(...f)}return!o&&m.length==0&&d.push(Od(e)),m}},mr=class t{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(i,e,n,r){this._driver=i,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+i),e&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,e){return this.applyStylesToKeyframe(),new t(this._driver,i,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=hu,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,e){this._localTimelineStyles.set(i,e),this._globalTimelineStyles.set(i,e),this._styleSummary.set(i,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||Dt),this._currentKeyframe.set(e,Dt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,e,n,r){e&&this._previousKeyframe.set("easing",e);let o=r&&r.params||{},d=Eu(i,this._globalTimelineStyles);for(let[m,p]of d){let f=dn(p,o,n);this._pendingStyles.set(m,f),this._localTimelineStyles.has(m)||this._backFill.set(m,this._globalTimelineStyles.get(m)??Dt),this._updateStyle(m,f)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((i,e)=>{this._currentKeyframe.set(e,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,i)}))}snapshotCurrentStyles(){for(let[i,e]of this._localTimelineStyles)this._pendingStyles.set(i,e),this._updateStyle(i,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let i=[];for(let e in this._currentKeyframe)i.push(e);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((e,n)=>{let r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let i=new Set,e=new Set,n=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((m,p)=>{let f=new Map([...this._backFill,...m]);f.forEach((_,y)=>{_===Kn?i.add(y):_===Dt&&e.add(y)}),n||f.set("offset",p/this.duration),r.push(f)});let o=[...i.values()],d=[...e.values()];if(n){let m=r[0],p=new Map(m);m.set("offset",0),p.set("offset",1),r=[m,p]}return Eo(this.element,r,o,d,this.duration,this.startTime,this.easing,!1)}},oo=class extends mr{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(i,e,n,r,o,d,m=!1){super(i,e,d.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=m,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],d=n+e,m=e/d,p=new Map(i[0]);p.set("offset",0),o.push(p);let f=new Map(i[0]);f.set("offset",vl(m)),o.push(f);let _=i.length-1;for(let y=1;y<=_;y++){let T=new Map(i[y]),P=T.get("offset"),A=e+P*n;T.set("offset",vl(A/d)),o.push(T)}n=d,e=0,r="",i=o}return Eo(this.element,i,this.preStyleProps,this.postStyleProps,n,e,r,!0)}};function vl(t,i=3){let e=Math.pow(10,i-1);return Math.round(t*e)/e}function Eu(t,i){let e=new Map,n;return t.forEach(r=>{if(r==="*"){n??=i.keys();for(let o of n)e.set(o,Dt)}else for(let[o,d]of r)e.set(o,d)}),e}function _l(t,i,e,n,r,o,d,m,p,f,_,y,T){return{type:0,element:t,triggerName:i,isRemovalTransition:r,fromState:e,fromStyles:o,toState:n,toStyles:d,timelines:m,queriedElements:p,preStyleProps:f,postStyleProps:_,totalTime:y,errors:T}}var Kr={},pr=class{_triggerName;ast;_stateStyles;constructor(i,e,n){this._triggerName=i,this.ast=e,this._stateStyles=n}match(i,e,n,r){return yu(this.ast.matchers,i,e,n,r)}buildStyles(i,e,n){let r=this._stateStyles.get("*");return i!==void 0&&(r=this._stateStyles.get(i==null?void 0:i.toString())||r),r?r.buildStyles(e,n):new Map}build(i,e,n,r,o,d,m,p,f,_){var St;let y=[],T=this.ast.options&&this.ast.options.params||Kr,P=m&&m.params||Kr,A=this.buildStyles(n,P,y),j=p&&p.params||Kr,ee=this.buildStyles(r,j,y),fe=new Set,Ae=new Map,Ge=new Map,je=r==="void",Oi={params:Fl(j,T),delay:(St=this.ast.options)==null?void 0:St.delay},Ct=_?[]:Dl(i,e,this.ast.animation,o,d,A,ee,Oi,f,y),$e=0;return Ct.forEach(Bt=>{$e=Math.max(Bt.duration+Bt.delay,$e)}),y.length?_l(e,this._triggerName,n,r,je,A,ee,[],[],Ae,Ge,$e,y):(Ct.forEach(Bt=>{let Vt=Bt.element,Zo=ot(Ae,Vt,new Set);Bt.preStyleProps.forEach(Ei=>Zo.add(Ei));let Xi=ot(Ge,Vt,new Set);Bt.postStyleProps.forEach(Ei=>Xi.add(Ei)),Vt!==e&&fe.add(Vt)}),_l(e,this._triggerName,n,r,je,A,ee,Ct,[...fe.values()],Ae,Ge,$e))}};function yu(t,i,e,n,r){return t.some(o=>o(i,e,n,r))}function Fl(t,i){let e=J({},i);return Object.entries(t).forEach(([n,r])=>{r!=null&&(e[n]=r)}),e}var ao=class{styles;defaultParams;normalizer;constructor(i,e,n){this.styles=i,this.defaultParams=e,this.normalizer=n}buildStyles(i,e){let n=new Map,r=Fl(i,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((d,m)=>{d&&(d=dn(d,r,e));let p=this.normalizer.normalizePropertyName(m,e);d=this.normalizer.normalizeStyleValue(m,p,d,e),n.set(m,d)})}),n}};function bu(t,i,e){return new so(t,i,e)}var so=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(i,e,n){this.name=i,this.ast=e,this._normalizer=n,e.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new ao(r.style,o,n))}),El(this.states,"true","1"),El(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new pr(i,r,this.states))}),this.fallbackTransition=Cu(i,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,e,n,r){return this.transitionFactories.find(d=>d.match(i,e,n,r))||null}matchStyles(i,e,n){return this.fallbackTransition.buildStyles(i,e,n)}};function Cu(t,i,e){let n=[(d,m)=>!0],r={type:Z.Sequence,steps:[],options:null},o={type:Z.Transition,animation:r,matchers:n,options:null,queryCount:0,depCount:0};return new pr(t,o,i)}function El(t,i,e){t.has(i)?t.has(e)||t.set(e,t.get(i)):t.has(e)&&t.set(i,t.get(e))}var Su=new un,lo=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(i,e,n){this.bodyNode=i,this._driver=e,this._normalizer=n}register(i,e){let n=[],r=[],o=Ol(this._driver,e,n,r);if(n.length)throw Ud(n);this._animations.set(i,o)}_buildPlayer(i,e,n){let r=i.element,o=Tl(this._normalizer,i.keyframes,e,n);return this._driver.animate(r,o,i.duration,i.delay,i.easing,[],!0)}create(i,e,n={}){let r=[],o=this._animations.get(i),d,m=new Map;if(o?(d=Dl(this._driver,e,o,Il,Xr,new Map,new Map,n,Su,r),d.forEach(_=>{let y=ot(m,_.element,new Map);_.postStyleProps.forEach(T=>y.set(T,null))})):(r.push(Ld()),d=[]),r.length)throw Bd(r);m.forEach((_,y)=>{_.forEach((T,P)=>{_.set(P,this._driver.computeStyle(y,P,Dt))})});let p=d.map(_=>{let y=m.get(_.element);return this._buildPlayer(_,new Map,y)}),f=fi(p);return this._playersById.set(i,f),f.onDestroy(()=>this.destroy(i)),this.players.push(f),f}destroy(i){let e=this._getPlayer(i);e.destroy(),this._playersById.delete(i);let n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(i){let e=this._playersById.get(i);if(!e)throw Vd(i);return e}listen(i,e,n,r){let o=ho(e,"","","");return po(this._getPlayer(i),n,o,r),()=>{}}command(i,e,n,r){if(n=="register"){this.register(i,r[0]);return}if(n=="create"){let d=r[0]||{};this.create(i,e,d);return}let o=this._getPlayer(i);switch(n){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(i);break}}},yl="ng-animate-queued",xu=".ng-animate-queued",Qr="ng-animate-disabled",Tu=".ng-animate-disabled",Mu="ng-star-inserted",Pu=".ng-star-inserted",Au=[],Rl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Iu={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Et="__ng_removed",mn=class{namespaceId;value;options;get params(){return this.options.params}constructor(i,e=""){this.namespaceId=e;let n=i&&i.hasOwnProperty("value"),r=n?i.value:i;if(this.value=ku(r),n){let o=i,{value:d}=o,m=yn(o,["value"]);this.options=m}else this.options={};this.options.params||(this.options.params={})}absorbOptions(i){let e=i.params;if(e){let n=this.options.params;Object.keys(e).forEach(r=>{n[r]==null&&(n[r]=e[r])})}}},cn="void",Wr=new mn(cn),co=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(i,e,n){this.id=i,this.hostElement=e,this._engine=n,this._hostClassName="ng-tns-"+i,pt(e,this._hostClassName)}listen(i,e,n,r){if(!this._triggers.has(e))throw jd(n,e);if(n==null||n.length==0)throw zd(e);if(!Ou(n))throw qd(n,e);let o=ot(this._elementListeners,i,[]),d={name:e,phase:n,callback:r};o.push(d);let m=ot(this._engine.statesByElement,i,new Map);return m.has(e)||(pt(i,ir),pt(i,ir+"-"+e),m.set(e,Wr)),()=>{this._engine.afterFlush(()=>{let p=o.indexOf(d);p>=0&&o.splice(p,1),this._triggers.has(e)||m.delete(e)})}}register(i,e){return this._triggers.has(i)?!1:(this._triggers.set(i,e),!0)}_getTrigger(i){let e=this._triggers.get(i);if(!e)throw Hd(i);return e}trigger(i,e,n,r=!0){let o=this._getTrigger(e),d=new pn(this.id,e,i),m=this._engine.statesByElement.get(i);m||(pt(i,ir),pt(i,ir+"-"+e),this._engine.statesByElement.set(i,m=new Map));let p=m.get(e),f=new mn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&p&&f.absorbOptions(p.options),m.set(e,f),p||(p=Wr),!(f.value===cn)&&p.value===f.value){if(!Ru(p.params,f.params)){let j=[],ee=o.matchStyles(p.value,p.params,j),fe=o.matchStyles(f.value,f.params,j);j.length?this._engine.reportError(j):this._engine.afterFlush(()=>{Ai(i,ee),Nt(i,fe)})}return}let T=ot(this._engine.playersByElement,i,[]);T.forEach(j=>{j.namespaceId==this.id&&j.triggerName==e&&j.queued&&j.destroy()});let P=o.matchTransition(p.value,f.value,i,f.params),A=!1;if(!P){if(!r)return;P=o.fallbackTransition,A=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:e,transition:P,fromState:p,toState:f,player:d,isFallbackTransition:A}),A||(pt(i,yl),d.onStart(()=>{zi(i,yl)})),d.onDone(()=>{let j=this.players.indexOf(d);j>=0&&this.players.splice(j,1);let ee=this._engine.playersByElement.get(i);if(ee){let fe=ee.indexOf(d);fe>=0&&ee.splice(fe,1)}}),this.players.push(d),T.push(d),d}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(e=>e.delete(i)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);let e=this._engine.playersByElement.get(i);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,e){let n=this._engine.driver.query(i,sr,!0);n.forEach(r=>{if(r[Et])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(d=>d.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(i,e,n,r){let o=this._engine.statesByElement.get(i),d=new Map;if(o){let m=[];if(o.forEach((p,f)=>{if(d.set(f,p.value),this._triggers.has(f)){let _=this.trigger(i,f,cn,r);_&&m.push(_)}}),m.length)return this._engine.markElementAsRemoved(this.id,i,!0,e,d),n&&fi(m).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){let e=this._elementListeners.get(i),n=this._engine.statesByElement.get(i);if(e&&n){let r=new Set;e.forEach(o=>{let d=o.name;if(r.has(d))return;r.add(d);let p=this._triggers.get(d).fallbackTransition,f=n.get(d)||Wr,_=new mn(cn),y=new pn(this.id,d,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:d,transition:p,fromState:f,toState:_,player:y,isFallbackTransition:!0})})}}removeNode(i,e){let n=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,e),this.triggerLeaveAnimation(i,e,!0))return;let r=!1;if(n.totalAnimations){let o=n.players.length?n.playersByQueriedElement.get(i):[];if(o&&o.length)r=!0;else{let d=i;for(;d=d.parentNode;)if(n.statesByElement.get(d)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(i),r)n.markElementAsRemoved(this.id,i,!1,e);else{let o=i[Et];(!o||o===Rl)&&(n.afterFlush(()=>this.clearElementCache(i)),n.destroyInnerAnimations(i),n._onRemovalComplete(i,e))}}insertNode(i,e){pt(i,this._hostClassName)}drainQueuedTransitions(i){let e=[];return this._queue.forEach(n=>{let r=n.player;if(r.destroyed)return;let o=n.element,d=this._elementListeners.get(o);d&&d.forEach(m=>{if(m.name==n.triggerName){let p=ho(o,n.triggerName,n.fromState.value,n.toState.value);p._data=i,po(n.player,m.phase,p,m.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{let o=n.transition.ast.depCount,d=r.transition.ast.depCount;return o==0||d==0?o-d:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(i){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}},uo=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(i,e)=>{};_onRemovalComplete(i,e){this.onRemovalComplete(i,e)}constructor(i,e,n){this.bodyNode=i,this.driver=e,this._normalizer=n}get queuedPlayers(){let i=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&i.push(n)})}),i}createNamespace(i,e){let n=new co(i,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[i]=n}_balanceNamespaceList(i,e){let n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let d=!1,m=this.driver.getParentElement(e);for(;m;){let p=r.get(m);if(p){let f=n.indexOf(p);n.splice(f+1,0,i),d=!0;break}m=this.driver.getParentElement(m)}d||n.unshift(i)}else n.push(i);return r.set(e,i),i}register(i,e){let n=this._namespaceLookup[i];return n||(n=this.createNamespace(i,e)),n}registerTrigger(i,e,n){let r=this._namespaceLookup[i];r&&r.register(e,n)&&this.totalAnimations++}destroy(i,e){i&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(i);this.namespacesByHostElement.delete(n.hostElement);let r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(e),delete this._namespaceLookup[i]}))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){let e=new Set,n=this.statesByElement.get(i);if(n){for(let r of n.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}}return e}trigger(i,e,n,r){if(or(e)){let o=this._fetchNamespace(i);if(o)return o.trigger(e,n,r),!0}return!1}insertNode(i,e,n,r){if(!or(e))return;let o=e[Et];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(i){let d=this._fetchNamespace(i);d&&d.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,e){e?this.disabledNodes.has(i)||(this.disabledNodes.add(i),pt(i,Qr)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),zi(i,Qr))}removeNode(i,e,n){if(or(e)){let r=i?this._fetchNamespace(i):null;r?r.removeNode(e,n):this.markElementAsRemoved(i,e,!1,n);let o=this.namespacesByHostElement.get(e);o&&o.id!==i&&o.removeNode(e,n)}else this._onRemovalComplete(e,n)}markElementAsRemoved(i,e,n,r,o){this.collectedLeaveElements.push(e),e[Et]={namespaceId:i,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:o}}listen(i,e,n,r,o){return or(e)?this._fetchNamespace(i).listen(e,n,r,o):()=>{}}_buildInstruction(i,e,n,r,o){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,n,r,i.fromState.options,i.toState.options,e,o)}destroyInnerAnimations(i){let e=this.driver.query(i,sr,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(i,Yr,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(i){let e=this.playersByElement.get(i);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(i){let e=this.playersByQueriedElement.get(i);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return fi(this.players).onDone(()=>i());i()})}processLeaveNode(i){var n;let e=i[Et];if(e&&e.setForRemoval){if(i[Et]=Rl,e.namespaceId){this.destroyInnerAnimations(i);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(i)}this._onRemovalComplete(i,e.setForRemoval)}(n=i.classList)!=null&&n.contains(Qr)&&this.markElementAsDisabled(i,!1),this.driver.query(i,Tu,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(i=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let r=this.collectedEnterElements[n];pt(r,Mu)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{e=this._flushAnimations(n,i)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let r=this.collectedLeaveElements[n];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],e.length?fi(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(i){throw Gd(i)}_flushAnimations(i,e){let n=new un,r=[],o=new Map,d=[],m=new Map,p=new Map,f=new Map,_=new Set;this.disabledNodes.forEach(R=>{_.add(R);let B=this.driver.query(R,xu,!0);for(let z=0;z<B.length;z++)_.add(B[z])});let y=this.bodyNode,T=Array.from(this.statesByElement.keys()),P=Sl(T,this.collectedEnterElements),A=new Map,j=0;P.forEach((R,B)=>{let z=Il+j++;A.set(B,z),R.forEach(te=>pt(te,z))});let ee=[],fe=new Set,Ae=new Set;for(let R=0;R<this.collectedLeaveElements.length;R++){let B=this.collectedLeaveElements[R],z=B[Et];z&&z.setForRemoval&&(ee.push(B),fe.add(B),z.hasAnimation?this.driver.query(B,Pu,!0).forEach(te=>fe.add(te)):Ae.add(B))}let Ge=new Map,je=Sl(T,Array.from(fe));je.forEach((R,B)=>{let z=Xr+j++;Ge.set(B,z),R.forEach(te=>pt(te,z))}),i.push(()=>{P.forEach((R,B)=>{let z=A.get(B);R.forEach(te=>zi(te,z))}),je.forEach((R,B)=>{let z=Ge.get(B);R.forEach(te=>zi(te,z))}),ee.forEach(R=>{this.processLeaveNode(R)})});let Oi=[],Ct=[];for(let R=this._namespaceList.length-1;R>=0;R--)this._namespaceList[R].drainQueuedTransitions(e).forEach(z=>{let te=z.player,Ne=z.element;if(Oi.push(te),this.collectedEnterElements.length){let He=Ne[Et];if(He&&He.setForMove){if(He.previousTriggersValues&&He.previousTriggersValues.has(z.triggerName)){let yi=He.previousTriggersValues.get(z.triggerName),lt=this.statesByElement.get(z.element);if(lt&&lt.has(z.triggerName)){let En=lt.get(z.triggerName);En.value=yi,lt.set(z.triggerName,En)}}te.destroy();return}}let xt=!y||!this.driver.containsElement(y,Ne),et=Ge.get(Ne),Xt=A.get(Ne),Ce=this._buildInstruction(z,n,Xt,et,xt);if(Ce.errors&&Ce.errors.length){Ct.push(Ce);return}if(xt){te.onStart(()=>Ai(Ne,Ce.fromStyles)),te.onDestroy(()=>Nt(Ne,Ce.toStyles)),r.push(te);return}if(z.isFallbackTransition){te.onStart(()=>Ai(Ne,Ce.fromStyles)),te.onDestroy(()=>Nt(Ne,Ce.toStyles)),r.push(te);return}let ia=[];Ce.timelines.forEach(He=>{He.stretchStartingKeyframe=!0,this.disabledNodes.has(He.element)||ia.push(He)}),Ce.timelines=ia,n.append(Ne,Ce.timelines);let pd={instruction:Ce,player:te,element:Ne};d.push(pd),Ce.queriedElements.forEach(He=>ot(m,He,[]).push(te)),Ce.preStyleProps.forEach((He,yi)=>{if(He.size){let lt=p.get(yi);lt||p.set(yi,lt=new Set),He.forEach((En,wr)=>lt.add(wr))}}),Ce.postStyleProps.forEach((He,yi)=>{let lt=f.get(yi);lt||f.set(yi,lt=new Set),He.forEach((En,wr)=>lt.add(wr))})});if(Ct.length){let R=[];Ct.forEach(B=>{R.push($d(B.triggerName,B.errors))}),Oi.forEach(B=>B.destroy()),this.reportError(R)}let $e=new Map,St=new Map;d.forEach(R=>{let B=R.element;n.has(B)&&(St.set(B,B),this._beforeAnimationBuild(R.player.namespaceId,R.instruction,$e))}),r.forEach(R=>{let B=R.element;this._getPreviousPlayers(B,!1,R.namespaceId,R.triggerName,null).forEach(te=>{ot($e,B,[]).push(te),te.destroy()})});let Bt=ee.filter(R=>xl(R,p,f)),Vt=new Map;Cl(Vt,this.driver,Ae,f,Dt).forEach(R=>{xl(R,p,f)&&Bt.push(R)});let Xi=new Map;P.forEach((R,B)=>{Cl(Xi,this.driver,new Set(R),p,Kn)}),Bt.forEach(R=>{let B=Vt.get(R),z=Xi.get(R);Vt.set(R,new Map([...(B==null?void 0:B.entries())??[],...(z==null?void 0:z.entries())??[]]))});let Ei=[],ea=[],ta={};d.forEach(R=>{let{element:B,player:z,instruction:te}=R;if(n.has(B)){if(_.has(B)){z.onDestroy(()=>Nt(B,te.toStyles)),z.disabled=!0,z.overrideTotalTime(te.totalTime),r.push(z);return}let Ne=ta;if(St.size>1){let et=B,Xt=[];for(;et=et.parentNode;){let Ce=St.get(et);if(Ce){Ne=Ce;break}Xt.push(et)}Xt.forEach(Ce=>St.set(Ce,Ne))}let xt=this._buildAnimation(z.namespaceId,te,$e,o,Xi,Vt);if(z.setRealPlayer(xt),Ne===ta)Ei.push(z);else{let et=this.playersByElement.get(Ne);et&&et.length&&(z.parentPlayer=fi(et)),r.push(z)}}else Ai(B,te.fromStyles),z.onDestroy(()=>Nt(B,te.toStyles)),ea.push(z),_.has(B)&&r.push(z)}),ea.forEach(R=>{let B=o.get(R.element);if(B&&B.length){let z=fi(B);R.setRealPlayer(z)}}),r.forEach(R=>{R.parentPlayer?R.syncPlayerEvents(R.parentPlayer):R.destroy()});for(let R=0;R<ee.length;R++){let B=ee[R],z=B[Et];if(zi(B,Xr),z&&z.hasAnimation)continue;let te=[];if(m.size){let xt=m.get(B);xt&&xt.length&&te.push(...xt);let et=this.driver.query(B,Yr,!0);for(let Xt=0;Xt<et.length;Xt++){let Ce=m.get(et[Xt]);Ce&&Ce.length&&te.push(...Ce)}}let Ne=te.filter(xt=>!xt.destroyed);Ne.length?Du(this,B,Ne):this.processLeaveNode(B)}return ee.length=0,Ei.forEach(R=>{this.players.push(R),R.onDone(()=>{R.destroy();let B=this.players.indexOf(R);this.players.splice(B,1)}),R.play()}),Ei}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,e,n,r,o){let d=[];if(e){let m=this.playersByQueriedElement.get(i);m&&(d=m)}else{let m=this.playersByElement.get(i);if(m){let p=!o||o==cn;m.forEach(f=>{f.queued||!p&&f.triggerName!=r||d.push(f)})}}return(n||r)&&(d=d.filter(m=>!(n&&n!=m.namespaceId||r&&r!=m.triggerName))),d}_beforeAnimationBuild(i,e,n){let r=e.triggerName,o=e.element,d=e.isRemovalTransition?void 0:i,m=e.isRemovalTransition?void 0:r;for(let p of e.timelines){let f=p.element,_=f!==o,y=ot(n,f,[]);this._getPreviousPlayers(f,_,d,m,e.toState).forEach(P=>{let A=P.getRealPlayer();A.beforeDestroy&&A.beforeDestroy(),P.destroy(),y.push(P)})}Ai(o,e.fromStyles)}_buildAnimation(i,e,n,r,o,d){let m=e.triggerName,p=e.element,f=[],_=new Set,y=new Set,T=e.timelines.map(A=>{let j=A.element;_.add(j);let ee=j[Et];if(ee&&ee.removedBeforeQueried)return new Vi(A.duration,A.delay);let fe=j!==p,Ae=Fu((n.get(j)||Au).map($e=>$e.getRealPlayer())).filter($e=>{let St=$e;return St.element?St.element===j:!1}),Ge=o.get(j),je=d.get(j),Oi=Tl(this._normalizer,A.keyframes,Ge,je),Ct=this._buildPlayer(A,Oi,Ae);if(A.subTimeline&&r&&y.add(j),fe){let $e=new pn(i,m,j);$e.setRealPlayer(Ct),f.push($e)}return Ct});f.forEach(A=>{ot(this.playersByQueriedElement,A.element,[]).push(A),A.onDone(()=>wu(this.playersByQueriedElement,A.element,A))}),_.forEach(A=>pt(A,hl));let P=fi(T);return P.onDestroy(()=>{_.forEach(A=>zi(A,hl)),Nt(p,e.toStyles)}),y.forEach(A=>{ot(r,A,[]).push(P)}),P}_buildPlayer(i,e,n){return e.length>0?this.driver.animate(i.element,e,i.duration,i.delay,i.easing,n):new Vi(i.duration,i.delay)}},pn=class{namespaceId;triggerName;element;_player=new Vi;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(i,e,n){this.namespaceId=i,this.triggerName=e,this.element=n}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>po(i,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){let e=this._player;e.triggerCallback&&i.onStart(()=>e.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,e){ot(this._queuedCallbacks,i,[]).push(e)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){let e=this._player;e.triggerCallback&&e.triggerCallback(i)}};function wu(t,i,e){let n=t.get(i);if(n){if(n.length){let r=n.indexOf(e);n.splice(r,1)}n.length==0&&t.delete(i)}return n}function ku(t){return t??null}function or(t){return t&&t.nodeType===1}function Ou(t){return t=="start"||t=="done"}function bl(t,i){let e=t.style.display;return t.style.display=i??"none",e}function Cl(t,i,e,n,r){let o=[];e.forEach(p=>o.push(bl(p)));let d=[];n.forEach((p,f)=>{let _=new Map;p.forEach(y=>{let T=i.computeStyle(f,y,r);_.set(y,T),(!T||T.length==0)&&(f[Et]=Iu,d.push(f))}),t.set(f,_)});let m=0;return e.forEach(p=>bl(p,o[m++])),d}function Sl(t,i){let e=new Map;if(t.forEach(m=>e.set(m,[])),i.length==0)return e;let n=1,r=new Set(i),o=new Map;function d(m){if(!m)return n;let p=o.get(m);if(p)return p;let f=m.parentNode;return e.has(f)?p=f:r.has(f)?p=n:p=d(f),o.set(m,p),p}return i.forEach(m=>{let p=d(m);p!==n&&e.get(p).push(m)}),e}function pt(t,i){var e;(e=t.classList)==null||e.add(i)}function zi(t,i){var e;(e=t.classList)==null||e.remove(i)}function Du(t,i,e){fi(e).onDone(()=>t.processLeaveNode(i))}function Fu(t){let i=[];return Nl(t,i),i}function Nl(t,i){for(let e=0;e<t.length;e++){let n=t[e];n instanceof Hr?Nl(n.players,i):i.push(n)}}function Ru(t,i){let e=Object.keys(t),n=Object.keys(i);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let o=e[r];if(!i.hasOwnProperty(o)||t[o]!==i[o])return!1}return!0}function xl(t,i,e){let n=e.get(t);if(!n)return!1;let r=i.get(t);return r?n.forEach(o=>r.add(o)):i.set(t,n),e.delete(t),!0}var qi=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(i,e)=>{};constructor(i,e,n){this._driver=e,this._normalizer=n,this._transitionEngine=new uo(i.body,e,n),this._timelineEngine=new lo(i.body,e,n),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(i,e,n,r,o){let d=i+"-"+r,m=this._triggerCache[d];if(!m){let p=[],f=[],_=Ol(this._driver,o,p,f);if(p.length)throw Rd(r,p);m=bu(r,_,this._normalizer),this._triggerCache[d]=m}this._transitionEngine.registerTrigger(e,r,m)}register(i,e){this._transitionEngine.register(i,e)}destroy(i,e){this._transitionEngine.destroy(i,e)}onInsert(i,e,n,r){this._transitionEngine.insertNode(i,e,n,r)}onRemove(i,e,n){this._transitionEngine.removeNode(i,e,n)}disableAnimations(i,e){this._transitionEngine.markElementAsDisabled(i,e)}process(i,e,n,r){if(n.charAt(0)=="@"){let[o,d]=ml(n),m=r;this._timelineEngine.command(o,e,d,m)}else this._transitionEngine.trigger(i,e,n,r)}listen(i,e,n,r,o){if(n.charAt(0)=="@"){let[d,m]=ml(n);return this._timelineEngine.listen(d,e,m,o)}return this._transitionEngine.listen(i,e,n,r,o)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(i){this._transitionEngine.afterFlushAnimationsDone(i)}};function Nu(t,i){let e=null,n=null;return Array.isArray(i)&&i.length?(e=Jr(i[0]),i.length>1&&(n=Jr(i[i.length-1]))):i instanceof Map&&(e=Jr(i)),e||n?new Uu(t,e,n):null}var Uu=(()=>{class t{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r;let o=t.initialStylesByElement.get(e);o||t.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Nt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nt(this._element,this._initialStyles),this._endStyles&&(Nt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Ai(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ai(this._element,this._endStyles),this._endStyles=null),Nt(this._element,this._initialStyles),this._state=3)}}return t})();function Jr(t){let i=null;return t.forEach((e,n)=>{Lu(n)&&(i=i||new Map,i.set(n,e))}),i}function Lu(t){return t==="display"||t==="position"}var hr=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(i,e,n,r){this.element=i,this.keyframes=e,this.options=n,this._specialStyles=r,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){let e=[];return i.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(i,e,n){return i.animate(this._convertKeyframesToObject(e),n)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{r!=="offset"&&i.set(r,this._finished?n:_o(this.element,r))}),this.currentSnapshot=i}triggerCallback(i){let e=i==="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},fr=class{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}containsElement(i,e){return Ml(i,e)}getParentElement(i){return fo(i)}query(i,e,n){return Pl(i,e,n)}computeStyle(i,e,n){return _o(i,e)}animate(i,e,n,r,o,d=[]){let m=r==0?"both":"forwards",p={duration:n,delay:r,fill:m};o&&(p.easing=o);let f=new Map,_=d.filter(P=>P instanceof hr);nu(n,r)&&_.forEach(P=>{P.currentSnapshot.forEach((A,j)=>f.set(j,A))});let y=eu(e).map(P=>new Map(P));y=ru(i,y,f);let T=Nu(i,y);return new hr(i,y,p,T)}};var ar="@",Ul="@.disabled",gr=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(i,e,n,r){this.namespaceId=i,this.delegate=e,this.engine=n,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(i){var e,n;(n=(e=this.delegate).destroyNode)==null||n.call(e,i)}destroy(){var i;this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),(i=this._onDestroy)==null||i.call(this)}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,e){this.delegate.appendChild(i,e),this.engine.onInsert(this.namespaceId,e,i,!1)}insertBefore(i,e,n,r=!0){this.delegate.insertBefore(i,e,n),this.engine.onInsert(this.namespaceId,e,i,r)}removeChild(i,e,n){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,n,r){this.delegate.setAttribute(i,e,n,r)}removeAttribute(i,e,n){this.delegate.removeAttribute(i,e,n)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,n,r){this.delegate.setStyle(i,e,n,r)}removeStyle(i,e,n){this.delegate.removeStyle(i,e,n)}setProperty(i,e,n){e.charAt(0)==ar&&e==Ul?this.disableAnimations(i,!!n):this.delegate.setProperty(i,e,n)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,n,r){return this.delegate.listen(i,e,n,r)}disableAnimations(i,e){this.engine.disableAnimations(i,e)}},mo=class extends gr{factory;constructor(i,e,n,r,o){super(e,n,r,o),this.factory=i,this.namespaceId=e}setProperty(i,e,n){e.charAt(0)==ar?e.charAt(1)=="."&&e==Ul?(n=n===void 0?!0:!!n,this.disableAnimations(i,n)):this.engine.process(this.namespaceId,i,e.slice(1),n):this.delegate.setProperty(i,e,n)}listen(i,e,n,r){if(e.charAt(0)==ar){let o=Bu(i),d=e.slice(1),m="";return d.charAt(0)!=ar&&([d,m]=Vu(d)),this.engine.listen(this.namespaceId,o,d,m,p=>{let f=p._data||-1;this.factory.scheduleListenerCallback(f,n,p)})}return this.delegate.listen(i,e,n,r)}};function Bu(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function Vu(t){let i=t.indexOf("."),e=t.substring(0,i),n=t.slice(i+1);return[e,n]}var vr=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(i,e,n){this.delegate=i,this.engine=e,this._zone=n,e.onRemovalComplete=(r,o)=>{o==null||o.removeChild(null,r)}}createRenderer(i,e){var f;let n="",r=this.delegate.createRenderer(i,e);if(!i||!((f=e==null?void 0:e.data)!=null&&f.animation)){let _=this._rendererCache,y=_.get(r);if(!y){let T=()=>_.delete(r);y=new gr(n,r,this.engine,T),_.set(r,y)}return y}let o=e.id,d=e.id+"-"+this._currentId;this._currentId++,this.engine.register(d,i);let m=_=>{Array.isArray(_)?_.forEach(m):this.engine.registerTrigger(o,d,i,_.name,_)};return e.data.animation.forEach(m),new mo(this,d,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(i,e,n){if(i>=0&&i<this._microtaskId){this._zone.run(()=>e(n));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[d,m]=o;d(m)}),this._animationCallbacksBuffer=[]})}),r.push([e,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(i){var e,n;this.engine.flush(),(n=(e=this.delegate).componentReplaced)==null||n.call(e,i)}};var zu=(()=>{class t extends qi{constructor(e,n,r){super(e,n,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||t)(X($t),X(Ii),X(wi))};static \u0275prov=he({token:t,factory:t.\u0275fac})}return t})();function qu(){return new cr}function Hu(t,i,e){return new vr(t,i,e)}var Bl=[{provide:wi,useFactory:qu},{provide:qi,useClass:zu},{provide:fa,useFactory:Hu,deps:[Aa,qi,Ci]}],Ll=[{provide:Ii,useFactory:()=>new fr},{provide:Rr,useValue:"BrowserAnimations"},...Bl],Gu=[{provide:Ii,useClass:go},{provide:Rr,useValue:"NoopAnimations"},...Bl],Vl=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Gu:Ll}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=xe({type:t});static \u0275inj=Se({providers:Ll,imports:[wn]})}return t})();var $u=()=>{let t=I(M),i=I(Q),e=t.isProfesseur();return e||i.navigate(["/Accueil"]),e},jl=(t,i)=>$u();var Qu=()=>{let t=I(M),i=I(Q),e=t.isEntreprise();return e||i.navigate(["/Accueil"]),e},zl=(t,i)=>Qu();var Ju=()=>{let t=I(M),i=I(Q),e=t.isFouE();return e||i.navigate(["/Accueil"]),e},ql=(t,i)=>Ju();var Yu=()=>{let t=I(M),i=I(Q),e=t.isFamille();return e||i.navigate(["/Accueil"]),e},Hl=(t,i)=>Yu();var em=()=>{let t=I(M),i=I(Q),e=t.isPersonnel();return e||i.navigate(["/Accueil"]),e},Gl=(t,i)=>em();var im=(t,i,e,n=!1)=>{let r=I(M),o=I(Q),d=I(oi),m;if(!e&&i.length===1)m=V.isModuleEnabled(r.currentUser,i[0]);else{let p=d.snapshot.entries;m=V.canAccessPath(p,i,t,n)}if(!m)if(r.isLoggedIn())o.navigate(["/Accueil"]);else{let p={queryParams:{cameFrom:t}};o.navigate(["/login"],p).catch(()=>console.error("checkLogin navigate to /login"))}return m},W=(t,i)=>{let e=t.data&&Array.isArray(t.data.accessModules)?t.data.accessModules:[],n=t.data&&t.data.checkByPath?t.data.checkByPath:!1,r=t.data&&t.data.hasRedirectModuleRoute?t.data.hasRedirectModuleRoute:!1,o=i.reduce((d,m)=>`${d}/${m.path}`,"");return im(o,e,n,r)};var rm=(t,i)=>i.isFouE()&&V.isModuleEnabled(i.currentUser,b.CARNET_CORRESPONDANCE,t)?!0:i.isProfOuPersonnel()&&V.isModuleEnabled(i.currentUser,b.CARNET_CORRESPONDANCE),hn=(t,i)=>{let e=0,n=I(M),r=we.isNotEmptyString(t.path)?t.path.split("/"):[],o=r.indexOf(":typeUser");if(o!==-1&&i.length>o&&i[o].path===O.ELEVE&&!n.isEleve()){let m=r.indexOf(":idUser");m!==-1&&i.length>m&&(e=Number.parseInt(i[m].path,10))}return rm(e,n)};var am=t=>{let i=I(M),e=I(ri);return i.isProfOuPersonnel()?i.isPersonnel()?Le(!0):V.getModuleParametre(b.CARNET_NOTES,"seulPPVoieToutesLesNotes",i.currentUser)==="1"?e.getClasseGroupeById(t,on.CLASSE).pipe(Ke(r=>r.isPP)):Le(!0):Le(!0)},$l=(t,i)=>{let n=(we.isNotEmptyString(t.path)?t.path.split("/"):[]).indexOf(":idEntity");if(n!==-1&&i.length>n){let r=Number.parseInt(i[n].path,10);if(r>0)return am(r)}return!1};var Kl=t=>(I(Ft).logout(),!0);var Ql=(()=>{let i=class i extends Un{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0?this.title.setTitle(`${r} - EcoleDirecte`):this.title.setTitle("EcoleDirecte")}};i.\u0275fac=function(r){return new(r||i)(X(kn))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();var Wl=na(fd());var cm=t=>({"has-error":t}),dm=t=>({"alert alert-danger":t});function um(t,i){if(t&1&&(a(0,"div",11),C(1,"base64"),C(2,"ariaConvertNewline"),C(3,"filterHtml"),u(4,"detail"),s()),t&2){let e=h();c("innerHTML",x(3,6,x(2,4,me(1,1,e.sondageBack.detail,"decode"))),ue)}}function mm(t,i){if(t&1&&(a(0,"h3",18),u(1),C(2,"displayNom"),s()),t&2){let e=h().$implicit,n=h();l(),k(Pn(2,1,n.getSondageEleve(e.id),!1,!1))}}function pm(t,i){if(t&1&&(a(0,"span",21),u(1),s()),t&2){let e=h(3);l(),H("vous devez choisir ",e.sondageBack.nbChoix," option(s) !")}}function hm(t,i){t&1&&(a(0,"span",21),u(1,"vous devez choisir une option !"),s())}function fm(t,i){if(t&1&&(a(0,"div",19)(1,"strong"),u(2,"Attention :"),s(),E(3,pm,2,1,"span",20)(4,hm,2,0,"span",20),s()),t&2){let e=h().$implicit,n=h();c("ngClass",N(3,dm,!n.elevehaveAnswered(e))),l(3),c("ngIf",n.sondageBack.parcours.length===0),l(),c("ngIf",n.sondageBack.parcours.length>0)}}function gm(t,i){if(t&1){let e=L();a(0,"div",24)(1,"input",25),S("ngModelChange",function(){let r=D(e).$implicit,o=h(2).$implicit,d=h();return F(d.toggleSelectedReponse(o,r.codeMatiere))}),s(),a(2,"label",26),u(3),s()()}if(t&2){let e=i.$implicit,n=h(2).$implicit;l(),nt("name","specialite_",n.id,"_",e.codeMatiere,""),nt("id","specialite_",n.id,"_",e.codeMatiere,""),c("ngModel",n.specialites.indexOf(e.codeMatiere)>-1),l(),nt("for","specialite_",n.id,"_",e.codeMatiere,""),l(),k(e.libelle)}}function vm(t,i){if(t&1&&(a(0,"div",22),E(1,gm,4,11,"div",23),C(2,"trackByProperty"),s()),t&2){let e=h(2);l(),c("ngForOf",e.sondageBack.specialites)("ngForTrackBy",x(2,2,"$index"))}}function _m(t,i){if(t&1&&(a(0,"li"),u(1),s()),t&2){let e=i.$implicit;l(),k(e.libelle)}}function Em(t,i){if(t&1){let e=L();a(0,"div",24)(1,"input",27),S("change",function(){let r=D(e).$implicit,o=h(2).$implicit,d=h();return F(d.toggleSelectedParcours(o,r))}),s(),a(2,"label",26)(3,"ul"),E(4,_m,2,1,"li",28),C(5,"trackByProperty"),s()()()}if(t&2){let e=i.$implicit,n=i.index,r=h(2).$implicit,o=h();l(),nt("name","parcours_",r.id,"_",n,""),nt("id","parcours_",r.id,"_",n,""),c("checked",o.isParcoursCochee(r,e)),l(),nt("for","parcours_",r.id,"_",n,""),l(2),c("ngForOf",e)("ngForTrackBy",x(5,12,"codeMatiere"))}}function ym(t,i){if(t&1&&(a(0,"div",22),E(1,Em,6,14,"div",23),C(2,"trackByProperty"),s()),t&2){let e=h(2);l(),c("ngForOf",e.sondageBack.parcours)("ngForTrackBy",x(2,2,"$index"))}}function bm(t,i){if(t&1&&(a(0,"div",12)(1,"div",13),E(2,mm,3,5,"h3",14)(3,fm,5,5,"div",15),a(4,"div",16),E(5,vm,3,4,"div",17)(6,ym,3,4,"div",17),s()()()),t&2){let e=i.$implicit,n=h();l(),it("id","eleve_",e.id,""),c("ngClass",N(8,cm,!n.elevehaveAnswered(e)))("combien",n.sondageBack.nbChoix),l(),c("ngIf",n.authStore.isFamille()),l(),c("ngIf",!n.elevehaveAnswered(e)),l(2),c("ngIf",n.sondageBack.specialites.length>0),l(),c("ngIf",n.sondageBack.parcours.length>0)}}var _r=(()=>{let i=class i{constructor(n,r,o,d,m,p){this.authStore=n,this.modalRef=r,this.uiService=o,this.loaderService=d,this.rdtService=m,this.modalService=p,this.enCours=!1}ngOnInit(){this.sondageBack=new ps(this.sondage)}save(){if(this.enCours||!this.allElevesHaveAnswered())return;if(this.enCours=!0,!!this.sondageBack.eleves.some(r=>!r.specialites||r.specialites.length!==this.sondageBack.nbChoix)){this.uiService.notifyEvent(Y.genericError,"Enregistrement impossible. V\xE9rifiez le nombre d'options coch\xE9es","Sondage"),this.enCours=!1;return}this.showConfirmationModal()}showConfirmationModal(){let n={title:"Valider vos choix",message:"<p>\xCAtes-vous s\xFBr de vouloir envoyer <strong>d\xE9finitivement</strong> vos choix <strong> ?</p>",btnConfirm:"Oui",btnCancel:"Non"},r={id:this.modalService.getModalsCount()+1,initialState:n,ignoreBackdropClick:!0};this.modalService.show(Ti,r),this.modalService.onHide.pipe(ke(1),tt(o=>o===Qe.validation),We(o=>{this.loader=this.loaderService.show(this);let d=this.sondageBack.eleves.map(m=>this.rdtService.updateSondage(this.sondageBack.id,m));return ct(d)}),q(()=>{this.uiService.notifyEvent(Y.genericSuccess,"Vos choix ont bien \xE9t\xE9 envoy\xE9s","Sondage"),this.close()}),ge(()=>{this.enCours=!1,this.loaderService.hide(this)}),ie(o=>(this.uiService.notifyEvent(Y.genericError,"Une erreur s'est produite lors de l'envoi de vos choix","Sondage"),ze))).subscribe()}getSondageEleve(n){let r=this.authStore.currentUser;return this.authStore.isFamille()&&(r=r.profile.eleves.find(o=>o.id===n)),r}toggleSelectedReponse(n,r){let o=n.specialites.indexOf(r);o!==-1?n.specialites.splice(o,1):n.specialites.push(r)}toggleSelectedParcours(n,r){n.specialites=r.map(o=>o.codeMatiere)}isParcoursCochee(n,r){let o=r.map(d=>d.codeMatiere);return(0,Wl.default)(o,n.specialites)}close(){this.modalRef.hide()}allElevesHaveAnswered(){return this.sondageBack.eleves.every(n=>n.specialites.length===this.sondageBack.nbChoix)}elevehaveAnswered(n){let r=this.sondageBack.eleves.find(o=>o.id===n.id);return(r==null?void 0:r.specialites.length)===this.sondageBack.nbChoix}};i.\u0275fac=function(r){return new(r||i)(v(M),v(ui),v(ye),v(Re),v(Bi),v(Fe))},i.\u0275cmp=w({type:i,selectors:[["ed-modal-rdt-sondage"]],inputs:{sondage:"sondage"},standalone:!1,decls:15,vars:8,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Fermer cette fen\xEAtre",1,"btn-close","d-print-none",3,"click"],["name","formSondageEleve","id","formSondageEleve","method","post",3,"ngSubmit"],[1,"modal-body",3,"cgBusy"],["class","alert alert-info",3,"innerHTML",4,"ngIf"],["class","ed-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"modal-footer"],[1,"w-100"],["type","button",1,"btn","btn-danger","float-start",3,"click"],["type","submit",1,"btn","btn-primary","float-end",3,"disabled"],[1,"alert","alert-info",3,"innerHTML"],[1,"ed-card"],["edCheckboxEqual","",1,"p-3",3,"id","ngClass","combien"],["class","mt-0",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"row"],["class","col-lg-8",4,"ngIf"],[1,"mt-0"],[3,"ngClass"],["class","margin-whitespace",4,"ngIf"],[1,"margin-whitespace"],[1,"col-lg-8"],["class","form-check",4,"ngFor","ngForOf","ngForTrackBy"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModelChange","name","id","ngModel"],[1,"form-check-label","fw-normal",3,"for"],["type","radio",1,"form-check-input",3,"change","name","id","checked"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"h3",1),u(2),s(),a(3,"button",2),S("click",function(){return o.close()}),s()(),a(4,"form",3),S("ngSubmit",function(){return o.save()}),a(5,"div",4),E(6,um,5,8,"div",5)(7,bm,7,10,"div",6),C(8,"trackByProperty"),s(),a(9,"div",7)(10,"div",8)(11,"button",9),S("click",function(){return o.close()}),u(12,"Annuler"),s(),a(13,"button",10),u(14,"Sauvegarder"),s()()()()),r&2&&(l(2),k(o.sondageBack.libelle),l(3),c("cgBusy",o.loader),l(),c("ngIf",o.sondageBack.detail!==""),l(),c("ngForOf",o.sondageBack.eleves)("ngForTrackBy",x(8,6,"$index")),l(6),c("disabled",!o.allElevesHaveAnswered()))},dependencies:[oe,Ee,G,ut,On,It,dt,Zt,wt,se,As,Li,ii,Ve,be,Ze],styles:["#formSondageEleve[_ngcontent-%COMP%]   .ed-card[_ngcontent-%COMP%]{margin-top:20px}"]});let t=i;return t})();var Jl=t=>({active:t}),Xl=()=>["fas","check"];function Cm(t,i){t&1&&g(0,"fa-icon",7),t&2&&c("icon",K(1,Xl))}function Sm(t,i){t&1&&g(0,"fa-icon",7),t&2&&c("icon",K(1,Xl))}var vi=function(t){return t.OJD="Aujourd'hui",t.Demain="Demain",t}(vi||{}),Er=(()=>{let i=class i{constructor(){this.ongletSelectedEvent=new bi,this.typeTabAccueilEDT=vi}setOnglet(n){this.ongletSelectedEvent.emit(n)}};i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=w({type:i,selectors:[["ed-tab-edt"]],inputs:{ongletSelected:"ongletSelected"},outputs:{ongletSelectedEvent:"ongletSelectedEvent"},standalone:!1,decls:10,vars:12,consts:[[1,"form-check","form-check-inline","radio-custom-ed","d-block"],[1,"text-center"],["id","btnRadioEDTA","name","ongletEDT","type","radio",1,"form-check-input",3,"change","checked","value"],["for","btnRadioEDTA",1,"form-check-label","fw-normal","btn","btn-secondary",3,"ngClass"],["class","margin-whitespace i-small","aria-hidden","true",3,"icon",4,"ngIf"],["id","btnRadioEDTD","name","ongletEDT","type","radio",1,"form-check-input",3,"change","checked","value"],["for","btnRadioEDTD",1,"form-check-label","fw-normal","btn","btn-secondary",3,"ngClass"],["aria-hidden","true",1,"margin-whitespace","i-small",3,"icon"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"div",1)(2,"input",2),S("change",function(){return o.setOnglet(o.typeTabAccueilEDT.OJD)}),s(),a(3,"label",3),u(4," Aujourd'hui "),E(5,Cm,1,2,"fa-icon",4),s(),a(6,"input",5),S("change",function(){return o.setOnglet(o.typeTabAccueilEDT.Demain)}),s(),a(7,"label",6),u(8," Demain "),E(9,Sm,1,2,"fa-icon",4),s()()()),r&2&&(l(2),c("checked",o.ongletSelected===o.typeTabAccueilEDT.OJD)("value",o.typeTabAccueilEDT.OJD),l(),c("ngClass",N(8,Jl,o.ongletSelected===o.typeTabAccueilEDT.OJD)),l(2),c("ngIf",o.ongletSelected===o.typeTabAccueilEDT.OJD),l(),c("checked",o.ongletSelected===o.typeTabAccueilEDT.Demain)("value",o.typeTabAccueilEDT.Demain),l(),c("ngClass",N(10,Jl,o.ongletSelected===o.typeTabAccueilEDT.Demain)),l(2),c("ngIf",o.ongletSelected===o.typeTabAccueilEDT.Demain))},dependencies:[oe,G,pe],encapsulation:2,changeDetection:0});let t=i;return t})();var xm=()=>["date|desc"],Tm=t=>({"message-item-new":t}),Zl=t=>[t],Mm=t=>({auxiliaryModal:t}),Pm=t=>({outlets:t}),Am=t=>["",t],Im=()=>["fas","magnifying-glass"];function wm(t,i){if(t&1&&(a(0,"a",20),u(1),s()),t&2){let e=h().$implicit;c("routerLink",N(10,Am,N(8,Pm,N(6,Mm,N(4,Zl,e.href.route)))))("skipLocationChange",!0)("queryParams",e.href.queryParams),l(),H(" ",e.titre," ")}}function km(t,i){if(t&1&&(a(0,"a",21),u(1),s()),t&2){let e=h().$implicit;c("routerLink",N(3,Zl,e.href.route))("queryParams",e.href.queryParams),l(),k(e.titre)}}function Om(t,i){if(t&1&&(a(0,"span"),u(1),s()),t&2){let e=h().$implicit;l(),k(" "+e.soustitre)}}function Dm(t,i){if(t&1&&(a(0,"span",17),u(1),C(2,"edDate"),s()),t&2){let e=h().$implicit;l(),Ea(""," ","",me(2,2,e.date,"shortTime"),"")}}function Fm(t,i){if(t&1&&(le(0),g(1,"div",22),C(2,"ariaConvertNewline"),C(3,"filterHtml"),ce()),t&2){let e=h().$implicit,n=h(2);l(),c("innerHTML",x(3,3,x(2,1,n.display(e))),ue)}}function Rm(t,i){if(t&1&&(le(0),g(1,"div",22),C(2,"filterHtml"),g(3,"i",23),C(4,"filterHtml"),ce()),t&2){let e=h().$implicit,n=h(2);l(),c("innerHTML",x(2,2,n.displayReu(e,"first")),ue),l(2),c("innerHTML",x(4,4,n.displayReu(e,"second")),ue)}}function Nm(t,i){if(t&1&&(a(0,"button",24),g(1,"fa-icon",25),u(2," Visualiser "),s()),t&2){let e=h().$implicit;c("otherTypeDL",!0)("file",e.fileFormated)("typeFichier",e.soustitre),l(),c("icon",K(4,Im))}}function Um(t,i){if(t&1&&(a(0,"div",3)(1,"div",4)(2,"div"),g(3,"i",5),s()(),a(4,"div",6)(5,"div",7)(6,"div",8)(7,"h3",9),E(8,wm,2,12,"a",10)(9,km,2,5,"a",11)(10,Om,2,1,"span",12),s(),a(11,"div",13)(12,"div",14),g(13,"span",15),a(14,"span",16)(15,"span",17),u(16),C(17,"edDate"),s(),E(18,Dm,3,5,"span",18),s()()()()(),E(19,Fm,4,5,"ng-container",12)(20,Rm,5,6,"ng-container",12)(21,Nm,3,5,"button",19),s()()),t&2){let e=i.$implicit,n=h(2);c("ngClass",N(13,Tm,e.date>=n.authStore.currentUser.lastConnexion)),l(3),c("ngClass",e.icon+" "+e.bgFor),l(5),c("ngIf",e.typeElement==="Messagerie"),l(),c("ngIf",e.typeElement!=="Messagerie"),l(),c("ngIf",e.soustitre),l(6),k(me(17,10,e.date,"EEEE d MMMM")),l(2),c("ngIf",e.afficherHeure),l(),c("ngIf",e.typeElement!=="ReunionPPFamille"),l(),c("ngIf",e.typeElement==="ReunionPPFamille"),l(),c("ngIf",e.typeElement==="Document")}}function Lm(t,i){if(t&1&&(a(0,"div",1),E(1,Um,22,15,"div",2),C(2,"orderBy"),C(3,"trackByProperty"),s()),t&2){let e=h();l(),c("ngForOf",me(2,2,e.timelineEvents,K(7,xm)))("ngForTrackBy",x(3,5,"$index"))}}var Gi=(()=>{let i=class i{constructor(n){this.authStore=n,this.timelineEvents=[],this.isActuHidden=!1,this.isNoteEnabled=!1,this.isVSEnabled=!1}ngOnInit(){this.authStore.isFamille()?(this.isNoteEnabled=V.isModuleEnabled(this.authStore.currentUser,b.NOTES,this.idUser),this.isVSEnabled=V.isModuleEnabled(this.authStore.currentUser,b.VIE_SCOLAIRE,this.idUser)):(this.isNoteEnabled=V.isModuleEnabled(this.authStore.currentUser,b.NOTES),this.isVSEnabled=V.isModuleEnabled(this.authStore.currentUser,b.VIE_SCOLAIRE)),this.timelineEvents=this.timelineEvents.filter(n=>this.filterTimeline(n))}filterTimeline(n){return n.typeElement==="VieScolaire"&&!this.isVSEnabled||n.typeElement==="Note"&&!this.isNoteEnabled?!1:!(n.typeElement.startsWith("ReunionPP")&&vt.isDatePassee(n.date))}display(n){if(Object.isExists(n.description)){let r="";return r=n.description.split(" / ").join("<br>"),r}else return""}displayReu(n,r){if(n.typeElement==="ReunionPPFamille"){let o=n.description.split(" / ");return r==="first"?o[0]:o[1]}else return""}};i.\u0275fac=function(r){return new(r||i)(v(M))},i.\u0275cmp=w({type:i,selectors:[["ed-timeline"]],inputs:{idUser:"idUser",timelineEvents:"timelineEvents",isActuHidden:"isActuHidden"},standalone:!1,decls:1,vars:1,consts:[["class","qa-message-list","id","wallmessages","role","list",4,"ngIf"],["id","wallmessages","role","list",1,"qa-message-list"],["class","message-item","role","listitem",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["role","listitem",1,"message-item",3,"ngClass"],[1,"message-overlay"],[1,"fa-2x",3,"ngClass"],[1,"message-inner"],[1,"message-head","clearfix"],[1,"user-detail"],[1,"handle","m-0"],["class","focus-blue",3,"routerLink","skipLocationChange","queryParams",4,"ngIf"],[3,"routerLink","queryParams",4,"ngIf"],[4,"ngIf"],[1,"post-meta"],[1,"asker-meta"],[1,"qa-message-what"],[1,"qa-message-when"],[1,"qa-message-when-data"],["class","qa-message-when-data",4,"ngIf"],["edLightbox","","type","button","class","btn btn-link",3,"otherTypeDL","file","typeFichier",4,"ngIf"],[1,"focus-blue",3,"routerLink","skipLocationChange","queryParams"],[3,"routerLink","queryParams"],[1,"qa-message-content",3,"innerHTML"],[1,"form-text",3,"innerHTML"],["edLightbox","","type","button",1,"btn","btn-link",3,"otherTypeDL","file","typeFichier"],["aria-hidden","true",1,"i-small",3,"icon"]],template:function(r,o){r&1&&E(0,Lm,4,8,"div",0),r&2&&c("ngIf",o.timelineEvents&&o.timelineEvents.length>0&&!o.isActuHidden)},dependencies:[oe,Ee,G,ae,pe,Bs,ja,Bn,Ve,be,Ze],styles:["#wallmessages[_ngcontent-%COMP%]{margin-left:20px;padding:1px 0 0;border-left:2px solid #e2e7ed}#wallmessages[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]{position:relative;margin:40px 0 0;padding:0 0 0 30px}#wallmessages[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:-20px;width:40px;height:40px;background:#fff;border:2px solid #e2e7ed;border-radius:100%;text-align:center;line-height:35px}#wallmessages[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{font-size:13px;font-weight:700;text-transform:uppercase;line-height:1.2}#wallmessages[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .qa-message-when-data[_ngcontent-%COMP%]{font-size:11px;font-weight:700;font-style:italic}#wallmessages[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .qa-message-content[_ngcontent-%COMP%]{font-size:13px}#wallmessages[_ngcontent-%COMP%]   .message-item.message-item-new[_ngcontent-%COMP%]   .message-overlay[_ngcontent-%COMP%]{border-color:var(--light-primary-color)}"]});let t=i;return t})();var ec=t=>({active:t}),tc=()=>["fas","check"],Bm=t=>[t];function Vm(t,i){t&1&&g(0,"fa-icon",12),t&2&&c("icon",K(1,tc))}function jm(t,i){t&1&&g(0,"fa-icon",12),t&2&&c("icon",K(1,tc))}function zm(t,i){if(t&1&&(a(0,"span",13),u(1),s()),t&2){let e=h();l(),k(+e.nbAgendaEvenements)}}function qm(t,i){if(t&1&&(a(0,"div",14)(1,"a",15),u(2,"Tout l'agenda"),s(),g(3,"ed-agenda-evenements",16),s()),t&2){let e=h();l(),c("routerLink",N(6,Bm,"/"+e.typeUser+"/"+e.idUser+"/Agenda")),l(2),c("displayTargets",!1)("droitsAgenda",e.agendaConfig)("events",e.agendaEvents)("idEntity",e.idUser)("typeEntity",e.typeUser)}}function Hm(t,i){t&1&&(a(0,"div",17)(1,"h3",18),u(2,"Aucun \xE9v\xE9nement pour votre \xE9tablissement"),s()())}function Gm(t,i){if(t&1&&g(0,"ed-agenda-evenements",16),t&2){let e=h(2).ngIf,n=h();c("displayTargets",!1)("droitsAgenda",n.agendaConfig)("events",e)("idEntity",n.idUser)("typeEntity",n.typeUser)}}function $m(t,i){if(t&1&&(a(0,"div",14),E(1,Gm,1,5,"ed-agenda-evenements",19),s()),t&2){let e=h().ngIf;l(),c("ngIf",(e==null?null:e.length)>0)}}function Km(t,i){t&1&&(a(0,"div",17)(1,"h3",18),u(2,"Aucun \xE9v\xE9nement pour les espaces de travail"),s()())}function Qm(t,i){if(t&1&&(a(0,"div"),E(1,$m,2,1,"div",9)(2,Km,3,0,"div",10),s()),t&2){let e=i.ngIf;l(),c("ngIf",(e==null?null:e.length)>0),l(),c("ngIf",(e==null?null:e.length)===0)}}var $i=class $i{constructor(i,e,n){this.authStore=i,this.espaceDeTravailService=e,this.loaderService=n,this.typeUser=this.authStore.currentUser.typeCompte,this.idUser=this.authStore.currentUser.id,this.agendaConfig={CAN_CREATE:!1,CAN_UPDATE:!1,CAN_DELETE:!1},this.typeOngletTabAgenda={GENERAL:"G",ESPACE_TRAVAIL:"W"},this.ongletSelected=this.typeOngletTabAgenda.GENERAL,Object.isExists(this.nbAgendaEvenements)||(this.nbAgendaEvenements=+V.getModuleParametre(b.CLOUD,"nbBadgeAgendaEvenements",this.authStore.currentUser))}ngOnInit(){this.listeEvenementsW$=this.espaceDeTravailService.listeAgendaOuPostItsEspacesTravail("agenda").pipe(Ke(i=>Array.isArray(i)?i.map(e=>new Ot(e)):void 0),ge(()=>this.loaderService.hide(this)))}showAgendaW(){this.loader=this.loaderService.show(this),this.nbAgendaEvenements=0}setOnglet(i){this.ongletSelected=i}};$i.\u0275fac=function(e){return new(e||$i)(v(M),v(us),v(Re))},$i.\u0275cmp=w({type:$i,selectors:[["ed-tab-agenda"]],inputs:{agendaEvents:"agendaEvents"},standalone:!1,decls:16,vars:18,consts:[[1,"mt-4","form-check","form-check-inline","radio-custom-ed","d-block",3,"cgBusy"],[1,"text-center"],["id","btnRadioAgendaGen","name","ongletAgenda","type","radio","value","G",1,"form-check-input",3,"change","checked"],["for","btnRadioAgendaGen",1,"form-check-label","fw-normal","btn","btn-secondary",3,"ngClass"],["class","margin-whitespace i-small","aria-hidden","true",3,"icon",4,"ngIf"],["id","btnRadioaAgendaEspaceT","name","ongletAgenda","type","radio","value","W",1,"form-check-input",3,"change","checked"],["for","btnRadioaAgendaEspaceT",1,"form-check-label","fw-normal","btn","btn-secondary",3,"ngClass"],["class","badge alert-danger margin-whitespace",4,"ngIf"],[3,"hidden"],["class","encart-agenda mt-4",4,"ngIf"],["class","jumbotron",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",1,"margin-whitespace","i-small",3,"icon"],[1,"badge","alert-danger","margin-whitespace"],[1,"encart-agenda","mt-4"],["href","",1,"mb-4","ms-1",3,"routerLink"],[3,"displayTargets","droitsAgenda","espaceTravail","events","idEntity","selectedTargets","typeEntity"],[1,"jumbotron"],[1,"default"],[3,"displayTargets","droitsAgenda","espaceTravail","events","idEntity","selectedTargets","typeEntity",4,"ngIf"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"input",2),S("change",function(){return n.setOnglet(n.typeOngletTabAgenda.GENERAL)}),s(),a(3,"label",3),u(4," Agenda \xE9tablissement "),E(5,Vm,1,2,"fa-icon",4),s(),a(6,"input",5),S("change",function(){return n.setOnglet(n.typeOngletTabAgenda.ESPACE_TRAVAIL),n.showAgendaW()}),s(),a(7,"label",6),u(8," Agenda de vos espaces de travail "),E(9,jm,1,2,"fa-icon",4)(10,zm,2,1,"span",7),s()(),a(11,"div",8),E(12,qm,4,8,"div",9)(13,Hm,3,0,"div",10),s(),E(14,Qm,3,2,"div",11),C(15,"async"),s()),e&2&&(c("cgBusy",n.loader),l(2),c("checked",n.ongletSelected===n.typeOngletTabAgenda.GENERAL),l(),c("ngClass",N(14,ec,n.ongletSelected===n.typeOngletTabAgenda.GENERAL)),l(2),c("ngIf",n.ongletSelected===n.typeOngletTabAgenda.GENERAL),l(),c("checked",n.ongletSelected===n.typeOngletTabAgenda.ESPACE_TRAVAIL),l(),c("ngClass",N(16,ec,n.ongletSelected===n.typeOngletTabAgenda.ESPACE_TRAVAIL)),l(2),c("ngIf",n.ongletSelected===n.typeOngletTabAgenda.ESPACE_TRAVAIL),l(),c("ngIf",n.nbAgendaEvenements>0),l(),c("hidden",n.ongletSelected!==n.typeOngletTabAgenda.GENERAL),l(),c("ngIf",n.agendaEvents&&n.agendaEvents.length>0),l(),c("ngIf",(n.agendaEvents==null?null:n.agendaEvents.length)===0),l(),c("ngIf",x(15,12,n.ongletSelected===n.typeOngletTabAgenda.ESPACE_TRAVAIL&&n.listeEvenementsW$)))},dependencies:[oe,G,ae,pe,se,Rt,Je],styles:["ed-agenda-evenements[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});var bt=$i;Di([Ns()],bt.prototype,"nbAgendaEvenements",void 0);var Jm=t=>({"ed-container":t}),Xm=t=>({"col-lg-12 col-md-12":t}),Ym=t=>({customTimeline:t}),Zm=t=>({"col-lg-6":t}),To=t=>({"col-lg-5":t}),ep=(t,i)=>({"col-lg-12":t,"col-lg-6":i});function tp(t,i){if(t&1&&(a(0,"div",5),u(1," Votre mot de passe expire dans "),a(2,"b"),u(3),s(),u(4," jours. Vous pouvez le modifier en "),a(5,"a",6),u(6,"cliquant ici"),s(),u(7," . "),s()),t&2){let e=h();l(3),k(e.nbDays)}}function ip(t,i){t&1&&g(0,"div",15)}function np(t,i){if(t&1&&(a(0,"div",16)(1,"div",17)(2,"h2",18),u(3,"Quoi de neuf ?"),s(),g(4,"ed-timeline",19),s()()),t&2){let e=h(2);l(),c("ngClass",N(3,Ym,e.tabPostits.length===0&&e.agendaEvents.length===0)),l(3),c("idUser",e.idUser)("timelineEvents",e.timelineEvents)}}function rp(t,i){if(t&1&&g(0,"img",23),t&2){let e=h(3);c("src",e.urlTelechargementLogoEtab,ve)}}function op(t,i){if(t&1&&(a(0,"div",20)(1,"div",21),u(2),E(3,rp,1,1,"img",22),s()()),t&2){let e=h(2);l(2),H(" ",e.currentUser==null?null:e.currentUser.nomEtablissement," "),l(),c("ngIf",e.currentUser==null?null:e.currentUser.logoEtablissement)}}function ap(t,i){if(t&1&&(le(0),g(1,"ed-tab-postits",27),ce()),t&2){let e=h(4);l(),c("isActifPostitsEspacesTravail",e.isActifPostitsEspacesTravail)("tabPostits",e.tabPostits)}}function sp(t,i){t&1&&(a(0,"h2"),u(1," Informations "),s())}function lp(t,i){if(t&1&&(a(0,"div",31)(1,"h3"),u(2),s(),g(3,"p",32),C(4,"ariaConvertNewline"),C(5,"filterHtml"),s()),t&2){let e=i.$implicit;l(2),k(e.titre),l(),c("innerHTML",x(5,4,x(4,2,e.contenu)),ue)}}function cp(t,i){if(t&1&&(a(0,"div",28),E(1,sp,2,0,"h2",24)(2,lp,6,6,"div",29),C(3,"trackByProperty"),g(4,"ed-postits",30),s()),t&2){let e=h(4);l(),c("ngIf",e.authStore.currentUser.messageMaintenance&&e.authStore.currentUser.messageMaintenance.length>0||(e.tabPostits==null?null:e.tabPostits.length)>0),l(),c("ngForOf",e.authStore.currentUser.messageMaintenance)("ngForTrackBy",x(3,7,"$index")),l(2),c("configPostits",e.postitConfig)("idUser",e.idUser)("typeUser",e.typeUser)("tabPostIts",e.tabPostits)}}function dp(t,i){if(t&1&&(a(0,"div"),E(1,ap,2,2,"ng-container",4)(2,cp,5,9,"ng-template",null,1,Te),s()),t&2){let e=re(3),n=h(3);l(),c("ngIf",n.espacesTravailActif&&n.isActifPostitsEspacesTravail)("ngIfElse",e)}}function up(t,i){if(t&1&&(a(0,"div",43),u(1),C(2,"base64"),s()),t&2){let e=h().$implicit;l(),k(me(2,1,e.detail,"decode"))}}function mp(t,i){if(t&1){let e=L();a(0,"li",39)(1,"p")(2,"span",40),u(3),s()(),E(4,up,3,4,"div",41),a(5,"button",42),S("click",function(){let r=D(e).$implicit,o=h(5);return F(o.openSondageEleve(r))}),u(6,"R\xE9pondre au sondage"),s()()}if(t&2){let e=i.$implicit;l(3),k(e.libelle),l(),c("ngIf",e.detail!=="")}}function pp(t,i){if(t&1&&(a(0,"div",36)(1,"h2",37),u(2,"Sondages"),s(),a(3,"ul"),E(4,mp,7,2,"li",38),C(5,"trackByProperty"),s()()),t&2){let e=h(4);c("ngClass",N(5,To,(e.tabPostits==null?null:e.tabPostits.length)===0&&!e.isActifPostitsEspacesTravail)),l(4),c("ngForOf",e.tabRDTSondages)("ngForTrackBy",x(5,3,"$index"))}}function hp(t,i){if(t&1){let e=L();a(0,"li",39)(1,"p")(2,"span",40),u(3),s()(),a(4,"button",42),S("click",function(){let r=D(e).$implicit,o=h(5);return F(o.openEDForms(r))}),u(5),s()()}if(t&2){let e=i.$implicit;l(3),k(e.titre),l(2),H("R\xE9pondre au ",e.typeToLibelleEDForms,"")}}function fp(t,i){if(t&1&&(a(0,"div",44)(1,"h2",37),u(2,"Formulaires"),s(),a(3,"ul"),E(4,hp,6,2,"li",38),C(5,"trackByProperty"),s()()),t&2){let e=h(4);c("ngClass",N(5,To,(e.tabPostits==null?null:e.tabPostits.length)===0&&!e.isActifPostitsEspacesTravail)),l(4),c("ngForOf",e.tabEDForms)("ngForTrackBy",x(5,3,"idParticipant"))}}function gp(t,i){if(t&1&&(a(0,"div",33),E(1,pp,6,7,"div",34)(2,fp,6,7,"div",35),s()),t&2){let e=h(3);l(),c("ngIf",e.tabRDTSondages&&e.tabRDTSondages.length>0),l(),c("ngIf",e.tabEDForms&&e.tabEDForms.length>0)}}function vp(t,i){if(t&1&&(le(0),g(1,"ed-tab-agenda",46),ce()),t&2){let e=h(4);l(),c("agendaEvents",e.agendaEvents)}}function _p(t,i){if(t&1&&(a(0,"div",47)(1,"h2",37),u(2,"Agenda"),s(),a(3,"a",48),u(4,"Tout l'agenda"),s(),g(5,"ed-agenda-evenements",49),s()),t&2){let e=h(4);l(3),nt("href","/",e.typeUser,"/",e.idUser,"/Agenda",ve),l(2),c("idEntity",e.idUser)("events",e.agendaEvents)("typeEntity",e.typeUser)("droitsAgenda",e.agendaConfig)("displayTargets",!1)}}function Ep(t,i){if(t&1&&(a(0,"div",45),E(1,vp,2,1,"ng-container",4)(2,_p,6,8,"ng-template",null,1,Te),s()),t&2){let e=re(3),n=h(3);c("ngClass",N(3,To,(n.tabPostits==null?null:n.tabPostits.length)===0&&!n.isActifPostitsEspacesTravail)),l(),c("ngIf",n.espacesTravailActif&&n.isActifAgendaEvenementsEspacesTravail)("ngIfElse",e)}}function yp(t,i){if(t&1&&(a(0,"div",17),E(1,dp,4,2,"div",24)(2,gp,3,2,"div",25)(3,Ep,4,5,"div",26),s()),t&2){let e=h(2);c("ngClass",N(4,Zm,(e.tabEDForms==null?null:e.tabEDForms.length)>0||(e.tabPostits==null?null:e.tabPostits.length)>0||e.isActifPostitsEspacesTravail||e.isActifAgendaEvenementsEspacesTravail||e.agendaEvents.length>0||e.tabRDTSondages&&e.tabRDTSondages.length>0)),l(),c("ngIf",(e.tabPostits==null?null:e.tabPostits.length)>0||e.espacesTravailActif&&e.isActifPostitsEspacesTravail),l(),c("ngIf",(e.tabRDTSondages==null?null:e.tabRDTSondages.length)>0||(e.tabEDForms==null?null:e.tabEDForms.length)>0),l(),c("ngIf",e.agendaEvents.length>0||e.espacesTravailActif&&e.isActifAgendaEvenementsEspacesTravail)}}function bp(t,i){if(t&1&&(a(0,"div",56)(1,"h2"),u(2,"Mes Rendez-vous"),s(),g(3,"ed-agenda-evenements",57),s()),t&2){let e=h(3);l(3),c("displayTargets",!1)("droitsAgenda",e.agendaConfig)("events",e.tabTodayVisio)("idEntity",e.idUser)("typeEntity",e.typeUser)("needToday",!0)}}function Cp(t,i){if(t&1){let e=L();a(0,"div",50),E(1,bp,4,6,"div",51),a(2,"h2",52),u(3,"Emploi du temps"),s(),a(4,"ed-tab-edt",53),S("ongletSelectedEvent",function(r){D(e);let o=h(2);return F(o.selectTabEDT(r))}),s(),a(5,"div",54),g(6,"ed-emploi-du-temps-scheduler",55),s()()}if(t&2){let e=h(2);c("ngClass",ft(7,ep,(e.tabPostits==null?null:e.tabPostits.length)===0&&!e.isActifPostitsEspacesTravail&&e.agendaEvents.length===0&&!e.isActifAgendaEvenementsEspacesTravail,(e.tabPostits==null?null:e.tabPostits.length)>0||e.isActifPostitsEspacesTravail||e.agendaEvents.length>0||e.isActifAgendaEvenementsEspacesTravail)),l(),c("ngIf",(e.tabTodayVisio==null?null:e.tabTodayVisio.length)>0),l(3),c("ongletSelected",e.tabEDTSelected),l(2),c("idEntity",e.idUser)("schedulerConfig",e.schedulerConfig)("schedulerTemplateConfig",e.schedulerTemplateConfig)("typeEntity",e.typeUser)}}function Sp(t,i){if(t&1&&(a(0,"div"),E(1,ip,1,0,"div",7),a(2,"div",8),E(3,np,5,5,"div",9),a(4,"div",10)(5,"div",11),E(6,op,4,2,"div",12)(7,yp,4,6,"div",13)(8,Cp,7,10,"div",14),s()()()()),t&2){let e=h();l(),c("ngIf",e.timelineEvents&&e.timelineEvents.length>0),l(2),c("ngIf",e.timelineEvents&&e.timelineEvents.length>0),l(),c("ngClass",N(6,Xm,!e.timelineEvents)),l(2),c("ngIf",(e.currentUser==null?null:e.currentUser.logoEtablissement)||(e.currentUser==null?null:e.currentUser.nomEtablissement)),l(),c("ngIf",(e.tabEDForms==null?null:e.tabEDForms.length)>0||e.tabPostits.length>0||e.isActifPostitsEspacesTravail||e.isActifAgendaEvenementsEspacesTravail||e.agendaEvents.length>0||e.tabRDTSondages&&e.tabRDTSondages.length>0),l(),c("ngIf",e.isEDTEnabled)}}function xp(t,i){t&1&&(a(0,"div",58)(1,"h3",59),u(2,"Aucun contenu n'est disponible"),s()())}var ic=(()=>{let i=class i extends Ie(){constructor(n,r,o,d,m,p,f,_,y,T,P,A){super(),this.activatedRoute=n,this.uiService=r,this.authStore=o,this.loaderService=d,this.timelineService=m,this.rdtService=p,this.modalService=f,this.edfService=_,this.router=y,this.events=T,this.filtresAgendaEdtUserStore=P,this.cloudService=A,this.edTypeUser=O,this.tabPostits=[],this.agendaEvents=[],this.timelineEvents=[],this.tabRDTSondages=[],this.tabEDForms=[],this.isEDTEnabled=!1,this.isMessagerieEnabled=!1,this.tabTodayVisio=[],this.tabEDTSelected=vi.OJD,this.nbDays=0,this.nbDays=this.authStore.snapshot.nbJourMdpExire,this.espacesTravailActif=V.isModuleEnabled(this.authStore.currentUser,b.CLOUD),this.urlTelechargementLogoEtab=`${_t()}/telechargement${Ye.apiExtension}?cToken=${o.cToken()}&verbe=get&fichierId=${o.currentUser.logoEtablissement}&leTypeDeFichier=IMPORT_FTP`,this.isEDTEnabled=V.isModuleEnabled(this.authStore.currentUser,b.EDT),this.isMessagerieEnabled=V.isModuleEnabled(this.authStore.currentUser,b.MESSAGERIE),this.isActifPostitsEspacesTravail=V.getModuleParametre(b.CLOUD,"isActifPostitsEspacesTravail",this.authStore.currentUser)>0,this.isActifAgendaEvenementsEspacesTravail=V.getModuleParametre(b.CLOUD,"isActifAgendaEvenementsEspacesTravail",this.authStore.currentUser)>0,this.schedulerTemplateConfig={weekButton:!1,monthButton:!1,todayButton:!1,prevButton:!1,nextButton:!1,dateTitle:!1,exportPdf:!1},this.schedulerConfig={mode:Qn.day},this.postitConfig={addPostit:!1,updatePostit:!1,deletePostit:!1,displayDateCreated:!0,displayDateLimit:!1,displayTargets:!1,displayFormTargets:!1,selectTargets:[],visibilityPostitPast:!1,displayLibelleAuteur:!1,contexte:ti.ACCUEIL},this.agendaConfig={CAN_CREATE:!1,CAN_UPDATE:!1,CAN_DELETE:!1}}get currentUser(){return this.authStore.currentUser}ngOnInit(){this.authStore.isEleve()?(this.typeUser=this.authStore.currentUser.typeCompte,this.idUser=this.authStore.currentUser.id,this.refreshData()):this.activatedRoute.paramMap.pipe(Ke(n=>{this.typeUser=O.ELEVE,this.idUser=+n.get("idUser"),this.isEDTEnabled=V.isModuleEnabled(this.authStore.currentUser,b.EDT,this.idUser),this.isMessagerieEnabled=V.isModuleEnabled(this.authStore.currentUser,b.MESSAGERIE,this.idUser),this.espacesTravailActif=!1,this.isActifAgendaEvenementsEspacesTravail=!1,this.isActifPostitsEspacesTravail=!1,this.refreshData()}),ie(n=>this.uiService.notifyErrorThenEmpty(n,!0,"Erreur")),De(this._destroyRef)).subscribe(),this.events.select$("array:removeEntityById").pipe(De(this._destroyRef)).subscribe(n=>{n>0&&Array.isArray(this.tabEDForms)&&(this.tabEDForms=this.tabEDForms.filter(r=>n!==r.idParticipant))})}refreshData(){this.filtresAgendaEdtUserStore.cleanDatas();let n=[...this.filtresAgendaEdtUserStore.getTabAgendaEdtToDisplay()];this.filtresAgendaEdtUserStore.convertEntityToAgendaFiltre(O.ELEVE,this.idUser).pipe(q(m=>{if(Array.isArray(m)){for(let p of m)p.typeAgenda===Ln.EDT&&(p.selected=!0),n.unshift(p);this.filtresAgendaEdtUserStore.tabAgendaEdtToDisplay=n}})).subscribe(),this.timelineEvents=[];let r=this.typeUser,o=this.idUser;this.authStore.isFamille()&&(r=this.authStore.currentUser.typeCompte,o=this.authStore.currentUser.id);let d=[this.timelineService.eleveTimeline(this.idUser),this.timelineService.communTimeline(r,o),this.rdtService.getSondages(),this.edfService.getFS(this.typeUser,this.idUser),this.cloudService.getVisioToday(this.authStore.currentUser.id,this.authStore.currentUser.typeCompte)];this.loader=this.loaderService.show(this),this.datasAccueil$=ct(d).pipe(q(m=>{var f,_;let p=[];for(let y of m[0]){let T=new Qt({date:y.date,description:y.contenu,typeElement:y.typeElement,idElement:y.idElement,titre:y.titre,soustitre:y.soustitre,idUser:this.idUser,typeUser:this.typeUser,contenu:y.contenu});p.push(T)}this.timelineEvents=[...this.timelineEvents,...p],this.tabPostits=(f=m[1].postits)==null?void 0:f.map(y=>new li(y)),this.agendaEvents=(_=m[1].evenements)==null?void 0:_.map(y=>ai.cleanEvent(new Ot(y))),this.tabRDTSondages=m[2],this.tabEDForms=m[3],this.tabTodayVisio=[...m[4].filter(y=>this.authStore.isEleve()||y.idEleve===this.idUser)]}),ge(()=>this.loaderService.hide(this)),ie(m=>this.uiService.notifyErrorThenEmpty(m,!0,"Erreur")))}openSondageEleve(n){let r={id:this.modalService.getModalsCount()+1,initialState:{sondage:n},class:"modal-lg"};this.modalService.show(_r,r),this.modalService.onHide.pipe(ke(1),tt(o=>o===Qe.validation),We(o=>(this.loader=this.loaderService.show(this),this.rdtService.getSondages())),q(o=>{this.tabRDTSondages=o}),ge(()=>this.loaderService.hide(this)),ie(o=>this.uiService.notifyErrorThenEmpty(o,!0,"Erreur"))).subscribe()}openEDForms(n){this.router.navigate(["",{outlets:{auxiliaryModal:["repondre-au-fs"]}}],{skipLocationChange:!0,queryParams:{idFS:n.id,idParticipant:n.idParticipant,titre:n.titre}}).catch(()=>console.error("AccueilEleveComponent.openEDForms navigate to fs form"))}selectTabEDT(n){this.tabEDTSelected=n,n===vi.OJD?this.schedulerConfig=Ue(J({},this.schedulerConfig),{dateStart:new Date}):this.schedulerConfig=Ue(J({},this.schedulerConfig),{dateStart:vt.addNbHoursToDate(new Date,24)})}};i.\u0275fac=function(r){return new(r||i)(v(kt),v(ye),v(M),v(Re),v(di),v(Bi),v(Fe),v(ci),v(Q),v(ni),v(mi),v(si))},i.\u0275cmp=w({type:i,selectors:[["ed-accueil-eleve"]],standalone:!1,features:[Oe],decls:6,vars:9,consts:[["noAccueil",""],["onlyPostIts",""],[1,"accueileleve","accueiluserauth","container-fluid",3,"cgBusy","ngClass"],["class","banner",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"banner"],["href","utilisateur/personnalisation"],["class","d-none d-lg-block d-print-none separator",4,"ngIf"],[1,"row"],["class","d-none d-lg-block col-lg-3 timeline-famille padding-home double-padding",4,"ngIf"],[1,"col-lg-9",3,"ngClass"],[1,"row","padding-home"],["class","col-lg-12",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","double-padding blocs-colonne margin-bottom col-lg-6",3,"ngClass",4,"ngIf"],[1,"d-none","d-lg-block","d-print-none","separator"],[1,"d-none","d-lg-block","col-lg-3","timeline-famille","padding-home","double-padding"],[3,"ngClass"],["id","quoi-de-neuf"],[3,"idUser","timelineEvents"],[1,"col-lg-12"],["id","nom-etb"],["class","float-end rounded logo-etab","alt","logo \xE9tablissement",3,"src",4,"ngIf"],["alt","logo \xE9tablissement",1,"float-end","rounded","logo-etab",3,"src"],[4,"ngIf"],["class","margin-bottom",4,"ngIf"],["class","card ed-card px-3 pb-3",3,"ngClass",4,"ngIf"],[3,"isActifPostitsEspacesTravail","tabPostits"],["id","encart-postit"],["class","jumbotron msg-maintenance",4,"ngFor","ngForOf","ngForTrackBy"],[3,"configPostits","idUser","typeUser","tabPostIts"],[1,"jumbotron","msg-maintenance"],[3,"innerHTML"],[1,"margin-bottom"],["class","encart-sondages card ed-card px-3 pb-3",3,"ngClass",4,"ngIf"],["class","encart-questionnaires card ed-card px-3 pb-3",3,"ngClass",4,"ngIf"],[1,"encart-sondages","card","ed-card","px-3","pb-3",3,"ngClass"],[1,"text-center","w-100"],["class","btn-action btn-action-needed light-color icon-ed_attention",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-action","btn-action-needed","light-color","icon-ed_attention"],[1,"text-bold"],["class","alert alert-info",4,"ngIf"],["type","button",1,"btn","btn-link",3,"click"],[1,"alert","alert-info"],[1,"encart-questionnaires","card","ed-card","px-3","pb-3",3,"ngClass"],[1,"card","ed-card","px-3","pb-3",3,"ngClass"],[3,"agendaEvents"],[1,"encart-agenda"],[1,"mb-4",3,"href"],[3,"idEntity","events","typeEntity","selectedTargets","droitsAgenda","displayTargets","espaceTravail"],[1,"double-padding","blocs-colonne","margin-bottom","col-lg-6",3,"ngClass"],["class","encart-visio",4,"ngIf"],[1,"text-center","w-100","d-print-none","hidden-xs"],[1,"hidden-xs",3,"ongletSelectedEvent","ongletSelected"],["id","emploi-du-temps-jour","role","complementary",1,"bs-docs-sidebar","d-print-none","hidden-xs"],[3,"idEntity","schedulerConfig","schedulerTemplateConfig","typeEntity"],[1,"encart-visio"],[3,"displayTargets","droitsAgenda","espaceTravail","events","idEntity","selectedTargets","typeEntity","needToday"],[1,"jumbotron","container-bg","double-padding"],[1,"d-print-none"]],template:function(r,o){if(r&1&&(a(0,"div",2),E(1,tp,8,1,"div",3)(2,Sp,9,8,"div",4),C(3,"async"),E(4,xp,3,0,"ng-template",null,0,Te),s()),r&2){let d=re(5);c("cgBusy",o.loader)("ngClass",N(7,Jm,o.tabPostits.length===0&&!o.isActifPostitsEspacesTravail&&o.agendaEvents.length===0&&!o.isActifAgendaEvenementsEspacesTravail)),l(),c("ngIf",o.nbDays>0),l(),c("ngIf",x(3,5,o.datasAccueil$))("ngIfElse",d)}},dependencies:[oe,Ee,G,se,Rt,pi,hi,Zn,Gi,bt,Er,Je,ii,Ve,be,Ze],styles:[".accueileleve[_ngcontent-%COMP%]   .padding-home[_ngcontent-%COMP%]{min-height:100vh}.accueileleve[_ngcontent-%COMP%]   .liste-postit[_ngcontent-%COMP%]{margin:0}.accueileleve[_ngcontent-%COMP%]   ed-agenda-evenements[_ngcontent-%COMP%]{width:100%}.accueileleve[_ngcontent-%COMP%]   .encart-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .accueileleve[_ngcontent-%COMP%]   .encart-questionnaires[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.accueileleve[_ngcontent-%COMP%]   .encart-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .accueileleve[_ngcontent-%COMP%]   .encart-questionnaires[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:20px;width:100%;border-radius:5px;color:#fff;margin-top:5px}.accueileleve[_ngcontent-%COMP%]   .encart-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%], .accueileleve[_ngcontent-%COMP%]   .encart-questionnaires[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin:0 0 5px;padding:3px}"]});let t=i;return t})();var Tp=(t,i)=>({"col-lg-9":t,"col-lg-12":i}),Mp=t=>({"col-lg-6":t}),nc=()=>["fas","xmark"],rc=()=>["fas","square-plus"],Pp=()=>["/Paiements"],Mo=t=>({badgedebiteur:t}),Ap=()=>["/Compte"],Ip=t=>({"col-md-12":t});function wp(t,i){if(t&1&&(a(0,"div",5),u(1," Votre mot de passe expire dans "),a(2,"b"),u(3),s(),u(4," jours. Vous pouvez le modifier en "),a(5,"a",6),u(6,"cliquant ici"),s(),u(7," . "),s()),t&2){let e=h();l(3),k(e.nbDays)}}function kp(t,i){t&1&&g(0,"div",18)}function Op(t,i){if(t&1){let e=L();a(0,"button",24),S("click",function(){D(e);let r=h(3);return F(r.hideBlocActu(!0))}),g(1,"fa-icon",25),s()}t&2&&(l(),c("icon",K(1,nc)))}function Dp(t,i){if(t&1){let e=L();a(0,"button",26),S("click",function(){D(e);let r=h(3);return F(r.hideBlocActu(!1))}),g(1,"fa-icon",25),s()}t&2&&(l(),c("icon",K(1,rc)))}function Fp(t,i){if(t&1&&(a(0,"div",19)(1,"h2",20),u(2," Quoi de neuf ? "),E(3,Op,2,2,"button",21)(4,Dp,2,2,"button",22),s(),g(5,"ed-timeline",23),s()),t&2){let e=h(2);l(3),c("ngIf",!e.isActuHidden),l(),c("ngIf",e.isActuHidden),l(),c("idUser",e.idUser)("timelineEvents",e.events)("isActuHidden",e.isActuHidden)}}function Rp(t,i){if(t&1&&g(0,"img",30),t&2){let e=h(3);c("src",e.urlTelechargementLogoEtab,ve)}}function Np(t,i){if(t&1&&(a(0,"div",27)(1,"div",28),u(2),E(3,Rp,1,1,"img",29),s()()),t&2){let e=h(2);l(2),H(" ",e.authStore.currentUser.nomEtablissement," "),l(),c("ngIf",e.authStore.currentUser.logoEtablissement)}}function Up(t,i){if(t&1&&g(0,"ed-tab-postits",32),t&2){let e=h(4);c("isActifPostitsEspacesTravail",e.isActifPostitsEspacesTravail)("tabPostits",e.tabPostits)}}function Lp(t,i){if(t&1&&(le(0),E(1,Up,1,2,"ed-tab-postits",31),ce()),t&2){let e=h(3);l(),c("ngIf",e.tabPostits)}}function Bp(t,i){t&1&&(a(0,"h2"),u(1," Informations "),s())}function Vp(t,i){if(t&1&&(a(0,"div",36)(1,"h3"),u(2),s(),g(3,"p",37),C(4,"ariaConvertNewline"),C(5,"filterHtml"),s()),t&2){let e=i.$implicit;l(2),k(e.titre),l(),c("innerHTML",x(5,4,x(4,2,e.contenu)),ue)}}function jp(t,i){if(t&1&&g(0,"ed-postits",38),t&2){let e=h(4);c("configPostits",e.postitConfig)("idUser",e.idUser)("typeUser",e.typeUser)("tabPostIts",e.tabPostits)}}function zp(t,i){if(t&1&&(a(0,"div",33),E(1,Bp,2,0,"h2",14)(2,Vp,6,6,"div",34),C(3,"trackByProperty"),E(4,jp,1,4,"ed-postits",35),s()),t&2){let e=h(3);l(),c("ngIf",e.authStore.currentUser.messageMaintenance&&e.authStore.currentUser.messageMaintenance.length>0||(e.tabPostits==null?null:e.tabPostits.length)>0),l(),c("ngForOf",e.authStore.currentUser.messageMaintenance)("ngForTrackBy",x(3,4,"$index")),l(2),c("ngIf",e.tabPostits)}}function qp(t,i){if(t&1&&(a(0,"div"),E(1,Lp,2,1,"ng-container",4)(2,zp,5,6,"ng-template",null,1,Te),s()),t&2){let e=re(3),n=h(2);l(),c("ngIf",n.espacesTravailActif&&n.isActifPostitsEspacesTravail)("ngIfElse",e)}}function Hp(t,i){if(t&1&&(le(0),g(1,"ed-tab-agenda",40),ce()),t&2){let e=h(3);l(),c("agendaEvents",e.agendaEvents)}}function Gp(t,i){if(t&1&&(a(0,"div",41)(1,"h2",42),u(2,"Agenda"),s(),a(3,"a",43),u(4,"Tout l'agenda"),s(),g(5,"ed-agenda-evenements",44),s()),t&2){let e=h(3);l(3),nt("href","/",e.typeUser,"/",e.idUser,"/Agenda",ve),l(2),c("idEntity",e.idUser)("events",e.agendaEvents)("typeEntity",e.typeUser)("droitsAgenda",e.agendaConfig)("displayTargets",!1)}}function $p(t,i){if(t&1&&(a(0,"div",39),E(1,Hp,2,1,"ng-container",4)(2,Gp,6,8,"ng-template",null,1,Te),s()),t&2){let e=re(3),n=h(2);l(),c("ngIf",n.espacesTravailActif&&n.isActifAgendaEvenementsEspacesTravail)("ngIfElse",e)}}function Kp(t,i){if(t&1){let e=L();a(0,"button",49),S("click",function(){D(e);let r=h(4);return F(r.hideBlocPorteMonnaie(!0))}),g(1,"fa-icon",25),s()}t&2&&(l(),c("icon",K(1,nc)))}function Qp(t,i){if(t&1){let e=L();a(0,"button",50),S("click",function(){D(e);let r=h(4);return F(r.hideBlocPorteMonnaie(!1))}),g(1,"fa-icon",25),s()}t&2&&(l(),c("icon",K(1,rc)))}function Wp(t,i){if(t&1&&(a(0,"h2",42),u(1," Porte-monnaie "),E(2,Kp,2,2,"button",47)(3,Qp,2,2,"button",48),s()),t&2){let e=h(3);l(2),c("ngIf",!e.isPorteMonnaieHidden),l(),c("ngIf",e.isPorteMonnaieHidden)}}function Jp(t,i){if(t&1&&(a(0,"a",55),C(1,"number"),a(2,"span",56),g(3,"span",57),u(4),C(5,"number"),s()()),t&2){let e=h().$implicit,n=h(4);c("routerLink",K(11,Pp)),_e("aria-label",me(1,5,e.solde,n.digitsInfo)+", montant du porte monnaie pour "+e.libelle),l(2),c("ngClass",N(12,Mo,e.solde<0)),l(),c("textContent",e.solde<0?"":"+"),l(),H(" ",me(5,8,e.solde,n.digitsInfo)," ")}}function Xp(t,i){if(t&1&&(a(0,"a",55),C(1,"number"),a(2,"span",56),g(3,"span",57),u(4),C(5,"number"),s()()),t&2){let e=h().$implicit,n=h(4);c("routerLink",K(11,Ap)),_e("aria-label",me(1,5,e.solde,n.digitsInfo)+", montant du porte monnaie pour "+e.libelle),l(2),c("ngClass",N(12,Mo,e.solde<0)),l(),c("textContent",e.solde<0?"":"+"),l(),H(" ",me(5,8,e.solde,n.digitsInfo)," ")}}function Yp(t,i){if(t&1&&(a(0,"span",56),g(1,"span",57),u(2),C(3,"number"),s()),t&2){let e=h().$implicit,n=h(4);c("ngClass",N(6,Mo,e.solde<0)),l(),c("textContent",e.solde<0?"":"+"),l(),H(" ",me(3,3,e.solde,n.digitsInfo)," ")}}function Zp(t,i){if(t&1&&(a(0,"li"),E(1,Jp,6,14,"a",52)(2,Xp,6,14,"a",52)(3,Yp,4,8,"span",53),a(4,"span",54),u(5),s()()),t&2){let e=i.$implicit,n=h(4);l(),c("ngIf",n.isPaiementEnable&&e.isPMPayable),l(),c("ngIf",n.isPaiementEnable&&!e.isPMPayable),l(),c("ngIf",!n.isPaiementEnable),l(2),k(e.libelle)}}function e0(t,i){if(t&1&&(a(0,"ul"),E(1,Zp,6,4,"li",51),C(2,"trackByProperty"),s()),t&2){let e=h(3);l(),c("ngForOf",e.lesSoldes)("ngForTrackBy",x(2,2,"$index"))}}function t0(t,i){if(t&1&&(a(0,"div",45),E(1,Wp,4,2,"h2",46)(2,e0,3,4,"ul",14),s()),t&2){let e=h(2);l(),c("ngIf",e.lesSoldes.length>=1),l(),c("ngIf",!e.isPorteMonnaieHidden)}}function i0(t,i){if(t&1&&(a(0,"div",62)(1,"h2",42),u(2),C(3,"edDate"),s(),g(4,"ed-agenda-evenements",63),s()),t&2){let e=h(3);l(2),H("Mes visios du ",me(3,7,e.todayDate,"EEEE d LLLL"),""),l(2),c("displayTargets",!1)("droitsAgenda",e.agendaConfig)("events",e.tabRDVTodayVisio)("idEntity",e.idUser)("typeEntity",e.typeUser)("needToday",!0)}}function n0(t,i){if(t&1){let e=L();a(0,"li",66)(1,"p")(2,"span",67),u(3),s()(),a(4,"button",68),S("click",function(){let r=D(e).$implicit,o=h(4);return F(o.openEDForms(r))}),u(5),s()()}if(t&2){let e=i.$implicit;l(3),k(e.titre),l(2),H("R\xE9pondre au ",e.typeToLibelleEDForms,"")}}function r0(t,i){if(t&1&&(a(0,"div",64)(1,"h2",42),u(2,"Formulaires"),s(),a(3,"ul"),E(4,n0,6,2,"li",65),C(5,"trackByProperty"),s()()),t&2){let e=h(3);l(4),c("ngForOf",e.tabEDForms)("ngForTrackBy",x(5,2,"idParticipant"))}}function o0(t,i){if(t&1){let e=L();a(0,"div",69)(1,"h2",42),u(2,"Emploi du temps"),s(),a(3,"ed-tab-edt",70),S("ongletSelectedEvent",function(r){D(e);let o=h(3);return F(o.selectTabEDT(r))}),s(),a(4,"div",71),g(5,"ed-emploi-du-temps-scheduler",72),s()()}if(t&2){let e=h(3);l(3),c("ongletSelected",e.tabEDTSelected),l(2),c("idEntity",e.idUser)("schedulerConfig",e.schedulerConfig)("schedulerTemplateConfig",e.schedulerTemplateConfig)("typeEntity",e.typeUser)}}function a0(t,i){if(t&1&&(a(0,"div",58),E(1,i0,5,10,"div",59)(2,r0,6,4,"div",60)(3,o0,6,5,"div",61),s()),t&2){let e=h(2);c("ngClass",N(4,Ip,(e.tabPostits==null?null:e.tabPostits.length)===0&&!e.isActifPostitsEspacesTravail&&(e.agendaEvents==null?null:e.agendaEvents.length)===0&&!e.isActifAgendaEvenementsEspacesTravail&&(e.lesSoldes==null?null:e.lesSoldes.length)===0)),l(),c("ngIf",(e.tabRDVTodayVisio==null?null:e.tabRDVTodayVisio.length)>0),l(),c("ngIf",e.tabEDForms&&e.tabEDForms.length>0),l(),c("ngIf",e.isEDTEnabled)}}function s0(t,i){if(t&1&&(a(0,"div"),E(1,kp,1,0,"div",7),a(2,"div",8),E(3,Fp,6,5,"div",9),a(4,"div",10)(5,"div",11),E(6,Np,4,2,"div",12),a(7,"div",13),E(8,qp,4,2,"div",14)(9,$p,4,2,"div",15)(10,t0,3,2,"div",16),s(),E(11,a0,4,6,"div",17),s()()()()),t&2){let e=h();l(),c("ngIf",(e.events==null?null:e.events.length)>0),l(2),c("ngIf",e.events&&(e.events==null?null:e.events.length)>0),l(),c("ngClass",ft(10,Tp,e.events&&(e.events==null?null:e.events.length)>0,(e.events==null?null:e.events.length)===0))("cgBusy",e.loader),l(2),c("ngIf",e.authStore.currentUser.logoEtablissement||e.authStore.currentUser.nomEtablissement),l(),c("ngClass",N(13,Mp,e.tabPostits.length>0||e.isActifPostitsEspacesTravail||e.isActifAgendaEvenementsEspacesTravail||(e.agendaEvents==null?null:e.agendaEvents.length)>0||e.lesSoldes.length>0)),l(),c("ngIf",e.tabPostits||e.espacesTravailActif&&e.isActifPostitsEspacesTravail),l(),c("ngIf",(e.agendaEvents==null?null:e.agendaEvents.length)>0||e.espacesTravailActif&&e.isActifAgendaEvenementsEspacesTravail),l(),c("ngIf",e.lesSoldes.length>0),l(),c("ngIf",e.isEDTEnabled||e.tabEDForms&&e.tabEDForms.length>0||(e.tabRDVTodayVisio==null?null:e.tabRDVTodayVisio.length)>0)}}function l0(t,i){t&1&&(a(0,"div",73)(1,"h3",74),u(2,"Aucun contenu n'est disponible"),s()())}var oc=(()=>{let i=class i extends Ie(){constructor(n,r,o,d,m,p,f,_,y,T,P){super(),this.messageService=n,this.uiService=r,this.loaderService=o,this.timelineService=d,this.edfService=m,this.authService=p,this.authStore=f,this.router=_,this.eventService=y,this.cloudService=T,this.filtresAgendaEdtUserStore=P,this.events=[],this.tabEDForms=[],this.isEDTEnabled=!1,this.tabRDVTodayVisio=[],this.tabRDV=[],this.todayDate=new Date,this.lesSoldes=[],this.tabEDTSelected=vi.OJD,this.nbDays=0,this.espacesTravailActif=V.isModuleEnabled(this.authStore.currentUser,b.CLOUD),this.urlTelechargementLogoEtab=`${_t()}/telechargement${Ye.apiExtension}?cToken=${f.cToken()}&verbe=get&fichierId=${f.currentUser.logoEtablissement}&leTypeDeFichier=IMPORT_FTP`,this.isActifPostitsEspacesTravail=V.getModuleParametre(b.CLOUD,"isActifPostitsEspacesTravail",this.authStore.currentUser)>0,this.isActifAgendaEvenementsEspacesTravail=V.getModuleParametre(b.CLOUD,"isActifAgendaEvenementsEspacesTravail",this.authStore.currentUser)>0,this.postitConfig={addPostit:!1,updatePostit:!1,deletePostit:!1,displayDateCreated:!0,displayDateLimit:!1,displayTargets:!1,displayFormTargets:!1,selectTargets:[],visibilityPostitPast:!1,displayLibelleAuteur:!1,contexte:ti.ACCUEIL},this.agendaConfig={CAN_CREATE:!1,CAN_UPDATE:!1,CAN_DELETE:!1},this.url=`${_t()}/telechargement.awp`,this.schedulerConfig={mode:Qn.day},this.schedulerTemplateConfig={weekButton:!1,monthButton:!1,todayButton:!1,prevButton:!1,nextButton:!1,dateTitle:!1,exportPdf:!1},this.isEDTEnabled=V.isModuleEnabled(this.authStore.currentUser,b.EDT);let A=V.getModuleParametre(b.PAIEMENT_EN_LIGNE,"codeDevise",this.authStore.currentUser);this.digitsInfo=Vn.infosDevise(A).digitsInfo,this.isPaiementEnable=V.isModuleEnabled(this.authStore.currentUser,b.PAIEMENT_EN_LIGNE),this.nbDays=this.authStore.snapshot.nbJourMdpExire}get typeUser(){return this.authStore.currentUser.typeCompte}get idUser(){return this.authStore.currentUser.id}ngOnInit(){this.isActuHidden=this.authStore.currentUser.listParametresIndividuels(an.AFFICHER_BLOC_ACTU_ACCUEIL)===!1,this.isPorteMonnaieHidden=this.authStore.currentUser.listParametresIndividuels(an.AFFICHER_BLOC_PORTE_MONNAIE_ACCUEIL)===!1,this.refreshData(),this.eventService.select$("array:removeEntityById").pipe(De(this._destroyRef)).subscribe(n=>{n>0&&Array.isArray(this.tabEDForms)&&(this.tabEDForms=this.tabEDForms.filter(r=>n!==r.idParticipant))})}hideBlocActu(n){this.loader=this.authService.updateParametrageIndividuel(this.authStore.currentUser.typeCompte,this.authStore.currentUser.id,"Accueil/Actu",!n).subscribe({next:r=>{this.isActuHidden=n;let o=n?"masqu\xE9":"visible";this.uiService.notifyEvent(Y.genericSuccess,`Le bloc "Quoi de neuf" est maintenant ${o} sur votre page d'accueil.`,"Accueil"),this.authService.setParametresIndividuel(this.authStore.currentUser.typeCompte,this.authStore.currentUser.id,an.AFFICHER_BLOC_ACTU_ACCUEIL,!this.isActuHidden)},error:r=>this.uiService.notifyEvent(r.action,`La modification de votre affichage du bloc "Quoi de neuf" sur la page d'accueil n'a pas pu \xEAtre enregistr\xE9.`,"Erreur")})}hideBlocPorteMonnaie(n){this.loader=this.authService.updateParametrageIndividuel(this.authStore.currentUser.typeCompte,this.authStore.currentUser.id,"Accueil/PM",!n).subscribe({next:r=>{this.isPorteMonnaieHidden=n;let o=n?"masqu\xE9":"visible";this.uiService.notifyEvent(Y.genericSuccess,`Le bloc "Porte-monnaie" est maintenant ${o} sur votre page d'accueil.`,"Accueil"),this.authService.setParametresIndividuel(this.authStore.currentUser.typeCompte,this.authStore.currentUser.id,an.AFFICHER_BLOC_PORTE_MONNAIE_ACCUEIL,!this.isPorteMonnaieHidden)},error:r=>this.uiService.notifyEvent(r.action,`La modification de votre affichage du bloc "Porte-monnaie" sur la page d'accueil n'a pas pu \xEAtre enregistr\xE9.`,"Erreur")})}refreshData(){let n=[...this.filtresAgendaEdtUserStore.getTabAgendaEdtToDisplay()];this.filtresAgendaEdtUserStore.convertEntityToAgendaFiltre(O.ENSEIGNANT,this.idUser).pipe(q(r=>{if(Array.isArray(r)){for(let o of r)o.typeAgenda===Ln.EDT&&(o.selected=!0),n.unshift(o);this.filtresAgendaEdtUserStore.tabAgendaEdtToDisplay=n}})).subscribe(),this.loader=this.loaderService.show(this),this.datasAccueil$=ct([this.timelineService.communTimeline(this.typeUser,this.idUser),this.edfService.getFS(this.typeUser,this.idUser),this.messageService.getUnreadMessages(this.typeUser,this.idUser),this.cloudService.getVisioToday(this.idUser,this.typeUser)]).pipe(q(r=>{var p,f;let o=[];this.filtresAgendaEdtUserStore.cleanDatas(),this.tabPostits=(p=r[0].postits)==null?void 0:p.map(_=>new li(_)),this.agendaEvents=(f=r[0].evenements)==null?void 0:f.map(_=>ai.cleanEvent(new Ot(_))),this.tabReunion=r[0].reunions||[];for(let _ of this.tabReunion)if(!this.isPast(_.parametrage.date)){let y=new Qt({typeElement:"ReunionPP",idElement:_.parametrage.id,soustitre:"",contenu:"",description:_.parametrage.libelle,date:_.parametrage.date+" "+_.parametrage.heureDebut+":00",titre:"Nouvelle r\xE9union parents/prof disponible",idUser:this.idUser,typeUser:this.typeUser,afficherHeure:!0});o.push(y)}this.events=[...this.events,...o],this.events=[...this.events,...r[2].slice(0,10).map(_=>new Qt({date:_.date,contenu:_.content,description:_.subject,titre:_.from.civilite+" "+_.from.prenom+" "+_.from.nom,idElement:_.id,typeElement:"Messagerie",idUser:this.idUser,typeUser:this.typeUser,afficherHeure:!1}))],this.tabEDForms=r[1],this.tabRDV=[...r[3]],this.tabRDVTodayVisio=[...this.tabRDV.filter(_=>_.isVisio===!0)],V.isModuleEnabled(this.authStore.currentUser,b.SITUATION_FINANCIERE)&&(this.lesSoldes=Object.isExists(r[0].comptes)?r[0].comptes.comptes.filter(_=>_.typeCompte===Ui.pm&&_.solde!==0||_.typeCompte===Ui.pmactivite&&_.solde<0).map(_=>new Hn(_)):[]);let m=this.filtresAgendaEdtUserStore.getRDVPPAgendaFiltre();m.selected=!0,this.filtresAgendaEdtUserStore.addAgendaFiltreToDisplay(m)}),ge(()=>this.loaderService.hide(this)),ie(r=>this.uiService.notifyErrorThenEmpty(r,!0,"Erreur")))}isPast(n){return vt.isAfter(new Date,vt.stringToDate(n))}openEDForms(n){this.router.navigate(["",{outlets:{auxiliaryModal:["repondre-au-fs"]}}],{skipLocationChange:!0,queryParams:{idFS:n.id,idParticipant:n.idParticipant,titre:n.titre}}).catch(()=>console.error("AccueilEnseignantComponent.openEDForms navigate to fs form"))}selectTabEDT(n){this.tabEDTSelected=n,n===vi.OJD?this.schedulerConfig=Ue(J({},this.schedulerConfig),{dateStart:new Date}):this.schedulerConfig=Ue(J({},this.schedulerConfig),{dateStart:vt.addNbHoursToDate(new Date,24)})}};i.\u0275fac=function(r){return new(r||i)(v(Gn),v(ye),v(Re),v(di),v(ci),v(Xe),v(M),v(Q),v(ni),v(si),v(mi))},i.\u0275cmp=w({type:i,selectors:[["ed-accueil-enseignant"]],standalone:!1,features:[Oe],decls:6,vars:6,consts:[["noAccueil",""],["onlyPostIts",""],[1,"accueilenseignant","accueiluserauth","container-fluid",3,"cgBusy"],["class","banner",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"banner"],["href","utilisateur/personnalisation"],["class","d-none d-lg-block d-print-none separator",4,"ngIf"],[1,"row"],["class","col-lg-3 timeline-famille padding-home sticky simple-padding d-none d-lg-block",4,"ngIf"],[3,"ngClass","cgBusy"],[1,"row","padding-home"],["class","col-lg-12",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],["class","card ed-card px-3 pb-3",4,"ngIf"],["class","hidden-xs card ed-card px-3 pb-3","id","soldes",4,"ngIf"],["class","double-padding blocs-colonne margin-bottom col-lg-6",3,"ngClass",4,"ngIf"],[1,"d-none","d-lg-block","d-print-none","separator"],[1,"col-lg-3","timeline-famille","padding-home","sticky","simple-padding","d-none","d-lg-block"],["id","quoi-de-neuf"],["type","button","class","btn btn-link float-end text-dark me-2","title","Masquer les messages",3,"click",4,"ngIf"],["type","button","class","btn btn-link float-end text-dark me-2","title","Afficher les messages",3,"click",4,"ngIf"],[3,"idUser","timelineEvents","isActuHidden"],["type","button","title","Masquer les messages",1,"btn","btn-link","float-end","text-dark","me-2",3,"click"],["aria-hidden","true",3,"icon"],["type","button","title","Afficher les messages",1,"btn","btn-link","float-end","text-dark","me-2",3,"click"],[1,"col-lg-12"],["id","nom-etb","role","heading","aria-level","1"],["class","float-end rounded logo-etab logo-etab-prof","alt","Logo, Ensemble Scolaire APLIM",3,"src",4,"ngIf"],["alt","Logo, Ensemble Scolaire APLIM",1,"float-end","rounded","logo-etab","logo-etab-prof",3,"src"],[3,"isActifPostitsEspacesTravail","tabPostits",4,"ngIf"],[3,"isActifPostitsEspacesTravail","tabPostits"],["id","encart-postit"],["class","jumbotron msg-maintenance",4,"ngFor","ngForOf","ngForTrackBy"],[3,"configPostits","idUser","typeUser","tabPostIts",4,"ngIf"],[1,"jumbotron","msg-maintenance"],[3,"innerHTML"],[3,"configPostits","idUser","typeUser","tabPostIts"],[1,"card","ed-card","px-3","pb-3"],[3,"agendaEvents"],[1,"encart-agenda"],[1,"text-center","w-100"],[1,"mb-4",3,"href"],[3,"idEntity","events","typeEntity","selectedTargets","droitsAgenda","displayTargets","espaceTravail"],["id","soldes",1,"hidden-xs","card","ed-card","px-3","pb-3"],["class","text-center w-100",4,"ngIf"],["type","button","class","btn btn-link float-end text-dark me-2","title","Masquer les porte-monnaie",3,"click",4,"ngIf"],["type","button","class","btn btn-link float-end text-dark me-2","title","Afficher les porte-monnaie",3,"click",4,"ngIf"],["type","button","title","Masquer les porte-monnaie",1,"btn","btn-link","float-end","text-dark","me-2",3,"click"],["type","button","title","Afficher les porte-monnaie",1,"btn","btn-link","float-end","text-dark","me-2",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],["href","",3,"routerLink",4,"ngIf"],["class","badge-solde",3,"ngClass",4,"ngIf"],[1,"libelle","text-bold"],["href","",3,"routerLink"],[1,"badge-solde",3,"ngClass"],[3,"textContent"],[1,"double-padding","blocs-colonne","margin-bottom","col-lg-6",3,"ngClass"],["class","encart-visio card ed-card px-3 pb-3",4,"ngIf"],["class","encart-edforms card ed-card px-3 pb-3",4,"ngIf"],["class","bs-docs-sidebar d-print-none hidden-xs","id","emploi-temps",4,"ngIf"],[1,"encart-visio","card","ed-card","px-3","pb-3"],[3,"displayTargets","droitsAgenda","espaceTravail","events","idEntity","selectedTargets","typeEntity","needToday"],[1,"encart-edforms","card","ed-card","px-3","pb-3"],["class","btn-action btn-action-needed light-color icon-ed_attention",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-action","btn-action-needed","light-color","icon-ed_attention"],[1,"text-bold"],["type","button",1,"btn","btn-link",3,"click"],["id","emploi-temps",1,"bs-docs-sidebar","d-print-none","hidden-xs"],[1,"hidden-xs",3,"ongletSelectedEvent","ongletSelected"],["id","emploi-du-temps-jour","role","complementary",1,"bs-docs-sidebar","d-print-none","hidden-xs"],[3,"idEntity","schedulerConfig","schedulerTemplateConfig","typeEntity"],[1,"jumbotron","container-bg","double-padding"],[1,"d-print-none"]],template:function(r,o){if(r&1&&(a(0,"div",2),E(1,wp,8,1,"div",3)(2,s0,12,15,"div",4),C(3,"async"),E(4,l0,3,0,"ng-template",null,0,Te),s()),r&2){let d=re(5);c("cgBusy",o.loader),l(),c("ngIf",o.nbDays>0),l(),c("ngIf",x(3,4,o.datasAccueil$))("ngIfElse",d)}},dependencies:[oe,Ee,G,ae,pe,se,Rt,pi,hi,Zn,Gi,bt,Er,Je,In,Bn,Ve,be,Ze],styles:[".accueilenseignant[_ngcontent-%COMP%]   .dhx_cal_container[_ngcontent-%COMP%]{background:none}.accueilenseignant[_ngcontent-%COMP%]   .encart-edforms[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.accueilenseignant[_ngcontent-%COMP%]   .encart-edforms[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:20px;width:49%;border-radius:5px;color:#fff;margin-top:5px}.accueilenseignant[_ngcontent-%COMP%]   .encart-edforms[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin:0 0 5px;padding:3px}.accueilenseignant[_ngcontent-%COMP%]   #quoi-de-neuf[_ngcontent-%COMP%]{margin:30px 0 10px;font-size:17px;border:none;line-height:1;letter-spacing:normal;color:#000}ed-agenda-evenements[_ngcontent-%COMP%]{width:100%}@media screen and (max-width: 990px){.blocs-colonne[_ngcontent-%COMP%]{padding:1px 10px}}#soldes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none}#soldes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 0 10px;overflow:hidden}#soldes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{line-height:1.1}#soldes[_ngcontent-%COMP%]   .badge-solde[_ngcontent-%COMP%]{float:left;margin:0 15px 0 0;padding:10px 0;min-width:75px;background:var(--light-primary-color);border-radius:50px;font-size:15px;font-weight:700;color:#fff;overflow:hidden;text-overflow:ellipsis;text-align:center}#soldes[_ngcontent-%COMP%]   .badge-solde.badgedebiteur[_ngcontent-%COMP%]{background:var(--secondary-color)}"]});let t=i;return t})();function c0(t,i){if(t&1){let e=L();a(0,"button",18),S("click",function(){D(e);let r=h().$implicit,o=h(2);return F(o.openSideMenuEleve(r))}),s()}if(t&2){let e=h().$implicit;it("title","menu de ",e.nom+" "+e.prenom,""),_e("aria-label","Consulter le menu de "+e.nom+" "+e.prenom)}}function d0(t,i){if(t&1){let e=L();a(0,"button",16),S("click",function(){D(e);let r=h().$implicit,o=h(2);return F(o.openSideMenuEleve(r))}),g(1,"img",19),s()}if(t&2){let e=h().$implicit;_e("aria-label","Consulter le menu de "+e.nom+" "+e.prenom),l(),c("src",e.photo,ve)}}function u0(t,i){if(t&1){let e=L();a(0,"button",16),S("click",function(){D(e);let r=h().$implicit,o=h(2);return F(o.openSideMenuEleve(r))}),g(1,"img",20),s()}if(t&2){let e=h().$implicit;_e("aria-label","Consulter le menu de "+e.nom+" "+e.prenom)}}function m0(t,i){if(t&1){let e=L();a(0,"button",16),S("click",function(){D(e);let r=h().$implicit,o=h(2);return F(o.openSideMenuEleve(r))}),g(1,"img",21),s()}if(t&2){let e=h().$implicit;_e("aria-label","Consulter le menu de "+e.nom+" "+e.prenom)}}function p0(t,i){if(t&1){let e=L();a(0,"div",11)(1,"div",12),E(2,c0,1,3,"button",13)(3,d0,2,2,"button",14)(4,u0,2,1,"button",14)(5,m0,2,1,"button",14),a(6,"div",15)(7,"button",16),S("click",function(){let r=D(e).$implicit,o=h(2);return F(o.openSideMenuEleve(r))}),a(8,"span",17),u(9),s(),u(10),g(11,"br"),u(12),g(13,"br"),a(14,"small")(15,"em"),u(16),s()()()()()()}if(t&2){let e=i.$implicit,n=h(2);l(2),c("ngIf",n.authStore.currentUser.profile.eleves.length>0),l(),c("ngIf",e.photo!==""),l(),c("ngIf",e.photo===""&&e.sexe==="F"),l(),c("ngIf",e.photo===""&&e.sexe==="M"),l(2),_e("aria-label","Consulter le menu de "+e.nom+" "+e.prenom),l(2),k(e.nom),l(),H(" ",e.particule?" ("+e.particule+")":" "," "),l(2),H(" ",e.prenom," "),l(4),k(e.classe.libelle)}}function h0(t,i){if(t&1&&(a(0,"div",6)(1,"div",7)(2,"h3",8),u(3),s()(),a(4,"div",9),E(5,p0,17,9,"div",10),C(6,"trackByProperty"),s()()),t&2){let e=h();l(3),H("",e.authStore.currentUser.profile.eleves.length," stagiaires"),l(2),c("ngForOf",e.authStore.currentUser.profile.eleves)("ngForTrackBy",x(6,3,"id"))}}function f0(t,i){t&1&&(a(0,"div",22)(1,"h3"),u(2,"Aucun stagiaire"),s()())}var ac=(()=>{let i=class i{constructor(n,r){this.authStore=n,this.menuStore=r}ngOnInit(){this.menuStore.select$().pipe(Ke(n=>this.monMEDMenu=new zn(n))).subscribe()}resetMenuStore(){let n,r;this.monMEDMenu.entries[1].isOpen&&(this.monMEDMenu.entries[1].isOpen=!1),this.monMEDMenu.entries[1].id!==this.authStore.currentUser.profile.eleves[0].id&&(n=this.authStore.currentUser.profile.eleves.findIndex(o=>o.id===this.monMEDMenu.entries[1].id)+1,r=this.monMEDMenu.entries[1],this.monMEDMenu.entries.splice(1,1),this.monMEDMenu.entries.splice(n,0,r)),this.menuStore.setStore(this.monMEDMenu)}openSideMenuEleve(n){this.resetMenuStore(),this.indexBlockToOpen=this.monMEDMenu.entries.findIndex(o=>o.id===n.id),this.monMEDMenu.entries[this.indexBlockToOpen].isOpen=!this.monMEDMenu.entries[this.indexBlockToOpen].isOpen;let r=this.monMEDMenu.entries[this.indexBlockToOpen];this.monMEDMenu.entries.splice(this.indexBlockToOpen,1),this.monMEDMenu.entries.splice(1,0,r),this.menuStore.setStore(this.monMEDMenu)}};i.\u0275fac=function(r){return new(r||i)(v(M),v(oi))},i.\u0275cmp=w({type:i,selectors:[["ed-trombi-tuteur"]],standalone:!1,decls:9,vars:3,consts:[["noEleves",""],["id","trombi-tuteur","xmlns","http://www.w3.org/1999/html",1,"ed-container","double-padding","trombi-tuteur-container",3,"cgBusy"],[1,"entete-page"],[1,"clearfix"],[1,"container-bg","double-padding"],["class","panel",4,"ngIf","ngIfElse"],[1,"panel"],[1,"d-flex","align-items-center"],[1,"mt-1"],[1,"d-flex","flex-wrap","with-margin-left","mt-n1"],["class","d-inline-block text-center mx-0 my-0 liste-eleves-padding border border-3 border-white liste-eleves",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-inline-block","text-center","mx-0","my-0","liste-eleves-padding","border","border-3","border-white","liste-eleves"],[1,"thumbnail","text-center"],["class","tagDispo border border-0 no-background no-padding","type","button",3,"title","click",4,"ngIf"],["type","button","class","border border-0 no-background no-padding",3,"click",4,"ngIf"],[1,"caption"],["type","button",1,"border","border-0","no-background","no-padding",3,"click"],[1,"nom"],["type","button",1,"tagDispo","border","border-0","no-background","no-padding",3,"click","title"],["alt","photo \xE9l\xE8ve",3,"src"],["alt","photo \xE9l\xE8ve fille","src","/assets/images/eleve-fille.jpg"],["alt","photo \xE9l\xE8ve gar\xE7on","src","/assets/images/eleve-garcon.jpg"],[1,"jumbotron"]],template:function(r,o){if(r&1&&(a(0,"div",1)(1,"header",2)(2,"h2"),u(3,"Trombinoscope"),s()(),g(4,"div",3),a(5,"div",4),E(6,h0,7,5,"div",5)(7,f0,3,0,"ng-template",null,0,Te),s()()),r&2){let d=re(8);c("cgBusy",o.loader),l(6),c("ngIf",o.authStore.currentUser.profile.eleves.length>0)("ngIfElse",d)}},dependencies:[Ee,G,se,be],styles:[".tagDispo[_ngcontent-%COMP%]{position:absolute;z-index:999;right:3px;top:90px}.liste-eleves[_ngcontent-%COMP%]{cursor:pointer}.liste-eleves[_ngcontent-%COMP%]:hover{transform:scale(1.1)}"]});let t=i;return t})();function v0(t,i){if(t&1&&(a(0,"div",6),u(1," Votre mot de passe expire dans "),a(2,"b"),u(3),s(),u(4," jours. Vous pouvez le modifier en "),a(5,"a",7),u(6,"cliquant ici"),s(),u(7," . "),s()),t&2){let e=h();l(3),k(e.nbDays)}}function _0(t,i){if(t&1&&g(0,"img",10),t&2){let e=h(2);c("src",e.urlTelechargementLogoEtab,ve)}}function E0(t,i){if(t&1&&(a(0,"div",3)(1,"div",8),u(2),E(3,_0,1,1,"img",9),s()()),t&2){let e=h();l(2),H(" ",e.authStore.currentUser.nomEtablissement," "),l(),c("ngIf",e.authStore.currentUser.logoEtablissement)}}function y0(t,i){t&1&&(a(0,"h2",3),u(1," Bienvenue sur votre espace EcoleDirecte "),s())}var sc=(()=>{let i=class i{constructor(n){this.authStore=n,this.nbDays=0,this.urlTelechargementLogoEtab=`${_t()}/telechargement${Ye.apiExtension}?cToken=${n.cToken()}&verbe=get&fichierId=${n.currentUser.logoEtablissement}&leTypeDeFichier=IMPORT_FTP`,this.nbDays=this.authStore.snapshot.nbJourMdpExire}};i.\u0275fac=function(r){return new(r||i)(v(M))},i.\u0275cmp=w({type:i,selectors:[["ed-accueil-entreprise"]],standalone:!1,decls:8,vars:3,consts:[[1,"accueilentreprise","accueiluserauth","container-fluid"],["class","banner",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"row","padding-home"],["class","col-md-12",4,"ngIf"],[1,"banner"],["href","utilisateur/personnalisation"],["id","nom-etb"],["alt","logo \xE9tablissement","class","pull-right img-rounded logo-etab",3,"src",4,"ngIf"],["alt","logo \xE9tablissement",1,"pull-right","img-rounded","logo-etab",3,"src"]],template:function(r,o){r&1&&(a(0,"div",0),E(1,v0,8,1,"div",1),a(2,"div",2)(3,"div",3)(4,"div",4),E(5,E0,4,2,"div",5)(6,y0,2,0,"h2",5),g(7,"ed-trombi-tuteur"),s()()()()),r&2&&(l(),c("ngIf",o.nbDays>0),l(4),c("ngIf",o.authStore.currentUser.logoEtablissement||o.authStore.currentUser.nomEtablissement),l(),c("ngIf",!(o.authStore.currentUser.messageMaintenance&&o.authStore.currentUser.messageMaintenance.length>0)&&o.needThis))},dependencies:[G,ac],encapsulation:2,changeDetection:0});let t=i;return t})();var b0=(t,i)=>({"col-lg-9":t,"col-lg-12":i}),C0=(t,i)=>({"col-lg-12":t,"col-lg-6":i}),S0=t=>({row:t}),Po=t=>({"col-lg-6":t}),x0=(t,i,e)=>({"btn-action-needed":t,"icon-cross":i,"icon-ed_valider":e}),T0=t=>[t],M0=()=>["/Paiements"],Ao=t=>({badgedebiteur:t}),P0=()=>["/Compte"];function A0(t,i){if(t&1&&(a(0,"div",7),u(1," Votre mot de passe expire dans "),a(2,"b"),u(3),s(),u(4," jours. Vous pouvez le modifier en "),a(5,"a",8),u(6,"cliquant ici"),s(),u(7," . "),s()),t&2){let e=h();l(3),k(e.nbDays)}}function I0(t,i){t&1&&g(0,"div",23)}function w0(t,i){if(t&1&&(a(0,"div",24)(1,"h2",25),u(2,"Quoi de neuf ?"),s(),g(3,"ed-timeline",26),s()),t&2){let e=h(2);l(3),c("idUser",e.idUser)("timelineEvents",e.timelineEvents)}}function k0(t,i){if(t&1&&g(0,"img",30),t&2){let e=h(3);c("src",e.urlTelechargementLogoEtab,ve)}}function O0(t,i){if(t&1&&(a(0,"div",27)(1,"div",28),u(2),E(3,k0,1,1,"img",29),s()()),t&2){let e=h(2);l(2),H(" ",e.authStore.currentUser.nomEtablissement," "),l(),c("ngIf",e.authStore.currentUser.logoEtablissement)}}function D0(t,i){t&1&&(a(0,"h2",27),u(1," Bienvenue sur votre espace EcoleDirecte "),s())}function F0(t,i){if(t&1&&(le(0),g(1,"ed-tab-postits",32),ce()),t&2){let e=h(3);l(),c("isActifPostitsEspacesTravail",e.isActifPostitsEspacesTravail)("tabPostits",e.tabPostits)}}function R0(t,i){t&1&&(a(0,"h2"),u(1," Informations "),s())}function N0(t,i){if(t&1&&(a(0,"div",38)(1,"h3"),u(2),s(),g(3,"p",39),C(4,"ariaConvertNewline"),C(5,"filterHtml"),s()),t&2){let e=i.$implicit;l(2),k(e.titre),l(),c("innerHTML",x(5,4,x(4,2,e.contenu)),ue)}}function U0(t,i){if(t&1&&(a(0,"div",33)(1,"div",34),E(2,R0,2,0,"h2",35)(3,N0,6,6,"div",36),C(4,"trackByProperty"),g(5,"ed-postits",37),s()()),t&2){let e=h(3);l(2),c("ngIf",e.authStore.currentUser.messageMaintenance&&e.authStore.currentUser.messageMaintenance.length>0||(e.tabPostits==null?null:e.tabPostits.length)>0),l(),c("ngForOf",e.authStore.currentUser.messageMaintenance)("ngForTrackBy",x(4,7,"$index")),l(2),c("configPostits",e.postitConfig)("idUser",e.idUser)("typeUser",e.typeUser)("tabPostIts",e.tabPostits)}}function L0(t,i){if(t&1&&(a(0,"div",31),E(1,F0,2,2,"ng-container",6)(2,U0,6,9,"ng-template",null,1,Te),s()),t&2){let e=re(3),n=h(2);c("ngClass",N(3,Po,(n.tabPostits==null?null:n.tabPostits.length)>0||n.isActifPostitsEspacesTravail)),l(),c("ngIf",n.espacesTravailActif&&n.isActifPostitsEspacesTravail)("ngIfElse",e)}}function B0(t,i){if(t&1){let e=L();a(0,"div",40)(1,"h2",41),u(2,"Mes Rendez-vous"),s(),a(3,"button",42),S("click",function(){D(e);let r=h(2);return F(r.openAgenda())}),u(4,"Tous les rdv"),s(),g(5,"ed-agenda-evenements",43),s()}if(t&2){let e=h(2);l(5),c("displayTargets",!1)("droitsAgenda",e.agendaConfig)("events",e.tabRDVToday)("idEntity",e.idUser)("typeEntity",e.typeUser)("needToday",!0)}}function V0(t,i){if(t&1&&(a(0,"div",50),u(1),C(2,"base64"),s()),t&2){let e=h().$implicit;l(),k(me(2,1,e.detail,"decode"))}}function j0(t,i){if(t&1){let e=L();a(0,"li",47)(1,"p")(2,"span",48),u(3),s()(),E(4,V0,3,4,"div",49),a(5,"button",42),S("click",function(){let r=D(e).$implicit,o=h(3);return F(o.openSondageEleve(r))}),u(6,"R\xE9pondre au sondage"),s()()}if(t&2){let e=i.$implicit;l(3),k(e.libelle),l(),c("ngIf",e.detail!=="")}}function z0(t,i){if(t&1&&(a(0,"div",44)(1,"h2",41),u(2,"Sondages"),s(),a(3,"ul",45),E(4,j0,7,2,"li",46),C(5,"trackByProperty"),s()()),t&2){let e=h(2);l(4),c("ngForOf",e.tabRDTSondages)("ngForTrackBy",x(5,2,"$index"))}}function q0(t,i){if(t&1){let e=L();a(0,"li",47)(1,"p")(2,"span",48),u(3),s()(),a(4,"button",42),S("click",function(){let r=D(e).$implicit,o=h(3);return F(o.openEDForms(r))}),u(5),s()()}if(t&2){let e=i.$implicit;l(3),k(e.titre),l(2),H("R\xE9pondre au ",e.typeToLibelleEDForms,"")}}function H0(t,i){if(t&1&&(a(0,"div",44)(1,"h2",41),u(2,"Formulaires"),s(),a(3,"ul"),E(4,q0,6,2,"li",46),C(5,"trackByProperty"),s()()),t&2){let e=h(2);l(4),c("ngForOf",e.tabEDForms)("ngForTrackBy",x(5,2,"idParticipant"))}}function G0(t,i){if(t&1&&(a(0,"div",55),u(1),s()),t&2){let e=h(3);l(),k(e.commentaireDossierInsFamille)}}function $0(t,i){if(t&1&&(a(0,"li",56)(1,"p",48),u(2,"Dossier famille"),s(),a(3,"a",57)(4,"span",58),u(5),s()()()),t&2){let e=h(3);l(5),k(e.LIBELLE_DOSSIER_A_COMPLETER)}}function K0(t,i){if(t&1&&(a(0,"div",55),u(1),s()),t&2){let e=h().$implicit;l(),H(" ",e.commentaire," ")}}function Q0(t,i){if(t&1){let e=L();a(0,"button",42),S("click",function(){D(e);let r=h().$implicit,o=h(3);return F(o.openDossierEleve(r.id))}),g(1,"span",61),C(2,"filterHtml"),s()}if(t&2){let e=h().$implicit,n=h(3);l(),c("innerHTML",x(2,1,n.getLibelleEtapeInscription(e)),ue)}}function W0(t,i){if(t&1){let e=L();a(0,"button",42),S("click",function(){D(e);let r=h(5);return F(r.openSuiviSignaturesInsReins())}),g(1,"span",39),C(2,"filterHtml"),s()}if(t&2){let e=h(2).$implicit,n=h(3);l(),c("innerHTML",x(2,1,n.getLibelleEtapeInscription(e)),ue)}}function J0(t,i){if(t&1){let e=L();a(0,"button",42),S("click",function(){D(e);let r=h(2).$implicit,o=h(3);return F(o.openDossierEleve(r.id,!0))}),g(1,"span",39),C(2,"filterHtml"),s()}if(t&2){let e=h(2).$implicit,n=h(3);l(),c("innerHTML",x(2,1,n.getLibelleEtapeInscription(e)),ue)}}function X0(t,i){if(t&1&&(le(0),E(1,W0,3,3,"button",62)(2,J0,3,3,"ng-template",null,2,Te),ce()),t&2){let e=re(3),n=h().$implicit,r=h(3);l(),c("ngIf",n.isSignatairesManquants&&n.etapeInscription===r.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE2_REMPLIE)("ngIfElse",e)}}function Y0(t,i){if(t&1&&(a(0,"li",59)(1,"p",48),u(2),C(3,"displayNom"),s(),E(4,K0,2,1,"div",52)(5,Q0,3,3,"button",60)(6,X0,4,2,"ng-container",35),s()),t&2){let e=i.$implicit,n=h(3);c("ngClass",ya(9,x0,e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE2_VIDE||e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE2_REMPLIE&&(!e.isReglementOK||e.isSignatairesManquants)||e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE1_VIDE,e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE2_VIDE||e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE2_REMPLIE&&(!e.isReglementOK||e.isSignatairesManquants)||e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE1_VIDE,!(e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE2_VIDE||e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE2_REMPLIE&&(!e.isReglementOK||e.isSignatairesManquants)||e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE1_VIDE))),l(2),H(" ",Pn(3,5,e,!1,!1)," "),l(2),c("ngIf",e.commentaire!==""&&(e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE1_VIDE||e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE2_VIDE)),l(),c("ngIf",e.etapeInscription===n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE1_VIDE),l(),c("ngIf",e.etapeInscription!==n.CONST_INSCRIPTION_ETAPES.INSCR_ETAPE1_VIDE)}}function Z0(t,i){if(t&1&&(a(0,"div",51)(1,"h2",41),u(2),s(),E(3,G0,2,1,"div",52),a(4,"ul"),E(5,$0,6,1,"li",53)(6,Y0,7,13,"li",54),C(7,"trackByProperty"),s()()),t&2){let e=h(2);l(2),H("Dossier",e.tabInscriptions.length>1?"s":""," d'inscription ou de r\xE9-inscription"),l(),c("ngIf",e.commentaireDossierInsFamille),l(2),c("ngIf",e.displayEtatFamille===!0&&e.etatDossierInsFamille!==e.CONST_INSCRIPTION_ETAPES.INSCR_FAMILLE_VALIDE),l(),c("ngForOf",e.tabInscriptions)("ngForTrackBy",x(7,5,"$index"))}}function eh(t,i){if(t&1&&(le(0),g(1,"ed-tab-agenda",64),ce()),t&2){let e=h(3);l(),c("agendaEvents",e.agendaEvents)}}function th(t,i){if(t&1&&(a(0,"div",65)(1,"h2",41),u(2,"Agenda"),s(),a(3,"a",66),u(4,"Tout l'agenda"),s(),g(5,"ed-agenda-evenements",67),s()),t&2){let e=h(3);l(3),c("routerLink",N(6,T0,"/"+e.typeUser+"/"+e.idUser+"/Agenda")),l(2),c("displayTargets",!1)("droitsAgenda",e.agendaConfig)("events",e.agendaEvents)("idEntity",e.idUser)("typeEntity",e.typeUser)}}function ih(t,i){if(t&1&&(a(0,"div",63),E(1,eh,2,1,"ng-container",6)(2,th,6,8,"ng-template",null,3,Te),s()),t&2){let e=re(3),n=h(2);c("ngClass",N(3,Po,(n.tabPostits==null?null:n.tabPostits.length)===0&&!n.isActifPostitsEspacesTravail)),l(),c("ngIf",n.espacesTravailActif&&n.isActifAgendaEvenementsEspacesTravail)("ngIfElse",e)}}function nh(t,i){t&1&&(a(0,"h2",41),u(1,"Porte-monnaie"),s())}function rh(t,i){if(t&1&&(a(0,"a",74)(1,"span",75),g(2,"span",76),u(3),C(4,"number"),s()()),t&2){let e=h().$implicit,n=h(3);c("routerLink",K(7,M0)),l(),c("ngClass",N(8,Ao,e.solde<0)),l(),c("textContent",e.solde<0?"":"+"),l(),H(" ",me(4,4,e.solde,n.digitsInfo)," ")}}function oh(t,i){if(t&1&&(a(0,"a",74)(1,"span",75),g(2,"span",76),u(3),C(4,"number"),s()()),t&2){let e=h().$implicit,n=h(3);c("routerLink",K(7,P0)),l(),c("ngClass",N(8,Ao,e.solde<0)),l(),c("textContent",e.solde<0?"":"+"),l(),H(" ",me(4,4,e.solde,n.digitsInfo)," ")}}function ah(t,i){if(t&1&&(a(0,"span",75),g(1,"span",76),u(2),C(3,"number"),s()),t&2){let e=h().$implicit,n=h(3);c("ngClass",N(6,Ao,e.solde<0)),l(),c("textContent",e.solde<0?"":"+"),l(),H(" ",me(3,3,e.solde,n.digitsInfo)," ")}}function sh(t,i){if(t&1&&(a(0,"li"),E(1,rh,5,10,"a",71)(2,oh,5,10,"a",71)(3,ah,4,8,"span",72),a(4,"span",73),u(5),s()()),t&2){let e=i.$implicit,n=h(3);l(),c("ngIf",n.isPaiementEnable&&e.isPMPayable),l(),c("ngIf",n.isPaiementEnable&&!e.isPMPayable),l(),c("ngIf",!n.isPaiementEnable),l(2),k(e.libelle)}}function lh(t,i){if(t&1&&(a(0,"div",68),E(1,nh,2,0,"h2",69),a(2,"ul"),E(3,sh,6,4,"li",70),C(4,"trackByProperty"),s()()),t&2){let e=h(2);c("ngClass",N(6,Po,(e.tabPostits==null?null:e.tabPostits.length)===0&&!e.isActifPostitsEspacesTravail)),l(),c("ngIf",e.lesSoldes.length>=1),l(2),c("ngForOf",e.lesSoldes)("ngForTrackBy",x(4,4,"$index"))}}function ch(t,i){if(t&1&&(a(0,"div"),E(1,I0,1,0,"div",9),a(2,"div",10),E(3,w0,4,2,"div",11),a(4,"div",12)(5,"div",13),E(6,O0,4,2,"div",14)(7,D0,2,0,"h2",14)(8,L0,4,5,"div",15),a(9,"div",16)(10,"div",17),E(11,B0,6,6,"div",18)(12,z0,6,4,"div",19)(13,H0,6,4,"div",19)(14,Z0,8,7,"div",20)(15,ih,4,5,"div",21)(16,lh,5,8,"div",22),s()()()()()()),t&2){let e=h();l(),c("ngIf",e.timelineEvents&&e.timelineEvents.length>0),l(2),c("ngIf",e.timelineEvents&&e.timelineEvents.length>0),l(),c("ngClass",ft(14,b0,e.timelineEvents&&e.timelineEvents.length>0,e.timelineEvents.length===0)),l(2),c("ngIf",e.authStore.currentUser.logoEtablissement||e.authStore.currentUser.nomEtablissement),l(),c("ngIf",!(e.authStore.currentUser.messageMaintenance&&e.authStore.currentUser.messageMaintenance.length>0)&&!(e.tabPostits&&e.tabPostits.length>0)),l(),c("ngIf",e.tabPostits||e.isActifPostitsEspacesTravail&&e.espacesTravailActif),l(),c("ngClass",ft(17,C0,(e.tabPostits==null?null:e.tabPostits.length)===0&&!e.isActifPostitsEspacesTravail,(e.tabPostits==null?null:e.tabPostits.length)>0||e.isActifPostitsEspacesTravail)),l(),c("ngClass",N(20,S0,(e.tabPostits==null?null:e.tabPostits.length)===0&&!e.isActifPostitsEspacesTravail)),l(),c("ngIf",(e.tabRDVToday==null?null:e.tabRDVToday.length)>0),l(),c("ngIf",e.tabRDTSondages&&e.tabRDTSondages.length>0),l(),c("ngIf",e.tabEDForms&&e.tabEDForms.length>0),l(),c("ngIf",e.isDossierInscriptionActif&&e.tabInscriptions.length>0),l(),c("ngIf",(e.agendaEvents==null?null:e.agendaEvents.length)>0||e.espacesTravailActif&&e.isActifAgendaEvenementsEspacesTravail),l(),c("ngIf",e.lesSoldes.length>0)}}function dh(t,i){t&1&&(a(0,"div",77)(1,"h3",78),u(2,"Aucun contenu n'est disponible"),s()())}var lc=(()=>{let i=class i extends Ie(){constructor(n,r,o,d,m,p,f,_,y,T,P,A){super(),this.uiService=n,this.authStore=r,this.loaderService=o,this.timelineService=d,this.rdtService=m,this.modalService=p,this.messageService=f,this.dossierInscriptionFamilleService=_,this.edfService=y,this.router=T,this.events=P,this.cloudService=A,this.tabPostits=[],this.tabEDForms=[],this.agendaEvents=[],this.timelineEvents=[],this.tabRDTSondages=[],this.tabInscriptions=[],this.tabReunions=[],this.lesSoldes=[],this.isMessagerieActive=!1,this.isDocumentsActifs=!1,this.isSituationFinanciereActive=!1,this.isPaiementEnable=!1,this.isDossierInscriptionActif=!1,this.displayEtatFamille=!1,this.CONST_INSCRIPTION_ETAPES=jr,this.LIBELLE_DOSSIER_A_COMPLETER=ls,this.tabRDVToday=[],this.nbDays=0,this.agendaConfig={CAN_CREATE:!1,CAN_UPDATE:!1,CAN_DELETE:!1},this.postitConfig={addPostit:!1,updatePostit:!1,deletePostit:!1,displayDateCreated:!0,displayDateLimit:!1,displayTargets:!1,displayFormTargets:!1,selectTargets:[],visibilityPostitPast:!1,displayLibelleAuteur:!1,contexte:ti.ACCUEIL},this.nbDays=this.authStore.snapshot.nbJourMdpExire}ngOnInit(){this.typeUser=this.authStore.currentUser.typeCompte,this.idUser=this.authStore.currentUser.id,this.espacesTravailActif=V.isModuleEnabled(this.authStore.currentUser,b.CLOUD),this.urlTelechargementLogoEtab=`${_t()}/telechargement${Ye.apiExtension}?cToken=${this.authStore.cToken()}&verbe=get&fichierId=${this.authStore.currentUser.logoEtablissement}&leTypeDeFichier=IMPORT_FTP`,this.isMessagerieActive=V.isModuleEnabled(this.authStore.currentUser,b.MESSAGERIE),this.isDocumentsActifs=V.isModuleEnabled(this.authStore.currentUser,b.DOCUMENTS),this.isSituationFinanciereActive=V.isModuleEnabled(this.authStore.currentUser,b.SITUATION_FINANCIERE),this.isPaiementEnable=V.isModuleEnabled(this.authStore.currentUser,b.PAIEMENT_EN_LIGNE),this.isDossierInscriptionActif=V.isModuleEnabled(this.authStore.currentUser,b.DOSSIER_INSCRIPTION),this.isActifPostitsEspacesTravail=V.getModuleParametre(b.CLOUD,"isActifPostitsEspacesTravail",this.authStore.currentUser)>0,this.isActifAgendaEvenementsEspacesTravail=V.getModuleParametre(b.CLOUD,"isActifAgendaEvenementsEspacesTravail",this.authStore.currentUser)>0;let n=V.getModuleParametre(b.PAIEMENT_EN_LIGNE,"codeDevise",this.authStore.currentUser);this.digitsInfo=Vn.infosDevise(n).digitsInfo,this.refreshData(),this.events.select$("array:removeEntityById").pipe(De(this._destroyRef)).subscribe(r=>{r>0&&Array.isArray(this.tabEDForms)&&(this.tabEDForms=this.tabEDForms.filter(o=>r!==o.idParticipant))})}getLibelleEtapeInscription(n){return cs.getLibelleEtapeInscription(n)}openSondageEleve(n){let r={sondage:n},o={id:this.modalService.getModalsCount()+1,initialState:r,ignoreBackdropClick:!0,class:"modal-lg"};this.modalService.show(_r,o),this.modalService.onHide.pipe(ke(1),tt(d=>d===Qe.validation),We(d=>(this.loader=this.loaderService.show(this),this.rdtService.getSondages())),q(d=>{this.tabRDTSondages=d.filter(m=>m.id!==n.id)}),ge(()=>this.loaderService.hide(this)),ie(d=>this.uiService.notifyErrorThenEmpty(d,!0,"Erreur"))).subscribe()}isPast(n){return vt.isAfter(new Date,vt.stringToDate(n))}refreshData(){this.loader=this.loaderService.show(this),this.datasAccueil$=ct([this.timelineService.communTimeline(this.typeUser,this.idUser),this.dossierInscriptionFamilleService.getDossierInscription(this.authStore.currentUser.codeOgec,this.typeUser,this.idUser,!0,!0),this.rdtService.getSondages(),this.edfService.getFS(this.typeUser,this.idUser),this.messageService.getUnreadMessages(this.typeUser,this.idUser),this.cloudService.getVisioToday(this.idUser,this.typeUser)]).pipe(q(n=>{var o,d,m;let r=[];if(this.tabPostits=(o=n[0].postits)==null?void 0:o.map(p=>new li(p)),this.agendaEvents=(d=n[0].evenements)==null?void 0:d.map(p=>ai.cleanEvent(new Ot(p))),this.tabReunions=n[0].reunions||[],this.tabReunions.forEach((p,f)=>{if(!this.isPast(p.dateReunion)){let _=new Qt({date:p.dateReunion+" "+p.heureDebut+":00",description:p.libelleReunion+" / (pour "+p.eleve.prenom+")",typeElement:"ReunionPPFamille",idElement:f,titre:"Nouvelle r\xE9union parents/prof disponible",soustitre:"",idUser:p.eleve.id,typeUser:O.ELEVE,contenu:"",afficherHeure:!1});r.push(_)}}),this.isDocumentsActifs){let p=["documentsFacture","documentsNote","documentsVS","documentsAdm"];for(let[f,_]of p.entries())if(Object.prototype.hasOwnProperty.call(n[0],_)){let y=n[0][_];for(let T of y){let P=new Qt({date:T.date,typeElement:"DocumentFamille",idElement:f,titre:"Nouveau document disponible",soustitre:"",contenu:"",idUser:this.idUser,typeUser:this.typeUser,description:T.libelle,afficherHeure:!1});r.push(P)}}}if(this.isSituationFinanciereActive&&(this.lesSoldes=Object.isExists(n[0].comptes)?n[0].comptes.comptes.filter(p=>p.typeCompte===Ui.pm&&p.solde!==0||p.typeCompte===Ui.pmactivite&&p.solde<0).map(p=>new Hn(p)):[]),r=[...r,...n[4].slice(0,10).map(p=>new Qt({date:p.date,contenu:p.content,description:p.subject,titre:p.from.civilite+" "+p.from.prenom+" "+p.from.nom,idElement:p.id,typeElement:"Messagerie",idUser:this.idUser,typeUser:this.typeUser,afficherHeure:!1}))],this.timelineEvents=[...this.timelineEvents,...r],this.tabInscriptions=n[1].inscriptions,this.commentaireDossierInsFamille=n[1].commentaireFamille,this.etatDossierInsFamille=n[1].etatFamille,Object.isExists(this.tabInscriptions)&&(this.displayEtatFamille=this.tabInscriptions.filter(p=>p.etapeInscription>=jr.INSCR_ETAPE2_REMPLIE).length===this.tabInscriptions.length),this.tabRDTSondages=n[2],this.tabEDForms=n[3],((m=n[5])==null?void 0:m.length)>0)for(let p of n[5])if(p.typeEvenement===Ua.RPPFamille&&!p.isVisio){let f=this.tabRDVToday.find(_=>_.id===p.id&&_.libelle===p.libelle);Object.isExists(f)?(p.heureDebut<f.heureDebut&&(f.heureDebut=p.heureDebut),p.heureFin>f.heureFin&&(f.heureFin=p.heureFin),f.nomAuteur=""):this.tabRDVToday.push(p)}else this.tabRDVToday.push(p)}),ge(()=>this.loaderService.hide(this)),ie(n=>this.uiService.notifyErrorThenEmpty(n,!0,"Erreur")))}openEDForms(n){this.router.navigate(["",{outlets:{auxiliaryModal:["repondre-au-fs"]}}],{skipLocationChange:!0,queryParams:{idFS:n.id,idParticipant:n.idParticipant,titre:n.titre}}).catch(()=>console.error("AccueilFamilleComponent.openEDForms navigate to fs form"))}openDossierEleve(n,r=!1){r?this.router.navigate(["/F/DossierInscription"]).catch(()=>console.error("AccueilFamilleComponent.openDossierEleve navigate to dossier eleve")):this.router.navigate(["/F/DossierInscription/dossiersEleves"],{queryParams:{idEleve:n}}).catch(()=>console.error("AccueilFamilleComponent.openDossierEleve navigate to dossier eleve"))}openAgenda(){let n="/"+this.authStore.currentUser.typeCompte+"/"+this.authStore.currentUser.id+"/Agenda";this.router.navigate([n],{queryParams:{selectAgendaRDV:!0}}).catch(()=>console.error("AccueilFamilleComponent.openAgenda"))}openSuiviSignaturesInsReins(){this.router.navigate(["/F/DossierInscription/signatures"]).catch(()=>console.error("AccueilFamilleComponent.openSuiviSignaturesInsReins navigate to suivi signatures"))}};i.\u0275fac=function(r){return new(r||i)(v(ye),v(M),v(Re),v(di),v(Bi),v(Fe),v(Gn),v(ds),v(ci),v(Q),v(ni),v(si))},i.\u0275cmp=w({type:i,selectors:[["ed-accueil-famille"]],standalone:!1,features:[Oe],decls:6,vars:6,consts:[["noAccueil",""],["onlyPostIts",""],["btnLinkDossierEleve",""],["onlyAgendaEtab",""],[1,"accueilfamille","accueiluserauth","container-fluid",3,"cgBusy"],["class","banner",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"banner"],["href","utilisateur/personnalisation"],["class","d-none d-lg-block d-print-none separator",4,"ngIf"],[1,"row"],["class","d-none d-lg-block col-lg-3 timeline-famille double-padding padding-home",4,"ngIf"],[1,"",3,"ngClass"],[1,"row","padding-home"],["class","col-lg-12",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"double-padding",3,"ngClass"],[1,"blocs-colonne","margin-bottom",3,"ngClass"],["class","encart-agenda card ed-card px-3 pb-3",4,"ngIf"],["class","encart-rdt-sondages card ed-card px-3 pb-3",4,"ngIf"],["class","hidden-xs card ed-card px-3 pb-3","id","dossierInscription",4,"ngIf"],["class","card ed-card px-3 pb-3",3,"ngClass",4,"ngIf"],["class","hidden-xs card ed-card px-3 pb-3","id","soldes",3,"ngClass",4,"ngIf"],[1,"d-none","d-lg-block","d-print-none","separator"],[1,"d-none","d-lg-block","col-lg-3","timeline-famille","double-padding","padding-home"],["id","quoi-de-neuf"],[3,"idUser","timelineEvents"],[1,"col-lg-12"],["id","nom-etb"],["alt","logo \xE9tablissement","class","float-end rounded logo-etab",3,"src",4,"ngIf"],["alt","logo \xE9tablissement",1,"float-end","rounded","logo-etab",3,"src"],[3,"ngClass"],[3,"isActifPostitsEspacesTravail","tabPostits"],["id","encart-postit"],[1,"no-padding","blocs-colonne","margin-bottom"],[4,"ngIf"],["class","jumbotron msg-maintenance",4,"ngFor","ngForOf","ngForTrackBy"],[3,"configPostits","idUser","typeUser","tabPostIts"],[1,"jumbotron","msg-maintenance"],[3,"innerHTML"],[1,"encart-agenda","card","ed-card","px-3","pb-3"],[1,"text-center","w-100"],["type","button",1,"btn","btn-link",3,"click"],[3,"displayTargets","droitsAgenda","espaceTravail","events","idEntity","selectedTargets","typeEntity","needToday"],[1,"encart-rdt-sondages","card","ed-card","px-3","pb-3"],[1,"rdt"],["class","btn-action btn-action-needed light-color icon-ed_attention",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-action","btn-action-needed","light-color","icon-ed_attention"],[1,"text-bold"],["class","alert alert-info",4,"ngIf"],[1,"alert","alert-info"],["id","dossierInscription",1,"hidden-xs","card","ed-card","px-3","pb-3"],["class","alert alert-warning",4,"ngIf"],["class","btn-action btn-action-ok icon-ed_valider etape-en-attente btn-action-needed icon-ed_attention",4,"ngIf"],["class","btn-action btn-action-ok icon-ed_valider etape-en-attente",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"alert","alert-warning"],[1,"btn-action","btn-action-ok","icon-ed_valider","etape-en-attente","btn-action-needed","icon-ed_attention"],["routerLink","/F/DossierInscription"],[1,"danger"],[1,"btn-action","btn-action-ok","icon-ed_valider","etape-en-attente",3,"ngClass"],["type","button","class","btn btn-link",3,"click",4,"ngIf"],[1,"danger",3,"innerHTML"],["type","button","class","btn btn-link",3,"click",4,"ngIf","ngIfElse"],[1,"card","ed-card","px-3","pb-3",3,"ngClass"],[3,"agendaEvents"],[1,"encart-agenda"],["href","",1,"mb-4",3,"routerLink"],[3,"displayTargets","droitsAgenda","espaceTravail","events","idEntity","selectedTargets","typeEntity"],["id","soldes",1,"hidden-xs","card","ed-card","px-3","pb-3",3,"ngClass"],["class","text-center w-100",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["href","",3,"routerLink",4,"ngIf"],["class","badge-solde",3,"ngClass",4,"ngIf"],[1,"libelle","text-bold"],["href","",3,"routerLink"],[1,"badge-solde",3,"ngClass"],[3,"textContent"],[1,"jumbotron","container-bg","double-padding"],[1,"d-print-none"]],template:function(r,o){if(r&1&&(a(0,"div",4),E(1,A0,8,1,"div",5)(2,ch,17,22,"div",6),C(3,"async"),E(4,dh,3,0,"ng-template",null,0,Te),s()),r&2){let d=re(5);c("cgBusy",o.loader),l(),c("ngIf",o.nbDays>0),l(),c("ngIf",x(3,4,o.datasAccueil$))("ngIfElse",d)}},dependencies:[oe,Ee,G,ae,se,Rt,pi,hi,Gi,bt,Je,In,Li,ii,Ve,be,Ze],styles:["ed-agenda-evenements[_ngcontent-%COMP%]{width:100%}.encart-rdt-sondages[_ngcontent-%COMP%]   li.btn-action.btn-action-ok.icon-ed_valider.etape-en-attente.icon-ed_attention.ng-star-inserted[_ngcontent-%COMP%]{background:linear-gradient(var(--ultradark-primary-color),var(--dark-primary-color));color:#fff}.encart-rdt-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.encart-rdt-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:20px;width:49%;border-radius:5px;color:#fff;margin-top:5px}.encart-rdt-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin:0 0 5px;padding:3px}.encart-rdt-sondages[_ngcontent-%COMP%]   ul.rdt[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}.encart-rdt-sondages[_ngcontent-%COMP%]   li.btn-action.btn-action-needed.light-color.icon-ed_attention.ng-star-inserted[_ngcontent-%COMP%]{padding:20px;border-radius:5px;color:#fff;background:linear-gradient(var(--smalldark-primary-color),var(--dark-primary-color))}#dossierInscription[_ngcontent-%COMP%]   li.btn-action.btn-action-ok.icon-ed_valider.etape-en-attente.icon-ed_attention.ng-star-inserted[_ngcontent-%COMP%]{background:linear-gradient(var(--ultradark-primary-color),var(--dark-primary-color));color:#fff}#dossierInscription[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}#dossierInscription[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:20px;width:49%;border-radius:5px;color:#fff}#dossierInscription[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2) ~ li[_ngcontent-%COMP%]{margin-top:5px}#dossierInscription[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin:0 0 5px;padding:3px}#soldes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none}#soldes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 0 10px;overflow:hidden}#soldes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{line-height:1.1}#soldes[_ngcontent-%COMP%]   .badge-solde[_ngcontent-%COMP%]{float:left;margin:0 15px 0 0;padding:10px 0;min-width:90px;background:var(--light-primary-color);border-radius:50px;font-size:15px;font-weight:700;color:#fff;overflow:hidden;text-overflow:ellipsis;text-align:center}#soldes[_ngcontent-%COMP%]   .badge-solde.badgedebiteur[_ngcontent-%COMP%]{background:var(--secondary-color)}"]});let t=i;return t})();function uh(t,i){if(t&1&&(a(0,"div",5),u(1," Votre mot de passe expire dans "),a(2,"b"),u(3),s(),u(4," jours. Vous pouvez le modifier en "),a(5,"a",6),u(6,"cliquant ici"),s(),u(7," . "),s()),t&2){let e=h();l(3),k(e.nbDays)}}function mh(t,i){if(t&1&&g(0,"img",17),t&2){let e=h(3);c("src",e.urlTelechargementLogoEtab,ve)}}function ph(t,i){if(t&1&&(a(0,"div",14)(1,"div",15),u(2),E(3,mh,1,1,"img",16),s()()),t&2){let e=h(2);l(2),H(" ",e.authStore.currentUser.nomEtablissement," "),l(),c("ngIf",e.authStore.currentUser.logoEtablissement)}}function hh(t,i){if(t&1&&(le(0),g(1,"ed-tab-postits",20),ce()),t&2){let e=h(3);l(),c("isActifPostitsEspacesTravail",e.isActifPostitsEspacesTravail)("tabPostits",e.tabPostits)}}function fh(t,i){t&1&&(a(0,"h2"),u(1,"Informations"),s())}function gh(t,i){if(t&1&&(a(0,"div",25)(1,"h3"),u(2),s(),g(3,"p",26),C(4,"ariaConvertNewline"),C(5,"filterHtml"),s()),t&2){let e=i.$implicit;l(2),k(e.titre),l(),c("innerHTML",x(5,4,x(4,2,e.contenu)),ue)}}function vh(t,i){if(t&1&&(a(0,"div",21),E(1,fh,2,0,"h2",22)(2,gh,6,6,"div",23),C(3,"trackByProperty"),g(4,"ed-postits",24),s()),t&2){let e=h(3);l(),c("ngIf",e.authStore.currentUser.messageMaintenance&&e.authStore.currentUser.messageMaintenance.length>0||(e.tabPostits==null?null:e.tabPostits.length)>0),l(),c("ngForOf",e.authStore.currentUser.messageMaintenance)("ngForTrackBy",x(3,7,"$index")),l(2),c("configPostits",e.postitConfig)("idUser",e.idUser)("typeUser",e.typeUser)("tabPostIts",e.tabPostits)}}function _h(t,i){if(t&1&&(a(0,"div",18),E(1,hh,2,2,"ng-container",19)(2,vh,5,9,"ng-template",null,1,Te),s()),t&2){let e=re(3),n=h(2);l(),c("ngIf",n.espacesTravailActif&&n.isActifPostitsEspacesTravail)("ngIfElse",e)}}function Eh(t,i){if(t&1){let e=L();a(0,"div",27)(1,"h2",28),u(2,"Mes Rendez-vous"),s(),a(3,"button",29),S("click",function(){D(e);let r=h(2);return F(r.openAgenda())}),u(4,"Tous les rdv"),s(),g(5,"ed-agenda-evenements",30),s()}if(t&2){let e=h(2);l(5),c("displayTargets",!1)("droitsAgenda",e.agendaConfig)("events",e.tabRDVToday)("idEntity",e.idUser)("typeEntity",e.typeUser)("needToday",!0)}}function yh(t,i){if(t&1){let e=L();a(0,"li",33)(1,"p")(2,"strong"),u(3),s()(),a(4,"button",29),S("click",function(){let r=D(e).$implicit,o=h(3);return F(o.openEDForms(r))}),u(5),s()()}if(t&2){let e=i.$implicit;l(3),k(e.titre),l(2),H("R\xE9pondre au ",e.typeToLibelleEDForms,"")}}function bh(t,i){if(t&1&&(a(0,"div",31)(1,"h2",28),u(2,"Formulaires"),s(),a(3,"ul"),E(4,yh,6,2,"li",32),C(5,"trackByProperty"),s()()),t&2){let e=h(2);l(4),c("ngForOf",e.tabEDForms)("ngForTrackBy",x(5,2,"idParticipant"))}}function Ch(t,i){if(t&1&&(le(0),g(1,"ed-tab-agenda",35),ce()),t&2){let e=h(3);l(),c("agendaEvents",e.agendaEvents)}}function Sh(t,i){if(t&1&&(a(0,"div",36)(1,"h2",28),u(2,"Agenda"),s(),a(3,"a",37),u(4,"Tout l'agenda"),s(),g(5,"ed-agenda-evenements",38),s()),t&2){let e=h(3);l(3),nt("href","/",e.typeUser,"/",e.idUser,"/Agenda",ve),l(2),c("displayTargets",!1)("droitsAgenda",e.agendaConfig)("events",e.agendaEvents)("idEntity",e.idUser)("typeEntity",e.typeUser)}}function xh(t,i){if(t&1&&(a(0,"div",34),E(1,Ch,2,1,"ng-container",19)(2,Sh,6,8,"ng-template",null,1,Te),s()),t&2){let e=re(3),n=h(2);l(),c("ngIf",n.espacesTravailActif&&n.isActifAgendaEvenementsEspacesTravail)("ngIfElse",e)}}function Th(t,i){if(t&1&&(a(0,"div",7),E(1,ph,4,2,"div",8)(2,_h,4,2,"div",9),a(3,"div",10),E(4,Eh,6,6,"div",11)(5,bh,6,4,"div",12)(6,xh,4,2,"div",13),s()()),t&2){let e=h();l(),c("ngIf",e.authStore.currentUser.logoEtablissement||e.authStore.currentUser.nomEtablissement),l(),c("ngIf",(e.tabPostits==null?null:e.tabPostits.length)>0||e.espacesTravailActif&&e.isActifPostitsEspacesTravail),l(2),c("ngIf",(e.tabRDVToday==null?null:e.tabRDVToday.length)>0),l(),c("ngIf",e.tabEDForms&&e.tabEDForms.length>0),l(),c("ngIf",(e.agendaEvents==null?null:e.agendaEvents.length)>0||e.espacesTravailActif&&e.isActifAgendaEvenementsEspacesTravail)}}function Mh(t,i){t&1&&(a(0,"div",39)(1,"h3",40),u(2,"Aucun contenu n'est disponible"),s()())}var cc=(()=>{let i=class i{constructor(n,r,o,d,m,p,f,_){this.uiService=n,this.authStore=r,this.timelineService=o,this.loaderService=d,this.edfService=m,this.router=p,this.events=f,this.cloudService=_,this.tabEDForms=[],this.tabRDVToday=[],this.nbDays=0,this.urlTelechargementLogoEtab=`${_t()}/telechargement${Ye.apiExtension}?cToken=${r.cToken()}&verbe=get&fichierId=${r.currentUser.logoEtablissement}&leTypeDeFichier=${La.FICHIER_IMPORT}`,this.idUser=this.authStore.currentUser.id,this.typeUser=this.authStore.currentUser.typeCompte,this.espacesTravailActif=V.isModuleEnabled(this.authStore.currentUser,b.CLOUD),this.isActifPostitsEspacesTravail=V.getModuleParametre(b.CLOUD,"isActifPostitsEspacesTravail",this.authStore.currentUser)>0,this.isActifAgendaEvenementsEspacesTravail=V.getModuleParametre(b.CLOUD,"isActifAgendaEvenementsEspacesTravail",this.authStore.currentUser)>0,this.postitConfig={addPostit:!1,updatePostit:!1,deletePostit:!1,displayDateCreated:!0,displayDateLimit:!1,displayTargets:!1,displayFormTargets:!1,selectTargets:[],visibilityPostitPast:!1,displayLibelleAuteur:!1,contexte:ti.ACCUEIL},this.agendaConfig={CAN_CREATE:!1,CAN_UPDATE:!1,CAN_DELETE:!1},this.nbDays=this.authStore.snapshot.nbJourMdpExire}ngOnInit(){this.loader=this.loaderService.show(this),this.listeTimelineCommun$=ct([this.timelineService.communTimeline(this.typeUser,this.idUser),this.edfService.getFS(this.typeUser,this.idUser),this.cloudService.getVisioToday(this.idUser,this.typeUser)]).pipe(q(n=>{var r,o;this.tabPostits=(r=n[0].postits)==null?void 0:r.map(d=>new li(d)),this.agendaEvents=(o=n[0].evenements)==null?void 0:o.map(d=>ai.cleanEvent(new Ot(d))),this.tabEDForms=n[1],this.tabRDVToday=Array.isArray(n[2])?[...n[2]]:[]}),ge(()=>this.loaderService.hide(this)),ie(n=>this.uiService.notifyErrorThenEmpty(n,!0,"Erreur"))),this.events.subscribe("array:removeEntityById",n=>{n>0&&Array.isArray(this.tabEDForms)&&(this.tabEDForms=this.tabEDForms.filter(r=>n!==r.idParticipant))})}ngOnDestroy(){this.events.unsubscribe("array:removeEntityById")}openEDForms(n){this.router.navigate(["",{outlets:{auxiliaryModal:["repondre-au-fs"]}}],{skipLocationChange:!0,queryParams:{idFS:n.id,idParticipant:n.idParticipant,titre:n.titre}}).catch(()=>console.error("AccueilFamilleComponent.openEDForms navigate to fs form"))}openAgenda(){let n="/"+this.authStore.currentUser.typeCompte+"/"+this.authStore.currentUser.id+"/Agenda";this.router.navigate([n],{queryParams:{selectAgendaRDV:!0}}).catch(()=>console.error("AccueilFamilleComponent.openDossierEleve navigate to dossier eleve"))}};i.\u0275fac=function(r){return new(r||i)(v(ye),v(M),v(di),v(Re),v(ci),v(Q),v(ni),v(si))},i.\u0275cmp=w({type:i,selectors:[["ed-accueil-personnel"]],standalone:!1,decls:6,vars:6,consts:[["noAccueil",""],["onlyPostIts",""],[1,"ed-container","accueil-personnel","accueiluserauth","container-fluid","padding-home",3,"cgBusy"],["class","banner",4,"ngIf"],["class","row",4,"ngIf","ngIfElse"],[1,"banner"],["href","utilisateur/personnalisation"],[1,"row"],["class","col-lg-12",4,"ngIf"],["class","col-lg-6",4,"ngIf"],[1,"col-lg-6","py-1","px-3"],["class","encart-agenda card ed-card px-3 pb-3",4,"ngIf"],["class","encart-edforms card ed-card px-3 pb-3",4,"ngIf"],["class","card ed-card px-3 pb-3",4,"ngIf"],[1,"col-lg-12"],["id","nom-etb"],["class","rounded logo-etab logo-etab-prof","alt","logo \xE9tablissement",3,"src",4,"ngIf"],["alt","logo \xE9tablissement",1,"rounded","logo-etab","logo-etab-prof",3,"src"],[1,"col-lg-6"],[4,"ngIf","ngIfElse"],[3,"isActifPostitsEspacesTravail","tabPostits"],["id","encart-postit"],[4,"ngIf"],["class","jumbotron msg-maintenance",4,"ngFor","ngForOf","ngForTrackBy"],[3,"configPostits","idUser","typeUser","tabPostIts"],[1,"jumbotron","msg-maintenance"],[3,"innerHTML"],[1,"encart-agenda","card","ed-card","px-3","pb-3"],[1,"text-center","w-100"],["type","button",1,"btn","btn-link",3,"click"],[3,"displayTargets","droitsAgenda","espaceTravail","events","idEntity","selectedTargets","typeEntity","needToday"],[1,"encart-edforms","card","ed-card","px-3","pb-3"],["class","btn-action btn-action-needed light-color icon-ed_attention",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-action","btn-action-needed","light-color","icon-ed_attention"],[1,"card","ed-card","px-3","pb-3"],[3,"agendaEvents"],[1,"encart-agenda"],[1,"mb-4",3,"href"],[3,"displayTargets","droitsAgenda","espaceTravail","events","idEntity","selectedTargets","typeEntity"],[1,"jumbotron","container-bg","double-padding"],[1,"d-print-none"]],template:function(r,o){if(r&1&&(a(0,"div",2),E(1,uh,8,1,"div",3)(2,Th,7,5,"div",4),C(3,"async"),E(4,Mh,3,0,"ng-template",null,0,Te),s()),r&2){let d=re(5);c("cgBusy",o.loader),l(),c("ngIf",o.nbDays>0),l(),c("ngIf",x(3,4,o.listeTimelineCommun$))("ngIfElse",d)}},dependencies:[Ee,G,se,Rt,pi,hi,bt,Je,Ve,be,Ze],styles:["ed-agenda-evenements[_ngcontent-%COMP%]{width:100%}.accueil-personnel[_ngcontent-%COMP%]   .encart-edforms[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.accueil-personnel[_ngcontent-%COMP%]   .encart-edforms[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:20px;width:49%;border-radius:5px;color:#fff;margin-top:5px}.accueil-personnel[_ngcontent-%COMP%]   .encart-edforms[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin:0 0 5px;padding:3px}.accueil-personnel[_ngcontent-%COMP%]   .encart-rdt-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.accueil-personnel[_ngcontent-%COMP%]   .encart-rdt-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:20px;width:100%;border-radius:5px;color:#fff}.accueil-personnel[_ngcontent-%COMP%]   .encart-rdt-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(n) ~ li[_ngcontent-%COMP%]{margin-top:5px}.accueil-personnel[_ngcontent-%COMP%]   .encart-rdt-sondages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin:0 0 5px;padding:3px}"]});let t=i;return t})();var dc=(()=>{let i=class i{constructor(n,r,o){this.authStore=n,this.accountService=r,this.router=o}ngOnInit(){this.authStore.isLoggedIn()?this.authStore.isFamille()?this.router.navigate(["/Famille"]).catch(()=>console.error("accueil navigate to /Famille")):this.authStore.isEleve()?this.router.navigate(["/Eleves",this.authStore.currentUser.id]).catch(()=>console.error("accueil navigate to /Eleves")):this.authStore.isPersonnel()?this.router.navigate(["/Personnel"]).catch(()=>console.error("accueil navigate to /Personnel")):this.authStore.isProfesseur()?this.router.navigate(["/Enseignant"]).catch(()=>console.error("accueil navigate to /Enseignant")):this.authStore.isEntreprise()?this.router.navigate(["/Entreprise"]).catch(()=>console.error("accueil navigate to /Entreprise")):this.accountService.logout():this.router.navigate(["/login"]).catch(()=>console.error("accueil navigate to /login"))}};i.\u0275fac=function(r){return new(r||i)(v(M),v(Ft),v(Q))},i.\u0275cmp=w({type:i,selectors:[["ng-component"]],standalone:!1,decls:0,vars:0,template:function(r,o){},encapsulation:2});let t=i;return t})();var uc=(()=>{let i=class i{constructor(n,r){this.authStore=n,this.router=r}ngOnInit(){this.authStore.isLoggedIn()&&this.router.navigate(["/accueil"]).catch(()=>console.error("layout navigate to /accueil"))}};i.\u0275fac=function(r){return new(r||i)(v(M),v(Q))},i.\u0275cmp=w({type:i,selectors:[["ng-component"]],standalone:!1,decls:3,vars:0,consts:[["id","main-part"],["id","main"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"div",1),g(2,"router-outlet"),s()())},dependencies:[Ni],encapsulation:2});let t=i;return t})();var gn=class{constructor(i={selectedMenuId:""}){this.selectedMenuId=i.selectedMenuId}static initialState(){return{}}};var Lt,Cr=(Lt=class extends Ja{constructor(i){super(i),this.devTool=i}updateSelectedMenu(i){this.store=new gn({selectedMenuId:i})}},Lt.\u0275fac=function(e){return new(e||Lt)(X(Wa))},Lt.\u0275prov=he({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),Lt);Cr=Di([Ha({classInstanceRef:gn,resetWhenSwipe:!0,className:"MenuUserStore"})],Cr);var Sr=t=>["fas",t],Ah=(t,i)=>({faChevronRight:t,faChevronUp:i}),Ih=()=>["fas","up-right-from-square"];function wh(t,i){if(t&1&&g(0,"i",9),t&2){let e=h(3);qe(e.blockItem.leftIcon)}}function kh(t,i){if(t&1&&g(0,"fa-icon",10),t&2){let e=h(3);c("icon",N(1,Sr,e.blockItem.leftIcon))}}function Oh(t,i){if(t&1&&(a(0,"span",11),u(1),s()),t&2){let e=h(3);l(),k(e.badgesProfil[e.blockItem.code].valeur)}}function Dh(t,i){if(t&1){let e=L();a(0,"a",4),S("click",function(){D(e);let r=h(2);return F(r.setActif())}),E(1,wh,1,2,"i",5)(2,kh,1,3,"fa-icon",6),a(3,"span",7),u(4),s(),E(5,Oh,2,1,"span",8),s()}if(t&2){let e=h(2);va("item-actif",e.isActif),c("routerLink",e.blockItem.action.route)("queryParams",e.blockItem.action.queryParams),_e("aria-label",e.ariaLinkLabel(e.blockItem.code))("aria-current",e.isActif?"page":null),l(),c("ngIf",!e.blockItem.svgIcon),l(),c("ngIf",e.blockItem.svgIcon),l(2),k(e.blockItem.titre),l(),c("ngIf",e.shouldDisplayBadge(e.blockItem.code))}}function Fh(t,i){if(t&1&&g(0,"i",9),t&2){let e=h(4);qe(e.blockItem.leftIcon)}}function Rh(t,i){if(t&1&&g(0,"fa-icon",10),t&2){let e=h(4);c("icon",N(1,Sr,e.blockItem.leftIcon))}}function Nh(t,i){if(t&1&&(a(0,"a",13),E(1,Fh,1,2,"i",5)(2,Rh,1,3,"fa-icon",6),a(3,"span",7),u(4),s()()),t&2){let e=h(3);c("target",e.blockItem.action.links[0].target)("href",e.blockItem.action.links[0].url,ve)("needAuth",e.blockItem.action.links[0].needAuth)("queryParams",e.blockItem.action.links[0].queryParams),l(),c("ngIf",!e.blockItem.svgIcon),l(),c("ngIf",e.blockItem.svgIcon),l(2),k(e.blockItem.action.links[0].title)}}function Uh(t,i){if(t&1&&g(0,"i"),t&2){let e=h(4);qe(e.blockItem.leftIcon)}}function Lh(t,i){if(t&1&&g(0,"fa-icon",18),t&2){let e=h(4);c("icon",N(1,Sr,e.blockItem.leftIcon))}}function Bh(t,i){if(t&1&&(a(0,"a",20),g(1,"fa-icon",21),a(2,"span",7),u(3),s()()),t&2){let e=i.$implicit;c("target",e.target)("href",e.url,ve)("needAuth",e.needAuth)("queryParams",e.queryParams),l(),c("icon",K(6,Ih)),l(2),k(e.title)}}function Vh(t,i){if(t&1&&(le(0),E(1,Bh,4,7,"a",19),C(2,"trackByProperty"),ce()),t&2){let e=h(4);l(),c("ngForOf",e.blockItem.action.links)("ngForTrackBy",x(2,2,"url"))}}function jh(t,i){if(t&1){let e=L();a(0,"a",14),S("click",function(){D(e);let r=h(3);return F(r.toggleIsOpen())}),E(1,Uh,1,2,"i",15)(2,Lh,1,3,"fa-icon",16),a(3,"span",7),u(4),s(),g(5,"fa-icon",17),s(),E(6,Vh,3,4,"ng-container",2)}if(t&2){let e=h(3);l(),c("ngIf",!e.blockItem.svgIcon),l(),c("ngIf",e.blockItem.svgIcon),l(2),k(e.blockItem.titre),l(),c("ngClass",ft(6,Ah,!e.isOpen,e.isOpen))("icon",N(9,Sr,e.isOpen?"chevron-up":"chevron-right")),l(),c("ngIf",e.isOpen)}}function zh(t,i){if(t&1&&(le(0),E(1,Nh,5,7,"a",12)(2,jh,7,11,"ng-template",null,0,Te),ce()),t&2){let e=re(3),n=h(2);l(),c("ngIf",!n.isMultiple)("ngIfElse",e)}}function qh(t,i){if(t&1&&(le(0),E(1,Dh,6,10,"a",3)(2,zh,4,2,"ng-container",2),ce()),t&2){let e=h();l(),c("ngIf",e.blockItem.action==null?null:e.blockItem.action.route),l(),c("ngIf",(e.blockItem.action==null?null:e.blockItem.action.links.length)>0)}}var mc=(()=>{let i=class i extends Ie(){get isMultiple(){return this.blockItem.action.links.length>1}constructor(n,r,o,d,m,p,f,_){super(),this.authStore=n,this.cd=r,this.etablissementService=o,this.etablissementStore=d,this.loaderService=m,this.location=p,this.menuUserStore=f,this.router=_,this.isActif=!1,this.isOpen=!1}ngOnInit(){this.uniqueID=`${this.menuBlockUID}_${this.menuBlockItem.code}`,this.router.events.pipe(q(n=>{n instanceof ei&&Object.isExists(this.blockItem)&&(this.isActif=this.isActiveMenu(),this.cd.markForCheck())}),De(this._destroyRef)).subscribe(),this.menuBlockItem.callNiveauxListe&&we.isNotEmptyString(this.menuBlockItem.staticCall)?(this.loader=this.loaderService.show(this),this.etablissementService.getNiveauxListe().pipe(Yi(void 0),q(n=>{this.blockItem=is[this.menuBlockItem.staticCall](this.menuBlockItem,V.getModuleParams(this.menuBlockItem.code,this.authStore.currentUser),!0,this.etablissementStore.snapshot.etablissements),this.isActif=this.isActiveMenu(),this.cd.markForCheck()}),ie(n=>ze),ge(()=>this.loaderService.hide(this))).subscribe()):(this.blockItem=this.menuBlockItem,this.isActif=this.isActiveMenu()),this.menuUserStore.select$().pipe(q(n=>{Object.isExists(n.selectedMenuId)&&(this.isActif=this.isOpen=n.selectedMenuId===this.uniqueID,this.cd.markForCheck())}),De(this._destroyRef)).subscribe()}shouldDisplayBadge(n){return Object.isExists(this.badgesProfil)&&Object.isExists(this.badgesProfil[n])&&this.badgesProfil[n].valeur>0}isActiveMenu(){let n=this.location.path();if(!Object.isExists(this.blockItem.action.route))return!1;let r=["/","/Accueil","/Famille","/Eleve","/Personnel","/Enseignant"];return r.indexOf(this.blockItem.action.route)>-1?r.indexOf(n)>-1:n===this.blockItem.action.route||n.startsWith(this.blockItem.action.route+"/")}toggleIsOpen(){this.isOpen=!this.isOpen,this.isOpen&&this.setActif()}setActif(){this.menuUserStore.updateSelectedMenu(this.uniqueID);let n=document.activeElement,r=document.querySelector(".btn-link");n&&r&&(n.blur(),r.focus())}ariaLinkLabel(n){if(this.shouldDisplayBadge(n)){if(this.badgesProfil[n].valeur>1)return`${this.blockItem.titre} (${this.badgesProfil[n].valeur} \xE9l\xE9ments non lus)`;if(this.badgesProfil[n].valeur===1)return`${this.blockItem.titre} (1 \xE9l\xE9ment non lu)`}return this.blockItem.titre}};i.\u0275fac=function(r){return new(r||i)(v(M),v(Fi),v(ri),v(os),v(Re),v(An),v(Cr),v(Q))},i.\u0275cmp=w({type:i,selectors:[["ed-menu-block-item"]],inputs:{menuBlockItem:"menuBlockItem",badgesProfil:"badgesProfil",menuBlockUID:"menuBlockUID"},standalone:!1,features:[Oe],decls:2,vars:2,consts:[["multipleMenus",""],[3,"cgBusy"],[4,"ngIf"],[3,"routerLink","queryParams","item-actif","click",4,"ngIf"],[3,"click","routerLink","queryParams"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",3,"icon",4,"ngIf"],[1,"item-name"],["class","badge alert-danger ed-menu-badge",4,"ngIf"],["aria-hidden","true"],["aria-hidden","true",3,"icon"],[1,"badge","alert-danger","ed-menu-badge"],["class","connecteur-externe","edGoToService","",3,"target","href","needAuth","queryParams",4,"ngIf","ngIfElse"],["edGoToService","",1,"connecteur-externe",3,"target","href","needAuth","queryParams"],["href","",3,"click"],[3,"class",4,"ngIf"],[3,"icon",4,"ngIf"],["aria-hidden","true",3,"ngClass","icon"],[3,"icon"],["class","external","edGoToService","",3,"target","href","needAuth","queryParams",4,"ngFor","ngForOf","ngForTrackBy"],["edGoToService","",1,"external",3,"target","href","needAuth","queryParams"],["aria-hidden","true",1,"faExternalLink",3,"icon"]],template:function(r,o){r&1&&(a(0,"div",1),E(1,qh,3,2,"ng-container",2),s()),r&2&&(c("cgBusy",o.loader),l(),c("ngIf",o.blockItem))},dependencies:[oe,Ee,G,ae,pe,se,Vs,be],styles:[`ed-menu-block-item>div{min-height:30px}ed-menu-block-item .ng-busy-default-wrapper{transform:scale(.5)}ed-menu-block-item .ng-busy-default-wrapper>.ng-busy-default-sign>.ng-busy-default-spinner>div{background-color:#fff!important}ed-menu-block-item .ng-busy-backdrop{opacity:0}ed-menu-block-item .faExternalLink,ed-menu-block-item .faChevronRight,ed-menu-block-item .faChevronUp{font-size:.5em}ed-menu-block-item a.external{left:70px}ed-menu-block-item a.external span.item-name{left:20px!important;top:25px}ed-menu-block-item a.external i{width:15px}ed-menu-block-item a:not([href]):not([class]),ed-menu-block-item a:not([href]):not([class]):hover{color:#fff}
`],encapsulation:2,changeDetection:0});let t=i;return t})();var Gh=(t,i,e,n,r,o,d)=>({"mt-neg-3":!0,"ed-menu-parent":t,"ed-menu-entreprise":i,"ed-menu-eleve":e,"ed-menu-eleve-seul":n,"ed-menu-prof":r,"ed-menu-classe":o,"ed-menu-prof-eleve":d}),$h=t=>({active:t}),Kh=t=>({"menu-active":t}),wo=()=>[25,"..."];function Qh(t,i){t&1&&(a(0,"div",12)(1,"span",13),u(2,"Mon espace famille"),s()())}function Wh(t,i){t&1&&(a(0,"div",14)(1,"span",13),u(2,"Mon espace entreprise"),s()())}function Jh(t,i){if(t&1&&(a(0,"div",15)(1,"span",13),u(2),s()()),t&2){let e=h();jt("background-image","url("+e.authStore.currentUser.profile.photo+")"),l(2),H("Mon espace ",e.authStore.currentUser.profile.estApprenant?"apprenant":"\xE9l\xE8ve","")}}function Xh(t,i){if(t&1&&(a(0,"div",19)(1,"span",20),u(2),s()()),t&2){let e=h(2);l(2),k(e.badges.calculTotalBadgesUser(e.menuBlock.id,e.menuBlock.type))}}function Yh(t,i){if(t&1&&(a(0,"div",16),E(1,Xh,3,1,"div",17),a(2,"div",18)(3,"p"),u(4),C(5,"truncate"),s()()()),t&2){let e=h();jt("background-image","url("+e.menuBlock.picture+")"),zt("title",e.menuBlock.titre),l(),c("ngIf",e.menuBlock.type==="famille-eleve"&&!e.menuBlock.isOpen&&e.badges.calculTotalBadgesUser(e.menuBlock.id,e.menuBlock.type)!==""),l(3),k(me(5,5,e.menuBlock.titre,K(8,wo)))}}function Zh(t,i){if(t&1&&(a(0,"div",24)(1,"span",20),u(2),s()()),t&2){let e=h(2);l(2),k(e.badges.calculTotalBadgesUser(e.menuBlock.id,e.menuBlock.type))}}function ef(t,i){if(t&1&&(a(0,"div",21)(1,"span",22),u(2),s(),E(3,Zh,3,1,"div",23),a(4,"div",18)(5,"p"),u(6),C(7,"truncate"),s()()()),t&2){let e=h();zt("title",e.menuBlock.titre),l(2),k(e.menuBlock.titre),l(),c("ngIf",e.menuBlock.type==="famille-eleve"&&!e.menuBlock.isOpen&&e.badges.calculTotalBadgesUser(e.menuBlock.id,e.menuBlock.type)!==""),l(3),k(me(7,4,e.menuBlock.titre,K(7,wo)))}}function tf(t,i){t&1&&g(0,"div",25)}function nf(t,i){if(t&1&&(a(0,"div",26),g(1,"div",27),a(2,"span",28)(3,"span"),u(4),C(5,"truncate"),s()()()),t&2){let e=h();zt("title",e.menuBlock.titre),l(4),k(me(5,2,e.menuBlock.titre,K(5,wo)))}}function rf(t,i){t&1&&g(0,"div",25)}function of(t,i){if(t&1&&(a(0,"li"),g(1,"ed-menu-block-item",29),s()),t&2){let e=i.$implicit,n=h();l(),c("menuBlockItem",e)("badgesProfil",n.badges[n.menuBlock.id+""+n.menuBlock.type])("menuBlockUID",n.menuBlock.type+"_"+n.menuBlock.id)}}var xr=(()=>{let i=class i extends Ie(){constructor(n,r,o){super(),this.authStore=n,this.badgesStore=r,this.cd=o,this.menuOpen=new bi,this.menuProfilsUser=Si,this.badges=new Ya}ngOnInit(){this.badgesStore.select$().pipe(q(r=>{this.badges=r,this.cd.markForCheck()}),De(this._destroyRef)).subscribe();let n=this.badges.calculTotalBadgesUser(this.menuBlock.id,this.menuBlock.type);n==="1"?this.linkLabel=this.menuBlock.titre+" ("+n+" \xE9l\xE9ment non lu)":n==="0"||!n?this.linkLabel="Aucun \xE9l\xE9ment non lu":this.linkLabel=this.menuBlock.titre+" ("+n+" \xE9l\xE9ments non lus)"}handleClickMenu(n=!1){this.menuOpen.emit(this.menuBlock),n?this.menuBlock.isOpen=!0:this.menuBlock.isOpen=!this.menuBlock.isOpen}closeMenu(){this.menuBlock.isOpen=!1,this.cd.markForCheck()}};i.\u0275fac=function(r){return new(r||i)(v(M),v(ns),v(Fi))},i.\u0275cmp=w({type:i,selectors:[["ed-menu"]],inputs:{menuBlock:"menuBlock"},outputs:{menuOpen:"menuOpen"},standalone:!1,features:[Oe],decls:15,vars:34,consts:[[1,"ed-menu",3,"ngClass"],["role","button","tabindex","0",1,"ed-menu-image-wrapper",3,"click","keydown.enter"],["id","menu-famille","tabindex","0",4,"ngIf"],["id","menu-entreprise","tabindex","0",4,"ngIf"],["class","profile","tabindex","0",3,"backgroundImage",4,"ngIf"],["class","circular text-center rond-menu-eleve",3,"title","backgroundImage",4,"ngIf"],["class","circular rond-menu-eleve no-photo",3,"title",4,"ngIf"],["class","circular",4,"ngIf"],["class","circular",3,"title",4,"ngIf"],[1,"ed-menu-list-wrapper",3,"hidden","ngClass"],[1,"dn-ease","ed-menu-list",3,"id"],[4,"ngFor","ngForOf","ngForTrackBy"],["id","menu-famille","tabindex","0"],[1,"screen-reader"],["id","menu-entreprise","tabindex","0"],["tabindex","0",1,"profile"],[1,"circular","text-center","rond-menu-eleve",3,"title"],["class","all-badge",4,"ngIf"],["tabindex","0",1,"overlay"],[1,"all-badge"],[1,"badge","alert-danger","ed-menu-badge"],[1,"circular","rond-menu-eleve","no-photo",3,"title"],[1,"prenom-placeholder","prenom-eleve","sr-only"],["class","float-end all-badge",4,"ngIf"],[1,"float-end","all-badge"],[1,"circular"],[1,"circular",3,"title"],[1,"picto-classe-groupe"],[1,"libelle"],[3,"menuBlockItem","badgesProfil","menuBlockUID"]],template:function(r,o){r&1&&(a(0,"ul")(1,"li",0)(2,"a",1),S("click",function(){return o.handleClickMenu(!1)})("keydown.enter",function(){return o.handleClickMenu(!1)}),E(3,Qh,3,0,"div",2)(4,Wh,3,0,"div",3)(5,Jh,3,3,"div",4)(6,Yh,6,9,"div",5)(7,ef,8,8,"div",6)(8,tf,1,0,"div",7)(9,nf,6,6,"div",8)(10,rf,1,0,"div",7),s(),a(11,"div",9)(12,"ul",10),E(13,of,2,3,"li",11),C(14,"trackByProperty"),s()()()()),r&2&&(qe(ba(22,Gh,o.menuBlock.type===o.menuProfilsUser[1]||o.menuBlock.type===o.menuProfilsUser[2]||o.menuBlock.type===o.menuProfilsUser.T,o.menuBlock.type===o.menuProfilsUser.T,o.menuBlock.type===o.menuProfilsUser.FE||o.menuBlock.type===o.menuProfilsUser.TE,o.menuBlock.type===o.menuProfilsUser.E,o.menuBlock.type===o.menuProfilsUser.P||o.menuBlock.type===o.menuProfilsUser.A,o.menuBlock.type===o.menuProfilsUser.C||o.menuBlock.type===o.menuProfilsUser.G,o.menuBlock.type===o.menuProfilsUser.PE||o.menuBlock.type===o.menuProfilsUser.AE)),l(),c("ngClass",N(30,$h,o.menuBlock.isOpen)),l(),_e("aria-label",o.linkLabel)("aria-expanded",o.menuBlock.isOpen?"true":"false")("aria-controls","menuId-"+o.menuBlock.id),l(),c("ngIf",o.menuBlock.type===o.menuProfilsUser[1]||o.menuBlock.type===o.menuProfilsUser[2]),l(),c("ngIf",o.menuBlock.type===o.menuProfilsUser.T),l(),c("ngIf",o.menuBlock.type===o.menuProfilsUser.E&&o.authStore.currentUser.profile.photo!==""),l(),c("ngIf",(o.menuBlock.type==="famille-eleve"||o.menuBlock.type==="personnel-eleve"||o.menuBlock.type==="prof-eleve"||o.menuBlock.type==="entreprise-eleve")&&o.menuBlock.picture!==""),l(),c("ngIf",(o.menuBlock.type==="famille-eleve"||o.menuBlock.type==="personnel-eleve"||o.menuBlock.type==="prof-eleve"||o.menuBlock.type==="entreprise-eleve")&&o.menuBlock.picture===""),l(),c("ngIf",o.menuBlock.type===o.menuProfilsUser.A),l(),c("ngIf",o.menuBlock.type==="classe"||o.menuBlock.type==="groupe"),l(),c("ngIf",o.menuBlock.type===o.menuProfilsUser.P),l(),c("hidden",!o.menuBlock.isOpen)("ngClass",N(32,Kh,o.menuBlock.isOpen)),l(),it("id","menuId-",o.menuBlock.id,""),l(),c("ngForOf",o.menuBlock.items)("ngForTrackBy",x(14,20,"$index")))},dependencies:[oe,Ee,G,mc,za,be],styles:[`.menu-bar{text-align:center}.ed-menu{margin:0 -50px;min-height:100px;border-bottom:5px solid var(--light-placeholder-color);border-radius:0 0 200px 200px;background:linear-gradient(to bottom,var(--dark-primary-color),var(--light-primary-color));box-shadow:0 2px 5px #0000004d;overflow:hidden;transition:all .5s}.ed-menu .profile{background:no-repeat center center/100% #fff}.ed-menu .rond-menu-eleve:not(.no-photo){background:no-repeat center center #f3f5f8}.ed-menu .rond-menu-eleve.no-photo{background-color:#fff}.ed-menu .rond-menu-eleve.no-photo .overlay{color:var(--dark-primary-color);opacity:1;background-color:#fff}.ed-menu .rond-menu-eleve.no-photo .overlay:focus{background:#0d4f9380;color:#fff}.ed-menu:not(.active) .ed-menu-image-wrapper>div:before{content:"+";position:absolute;top:80%;left:80%;z-index:2;transform:translate(-50%);width:50px;height:40px;background:var(--light-placeholder-color);border-radius:100%;font-size:19px;font-weight:700;line-height:.9}.ed-menu-prof{display:block;position:relative;z-index:100}.ed-menu-prof .ed-menu:not(.active){margin-top:-80px;background:none}.ed-menu-prof .ed-menu:not(.active) .ed-menu-image-wrapper>div:after{content:"";position:absolute;top:70%;right:0;left:0;width:100%;height:50px;background:var(--dark-primary-color)}.ed-menu-prof .active .ed-menu-image-wrapper{display:none}.ed-menu-parent{display:block;position:relative;z-index:100}.ed-menu-parent .ed-menu:not(.active){margin-top:-80px;background:none}.ed-menu-parent .ed-menu:not(.active) .ed-menu-image-wrapper>div:after{content:"";position:absolute;top:70%;right:0;left:0;width:100%;height:50px;background:var(--dark-primary-color)}.ed-menu-parent .active .ed-menu-image-wrapper{display:none}.ed-menu-classe{position:relative;z-index:20;display:block;margin-top:-15px!important}.ed-menu-classe .ed-menu-image-wrapper>div>div.picto-classe-groupe{min-height:100px;background-image:url("./media/classroom-HPOPQUUH.png");background-repeat:no-repeat;background-position-x:center;background-position-y:center;background-color:#fff}.ed-menu-classe .ed-menu-image-wrapper>div>span{background:#fff;width:100%;display:block;height:55px;margin-top:-30px;color:var(--dark-primary-color)}.ed-menu-classe .ed-menu-image-wrapper>div span.libelle:first-letter{text-transform:uppercase}.ed-menu-classe .ed-menu.active .ed-menu-image-wrapper>div>div.picto-classe-groupe{background-color:#0d66ab;background-image:url("./media/classroom-white-IPW3DGUS.png")}.ed-menu-classe .ed-menu.active .ed-menu-image-wrapper>div>span{color:#fff;background:#0e589e;width:100%;display:block;margin-top:-23px;opacity:.9}.ed-menu-classe .ed-menu.active .ed-menu-image-wrapper>div span.libelle span{font-weight:700}.ed-menu-classe a:hover{text-decoration:none}.ed-menu-classe .active .ed-menu-image-wrapper>div:before{content:"";position:absolute;inset:0;display:flex;background:-webkit-linear-gradient(rgba(13,79,147,0),rgb(13,79,147));background:linear-gradient(#0d4f9300,#0d4f93);opacity:.9;text-align:center;color:#fff}.ed-menu-eleve{position:relative;z-index:20;display:block;margin-top:-15px!important}.ed-menu-eleve .active .ed-menu-image-wrapper{position:relative}.ed-menu-prof-eleve{position:relative;z-index:19;display:block;margin-top:-15px!important}.ed-menu-eleve-seul .active .ed-menu-image-wrapper{position:relative}.ed-menu-eleve-seul .active .ed-menu-image-wrapper div:before{content:"";position:absolute;inset:0;background:-webkit-linear-gradient(rgba(13,79,147,0),rgb(13,79,147));background:linear-gradient(#0d4f9300,#0d4f93)}.ed-menu-image-wrapper>div{position:relative;margin:0 50px;min-height:100px}.ed-menu-image-wrapper:focus>div,.ed-menu-image-wrapper:focus-visible>div,.ed-menu-image-wrapper:focus-within>div{border:2px solid white!important}.ed-menu-image-wrapper .menu{min-height:0!important}.rond-menu-eleve{background-size:110px auto!important}.overlay{position:absolute;inset:0;display:flex;background:#0d4f9380;text-align:center;color:#fff;opacity:0;transition:all .5s}.overlay:hover,.overlay:focus{opacity:1}.overlay p{margin:30px auto}.active .overlay{background:-webkit-linear-gradient(rgba(13,79,147,0),rgb(13,79,147));background:linear-gradient(#0d4f9300,#0d4f93);opacity:1}.ed-menu.active .rond-menu-eleve.no-photo .overlay{color:#fff;font-weight:700}.ed-menu-list-wrapper{margin:0 50px 20px}.ed-menu-list-wrapper li{position:relative;padding:3px 0;text-align:left}.ed-menu-list-wrapper li a.item-actif{background-color:#fff;color:var(--dark-primary-color);margin-left:10px;border-radius:10px 0 0 10px}.ed-menu-list-wrapper li a.item-actif i,.ed-menu-list-wrapper li a.item-actif fa-icon{opacity:1;width:90px}.ed-menu-list-wrapper li a.item-actif .ed-menu-badge{left:50px}.ed-menu-list-wrapper li a.item-actif:hover,.ed-menu-list-wrapper li a.item-actif:focus{text-decoration:none}.ed-menu-list-wrapper li a.item-actif:hover i,.ed-menu-list-wrapper li a.item-actif:hover fa-icon,.ed-menu-list-wrapper li a.item-actif:focus i,.ed-menu-list-wrapper li a.item-actif:focus fa-icon{opacity:1}.ed-menu-list-wrapper li a.item-actif:hover:before,.ed-menu-list-wrapper li a.item-actif:focus:before{content:"";position:absolute;top:10px;right:10px;bottom:5px;width:5px;background:var(--dark-primary-color)}.ed-menu-list-wrapper li a{position:relative;display:inline-block;width:100%;color:#fff;font-size:30px}.ed-menu-list-wrapper li a:hover,.ed-menu-list-wrapper li a:focus{text-decoration:none}.ed-menu-list-wrapper li a:hover i,.ed-menu-list-wrapper li a:hover fa-icon,.ed-menu-list-wrapper li a:focus i,.ed-menu-list-wrapper li a:focus fa-icon{opacity:1}.ed-menu-list-wrapper li a:hover:before,.ed-menu-list-wrapper li a:focus:before{content:"";position:absolute;top:10px;right:0;bottom:5px;width:5px;background:#fff}.ed-menu-list-wrapper li a fa-icon{font-size:24px}.ed-menu-list-wrapper li a i,.ed-menu-list-wrapper li a fa-icon{display:inline-block;width:110px;text-align:center;opacity:.9;transition:all .5s}.ed-menu-list-wrapper li a span.item-name{position:absolute;top:50%;left:150px;transform:translateY(-50%);width:100px;font-size:.4em;opacity:0;transition:all .5s;cursor:pointer}.ed-menu-list-wrapper li a i[class*=fa-chevron]{width:10px;position:absolute;right:-40px;top:11px}.all-badge{position:absolute;bottom:25px;z-index:3}.ed-menu-badge{position:absolute;top:0;left:60px;padding:5px;background:var(--secondary-color);color:#fff;font-size:11px;transition:all .5s}
`],encapsulation:2,changeDetection:0});let t=i;return t})();var sf=["menuElement"],lf=()=>["id","type"];function cf(t,i){if(t&1){let e=L();a(0,"ed-menu",5),S("menuOpen",function(r){D(e);let o=h(2);return F(o.onMenuOpen(r))}),s()}if(t&2){let e=i.$implicit;c("menuBlock",e)}}function df(t,i){if(t&1&&(a(0,"nav",2,0)(2,"p",3),u(3),s(),E(4,cf,1,1,"ed-menu",4),C(5,"trackByProperty"),s()),t&2){let e=i.ngIf;l(3),k(e.header.espace),l(),c("ngForOf",e.entries)("ngForTrackBy",x(5,3,K(5,lf)))}}var pc=(()=>{let i=class i extends Ie(){constructor(n,r){super(),this.menuStore=n,this.renderer=r,this.isMouseOverMenu=!1,this.isFocusInMenu=!1}ngOnInit(){this.menu$=this.menuStore.select$().pipe(Ke(n=>new zn(n)))}onMenuOpen(n){this.menus.forEach(r=>{(r.menuBlock.id!==n.id||r.menuBlock.type!==n.type)&&r.closeMenu()})}ngAfterViewInit(){this.menuElement&&(this.renderer.listen(this.menuElement.nativeElement,"mouseenter",()=>{this.isMouseOverMenu=!0}),this.renderer.listen(this.menuElement.nativeElement,"mouseleave",()=>{this.isMouseOverMenu=!1}));for(let n of this.menuElement.nativeElement.querySelectorAll("a"))this.renderer.listen(n,"focus",()=>{this.isFocusInMenu=!0}),this.renderer.listen(n,"blur",()=>{this.isFocusInMenu=!1})}onKeydownHandler(){this.isMouseOverMenu?this.removeHoverFromMenu():this.isFocusInMenu&&ji.focusMain()}removeHoverFromMenu(){this.menuElement&&(this.renderer.setStyle(this.menuElement.nativeElement,"pointer-events","none"),setTimeout(()=>{this.renderer.removeStyle(this.menuElement.nativeElement,"pointer-events")},1e3))}};i.\u0275fac=function(r){return new(r||i)(v(oi),v(Tn))},i.\u0275cmp=w({type:i,selectors:[["ed-menu-container"]],viewQuery:function(r,o){if(r&1&&(qt(sf,5),qt(xr,5)),r&2){let d;Ht(d=Gt())&&(o.menuElement=d.first),Ht(d=Gt())&&(o.menus=d)}},hostBindings:function(r,o){r&1&&S("keydown.escape",function(m){return o.onKeydownHandler(m)},!1,pa)},standalone:!1,features:[Oe],decls:2,vars:3,consts:[["menuElement",""],["id","container-menu","role","navigation",4,"ngIf"],["id","container-menu","role","navigation"],[1,"ed-espace-title","text-bold"],[3,"menuBlock","menuOpen",4,"ngFor","ngForOf","ngForTrackBy"],[3,"menuOpen","menuBlock"]],template:function(r,o){r&1&&(E(0,df,6,6,"nav",1),C(1,"async")),r&2&&c("ngIf",x(1,1,o.menu$))},dependencies:[Ee,G,xr,Je,be],styles:[`#container-menu{position:absolute;top:0;z-index:3000;width:110px;min-height:100%;background:-webkit-linear-gradient(var(--dark-primary-color) 0%,var(--light-primary-color) 100%);background:linear-gradient(var(--dark-primary-color) 0%,var(--light-primary-color) 100%);overflow:hidden;text-align:center;transition:all .5s}#container-menu a.external{display:none}#container-menu:hover,#container-menu:focus-within{width:220px;box-shadow:0 0 10px #000c}#container-menu:hover a.external,#container-menu:focus-within a.external{display:block}#container-menu:hover .ed-menu,#container-menu:focus-within .ed-menu{border-radius:0 0 105px 105px}#container-menu:hover .ed-menu-list-wrapper li a span.item-name,#container-menu:focus-within .ed-menu-list-wrapper li a span.item-name{left:90px;opacity:1}#container-menu:hover .ed-menu-list-wrapper li a i[class*=fa-chevron],#container-menu:focus-within .ed-menu-list-wrapper li a i[class*=fa-chevron]{opacity:1;right:15px}#container-menu:hover .ed-menu-list-wrapper li a.item-actif span.item-name,#container-menu:focus-within .ed-menu-list-wrapper li a.item-actif span.item-name{opacity:1}#container-menu:hover .ed-menu-list-wrapper li a.item-actif i[class*=fa-chevron],#container-menu:focus-within .ed-menu-list-wrapper li a.item-actif i[class*=fa-chevron]{opacity:1}#container-menu:hover .ed-menu-list-wrapper li a:hover span.item-name,#container-menu:focus-within .ed-menu-list-wrapper li a:hover span.item-name{opacity:1}#container-menu:hover .ed-menu-list-wrapper li a:hover i[class*=fa-chevron],#container-menu:focus-within .ed-menu-list-wrapper li a:hover i[class*=fa-chevron]{opacity:1}#container-menu:hover .ed-menu-list-wrapper li a:focus span.item-name,#container-menu:focus-within .ed-menu-list-wrapper li a:focus span.item-name{opacity:1}#container-menu:hover .ed-menu-list-wrapper li a:focus i[class*=fa-chevron],#container-menu:focus-within .ed-menu-list-wrapper li a:focus i[class*=fa-chevron]{opacity:1}#container-menu:hover .all-badge .ed-menu-badge,#container-menu:focus-within .all-badge .ed-menu-badge{left:135px}#container-menu ed-menu:nth-child(1) .ed-menu-eleve{z-index:20}#container-menu ed-menu:nth-child(2) .ed-menu-eleve{z-index:19}#container-menu ed-menu:nth-child(3) .ed-menu-eleve{z-index:18}#container-menu ed-menu:nth-child(4) .ed-menu-eleve{z-index:17}#container-menu ed-menu:nth-child(5) .ed-menu-eleve{z-index:16}#container-menu ed-menu:nth-child(6) .ed-menu-eleve{z-index:15}#container-menu ed-menu:nth-child(7) .ed-menu-eleve{z-index:14}#container-menu ed-menu:nth-child(8) .ed-menu-eleve{z-index:13}#container-menu ed-menu:nth-child(9) .ed-menu-eleve{z-index:12}#container-menu ed-menu:nth-child(10) .ed-menu-eleve{z-index:11}#container-menu ed-menu:nth-child(11) .ed-menu-eleve{z-index:10}#container-menu ed-menu:nth-child(12) .ed-menu-eleve{z-index:9}#container-menu ed-menu:nth-child(13) .ed-menu-eleve{z-index:8}#container-menu ed-menu:nth-child(14) .ed-menu-eleve{z-index:7}#container-menu ed-menu:nth-child(15) .ed-menu-eleve{z-index:6}#container-menu ed-menu:nth-child(16) .ed-menu-eleve{z-index:5}#container-menu ed-menu:nth-child(17) .ed-menu-eleve{z-index:4}#container-menu ed-menu:nth-child(18) .ed-menu-eleve{z-index:3}#container-menu ed-menu:nth-child(19) .ed-menu-eleve{z-index:2}#container-menu ed-menu:nth-child(20) .ed-menu-eleve{z-index:1}#container-menu .ed-espace-title{position:relative;z-index:99;display:block;margin:13px auto;max-width:110px;color:#fff;text-transform:uppercase;font-size:var(--font-size-default);line-height:1}
`],encapsulation:2,changeDetection:0});let t=i;return t})();var mf=t=>({"bg-transparent":t}),pf=t=>({invisible:t}),hc=()=>["fas","up-right-from-square"];function hf(t,i){if(t&1){let e=L();a(0,"button",16),S("click",function(){D(e);let r=h(3);return F(r.switchProfil())}),g(1,"fa-icon",17),u(2),s()}if(t&2){let e=h(3);c("ngClass",e.profilsCSS.text),l(),c("icon",K(3,hc)),l(),H(" ",e.authStore.isPersonnel()?"Personnel":"Enseignant"," : Changer de profil ")}}function ff(t,i){if(t&1&&(a(0,"button",18),g(1,"fa-icon",17),u(2),s()),t&2){let e=h(3);c("ngClass",e.profilsCSS.text),l(),c("icon",K(3,hc)),l(),H(" ",e.authStore.isPersonnel()?"Personnel":"Enseignant"," : Changer de profil ")}}function gf(t,i){if(t&1&&(a(0,"li",11),E(1,hf,3,4,"button",14)(2,ff,3,4,"button",15),s()),t&2){let e=h(2);l(),c("ngIf",!e.authStore.isModeSupervision()&&!e.authStore.isEphemere()),l(),c("ngIf",e.authStore.isModeSupervision()||e.authStore.isEphemere())}}function vf(t,i){if(t&1&&(a(0,"a",23),g(1,"i",24),a(2,"span",25),u(3,"Votre panier"),s(),a(4,"span",26),u(5),s()()),t&2){let e=h(2).ngIf;_e("aria-label","Voter panier ("+e.listePaiementPanier.length+" \xE9l\xE9ment(s) s\xE9lectionn\xE9(s))"),l(5),k(e.listePaiementPanier.length)}}function _f(t,i){if(t&1&&(a(0,"a",27),g(1,"i",24),a(2,"span",25),u(3,"Votre panier"),s(),a(4,"span",26),u(5),s()()),t&2){let e=h(2).ngIf;_e("aria-label","Voter panier ("+e.listePaiementPanier.length+" \xE9l\xE9ment(s) s\xE9lectionn\xE9(s))"),l(5),k(e.listePaiementPanier.length)}}function Ef(t,i){if(t&1&&(a(0,"li",20),E(1,vf,6,2,"a",21)(2,_f,6,2,"a",22),s()),t&2){let e=h(3);l(),c("ngIf",e.authStore.isProfOuPersonnel()),l(),c("ngIf",e.authStore.isFamille())}}function yf(t,i){if(t&1&&(le(0),E(1,Ef,3,2,"li",19),ce()),t&2){let e=i.ngIf;l(),c("ngIf",e.listePaiementPanier.length>0)}}function bf(t,i){if(t&1){let e=L();a(0,"li",11)(1,"button",28),S("click",function(){D(e);let r=h(2);return F(r.accountSelector())}),g(2,"i",29),u(3," Changer de compte "),s()()}if(t&2){let e=h(2);l(),c("ngClass",e.profilsCSS.text)}}function Cf(t,i){if(t&1){let e=L();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),u(4),s(),a(5,"ul",5),E(6,gf,3,2,"li",6)(7,yf,2,1,"ng-container",7),C(8,"async"),a(9,"li",8)(10,"a",9),C(11,"displayNom"),g(12,"i",10),u(13),C(14,"displayNom"),s()(),E(15,bf,4,1,"li",6),C(16,"async"),a(17,"li",11)(18,"button",12),S("click",function(){D(e);let r=h();return F(r.accountService.logout())}),g(19,"i",13),s()()()()()()}if(t&2){let e,n=i.ngIf,r=h();l(),c("ngClass",N(19,mf,r.isHome)),l(2),c("ngClass",N(21,pf,r.isHome)),l(),k(n.nomEtablissement),l(2),c("ngIf",r.authStore.isProfEtPersonnel()&&!r.authStore.currentUser.isLoggedInFromOAuth),l(),c("ngIf",x(8,11,r.panier$)),l(3),c("ngClass",r.profilsCSS.text)("title","Acc\xE9der aux information du compte utilisateur de "+x(11,13,n)+r.getTooltipInfosConnexion()),l(2),qe(r.profilsCSS.icon),l(),H(" ",x(14,15,n)," "),l(2),c("ngIf",!r.authStore.currentUser.isLoggedInFromOAuth&&((e=x(16,17,r.authStore.linkingUsers$))==null?null:e.length)>0)}}var fc=(()=>{let i=class i extends Ie(){get lastConnexion(){if(!Object.isExists(this.authStore.currentUser.lastConnexion))return"";let n=this.authStore.currentUser.lastConnexion.split(" ");return n[0].split("-").reverse().join("-")+" "+n[1]}constructor(n,r,o,d,m){super(),this.authStore=n,this.paiementStore=r,this.accountService=o,this.modalService=d,this.document=m,this.profilsCSS={icon:"",text:""}}ngOnInit(){this.switchCSS(),this.panier$=this.authStore.currentUser$.pipe(We(n=>this.paiementStore.selectPanier(this.authStore.variantForCurrentUser)))}switchProfil(){if(this.authStore.currentUser.isLoggedInFromOAuth)return;let n={id:this.modalService.getModalsCount()+1};this.modalService.show(js,n),this.modalService.onHide.pipe(ke(1),q(r=>this.switchCSS())).subscribe()}accountSelector(){if(this.authStore.currentUser.isLoggedInFromOAuth)return;let n={id:this.modalService.getModalsCount()+1};this.modalService.show(zs,n),this.modalService.onHide.pipe(ke(1),q(r=>this.switchCSS())).subscribe()}switchCSS(){var r;this.authStore.currentUser.isModeAccessibiliteVisuelle?this.document.body.classList.add("visuel-malvoyant"):this.document.body.classList.contains("visuel-malvoyant")&&this.document.body.classList.remove("visuel-malvoyant");let n=we.getIconTypePersonne((r=this.authStore.currentUser)==null?void 0:r.typeCompte);this.profilsCSS={icon:`icon-ed_${n}`,text:`text-${n}`}}getTooltipInfosConnexion(){return`. Date de derni\xE8re connexion le ${this.lastConnexion}`}};i.\u0275fac=function(r){return new(r||i)(v(M),v(ms),v(Ft),v(Fe),v($t))},i.\u0275cmp=w({type:i,selectors:[["ed-header"]],inputs:{isHome:"isHome"},standalone:!1,features:[Oe],decls:2,vars:3,consts:[["class","d-print-none","id","header-commun",4,"ngIf"],["id","header-commun",1,"d-print-none"],[1,"navbar","navbar-expand-lg","navbar-light","double-padding",3,"ngClass"],[1,"container-fluid"],[1,"text-bold",3,"ngClass"],[1,"navbar-nav","ms-auto"],["class","nav-item",4,"ngIf"],[4,"ngIf"],["id","item-compteUtilisateur",1,"nav-item"],["id","user-account-link","routerLink","/utilisateur",1,"nav-link","account",3,"ngClass","title"],["aria-hidden","true"],[1,"nav-item"],["type","button","title","Se d\xE9connecter","aria-label","Se d\xE9connecter",1,"nav-link","btn","border","border-0","logout",3,"click"],["aria-hidden","true",1,"icon-ed_deconnexion"],["class","nav-link btn border border-0","type","button",3,"ngClass","click",4,"ngIf"],["class","nav-link btn border border-0","title","Non disponible en mode supervision","type","button",3,"ngClass",4,"ngIf"],["type","button",1,"nav-link","btn","border","border-0",3,"click","ngClass"],["aria-hidden","true",1,"header-link",3,"icon"],["title","Non disponible en mode supervision","type","button",1,"nav-link","btn","border","border-0",3,"ngClass"],["class","nav-item animation-header panier",4,"ngIf"],[1,"nav-item","animation-header","panier"],["class","nav-link btn btn-danger","routerLink","/Paiements",4,"ngIf"],["class","nav-link btn btn-danger panier","routerLink","/Paiements",4,"ngIf"],["routerLink","/Paiements",1,"nav-link","btn","btn-danger"],["aria-hidden","true",1,"icon-ed_panier"],[1,"margin-whitespace"],[1,"badge-panier"],["routerLink","/Paiements",1,"nav-link","btn","btn-danger","panier"],["type","button",1,"nav-link","btn","border","border-0","changeAccount","account",3,"click","ngClass"],["aria-hidden","true",1,"icon-ed_change"]],template:function(r,o){r&1&&(E(0,Cf,20,23,"div",0),C(1,"async")),r&2&&c("ngIf",x(1,1,o.authStore.currentUser$))},dependencies:[oe,G,ae,pe,Je,Li],styles:["#header-commun[_ngcontent-%COMP%]   [class^=icon-][_ngcontent-%COMP%]{font-size:19px;line-height:.8;vertical-align:bottom}#header-commun[_ngcontent-%COMP%]   .header-link[_ngcontent-%COMP%]{font-size:14px}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:0;background:linear-gradient(var(--dark-primary-color) 0%,#0e488e 100%);border-radius:0;min-height:30px;color:#fff}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:5px 0}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]:before{display:none}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]:after{display:none}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 0 0 5px}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:2px 8px 5px;background:#fff;border-radius:50px;box-shadow:0 0 5px #0003;color:var(--light-primary-color);font-weight:700;font-size:11px;line-height:1.5}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.logout[_ngcontent-%COMP%], #header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.logout[_ngcontent-%COMP%]{background:var(--secondary-color);color:#fff;text-align:center}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, #header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background-color:var(--dark-primary-color);color:#fff!important}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li.animation-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li.animation-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;padding:2px 28px 2px 8px;display:inline-flex;vertical-align:middle;border-radius:50px;box-shadow:0 0 5px #0003;color:var(--secondary-color);font-weight:700;font-size:11px;line-height:1;overflow:hidden}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li.animation-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .badge-panier[_ngcontent-%COMP%], #header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li.animation-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .badge-panier[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;width:20px;background:var(--secondary-color);color:#fff;text-align:center;line-height:2}#header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li.animation-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], #header-commun[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   li.animation-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto}.page-accueil[_nghost-%COMP%]   #header-commun[_ngcontent-%COMP%], .page-accueil   [_nghost-%COMP%]   #header-commun[_ngcontent-%COMP%]{background:linear-gradient(var(--dark-primary-color) 0%,#0e488e 100%);color:#fff}.page-accueil[_nghost-%COMP%]   #header-commun[_ngcontent-%COMP%]   .navbar.double-padding[_ngcontent-%COMP%], .page-accueil   [_nghost-%COMP%]   #header-commun[_ngcontent-%COMP%]   .navbar.double-padding[_ngcontent-%COMP%]{background:none}"]});let t=i;return t})();var xf=()=>["fas","chevron-up"];function Tf(t,i){t&1&&(a(0,"li",10)(1,"a",11)(2,"span"),u(3,"Contact"),s()()())}function Mf(t,i){t&1&&(a(0,"li",12)(1,"a",11)(2,"span"),u(3,"Contact"),s()()())}function Pf(t,i){if(t&1){let e=L();a(0,"button",13),S("click",function(){D(e);let r=h();return F(r.scrollToTop())}),g(1,"fa-icon",14),s()}t&2&&(l(),c("icon",K(1,xf)))}var gc=(()=>{let i=class i{constructor(n){this.authStore=n,this.showScroll=!1}ngOnInit(){this.showScroll=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)>0}onWindowScroll(){this.showScroll=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)>0}scrollToTop(){window.scroll({top:0,left:0,behavior:"smooth"})}};i.\u0275fac=function(r){return new(r||i)(v(M))},i.\u0275cmp=w({type:i,selectors:[["ed-footer"]],hostBindings:function(r,o){r&1&&S("scroll",function(){return o.onWindowScroll()},!1,xn)},standalone:!1,decls:15,vars:3,consts:[[1,"d-print-none"],[1,"footer","double-padding"],[1,"list-inline"],[1,"list-inline-item"],["href","","routerLink","/accessibilite",1,"focus-blue"],["href","","routerLink","/about",1,"focus-blue"],["class","list-inline-item","id","item-contact-famille-eleve",4,"ngIf"],["class","list-inline-item","id","item-contact-prof-personnel",4,"ngIf"],["href","","routerLink","/Aides",1,"focus-blue"],["id","menu-retour-haut","title","Remonter en haut de la page","type","button","class","btn btn-primary btn-lg back-to-top",3,"click",4,"ngIf"],["id","item-contact-famille-eleve",1,"list-inline-item"],["href","","routerLink","/contactEtablissement",1,"envelope-size","focus-blue"],["id","item-contact-prof-personnel",1,"list-inline-item"],["id","menu-retour-haut","title","Remonter en haut de la page","type","button",1,"btn","btn-primary","btn-lg","back-to-top",3,"click"],["aria-hidden","true",3,"icon"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),u(5,"Accessibilit\xE9"),s()(),a(6,"li",3)(7,"a",5),u(8,"Mentions l\xE9gales"),s()(),E(9,Tf,4,0,"li",6)(10,Mf,4,0,"li",7),a(11,"li",3)(12,"a",8),u(13,"Aide"),s()()()(),E(14,Pf,2,2,"button",9),s()),r&2&&(l(9),c("ngIf",!o.authStore.isPersonnel()&&!o.authStore.isProfesseur()),l(),c("ngIf",o.authStore.isPersonnel()||o.authStore.isProfesseur()),l(4),c("ngIf",o.showScroll))},dependencies:[G,ae,pe],styles:[".footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-align:right}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin:15px 0;padding:5px;background:#e2e7ed;border-radius:3px}#menu-retour-haut[_ngcontent-%COMP%]{position:fixed;bottom:45px;right:15px;z-index:10}#menu-retour-haut[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}"]});let t=i;return t})();var If=t=>({"page-accueil":t});function wf(t,i){if(t&1){let e=L();a(0,"div",10),u(1," Ce compte utilisateur a \xE9t\xE9 bloqu\xE9 automatiquement suite \xE0 des authentifications infructueuses. "),g(2,"br"),u(3," Vous pouvez le d\xE9bloquer en cliquant ici : "),a(4,"button",11),S("click",function(){D(e);let r=h();return F(r.unblockLogin())}),u(5,"D\xE9bloquer le compte"),s()()}}function kf(t,i){t&1&&(a(0,"div",10),u(1,"Vous avez bien d\xE9bloqu\xE9 le compte de cet utilisateur."),s())}var vc=(()=>{let i=class i{get isCompteBloque(){return this.authStore.snapshot.isBloque}get urlDeblocage(){return this.authStore.snapshot.urlUnblock}constructor(n,r,o,d){this.router=n,this.authStore=r,this.http=o,this.uiService=d,this.currentUrl="",this.router.events.subscribe(m=>{m instanceof ei&&(this.currentUrl=m.url)})}isHomePage(){let n=this.router.url,r=n.split("/")[2],o=["/","/Famille","/Enseignant","/Entreprise","/Personnel",`/Eleves/${r}`],d=["/(auxiliaryModal:","/Famille(auxiliaryModal:","/Enseignant(auxiliaryModal:","/Entreprise(auxiliaryModal:","/Personnel(auxiliaryModal:",`/Eleves/${r}(auxiliaryModal:`];return o.some(m=>n===m)||d.some(m=>n.startsWith(m))}unblockLogin(){this.loader=this.http.get(this.urlDeblocage,{observe:"response",params:new Ma().set("retourJson",1)}).pipe(q(n=>{if(n.headers.has(Vr.code)&&n.headers.get(Vr.code)===""+gt.OK){let r=new Za(this.authStore.snapshot);r.isBloque=!1,this.authStore.setAuthStore(r,!0),this.compteDebloque=!0,this.uiService.notifyEvent(Y.genericSuccess,"Le compte EcoleDirecte a \xE9t\xE9 d\xE9bloqu\xE9 avec succ\xE8s. Mise \xE0 jour des identifiants de connexions recommand\xE9e.","Accueil")}else this.uiService.notifyEvent(Y.genericError,"D\xE9blocage du compte impossible","Accueil")}),ie(n=>(this.uiService.notifyEvent(Y.genericError,"D\xE9blocage du compte impossible","Accueil"),ze))).subscribe()}};i.\u0275fac=function(r){return new(r||i)(v(Q),v(M),v(Pa),v(ye))},i.\u0275cmp=w({type:i,selectors:[["ed-authenticated-layout"]],standalone:!1,decls:19,vars:13,consts:[["id","main-part",3,"ngClass","cgBusy"],["aria-label","Liens d'acc\xE8s rapide",1,"d-print-none","screen-reader"],[1,"btn","btn-link",3,"href"],["id","header","role","banner"],["id","menu-part",1,"d-print-none"],[1,"resizePage"],[3,"isHome"],["id","main","role","main","tabindex","-1",1,"resizePage"],["class","alert alert-warning mx-5","role","alert",4,"ngIf"],["id","footer","role","contentinfo",1,"resizePage"],["role","alert",1,"alert","alert-warning","mx-5"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"div",1)(2,"a",2),u(3,"Aller au menu principal"),s(),a(4,"a",2),u(5,"Aller au contenu principal"),s(),a(6,"a",2),u(7,"Aller au pied de page"),s()(),a(8,"header",3)(9,"div",4),g(10,"ed-menu-container"),s(),a(11,"div",5),g(12,"ed-header",6),s()(),a(13,"main",7),E(14,wf,6,0,"div",8)(15,kf,2,0,"div",8),g(16,"router-outlet"),s(),a(17,"footer",9),g(18,"ed-footer"),s()()),r&2&&(c("ngClass",N(11,If,o.isHomePage()))("cgBusy",o.loader),l(2),it("href","",o.currentUrl,"#header",ve),l(2),it("href","",o.currentUrl,"#main",ve),l(2),it("href","",o.currentUrl,"#footer",ve),l(6),c("isHome",o.isHomePage()),l(2),c("ngIf",o.isCompteBloque&&o.urlDeblocage!==""),l(),c("ngIf",o.compteDebloque))},dependencies:[oe,G,Ni,se,pc,fc,gc],styles:["#menu-part[_ngcontent-%COMP%] + #main-part[_ngcontent-%COMP%]{margin-left:110px;width:calc(100vw - 110px);overflow-x:hidden}#main-part[_ngcontent-%COMP%]{flex:1;min-height:100vh}#main-part.page-accueil[_ngcontent-%COMP%]{position:relative}.resizePage[_ngcontent-%COMP%]{margin-left:110px}"]});let t=i;return t})();var _c=(()=>{let i=class i{constructor(n){this.modalRef=n}};i.\u0275fac=function(r){return new(r||i)(v(ui))},i.\u0275cmp=w({type:i,selectors:[["ed-modal-aide-connexion"]],standalone:!1,decls:19,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["edAutofocus","","type","button","aria-label","Fermer la fen\xEAtre d'aide \xE0 la connexion",1,"btn-close","d-print-none",3,"click","showFocusBorder"],[1,"modal-body"],["href","https://api.ecoledirecte.com/mot-de-passe-oublie.awp",1,"focus-blue","link-color"],[1,"modal-footer"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"h3",1),u(2,"Des difficult\xE9s pour vous connecter ?"),s(),a(3,"button",2),S("click",function(){return o.modalRef.hide()}),s()(),a(4,"div",3)(5,"h4"),u(6,"Si vous avez d\xE9j\xE0 personnalis\xE9 votre compte d'acc\xE8s"),s(),u(7," Vous pouvez utiliser le lien "),a(8,"a",4),u(9,"'mot de passe oubli\xE9'"),s(),u(10," en indiquant l'email ou le num\xE9ro de t\xE9l\xE9phone que vous avez fourni lors de la cr\xE9ation de votre compte. "),g(11,"br"),u(12," Si cette proc\xE9dure \xE9choue, vous devez contacter directement votre \xE9tablissement afin qu'il r\xE9initialise votre compte d'acc\xE8s. "),a(13,"h4"),u(14,"Si vous n'avez jamais personnalis\xE9 votre compte d'acc\xE8s"),s(),u(15," Dans ce cas, le lien 'mot de passe oubli\xE9' ne fonctionnera pas. "),g(16,"br"),u(17,` Vous devez utiliser votre code de premi\xE8re connexion fourni par votre \xE9tablissement.
`),s(),g(18,"div",5)),r&2&&(l(3),c("showFocusBorder",!1))},dependencies:[Wn],encapsulation:2});let t=i;return t})();function Df(t,i){t&1&&g(0,"hr")}function Ff(t,i){if(t&1&&(g(0,"p",9),C(1,"ariaConvertNewline"),C(2,"filterHtml")),t&2){let e=h();c("innerHTML",x(2,3,x(1,1,e.charte)),ue)}}function Rf(t,i){t&1&&(a(0,"a",10),u(1,"Retour \xE0 l'accueil du site"),s())}var Ki=(()=>{let i=class i{constructor(n,r){this.authStore=n,this.etablissementService=r}ngOnInit(){this.authStore.isLoggedIn()&&this.etablissementService.charte().pipe(q(n=>{this.charte=n}),ie(n=>ze)).subscribe()}};i.\u0275fac=function(r){return new(r||i)(v(M),v(ri))},i.\u0275cmp=w({type:i,selectors:[["ed-about"]],standalone:!1,decls:38,vars:3,consts:[[1,"double-padding"],[1,"mentionTitle"],[1,"container-bg","double-padding","pt-5"],["target","_blank","href","https://www.cnil.fr/fr/cookies-et-autres-traceurs/regles/cookies/que-dit-la-loi","title","https://www.cnil.fr/fr/cookies-et-autres-traceurs/regles/cookies/que-dit-la-loi",1,"focus-blue","text-primary"],["href","https://luciole-vision.com/","title","Lien vers le site Luciole","target","_blank",1,"text-primary","focus-blue"],["href","https://creativecommons.org/licenses/by/4.0/legalcode.fr","title","Lien vers le site Creative Commons Attribution 4.0 International","target","_blank",1,"text-primary","focus-blue"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["href","","routerLink","/","class","btn btn-primary margin-bottom",4,"ngIf"],[3,"innerHTML"],["href","","routerLink","/",1,"btn","btn-primary","margin-bottom"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"h4",1),u(2,"Dispositions g\xE9n\xE9rales applicables au site EcoleDirecte"),s(),a(3,"div",2)(4,"p"),u(5," Les donn\xE9es personnelles s\xE9curis\xE9es figurant sur ce site Internet concernent des \xE9l\xE8ves et les familles, et sont fournies par le logiciel Charlemagne des \xE9tablissements scolaires au sein desquels ceux-ci sont scolaris\xE9s. "),s(),a(6,"p"),u(7," Ces \xE9tablissements scolaires se sont engag\xE9s \xE0 apporter tous leurs soins dans la qualit\xE9 des informations diffus\xE9es. Il s\u2019agit toutefois d\u2019indications qui, en aucun cas, ne pourraient faire foi en lieu et place des documents usuels (bulletins de notes, relev\xE9s de notes, relev\xE9s d\u2019absences et de sanctions). "),s(),a(8,"p"),u(9," Ces informations ne sont disponibles qu\u2019apr\xE8s saisie d\u2019un mot de passe fourni exclusivement par l\u2019\xE9tablissement soit au responsable juridique de l\u2019\xE9l\xE8ve s\u2019il est mineur, soit \xE0 l\u2019\xE9l\xE8ve lui m\xEAme s\u2019il est majeur. Le d\xE9tenteur d\u2019un mot de passe ne peut acc\xE9der qu\u2019aux seules informations le concernant lui ou les personnes dont il est responsable juridiquement. "),s(),a(10,"p"),u(11," EcoleDirecte ne collecte aucune donn\xE9e personnelle directement sur le site Internet, \xE0 l\u2019exception de l\u2019adresse email et/ou du t\xE9l\xE9phone mobile, utilis\xE9s exclusivement pour la r\xE9cup\xE9ration des identifiants et les alertes de s\xE9curit\xE9. Le site n'utilise aucun cookie soumis \xE0 consentement (cookies publicitaires, analytiques non anonymes ou li\xE9s aux r\xE9seaux sociaux), seuls des cookies n\xE9cessaires \xE0 son bon fonctionnement ou des cookies strictement anonymes exempt\xE9s de consentement pouvant \xEAtre employ\xE9s. ("),a(12,"a",3),u(13,"cnil.fr"),s(),u(14,") "),s(),a(15,"p"),u(16," Pour optimiser la confidentialit\xE9 de vos consultations, nous vous conseillons de choisir un mot de passe s\xE9curis\xE9. Le site internet et ses donn\xE9es associ\xE9es sont h\xE9berg\xE9s sur des serveurs situ\xE9s sur le territoire fran\xE7ais. "),s(),a(17,"p"),u(18," La soci\xE9t\xE9 APLIM, h\xE9bergeur du site, s\u2019engage dans tous les cas \xE0 ne pas utiliser, louer, vendre, c\xE9der ou mettre \xE0 disposition d\u2019un tiers \xE0 fin d\u2019autres usages le contenu du pr\xE9sent site Internet. "),s(),a(19,"p"),u(20," Les donn\xE9es pr\xE9sentes sur ce site pourront \xEAtre divulgu\xE9es en application d'une loi, d'un r\xE8glement ou en vertu d'une d\xE9cision d'une autorit\xE9 r\xE9glementaire ou judiciaire comp\xE9tente ou encore, si cela s'av\xE8re n\xE9cessaire, aux fins de maintenance, par l'\xE9diteur ou l\u2019\xE9tablissement scolaire. "),s(),a(21,"p"),u(22," Le responsable du traitement de ces donn\xE9es est l\u2019\xE9tablissement scolaire qui a proc\xE9d\xE9 \xE0 leur saisie. Le responsable de leur s\xE9curisation sur notre plateforme EcoleDirecte en qualit\xE9 de sous-traitant est : Soci\xE9t\xE9 Aplim ZA Les C\xF4tes 73190 Saint Jeoire Prieur\xE9, rgpd@aplim.fr. "),s(),a(23,"p"),u(24," En application des articles 15, 16, 17 et 18 du R\xE8glement du Parlement europ\xE9en et du Conseil du 27 avril 2016, et de la Loi n\xB0 78-17 du 6 janvier 1978 relative \xE0 l'informatique, aux fichiers et aux libert\xE9s, vous disposez d'un droit d'acc\xE8s, de rectification, d'effacement des donn\xE9es collect\xE9es, et d'un droit de limitation du traitement des donn\xE9es personnelles que vous pouvez exercer aupr\xE8s du responsable du traitement (\xE0 savoir l\u2019\xE9tablissement scolaire responsable du traitement) qui nous r\xE9percutera votre demande \xE0 fins d\u2019ex\xE9cution sur le site EcoleDirecte. "),s(),a(25,"p"),u(26," En toute hypoth\xE8se, il vous est possible d'introduire une r\xE9clamation aupr\xE8s de la Commission Nationale de l'Informatique et des Libert\xE9s si vous vous estimez l\xE9s\xE9 par le traitement de vos donn\xE9es personnelles par l\u2019\xE9tablissement scolaire. "),s(),a(27,"p"),u(28," L'activation de l'am\xE9lioration de l'accessibilit\xE9 des personnes d\xE9ficientes visuelles utilise la police de caract\xE8res "),a(29,"a",4),u(30,"Luciole"),s(),u(31," . Cette police de caract\xE8res est distribu\xE9e gratuitement sous Licence publique "),a(32,"a",5),u(33," Creative Commons Attribution 4.0 International "),s(),u(34," : Luciole \xA9 Laurent Bourcellier & Jonathan Perez "),s(),E(35,Df,1,0,"hr",6)(36,Ff,3,5,"p",7)(37,Rf,2,0,"a",8),s()()),r&2&&(l(35),c("ngIf",o.charte),l(),c("ngIf",o.charte),l(),c("ngIf",o.authStore.isLoggedIn()))},dependencies:[G,ae,Ve,Ze],styles:[".mentionTitle[_ngcontent-%COMP%]{font-size:25px}"]});let t=i;return t})();var Tr=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=w({type:i,selectors:[["ed-accessibilite"]],standalone:!1,decls:214,vars:0,consts:[[1,"double-padding"],[1,"mentionTitle"],[1,"container-bg","double-padding","pt-5"],["href","https://www.legifrance.gouv.fr/loda/article_lc/LEGIARTI000048050213"],["href","https://www.ecoledirecte.com/"],[1,"custom-list"],["href","https://www.ecoledirecte.com/login"],["href","https://www.ecoledirecte.com/X/XXXX/CahierDeTexte"],["href","https://www.ecoledirecte.com/Aides"],["href","https://www.ecoledirecte.com/F/FamilleCoordonnees"],["href","https://www.ecoledirecte.com/Compte"],["href","https://www.ecoledirecte.com/Paiements"],["href","https://www.ecoledirecte.com/X/XXXX/Messagerie"],["href","https://www.ecoledirecte.com/Documents/telechargements"],["href","https://www.ecoledirecte.com/X/XXXX/formulaires-et-sondages"],["href","https://www.ecoledirecte.com/X/XXX/EspacesTravail"],["href","https://www.ecoledirecte.com/utilisateur/personnalisation"],["href","https://www.ecoledirecte.com/E/XXX/Notes"],["href","https://formulaire.defenseurdesdroits.fr/"],["href","https://www.defenseurdesdroits.fr/saisir/delegues"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"h1",1),u(2,"D\xE9claration d'accessibilit\xE9"),s(),a(3,"div",2)(4,"p"),u(5," APLIM s\u2019engage \xE0 rendre ses sites internet, intranet, extranet et ses applications mobiles, accessibles conform\xE9ment \xE0 "),a(6,"a",3),u(7,"l\u2019article 47 de la loi n\xB0 2005-102 du 11 f\xE9vrier 2005"),s(),u(8," . "),s(),a(9,"p"),u(10,"Cette d\xE9claration d\u2019accessibilit\xE9 s\u2019applique au site APLIM \u2013 Ecole directe."),s(),a(11,"h2"),u(12,"\xC9tat de conformit\xE9"),s(),a(13,"p"),u(14," En date du 15 novembre 2024, APLIM \u2013 Ecole directe - "),a(15,"a",4),u(16,"https://www.ecoledirecte.com/"),s(),u(17," est partiellement conforme avec le r\xE9f\xE9rentiel g\xE9n\xE9ral d\u2019am\xE9lioration de l\u2019accessibilit\xE9 (RGAA), version 4.1.2 en raison des non-conformit\xE9s et des d\xE9rogations \xE9num\xE9r\xE9es ci-dessous. "),s(),a(18,"h2"),u(19,"R\xE9sultats des tests"),s(),a(20,"p"),u(21," L\u2019audit de conformit\xE9 r\xE9alis\xE9 par Urbilog Comp\xE9thance EA r\xE9v\xE8le que "),a(22,"b"),u(23,"62%"),s(),u(24," des crit\xE8res RGAA sont respect\xE9s. "),s(),a(25,"h2"),u(26,"Contenus non accessibles"),s(),a(27,"p"),u(28,"Les contenus list\xE9s ci-dessous ne sont pas accessibles pour les raisons suivantes."),s(),a(29,"h3")(30,"i"),u(31,"Non-conformit\xE9s"),s()(),a(32,"h4"),u(33,"Couleurs"),s(),a(34,"ul",5)(35,"li"),u(36,"3.1 - Pr\xE9sence d\u2019information donn\xE9e uniquement par la couleur."),s(),a(37,"li"),u(38,"3.2 - Pr\xE9sence de ratios de contraste entre la couleur du texte et la couleur de son arri\xE8re-plan insuffisamment \xE9lev\xE9s."),s(),a(39,"li"),u(40,"3.3 - Pr\xE9sence de ratios de contraste sur des composants d\u2019interface ou des \xE9l\xE9ments graphiques porteurs d\u2019informations insuffisamment \xE9lev\xE9s."),s()(),a(41,"h4"),u(42,"Tableaux"),s(),a(43,"ul",5)(44,"li"),u(45,"5.1 - Tableau de donn\xE9es complexe sans r\xE9sum\xE9"),s()(),a(46,"h4"),u(47,"Scripts"),s(),a(48,"ul",5)(49,"li"),u(50,"7.1 - Pr\xE9sence d\u2019\xE9l\xE9ments script\xE9s qui ne sont pas compatibles avec les technologies d\u2019assistance."),s(),a(51,"li"),u(52,"7.3 - Pr\xE9sence d\u2019\xE9l\xE9ments script\xE9s qui ne sont pas contr\xF4lables par le clavier et par tout dispositif de pointage."),s()(),a(53,"h4"),u(54,"\xC9l\xE9ments obligatoires"),s(),a(55,"ul",5)(56,"li"),u(57,"8.2 - Le code source g\xE9n\xE9r\xE9 n'est pas valide selon le type de document sp\xE9cifi\xE9."),s()(),a(58,"h4"),u(59,"Pr\xE9sentation de l\u2019information"),s(),a(60,"ul",5)(61,"li"),u(62,"10.2 - Certains contenus visibles porteurs d\u2019information ne restent pas pr\xE9sents lorsque les feuilles de styles sont d\xE9sactiv\xE9es."),s(),a(63,"li"),u(64,"10.6 - Pr\xE9sence de liens dont la nature n\u2019est pas \xE9vidente et qui ne sont pas visibles par rapport au texte environnant."),s(),a(65,"li"),u(66,"10.7 - Certains \xE9l\xE9ments recevant le focus, cette prise de focus n'est pas visible."),s(),a(67,"li"),u(68," 10.11 - Certains contenus ne peuvent pas \xEAtre pr\xE9sent\xE9s sans perte d\u2019information ou de fonctionnalit\xE9 et sans recourir \xE0 un d\xE9filement horizontal pour une fen\xEAtre ayant une largeur de 320\u202Fpx. "),s()(),a(69,"h4"),u(70,"Formulaires"),s(),a(71,"ul",5)(72,"li"),u(73,"11.1 - Certains champs de formulaire n'ont pas d\u2019\xE9tiquette."),s(),a(74,"li"),u(75,"11.2 - Certaines \xE9tiquettes associ\xE9es \xE0 un champ de formulaire ne sont pas pertinentes."),s(),a(76,"li"),u(77,"11.4 - Dans certains formulaires, l\u2019\xE9tiquette de champ et son champ associ\xE9 ne sont pas accol\xE9s."),s(),a(78,"li"),u(79,"11.5 - Certains champs de m\xEAme nature ne sont pas regroup\xE9s."),s(),a(80,"li"),u(81,"11.9 - Certains intitul\xE9s de bouton ne sont pas pertinents."),s(),a(82,"li"),u(83,"11.10 - Pour certains champs de formulaire, le contr\xF4le de saisie n\u2019est pas utilis\xE9 de mani\xE8re pertinente."),s(),a(84,"li"),u(85,"11.11 - Pour certains champs de formulaire, le contr\xF4le de saisie n'est pas accompagn\xE9 de suggestions facilitant la correction des erreurs de saisie."),s(),a(86,"li"),u(87," 11.13 - Pour certains champs de saisie, absence de remplissage automatique pour faciliter le remplissage automatique des champs avec les donn\xE9es de l\u2019utilisateur. "),s()(),a(88,"h4"),u(89,"Navigation"),s(),a(90,"ul",5)(91,"li"),u(92,"12.1 - Absence de moteur de recherche ou de plan de site."),s(),a(93,"li"),u(94,"12.7 - Absence de lien d\u2019\xE9vitement ou d\u2019acc\xE8s rapide \xE0 la zone de contenu principal."),s(),a(95,"li"),u(96,"12.8 - Absence de coh\xE9rence dans l\u2019ordre de tabulation."),s()(),a(97,"h4"),u(98,"Consultation"),s(),a(99,"ul",5)(100,"li"),u(101,"13.1 - L\u2019utilisateur n\u2019a pas le contr\xF4le de chaque limite de temps modifiant le contenu."),s(),a(102,"li"),u(103,"13.3 - Pr\xE9sence de documents bureautiques en t\xE9l\xE9chargement ne poss\xE9dant pas d\u2019une version accessible."),s()(),a(104,"h2"),u(105,"D\xE9rogation pour charge disproportionn\xE9e"),s(),a(106,"ul",5)(107,"li"),u(108,"Aucun \xE9l\xE9ment d\xE9rog\xE9 pour charge disproportionn\xE9e."),s()(),a(109,"h2"),u(110,"\xC9tablissement de cette d\xE9claration d\u2019accessibilit\xE9"),s(),a(111,"p"),u(112,"Cette d\xE9claration d\u2019accessibilit\xE9 a \xE9t\xE9 \xE9tablie le 15 novembre 2024."),s(),a(113,"h2"),u(114,"Technologies utilis\xE9es pour la r\xE9alisation du site"),s(),a(115,"ul",5)(116,"li"),u(117,"HTML 5"),s(),a(118,"li"),u(119,"CSS"),s(),a(120,"li"),u(121,"JavaScript"),s()(),a(122,"h2"),u(123,"Environnement de test"),s(),a(124,"p"),u(125," Les v\xE9rifications de restitution de contenus ont \xE9t\xE9 r\xE9alis\xE9es sur la base de la combinaison fournie par la base de r\xE9f\xE9rence du RGAA 4.1.2, avec les versions suivantes : "),s(),a(126,"ul",5)(127,"li"),u(128,"NVDA 2024.4.1 et Firefox 132.0.2"),s(),a(129,"li"),u(130,"VoiceOver macOS Sequoia 15.1 et Safari 18.1"),s()(),a(131,"h2"),u(132,"Outils pour \xE9valuer l\u2019accessibilit\xE9"),s(),a(133,"ul",5)(134,"li"),u(135,"Barre extension de contr\xF4le de taux de contraste WCAG Color Contrast Checker"),s(),a(136,"li"),u(137,"Barre extension Assistant RGAA V4.1.2 Urbilog Comp\xE9thance EA"),s(),a(138,"li"),u(139,"Barre extension Web Developer toolbar"),s(),a(140,"li"),u(141,"Inspecteur du navigateur"),s()(),a(142,"h2"),u(143,"Pages du site ayant fait l\u2019objet de la v\xE9rification de conformit\xE9"),s(),a(144,"ul",5)(145,"li"),u(146," Authentification - "),a(147,"a",6),u(148,"https://www.ecoledirecte.com/login"),s()(),a(149,"li"),u(150," Consultation cahier de textes - "),a(151,"a",7),u(152,"https://www.ecoledirecte.com/X/XXXX/CahierDeTexte"),s()(),a(153,"li"),u(154," Aide (documents t\xE9l\xE9chargeables) - "),a(155,"a",8),u(156,"https://www.ecoledirecte.com/Aides"),s()(),a(157,"li"),u(158," Vos informations - "),a(159,"a",9),u(160,"https://www.ecoledirecte.com/F/FamilleCoordonnees"),s()(),a(161,"li"),u(162," Situation financi\xE8re - "),a(163,"a",10),u(164,"https://www.ecoledirecte.com/Compte"),s()(),a(165,"li"),u(166," Paiements en ligne - "),a(167,"a",11),u(168,"https://www.ecoledirecte.com/Paiements"),s()(),a(169,"li"),u(170," Messagerie - "),a(171,"a",12),u(172,"https://www.ecoledirecte.com/X/XXXX/Messagerie"),s()(),a(173,"li"),u(174," Documents - "),a(175,"a",13),u(176,"https://www.ecoledirecte.com/Documents/telechargements"),s()(),a(177,"li"),u(178," Formulaires et sondages - "),a(179,"a",14),u(180,"https://www.ecoledirecte.com/X/XXXX/formulaires-et-sondages"),s()(),a(181,"li"),u(182," Espace de travail - "),a(183,"a",15),u(184,"https://www.ecoledirecte.com/X/XXX/EspacesTravail"),s()(),a(185,"li"),u(186," Dossier d\u2019inscription - "),a(187,"a",15),u(188,"https://www.ecoledirecte.com/X/XXX/EspacesTravail"),s()(),a(189,"li"),u(190," Votre compte - "),a(191,"a",16),u(192,"https://www.ecoledirecte.com/utilisateur/personnalisation"),s()(),a(193,"li"),u(194," Notes - "),a(195,"a",17),u(196,"https://www.ecoledirecte.com/E/XXX/Notes"),s()()(),a(197,"h2"),u(198,"Voies de recours"),s(),a(199,"p"),u(200,"Cette proc\xE9dure est \xE0 utiliser dans le cas suivant."),s(),a(201,"p"),u(202," Vous avez signal\xE9 au responsable du site internet un d\xE9faut d\u2019accessibilit\xE9 qui vous emp\xEAche d\u2019acc\xE9der \xE0 un contenu ou \xE0 un des services du portail et vous n\u2019avez pas obtenu de r\xE9ponse satisfaisante. "),s(),a(203,"ul",5)(204,"li"),u(205," \xC9crire un message au D\xE9fenseur des droits : "),a(206,"a",18),u(207,"https://formulaire.defenseurdesdroits.fr/"),s()(),a(208,"li"),u(209," Contacter le d\xE9l\xE9gu\xE9 du D\xE9fenseur des droits dans votre r\xE9gion : "),a(210,"a",19),u(211,"https://www.defenseurdesdroits.fr/saisir/delegues"),s()(),a(212,"li"),u(213,"Envoyer un courrier par la poste (gratuit, ne pas mettre de timbre) : D\xE9fenseur des droits Libre r\xE9ponse 71120 75342 Paris CEDEX 07"),s()()()())},styles:["a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}h4[_ngcontent-%COMP%]{color:var(--light-primary-color)!important;font-size:var(--font-size-default)!important;text-transform:uppercase!important}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.custom-list[_ngcontent-%COMP%]{list-style-type:disc!important;margin-left:20px!important}"]});let t=i;return t})();var Nf=()=>["fas","arrows-rotate"],Uf=t=>({"has-error":t});function Lf(t,i){if(t&1){let e=L();a(0,"button",12),S("click",function(){D(e);let r=h();return F(r.refresh())}),g(1,"fa-icon",13),s()}t&2&&(l(),c("icon",K(1,Nf)))}function Bf(t,i){t&1&&(a(0,"div",14),u(1,"Le questionnaire n'est pas accessible."),s())}function Vf(t,i){if(t&1&&(a(0,"div",21),g(1,"input",22),a(2,"label",23),u(3),C(4,"base64"),s()()),t&2){let e=i.$implicit,n=i.index;l(),it("id","prop_",n,""),c("value",e),l(),it("for","prop_",n,""),l(),k(x(4,6,e))}}function jf(t,i){if(t&1&&(a(0,"div",15)(1,"div",16)(2,"h3",17),u(3),C(4,"base64"),s(),a(5,"div",18)(6,"div",19),E(7,Vf,5,8,"div",20),C(8,"trackByProperty"),s()()()()),t&2){let e=h();l(),c("ngClass",N(8,Uf,e.qcmForm.invalid)),l(2),k(x(4,4,e.qcm.question)),l(4),c("ngForOf",e.qcm.propositions)("ngForTrackBy",x(8,6,"$index"))}}var Ec=(()=>{let i=class i{constructor(n,r,o,d,m){this.authService=n,this.modalService=r,this.modalRef=o,this.fb=d,this.uiService=m,this.displayRefresh=!1,this.qcmForm=this.fb.group({reponse:["",Ri.required]})}ngOnInit(){this.refresh(!0)}refresh(n=!1){(this.displayRefresh||n)&&(this.loader=this.authService.getAuth2facteursFE().subscribe({next:r=>{this.qcm={question:r.question,propositions:[...r.propositions]},we.isNotEmptyString(this.qcmForm.value.reponse,!0)&&this.qcmForm.patchValue({reponse:""}),this.displayRefresh=!1},error:r=>{this.displayRefresh=!0,this.qcm=void 0,this.uiService.notifyEvent(Y.genericError,r.message.length>0?r.message:"Un probl\xE8me est survenu lors de la r\xE9cup\xE9ration du questionnaire","Erreur")}}))}saveForm(){this.loader=this.authService.postAuth2facteursFE(this.qcmForm.value.reponse).subscribe({next:n=>{this.modalService.setDismissReason(JSON.stringify({reason:Qe.validation,data:{cn:n==null?void 0:n.cn,cv:n==null?void 0:n.cv}})),this.modalRef.hide()},error:n=>{n.status===500?(this.uiService.notifyEvent(Y.genericWarning,"Merci de r\xE9pondre \xE0 la nouvelle question !","Authentification"),this.refresh(!0)):(this.modalService.setDismissReason(JSON.stringify({reason:Qe.cancel})),this.modalRef.hide())}})}canDeactivate(n){if(Object.isExists(n))return!1;let r={id:this.modalService.getModalsCount()+1,keyboard:!1,ignoreBackdropClick:!0,initialState:{title:`<span class="upSizeFaTri">${bs(Ss).html.join("")}</span><span class="margin-whitespace">Quitter le questionnaire</span>`,message:"\xCAtes vous s\xFBr de vouloir quitter ce questionnaire et annuler la demande d'authentification ?",warningButton:"OK"}};return this._modalRef=this.modalService.show(Ti,r),this._modalRef.onHide.pipe(ke(1),Ke(o=>o===Qe.validation))}close(){this.canDeactivate().subscribe({next:n=>{n&&(this.modalService.setDismissReason(JSON.stringify({reason:Qe.cancel})),this.modalRef.hide())},error:n=>{}})}};i.\u0275fac=function(r){return new(r||i)(v(Xe),v(Fe),v(ui),v(Na),v(ye))},i.\u0275cmp=w({type:i,selectors:[["ed-auth-2factor-fe"]],hostBindings:function(r,o){r&1&&S("beforeunload",function(m){return o.canDeactivate(m)},!1,xn)},standalone:!1,decls:15,vars:6,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Rafra\xEEchir les donn\xE9es","class","btn btn-secondary btn-sm d-print-none ms-2 pull-left",3,"click",4,"ngIf"],["type","button","aria-label","Fermer cette fen\xEAtre",1,"btn-close","d-print-none",3,"click"],["name","formAuth2Factor","id","formAuth2Factor","method","post",3,"ngSubmit","formGroup"],[1,"modal-body",3,"cgBusy"],["class","alert alert-info",4,"ngIf"],["class","ed-card",4,"ngIf"],[1,"modal-footer"],[1,"w-100"],["type","button",1,"btn","btn-danger","float-start",3,"click"],["type","submit",1,"btn","btn-primary","float-end",3,"disabled"],["type","button","aria-label","Rafra\xEEchir les donn\xE9es",1,"btn","btn-secondary","btn-sm","d-print-none","ms-2","pull-left",3,"click"],["aria-hidden","true",3,"icon"],[1,"alert","alert-info"],[1,"ed-card"],[1,"p-3",3,"ngClass"],[1,"mt-0"],[1,"row"],[1,"col-lg-8"],["class","form-check",4,"ngFor","ngForOf","ngForTrackBy"],[1,"form-check"],["type","radio","formControlName","reponse","name","reponse",1,"form-radio-input","me-1",3,"id","value"],[1,"form-check-label","fw-normal",3,"for"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"h3",1),u(2,"Confirmez votre identit\xE9"),s(),E(3,Lf,2,2,"button",2),a(4,"button",3),S("click",function(){return o.close()}),s()(),a(5,"form",4),S("ngSubmit",function(){return o.saveForm()}),a(6,"div",5),E(7,Bf,2,0,"div",6)(8,jf,9,10,"div",7),s(),a(9,"div",8)(10,"div",9)(11,"button",10),S("click",function(){return o.close()}),u(12,"Annuler"),s(),a(13,"button",11),u(14,"Envoyer ma r\xE9ponse"),s()()()()),r&2&&(l(3),c("ngIf",o.displayRefresh),l(2),c("formGroup",o.qcmForm),l(),c("cgBusy",o.loader),l(),c("ngIf",!o.qcm),l(),c("ngIf",o.qcm),l(5),c("disabled",o.qcmForm.invalid))},dependencies:[oe,Ee,G,ut,Yt,ka,It,dt,Fn,Rn,pe,se,ii,be],styles:["#formAuth2Factor[_ngcontent-%COMP%]   .ed-card[_ngcontent-%COMP%]{margin-top:20px}"]});let t=i;return t})();var zf=["showPasswordButton"],qf=t=>["fas",t];function Hf(t,i){if(t&1&&(g(0,"div",15),C(1,"filterHtml")),t&2){let e=h();c("innerHTML",x(1,1,e.errorMessage),ue)}}function Gf(t,i){t&1&&(a(0,"h2",16),u(1,"Connectez-vous"),s())}function $f(t,i){t&1&&(a(0,"a",17),u(1,"Mot de passe oubli\xE9 ?"),s())}function Kf(t,i){if(t&1){let e=L();a(0,"div",18)(1,"input",19),At("ngModelChange",function(r){D(e);let o=h();return Pt(o.loginForm.loginStored,r)||(o.loginForm.loginStored=r),F(r)}),s(),a(2,"label",20),u(3,"Se souvenir de moi"),s()()}if(t&2){let e=h();l(),Mt("ngModel",e.loginForm.loginStored)}}var Qi=class Qi{constructor(i,e,n,r,o,d,m,p,f,_,y,T,P){this.authStore=i,this.authService=e,this.accountService=n,this.httpAccessFailedService=r,this.router=o,this.uiService=d,this.modalService=m,this.cd=p,this.loaderService=f,this.activatedRoute=_,this.credentialsStore=y,this.elementRef=T,this.renderer=P,this.redirEnCours=new bi,this.loginError=new bi,this.isPasswordVisible=!1,this.errorMessage="",this._loginFormDefault={username:"",password:"",loginStored:!1}}ngOnInit(){this.loginForm=J({},this._loginFormDefault),Object.isExists(this.authStore.currentUser)&&(this.loginForm.username=this.authStore.currentUser.identifiant),!Object.isExists(this.authStore.currentUser)&&we.isNotEmptyString(this._pseudo)&&(this.loginForm.username=this._pseudo)}ngOnChanges(i){if(i.accessTokenQR&&we.isNotEmptyString(i.accessTokenQR.currentValue)){let e={identifiant:"",motdepasse:"",isReLogin:!1,accessTokenQR:this.accessTokenQR};this.doLogin(e)}}openModalAuht2FactorFE(i){let e={id:this.modalService.getModalsCount()+1,keyboard:!1,ignoreBackdropClick:!0,class:"modal-lg"};this.modalService.show(Ec,e),this.modalService.onHide.pipe(ua(()=>this.modalService.getModalsCount()>0),ke(1),q(n=>{let r=JSON.parse(n);r.reason===Qe.validation?this.doLogin(J(J({},i),r.data)):(this.accountService.logout(),this.uiService.notifyEvent(Y.genericError,"Authentification impossible !","Erreur"))})).subscribe()}openModalCreationCompte(i){let e={loginOrigine:i.login,motPasseOrigine:i.motDePasse,niveauMdp:i.niveauMdp,questionsPossibles:i.questionsPossibles},n={id:this.modalService.getModalsCount()+1,keyboard:!1,ignoreBackdropClick:!0,initialState:{utilisateurInfosPassword:e,origineAction:Va.CREATION_SIMPLE}};this.modalService.show(Qs,n),this.modalService.onHide.pipe(ke(1),ge(()=>{this.loginForm=J({},this._loginFormDefault),this.cd.detectChanges()})).subscribe()}login(){this.errorMessage="";let i={identifiant:this.loginForm.username,motdepasse:this.loginForm.password,isReLogin:!1};this.doLogin(i)}doLogin(i){let e=this.authStore.currentUser?this.authStore.currentUser.identifiant:"",n=this.activatedRoute.snapshot.queryParamMap.has("cameFrom")?this.activatedRoute.snapshot.queryParamMap.get("cameFrom"):"",r=this.activatedRoute.snapshot.queryParamMap.has("service")?this.activatedRoute.snapshot.queryParamMap.get("service"):"";this.loader=this.loaderService.show(this),this.cd.markForCheck(),this.authService.doLogin(i).pipe(We(([o,d])=>{if(o===gt.Auht2Factor)return this.loaderService.hide(this),this.openModalAuht2FactorFE(i),Le(void 0);if(Object.isExists(d)&&d instanceof es)return this.openModalCreationCompte(d),Le(void 0);if(Object.isExists(d)&&d instanceof ts){this.loaderService.hide(this);let m={id:this.modalService.getModalsCount()+1,initialState:{title:"Pour continuer merci d'accepter la charte d'utilisation",message:d.charte,btnCancel:"Je n'accepte pas",btnConfirm:"J'accepte"},class:"modal-lg"};return this.modalService.show(Ti,m),this.modalService.onHide.pipe(ke(1),q(p=>{p===Qe.validation&&this.doLogin(Ue(J({},i),{acceptationCharte:!0}))}))}else if(this.authStore.snapshot.changementMDP&&!this.isRelogin){this.loaderService.hide(this);let m={id:this.modalService.getModalsCount()+1,initialState:{title:"Votre mot de passe est expir\xE9",message:"Pour des raisons de s\xE9curit\xE9, merci de mettre \xE0 jour votre mot de passe.",btnCancel:"Annuler",btnConfirm:"Continuer"},class:"modal-lg"};return this.modalService.show(Ti,m),this.modalService.onHide.pipe(ke(1),q(p=>{p===Qe.validation?this.router.navigate(["utilisateur/personnalisation"]):this.accountService.logout()}))}else return n!==""?(this.router.navigate([n]),Le(void 0)):r!==""?(ji.goToService(this.credentialsStore.snapshot.authToken,"_self",r,this.elementRef,this.renderer),Le(void 0)):(this.isRelogin&&e===this.loginForm.username?(this.loaderService.hide(this),this.modalService.hide("modalReconnexion"),this.httpAccessFailedService.retryFailedRequests()):(this.isRelogin&&(this.loaderService.hide(this),this.modalService.hide("modalReconnexion"),this.accountService.logout()),this.loginForm.loginStored?this._pseudo=this.loginForm.username:(this._pseudo=void 0,localStorage.removeItem("pseudo")),this.router.navigate(["/"])),Le(void 0))}),ie(o=>{switch(o.status){case 516:case 535:this.errorMessage="";break;case 518:this.errorMessage="<b>Votre fiche utilisateur n'existe pas sur EcoleDirecte</b><br/> Veuillez contacter votre \xE9tablissement";break;case 221:this.errorMessage=`<b>Identifiant d\xE9j\xE0 personnalis\xE9</b><br/> L'identifiant et le mot de passe que vous avez saisis ont d\xE9j\xE0 \xE9t\xE9 personnalis\xE9s.
                  Veuillez v\xE9rifier et r\xE9essayer <br/>
                Si le probl\xE8me persiste, veuillez cliquer sur le lien 'Mot de passe oubli\xE9 ?'
                ou contacter votre \xE9tablissement pour obtenir de nouveaux identifiants`;break;case 517:this.errorMessage=o.message;break;default:this.errorMessage=`<b>Identifiant ou Mot de passe invalide</b><br/>
                L'identifiant et le mot de passe que vous avez entr\xE9s ne correspondent pas \xE0 ceux pr\xE9sents dans nos fichiers.
                Veuillez v\xE9rifier et r\xE9essayer <br/> Si le probl\xE8me persiste, veuillez cliquer sur le lien 'Mot de passe oubli\xE9 ?'
                ou contacter votre \xE9tablissement pour obtenir de nouveaux identifiants`;break}return this.loginError.emit(o),this.uiService.notifyErrorThenEmpty(o,!0,"Authentification impossible")}),ge(()=>this.loaderService.hide(this))).subscribe()}showPassword(){this.isPasswordVisible=!this.isPasswordVisible;let i=this.isPasswordVisible?"Masquer le mot de passe":"Afficher le mot de passe";this.showPasswordButton.nativeElement.title=i}};Qi.\u0275fac=function(e){return new(e||Qi)(v(M),v(Xe),v(Ft),v(qn),v(Q),v(ye),v(Fe),v(Fi),v(Re),v(kt),v(rs),v(en),v(Tn))},Qi.\u0275cmp=w({type:Qi,selectors:[["ed-login-form"]],viewQuery:function(e,n){if(e&1&&qt(zf,5),e&2){let r;Ht(r=Gt())&&(n.showPasswordButton=r.first)}},inputs:{isRelogin:"isRelogin",accessTokenQR:"accessTokenQR"},outputs:{redirEnCours:"redirEnCours",loginError:"loginError"},standalone:!1,features:[Zi],decls:17,vars:17,consts:[["showPasswordButton",""],["id","output","role","alert","class","animated fadeInUp alert alert-danger",3,"innerHTML",4,"ngIf"],["id","bloc-connexion"],["class","text-center",4,"ngIf"],[3,"ngSubmit","cgBusy"],["id","username","type","text","name","username","placeholder","Identifiant","autocapitalize","off","aria-label","Identifiant","autocomplete","username",1,"log","form-control","focus-blue",3,"ngModelChange","disabled","edAutofocus","ngModel"],[1,"mdp"],["id","password","name","password","placeholder","Mot de passe","aria-label","Mot de passe","autocomplete","current-password",1,"log","form-control","focus-blue",3,"ngModelChange","type","edAutofocus","ngModel"],["type","button","id","show-password","title","Afficher le mot de passe",1,"btn","no-background","hov-transparent","btn-secondary","float-end","focus-blue",3,"click"],["aria-hidden","true",3,"icon"],["href","https://api.ecoledirecte.com/mot-de-passe-oublie.awp","class","mdp-lost focus-blue",4,"ngIf"],["class","form-check text-bold",4,"ngIf"],[1,"clearfix"],[1,"d-grid","gap-2"],["id","connexion","type","submit",1,"btn","btn-info","login","focus-black"],["id","output","role","alert",1,"animated","fadeInUp","alert","alert-danger",3,"innerHTML"],[1,"text-center"],["href","https://api.ecoledirecte.com/mot-de-passe-oublie.awp",1,"mdp-lost","focus-blue"],[1,"form-check","text-bold"],["type","checkbox","name","loginStored","id","seSouvenirDeMoi",1,"form-check-input","focus-blue",3,"ngModelChange","ngModel"],["for","seSouvenirDeMoi",1,"form-check-label"]],template:function(e,n){if(e&1){let r=L();E(0,Hf,2,3,"div",1),a(1,"div",2),E(2,Gf,2,0,"h2",3),a(3,"form",4),S("ngSubmit",function(){return D(r),F(n.login())}),a(4,"input",5),At("ngModelChange",function(d){return D(r),Pt(n.loginForm.username,d)||(n.loginForm.username=d),F(d)}),s(),a(5,"div",6)(6,"div")(7,"input",7),At("ngModelChange",function(d){return D(r),Pt(n.loginForm.password,d)||(n.loginForm.password=d),F(d)}),s(),a(8,"button",8,0),S("click",function(){return D(r),F(n.showPassword())}),g(10,"fa-icon",9),s()(),E(11,$f,2,0,"a",10),s(),E(12,Kf,4,1,"div",11),g(13,"div",12),a(14,"div",13)(15,"button",14),u(16,"Connexion"),s()()()()}e&2&&(c("ngIf",n.errorMessage),l(2),c("ngIf",!n.isRelogin),l(),c("cgBusy",n.loader),l(),c("disabled",n.isRelogin)("edAutofocus",!n.isRelogin),Mt("ngModel",n.loginForm.username),_e("aria-invalid",n.errorMessage?"true":"false")("aria-describedby",n.errorMessage?"output":null),l(3),c("type",n.isPasswordVisible?"text":"password")("edAutofocus",n.isRelogin),Mt("ngModel",n.loginForm.password),_e("aria-invalid",n.errorMessage?"true":"false"),l(3),c("icon",N(15,qf,n.isPasswordVisible?"eye-slash":"eye")),l(),c("ngIf",!n.isRelogin),l(),c("ngIf",!n.isRelogin))},dependencies:[G,ut,Yt,On,It,dt,Zt,wt,pe,se,Wn,Ve],styles:["#bloc-connexion[_ngcontent-%COMP%]{margin-top:100px}#bloc-connexion[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:35px}#bloc-connexion[_ngcontent-%COMP%]   button#connexion[_ngcontent-%COMP%]{font-size:20px}#bloc-connexion[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], #bloc-connexion[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{height:50px}#bloc-connexion[_ngcontent-%COMP%]   .mdp[_ngcontent-%COMP%]{margin:1rem 0}#bloc-connexion[_ngcontent-%COMP%]   .mdp[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}#bloc-connexion[_ngcontent-%COMP%]   .mdp[_ngcontent-%COMP%]   #password[_ngcontent-%COMP%]{width:100%}#bloc-connexion[_ngcontent-%COMP%]   .mdp[_ngcontent-%COMP%]   #show-password[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer}#bloc-connexion[_ngcontent-%COMP%]   .mdp[_ngcontent-%COMP%]   #show-password[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:21px;height:21px}#bloc-connexion[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{display:flex;width:100%}#bloc-connexion[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:1rem}.log[_ngcontent-%COMP%]{margin:4vh 0}.mdp-lost[_ngcontent-%COMP%]{float:right;margin:-3vh 0;font-style:italic;color:#999}@media screen and (max-width: 1280px){#bloc-connexion[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}#bloc-connexion[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], #bloc-connexion[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{height:30px}.log[_ngcontent-%COMP%]{margin:0}.mdp-lost[_ngcontent-%COMP%]{margin:1vh 0}}",".login-container[_ngcontent-%COMP%]{padding:50px!important}.login-container[_ngcontent-%COMP%]   .titre[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-bottom:10px}.login-container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{float:none;margin:0 auto 10px}.login-container[_ngcontent-%COMP%]:not(.session-expire){display:flex;flex-direction:column;justify-content:space-between;position:relative;padding:80px!important;min-height:100vh}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{margin:100px 0 5vh}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:15px;color:var(--dark-primary-color);margin-top:5px}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:0 auto}.login-container[_ngcontent-%COMP%]   #site-closed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:20px;text-align:center}.form-box[_ngcontent-%COMP%]{flex:1}.form-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}.form-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:4rem}.tel[_ngcontent-%COMP%]{margin:0}input[type=text].with-border[_ngcontent-%COMP%]{border:1px solid var(--dark-placeholder-color)}button[_ngcontent-%COMP%]:not(#show-password):not(.btn-link){margin:2vh 0;padding:10px;background:var(--light-primary-color)}#pb-connexion[_ngcontent-%COMP%]{position:absolute;left:-95px;top:41vh;padding:10px 20px;color:#000;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);background:#fff;box-shadow:0 5px 4px #00000080;text-transform:uppercase;font-size:13px;font-weight:700}#pb-connexion[_ngcontent-%COMP%]:hover{text-decoration:none;color:var(--dark-primary-color)}.info-container[_ngcontent-%COMP%]{position:relative;display:flex;min-height:100vh;background:-webkit-linear-gradient(var(--dark-primary-color) 0%,var(--light-primary-color) 100%);background:linear-gradient(var(--dark-primary-color) 0%,var(--light-primary-color) 100%)}.info-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:auto;text-align:center}.info-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;margin:0 100px 20px;font-size:20px;font-weight:300;color:#fff;text-align:left}.info-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.version-site[_ngcontent-%COMP%]{color:transparent}.app-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex}.app-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .app-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .25rem #fff!important;border-color:#fff!important}@media screen and (max-width: 1280px){.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{margin:0}}"],changeDetection:0});var ki=Qi;Di([qs("pseudo")],ki.prototype,"_pseudo",void 0);var Wf=()=>["fas","spinner"],ko=(()=>{let i=class i extends Ie(){constructor(n,r){super(),this.modalService=n,this.activatedRoute=r,this.appVersionCode=Ye.packageVersion,this.siteClosed=!1,this.redirEnCours=!1}ngOnInit(){this.activatedRoute.queryParamMap.pipe(q(n=>{this.accessTokenQR=n.has("at")?n.get("at"):void 0}),De(this._destroyRef)).subscribe()}openModalMentionsLegales(){let n={id:this.modalService.getModalsCount()+1,class:"modal-lg",initialState:{title:"Mentions l\xE9gales",injectComponentClass:Ki}};this.modalService.show(sn,n)}openModalAccessibilite(){let n={id:this.modalService.getModalsCount()+1,class:"modal-lg",initialState:{title:"",injectComponentClass:Tr}};this.modalService.show(sn,n)}openModalAideConnexion(){let n={id:this.modalService.getModalsCount()+1};this.modalService.show(_c,n)}onLoginError(n){(n.status===gt.CompteInvalide||n.status===gt.NotExported)&&(this.siteClosed=!0)}};i.\u0275fac=function(r){return new(r||i)(v(Fe),v(kt))},i.\u0275cmp=w({type:i,selectors:[["ed-login"]],standalone:!1,features:[Oe],decls:43,vars:7,consts:[["id","login",1,"container-fluid","no-padding"],[1,"row"],[1,"col-lg-4","col-md-5","login-container"],[1,"text-center"],["src","/assets/images/logoEcoleDirecte.png","alt","Logo du site EcoleDirecte"],["id","site-closed",1,"form-box",3,"hidden"],["id","outputbis",1,"animated","fadeInUp","alert","alert-danger"],[1,"form-text"],[1,"form-box","bottomSpace",3,"hidden"],["animation","spin-pulse","aria-hidden","true",3,"icon"],[1,"form-box",3,"loginError","redirEnCours","hidden","accessTokenQR"],["id","item-mentions"],["edModalFocusInit","","type","button",1,"btn","btn-link","focus-blue",3,"click"],["edModalFocusInit","","type","button",1,"btn","btn-link","focus-blue","ms-3",3,"click"],[1,"float-start","version-site"],[1,"col-lg-8","col-md-7","info-container"],["id","pb-connexion","edModalFocusInit","","type","button",1,"btn","btn-link","focus-black",3,"click"],[1,"autopromo"],[1,"list-inline","app-link","focus-white"],[1,"list-inline-item"],["href","https://play.google.com/store/apps/developer?id=Aplim","target","_blank"],["alt","Page Google play de l'application mobile EcoleDirecte","src","/assets/images/play-store.png"],["href","https://itunes.apple.com/fr/developer/aplim/id466797731","target","_blank"],["alt","Page App Store de l'application mobile EcoleDirecte","src","/assets/images/appstore.png"]],template:function(r,o){r&1&&(a(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"img",4),a(5,"h1"),u(6,"EcoleDirecte"),s()(),a(7,"div",5)(8,"h3",6),u(9," Ce site est "),g(10,"br"),u(11," actuellement ferm\xE9 "),s(),g(12,"br"),a(13,"p",7),u(14," Vous ne pouvez pas vous connecter pour le moment. "),g(15,"br"),u(16," Contactez votre \xE9tablissement pour plus d'informations. "),s()(),a(17,"div",8)(18,"h2"),u(19,"Redirection en cours"),s(),g(20,"fa-icon",9),s(),a(21,"ed-login-form",10),S("loginError",function(m){return o.onLoginError(m)})("redirEnCours",function(m){return o.redirEnCours=m}),s(),a(22,"div",11)(23,"button",12),S("click",function(){return o.openModalMentionsLegales()}),u(24,"Mentions l\xE9gales"),s(),a(25,"button",13),S("click",function(){return o.openModalAccessibilite()}),u(26,"Accessibilit\xE9"),s()(),a(27,"span",14),u(28),s()(),a(29,"div",15)(30,"button",16),S("click",function(){return o.openModalAideConnexion()}),u(31,"Probl\xE8me de connexion ?"),s(),a(32,"div",17)(33,"p")(34,"span"),u(35,"Retrouvez EcoleDirecte aussi sur votre mobile"),s()(),a(36,"ul",18)(37,"li",19)(38,"a",20),g(39,"img",21),s()(),a(40,"li",19)(41,"a",22),g(42,"img",23),s()()()()()()()),r&2&&(l(7),c("hidden",!o.siteClosed),l(10),c("hidden",o.siteClosed||!o.redirEnCours),l(3),c("icon",K(6,Wf)),l(),c("hidden",o.siteClosed||o.redirEnCours)("accessTokenQR",o.accessTokenQR),l(7),H("v",o.appVersionCode,""))},dependencies:[pe,Yn,ki],styles:[".login-container[_ngcontent-%COMP%]{padding:50px!important}.login-container[_ngcontent-%COMP%]   .titre[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-bottom:10px}.login-container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{float:none;margin:0 auto 10px}.login-container[_ngcontent-%COMP%]:not(.session-expire){display:flex;flex-direction:column;justify-content:space-between;position:relative;padding:80px!important;min-height:100vh}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{margin:100px 0 5vh}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:15px;color:var(--dark-primary-color);margin-top:5px}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:0 auto}.login-container[_ngcontent-%COMP%]   #site-closed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:20px;text-align:center}.form-box[_ngcontent-%COMP%]{flex:1}.form-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}.form-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:4rem}.tel[_ngcontent-%COMP%]{margin:0}input[type=text].with-border[_ngcontent-%COMP%]{border:1px solid var(--dark-placeholder-color)}button[_ngcontent-%COMP%]:not(#show-password):not(.btn-link){margin:2vh 0;padding:10px;background:var(--light-primary-color)}#pb-connexion[_ngcontent-%COMP%]{position:absolute;left:-95px;top:41vh;padding:10px 20px;color:#000;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);background:#fff;box-shadow:0 5px 4px #00000080;text-transform:uppercase;font-size:13px;font-weight:700}#pb-connexion[_ngcontent-%COMP%]:hover{text-decoration:none;color:var(--dark-primary-color)}.info-container[_ngcontent-%COMP%]{position:relative;display:flex;min-height:100vh;background:-webkit-linear-gradient(var(--dark-primary-color) 0%,var(--light-primary-color) 100%);background:linear-gradient(var(--dark-primary-color) 0%,var(--light-primary-color) 100%)}.info-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:auto;text-align:center}.info-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;margin:0 100px 20px;font-size:20px;font-weight:300;color:#fff;text-align:left}.info-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.version-site[_ngcontent-%COMP%]{color:transparent}.app-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex}.app-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .app-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .25rem #fff!important;border-color:#fff!important}@media screen and (max-width: 1280px){.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{margin:0}}"]});let t=i;return t})();var bc=t=>({"has-error":t}),Cc=(()=>{let i=class i{constructor(n,r,o,d){this.authService=n,this.filtresAgendaEdtUserStore=r,this.router=o,this.uiService=d,this.provider="sso"}ngOnChanges(n){Object.isExists(this.identifiant)&&Object.isExists(this.password)&&this.associerCompte()}associerCompte(){this.authService.loginExterne(this.provider,this.token,{idSSOToken:this.idToken,identifiantSSO:this.identifiant,passwordSSO:this.password}).pipe(q(n=>{if(n===gt.OK)this.filtresAgendaEdtUserStore.reset(),this.router.navigate([this.cameFrom],{queryParams:{camefrom:null}}).catch(()=>console.error("AssociationSsoFormComponent navigate to cameFrom"));else if(n!==203)throw new jn("L'authentification ne peut pas \xEAtre assur\xE9e")}),ie(n=>(n.status===516?this.uiService.notifyEvent(Y.genericError,"Veuillez v\xE9rifier votre saisie","Identifiant/mot de passe invalide"):this.uiService.notifyEvent(Y.genericError,"Vous devez relancer la proc\xE9dure depuis le site d'origine","Association impossible"),ze))).subscribe()}};i.\u0275fac=function(r){return new(r||i)(v(Xe),v(mi),v(Q),v(ye))},i.\u0275cmp=w({type:i,selectors:[["ed-association-sso-form"]],inputs:{provider:"provider",token:"token",idToken:"idToken",cameFrom:"cameFrom",identifiant:"identifiant",password:"password"},standalone:!1,features:[Zi],decls:28,vars:9,consts:[["formAssociationCompte","ngForm"],["newIdentifiant","ngModel"],["newPassword","ngModel"],["name","formAssociationCompte","novalidate","",1,"alert","alert-dark",3,"ngSubmit"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"row",3,"ngClass"],["for","newIdentifiant",1,"col-xl-4","col-form-label"],[1,"col-xl-4"],["id","newIdentifiant","name","newIdentifiant","type","text","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-text"],[1,"row","mt-2",3,"ngClass"],["for","newPassword",1,"col-xl-4","col-form-label"],[1,"col-xl-8"],["id","newPassword","name","newPassword","type","password","placeholder","","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"control-group","modal-footer"],[1,"controls","mt-2","w-100"],["type","submit","id","association",1,"btn","btn-success","float-end",3,"disabled"],[1,"clearfix"]],template:function(r,o){if(r&1){let d=L();a(0,"form",3,0),S("ngSubmit",function(){return D(d),F(o.associerCompte())}),a(2,"fieldset")(3,"div",4)(4,"h3",5),u(5,"Associez votre compte utilisateur EcoleDirecte"),s()(),a(6,"div",6)(7,"div",7)(8,"label",8),u(9,"Votre identifiant EcoleDirecte"),s(),a(10,"div",9)(11,"input",10,1),At("ngModelChange",function(p){return D(d),Pt(o.identifiant,p)||(o.identifiant=p),F(p)}),s(),a(13,"p",11),u(14,"Cet identifiant vous a \xE9t\xE9 fourni par votre \xE9tablissement scolaire"),s()()(),a(15,"div",12)(16,"label",13),u(17,"Mot de passe EcoleDirecte"),s(),a(18,"div",14)(19,"input",15,2),At("ngModelChange",function(p){return D(d),Pt(o.password,p)||(o.password=p),F(p)}),s(),a(21,"p",11),u(22,"Ce mot de passe vous a \xE9t\xE9 fourni par votre \xE9tablissement scolaire"),s()()()(),a(23,"div",16)(24,"div",17)(25,"button",18),u(26," Associer mon compte "),s(),g(27,"div",19),s()()()()}if(r&2){let d=re(1),m=re(12),p=re(20);l(7),c("ngClass",N(5,bc,m.invalid)),l(4),Mt("ngModel",o.identifiant),l(4),c("ngClass",N(7,bc,p.invalid&&!p.pristine)),l(4),Mt("ngModel",o.password),l(6),c("disabled",d.invalid||d.pristine)}},dependencies:[oe,ut,Yt,It,dt,Nn,Zt,wt],encapsulation:2,changeDetection:0});let t=i;return t})();var Xf=()=>["fas","spinner"];function Yf(t,i){t&1&&(a(0,"div",2),g(1,"fa-icon",3),u(2,` Veuillez patienter ...
`),s()),t&2&&(l(),c("icon",K(1,Xf)))}function Zf(t,i){if(t&1&&(a(0,"div",2)(1,"a",4),g(2,"img",5),s(),g(3,"br"),a(4,"alert",6)(5,"h5"),u(6,"Une erreur est survenue !"),s(),a(7,"p"),u(8,"L'authentification ne peut pas \xEAtre assur\xE9e"),s(),a(9,"strong"),u(10),s()(),a(11,"a",7),u(12,"Retour \xE0 la page d'accueil d'EcoleDirecte"),s()()),t&2){let e=h();l(4),c("dismissible",!0),l(6),k(e.erreurMessage)}}function eg(t,i){if(t&1&&(a(0,"div",8)(1,"div",9)(2,"div",10),g(3,"ed-association-sso-form",11),s()()()),t&2){let e=h();l(3),c("cameFrom",e.cameFrom)("provider",e.provider)("token",e.token)("idToken",e.idToken)("identifiant",e.dataAssociation.identifiant)("password",e.dataAssociation.password)}}var Oo=(()=>{let i=class i{constructor(n,r,o,d,m){this.authStore=n,this.authService=r,this.route=o,this.filtresAgendaEdtUserStore=d,this.router=m,this.displayAssociation=!1,this.dataAssociation={},this.token="",this.idToken=null}ngOnInit(){if(this.authStore.isLoggedIn()){this.router.navigate(["/"]).catch(()=>console.error("OAuthComponent navigate to /"));return}this.cameFrom=this.route.snapshot.queryParamMap.has("cameFrom")?this.route.snapshot.queryParamMap.get("cameFrom"):"/",this.provider=this.route.snapshot.paramMap.get("provider");let n=null;this.idToken=this.route.snapshot.paramMap.get("idToken"),this.route.snapshot.queryParamMap.has("token")?(this.token=this.route.snapshot.queryParamMap.get("token"),this.provider="ssoCharly"):this.route.snapshot.queryParamMap.has("atoken")?(this.token=this.route.snapshot.queryParamMap.get("atoken"),n=this.route.snapshot.queryParamMap.get("i"),this.provider="supervision"):this.route.snapshot.queryParamMap.has("idunique")&&(this.token=this.route.snapshot.queryParamMap.get("key"),this.idToken=this.route.snapshot.queryParamMap.get("idunique"),this.provider="sso"),this.authService.loginExterne(this.provider,this.token,{idSSOToken:this.idToken,i:n}).pipe(q(r=>{if(this.erreur=!1,r===gt.OK)this.filtresAgendaEdtUserStore.reset(),this.router.navigate([this.cameFrom],{queryParams:{camefrom:null}}).catch(()=>console.error("OAuthComponent navigate to cameFrom"));else if(r===203)this.displayAssociation=!0,this.idToken!==null&&this.idToken.split(";").length>3&&(this.dataAssociation.identifiant=this.idToken.split(";")[2],this.dataAssociation.password=this.idToken.split(";")[3]);else throw new jn("L'authentification ne peut pas \xEAtre assur\xE9e")}),ie(r=>(this.erreur=!0,this.erreurMessage=r.message,ze))).subscribe()}};i.\u0275fac=function(r){return new(r||i)(v(M),v(Xe),v(kt),v(mi),v(Q))},i.\u0275cmp=w({type:i,selectors:[["ed-oauth"]],standalone:!1,decls:3,vars:3,consts:[["class","jumbotron",4,"ngIf"],["class","ed-container",4,"ngIf"],[1,"jumbotron"],["animation","spin-pulse","aria-hidden","true",3,"icon"],["routerLink","/","href",""],["src","/assets/images/logoEcoleDirecte.png","alt","Logo du site EcoleDirecte","id","logoed"],["type","info",3,"dismissible"],["routerLink","/","href","",1,"btn","btn-primary",2,"text-transform","none"],[1,"ed-container"],[1,"row"],[1,"col-md-offset-2","col-lg-8"],[3,"cameFrom","provider","token","idToken","identifiant","password"]],template:function(r,o){r&1&&E(0,Yf,3,2,"div",0)(1,Zf,13,2,"div",0)(2,eg,4,6,"div",1),r&2&&(c("ngIf",!o.erreur&&!o.displayAssociation),l(),c("ngIf",o.erreur),l(),c("ngIf",o.displayAssociation))},dependencies:[G,ae,pe,Us,Cc],encapsulation:2});let t=i;return t})();var tg=t=>({"has-error":t}),ig=()=>["fas","question"],Sc=()=>["fas","lock"],ng=(t,i)=>({"has-error":t,"has-success":i}),rg=()=>["fas","user"];function og(t,i){if(t&1&&(a(0,"option",19),u(1),s()),t&2){let e=i.$implicit,n=h(2);c("value",e.idLogin),l(),H(" ",e.nomCompte+" "+e.prenomCompte+" ("+n.getTypePersonne(e.typeCompte)+" - "+e.libelleEtab+")"," ")}}function ag(t,i){if(t&1){let e=L();a(0,"div",14)(1,"div",15)(2,"h3",16),u(3,"Choisissez un \xE9tablissement pour modifier vos donn\xE9es de connexion"),s()(),a(4,"div",17)(5,"div",5)(6,"select",18),At("ngModelChange",function(r){D(e);let o=h();return Pt(o.searchIdLogin,r)||(o.searchIdLogin=r),F(r)}),S("change",function(){D(e);let r=h();return F(r.chooseCompte())}),a(7,"option",19),u(8,"S\xE9lectionnez un compte"),s(),E(9,og,2,2,"option",20),C(10,"trackByProperty"),s()()()()}if(t&2){let e=h();l(6),Mt("ngModel",e.searchIdLogin),l(),zt("value",0),l(2),c("ngForOf",e.recupLogin.comptes)("ngForTrackBy",x(10,4,"ogec"))}}function sg(t,i){if(t&1){let e=L();a(0,"div",21)(1,"div",15)(2,"div",22)(3,"div",5)(4,"form",23,0),S("ngSubmit",function(){D(e);let r=h();return F(r.giveInfo())}),a(6,"div",24)(7,"div",2)(8,"div",25),g(9,"label",26),C(10,"filterHtml"),a(11,"div",27)(12,"div",28)(13,"span",29),g(14,"fa-icon",30),s(),a(15,"input",31,1),At("ngModelChange",function(r){D(e);let o=h();return Pt(o.compteChoose.reponse,r)||(o.compteChoose.reponse=r),F(r)}),s()()()()(),g(17,"br"),a(18,"div",32),u(19," Merci de r\xE9pondre \xE0 la question secr\xE8te que vous avez compl\xE9t\xE9e lors de la modification de vos identifiants de premi\xE8re connexion. "),s(),g(20,"input",33),s()()()()()()}if(t&2){let e=re(5),n=re(16),r=h();l(8),c("ngClass",N(7,tg,n.invalid)),l(),c("innerHTML",x(10,5,r.compteChoose.questionSecrete),ue),l(5),c("icon",K(9,ig)),l(),Mt("ngModel",r.compteChoose.reponse),l(5),c("disabled",e.invalid||r.compteChoose.reponse==="")}}function lg(t,i){t&1&&(a(0,"div",37)(1,"label",51),u(2,"Choisissez un nom d'utilisateur"),s(),a(3,"div",39)(4,"div",28)(5,"span",29),g(6,"fa-icon",30),s(),g(7,"input",52),s(),a(8,"span",53),u(9,"Attention aux Majuscules/Minuscules"),s()()()),t&2&&(l(6),c("icon",K(1,rg)))}function cg(t,i){if(t&1&&(a(0,"span",54),u(1),s()),t&2){let e=h(2);l(),H(" ",e.getLibelleErreurMdp()," ")}}function dg(t,i){t&1&&(a(0,"span",54),u(1,"La longueur du mot de passe est limit\xE9e \xE0 50 caract\xE8res."),s())}function ug(t,i){if(t&1){let e=L();a(0,"div",14)(1,"div",15)(2,"h3",16),u(3,"Remplissez les informations suivantes pour modifier vos donn\xE9es de connexion"),s()(),a(4,"div",22)(5,"div",5)(6,"form",34),S("ngSubmit",function(){D(e);let r=h();return F(r.save())}),a(7,"div",35),E(8,lg,10,2,"div",36),g(9,"br"),a(10,"div",37)(11,"label",38),u(12,"Nouveau mot de passe"),s(),a(13,"div",39)(14,"div",28)(15,"span",29),g(16,"fa-icon",40),s(),g(17,"input",41),s(),g(18,"ed-password-strength-bar",42),s(),a(19,"val-errors",43),E(20,cg,2,1,"ng-template",44)(21,dg,2,0,"ng-template",45),s()()(),g(22,"br"),a(23,"div",46)(24,"label",47),u(25,"Confirmez votre nouveau mot de passe"),s(),a(26,"div",39)(27,"div",28)(28,"span",29),g(29,"fa-icon",40),s(),g(30,"input",48),s()()(),g(31,"br"),a(32,"a",49),u(33,"Retour \xE0 l'accueil"),s(),g(34,"input",50),s()()()()}if(t&2){let e=h();l(6),c("formGroup",e.formCompte),l(2),c("ngIf",e.recupLogin.typeReinit==="global"),l(8),c("icon",K(9,Sc)),l(2),c("controlToValidate",e.formCompte.controls.nouveauMotDePasse)("niveauMDP",e.compteChoose.niveauSecuriteMDPEtab),l(5),c("ngClass",ft(10,ng,e.formCompte.controls.nouveauMotDePasse.value!==""&&!e.mdpIdentiques()&&e.isPasswordTooLong,e.formCompte.controls.nouveauMotDePasse.value!==""&&e.mdpIdentiques()&&!e.isPasswordTooLong)),l(6),c("icon",K(13,Sc)),l(),c("compareWith",e.formCompte.controls.nouveauMotDePasse),l(4),c("disabled",e.formCompte.invalid)}}function mg(t,i){t&1&&(a(0,"div",55)(1,"div",15)(2,"h3",16),u(3,"Attention"),s()(),a(4,"div",22)(5,"div",5)(6,"h1"),u(7,"Cette demande de r\xE9initialisation a expir\xE9."),s(),a(8,"p"),u(9,"Veuillez recommencer la proc\xE9dure depuis la page d'accueil"),s(),a(10,"a",56),u(11,"Retour \xE0 l'accueil"),s()()()())}var xc=(()=>{let i=class i extends Ie(){constructor(n,r,o,d,m,p,f){super(),this.route=n,this.router=r,this.uiService=o,this.authService=d,this.recupLoginStore=m,this.loaderService=p,this.formBuilder=f,this.invalidKey=!1,this.etape=1,this.searchIdLogin=0,this.getTypePersonne=we.getTypePersonne,this.isPasswordTooLong=!1,this.formCompte=this.formBuilder.group({identifiant:new Dn("",Ri.required),nouveauMotDePasse:new Dn("",Ri.required),confirmationMotDePasse:new Dn("",Ri.required)}),this.formCompte.controls.nouveauMotDePasse.valueChanges.pipe(sa(500),q(_=>{this.isPasswordTooLong=this.mdpTooLong(),this.mdpIdentiques()?this.removeFormError(this.formCompte.controls.confirmationMotDePasse,"mdpIdentiques"):this.addFormError(this.formCompte.controls.confirmationMotDePasse,"mdpIdentiques")}),De(this._destroyRef)).subscribe()}ngOnInit(){this.recupLogin=new as(this.recupLoginStore.snapshot),this.recupLogin.typeReinit=this.route.snapshot.paramMap.get("typeReinit"),this.route.snapshot.queryParamMap.has("key")&&(this.recupLogin.key=this.route.snapshot.queryParamMap.get("key")),this.route.snapshot.queryParamMap.has("urlC")&&(this.recupLogin.urlC=this.route.snapshot.queryParamMap.get("urlC")),(Object.isExists(this.recupLogin.key)||Object.isExists(this.recupLogin.urlC))&&(this.loader=this.loaderService.show(this),this.authService.getInfosEtabWithSecretsQuestions(this.recupLogin).pipe(q(n=>{Object.isExists(n)&&(this.recupLogin.mailOrTel=n.mailOrTel,this.recupLogin.modeReception=n.modeReception,this.recupLogin.comptes=[...n.comptes],n.comptes.length===1&&this.chooseCompte(!0))}),ge(()=>this.loaderService.hide(this)),ie(n=>this.uiService.notifyErrorThenEmpty(n,!0,"Consultation"))).subscribe())}removeFormError(n,r){n.hasError(r)&&(delete n.errors[r],n.updateValueAndValidity())}addFormError(n,r){n.hasError(r)||n.setErrors(Ue(J({},n.errors),{[r]:!0}),{emitEvent:!0})}save(){if(!Object.isExists(this.recupLogin.urlC)&&!Object.isExists(this.recupLogin.key)||this.formCompte.invalid){this.uiService.notifyEvent(Y.genericError,"Impossible de mettre \xE0 jour vos identifants !","Modification de vos identifiants de connexion");return}this.formCompte.controls.nouveauMotDePasse.value!==""&&this.formCompte.controls.confirmationMotDePasse.value!==""&&(this.recupLogin.motDePasse=this.formCompte.controls.nouveauMotDePasse.value,this.recupLogin.motDePasseConfirm=this.formCompte.controls.confirmationMotDePasse.value),Object.isExists(this.formCompte.controls.identifiant)&&this.formCompte.controls.identifiant.value!==""&&(this.recupLogin.login=this.formCompte.controls.identifiant.value),this.loader=this.loaderService.show(this),this.authService.doReinitialisationPWD(this.recupLogin).pipe(ie(n=>(n.status===521&&(this.invalidKey=!0),this.loaderService.hide(this),this.uiService.notifyEvent(Y.genericError,n.status===521?"Cette demande de r\xE9initialisation a expir\xE9":n.message,"Modification de vos identifiants de connexion"),ze)),q(n=>{this.loaderService.hide(this),this.router.navigate(["/"],{queryParams:{}}).catch(()=>console.error("UpdateLoginComponent navigate to /")),this.uiService.notifyEvent(Y.genericSuccess,"Vos identifiants de connexion ont bien \xE9t\xE9 mis \xE0 jour !","Modification de vos identifiants de connexion")})).subscribe()}chooseCompte(n=!1){n?(this.etape=2,this.compteChoose=this.recupLogin.comptes[0]):(this.formCompte.patchValue({nouveauMotDePasse:"",confirmationMotDePasse:"",identifiant:""}),+this.searchIdLogin==0?this.etape=1:(this.compteChoose=this.recupLogin.comptes.find(r=>r.idLogin===+this.searchIdLogin),Object.isExists(this.compteChoose)&&this.compteChoose.questionSecrete!==""&&(this.etape=2)))}giveInfo(){this.compteChoose.reponse!==""&&(Object.isExists(this.compteChoose)&&(this.recupLogin.question=this.compteChoose.questionSecrete,this.recupLogin.reponse=this.compteChoose.reponse,this.recupLogin.ogec=this.compteChoose.ogecEtab,this.recupLogin.idLogin=this.compteChoose.idLogin),this.loader=this.loaderService.show(this),this.authService.doRecuperationMotDePasse(this.recupLogin).pipe(ie(n=>{let r=n.status===220?"Votre r\xE9ponse est incorrecte !":"Nous n'avons pas r\xE9ussi \xE0 vous identifier !";return this.uiService.notifyEvent(Y.genericError,r,"R\xE9cup\xE9ration de mot de passe"),this.etape=2,ze}),q(()=>{this.uiService.notifyEvent(Y.genericSuccess,"La r\xE9ponse est bonne!","R\xE9cup\xE9ration de mot de passe"),this.etape=3}),ge(()=>this.loaderService.hide(this))).subscribe())}mdpIdentiques(){return er.comparePwd(this.formCompte.controls.nouveauMotDePasse.value,this.formCompte.controls.confirmationMotDePasse.value)}mdpTooLong(){return this.formCompte.controls.nouveauMotDePasse.value.length>50}getLibelleErreurMdp(){return ji.getLibelleErreurMdp(this.compteChoose.niveauSecuriteMDPEtab)}};i.\u0275fac=function(r){return new(r||i)(v(kt),v(Q),v(ye),v(Xe),v(ss),v(Re),v(Ra))},i.\u0275cmp=w({type:i,selectors:[["ed-update-login"]],standalone:!1,features:[Oe],decls:15,vars:5,consts:[["formQuestionSecrete","ngForm"],["questionUser","ngModel"],[1,"row"],[1,"col-lg-6","mybodyleft"],[1,"col-lg-6","alignmiddle"],[1,"text-center"],[1,"login-container","recup-login",3,"cgBusy"],[1,"titre"],[1,"logo"],["src","/assets/images/logoEcoleDirecte.png","alt","Logo du site EcoleDirecte",1,"rounded-circle"],["class","card ed-card with-epingle",4,"ngIf"],["class","card",4,"ngIf"],["class","card","id","panel-error",4,"ngIf"],["id","bloc-bas"],[1,"card","ed-card","with-epingle"],[1,"card-header","text-center"],[1,"card-title"],[1,"card-body","margin-top-10"],["id","etablissement","name","chooseCompte",1,"form-control","form-select",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card"],[1,"card-body"],["name","formQuestionSecrete","novalidate","",3,"ngSubmit"],[1,"ed-card","with-epingle"],[1,"control-group",3,"ngClass"],["for","question",1,"col-lg-11","center","form-label",3,"innerHTML"],[1,"col-lg-10","center"],[1,"input-group"],["aria-hidden","true",1,"input-group-text"],["aria-hidden","true",3,"icon"],["id","question","name","questionUser","type","text","placeholder","","required","",1,"form-control","question",3,"ngModelChange","ngModel"],["role","alert",1,"alert","alert-info"],["type","submit","value","Valider",1,"btn","btn-success",3,"disabled"],["name","formRecupGlobal","id","formRecupGlobal","novalidate","","autocomplete","off",3,"ngSubmit","formGroup"],[1,"row","center"],["class","control-group",4,"ngIf"],[1,"control-group"],["for","passwordUser",1,"col-lg-7","center","form-label"],[1,"col-lg-7","center"],[3,"icon"],["id","passwordUser","name","passwordUser","type","password","placeholder","","autocomplete","new-password","formControlName","nouveauMotDePasse","edMaxlength","50",1,"form-control"],[3,"controlToValidate","niveauMDP"],["controlName","nouveauMotDePasse"],["valError","niveau"],["valError","maxlength"],[3,"ngClass"],["for","passwordConfirmUser",1,"col-lg-7","center","form-label"],["id","passwordConfirmUser","name","passwordConfirmUser","type","password","placeholder","","formControlName","confirmationMotDePasse","edSamePasswordValidator","",1,"form-control",3,"compareWith"],["href","","routerLink","/login",1,"btn","btn-primary"],["type","submit","value","Valider",1,"btn","btn-primary","margin-whitespace",3,"disabled"],["for","username",1,"col-lg-7","center","form-label"],["id","username","name","username","type","text","placeholder","","formControlName","identifiant",1,"form-control"],[1,"form-text"],[1,"form-text","text-danger"],["id","panel-error",1,"card"],["href","","routerLink","/login",1,"btn","btn-primary","margin-top-20"]],template:function(r,o){r&1&&(a(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div")(6,"h1",7),u(7,"EcoleDirecte"),s()(),a(8,"div",8),g(9,"img",9),s(),E(10,ag,11,6,"div",10)(11,sg,21,10,"div",11)(12,ug,35,14,"div",10)(13,mg,12,0,"div",12),g(14,"div",13),s()()()()()),r&2&&(l(4),c("cgBusy",o.loader),l(6),c("ngIf",!o.invalidKey&&o.etape>0&&o.recupLogin.comptes.length>1),l(),c("ngIf",!o.invalidKey&&o.etape>1&&(o.compteChoose==null?null:o.compteChoose.questionSecrete)!==""),l(),c("ngIf",!o.invalidKey&&o.etape>2),l(),c("ngIf",o.invalidKey))},dependencies:[oe,Ee,G,ut,Da,Fa,Yt,Oa,It,dt,Nn,Zt,wt,Fn,Rn,ae,pe,se,Gs,Hs,er,$s,Ks,Ve,be],styles:["div#panel-error[_ngcontent-%COMP%]{height:50vh}#bloc-bas[_ngcontent-%COMP%]{min-height:45vh}",".login-container[_ngcontent-%COMP%]{padding:50px!important}.login-container[_ngcontent-%COMP%]   .titre[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-bottom:10px}.login-container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{float:none;margin:0 auto 10px}.login-container[_ngcontent-%COMP%]:not(.session-expire){display:flex;flex-direction:column;justify-content:space-between;position:relative;padding:80px!important;min-height:100vh}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{margin:100px 0 5vh}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:15px;color:var(--dark-primary-color);margin-top:5px}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:0 auto}.login-container[_ngcontent-%COMP%]   #site-closed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:20px;text-align:center}.form-box[_ngcontent-%COMP%]{flex:1}.form-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}.form-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:4rem}.tel[_ngcontent-%COMP%]{margin:0}input[type=text].with-border[_ngcontent-%COMP%]{border:1px solid var(--dark-placeholder-color)}button[_ngcontent-%COMP%]:not(#show-password):not(.btn-link){margin:2vh 0;padding:10px;background:var(--light-primary-color)}#pb-connexion[_ngcontent-%COMP%]{position:absolute;left:-95px;top:41vh;padding:10px 20px;color:#000;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);background:#fff;box-shadow:0 5px 4px #00000080;text-transform:uppercase;font-size:13px;font-weight:700}#pb-connexion[_ngcontent-%COMP%]:hover{text-decoration:none;color:var(--dark-primary-color)}.info-container[_ngcontent-%COMP%]{position:relative;display:flex;min-height:100vh;background:-webkit-linear-gradient(var(--dark-primary-color) 0%,var(--light-primary-color) 100%);background:linear-gradient(var(--dark-primary-color) 0%,var(--light-primary-color) 100%)}.info-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:auto;text-align:center}.info-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;margin:0 100px 20px;font-size:20px;font-weight:300;color:#fff;text-align:left}.info-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.version-site[_ngcontent-%COMP%]{color:transparent}.app-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex}.app-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .app-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .25rem #fff!important;border-color:#fff!important}@media screen and (max-width: 1280px){.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{margin:0}}"]});let t=i;return t})();var Tc=(()=>{let i=class i{constructor(n){this.authStore=n}ngOnInit(){this.message="Vous n'avez pas les droits n\xE9cessaires pour consulter cette page.",(this.authStore.isModeSupervision()||this.authStore.isEphemere())&&(this.message="En mode supervision vous n'avez pas acc\xE8s \xE0 toutes les fonctions de l'utilisateur.")}};i.\u0275fac=function(r){return new(r||i)(v(M))},i.\u0275cmp=w({type:i,selectors:[["ed-access-denied"]],standalone:!1,decls:13,vars:1,consts:[[1,"ed-container","double-padding","page403"],[1,"entete-page"],[1,"container-bg","error-template"],[1,"error-details"],[1,"error-actions"],["routerLink","/",1,"btn","btn-primary","btn-lg"],["aria-hidden","true",1,"icon-ed_accueil"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"header",1)(2,"h2"),u(3,"Erreur 403"),s()(),a(4,"div",2)(5,"h3"),u(6,"Acc\xE8s non autoris\xE9"),s(),a(7,"div",3),u(8),s(),a(9,"div",4)(10,"a",5),g(11,"i",6),u(12," Accueil "),s()()()()),r&2&&(l(8),k(o.message))},dependencies:[ae],styles:[".error-template[_ngcontent-%COMP%]{padding:40px 15px;text-align:center}.error-actions[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}.error-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px}"]});let t=i;return t})();var pg=["formEC"];function hg(t,i){if(t&1&&(a(0,"div")(1,"div",10)(2,"h5"),u(3,"Une erreur est survenue !"),s(),a(4,"p",11),u(5),s()(),a(6,"a",12),u(7,"Retour \xE0 la page d'accueil d'EcoleDirecte"),s()()),t&2){let e=h();l(5),k(e.errMessage)}}function fg(t,i){if(t&1&&g(0,"input",19),t&2){let e=h(2);zt("value",e.educonnect.relayState)}}function gg(t,i){if(t&1&&(a(0,"div",13)(1,"div",14)(2,"h2"),u(3," Je me connecte avec "),a(4,"b"),u(5,"EduConnect"),s()(),a(6,"form",15,0),C(8,"safe"),g(9,"input",16),E(10,fg,1,1,"input",17),a(11,"button",18),u(12,"S'identifier avec EduConnect"),s()()()()),t&2){let e=h();l(6),c("action",me(8,3,e.educonnect.action,"url"),ve),l(3),zt("value",e.educonnect.samlRequest),l(),c("ngIf",e.educonnect.relayState)}}var Mc=(()=>{let i=class i{constructor(n,r,o,d){this.authStore=n,this.authService=r,this.modalService=o,this.router=d}ngOnInit(){if(this.authStore.isLoggedIn()){this.router.navigate(["/"]).catch(()=>console.error("EduconnectComponent navigate to /"));return}this.loader=this.authService.educonnect().pipe(ie(n=>(n.status===235&&this.router.navigate(["/"]).catch(()=>console.error("EduconnectComponent navigate to /")),this.erreur=!0,this.educonnect=void 0,this.errMessage=`La redirection vers le site EduConnect ne peut pas \xEAtre r\xE9alis\xE9e ${n.message}`,ze)),q(n=>{this.educonnect=new qa(n),this.erreur=!1,setTimeout(()=>{Object.isExists(this.formECElement)&&this.formECElement.submit()},200)})).subscribe()}openModalMentionsLegales(){let n={id:this.modalService.getModalsCount()+1,class:"modal-lg",initialState:{title:"Mentions l\xE9gales",injectComponentClass:Ki}};this.modalService.show(sn,n)}};i.\u0275fac=function(r){return new(r||i)(v(M),v(Xe),v(Fe),v(Q))},i.\u0275cmp=w({type:i,selectors:[["ed-educonnect"]],viewQuery:function(r,o){if(r&1&&qt(pg,5),r&2){let d;Ht(d=Gt())&&(o.formECElement=d.first)}},standalone:!1,decls:13,vars:3,consts:[["formEC",""],[1,"ed-container","educonnect",3,"cgBusy"],[1,"jumbotron"],["routerLink","/","href",""],["src","/assets/images/logoEcoleDirecte.png","alt","Logo du site EcoleDirecte","id","logoed"],[4,"ngIf"],["class","row",4,"ngIf"],["id","item-mentions"],["edModalFocusInit","","type","button",1,"btn","btn-link",3,"click"],["href","https://educonnect.education.gouv.fr/educt-aide/aide/","target","_blank"],[1,"alert","alert-dismissable","alert-warning"],[2,"font-size","12px"],["routerLink","/","href","",1,"btn","btn-primary",2,"text-transform","none"],[1,"row"],[1,"offset-md-3","col-lg-6"],["id","formEC","name","educonnect","method","post","target","_self","novalidate","",3,"action"],["type","hidden","name","SAMLRequest",3,"value"],["type","hidden","name","RelayState",3,"value",4,"ngIf"],["type","submit",1,"btn","btn-info"],["type","hidden","name","RelayState",3,"value"]],template:function(r,o){r&1&&(a(0,"div",1)(1,"div",2)(2,"a",3),g(3,"img",4),s(),E(4,hg,8,1,"div",5),s(),E(5,gg,13,6,"div",6),a(6,"div",2)(7,"div",7)(8,"button",8),S("click",function(){return o.openModalMentionsLegales()}),u(9,"Mentions l\xE9gales"),s(),u(10," | "),a(11,"a",9),u(12,"Aide EduConnect"),s()()()()),r&2&&(c("cgBusy",o.loader),l(4),c("ngIf",o.erreur),l(),c("ngIf",!o.erreur))},dependencies:[G,ut,dt,wt,ae,se,Yn,Ps],styles:["h2[_ngcontent-%COMP%]{color:inherit}h2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#ff0082}button[type=submit][_ngcontent-%COMP%]{margin:2vh 0;padding:10px;background:var(--light-primary-color)}.row[_ngcontent-%COMP%]{background:none;text-align:center;margin-top:-50px}"]});let t=i;return t})();var Do=(()=>{let i=class i{constructor(){}};i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=w({type:i,selectors:[["ed-not-found"]],standalone:!1,decls:13,vars:0,consts:[[1,"ed-container","double-padding","page404"],[1,"entete-page"],[1,"container-bg","error-template"],[1,"error-details"],[1,"error-actions"],["routerLink","/",1,"btn","btn-primary","btn-lg"],["aria-hidden","true",1,"icon-ed_accueil"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"header",1)(2,"h2"),u(3,"Erreur 404"),s()(),a(4,"div",2)(5,"h3"),u(6,"Oups !"),s(),a(7,"div",3),u(8,"La page que vous recherchez ne semble pas exister."),s(),a(9,"div",4)(10,"a",5),g(11,"i",6),u(12," Accueil "),s()()()())},dependencies:[ae],styles:[".error-template[_ngcontent-%COMP%]{padding:40px 15px;text-align:center}.error-actions[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}.error-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px}"]});let t=i;return t})();var vg=(t,i)=>(i.isEntrepriseOuE()||i.isFouE())&&V.isModuleEnabled(i.currentUser,b.VIE_SCOLAIRE,t)?!0:i.isProfOuPersonnel()&&V.isModuleEnabled(i.currentUser,b.VIE_SCOLAIRE),Fo=(t,i)=>{let e=I(M),n=we.isNotEmptyString(t.path)?t.path.split("/"):[];if(n.indexOf(":typeEntity")!==-1&&(e.isEntrepriseOuE()||e.isFouE()))return!1;let o=0,d=n.indexOf(":typeUser");if(d!==-1&&i.length>d&&i[d].path===O.ELEVE&&(e.isFamille()||e.isEntreprise())){let p=n.indexOf(":idUser");p!==-1&&i.length>p&&(o=Number.parseInt(i[p].path,10))}return vg(o,e)};var Eg=(t,i)=>{if(i.isProfOuPersonnel()){if(V.isModuleEnabled(i.currentUser,b.CAHIER_DE_TEXTES))return!0}else if(V.isModuleEnabled(i.currentUser,b.VIE_DE_LA_CLASSE,t))return!0;return!1},Pc=(t,i)=>{let e=0,n=I(M),r=we.isNotEmptyString(t.path)?t.path.split("/"):[],o=r.indexOf(":typeEntity");if(o!==-1&&i.length>o&&i[o].path===O.ELEVE&&!n.isEleve()){let m=r.indexOf(":idEntity");m!==-1&&i.length>m&&(e=Number.parseInt(i[m].path,10))}return Eg(e,n)};var bg=(t,i)=>V.isModuleEnabled(i.currentUser,b.JOURNAL_DE_CLASSE,t),Ro=(t,i)=>{let e=0,n=I(M),r=we.isNotEmptyString(t.path)?t.path.split("/"):[],o=r.indexOf(":typeEntity");if(o!==-1&&i.length>o&&i[o].path===O.ELEVE&&!n.isEleve()){let m=r.indexOf(":idEntity");m!==-1&&i.length>m&&(e=Number.parseInt(i[m].path,10))}return bg(e,n)};var Ac=new Be("externalUrlRedirectResolver"),Sg=[{path:"",pathMatch:"full",redirectTo:"Accueil"},{path:"",component:uc,children:[{path:"login",component:ko,title:"Connexion"},{path:"logout",canActivate:[Kl],component:ko,title:"D\xE9connexion"},{path:"changementMotDePasse/:typeReinit",component:xc,title:"MAJ compte"},{path:"oauth/:provider/:token",redirectTo:"oauth/:provider/:token/",pathMatch:"full"},{path:"oauth/:provider/:token/:idToken",component:Oo},{path:"educonnect",component:Mc,title:"Connexion Educonnect"},{path:"externalRedirect",canActivate:[Ac],component:Do,title:"Page non trouv\xE9e"},{path:"loginExterne",component:Oo,title:"Connexion tierce"},{path:"visioconference/:vid",title:"Visio conf\xE9rence",loadChildren:()=>import("./chunk-PNGIW4WO.js").then(t=>t.VisioconferenceModule)}]},{path:"",canActivate:[vs],component:vc,resolve:{etablissementStoreReady:ys},runGuardsAndResolvers:"always",children:[{path:"403",component:Tc,title:"Acc\xE8s refus\xE9"},{path:"404",component:Do,title:"Page non trouv\xE9e"},{path:"about",component:Ki,title:"\xC0 propos"},{path:"accessibilite",component:Tr,title:"Accessibilit\xE9"},{path:"Accueil",component:dc,title:"Accueil"},{path:"Eleves/:idUser",canActivate:[ql],component:ic,title:"Accueil \xE9l\xE8ve"},{path:"Enseignant",canActivate:[jl],component:oc,title:"Accueil enseignant"},{path:"Famille",canActivate:[Hl],component:lc,title:"Accueil famille"},{path:"Personnel",canActivate:[Gl],component:cc,title:"Accueil personnel"},{path:"Entreprise",canActivate:[zl],component:sc,title:"Accueil entreprise"},{path:"Classes/:idEntity/CarnetDeNotes",redirectTo:"C/:idEntity/ConseilDeClasse",pathMatch:"full"},{path:"Eleves/:idUser/Notes",redirectTo:"E/:idUser/Notes",pathMatch:"full"},{path:"Enseignant/Appel",redirectTo:"Appel",pathMatch:"full"},{path:":typeEntity/AppelEtude",redirectTo:"AppelEtude",pathMatch:"full"},{path:":typeEntity/AppelPrimaire",redirectTo:"AppelPrimaire",pathMatch:"full"},{path:"Eleves/:idEntity/EmploiDuTemps",redirectTo:"E/:idEntity/EmploiDuTemps",pathMatch:"full"},{path:"Enseignants/:idEntity/EmploiDuTemps",redirectTo:"P/:idEntity/EmploiDuTemps"},{path:"Eleves/:idUser/VieScolaire",redirectTo:"E/:idUser/VieScolaire",pathMatch:"full"},{path:"Eleve/Documents",redirectTo:"Documents",pathMatch:"full"},{path:"Famille/Documents",redirectTo:"Documents",pathMatch:"full"},{path:"Adulte/Documents",redirectTo:"Documents",pathMatch:"full"},{path:"Eleves/:idUser/ReunionParentProf",redirectTo:"E/:idUser/RPP",pathMatch:"full"},{path:"Enseignants/:idUser/RPP",redirectTo:"P/:idUser/RPP",pathMatch:"full"},{path:"Famille/FamilleCoordonnees",redirectTo:"F/FamilleCoordonnees",pathMatch:"full"},{path:"Eleves/:idEntity/CahierDeTexte",redirectTo:"E/:idEntity/CahierDeTexte",pathMatch:"full"},{path:"CahierDeTextePrimaire",redirectTo:"CahierDeTexte",pathMatch:"full"},{path:"Aides",canMatch:[U],loadChildren:()=>import("./chunk-YEEAIGWJ.js").then(t=>t.AidesEnLigneModule)},{path:"Appel",canMatch:[U,W],data:{accessModules:[b.APPEL]},loadChildren:()=>import("./chunk-W77S2L5V.js").then(t=>t.AppelModule)},{path:"AppelEtude",canMatch:[U,W],data:{accessModules:[b.APPEL_ETUDE],guardTypes:[O.ENSEIGNANT,O.PERSONNEL]},loadChildren:()=>import("./chunk-VSQSG2QN.js").then(t=>t.AppelEtudeModule)},{path:"AppelPrimaire",canMatch:[U,W],data:{accessModules:[b.APPEL_PRIMAIRE],guardTypes:[O.ENSEIGNANT,O.PERSONNEL]},loadChildren:()=>import("./chunk-K6434UOS.js").then(t=>t.AppelPrimaireModule)},{path:"CahierDeTexte",canMatch:[U,W],data:{accessModules:[b.CAHIER_DE_TEXTES],guardTypes:[O.ENSEIGNANT]},loadChildren:()=>import("./chunk-HBFD6YMT.js").then(t=>t.CahierDeTexteModule)},{path:":typeEntity/:idEntity/CahierDeTexte",canMatch:[U,W],data:{accessModules:[b.CAHIER_DE_TEXTES],checkByPath:!0},loadChildren:()=>import("./chunk-HBFD6YMT.js").then(t=>t.CahierDeTexteModule)},{path:":typeEntity/:idEntity/E/:idEleve/CahierDeTexte",canMatch:[U,W],data:{accessModules:[b.CAHIER_DE_TEXTES],checkByPath:!0,guardTypes:[O.ENSEIGNANT,O.PERSONNEL]},loadChildren:()=>import("./chunk-HBFD6YMT.js").then(t=>t.CahierDeTexteModule)},{path:"CarnetDeNotes",canMatch:[U,W],data:{accessModules:[b.CARNET_NOTES]},loadChildren:()=>import("./chunk-GJBVTTB3.js").then(t=>t.CarnetDeNotesModule)},{path:"contactEtablissement",canMatch:[U],loadChildren:()=>import("./chunk-XJNYAOYB.js").then(t=>t.ContactEtablissementModule)},{path:"ConseilDeClasse",canMatch:[U,W],data:{accessModules:[b.CONSEIL_DE_CLASSE_NG]},loadChildren:()=>import("./chunk-ZCARWJLU.js").then(t=>t.ConseilDeClasseModule)},{path:"C/:idEntity/ConseilDeClasse",canMatch:[U,W],data:{accessModules:[b.CONSEIL_DE_CLASSE_NG]},loadChildren:()=>import("./chunk-ZCARWJLU.js").then(t=>t.ConseilDeClasseModule)},{path:"Consultation",canMatch:[U,W],data:{accessModules:[b.CONSULTATION_ETABLISSEMENT],guardTypes:[O.ENSEIGNANT,O.PERSONNEL]},loadChildren:()=>import("./chunk-VIAWW5P3.js").then(t=>t.ConsultationClassesModule)},{path:"groupesFlexibles",canMatch:[U,W],data:{accessModules:[b.GROUPE_FLEX]},loadChildren:()=>import("./chunk-WS5W6VWV.js").then(t=>t.GroupesFlexiblesModule)},{path:"F/DossierInscription",canMatch:[U,W],data:{accessModules:[b.DOSSIER_INSCRIPTION],guardTypes:[O.FAMILLE_RESPONSABLE,O.FAMILLE_CONJOINT]},loadChildren:()=>import("./chunk-JQJVYW5T.js").then(t=>t.DossierInscriptionModule)},{path:"F/FamilleCoordonnees",canMatch:[U,W],data:{accessModules:[b.COORDONNEES],guardTypes:[O.FAMILLE_RESPONSABLE,O.FAMILLE_CONJOINT]},loadChildren:()=>import("./chunk-JKMEQSSN.js").then(t=>t.CoordonneesFamilleModule)},{path:"LSL",canMatch:[U,W],data:{accessModules:[b.LSL]},loadChildren:()=>import("./chunk-TFGSMRBU.js").then(t=>t.LSLModule)},{path:"PassageWeb",canMatch:[U,W],data:{accessModules:[b.PASSAGEWEB],guardTypes:[O.PERSONNEL]},loadChildren:()=>import("./chunk-36GFLUBI.js").then(t=>t.PassagesWebModule)},{path:"Postits",canMatch:[U,W],data:{accessModules:[b.POSTIT]},loadChildren:()=>import("./chunk-RGHYGP6X.js").then(t=>t.PostitsModule)},{path:"utilisateur",canMatch:[U],loadChildren:()=>import("./chunk-OO4JYCL5.js").then(t=>t.ComptesUtilisateurModule)},{path:"retourPaiement/:code",canMatch:[U],loadChildren:()=>import("./chunk-DPB6TLQS.js").then(t=>t.RetourPaiementModule)},{path:":typeUser/:idUser/Activites",canMatch:[U,W],data:{accessModules:[b.COMMANDE_PASSAGE,b.RESERVATIONS],checkByPath:!0,guardTypes:[O.FAMILLE_RESPONSABLE,O.FAMILLE_CONJOINT,O.ELEVE],hasRedirectModuleRoute:!0},loadChildren:()=>import("./chunk-CF3I2MXX.js").then(t=>t.ActivitesModule)},{path:":typeEntity/:idEntity/Agenda",canMatch:[U],loadChildren:()=>import("./chunk-OMFHRDUY.js").then(t=>t.AgendaModule)},{path:":typeUser/:idUser/CarnetCorrespondance",title:"Carnet de correspondance",canMatch:[U,W,hn],data:{accessModules:[b.CARNET_CORRESPONDANCE],checkByPath:!0,hasRedirectModuleRoute:!0},loadChildren:()=>import("./chunk-SIRNQ443.js").then(t=>t.CarnetCorrespondanceModule)},{path:":typeEntity/:idEntity/:typeUser/:idUser/CarnetCorrespondance",canMatch:[U,hn],title:"Carnet de correspondance",loadChildren:()=>import("./chunk-SIRNQ443.js").then(t=>t.CarnetCorrespondanceModule)},{path:":typeUser/:idUser/CahierLiaison",title:"Cahier de liaison",canMatch:[U,W,hn],data:{accessModules:[b.CARNET_CORRESPONDANCE],checkByPath:!0,hasRedirectModuleRoute:!0},loadChildren:()=>import("./chunk-SIRNQ443.js").then(t=>t.CarnetCorrespondanceModule)},{path:":typeEntity/:idEntity/:typeUser/:idUser/CahierLiaison",canMatch:[U,hn],title:"Cahier de liaison",loadChildren:()=>import("./chunk-SIRNQ443.js").then(t=>t.CarnetCorrespondanceModule)},{path:"Compte",canMatch:[U,W],data:{accessModules:[b.SITUATION_FINANCIERE]},loadChildren:()=>import("./chunk-U4NW7TQ5.js").then(t=>t.FinanceModule)},{path:"Paiements",canMatch:[U,W],data:{accessModules:[b.PAIEMENT_EN_LIGNE]},loadChildren:()=>import("./chunk-7PESH2TZ.js").then(t=>t.PaiementEnLigneModule)},{path:":typeEntity/:idEntity/E/:idEleve/CoordonneesFamille",canMatch:[$l],loadChildren:()=>import("./chunk-RDFARHA5.js").then(t=>t.ConsultationCoordonneesFamilleModule)},{path:"E/:idEleve/CoordonneesFamille",canMatch:[U],data:{guardTypes:[O.ENTREPRISE]},loadChildren:()=>import("./chunk-RDFARHA5.js").then(t=>t.ConsultationCoordonneesFamilleModule)},{path:"Documents",canMatch:[U],loadChildren:()=>import("./chunk-RQ5FBZ3N.js").then(t=>t.DocumentsModule)},{path:":typeEntity/:idEntity/editions",canMatch:[U],loadChildren:()=>import("./chunk-CJKOIDDO.js").then(t=>t.EditionsModule)},{path:":typeEntity/:idEntity/E/:idEleve/EmploiDuTemps",canMatch:[U,W],data:{accessModules:[b.EDT]},loadChildren:()=>import("./chunk-DRMFZ7DH.js").then(t=>t.EmploiDuTempsModule)},{path:":typeEntity/:idEntity/EmploiDuTemps",canMatch:[U,W],data:{accessModules:[b.EDT],checkByPath:!0},loadChildren:()=>import("./chunk-DRMFZ7DH.js").then(t=>t.EmploiDuTempsModule)},{path:":typeUser/:idUser/SalleDesProfs",canMatch:[U],data:{guardTypes:[O.ENSEIGNANT,O.PERSONNEL]},loadChildren:()=>import("./chunk-BEELOK3A.js").then(t=>t.EspacesTravailModule)},{path:":typeUser/:idUser/EspacesTravail",canMatch:[U],data:{accessModules:[b.CLOUD,b.SALLE_DES_PROFS],checkByPath:!0},loadChildren:()=>import("./chunk-BEELOK3A.js").then(t=>t.EspacesTravailModule)},{path:":typeUser/:idUser/Messagerie",canMatch:[U,W],data:{accessModules:[b.MESSAGERIE],checkByPath:!1},loadChildren:()=>import("./chunk-VWX2675J.js").then(t=>t.MessagerieModule)},{path:":typeEntity/:idEntity/:typeUser/:idUser/MonCloud",canMatch:[U,W],data:{accessModules:[b.CLOUD]},loadChildren:()=>import("./chunk-VBVOFFNH.js").then(t=>t.CloudModule)},{path:":typeUser/:idUser/MonCloud",canMatch:[U,W],data:{accessModules:[b.CLOUD],checkByPath:!0},loadChildren:()=>import("./chunk-VBVOFFNH.js").then(t=>t.CloudModule)},{path:":typeUser/:idUser/RPP",canMatch:[U,W],data:{accessModules:[b.REUNIONS_PP],checkByPath:!0,guardTypes:[O.FAMILLE_RESPONSABLE,O.FAMILLE_CONJOINT,O.ENSEIGNANT]},loadChildren:()=>import("./chunk-GUDUFUA7.js").then(t=>t.RPPModule)},{path:"Stages",canMatch:[U,W],data:{accessModules:[b.SUIVI_STAGE]},loadChildren:()=>import("./chunk-HOZBZ7MG.js").then(t=>t.SuiviStageModule)},{path:":typeEntity/:idEntity/stages",canMatch:[U,W],data:{accessModules:[b.SUIVI_STAGE],checkByPath:!0},loadChildren:()=>import("./chunk-HOZBZ7MG.js").then(t=>t.SuiviStageModule)},{path:":typeEntity/:idEntity/VieDeLaClasse",canMatch:[U,Pc,W],data:{accessModules:[b.VIE_DE_LA_CLASSE,b.CAHIER_DE_TEXTES],checkByPath:!0},loadChildren:()=>import("./chunk-7I2FFRBA.js").then(t=>t.VieDeLaClasseModule)},{path:":typeEntity/:idEntity/:typeUser/:idUser/VieScolaire",canMatch:[U,Fo,W],data:{accessModules:[b.VIE_SCOLAIRE]},loadChildren:()=>import("./chunk-AGEZVN3W.js").then(t=>t.VieScolaireModule)},{path:":typeUser/:idUser/VieScolaire",canMatch:[U,Fo],loadChildren:()=>import("./chunk-AGEZVN3W.js").then(t=>t.VieScolaireModule)},{path:":typeUser/:idUser/Commandes",canMatch:[U,W],data:{accessModules:[b.COMMANDE_PASSAGE,b.RESERVATIONS],checkByPath:!0,guardTypes:[O.ENSEIGNANT,O.PERSONNEL]},loadChildren:()=>import("./chunk-X3I5OEEX.js").then(t=>t.CommandesPassageModule)},{path:"CompetencesNumeriques",canMatch:[U,W],data:{accessModules:[b.COMP_NUM],guardTypes:[O.ENSEIGNANT,O.PERSONNEL]},loadChildren:()=>import("./chunk-GAQVQ4QR.js").then(t=>t.CompetencesNumeriquesModule)},{path:":typeUser/:idUser/qcms",canMatch:[U,W],data:{accessModules:[b.QCM],guardTypes:[O.ENSEIGNANT,O.FAMILLE_CONJOINT,O.FAMILLE_RESPONSABLE,O.ELEVE]},loadChildren:()=>import("./chunk-EUSXLWN6.js").then(t=>t.QCMModule)},{path:":typeUser/:idUser/formulaires-et-sondages",canMatch:[U,W],data:{accessModules:[b.EDFORMS]},loadChildren:()=>import("./chunk-ZFTYR6HR.js").then(t=>t.EDFormsModule)},{path:"E/:idUser/Notes",canMatch:[U,W],data:{accessModules:[b.NOTES],checkByPath:!0},loadChildren:()=>import("./chunk-5K25XXYA.js").then(t=>t.NotesModule)},{path:":typeEntity/:idEntity/E/:idUser/Notes",canMatch:[U],loadChildren:()=>import("./chunk-5K25XXYA.js").then(t=>t.NotesModule)},{path:":typeUser/:idUser/ManuelsScolaires",canMatch:[U,W],data:{accessModules:[b.MANUELS_SCOLAIRES],checkByPath:!0},loadChildren:()=>import("./chunk-6PFCOSS3.js").then(t=>t.ManuelsScolairesModule)},{path:"ManuelsScolaires",canMatch:[U,W],data:{accessModules:[b.MANUELS_SCOLAIRES],guardTypes:[O.ENSEIGNANT]},loadChildren:()=>import("./chunk-6PFCOSS3.js").then(t=>t.ManuelsScolairesModule)},{path:":typeUser/:idUser/rendez-vous",canMatch:[U],loadChildren:()=>import("./chunk-3WSYO7PL.js").then(t=>t.RDVModule)},{path:":typeEntity/:idEntity/:typeUser/:idUser/JournalDeClasse",canMatch:[U,Ro],data:{guardTypes:[O.ENSEIGNANT,O.PERSONNEL]},loadChildren:()=>import("./chunk-34GEZ2Y2.js").then(t=>t.JournalDeClasseModule)},{path:":typeEntity/:idEntity/JournalDeClasse",canMatch:[U,Ro],data:{guardTypes:[O.ENSEIGNANT,O.PERSONNEL,O.FAMILLE_CONJOINT,O.FAMILLE_RESPONSABLE,O.ELEVE]},loadChildren:()=>import("./chunk-34GEZ2Y2.js").then(t=>t.JournalDeClasseModule)},{path:"CahierJournal",canMatch:[U,W],data:{accessModules:[b.CAHIER_JOURNAL],guardTypes:[O.ENSEIGNANT]},loadChildren:()=>import("./chunk-TI4OYDIK.js").then(t=>t.CahierJournalModule)},{path:"EmargementCFA",canMatch:[U,W],data:{accessModules:[b.EMARGEMENT_CFA],guardTypes:[O.ENSEIGNANT,O.ELEVE]},loadChildren:()=>import("./chunk-DEYUDKMR.js").then(t=>t.EmargementCfaModule)},{path:":typeUser/:idUser/mes-applis",canMatch:[U],loadChildren:()=>import("./chunk-I4I7YUBL.js").then(t=>t.HubModule)}]},{path:"repondre-au-qcm",outlet:"auxiliaryModal",canMatch:[U],data:{guardTypes:[O.ENSEIGNANT,O.FAMILLE_CONJOINT,O.FAMILLE_RESPONSABLE,O.ELEVE]},loadChildren:()=>import("./chunk-BA5PLDE7.js").then(t=>t.QcmRepondreModule)},{path:"repondre-au-fs",outlet:"auxiliaryModal",canMatch:[U],loadChildren:()=>import("./chunk-OLZK43DQ.js").then(t=>t.EDFormsRepondreModule)},{path:"open-message",outlet:"auxiliaryModal",canMatch:[U],loadChildren:()=>import("./chunk-P4CTVPC4.js").then(t=>t.MessagerieViewMessageModule)},{path:"**",redirectTo:"/Accueil"}],Ic=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=xe({type:i}),i.\u0275inj=Se({providers:[{provide:Ac,useValue:n=>{window.location.href=n.paramMap.get("externalUrl")}},{provide:Un,useClass:Ql}],imports:[Br.forRoot(Sg,{onSameUrlNavigation:"reload",scrollPositionRestoration:"disabled",anchorScrolling:"disabled",enableTracing:!1}),Br]});let t=i;return t})();var wc=["toast-component",""];function xg(t,i){if(t&1){let e=L();a(0,"button",5),S("click",function(){D(e);let r=h();return F(r.remove())}),a(1,"span",6),u(2,"\xD7"),s()()}}function Tg(t,i){if(t&1&&(le(0),u(1),ce()),t&2){let e=h(2);l(),H("[",e.duplicatesCount+1,"]")}}function Mg(t,i){if(t&1&&(a(0,"div"),u(1),E(2,Tg,2,1,"ng-container",4),s()),t&2){let e=h();qe(e.options.titleClass),_e("aria-label",e.title),l(),H(" ",e.title," "),l(),c("ngIf",e.duplicatesCount)}}function Pg(t,i){if(t&1&&g(0,"div",7),t&2){let e=h();qe(e.options.messageClass),c("innerHTML",e.message,ue)}}function Ag(t,i){if(t&1&&(a(0,"div",8),u(1),s()),t&2){let e=h();qe(e.options.messageClass),_e("aria-label",e.message),l(),H(" ",e.message," ")}}function Ig(t,i){if(t&1&&(a(0,"div"),g(1,"div",9),s()),t&2){let e=h();l(),jt("width",e.width()+"%")}}function wg(t,i){if(t&1){let e=L();a(0,"button",5),S("click",function(){D(e);let r=h();return F(r.remove())}),a(1,"span",6),u(2,"\xD7"),s()()}}function kg(t,i){if(t&1&&(le(0),u(1),ce()),t&2){let e=h(2);l(),H("[",e.duplicatesCount+1,"]")}}function Og(t,i){if(t&1&&(a(0,"div"),u(1),E(2,kg,2,1,"ng-container",4),s()),t&2){let e=h();qe(e.options.titleClass),_e("aria-label",e.title),l(),H(" ",e.title," "),l(),c("ngIf",e.duplicatesCount)}}function Dg(t,i){if(t&1&&g(0,"div",7),t&2){let e=h();qe(e.options.messageClass),c("innerHTML",e.message,ue)}}function Fg(t,i){if(t&1&&(a(0,"div",8),u(1),s()),t&2){let e=h();qe(e.options.messageClass),_e("aria-label",e.message),l(),H(" ",e.message," ")}}function Rg(t,i){if(t&1&&(a(0,"div"),g(1,"div",9),s()),t&2){let e=h();l(),jt("width",e.width()+"%")}}var kc=(()=>{class t{el;constructor(e){this.el=e}getContainerElement(){return this.el.nativeElement}static \u0275fac=function(n){return new(n||t)(v(en))};static \u0275dir=Ur({type:t,selectors:[["","toastContainer",""]],exportAs:["toastContainer"]})}return t})(),No=class{_attachedHost;component;viewContainerRef;injector;constructor(i,e){this.component=i,this.injector=e}attach(i,e){return this._attachedHost=i,i.attach(this,e)}detach(){let i=this._attachedHost;if(i)return this._attachedHost=void 0,i.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(i){this._attachedHost=i}},Uo=class{_attachedPortal;_disposeFn;attach(i,e){return this._attachedPortal=i,this.attachComponentPortal(i,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(i){this._disposeFn=i}},Lo=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Tt;_activate=new Tt;_manualClose=new Tt;_resetTimeout=new Tt;_countDuplicate=new Tt;constructor(i){this._overlayRef=i}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(i,e){i&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},Wi=class{toastId;config;message;title;toastType;toastRef;_onTap=new Tt;_onAction=new Tt;constructor(i,e,n,r,o,d){this.toastId=i,this.config=e,this.message=n,this.title=r,this.toastType=o,this.toastRef=d,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(i){this._onAction.next(i)}onAction(){return this._onAction.asObservable()}},Oc={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},jo=new Be("ToastConfig"),Bo=class extends Uo{_hostDomElement;_componentFactoryResolver;_appRef;constructor(i,e,n){super(),this._hostDomElement=i,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(i,e){let n=this._componentFactoryResolver.resolveComponentFactory(i.component),r;return r=n.create(i.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(i){return i.hostView.rootNodes[0]}},Ng=(()=>{class t{_document=I($t);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(n){return new(n||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vo=class{_portalHost;constructor(i){this._portalHost=i}attach(i,e=!0){return this._portalHost.attach(i,e)}detach(){return this._portalHost.detach()}},Ug=(()=>{class t{_overlayContainer=I(Ng);_componentFactoryResolver=I(ha);_appRef=I(Mn);_document=I($t);_paneElements=new Map;create(e,n){return this._createOverlayRef(this.getPaneElement(e,n))}getPaneElement(e="",n){return this._paneElements.get(n)||this._paneElements.set(n,{}),this._paneElements.get(n)[e]||(this._paneElements.get(n)[e]=this._createPaneElement(e,n)),this._paneElements.get(n)[e]}_createPaneElement(e,n){let r=this._document.createElement("div");return r.id="toast-container",r.classList.add(e),r.classList.add("toast-container"),n?n.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(e){return new Bo(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new Vo(this._createPortalHost(e))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ji=(()=>{class t{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,n,r,o,d){this.overlay=n,this._injector=r,this.sanitizer=o,this.ngZone=d,this.toastrConfig=J(J({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=J(J({},e.default.iconClasses),e.config.iconClasses))}show(e,n,r={},o=""){return this._preBuildNotification(o,e,n,this.applyConfig(r))}success(e,n,r={}){let o=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(o,e,n,this.applyConfig(r))}error(e,n,r={}){let o=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(o,e,n,this.applyConfig(r))}info(e,n,r={}){let o=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(o,e,n,this.applyConfig(r))}warning(e,n,r={}){let o=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(o,e,n,this.applyConfig(r))}clear(e){for(let n of this.toasts)if(e!==void 0){if(n.toastId===e){n.toastRef.manualClose();return}}else n.toastRef.manualClose()}remove(e){let n=this._findToast(e);if(!n||(n.activeToast.toastRef.close(),this.toasts.splice(n.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(e="",n="",r,o){let{includeTitleDuplicates:d}=this.toastrConfig;for(let m of this.toasts){let p=d&&m.title===e;if((!d||p)&&m.message===n)return m.toastRef.onDuplicate(r,o),m}return null}applyConfig(e={}){return J(J({},this.toastrConfig),e)}_findToast(e){for(let n=0;n<this.toasts.length;n++)if(this.toasts[n].toastId===e)return{index:n,activeToast:this.toasts[n]};return null}_preBuildNotification(e,n,r,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,n,r,o)):this._buildNotification(e,n,r,o)}_buildNotification(e,n,r,o){if(!o.toastComponent)throw new Error("toastComponent required");let d=this.findDuplicate(r,n,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||n)&&this.toastrConfig.preventDuplicates&&d!==null)return d;this.previousToastMessage=n;let m=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(m=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let p=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let f=n;n&&o.enableHtml&&(f=this.sanitizer.sanitize(Nr.HTML,n));let _=new Lo(p),y=new Wi(this.index,o,f,r,e,_),T=[{provide:Wi,useValue:y}],P=Sn.create({providers:T,parent:this._injector}),A=new No(o.toastComponent,P),j=p.attach(A,o.newestOnTop);_.componentInstance=j.instance;let ee={toastId:this.index,title:r||"",message:n||"",toastRef:_,onShown:_.afterActivate(),onHidden:_.afterClosed(),onTap:y.onTap(),onAction:y.onAction(),portal:j};return m||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ee.toastRef.activate()})),this.toasts.push(ee),ee}static \u0275fac=function(n){return new(n||t)(X(jo),X(Ug),X(Sn),X(wa),X(Ci))};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Lg=(()=>{class t{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=tn(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,n,r){this.toastrService=e,this.toastPackage=n,this.ngZone=r,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state=tn({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(e=>Ue(J({},e),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),n=this.hideTime-e;this.width.set(n/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(e=>Ue(J({},e),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(e=>Ue(J({},e),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),n)):this.timeout=setTimeout(()=>e(),n)}outsideInterval(e,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),n)):this.intervalId=setInterval(()=>e(),n)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(n){return new(n||t)(v(Ji),v(Wi),v(Ci))};static \u0275cmp=w({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(n,r){n&1&&S("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),n&2&&(_a("@flyInOut",r._state),qe(r.toastClasses),jt("display",r.displayStyle))},attrs:wc,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,r){n&1&&E(0,xg,3,0,"button",0)(1,Mg,3,5,"div",1)(2,Pg,1,3,"div",2)(3,Ag,2,4,"div",3)(4,Ig,2,2,"div",4),n&2&&(c("ngIf",r.options.closeButton),l(),c("ngIf",r.title),l(),c("ngIf",r.message&&r.options.enableHtml),l(),c("ngIf",r.message&&!r.options.enableHtml),l(),c("ngIf",r.options.progressBar))},dependencies:[G],encapsulation:2,data:{animation:[fs("flyInOut",[$n("inactive",xi({opacity:0})),$n("active",xi({opacity:1})),$n("removed",xi({opacity:0})),qr("inactive => active",zr("{{ easeTime }}ms {{ easing }}")),qr("active => removed",zr("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return t})(),Bg=Ue(J({},Oc),{toastComponent:Lg}),Vg=(t={})=>Cn([{provide:jo,useValue:{default:Bg,config:t}}]),zo=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[Vg(e)]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=xe({type:t});static \u0275inj=Se({})}return t})();var jg=(()=>{class t{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=tn(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=tn("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,n,r){this.toastrService=e,this.toastPackage=n,this.appRef=r,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),n=this.hideTime-e;this.width.set(n/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(n){return new(n||t)(v(Ji),v(Wi),v(Mn))};static \u0275cmp=w({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(n,r){n&1&&S("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),n&2&&(qe(r.toastClasses),jt("display",r.displayStyle))},attrs:wc,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,r){n&1&&E(0,wg,3,0,"button",0)(1,Og,3,5,"div",1)(2,Dg,1,3,"div",2)(3,Fg,2,4,"div",3)(4,Rg,2,2,"div",4),n&2&&(c("ngIf",r.options.closeButton),l(),c("ngIf",r.title),l(),c("ngIf",r.message&&r.options.enableHtml),l(),c("ngIf",r.message&&!r.options.enableHtml),l(),c("ngIf",r.options.progressBar))},dependencies:[G],encapsulation:2,changeDetection:0})}return t})(),zg=Ue(J({},Oc),{toastComponent:jg}),Dc=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:jo,useValue:{default:zg,config:e}}]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=xe({type:t});static \u0275inj=Se({})}return t})();var Rc=(()=>{let i=class i{constructor(n,r){this.modalService=n,this.modalRef=r}redirectToLogin(){this.modalService.setDismissReason("backLogin"),this.modalRef.hide()}};i.\u0275fac=function(r){return new(r||i)(v(Fe),v(ui))},i.\u0275cmp=w({type:i,selectors:[["ed-modal-reconnexion"]],standalone:!1,decls:17,vars:1,consts:[["role","alertdialog"],[1,"modal-header"],[1,"modal-title"],[1,"modal-subtitle"],[1,"modal-body"],[1,"login-container","session-expire"],[1,"text-center"],["src","/assets/images/logoEcoleDirecte.png","alt","Logo du site EcoleDirecte"],["id","bloc-connexion",1,"form-box",3,"isRelogin"],[1,"modal-footer"],["type","button",1,"btn","btn-link",3,"click"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"div",1)(2,"div")(3,"h3",2),u(4,"Votre session a expir\xE9"),s(),a(5,"p",3),u(6,"Vous devez vous reconnecter pour poursuivre"),s()()(),a(7,"div",4)(8,"div",5)(9,"div",6),g(10,"img",7),a(11,"h1"),u(12,"EcoleDirecte"),s()(),g(13,"ed-login-form",8),s()(),a(14,"div",9)(15,"button",10),S("click",function(){return o.redirectToLogin()}),u(16,"Retour \xE0 l'accueil"),s()()()),r&2&&(l(13),c("isRelogin",!0))},dependencies:[ki],encapsulation:2});let t=i;return t})();var Nc=(()=>{let i=class i extends Ie(){constructor(n,r,o,d,m,p,f){super(),this.accountService=n,this.authStore=r,this.httpAccessFailedService=o,this.modalService=d,this.router=m,this.toastr=p,this.uiService=f}startObserving(){this.uiService.select$().pipe(tt(n=>n.typeUiState===Ba.event),De(this._destroyRef)).subscribe(n=>this.displayEvent(n))}presentNotification(n){this.toastr.show(n.message,n.title,J({},n.custom),this.toastr.toastrConfig.iconClasses[n.type])}openModalReconnexion(){if(Object.isExists(this.authStore.currentUser)&&this.authStore.currentUser.isLoggedInFromOAuth){this.uiService.notifyEvent(Y.genericSuccess,`La session d'authentification depuis "${this.authStore.currentUser.oAuthParams.libelle}" a expir\xE9`,"Votre session est expir\xE9e"),this.accountService.logout();return}if(this.httpAccessFailedService.nbFailedRequests<=1){let n={id:"modalReconnexion",keyboard:!1,ignoreBackdropClick:!0};this.modalService.show(Rc,n),this.modalService.onHide.pipe(ke(1)).subscribe(r=>{r==="backLogin"&&this.accountService.logout()})}}displayEvent(n){let r={type:"error",title:n.title,message:n.message,custom:{enableHtml:!0,toastClass:"ngx-toastr",timeOut:5e3}};switch(n.action){case Y.userAccessTokenInvalid:this.openModalReconnexion();return;case Y.e403:this.router.navigateByUrl("/403").catch(o=>console.error("displayEvent navigate to /403"));break;case Y.e404:this.router.navigateByUrl("/404").catch(o=>console.error("displayEvent navigate to /404"));break;case Y.genericInfo:r={type:"info",title:n.title,message:n.message,custom:{enableHtml:!0,toastClass:"ngx-toastr",timeOut:5e3}};break;case Y.genericSuccess:r={type:"success",title:n.title,message:n.message,custom:{enableHtml:!0,toastClass:"ngx-toastr"}};break;case Y.genericWarning:r={type:"warning",title:n.title,message:n.message,custom:{enableHtml:!0,toastClass:"ngx-toastr",timeOut:5e3}};break;case Y.ePersistant:r={type:"error",title:n.title,message:n.message,custom:{enableHtml:!0,toastClass:"ngx-toastr",closeButton:!0,disableTimeOut:!0}};break;case Y.genericError:break;default:console.error(new Error(n.message));return}this.presentNotification(r)}};i.\u0275fac=function(r){return new(r||i)(X(Ft),X(M),X(qn),X(Fe),X(Q),X(Ji),X(ye))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();var Hg=()=>[];function Gg(t,i){t&1&&(le(0),g(1,"ed-custom-busy")(2,"router-outlet")(3,"router-outlet",5),ce())}function $g(t,i){if(t&1&&(a(0,"div",6)(1,"div",7)(2,"header"),g(3,"img",8),a(4,"h1"),u(5,"EcoleDirecte"),s()(),a(6,"p",9),u(7,"Bienvenue sur le portail EcoleDirecte. Espace famille, \xE9l\xE8ve, personnel, enseignant ..."),s()(),a(8,"div",10)(9,"p"),g(10,"fa-icon",11),a(11,"span",9),u(12,"Veuillez patienter pendant le chargement du site EcoleDirecte"),s(),a(13,"em"),u(14," Si au bout de quelques minutes cette page reste affich\xE9e, "),a(15,"a",12),u(16,"cliquez ici"),s()()()()()),t&2){let e=h();l(10),c("icon",e.faSpinner),l(5),c("routerLink",K(2,Hg))}}var Uc=(()=>{let i=class i extends Ie(){constructor(n,r,o,d,m,p,f,_,y,T){super(),this.authStore=n,this.uiNotifierService=r,this.uiService=o,this.router=d,this.location=m,this.etablissementService=p,this.loaderService=f,this.menuStore=_,this.localeService=y,this.toastrService=T,this.faSpinner=Cs,_s("bs5"),Xn.invalidDate="",this.localeService.use("fr"),Os("fr",Xn),this.router.events.pipe(tt(P=>P instanceof ei),q(P=>{this.authStore.isLoggedIn()&&this.manageSubMenus()}),De()).subscribe()}ngOnInit(){this.toastrService.overlayContainer=this.toastContainer,this.uiNotifierService.startObserving(),this.isAppReady=!0}manageSubMenus(){let n,r,o,d=!1,m=this.location.path(),p=[b.CARNET_CORRESPONDANCE];for(let y of p){let T=this.menuStore.getMenuBlockItem(this.authStore.currentUser.id,this.authStore.currentUser.typeCompte,y);if(Object.isExists(T)&&m.startsWith(T.action.route)){this.authStore.removeSubMenu();return}}let f=/\/([CG])\/(\d+)\/E\/(\d+)\/|([CGE])\/(\d+)/,_=f.exec(m);if(Array.isArray(_)&&(Object.isExists(_[4])&&Object.isExists(_[5])?_[4]===O.ELEVE?r=+_[5]:(o=_[4],n=+_[5]):Object.isExists(_[1])&&Object.isExists(_[2])&&Object.isExists(_[3])&&(o=_[1],n=+_[2],r=+_[3]),Object.isExists(n)&&Object.isExists(o)&&(d=!0)),!d){if(f=/\/Consultation\?(?:.*&)?idEntity=[^&]*/,_=f.exec(m),Array.isArray(_)&&_.length>0){f=/([^?]+)(\?.*)?/;let y=f.exec(_[0]);if(Array.isArray(y)&&y.length>=2){let T=new URLSearchParams(y[2]);o=T.get("typeEntity"),n=+T.get("idEntity")}}Object.isExists(n)&&Object.isExists(o)&&(d=!0)}d&&n>0&&(o===on.CLASSE||o===on.GROUPE)?(this.loader=this.loaderService.show(this),this.etablissementService.getClasseGroupeById(n,o).pipe(We(y=>(this.authStore.toggleMenuClasseOuGroupe(n,Si[o],y,!0),this.authStore.removeSubMenu(this.authStore.isProfesseur()?Si.PE:Si.AE),Object.isExists(r)?this.etablissementService.getEleveById(r):Le(new Ga))),q(y=>{y.id>0&&this.authStore.toggleMenuProfOuPersonnelEleve(this.authStore.currentUser,n,Si[o],y,!0)}),ge(()=>this.loaderService.hide(this)),ie(y=>this.uiService.notifyErrorThenEmpty(y,!0,"Consultation"))).subscribe()):Object.isExists(r)?this.authStore.toggleMenuFamilleEleve(this.authStore.currentUser,r):this.authStore.removeSubMenu()}};i.\u0275fac=function(r){return new(r||i)(v(M),v(Nc),v(ye),v(Q),v(An),v(ri),v(Re),v(oi),v(Fs),v(Ji))},i.\u0275cmp=w({type:i,selectors:[["app-root"]],viewQuery:function(r,o){if(r&1&&qt(kc,7),r&2){let d;Ht(d=Gt())&&(o.toastContainer=d.first)}},standalone:!1,features:[Oe],decls:7,vars:3,consts:[["chargementencours",""],[1,"container-principal",3,"cgBusy"],[4,"ngIf","ngIfElse"],["aria-live","polite","toastContainer",""],["id","preloadfont"],["name","auxiliaryModal"],["id","chargementencours",1,"row"],[1,"col-xl-4","col-lg-5","load-container","login-container"],["alt","Logo du site EcoleDirecte","src","/assets/images/logoEcoleDirecte.png"],[1,"text-bold","m-0"],[1,"col-xl-8","col-lg-7","info-container"],["animation","spin-pulse","aria-hidden","true",3,"icon"],["href","","onclick","window.location.href='/?t='+Math.random()","aria-label","Actualiser le site",3,"routerLink"]],template:function(r,o){if(r&1&&(a(0,"div",1),E(1,Gg,4,0,"ng-container",2),s(),g(2,"div",3),a(3,"div",4),u(4,"."),s(),E(5,$g,17,3,"ng-template",null,0,Te)),r&2){let d=re(6);c("cgBusy",o.loader),l(),c("ngIf",o.isAppReady)("ngIfElse",d)}},dependencies:[G,Ni,ae,pe,se,ws],styles:["#chargementencours[_ngcontent-%COMP%]   .load-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;position:relative;padding:80px!important;min-height:100vh}#chargementencours[_ngcontent-%COMP%]   .load-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:18px}#chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{margin:100px 0 5vh}#chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:15px;color:var(--dark-primary-color);margin-top:5px;text-align:center}#chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:0 auto}#chargementencours[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{position:relative;display:flex;min-height:100vh;background:linear-gradient(var(--dark-primary-color) 0%,var(--light-primary-color) 100%)}#chargementencours[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:auto;color:#fff;text-align:center}#chargementencours[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px}#chargementencours[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin:30px 0;font-size:20px}#chargementencours[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:18px}@media screen and (width <= 1280px){#chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{margin:0}#chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   #bloc-connexion[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}#chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   #bloc-connexion[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], #chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   #bloc-connexion[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{height:30px}#chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   .log[_ngcontent-%COMP%]{margin:0}#chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   .mdp-lost[_ngcontent-%COMP%]{margin:1vh 0 4vh}#chargementencours[_ngcontent-%COMP%]   .load-container.login-container[_ngcontent-%COMP%]   span#show-password[_ngcontent-%COMP%]{bottom:-33px}}"]});let t=i;return t})();function Kg(t){let i=t,e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===0||e===1?1:r===0&&e!==0&&e%1e6===0&&n===0||!(r>=0&&r<=5)?4:5}var Lc=["fr",[["AM","PM"],void 0,void 0],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",Kg];var Bc=[[["minuit","midi","mat.","ap.m.","soir","nuit"],void 0,["minuit","midi","du matin","de l\u2019apr\xE8s-midi","du soir","du matin"]],[["minuit","midi","mat.","ap.m.","soir","nuit"],void 0,["minuit","midi","matin","apr\xE8s-midi","soir","nuit"]],["00:00","12:00",["04:00","12:00"],["12:00","18:00"],["18:00","24:00"],["00:00","04:00"]]];function Qg(t){return typeof t=="string"?()=>{throw new Error(t)}:t}function Pr(t,i){let e=i?Qg(i):()=>{},n=!1;return(...r)=>n?e(...r):(n=!0,t(...r))}function qc(t){return t.endsWith("/")?t:`${t}/`}var Wg=(t,i)=>{let e=i.createElement("script");return e.type="text/javascript",e.defer=!0,e.async=!0,e.src=t,e},Jg=new Be("MATOMO_SCRIPT_FACTORY",{providedIn:"root",factory:()=>Wg});function Ar(t,i){if(t==null)throw new Error("Unexpected "+t+" value: "+i);return t}var Hc=(()=>{let i=class i{constructor(){this.scriptFactory=I(Jg),this.injector=I(Dr),this.document=I($t)}injectDOMScript(n){let r=Fr(this.injector,()=>this.scriptFactory(n,this.document)),o=Ar(this.document.getElementsByTagName("script")[0],"no existing script found");Ar(o.parentNode,"no script's parent node found").insertBefore(r,o)}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=he({token:i,factory:i.\u0275fac});let t=i;return t})(),Xg="No Matomo configuration found! Have you included Matomo module using MatomoModule.forRoot() or provideMatomo()?",Ko=new Be("MATOMO_ROUTER_ENABLED",{factory(){return!1}}),qo=new Be("MATOMO_CONFIGURATION"),_i=new Be("INTERNAL_MATOMO_CONFIGURATION");function Yg(){let n=Ar(I(qo,{optional:!0}),Xg),{mode:t,requireConsent:i}=n,e=yn(n,["mode","requireConsent"]);return J({mode:t?tv(t):void 0,disabled:!1,enableLinkTracking:!0,trackAppInitialLoad:!I(Ko),requireConsent:i?iv(i):"none",enableJSErrorTracking:!1,runOutsideAngularZone:!1,disableCampaignParameters:!1,acceptDoNotTrack:!1},e)}var Ho=new Be("DEFERRED_INTERNAL_MATOMO_CONFIGURATION");function Zg(){let t=I(_i),i;return{configuration:new Promise(n=>i=n),markReady(n){Ar(i,"resolveFn")(J(J({},t),n))}}}var ev=new Be("ASYNC_INTERNAL_MATOMO_CONFIGURATION"),vn=function(t){return t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t[t.AUTO_DEFERRED=2]="AUTO_DEFERRED",t}(vn||{});function tv(t){switch(t){case vn.AUTO:return"auto";case vn.MANUAL:return"manual";case vn.AUTO_DEFERRED:return"deferred";default:return t}}var Mr=function(t){return t[t.NONE=0]="NONE",t[t.COOKIE=1]="COOKIE",t[t.TRACKING=2]="TRACKING",t}(Mr||{});function iv(t){switch(t){case Mr.NONE:return"none";case Mr.COOKIE:return"cookie";case Mr.TRACKING:return"tracking";default:return t}}function nv(t){return t.mode==null||t.mode==="auto"||t.mode===vn.AUTO}function Gc(t){return t.siteId!=null&&t.trackerUrl!=null}function rv(t){return t.scriptUrl!=null&&!Gc(t)}function ov(t){return Gc(t)||$c(t)}function $c(t){return Array.isArray(t.trackers)}function av(t){return $c(t)?t.trackers:[{trackerUrl:t.trackerUrl,siteId:t.siteId,trackerUrlSuffix:t.trackerUrlSuffix}]}function Kc(){window._paq=window._paq||[]}function Vc(t){let i=[...t];for(;i.length>0&&i[i.length-1]===void 0;)i.pop();return i}function sv(){let t=I(_i).disabled,i=rn(I(nn));return t||!i?new lv:new Qo}var Qo=(()=>{let i=class i{constructor(){this.ngZone=I(Ci),this.config=I(_i),Kc()}get(n){return this.pushFn(r=>r[n]())}pushFn(n){return new Promise(r=>{this.push([function(){r(n(this))}])})}push(n){this.config.runOutsideAngularZone?this.ngZone.runOutsideAngular(()=>{window._paq.push(Vc(n))}):window._paq.push(Vc(n))}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=he({token:i,factory:i.\u0275fac});let t=i;return t})(),lv=(()=>{let i=class i{get(n){return kr(this,null,function*(){return Promise.reject("MatomoTracker is disabled")})}push(n){}pushFn(n){return kr(this,null,function*(){return Promise.reject("MatomoTracker is disabled")})}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=he({token:i,factory:i.\u0275fac});let t=i;return t})();var cv="Matomo trackers have already been initialized",dv="Matomo has already been initialized";function uv(t){return typeof t=="object"&&Object.keys(t).length===1&&t.productCategory!=null}function mv(t){return typeof t=="object"&&"productSKU"in t}var _n=(()=>{let i=class i{constructor(){this.delegate=I(Qo),this._pageViewTracked=new Tt,this.pageViewTracked=this._pageViewTracked.asObservable(),I(ma).onDestroy(()=>this._pageViewTracked.complete())}trackPageView(n){this.delegate.push(["trackPageView",n]),this._pageViewTracked.next()}trackEvent(n,r,o,d,m){this.delegate.push(["trackEvent",n,r,o,d,m])}trackSiteSearch(n,r,o,d){this.delegate.push(["trackSiteSearch",n,r,o,d])}trackGoal(n,r,o){this.delegate.push(["trackGoal",n,r,o])}trackLink(n,r,o){this.delegate.push(["trackLink",n,r,o])}trackAllContentImpressions(){this.delegate.push(["trackAllContentImpressions"])}trackVisibleContentImpressions(n,r){this.delegate.push(["trackVisibleContentImpressions",n,r])}trackContentImpressionsWithinNode(n){this.delegate.push(["trackContentImpressionsWithinNode",n])}trackContentInteractionNode(n,r){this.delegate.push(["trackContentInteractionNode",n,r])}trackContentImpression(n,r,o){this.delegate.push(["trackContentImpression",n,r,o])}trackContentInteraction(n,r,o,d){this.delegate.push(["trackContentInteraction",n,r,o,d])}logAllContentBlocksOnPage(){this.delegate.push(["logAllContentBlocksOnPage"])}ping(){this.delegate.push(["ping"])}enableHeartBeatTimer(n){this.delegate.push(["enableHeartBeatTimer",n])}enableLinkTracking(n=!1){this.delegate.push(["enableLinkTracking",n])}disablePerformanceTracking(){this.delegate.push(["disablePerformanceTracking"])}enableCrossDomainLinking(){this.delegate.push(["enableCrossDomainLinking"])}setCrossDomainLinkingTimeout(n){this.delegate.push(["setCrossDomainLinkingTimeout",n])}getCrossDomainLinkingUrlParameter(){return this.delegate.get("getCrossDomainLinkingUrlParameter")}setDocumentTitle(n){this.delegate.push(["setDocumentTitle",n])}setDomains(n){this.delegate.push(["setDomains",n])}setCustomUrl(n){this.delegate.push(["setCustomUrl",n])}setReferrerUrl(n){this.delegate.push(["setReferrerUrl",n])}setSiteId(n){this.delegate.push(["setSiteId",n])}setApiUrl(n){this.delegate.push(["setApiUrl",n])}setTrackerUrl(n){this.delegate.push(["setTrackerUrl",n])}addTracker(n,r){this.delegate.push(["addTracker",n,r])}getMatomoUrl(){return this.delegate.get("getMatomoUrl")}getPiwikUrl(){return this.delegate.get("getPiwikUrl")}getCurrentUrl(){return this.delegate.get("getCurrentUrl")}setDownloadClasses(n){this.delegate.push(["setDownloadClasses",n])}setDownloadExtensions(n){this.delegate.push(["setDownloadExtensions",n])}addDownloadExtensions(n){this.delegate.push(["addDownloadExtensions",n])}removeDownloadExtensions(n){this.delegate.push(["removeDownloadExtensions",n])}setIgnoreClasses(n){this.delegate.push(["setIgnoreClasses",n])}setLinkClasses(n){this.delegate.push(["setLinkClasses",n])}setLinkTrackingTimer(n){this.delegate.push(["setLinkTrackingTimer",n])}getLinkTrackingTimer(){return this.delegate.get("getLinkTrackingTimer")}discardHashTag(n){this.delegate.push(["discardHashTag",n])}setGenerationTimeMs(n){this.delegate.push(["setGenerationTimeMs",n])}setPagePerformanceTiming(n,r,o,d,m,p){let f;typeof n=="object"&&n?(f=n.networkTimeInMs,r=n.serverTimeInMs,o=n.transferTimeInMs,d=n.domProcessingTimeInMs,m=n.domCompletionTimeInMs,p=n.onloadTimeInMs):f=n,this.delegate.push(["setPagePerformanceTiming",f,r,o,d,m,p])}getCustomPagePerformanceTiming(){return this.delegate.get("getCustomPagePerformanceTiming")}appendToTrackingUrl(n){this.delegate.push(["appendToTrackingUrl",n])}setDoNotTrack(n){this.delegate.push(["setDoNotTrack",n])}killFrame(){this.delegate.push(["killFrame"])}redirectFile(n){this.delegate.push(["redirectFile",n])}setHeartBeatTimer(n,r){this.delegate.push(["setHeartBeatTimer",n,r])}getVisitorId(){return this.delegate.get("getVisitorId")}setVisitorId(n){this.delegate.push(["setVisitorId",n])}getVisitorInfo(){return this.delegate.get("getVisitorInfo")}getAttributionInfo(){return this.delegate.get("getAttributionInfo")}getAttributionCampaignName(){return this.delegate.get("getAttributionCampaignName")}getAttributionCampaignKeyword(){return this.delegate.get("getAttributionCampaignKeyword")}getAttributionReferrerTimestamp(){return this.delegate.get("getAttributionReferrerTimestamp")}getAttributionReferrerUrl(){return this.delegate.get("getAttributionReferrerUrl")}getUserId(){return this.delegate.get("getUserId")}setUserId(n){this.delegate.push(["setUserId",n])}resetUserId(){this.delegate.push(["resetUserId"])}setPageViewId(n){this.delegate.push(["setPageViewId",n])}getPageViewId(){return this.delegate.get("getPageViewId")}setCustomData(...n){this.delegate.push(["setCustomData",...n])}getCustomData(){return this.delegate.get("getCustomData")}setCustomVariable(n,r,o,d){this.delegate.push(["setCustomVariable",n,r,o,d])}deleteCustomVariable(n,r){this.delegate.push(["deleteCustomVariable",n,r])}deleteCustomVariables(n){this.delegate.push(["deleteCustomVariables",n])}getCustomVariable(n,r){return this.delegate.pushFn(o=>o.getCustomVariable(n,r))}storeCustomVariablesInCookie(){this.delegate.push(["storeCustomVariablesInCookie"])}setCustomDimension(n,r){this.delegate.push(["setCustomDimension",n,r])}deleteCustomDimension(n){this.delegate.push(["deleteCustomDimension",n])}getCustomDimension(n){return this.delegate.pushFn(r=>r.getCustomDimension(n))}setCampaignNameKey(n){this.delegate.push(["setCampaignNameKey",n])}setCampaignKeywordKey(n){this.delegate.push(["setCampaignKeywordKey",n])}setConversionAttributionFirstReferrer(n){this.delegate.push(["setConversionAttributionFirstReferrer",n])}setEcommerceView(n,r,o,d){uv(n)?this.delegate.push(["setEcommerceView",!1,!1,n.productCategory]):mv(n)?this.delegate.push(["setEcommerceView",n.productSKU,n.productName,n.productCategory,n.price]):this.delegate.push(["setEcommerceView",n,r,o,d])}addEcommerceItem(n,r,o,d,m){typeof n=="string"?this.delegate.push(["addEcommerceItem",n,r,o,d,m]):this.delegate.push(["addEcommerceItem",n.productSKU,n.productName,n.productCategory,n.price,n.quantity])}removeEcommerceItem(n){this.delegate.push(["removeEcommerceItem",n])}clearEcommerceCart(){this.delegate.push(["clearEcommerceCart"])}getEcommerceItems(){return this.delegate.get("getEcommerceItems")}trackEcommerceCartUpdate(n){this.delegate.push(["trackEcommerceCartUpdate",n])}trackEcommerceOrder(n,r,o,d,m,p){this.delegate.push(["trackEcommerceOrder",n,r,o,d,m,p])}requireConsent(){this.delegate.push(["requireConsent"])}setConsentGiven(){this.delegate.push(["setConsentGiven"])}rememberConsentGiven(n){this.delegate.push(["rememberConsentGiven",n])}forgetConsentGiven(){this.delegate.push(["forgetConsentGiven"])}hasRememberedConsent(){return this.delegate.get("hasRememberedConsent")}getRememberedConsent(){return this.delegate.get("getRememberedConsent")}isConsentRequired(){return this.delegate.get("isConsentRequired")}requireCookieConsent(){this.delegate.push(["requireCookieConsent"])}setCookieConsentGiven(){this.delegate.push(["setCookieConsentGiven"])}rememberCookieConsentGiven(n){this.delegate.push(["rememberCookieConsentGiven",n])}forgetCookieConsentGiven(){this.delegate.push(["forgetCookieConsentGiven"])}getRememberedCookieConsent(){return this.delegate.get("getRememberedCookieConsent")}areCookiesEnabled(){return this.delegate.get("areCookiesEnabled")}optUserOut(){this.delegate.push(["optUserOut"])}forgetUserOptOut(){this.delegate.push(["forgetUserOptOut"])}isUserOptedOut(){return this.delegate.get("isUserOptedOut")}disableCookies(){this.delegate.push(["disableCookies"])}deleteCookies(){this.delegate.push(["deleteCookies"])}hasCookies(){return this.delegate.get("hasCookies")}setCookieNamePrefix(n){this.delegate.push(["setCookieNamePrefix",n])}setCookieDomain(n){this.delegate.push(["setCookieDomain",n])}setCookiePath(n){this.delegate.push(["setCookiePath",n])}setSecureCookie(n){this.delegate.push(["setSecureCookie",n])}setCookieSameSite(n){this.delegate.push(["setCookieSameSite",n])}setVisitorCookieTimeout(n){this.delegate.push(["setVisitorCookieTimeout",n])}setReferralCookieTimeout(n){this.delegate.push(["setReferralCookieTimeout",n])}setSessionCookieTimeout(n){this.delegate.push(["setSessionCookieTimeout",n])}addListener(n){this.delegate.push(["addListener",n])}setRequestMethod(n){this.delegate.push(["setRequestMethod",n])}setCustomRequestProcessing(n){this.delegate.push(["setCustomRequestProcessing",n])}setRequestContentType(n){this.delegate.push(["setRequestContentType",n])}disableQueueRequest(){this.delegate.push(["disableQueueRequest"])}setRequestQueueInterval(n){this.delegate.push(["setRequestQueueInterval",n])}disableAlwaysUseSendBeacon(){this.delegate.push(["disableAlwaysUseSendBeacon"])}alwaysUseSendBeacon(){this.delegate.push(["alwaysUseSendBeacon"])}enableJSErrorTracking(){this.delegate.push(["enableJSErrorTracking"])}enableFileTracking(){this.delegate.push(["enableFileTracking"])}setExcludedReferrers(...n){let r=n.flat();this.delegate.push(["setExcludedReferrers",r])}getExcludedReferrers(){return this.delegate.get("getExcludedReferrers")}disableBrowserFeatureDetection(){this.delegate.push(["disableBrowserFeatureDetection"])}enableBrowserFeatureDetection(){this.delegate.push(["enableBrowserFeatureDetection"])}disableCampaignParameters(){this.delegate.push(["disableCampaignParameters"])}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=he({token:i,factory:i.\u0275fac});let t=i;return t})();function jc(t){return`${t}`}function zc(t,i){return i==null?qc(t)+pv:t+i}var pv="matomo.php",hv="matomo.js";function fv(){let t=I(_i).disabled,i=rn(I(nn));return t||!i?new Go:new $o}var Go=class{initialize(){}init(){}initializeTracker(i){}},$o=(()=>{let i=class i{constructor(){this.config=I(_i),this.deferredConfig=I(Ho),this.tracker=I(_n),this.scriptInjector=I(Hc),this.initialize=Pr(()=>{this.runPreInitTasks(),nv(this.config)?this.injectMatomoScript(this.config):this.deferredConfig.markReady(this.config)},dv),this.injectMatomoScript=Pr(n=>{if(ov(n)){let{scriptUrl:r}=n,[o,...d]=av(n),m=r??qc(o.trackerUrl)+hv;this.registerMainTracker(o),this.registerAdditionalTrackers(d),this.scriptInjector.injectDOMScript(m)}else if(rv(n)){let{scriptUrl:r,trackers:o}=J({trackers:[]},n);this.registerAdditionalTrackers(o),this.scriptInjector.injectDOMScript(r)}this.deferredConfig.markReady(n)},cv),Kc()}init(){this.initialize()}initializeTracker(n){this.injectMatomoScript(n)}registerMainTracker(n){let r=zc(n.trackerUrl,n.trackerUrlSuffix),o=jc(n.siteId);this.tracker.setTrackerUrl(r),this.tracker.setSiteId(o)}registerAdditionalTrackers(n){n.forEach(({trackerUrl:r,siteId:o,trackerUrlSuffix:d})=>{let m=zc(r,d),p=jc(o);this.tracker.addTracker(m,p)})}runPreInitTasks(){this.config.acceptDoNotTrack&&this.tracker.setDoNotTrack(!0),this.config.requireConsent==="cookie"?this.tracker.requireCookieConsent():this.config.requireConsent==="tracking"&&this.tracker.requireConsent(),this.config.enableJSErrorTracking&&this.tracker.enableJSErrorTracking(),this.config.disableCampaignParameters&&this.tracker.disableCampaignParameters(),this.config.trackAppInitialLoad&&this.tracker.trackPageView(),this.config.enableLinkTracking&&this.tracker.enableLinkTracking(this.config.enableLinkTracking==="enable-pseudo")}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=he({token:i,factory:i.\u0275fac});let t=i;return t})(),Qc=Symbol("MATOMO_PROVIDERS"),Wc=Symbol("MATOMO_CHECKS");function Jc(t,i,e){return{kind:t,[Qc]:i,[Wc]:e}}function Xc(t,...i){var r;let e=[_n,Hc,{provide:Qo,useFactory:sv},{provide:$o,useFactory:fv},{provide:_i,useFactory:Yg},{provide:Ho,useFactory:Zg},{provide:ev,useFactory:()=>I(Ho).configuration},{provide:bn,multi:!0,useValue(){I($o).initialize()}}],n=[];typeof t=="function"?e.push({provide:qo,useFactory:t}):e.push({provide:qo,useValue:t});for(let o of i)e.push(...o[Qc]),n.push(o.kind);for(let o of i)(r=o[Wc])==null||r.call(o,n);return Cn(e)}var ed=new Be("MATOMO_ROUTER_CONFIGURATION"),vv={prependBaseHref:!0,trackPageTitle:!0,delay:0,exclude:[],navigationEndComparator:"fullUrl"},Xo=new Be("INTERNAL_ROUTER_CONFIGURATION");function _v(){let{disabled:t,enableLinkTracking:i}=I(_i),e=I(ed,{optional:!0})||{};return Ue(J(J({},vv),e),{enableLinkTracking:i,disabled:t})}var Ev=new Be("MATOMO_ROUTER_INTERCEPTORS");var yv="matomo",YC=new Be("MATOMO_ROUTE_DATA_KEY",{providedIn:"root",factory:()=>yv});var bv="MatomoRouter has already been initialized";function Cv(){return new Error('An invalid MATOMO_ROUTER_INTERCEPTORS provider was configured. Did you forget to set "multi: true" ?')}var td=new Be("MATOMO_PAGE_TITLE_PROVIDER"),Sv=(()=>{let i=class i{constructor(n){this.title=n}getCurrentPageTitle(n){return Le(this.title.getTitle())}};i.\u0275fac=function(r){return new(r||i)(X(kn))},i.\u0275prov=he({token:i,factory:i.\u0275fac});let t=i;return t})(),id=new Be("MATOMO_PAGE_URL_PROVIDER");function xv(){return new Jo(I(Xo),I(Sa,{optional:!0}),I(Ca))}function Tv(t){return t.endsWith("/")?t.slice(0,-1):t}var Jo=class{constructor(i,e,n){this.config=i,this.baseHref=e,this.locationStrategy=n}getCurrentPageUrl(i){let e=this.config.prependBaseHref?this.getBaseHrefWithoutTrailingSlash()+i.urlAfterRedirects:i.urlAfterRedirects;return Le(e)}getBaseHrefWithoutTrailingSlash(){return Tv(this.baseHref??this.locationStrategy.getBaseHref()??"")}};function Mv(t){return t instanceof ei}function Yc(t){return typeof t=="string"?new RegExp(t):t}function Pv(t){return t?Array.isArray(t)?t.map(Yc):[Yc(t)]:[]}function Av(t){let i=Pv(t);return e=>!i.some(n=>e.urlAfterRedirects.match(n))}function Iv(t){return t.split("?")[0]}function Zc(t){return(i,e)=>t(i)===t(e)}function wv(t){switch(t.navigationEndComparator){case"fullUrl":return Zc(i=>i.urlAfterRedirects);case"ignoreQueryParams":return Zc(i=>Iv(i.urlAfterRedirects));default:return t.navigationEndComparator}}var Wo=(()=>{let i=class i{constructor(n,r,o,d,m,p,f){if(this.router=n,this.platformId=r,this.config=o,this.pageTitleProvider=d,this.pageUrlProvider=m,this.tracker=p,this.interceptors=f,this.initialize=Pr(()=>{if(this.config.disabled||!rn(this.platformId))return;let _=this.config.delay===-1?ra:ca(this.config.delay),y=wv(this.config);this.router.events.pipe(tt(Mv),tt(Av(this.config.exclude)),da(y),_,We(T=>this.presetPageTitleAndUrl(T).pipe(Ke(({pageUrl:P})=>({pageUrl:P,event:T})))),aa(({event:T,pageUrl:P})=>this.callInterceptors(T).pipe(q(()=>this.trackPageView(P))))).subscribe()},bv),f&&!Array.isArray(f))throw Cv()}init(){this.initialize()}callInterceptors(n){return this.interceptors?ct(this.interceptors.map(r=>{let o=r.beforePageTrack(n);return(o==null?Le(void 0):Or(o)).pipe(ke(1),Yi(void 0))})).pipe(la(void 0),Yi(void 0)):Le(void 0)}presetPageTitleAndUrl(n){let r=this.config.trackPageTitle?this.pageTitleProvider.getCurrentPageTitle(n).pipe(q(d=>this.tracker.setDocumentTitle(d))):Le(void 0),o=Or(this.pageUrlProvider.getCurrentPageUrl(n)).pipe(q(d=>this.tracker.setCustomUrl(d)));return oa([r,o]).pipe(Ke(([d,m])=>({pageUrl:m})))}trackPageView(n){this.tracker.trackPageView(),this.config.enableLinkTracking&&this.tracker.enableLinkTracking(this.config.enableLinkTracking==="enable-pseudo"),this.tracker.setReferrerUrl(n)}};i.\u0275fac=function(r){return new(r||i)(X(Q),X(nn),X(Xo),X(td),X(id),X(_n),X(Ev,8))},i.\u0275prov=he({token:i,factory:i.\u0275fac});let t=i;return t})();function nd(t){let i=kv(t);return Jc("Router",i)}function kv(t){return[Wo,{provide:Ko,useValue:!0},{provide:ed,useValue:t},{provide:Xo,useFactory:_v},{provide:id,useFactory:xv},{provide:td,useClass:Sv},Wo,{provide:bn,multi:!0,useValue(){I(Wo).initialize()}}]}var rd=(()=>{let i=class i extends $a{constructor(){super();try{if(typeof sessionStorage<"u"&&sessionStorage){this._db=sessionStorage,this._pasBon=!1,this._enableStorage=!0;return}}catch{}this._enableStorage=!1,this._pasBon=!0,console.error(Kt[0],"sessionStorage is not available !")}static encode(n){return JSON.stringify(n)}static decode(n){if(n===void 0)return n;try{return JSON.parse(n)}catch{return}}ready(){return Promise.resolve(!0)}isEnable(){return this._enableStorage}disableStorage(n=!1){this._enableStorage=this._pasBon?!1:!n}get(n){if(!this._enableStorage)return Promise.reject(Kt[1]);let r=this._db.getItem(n);return Promise.resolve(i.decode(r))}set(n,r){if(!this._enableStorage)return Promise.reject(Kt[1]);try{this._db.setItem(n,i.encode(r))}catch(o){console.error("SessionStorageService.set setItem :",o)}return Promise.resolve(r)}remove(n){return this._enableStorage?(this._db.removeItem(n),Promise.resolve()):Promise.reject(Kt[1])}clear(){return this._pasBon?Promise.reject(Kt[1]):(this._db.clear(),Promise.resolve())}length(){return this._enableStorage?Promise.resolve(this._db.length):Promise.reject(Kt[1])}keys(){if(!this._enableStorage)return Promise.reject(Kt[1]);let n=[],r=this._db.length;for(let o=0;o<r;o++){let d=this._db.key(o);d&&n.push(d)}return Promise.resolve(n)}iterate(n){if(!this._enableStorage)return Promise.reject(Kt[1]);let r=this._db.length;for(let o=0;o<r;o++){let d=this._db.key(o);if(d){let m=i.decode(this._db.getItem(d));n(m,d,o+1)}}return Promise.resolve()}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();xa(Lc,"fr-FR",Bc);var od=(()=>{let i=class i{constructor(n){if(n)throw new Error("EDWebCoreModule has already been loaded. Import it in the AppModule only.")}};i.\u0275fac=function(r){return new(r||i)(X(i,12))},i.\u0275mod=xe({type:i}),i.\u0275inj=Se({providers:[{provide:Lr,useValue:"fr-FR"},{provide:"StorageService",useClass:rd},{provide:"SecureStorageService",useFactory:()=>new Ka},ga(()=>I(M).ready()),Xc({siteId:1,trackerUrl:"https://piwik.ecoledirecte.com/"},nd({delay:1e3}))],imports:[Ta,ll,Ys.forRoot(),Ls.forRoot(),Rs.forRoot(),el.forRoot(),Zs.forRoot(),Xs.forRoot(),Ws.forRoot(),Es.forRoot(),Jn.forRoot(Ms),tl.forRoot(),il.forRoot(),rl.forRoot(),ks.forRoot(),Ds.forRoot(),nl.forRoot(),cl.forRoot({}),Dc.forRoot(Ts),zo.forRoot(),hs.forRoot(Ye),zo]});let t=i;return t})();var ad=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=xe({type:i}),i.\u0275inj=Se({imports:[mt]});let t=i;return t})();var sd=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=xe({type:i}),i.\u0275inj=Se({imports:[mt,ad]});let t=i;return t})();var Ir=(()=>{let i=class i{constructor(n){if(n)throw new Error("PagesModule has already been loaded. Import it in the AppModule only.")}};i.\u0275fac=function(r){return new(r||i)(X(i,12))},i.\u0275mod=xe({type:i}),i.\u0275inj=Se({imports:[mt]});let t=i;return t})();var ld=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=xe({type:i}),i.\u0275inj=Se({imports:[mt,Ir]});let t=i;return t})();var cd=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=xe({type:i}),i.\u0275inj=Se({imports:[mt,ol,dl,sl,tr]});let t=i;return t})();var dd=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=xe({type:i,bootstrap:[Uc]}),i.\u0275inj=Se({imports:[wn,Vl,Ic,od,sd,Ir,ld,cd,al,Is,Js,Jn,Xa,tr,mt]});let t=i;return t})();var md=na(ud());(0,md.default)({required:{e:89,f:89,o:91,o_a:91,s:13,c:89,samsung:16},insecure:!0,unsupported:!0,api:2021.1,reminder:1,reminderClosed:1,text:{msg:"Votre navigateur ({brow_name}) n'est peut \xEAtre pas compatible.",msgmore:"Cette version ne vous permet pas d'utiliser correctement ce site et ses fonctionnalit\xE9s avanc\xE9es.",bupdate:"Mettre \xE0 jour le navigateur",bignore:"Ignorer",remind:"Une nouvelle alerte sera affich\xE9e dans {days} jour(s).",bnever:"Ne plus afficher"}});xs.production&&(Qa(),void 0);Ia().bootstrapModule(dd).catch(t=>console.error(t));
/*! Bundled license information:

@angular/animations/fesm2022/browser.mjs:
  (**
   * @license Angular v19.1.7
   * (c) 2010-2024 Google LLC. https://angular.io/
   * License: MIT
   *)

@angular/platform-browser/fesm2022/animations.mjs:
  (**
   * @license Angular v19.1.7
   * (c) 2010-2024 Google LLC. https://angular.io/
   * License: MIT
   *)

@angular/common/locales/fr.mjs:
  (**
   * @license
   * Copyright Google LLC All Rights Reserved.
   *
   * Use of this source code is governed by an MIT-style license that can be
   * found in the LICENSE file at https://angular.dev/license
   *)

@angular/common/locales/extra/fr.mjs:
  (**
   * @license
   * Copyright Google LLC All Rights Reserved.
   *
   * Use of this source code is governed by an MIT-style license that can be
   * found in the LICENSE file at https://angular.dev/license
   *)
*/
  </script>
  <div aria-live="assertive" class="MJX_LiveRegion" style="background-color: white;">
   <div>
   </div>
  </div>
  <div aria-live="assertive" class="MJX_LiveRegion" style="background-color: white;">
   <div>
   </div>
  </div>
  <div class="MJX_HoverRegion" style="background-color: white;">
   <div style="line-height: 0;">
   </div>
  </div>
  <div class="MJX_ToolTip" style="background-color: white;">
   <div>
   </div>
  </div>
  <div class="MJX_ToolTip" style="background-color: white;">
   <div>
   </div>
  </div>
  <div class="MJX_ToolTip" style="background-color: white;">
   <div>
   </div>
  </div>
 </body>
</html>
